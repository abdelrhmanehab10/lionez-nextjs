"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/mongodb";
exports.ids = ["vendor-chunks/mongodb"];
exports.modules = {

/***/ "(ssr)/./node_modules/mongodb/lib/admin.js":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/lib/admin.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Admin = void 0;\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst execute_operation_1 = __webpack_require__(/*! ./operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst list_databases_1 = __webpack_require__(/*! ./operations/list_databases */ \"(ssr)/./node_modules/mongodb/lib/operations/list_databases.js\");\nconst remove_user_1 = __webpack_require__(/*! ./operations/remove_user */ \"(ssr)/./node_modules/mongodb/lib/operations/remove_user.js\");\nconst run_command_1 = __webpack_require__(/*! ./operations/run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\nconst validate_collection_1 = __webpack_require__(/*! ./operations/validate_collection */ \"(ssr)/./node_modules/mongodb/lib/operations/validate_collection.js\");\n/**\n * The **Admin** class is an internal class that allows convenient access to\n * the admin functionality and commands for MongoDB.\n *\n * **ADMIN Cannot directly be instantiated**\n * @public\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * const client = new MongoClient('mongodb://localhost:27017');\n * const admin = client.db().admin();\n * const dbInfo = await admin.listDatabases();\n * for (const db of dbInfo.databases) {\n *   console.log(db.name);\n * }\n * ```\n */ class Admin {\n    /**\n     * Create a new Admin instance\n     * @internal\n     */ constructor(db){\n        this.s = {\n            db\n        };\n    }\n    /**\n     * Execute a command\n     *\n     * The driver will ensure the following fields are attached to the command sent to the server:\n     * - `lsid` - sourced from an implicit session or options.session\n     * - `$readPreference` - defaults to primary or can be configured by options.readPreference\n     * - `$db` - sourced from the name of this database\n     *\n     * If the client has a serverApi setting:\n     * - `apiVersion`\n     * - `apiStrict`\n     * - `apiDeprecationErrors`\n     *\n     * When in a transaction:\n     * - `readConcern` - sourced from readConcern set on the TransactionOptions\n     * - `writeConcern` - sourced from writeConcern set on the TransactionOptions\n     *\n     * Attaching any of the above fields to the command will have no effect as the driver will overwrite the value.\n     *\n     * @param command - The command to execute\n     * @param options - Optional settings for the command\n     */ async command(command, options) {\n        return (0, execute_operation_1.executeOperation)(this.s.db.client, new run_command_1.RunAdminCommandOperation(command, {\n            ...(0, bson_1.resolveBSONOptions)(options),\n            session: options?.session,\n            readPreference: options?.readPreference\n        }));\n    }\n    /**\n     * Retrieve the server build information\n     *\n     * @param options - Optional settings for the command\n     */ async buildInfo(options) {\n        return this.command({\n            buildinfo: 1\n        }, options);\n    }\n    /**\n     * Retrieve the server build information\n     *\n     * @param options - Optional settings for the command\n     */ async serverInfo(options) {\n        return this.command({\n            buildinfo: 1\n        }, options);\n    }\n    /**\n     * Retrieve this db's server status.\n     *\n     * @param options - Optional settings for the command\n     */ async serverStatus(options) {\n        return this.command({\n            serverStatus: 1\n        }, options);\n    }\n    /**\n     * Ping the MongoDB server and retrieve results\n     *\n     * @param options - Optional settings for the command\n     */ async ping(options) {\n        return this.command({\n            ping: 1\n        }, options);\n    }\n    /**\n     * Remove a user from a database\n     *\n     * @param username - The username to remove\n     * @param options - Optional settings for the command\n     */ async removeUser(username, options) {\n        return (0, execute_operation_1.executeOperation)(this.s.db.client, new remove_user_1.RemoveUserOperation(this.s.db, username, {\n            dbName: \"admin\",\n            ...options\n        }));\n    }\n    /**\n     * Validate an existing collection\n     *\n     * @param collectionName - The name of the collection to validate.\n     * @param options - Optional settings for the command\n     */ async validateCollection(collectionName, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.s.db.client, new validate_collection_1.ValidateCollectionOperation(this, collectionName, options));\n    }\n    /**\n     * List the available databases\n     *\n     * @param options - Optional settings for the command\n     */ async listDatabases(options) {\n        return (0, execute_operation_1.executeOperation)(this.s.db.client, new list_databases_1.ListDatabasesOperation(this.s.db, options));\n    }\n    /**\n     * Get ReplicaSet status\n     *\n     * @param options - Optional settings for the command\n     */ async replSetGetStatus(options) {\n        return this.command({\n            replSetGetStatus: 1\n        }, options);\n    }\n}\nexports.Admin = Admin; //# sourceMappingURL=admin.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYWRtaW4uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGFBQWEsR0FBRyxLQUFLO0FBQ3JCLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLHdEQUFRO0FBQy9CLE1BQU1DLHNCQUFzQkQsbUJBQU9BLENBQUMsd0dBQWdDO0FBQ3BFLE1BQU1FLG1CQUFtQkYsbUJBQU9BLENBQUMsa0dBQTZCO0FBQzlELE1BQU1HLGdCQUFnQkgsbUJBQU9BLENBQUMsNEZBQTBCO0FBQ3hELE1BQU1JLGdCQUFnQkosbUJBQU9BLENBQUMsNEZBQTBCO0FBQ3hELE1BQU1LLHdCQUF3QkwsbUJBQU9BLENBQUMsNEdBQWtDO0FBQ3hFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FrQkMsR0FDRCxNQUFNRjtJQUNGOzs7S0FHQyxHQUNEUSxZQUFZQyxFQUFFLENBQUU7UUFDWixJQUFJLENBQUNDLENBQUMsR0FBRztZQUFFRDtRQUFHO0lBQ2xCO0lBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXFCQyxHQUNELE1BQU1FLFFBQVFBLE9BQU8sRUFBRUMsT0FBTyxFQUFFO1FBQzVCLE9BQU8sQ0FBQyxHQUFHVCxvQkFBb0JVLGdCQUFnQixFQUFFLElBQUksQ0FBQ0gsQ0FBQyxDQUFDRCxFQUFFLENBQUNLLE1BQU0sRUFBRSxJQUFJUixjQUFjUyx3QkFBd0IsQ0FBQ0osU0FBUztZQUNuSCxHQUFHLENBQUMsR0FBR1YsT0FBT2Usa0JBQWtCLEVBQUVKLFFBQVE7WUFDMUNLLFNBQVNMLFNBQVNLO1lBQ2xCQyxnQkFBZ0JOLFNBQVNNO1FBQzdCO0lBQ0o7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTUMsVUFBVVAsT0FBTyxFQUFFO1FBQ3JCLE9BQU8sSUFBSSxDQUFDRCxPQUFPLENBQUM7WUFBRVMsV0FBVztRQUFFLEdBQUdSO0lBQzFDO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1TLFdBQVdULE9BQU8sRUFBRTtRQUN0QixPQUFPLElBQUksQ0FBQ0QsT0FBTyxDQUFDO1lBQUVTLFdBQVc7UUFBRSxHQUFHUjtJQUMxQztJQUNBOzs7O0tBSUMsR0FDRCxNQUFNVSxhQUFhVixPQUFPLEVBQUU7UUFDeEIsT0FBTyxJQUFJLENBQUNELE9BQU8sQ0FBQztZQUFFVyxjQUFjO1FBQUUsR0FBR1Y7SUFDN0M7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTVcsS0FBS1gsT0FBTyxFQUFFO1FBQ2hCLE9BQU8sSUFBSSxDQUFDRCxPQUFPLENBQUM7WUFBRVksTUFBTTtRQUFFLEdBQUdYO0lBQ3JDO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNWSxXQUFXQyxRQUFRLEVBQUViLE9BQU8sRUFBRTtRQUNoQyxPQUFPLENBQUMsR0FBR1Qsb0JBQW9CVSxnQkFBZ0IsRUFBRSxJQUFJLENBQUNILENBQUMsQ0FBQ0QsRUFBRSxDQUFDSyxNQUFNLEVBQUUsSUFBSVQsY0FBY3FCLG1CQUFtQixDQUFDLElBQUksQ0FBQ2hCLENBQUMsQ0FBQ0QsRUFBRSxFQUFFZ0IsVUFBVTtZQUFFRSxRQUFRO1lBQVMsR0FBR2YsT0FBTztRQUFDO0lBQ2hLO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNZ0IsbUJBQW1CQyxjQUFjLEVBQUVqQixVQUFVLENBQUMsQ0FBQyxFQUFFO1FBQ25ELE9BQU8sQ0FBQyxHQUFHVCxvQkFBb0JVLGdCQUFnQixFQUFFLElBQUksQ0FBQ0gsQ0FBQyxDQUFDRCxFQUFFLENBQUNLLE1BQU0sRUFBRSxJQUFJUCxzQkFBc0J1QiwyQkFBMkIsQ0FBQyxJQUFJLEVBQUVELGdCQUFnQmpCO0lBQ25KO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1tQixjQUFjbkIsT0FBTyxFQUFFO1FBQ3pCLE9BQU8sQ0FBQyxHQUFHVCxvQkFBb0JVLGdCQUFnQixFQUFFLElBQUksQ0FBQ0gsQ0FBQyxDQUFDRCxFQUFFLENBQUNLLE1BQU0sRUFBRSxJQUFJVixpQkFBaUI0QixzQkFBc0IsQ0FBQyxJQUFJLENBQUN0QixDQUFDLENBQUNELEVBQUUsRUFBRUc7SUFDOUg7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTXFCLGlCQUFpQnJCLE9BQU8sRUFBRTtRQUM1QixPQUFPLElBQUksQ0FBQ0QsT0FBTyxDQUFDO1lBQUVzQixrQkFBa0I7UUFBRSxHQUFHckI7SUFDakQ7QUFDSjtBQUNBZCxhQUFhLEdBQUdFLE9BQ2hCLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYWRtaW4uanM/ZWUxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQWRtaW4gPSB2b2lkIDA7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi9ic29uXCIpO1xuY29uc3QgZXhlY3V0ZV9vcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCBsaXN0X2RhdGFiYXNlc18xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9saXN0X2RhdGFiYXNlc1wiKTtcbmNvbnN0IHJlbW92ZV91c2VyXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3JlbW92ZV91c2VyXCIpO1xuY29uc3QgcnVuX2NvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvcnVuX2NvbW1hbmRcIik7XG5jb25zdCB2YWxpZGF0ZV9jb2xsZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3ZhbGlkYXRlX2NvbGxlY3Rpb25cIik7XG4vKipcbiAqIFRoZSAqKkFkbWluKiogY2xhc3MgaXMgYW4gaW50ZXJuYWwgY2xhc3MgdGhhdCBhbGxvd3MgY29udmVuaWVudCBhY2Nlc3MgdG9cbiAqIHRoZSBhZG1pbiBmdW5jdGlvbmFsaXR5IGFuZCBjb21tYW5kcyBmb3IgTW9uZ29EQi5cbiAqXG4gKiAqKkFETUlOIENhbm5vdCBkaXJlY3RseSBiZSBpbnN0YW50aWF0ZWQqKlxuICogQHB1YmxpY1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcbiAqXG4gKiBjb25zdCBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQoJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcnKTtcbiAqIGNvbnN0IGFkbWluID0gY2xpZW50LmRiKCkuYWRtaW4oKTtcbiAqIGNvbnN0IGRiSW5mbyA9IGF3YWl0IGFkbWluLmxpc3REYXRhYmFzZXMoKTtcbiAqIGZvciAoY29uc3QgZGIgb2YgZGJJbmZvLmRhdGFiYXNlcykge1xuICogICBjb25zb2xlLmxvZyhkYi5uYW1lKTtcbiAqIH1cbiAqIGBgYFxuICovXG5jbGFzcyBBZG1pbiB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEFkbWluIGluc3RhbmNlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGIpIHtcbiAgICAgICAgdGhpcy5zID0geyBkYiB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIGEgY29tbWFuZFxuICAgICAqXG4gICAgICogVGhlIGRyaXZlciB3aWxsIGVuc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgYXR0YWNoZWQgdG8gdGhlIGNvbW1hbmQgc2VudCB0byB0aGUgc2VydmVyOlxuICAgICAqIC0gYGxzaWRgIC0gc291cmNlZCBmcm9tIGFuIGltcGxpY2l0IHNlc3Npb24gb3Igb3B0aW9ucy5zZXNzaW9uXG4gICAgICogLSBgJHJlYWRQcmVmZXJlbmNlYCAtIGRlZmF1bHRzIHRvIHByaW1hcnkgb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgb3B0aW9ucy5yZWFkUHJlZmVyZW5jZVxuICAgICAqIC0gYCRkYmAgLSBzb3VyY2VkIGZyb20gdGhlIG5hbWUgb2YgdGhpcyBkYXRhYmFzZVxuICAgICAqXG4gICAgICogSWYgdGhlIGNsaWVudCBoYXMgYSBzZXJ2ZXJBcGkgc2V0dGluZzpcbiAgICAgKiAtIGBhcGlWZXJzaW9uYFxuICAgICAqIC0gYGFwaVN0cmljdGBcbiAgICAgKiAtIGBhcGlEZXByZWNhdGlvbkVycm9yc2BcbiAgICAgKlxuICAgICAqIFdoZW4gaW4gYSB0cmFuc2FjdGlvbjpcbiAgICAgKiAtIGByZWFkQ29uY2VybmAgLSBzb3VyY2VkIGZyb20gcmVhZENvbmNlcm4gc2V0IG9uIHRoZSBUcmFuc2FjdGlvbk9wdGlvbnNcbiAgICAgKiAtIGB3cml0ZUNvbmNlcm5gIC0gc291cmNlZCBmcm9tIHdyaXRlQ29uY2VybiBzZXQgb24gdGhlIFRyYW5zYWN0aW9uT3B0aW9uc1xuICAgICAqXG4gICAgICogQXR0YWNoaW5nIGFueSBvZiB0aGUgYWJvdmUgZmllbGRzIHRvIHRoZSBjb21tYW5kIHdpbGwgaGF2ZSBubyBlZmZlY3QgYXMgdGhlIGRyaXZlciB3aWxsIG92ZXJ3cml0ZSB0aGUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29tbWFuZCAtIFRoZSBjb21tYW5kIHRvIGV4ZWN1dGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGNvbW1hbmQoY29tbWFuZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5zLmRiLmNsaWVudCwgbmV3IHJ1bl9jb21tYW5kXzEuUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uKGNvbW1hbmQsIHtcbiAgICAgICAgICAgIC4uLigwLCBic29uXzEucmVzb2x2ZUJTT05PcHRpb25zKShvcHRpb25zKSxcbiAgICAgICAgICAgIHNlc3Npb246IG9wdGlvbnM/LnNlc3Npb24sXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogb3B0aW9ucz8ucmVhZFByZWZlcmVuY2VcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgc2VydmVyIGJ1aWxkIGluZm9ybWF0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGJ1aWxkSW5mbyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1hbmQoeyBidWlsZGluZm86IDEgfSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIHRoZSBzZXJ2ZXIgYnVpbGQgaW5mb3JtYXRpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgc2VydmVySW5mbyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1hbmQoeyBidWlsZGluZm86IDEgfSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIHRoaXMgZGIncyBzZXJ2ZXIgc3RhdHVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBzZXJ2ZXJTdGF0dXMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21tYW5kKHsgc2VydmVyU3RhdHVzOiAxIH0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQaW5nIHRoZSBNb25nb0RCIHNlcnZlciBhbmQgcmV0cmlldmUgcmVzdWx0c1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBwaW5nKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZCh7IHBpbmc6IDEgfSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIHVzZXIgZnJvbSBhIGRhdGFiYXNlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXNlcm5hbWUgLSBUaGUgdXNlcm5hbWUgdG8gcmVtb3ZlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVVc2VyKHVzZXJuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLnMuZGIuY2xpZW50LCBuZXcgcmVtb3ZlX3VzZXJfMS5SZW1vdmVVc2VyT3BlcmF0aW9uKHRoaXMucy5kYiwgdXNlcm5hbWUsIHsgZGJOYW1lOiAnYWRtaW4nLCAuLi5vcHRpb25zIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgYW4gZXhpc3RpbmcgY29sbGVjdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxlY3Rpb25OYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGNvbGxlY3Rpb24gdG8gdmFsaWRhdGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyB2YWxpZGF0ZUNvbGxlY3Rpb24oY29sbGVjdGlvbk5hbWUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5zLmRiLmNsaWVudCwgbmV3IHZhbGlkYXRlX2NvbGxlY3Rpb25fMS5WYWxpZGF0ZUNvbGxlY3Rpb25PcGVyYXRpb24odGhpcywgY29sbGVjdGlvbk5hbWUsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdCB0aGUgYXZhaWxhYmxlIGRhdGFiYXNlc1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBsaXN0RGF0YWJhc2VzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMucy5kYi5jbGllbnQsIG5ldyBsaXN0X2RhdGFiYXNlc18xLkxpc3REYXRhYmFzZXNPcGVyYXRpb24odGhpcy5zLmRiLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBSZXBsaWNhU2V0IHN0YXR1c1xuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyByZXBsU2V0R2V0U3RhdHVzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZCh7IHJlcGxTZXRHZXRTdGF0dXM6IDEgfSwgb3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0cy5BZG1pbiA9IEFkbWluO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRtaW4uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQWRtaW4iLCJic29uXzEiLCJyZXF1aXJlIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsImxpc3RfZGF0YWJhc2VzXzEiLCJyZW1vdmVfdXNlcl8xIiwicnVuX2NvbW1hbmRfMSIsInZhbGlkYXRlX2NvbGxlY3Rpb25fMSIsImNvbnN0cnVjdG9yIiwiZGIiLCJzIiwiY29tbWFuZCIsIm9wdGlvbnMiLCJleGVjdXRlT3BlcmF0aW9uIiwiY2xpZW50IiwiUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uIiwicmVzb2x2ZUJTT05PcHRpb25zIiwic2Vzc2lvbiIsInJlYWRQcmVmZXJlbmNlIiwiYnVpbGRJbmZvIiwiYnVpbGRpbmZvIiwic2VydmVySW5mbyIsInNlcnZlclN0YXR1cyIsInBpbmciLCJyZW1vdmVVc2VyIiwidXNlcm5hbWUiLCJSZW1vdmVVc2VyT3BlcmF0aW9uIiwiZGJOYW1lIiwidmFsaWRhdGVDb2xsZWN0aW9uIiwiY29sbGVjdGlvbk5hbWUiLCJWYWxpZGF0ZUNvbGxlY3Rpb25PcGVyYXRpb24iLCJsaXN0RGF0YWJhc2VzIiwiTGlzdERhdGFiYXNlc09wZXJhdGlvbiIsInJlcGxTZXRHZXRTdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/admin.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/bson.js":
/*!******************************************!*\
  !*** ./node_modules/mongodb/lib/bson.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.resolveBSONOptions = exports.pluckBSONSerializeOptions = exports.UUID = exports.Timestamp = exports.serialize = exports.ObjectId = exports.MinKey = exports.MaxKey = exports.Long = exports.Int32 = exports.EJSON = exports.Double = exports.deserialize = exports.Decimal128 = exports.DBRef = exports.Code = exports.calculateObjectSize = exports.BSONType = exports.BSONSymbol = exports.BSONRegExp = exports.BSON = exports.Binary = void 0;\nvar bson_1 = __webpack_require__(/*! bson */ \"(ssr)/./node_modules/bson/lib/bson.cjs\");\nObject.defineProperty(exports, \"Binary\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Binary;\n    }\n}));\nObject.defineProperty(exports, \"BSON\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSON;\n    }\n}));\nObject.defineProperty(exports, \"BSONRegExp\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSONRegExp;\n    }\n}));\nObject.defineProperty(exports, \"BSONSymbol\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSONSymbol;\n    }\n}));\nObject.defineProperty(exports, \"BSONType\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSONType;\n    }\n}));\nObject.defineProperty(exports, \"calculateObjectSize\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.calculateObjectSize;\n    }\n}));\nObject.defineProperty(exports, \"Code\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Code;\n    }\n}));\nObject.defineProperty(exports, \"DBRef\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.DBRef;\n    }\n}));\nObject.defineProperty(exports, \"Decimal128\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Decimal128;\n    }\n}));\nObject.defineProperty(exports, \"deserialize\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.deserialize;\n    }\n}));\nObject.defineProperty(exports, \"Double\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Double;\n    }\n}));\nObject.defineProperty(exports, \"EJSON\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.EJSON;\n    }\n}));\nObject.defineProperty(exports, \"Int32\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Int32;\n    }\n}));\nObject.defineProperty(exports, \"Long\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Long;\n    }\n}));\nObject.defineProperty(exports, \"MaxKey\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.MaxKey;\n    }\n}));\nObject.defineProperty(exports, \"MinKey\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.MinKey;\n    }\n}));\nObject.defineProperty(exports, \"ObjectId\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.ObjectId;\n    }\n}));\nObject.defineProperty(exports, \"serialize\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.serialize;\n    }\n}));\nObject.defineProperty(exports, \"Timestamp\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.Timestamp;\n    }\n}));\nObject.defineProperty(exports, \"UUID\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.UUID;\n    }\n}));\nfunction pluckBSONSerializeOptions(options) {\n    const { fieldsAsRaw, useBigInt64, promoteValues, promoteBuffers, promoteLongs, serializeFunctions, ignoreUndefined, bsonRegExp, raw, enableUtf8Validation } = options;\n    return {\n        fieldsAsRaw,\n        useBigInt64,\n        promoteValues,\n        promoteBuffers,\n        promoteLongs,\n        serializeFunctions,\n        ignoreUndefined,\n        bsonRegExp,\n        raw,\n        enableUtf8Validation\n    };\n}\nexports.pluckBSONSerializeOptions = pluckBSONSerializeOptions;\n/**\n * Merge the given BSONSerializeOptions, preferring options over the parent's options, and\n * substituting defaults for values not set.\n *\n * @internal\n */ function resolveBSONOptions(options, parent) {\n    const parentOptions = parent?.bsonOptions;\n    return {\n        raw: options?.raw ?? parentOptions?.raw ?? false,\n        useBigInt64: options?.useBigInt64 ?? parentOptions?.useBigInt64 ?? false,\n        promoteLongs: options?.promoteLongs ?? parentOptions?.promoteLongs ?? true,\n        promoteValues: options?.promoteValues ?? parentOptions?.promoteValues ?? true,\n        promoteBuffers: options?.promoteBuffers ?? parentOptions?.promoteBuffers ?? false,\n        ignoreUndefined: options?.ignoreUndefined ?? parentOptions?.ignoreUndefined ?? false,\n        bsonRegExp: options?.bsonRegExp ?? parentOptions?.bsonRegExp ?? false,\n        serializeFunctions: options?.serializeFunctions ?? parentOptions?.serializeFunctions ?? false,\n        fieldsAsRaw: options?.fieldsAsRaw ?? parentOptions?.fieldsAsRaw ?? {},\n        enableUtf8Validation: options?.enableUtf8Validation ?? parentOptions?.enableUtf8Validation ?? true\n    };\n}\nexports.resolveBSONOptions = resolveBSONOptions; //# sourceMappingURL=bson.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnNvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMEJBQTBCLEdBQUdBLGlDQUFpQyxHQUFHQSxZQUFZLEdBQUdBLGlCQUFpQixHQUFHQSxpQkFBaUIsR0FBR0EsZ0JBQWdCLEdBQUdBLGNBQWMsR0FBR0EsY0FBYyxHQUFHQSxZQUFZLEdBQUdBLGFBQWEsR0FBR0EsYUFBYSxHQUFHQSxjQUFjLEdBQUdBLG1CQUFtQixHQUFHQSxrQkFBa0IsR0FBR0EsYUFBYSxHQUFHQSxZQUFZLEdBQUdBLDJCQUEyQixHQUFHQSxnQkFBZ0IsR0FBR0Esa0JBQWtCLEdBQUdBLGtCQUFrQixHQUFHQSxZQUFZLEdBQUdBLGNBQWMsR0FBRyxLQUFLO0FBQ3ZiLElBQUl3QixTQUFTQyxtQkFBT0EsQ0FBQyxvREFBTTtBQUMzQjNCLDBDQUF5QztJQUFFNEIsWUFBWTtJQUFNQyxLQUFLO1FBQWMsT0FBT0gsT0FBT0QsTUFBTTtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQzFHekIsd0NBQXVDO0lBQUU0QixZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPSCxPQUFPRixJQUFJO0lBQUU7QUFBRSxDQUFDLEVBQUM7QUFDdEd4Qiw4Q0FBNkM7SUFBRTRCLFlBQVk7SUFBTUMsS0FBSztRQUFjLE9BQU9ILE9BQU9ILFVBQVU7SUFBRTtBQUFFLENBQUMsRUFBQztBQUNsSHZCLDhDQUE2QztJQUFFNEIsWUFBWTtJQUFNQyxLQUFLO1FBQWMsT0FBT0gsT0FBT0osVUFBVTtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQ2xIdEIsNENBQTJDO0lBQUU0QixZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPSCxPQUFPTCxRQUFRO0lBQUU7QUFBRSxDQUFDLEVBQUM7QUFDOUdyQix1REFBc0Q7SUFBRTRCLFlBQVk7SUFBTUMsS0FBSztRQUFjLE9BQU9ILE9BQU9OLG1CQUFtQjtJQUFFO0FB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YUFBYUQsU0FBU0MsZUFBZVcsZUFBZVgsZUFBZSxDQUFDO1FBQ3BFUyxzQkFBc0JWLFNBQVNVLHdCQUF3QkUsZUFBZUYsd0JBQXdCO0lBQ2xHO0FBQ0o7QUFDQXRDLDBCQUEwQixHQUFHRSxvQkFDN0IsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9ic29uLmpzPzFlY2EiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlc29sdmVCU09OT3B0aW9ucyA9IGV4cG9ydHMucGx1Y2tCU09OU2VyaWFsaXplT3B0aW9ucyA9IGV4cG9ydHMuVVVJRCA9IGV4cG9ydHMuVGltZXN0YW1wID0gZXhwb3J0cy5zZXJpYWxpemUgPSBleHBvcnRzLk9iamVjdElkID0gZXhwb3J0cy5NaW5LZXkgPSBleHBvcnRzLk1heEtleSA9IGV4cG9ydHMuTG9uZyA9IGV4cG9ydHMuSW50MzIgPSBleHBvcnRzLkVKU09OID0gZXhwb3J0cy5Eb3VibGUgPSBleHBvcnRzLmRlc2VyaWFsaXplID0gZXhwb3J0cy5EZWNpbWFsMTI4ID0gZXhwb3J0cy5EQlJlZiA9IGV4cG9ydHMuQ29kZSA9IGV4cG9ydHMuY2FsY3VsYXRlT2JqZWN0U2l6ZSA9IGV4cG9ydHMuQlNPTlR5cGUgPSBleHBvcnRzLkJTT05TeW1ib2wgPSBleHBvcnRzLkJTT05SZWdFeHAgPSBleHBvcnRzLkJTT04gPSBleHBvcnRzLkJpbmFyeSA9IHZvaWQgMDtcbnZhciBic29uXzEgPSByZXF1aXJlKFwiYnNvblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJpbmFyeVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLkJpbmFyeTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJTT05cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5CU09OOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQlNPTlJlZ0V4cFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLkJTT05SZWdFeHA7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJCU09OU3ltYm9sXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuQlNPTlN5bWJvbDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJTT05UeXBlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuQlNPTlR5cGU7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjYWxjdWxhdGVPYmplY3RTaXplXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuY2FsY3VsYXRlT2JqZWN0U2l6ZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvZGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5Db2RlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiREJSZWZcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5EQlJlZjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRlY2ltYWwxMjhcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5EZWNpbWFsMTI4OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZGVzZXJpYWxpemVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5kZXNlcmlhbGl6ZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRvdWJsZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLkRvdWJsZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkVKU09OXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuRUpTT047IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJJbnQzMlwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLkludDMyOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTG9uZ1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLkxvbmc7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNYXhLZXlcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5NYXhLZXk7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNaW5LZXlcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5NaW5LZXk7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJPYmplY3RJZFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLk9iamVjdElkOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwic2VyaWFsaXplXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuc2VyaWFsaXplOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVGltZXN0YW1wXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzEuVGltZXN0YW1wOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVVVJRFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8xLlVVSUQ7IH0gfSk7XG5mdW5jdGlvbiBwbHVja0JTT05TZXJpYWxpemVPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGZpZWxkc0FzUmF3LCB1c2VCaWdJbnQ2NCwgcHJvbW90ZVZhbHVlcywgcHJvbW90ZUJ1ZmZlcnMsIHByb21vdGVMb25ncywgc2VyaWFsaXplRnVuY3Rpb25zLCBpZ25vcmVVbmRlZmluZWQsIGJzb25SZWdFeHAsIHJhdywgZW5hYmxlVXRmOFZhbGlkYXRpb24gfSA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmllbGRzQXNSYXcsXG4gICAgICAgIHVzZUJpZ0ludDY0LFxuICAgICAgICBwcm9tb3RlVmFsdWVzLFxuICAgICAgICBwcm9tb3RlQnVmZmVycyxcbiAgICAgICAgcHJvbW90ZUxvbmdzLFxuICAgICAgICBzZXJpYWxpemVGdW5jdGlvbnMsXG4gICAgICAgIGlnbm9yZVVuZGVmaW5lZCxcbiAgICAgICAgYnNvblJlZ0V4cCxcbiAgICAgICAgcmF3LFxuICAgICAgICBlbmFibGVVdGY4VmFsaWRhdGlvblxuICAgIH07XG59XG5leHBvcnRzLnBsdWNrQlNPTlNlcmlhbGl6ZU9wdGlvbnMgPSBwbHVja0JTT05TZXJpYWxpemVPcHRpb25zO1xuLyoqXG4gKiBNZXJnZSB0aGUgZ2l2ZW4gQlNPTlNlcmlhbGl6ZU9wdGlvbnMsIHByZWZlcnJpbmcgb3B0aW9ucyBvdmVyIHRoZSBwYXJlbnQncyBvcHRpb25zLCBhbmRcbiAqIHN1YnN0aXR1dGluZyBkZWZhdWx0cyBmb3IgdmFsdWVzIG5vdCBzZXQuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVCU09OT3B0aW9ucyhvcHRpb25zLCBwYXJlbnQpIHtcbiAgICBjb25zdCBwYXJlbnRPcHRpb25zID0gcGFyZW50Py5ic29uT3B0aW9ucztcbiAgICByZXR1cm4ge1xuICAgICAgICByYXc6IG9wdGlvbnM/LnJhdyA/PyBwYXJlbnRPcHRpb25zPy5yYXcgPz8gZmFsc2UsXG4gICAgICAgIHVzZUJpZ0ludDY0OiBvcHRpb25zPy51c2VCaWdJbnQ2NCA/PyBwYXJlbnRPcHRpb25zPy51c2VCaWdJbnQ2NCA/PyBmYWxzZSxcbiAgICAgICAgcHJvbW90ZUxvbmdzOiBvcHRpb25zPy5wcm9tb3RlTG9uZ3MgPz8gcGFyZW50T3B0aW9ucz8ucHJvbW90ZUxvbmdzID8/IHRydWUsXG4gICAgICAgIHByb21vdGVWYWx1ZXM6IG9wdGlvbnM/LnByb21vdGVWYWx1ZXMgPz8gcGFyZW50T3B0aW9ucz8ucHJvbW90ZVZhbHVlcyA/PyB0cnVlLFxuICAgICAgICBwcm9tb3RlQnVmZmVyczogb3B0aW9ucz8ucHJvbW90ZUJ1ZmZlcnMgPz8gcGFyZW50T3B0aW9ucz8ucHJvbW90ZUJ1ZmZlcnMgPz8gZmFsc2UsXG4gICAgICAgIGlnbm9yZVVuZGVmaW5lZDogb3B0aW9ucz8uaWdub3JlVW5kZWZpbmVkID8/IHBhcmVudE9wdGlvbnM/Lmlnbm9yZVVuZGVmaW5lZCA/PyBmYWxzZSxcbiAgICAgICAgYnNvblJlZ0V4cDogb3B0aW9ucz8uYnNvblJlZ0V4cCA/PyBwYXJlbnRPcHRpb25zPy5ic29uUmVnRXhwID8/IGZhbHNlLFxuICAgICAgICBzZXJpYWxpemVGdW5jdGlvbnM6IG9wdGlvbnM/LnNlcmlhbGl6ZUZ1bmN0aW9ucyA/PyBwYXJlbnRPcHRpb25zPy5zZXJpYWxpemVGdW5jdGlvbnMgPz8gZmFsc2UsXG4gICAgICAgIGZpZWxkc0FzUmF3OiBvcHRpb25zPy5maWVsZHNBc1JhdyA/PyBwYXJlbnRPcHRpb25zPy5maWVsZHNBc1JhdyA/PyB7fSxcbiAgICAgICAgZW5hYmxlVXRmOFZhbGlkYXRpb246IG9wdGlvbnM/LmVuYWJsZVV0ZjhWYWxpZGF0aW9uID8/IHBhcmVudE9wdGlvbnM/LmVuYWJsZVV0ZjhWYWxpZGF0aW9uID8/IHRydWVcbiAgICB9O1xufVxuZXhwb3J0cy5yZXNvbHZlQlNPTk9wdGlvbnMgPSByZXNvbHZlQlNPTk9wdGlvbnM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ic29uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJlc29sdmVCU09OT3B0aW9ucyIsInBsdWNrQlNPTlNlcmlhbGl6ZU9wdGlvbnMiLCJVVUlEIiwiVGltZXN0YW1wIiwic2VyaWFsaXplIiwiT2JqZWN0SWQiLCJNaW5LZXkiLCJNYXhLZXkiLCJMb25nIiwiSW50MzIiLCJFSlNPTiIsIkRvdWJsZSIsImRlc2VyaWFsaXplIiwiRGVjaW1hbDEyOCIsIkRCUmVmIiwiQ29kZSIsImNhbGN1bGF0ZU9iamVjdFNpemUiLCJCU09OVHlwZSIsIkJTT05TeW1ib2wiLCJCU09OUmVnRXhwIiwiQlNPTiIsIkJpbmFyeSIsImJzb25fMSIsInJlcXVpcmUiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib3B0aW9ucyIsImZpZWxkc0FzUmF3IiwidXNlQmlnSW50NjQiLCJwcm9tb3RlVmFsdWVzIiwicHJvbW90ZUJ1ZmZlcnMiLCJwcm9tb3RlTG9uZ3MiLCJzZXJpYWxpemVGdW5jdGlvbnMiLCJpZ25vcmVVbmRlZmluZWQiLCJic29uUmVnRXhwIiwicmF3IiwiZW5hYmxlVXRmOFZhbGlkYXRpb24iLCJwYXJlbnQiLCJwYXJlbnRPcHRpb25zIiwiYnNvbk9wdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/bson.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/bulk/common.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/bulk/common.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.BulkOperationBase = exports.BulkWriteShimOperation = exports.FindOperators = exports.MongoBulkWriteError = exports.mergeBatchResults = exports.WriteError = exports.WriteConcernError = exports.BulkWriteResult = exports.Batch = exports.BatchType = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst common_functions_1 = __webpack_require__(/*! ../operations/common_functions */ \"(ssr)/./node_modules/mongodb/lib/operations/common_functions.js\");\nconst delete_1 = __webpack_require__(/*! ../operations/delete */ \"(ssr)/./node_modules/mongodb/lib/operations/delete.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst insert_1 = __webpack_require__(/*! ../operations/insert */ \"(ssr)/./node_modules/mongodb/lib/operations/insert.js\");\nconst operation_1 = __webpack_require__(/*! ../operations/operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nconst update_1 = __webpack_require__(/*! ../operations/update */ \"(ssr)/./node_modules/mongodb/lib/operations/update.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n/** @internal */ const kServerError = Symbol(\"serverError\");\n/** @public */ exports.BatchType = Object.freeze({\n    INSERT: 1,\n    UPDATE: 2,\n    DELETE: 3\n});\n/**\n * Keeps the state of a unordered batch so we can rewrite the results\n * correctly after command execution\n *\n * @public\n */ class Batch {\n    constructor(batchType, originalZeroIndex){\n        this.originalZeroIndex = originalZeroIndex;\n        this.currentIndex = 0;\n        this.originalIndexes = [];\n        this.batchType = batchType;\n        this.operations = [];\n        this.size = 0;\n        this.sizeBytes = 0;\n    }\n}\nexports.Batch = Batch;\n/**\n * @public\n * The result of a bulk write.\n */ class BulkWriteResult {\n    static generateIdMap(ids) {\n        const idMap = {};\n        for (const doc of ids){\n            idMap[doc.index] = doc._id;\n        }\n        return idMap;\n    }\n    /**\n     * Create a new BulkWriteResult instance\n     * @internal\n     */ constructor(bulkResult, isOrdered){\n        this.result = bulkResult;\n        this.insertedCount = this.result.nInserted ?? 0;\n        this.matchedCount = this.result.nMatched ?? 0;\n        this.modifiedCount = this.result.nModified ?? 0;\n        this.deletedCount = this.result.nRemoved ?? 0;\n        this.upsertedCount = this.result.upserted.length ?? 0;\n        this.upsertedIds = BulkWriteResult.generateIdMap(this.result.upserted);\n        this.insertedIds = BulkWriteResult.generateIdMap(this.getSuccessfullyInsertedIds(bulkResult, isOrdered));\n        Object.defineProperty(this, \"result\", {\n            value: this.result,\n            enumerable: false\n        });\n    }\n    /** Evaluates to true if the bulk operation correctly executes */ get ok() {\n        return this.result.ok;\n    }\n    /**\n     * Returns document_ids that were actually inserted\n     * @internal\n     */ getSuccessfullyInsertedIds(bulkResult, isOrdered) {\n        if (bulkResult.writeErrors.length === 0) return bulkResult.insertedIds;\n        if (isOrdered) {\n            return bulkResult.insertedIds.slice(0, bulkResult.writeErrors[0].index);\n        }\n        return bulkResult.insertedIds.filter(({ index })=>!bulkResult.writeErrors.some((writeError)=>index === writeError.index));\n    }\n    /** Returns the upserted id at the given index */ getUpsertedIdAt(index) {\n        return this.result.upserted[index];\n    }\n    /** Returns raw internal result */ getRawResponse() {\n        return this.result;\n    }\n    /** Returns true if the bulk operation contains a write error */ hasWriteErrors() {\n        return this.result.writeErrors.length > 0;\n    }\n    /** Returns the number of write errors off the bulk operation */ getWriteErrorCount() {\n        return this.result.writeErrors.length;\n    }\n    /** Returns a specific write error object */ getWriteErrorAt(index) {\n        return index < this.result.writeErrors.length ? this.result.writeErrors[index] : undefined;\n    }\n    /** Retrieve all write errors */ getWriteErrors() {\n        return this.result.writeErrors;\n    }\n    /** Retrieve the write concern error if one exists */ getWriteConcernError() {\n        if (this.result.writeConcernErrors.length === 0) {\n            return;\n        } else if (this.result.writeConcernErrors.length === 1) {\n            // Return the error\n            return this.result.writeConcernErrors[0];\n        } else {\n            // Combine the errors\n            let errmsg = \"\";\n            for(let i = 0; i < this.result.writeConcernErrors.length; i++){\n                const err = this.result.writeConcernErrors[i];\n                errmsg = errmsg + err.errmsg;\n                // TODO: Something better\n                if (i === 0) errmsg = errmsg + \" and \";\n            }\n            return new WriteConcernError({\n                errmsg,\n                code: error_1.MONGODB_ERROR_CODES.WriteConcernFailed\n            });\n        }\n    }\n    toString() {\n        return `BulkWriteResult(${this.result})`;\n    }\n    isOk() {\n        return this.result.ok === 1;\n    }\n}\nexports.BulkWriteResult = BulkWriteResult;\n/**\n * An error representing a failure by the server to apply the requested write concern to the bulk operation.\n * @public\n * @category Error\n */ class WriteConcernError {\n    constructor(error){\n        this[kServerError] = error;\n    }\n    /** Write concern error code. */ get code() {\n        return this[kServerError].code;\n    }\n    /** Write concern error message. */ get errmsg() {\n        return this[kServerError].errmsg;\n    }\n    /** Write concern error info. */ get errInfo() {\n        return this[kServerError].errInfo;\n    }\n    toJSON() {\n        return this[kServerError];\n    }\n    toString() {\n        return `WriteConcernError(${this.errmsg})`;\n    }\n}\nexports.WriteConcernError = WriteConcernError;\n/**\n * An error that occurred during a BulkWrite on the server.\n * @public\n * @category Error\n */ class WriteError {\n    constructor(err){\n        this.err = err;\n    }\n    /** WriteError code. */ get code() {\n        return this.err.code;\n    }\n    /** WriteError original bulk operation index. */ get index() {\n        return this.err.index;\n    }\n    /** WriteError message. */ get errmsg() {\n        return this.err.errmsg;\n    }\n    /** WriteError details. */ get errInfo() {\n        return this.err.errInfo;\n    }\n    /** Returns the underlying operation that caused the error */ getOperation() {\n        return this.err.op;\n    }\n    toJSON() {\n        return {\n            code: this.err.code,\n            index: this.err.index,\n            errmsg: this.err.errmsg,\n            op: this.err.op\n        };\n    }\n    toString() {\n        return `WriteError(${JSON.stringify(this.toJSON())})`;\n    }\n}\nexports.WriteError = WriteError;\n/** Merges results into shared data structure */ function mergeBatchResults(batch, bulkResult, err, result) {\n    // If we have an error set the result to be the err object\n    if (err) {\n        result = err;\n    } else if (result && result.result) {\n        result = result.result;\n    }\n    if (result == null) {\n        return;\n    }\n    // Do we have a top level error stop processing and return\n    if (result.ok === 0 && bulkResult.ok === 1) {\n        bulkResult.ok = 0;\n        const writeError = {\n            index: 0,\n            code: result.code || 0,\n            errmsg: result.message,\n            errInfo: result.errInfo,\n            op: batch.operations[0]\n        };\n        bulkResult.writeErrors.push(new WriteError(writeError));\n        return;\n    } else if (result.ok === 0 && bulkResult.ok === 0) {\n        return;\n    }\n    // If we have an insert Batch type\n    if (isInsertBatch(batch) && result.n) {\n        bulkResult.nInserted = bulkResult.nInserted + result.n;\n    }\n    // If we have an insert Batch type\n    if (isDeleteBatch(batch) && result.n) {\n        bulkResult.nRemoved = bulkResult.nRemoved + result.n;\n    }\n    let nUpserted = 0;\n    // We have an array of upserted values, we need to rewrite the indexes\n    if (Array.isArray(result.upserted)) {\n        nUpserted = result.upserted.length;\n        for(let i = 0; i < result.upserted.length; i++){\n            bulkResult.upserted.push({\n                index: result.upserted[i].index + batch.originalZeroIndex,\n                _id: result.upserted[i]._id\n            });\n        }\n    } else if (result.upserted) {\n        nUpserted = 1;\n        bulkResult.upserted.push({\n            index: batch.originalZeroIndex,\n            _id: result.upserted\n        });\n    }\n    // If we have an update Batch type\n    if (isUpdateBatch(batch) && result.n) {\n        const nModified = result.nModified;\n        bulkResult.nUpserted = bulkResult.nUpserted + nUpserted;\n        bulkResult.nMatched = bulkResult.nMatched + (result.n - nUpserted);\n        if (typeof nModified === \"number\") {\n            bulkResult.nModified = bulkResult.nModified + nModified;\n        } else {\n            bulkResult.nModified = 0;\n        }\n    }\n    if (Array.isArray(result.writeErrors)) {\n        for(let i = 0; i < result.writeErrors.length; i++){\n            const writeError = {\n                index: batch.originalIndexes[result.writeErrors[i].index],\n                code: result.writeErrors[i].code,\n                errmsg: result.writeErrors[i].errmsg,\n                errInfo: result.writeErrors[i].errInfo,\n                op: batch.operations[result.writeErrors[i].index]\n            };\n            bulkResult.writeErrors.push(new WriteError(writeError));\n        }\n    }\n    if (result.writeConcernError) {\n        bulkResult.writeConcernErrors.push(new WriteConcernError(result.writeConcernError));\n    }\n}\nexports.mergeBatchResults = mergeBatchResults;\nfunction executeCommands(bulkOperation, options, callback) {\n    if (bulkOperation.s.batches.length === 0) {\n        return callback(undefined, new BulkWriteResult(bulkOperation.s.bulkResult, bulkOperation.isOrdered));\n    }\n    const batch = bulkOperation.s.batches.shift();\n    function resultHandler(err, result) {\n        // Error is a driver related error not a bulk op error, return early\n        if (err && \"message\" in err && !(err instanceof error_1.MongoWriteConcernError)) {\n            return callback(new MongoBulkWriteError(err, new BulkWriteResult(bulkOperation.s.bulkResult, bulkOperation.isOrdered)));\n        }\n        if (err instanceof error_1.MongoWriteConcernError) {\n            return handleMongoWriteConcernError(batch, bulkOperation.s.bulkResult, bulkOperation.isOrdered, err, callback);\n        }\n        // Merge the results together\n        mergeBatchResults(batch, bulkOperation.s.bulkResult, err, result);\n        const writeResult = new BulkWriteResult(bulkOperation.s.bulkResult, bulkOperation.isOrdered);\n        if (bulkOperation.handleWriteError(callback, writeResult)) return;\n        // Execute the next command in line\n        executeCommands(bulkOperation, options, callback);\n    }\n    const finalOptions = (0, utils_1.resolveOptions)(bulkOperation, {\n        ...options,\n        ordered: bulkOperation.isOrdered\n    });\n    if (finalOptions.bypassDocumentValidation !== true) {\n        delete finalOptions.bypassDocumentValidation;\n    }\n    // Set an operationIf if provided\n    if (bulkOperation.operationId) {\n        resultHandler.operationId = bulkOperation.operationId;\n    }\n    // Is the bypassDocumentValidation options specific\n    if (bulkOperation.s.bypassDocumentValidation === true) {\n        finalOptions.bypassDocumentValidation = true;\n    }\n    // Is the checkKeys option disabled\n    if (bulkOperation.s.checkKeys === false) {\n        finalOptions.checkKeys = false;\n    }\n    if (finalOptions.retryWrites) {\n        if (isUpdateBatch(batch)) {\n            finalOptions.retryWrites = finalOptions.retryWrites && !batch.operations.some((op)=>op.multi);\n        }\n        if (isDeleteBatch(batch)) {\n            finalOptions.retryWrites = finalOptions.retryWrites && !batch.operations.some((op)=>op.limit === 0);\n        }\n    }\n    try {\n        const operation = isInsertBatch(batch) ? new insert_1.InsertOperation(bulkOperation.s.namespace, batch.operations, finalOptions) : isUpdateBatch(batch) ? new update_1.UpdateOperation(bulkOperation.s.namespace, batch.operations, finalOptions) : isDeleteBatch(batch) ? new delete_1.DeleteOperation(bulkOperation.s.namespace, batch.operations, finalOptions) : null;\n        if (operation != null) {\n            (0, execute_operation_1.executeOperation)(bulkOperation.s.collection.client, operation).then((result)=>resultHandler(undefined, result), (error)=>resultHandler(error));\n        }\n    } catch (err) {\n        // Force top level error\n        err.ok = 0;\n        // Merge top level error and return\n        mergeBatchResults(batch, bulkOperation.s.bulkResult, err, undefined);\n        callback();\n    }\n}\nfunction handleMongoWriteConcernError(batch, bulkResult, isOrdered, err, callback) {\n    mergeBatchResults(batch, bulkResult, undefined, err.result);\n    callback(new MongoBulkWriteError({\n        message: err.result?.writeConcernError.errmsg,\n        code: err.result?.writeConcernError.result\n    }, new BulkWriteResult(bulkResult, isOrdered)));\n}\n/**\n * An error indicating an unsuccessful Bulk Write\n * @public\n * @category Error\n */ class MongoBulkWriteError extends error_1.MongoServerError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(error, result){\n        super(error);\n        this.writeErrors = [];\n        if (error instanceof WriteConcernError) this.err = error;\n        else if (!(error instanceof Error)) {\n            this.message = error.message;\n            this.code = error.code;\n            this.writeErrors = error.writeErrors ?? [];\n        }\n        this.result = result;\n        Object.assign(this, error);\n    }\n    get name() {\n        return \"MongoBulkWriteError\";\n    }\n    /** Number of documents inserted. */ get insertedCount() {\n        return this.result.insertedCount;\n    }\n    /** Number of documents matched for update. */ get matchedCount() {\n        return this.result.matchedCount;\n    }\n    /** Number of documents modified. */ get modifiedCount() {\n        return this.result.modifiedCount;\n    }\n    /** Number of documents deleted. */ get deletedCount() {\n        return this.result.deletedCount;\n    }\n    /** Number of documents upserted. */ get upsertedCount() {\n        return this.result.upsertedCount;\n    }\n    /** Inserted document generated Id's, hash key is the index of the originating operation */ get insertedIds() {\n        return this.result.insertedIds;\n    }\n    /** Upserted document generated Id's, hash key is the index of the originating operation */ get upsertedIds() {\n        return this.result.upsertedIds;\n    }\n}\nexports.MongoBulkWriteError = MongoBulkWriteError;\n/**\n * A builder object that is returned from {@link BulkOperationBase#find}.\n * Is used to build a write operation that involves a query filter.\n *\n * @public\n */ class FindOperators {\n    /**\n     * Creates a new FindOperators object.\n     * @internal\n     */ constructor(bulkOperation){\n        this.bulkOperation = bulkOperation;\n    }\n    /** Add a multiple update operation to the bulk operation */ update(updateDocument) {\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.UPDATE, (0, update_1.makeUpdateStatement)(currentOp.selector, updateDocument, {\n            ...currentOp,\n            multi: true\n        }));\n    }\n    /** Add a single update operation to the bulk operation */ updateOne(updateDocument) {\n        if (!(0, utils_1.hasAtomicOperators)(updateDocument)) {\n            throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n        }\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.UPDATE, (0, update_1.makeUpdateStatement)(currentOp.selector, updateDocument, {\n            ...currentOp,\n            multi: false\n        }));\n    }\n    /** Add a replace one operation to the bulk operation */ replaceOne(replacement) {\n        if ((0, utils_1.hasAtomicOperators)(replacement)) {\n            throw new error_1.MongoInvalidArgumentError(\"Replacement document must not use atomic operators\");\n        }\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.UPDATE, (0, update_1.makeUpdateStatement)(currentOp.selector, replacement, {\n            ...currentOp,\n            multi: false\n        }));\n    }\n    /** Add a delete one operation to the bulk operation */ deleteOne() {\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.DELETE, (0, delete_1.makeDeleteStatement)(currentOp.selector, {\n            ...currentOp,\n            limit: 1\n        }));\n    }\n    /** Add a delete many operation to the bulk operation */ delete() {\n        const currentOp = buildCurrentOp(this.bulkOperation);\n        return this.bulkOperation.addToOperationsList(exports.BatchType.DELETE, (0, delete_1.makeDeleteStatement)(currentOp.selector, {\n            ...currentOp,\n            limit: 0\n        }));\n    }\n    /** Upsert modifier for update bulk operation, noting that this operation is an upsert. */ upsert() {\n        if (!this.bulkOperation.s.currentOp) {\n            this.bulkOperation.s.currentOp = {};\n        }\n        this.bulkOperation.s.currentOp.upsert = true;\n        return this;\n    }\n    /** Specifies the collation for the query condition. */ collation(collation) {\n        if (!this.bulkOperation.s.currentOp) {\n            this.bulkOperation.s.currentOp = {};\n        }\n        this.bulkOperation.s.currentOp.collation = collation;\n        return this;\n    }\n    /** Specifies arrayFilters for UpdateOne or UpdateMany bulk operations. */ arrayFilters(arrayFilters) {\n        if (!this.bulkOperation.s.currentOp) {\n            this.bulkOperation.s.currentOp = {};\n        }\n        this.bulkOperation.s.currentOp.arrayFilters = arrayFilters;\n        return this;\n    }\n    /** Specifies hint for the bulk operation. */ hint(hint) {\n        if (!this.bulkOperation.s.currentOp) {\n            this.bulkOperation.s.currentOp = {};\n        }\n        this.bulkOperation.s.currentOp.hint = hint;\n        return this;\n    }\n}\nexports.FindOperators = FindOperators;\nconst executeCommandsAsync = (0, util_1.promisify)(executeCommands);\n/**\n * TODO(NODE-4063)\n * BulkWrites merge complexity is implemented in executeCommands\n * This provides a vehicle to treat bulkOperations like any other operation (hence \"shim\")\n * We would like this logic to simply live inside the BulkWriteOperation class\n * @internal\n */ class BulkWriteShimOperation extends operation_1.AbstractOperation {\n    constructor(bulkOperation, options){\n        super(options);\n        this.bulkOperation = bulkOperation;\n    }\n    get commandName() {\n        return \"bulkWrite\";\n    }\n    execute(_server, session) {\n        if (this.options.session == null) {\n            // An implicit session could have been created by 'executeOperation'\n            // So if we stick it on finalOptions here, each bulk operation\n            // will use this same session, it'll be passed in the same way\n            // an explicit session would be\n            this.options.session = session;\n        }\n        return executeCommandsAsync(this.bulkOperation, this.options);\n    }\n}\nexports.BulkWriteShimOperation = BulkWriteShimOperation;\n/** @public */ class BulkOperationBase {\n    /**\n     * Create a new OrderedBulkOperation or UnorderedBulkOperation instance\n     * @internal\n     */ constructor(collection, options, isOrdered){\n        this.collection = collection;\n        // determine whether bulkOperation is ordered or unordered\n        this.isOrdered = isOrdered;\n        const topology = (0, utils_1.getTopology)(collection);\n        options = options == null ? {} : options;\n        // TODO Bring from driver information in hello\n        // Get the namespace for the write operations\n        const namespace = collection.s.namespace;\n        // Used to mark operation as executed\n        const executed = false;\n        // Current item\n        const currentOp = undefined;\n        // Set max byte size\n        const hello = topology.lastHello();\n        // If we have autoEncryption on, batch-splitting must be done on 2mb chunks, but single documents\n        // over 2mb are still allowed\n        const usingAutoEncryption = !!(topology.s.options && topology.s.options.autoEncrypter);\n        const maxBsonObjectSize = hello && hello.maxBsonObjectSize ? hello.maxBsonObjectSize : 1024 * 1024 * 16;\n        const maxBatchSizeBytes = usingAutoEncryption ? 1024 * 1024 * 2 : maxBsonObjectSize;\n        const maxWriteBatchSize = hello && hello.maxWriteBatchSize ? hello.maxWriteBatchSize : 1000;\n        // Calculates the largest possible size of an Array key, represented as a BSON string\n        // element. This calculation:\n        //     1 byte for BSON type\n        //     # of bytes = length of (string representation of (maxWriteBatchSize - 1))\n        //   + 1 bytes for null terminator\n        const maxKeySize = (maxWriteBatchSize - 1).toString(10).length + 2;\n        // Final options for retryable writes\n        let finalOptions = Object.assign({}, options);\n        finalOptions = (0, utils_1.applyRetryableWrites)(finalOptions, collection.s.db);\n        // Final results\n        const bulkResult = {\n            ok: 1,\n            writeErrors: [],\n            writeConcernErrors: [],\n            insertedIds: [],\n            nInserted: 0,\n            nUpserted: 0,\n            nMatched: 0,\n            nModified: 0,\n            nRemoved: 0,\n            upserted: []\n        };\n        // Internal state\n        this.s = {\n            // Final result\n            bulkResult,\n            // Current batch state\n            currentBatch: undefined,\n            currentIndex: 0,\n            // ordered specific\n            currentBatchSize: 0,\n            currentBatchSizeBytes: 0,\n            // unordered specific\n            currentInsertBatch: undefined,\n            currentUpdateBatch: undefined,\n            currentRemoveBatch: undefined,\n            batches: [],\n            // Write concern\n            writeConcern: write_concern_1.WriteConcern.fromOptions(options),\n            // Max batch size options\n            maxBsonObjectSize,\n            maxBatchSizeBytes,\n            maxWriteBatchSize,\n            maxKeySize,\n            // Namespace\n            namespace,\n            // Topology\n            topology,\n            // Options\n            options: finalOptions,\n            // BSON options\n            bsonOptions: (0, bson_1.resolveBSONOptions)(options),\n            // Current operation\n            currentOp,\n            // Executed\n            executed,\n            // Collection\n            collection,\n            // Fundamental error\n            err: undefined,\n            // check keys\n            checkKeys: typeof options.checkKeys === \"boolean\" ? options.checkKeys : false\n        };\n        // bypass Validation\n        if (options.bypassDocumentValidation === true) {\n            this.s.bypassDocumentValidation = true;\n        }\n    }\n    /**\n     * Add a single insert document to the bulk operation\n     *\n     * @example\n     * ```ts\n     * const bulkOp = collection.initializeOrderedBulkOp();\n     *\n     * // Adds three inserts to the bulkOp.\n     * bulkOp\n     *   .insert({ a: 1 })\n     *   .insert({ b: 2 })\n     *   .insert({ c: 3 });\n     * await bulkOp.execute();\n     * ```\n     */ insert(document) {\n        (0, common_functions_1.maybeAddIdToDocuments)(this.collection, document, {\n            forceServerObjectId: this.shouldForceServerObjectId()\n        });\n        return this.addToOperationsList(exports.BatchType.INSERT, document);\n    }\n    /**\n     * Builds a find operation for an update/updateOne/delete/deleteOne/replaceOne.\n     * Returns a builder object used to complete the definition of the operation.\n     *\n     * @example\n     * ```ts\n     * const bulkOp = collection.initializeOrderedBulkOp();\n     *\n     * // Add an updateOne to the bulkOp\n     * bulkOp.find({ a: 1 }).updateOne({ $set: { b: 2 } });\n     *\n     * // Add an updateMany to the bulkOp\n     * bulkOp.find({ c: 3 }).update({ $set: { d: 4 } });\n     *\n     * // Add an upsert\n     * bulkOp.find({ e: 5 }).upsert().updateOne({ $set: { f: 6 } });\n     *\n     * // Add a deletion\n     * bulkOp.find({ g: 7 }).deleteOne();\n     *\n     * // Add a multi deletion\n     * bulkOp.find({ h: 8 }).delete();\n     *\n     * // Add a replaceOne\n     * bulkOp.find({ i: 9 }).replaceOne({writeConcern: { j: 10 }});\n     *\n     * // Update using a pipeline (requires Mongodb 4.2 or higher)\n     * bulk.find({ k: 11, y: { $exists: true }, z: { $exists: true } }).updateOne([\n     *   { $set: { total: { $sum: [ '$y', '$z' ] } } }\n     * ]);\n     *\n     * // All of the ops will now be executed\n     * await bulkOp.execute();\n     * ```\n     */ find(selector) {\n        if (!selector) {\n            throw new error_1.MongoInvalidArgumentError(\"Bulk find operation must specify a selector\");\n        }\n        // Save a current selector\n        this.s.currentOp = {\n            selector: selector\n        };\n        return new FindOperators(this);\n    }\n    /** Specifies a raw operation to perform in the bulk write. */ raw(op) {\n        if (op == null || typeof op !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError(\"Operation must be an object with an operation key\");\n        }\n        if (\"insertOne\" in op) {\n            const forceServerObjectId = this.shouldForceServerObjectId();\n            const document = op.insertOne && op.insertOne.document == null ? op.insertOne : op.insertOne.document;\n            (0, common_functions_1.maybeAddIdToDocuments)(this.collection, document, {\n                forceServerObjectId\n            });\n            return this.addToOperationsList(exports.BatchType.INSERT, document);\n        }\n        if (\"replaceOne\" in op || \"updateOne\" in op || \"updateMany\" in op) {\n            if (\"replaceOne\" in op) {\n                if (\"q\" in op.replaceOne) {\n                    throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n                }\n                const updateStatement = (0, update_1.makeUpdateStatement)(op.replaceOne.filter, op.replaceOne.replacement, {\n                    ...op.replaceOne,\n                    multi: false\n                });\n                if ((0, utils_1.hasAtomicOperators)(updateStatement.u)) {\n                    throw new error_1.MongoInvalidArgumentError(\"Replacement document must not use atomic operators\");\n                }\n                return this.addToOperationsList(exports.BatchType.UPDATE, updateStatement);\n            }\n            if (\"updateOne\" in op) {\n                if (\"q\" in op.updateOne) {\n                    throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n                }\n                const updateStatement = (0, update_1.makeUpdateStatement)(op.updateOne.filter, op.updateOne.update, {\n                    ...op.updateOne,\n                    multi: false\n                });\n                if (!(0, utils_1.hasAtomicOperators)(updateStatement.u)) {\n                    throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n                }\n                return this.addToOperationsList(exports.BatchType.UPDATE, updateStatement);\n            }\n            if (\"updateMany\" in op) {\n                if (\"q\" in op.updateMany) {\n                    throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n                }\n                const updateStatement = (0, update_1.makeUpdateStatement)(op.updateMany.filter, op.updateMany.update, {\n                    ...op.updateMany,\n                    multi: true\n                });\n                if (!(0, utils_1.hasAtomicOperators)(updateStatement.u)) {\n                    throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n                }\n                return this.addToOperationsList(exports.BatchType.UPDATE, updateStatement);\n            }\n        }\n        if (\"deleteOne\" in op) {\n            if (\"q\" in op.deleteOne) {\n                throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n            }\n            return this.addToOperationsList(exports.BatchType.DELETE, (0, delete_1.makeDeleteStatement)(op.deleteOne.filter, {\n                ...op.deleteOne,\n                limit: 1\n            }));\n        }\n        if (\"deleteMany\" in op) {\n            if (\"q\" in op.deleteMany) {\n                throw new error_1.MongoInvalidArgumentError(\"Raw operations are not allowed\");\n            }\n            return this.addToOperationsList(exports.BatchType.DELETE, (0, delete_1.makeDeleteStatement)(op.deleteMany.filter, {\n                ...op.deleteMany,\n                limit: 0\n            }));\n        }\n        // otherwise an unknown operation was provided\n        throw new error_1.MongoInvalidArgumentError(\"bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany\");\n    }\n    get bsonOptions() {\n        return this.s.bsonOptions;\n    }\n    get writeConcern() {\n        return this.s.writeConcern;\n    }\n    get batches() {\n        const batches = [\n            ...this.s.batches\n        ];\n        if (this.isOrdered) {\n            if (this.s.currentBatch) batches.push(this.s.currentBatch);\n        } else {\n            if (this.s.currentInsertBatch) batches.push(this.s.currentInsertBatch);\n            if (this.s.currentUpdateBatch) batches.push(this.s.currentUpdateBatch);\n            if (this.s.currentRemoveBatch) batches.push(this.s.currentRemoveBatch);\n        }\n        return batches;\n    }\n    async execute(options = {}) {\n        if (this.s.executed) {\n            throw new error_1.MongoBatchReExecutionError();\n        }\n        const writeConcern = write_concern_1.WriteConcern.fromOptions(options);\n        if (writeConcern) {\n            this.s.writeConcern = writeConcern;\n        }\n        // If we have current batch\n        if (this.isOrdered) {\n            if (this.s.currentBatch) this.s.batches.push(this.s.currentBatch);\n        } else {\n            if (this.s.currentInsertBatch) this.s.batches.push(this.s.currentInsertBatch);\n            if (this.s.currentUpdateBatch) this.s.batches.push(this.s.currentUpdateBatch);\n            if (this.s.currentRemoveBatch) this.s.batches.push(this.s.currentRemoveBatch);\n        }\n        // If we have no operations in the bulk raise an error\n        if (this.s.batches.length === 0) {\n            throw new error_1.MongoInvalidArgumentError(\"Invalid BulkOperation, Batch cannot be empty\");\n        }\n        this.s.executed = true;\n        const finalOptions = {\n            ...this.s.options,\n            ...options\n        };\n        const operation = new BulkWriteShimOperation(this, finalOptions);\n        return (0, execute_operation_1.executeOperation)(this.s.collection.client, operation);\n    }\n    /**\n     * Handles the write error before executing commands\n     * @internal\n     */ handleWriteError(callback, writeResult) {\n        if (this.s.bulkResult.writeErrors.length > 0) {\n            const msg = this.s.bulkResult.writeErrors[0].errmsg ? this.s.bulkResult.writeErrors[0].errmsg : \"write operation failed\";\n            callback(new MongoBulkWriteError({\n                message: msg,\n                code: this.s.bulkResult.writeErrors[0].code,\n                writeErrors: this.s.bulkResult.writeErrors\n            }, writeResult));\n            return true;\n        }\n        const writeConcernError = writeResult.getWriteConcernError();\n        if (writeConcernError) {\n            callback(new MongoBulkWriteError(writeConcernError, writeResult));\n            return true;\n        }\n        return false;\n    }\n    shouldForceServerObjectId() {\n        return this.s.options.forceServerObjectId === true || this.s.collection.s.db.options?.forceServerObjectId === true;\n    }\n}\nexports.BulkOperationBase = BulkOperationBase;\nObject.defineProperty(BulkOperationBase.prototype, \"length\", {\n    enumerable: true,\n    get () {\n        return this.s.currentIndex;\n    }\n});\nfunction isInsertBatch(batch) {\n    return batch.batchType === exports.BatchType.INSERT;\n}\nfunction isUpdateBatch(batch) {\n    return batch.batchType === exports.BatchType.UPDATE;\n}\nfunction isDeleteBatch(batch) {\n    return batch.batchType === exports.BatchType.DELETE;\n}\nfunction buildCurrentOp(bulkOp) {\n    let { currentOp } = bulkOp.s;\n    bulkOp.s.currentOp = undefined;\n    if (!currentOp) currentOp = {};\n    return currentOp;\n} //# sourceMappingURL=common.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnVsay9jb21tb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHQSw4QkFBOEIsR0FBR0EscUJBQXFCLEdBQUdBLDJCQUEyQixHQUFHQSx5QkFBeUIsR0FBR0Esa0JBQWtCLEdBQUdBLHlCQUF5QixHQUFHQSx1QkFBdUIsR0FBR0EsYUFBYSxHQUFHQSxpQkFBaUIsR0FBRyxLQUFLO0FBQ25RLE1BQU1ZLFNBQVNDLG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1FLFVBQVVGLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1HLHFCQUFxQkgsbUJBQU9BLENBQUMsdUdBQWdDO0FBQ25FLE1BQU1JLFdBQVdKLG1CQUFPQSxDQUFDLG1GQUFzQjtBQUMvQyxNQUFNSyxzQkFBc0JMLG1CQUFPQSxDQUFDLHlHQUFpQztBQUNyRSxNQUFNTSxXQUFXTixtQkFBT0EsQ0FBQyxtRkFBc0I7QUFDL0MsTUFBTU8sY0FBY1AsbUJBQU9BLENBQUMseUZBQXlCO0FBQ3JELE1BQU1RLFdBQVdSLG1CQUFPQSxDQUFDLG1GQUFzQjtBQUMvQyxNQUFNUyxVQUFVVCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNVSxrQkFBa0JWLG1CQUFPQSxDQUFDLDJFQUFrQjtBQUNsRCxjQUFjLEdBQ2QsTUFBTVcsZUFBZUMsT0FBTztBQUM1QixZQUFZLEdBQ1p6QixpQkFBaUIsR0FBR0YsT0FBTzRCLE1BQU0sQ0FBQztJQUM5QkMsUUFBUTtJQUNSQyxRQUFRO0lBQ1JDLFFBQVE7QUFDWjtBQUNBOzs7OztDQUtDLEdBQ0QsTUFBTW5CO0lBQ0ZvQixZQUFZQyxTQUFTLEVBQUVDLGlCQUFpQixDQUFFO1FBQ3RDLElBQUksQ0FBQ0EsaUJBQWlCLEdBQUdBO1FBQ3pCLElBQUksQ0FB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QUFDdEUsT0FBTyxFQUFFcUYsd0JBQXdCO0lBQ2hFO0FBQ0o7QUFDQTlMLHlCQUF5QixHQUFHRTtBQUM1QkosT0FBT0MsY0FBYyxDQUFDRyxrQkFBa0J1TSxTQUFTLEVBQUUsVUFBVTtJQUN6RDVJLFlBQVk7SUFDWjZJO1FBQ0ksT0FBTyxJQUFJLENBQUMvRixDQUFDLENBQUMxRSxZQUFZO0lBQzlCO0FBQ0o7QUFDQSxTQUFTOEQsY0FBY0gsS0FBSztJQUN4QixPQUFPQSxNQUFNN0QsU0FBUyxLQUFLL0IsUUFBUVcsU0FBUyxDQUFDZ0IsTUFBTTtBQUN2RDtBQUNBLFNBQVMwRSxjQUFjVCxLQUFLO0lBQ3hCLE9BQU9BLE1BQU03RCxTQUFTLEtBQUsvQixRQUFRVyxTQUFTLENBQUNpQixNQUFNO0FBQ3ZEO0FBQ0EsU0FBU3FFLGNBQWNMLEtBQUs7SUFDeEIsT0FBT0EsTUFBTTdELFNBQVMsS0FBSy9CLFFBQVFXLFNBQVMsQ0FBQ2tCLE1BQU07QUFDdkQ7QUFDQSxTQUFTK0csZUFBZStELE1BQU07SUFDMUIsSUFBSSxFQUFFaEUsU0FBUyxFQUFFLEdBQUdnRSxPQUFPaEcsQ0FBQztJQUM1QmdHLE9BQU9oRyxDQUFDLENBQUNnQyxTQUFTLEdBQUdsRTtJQUNyQixJQUFJLENBQUNrRSxXQUNEQSxZQUFZLENBQUM7SUFDakIsT0FBT0E7QUFDWCxFQUNBLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnVsay9jb21tb24uanM/ZjdjYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQnVsa09wZXJhdGlvbkJhc2UgPSBleHBvcnRzLkJ1bGtXcml0ZVNoaW1PcGVyYXRpb24gPSBleHBvcnRzLkZpbmRPcGVyYXRvcnMgPSBleHBvcnRzLk1vbmdvQnVsa1dyaXRlRXJyb3IgPSBleHBvcnRzLm1lcmdlQmF0Y2hSZXN1bHRzID0gZXhwb3J0cy5Xcml0ZUVycm9yID0gZXhwb3J0cy5Xcml0ZUNvbmNlcm5FcnJvciA9IGV4cG9ydHMuQnVsa1dyaXRlUmVzdWx0ID0gZXhwb3J0cy5CYXRjaCA9IGV4cG9ydHMuQmF0Y2hUeXBlID0gdm9pZCAwO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBjb21tb25fZnVuY3Rpb25zXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9jb21tb25fZnVuY3Rpb25zXCIpO1xuY29uc3QgZGVsZXRlXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9kZWxldGVcIik7XG5jb25zdCBleGVjdXRlX29wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCBpbnNlcnRfMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2luc2VydFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvb3BlcmF0aW9uXCIpO1xuY29uc3QgdXBkYXRlXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy91cGRhdGVcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4uL3dyaXRlX2NvbmNlcm5cIik7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrU2VydmVyRXJyb3IgPSBTeW1ib2woJ3NlcnZlckVycm9yJyk7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5CYXRjaFR5cGUgPSBPYmplY3QuZnJlZXplKHtcbiAgICBJTlNFUlQ6IDEsXG4gICAgVVBEQVRFOiAyLFxuICAgIERFTEVURTogM1xufSk7XG4vKipcbiAqIEtlZXBzIHRoZSBzdGF0ZSBvZiBhIHVub3JkZXJlZCBiYXRjaCBzbyB3ZSBjYW4gcmV3cml0ZSB0aGUgcmVzdWx0c1xuICogY29ycmVjdGx5IGFmdGVyIGNvbW1hbmQgZXhlY3V0aW9uXG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBCYXRjaCB7XG4gICAgY29uc3RydWN0b3IoYmF0Y2hUeXBlLCBvcmlnaW5hbFplcm9JbmRleCkge1xuICAgICAgICB0aGlzLm9yaWdpbmFsWmVyb0luZGV4ID0gb3JpZ2luYWxaZXJvSW5kZXg7XG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5iYXRjaFR5cGUgPSBiYXRjaFR5cGU7XG4gICAgICAgIHRoaXMub3BlcmF0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICB0aGlzLnNpemVCeXRlcyA9IDA7XG4gICAgfVxufVxuZXhwb3J0cy5CYXRjaCA9IEJhdGNoO1xuLyoqXG4gKiBAcHVibGljXG4gKiBUaGUgcmVzdWx0IG9mIGEgYnVsayB3cml0ZS5cbiAqL1xuY2xhc3MgQnVsa1dyaXRlUmVzdWx0IHtcbiAgICBzdGF0aWMgZ2VuZXJhdGVJZE1hcChpZHMpIHtcbiAgICAgICAgY29uc3QgaWRNYXAgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBkb2Mgb2YgaWRzKSB7XG4gICAgICAgICAgICBpZE1hcFtkb2MuaW5kZXhdID0gZG9jLl9pZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaWRNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBCdWxrV3JpdGVSZXN1bHQgaW5zdGFuY2VcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihidWxrUmVzdWx0LCBpc09yZGVyZWQpIHtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSBidWxrUmVzdWx0O1xuICAgICAgICB0aGlzLmluc2VydGVkQ291bnQgPSB0aGlzLnJlc3VsdC5uSW5zZXJ0ZWQgPz8gMDtcbiAgICAgICAgdGhpcy5tYXRjaGVkQ291bnQgPSB0aGlzLnJlc3VsdC5uTWF0Y2hlZCA/PyAwO1xuICAgICAgICB0aGlzLm1vZGlmaWVkQ291bnQgPSB0aGlzLnJlc3VsdC5uTW9kaWZpZWQgPz8gMDtcbiAgICAgICAgdGhpcy5kZWxldGVkQ291bnQgPSB0aGlzLnJlc3VsdC5uUmVtb3ZlZCA/PyAwO1xuICAgICAgICB0aGlzLnVwc2VydGVkQ291bnQgPSB0aGlzLnJlc3VsdC51cHNlcnRlZC5sZW5ndGggPz8gMDtcbiAgICAgICAgdGhpcy51cHNlcnRlZElkcyA9IEJ1bGtXcml0ZVJlc3VsdC5nZW5lcmF0ZUlkTWFwKHRoaXMucmVzdWx0LnVwc2VydGVkKTtcbiAgICAgICAgdGhpcy5pbnNlcnRlZElkcyA9IEJ1bGtXcml0ZVJlc3VsdC5nZW5lcmF0ZUlkTWFwKHRoaXMuZ2V0U3VjY2Vzc2Z1bGx5SW5zZXJ0ZWRJZHMoYnVsa1Jlc3VsdCwgaXNPcmRlcmVkKSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncmVzdWx0JywgeyB2YWx1ZTogdGhpcy5yZXN1bHQsIGVudW1lcmFibGU6IGZhbHNlIH0pO1xuICAgIH1cbiAgICAvKiogRXZhbHVhdGVzIHRvIHRydWUgaWYgdGhlIGJ1bGsgb3BlcmF0aW9uIGNvcnJlY3RseSBleGVjdXRlcyAqL1xuICAgIGdldCBvaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0Lm9rO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGRvY3VtZW50X2lkcyB0aGF0IHdlcmUgYWN0dWFsbHkgaW5zZXJ0ZWRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXRTdWNjZXNzZnVsbHlJbnNlcnRlZElkcyhidWxrUmVzdWx0LCBpc09yZGVyZWQpIHtcbiAgICAgICAgaWYgKGJ1bGtSZXN1bHQud3JpdGVFcnJvcnMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIGJ1bGtSZXN1bHQuaW5zZXJ0ZWRJZHM7XG4gICAgICAgIGlmIChpc09yZGVyZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBidWxrUmVzdWx0Lmluc2VydGVkSWRzLnNsaWNlKDAsIGJ1bGtSZXN1bHQud3JpdGVFcnJvcnNbMF0uaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWxrUmVzdWx0Lmluc2VydGVkSWRzLmZpbHRlcigoeyBpbmRleCB9KSA9PiAhYnVsa1Jlc3VsdC53cml0ZUVycm9ycy5zb21lKHdyaXRlRXJyb3IgPT4gaW5kZXggPT09IHdyaXRlRXJyb3IuaW5kZXgpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIHVwc2VydGVkIGlkIGF0IHRoZSBnaXZlbiBpbmRleCAqL1xuICAgIGdldFVwc2VydGVkSWRBdChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQudXBzZXJ0ZWRbaW5kZXhdO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyByYXcgaW50ZXJuYWwgcmVzdWx0ICovXG4gICAgZ2V0UmF3UmVzcG9uc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYnVsayBvcGVyYXRpb24gY29udGFpbnMgYSB3cml0ZSBlcnJvciAqL1xuICAgIGhhc1dyaXRlRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQud3JpdGVFcnJvcnMubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIG51bWJlciBvZiB3cml0ZSBlcnJvcnMgb2ZmIHRoZSBidWxrIG9wZXJhdGlvbiAqL1xuICAgIGdldFdyaXRlRXJyb3JDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0LndyaXRlRXJyb3JzLmxlbmd0aDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBzcGVjaWZpYyB3cml0ZSBlcnJvciBvYmplY3QgKi9cbiAgICBnZXRXcml0ZUVycm9yQXQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4IDwgdGhpcy5yZXN1bHQud3JpdGVFcnJvcnMubGVuZ3RoID8gdGhpcy5yZXN1bHQud3JpdGVFcnJvcnNbaW5kZXhdIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKiogUmV0cmlldmUgYWxsIHdyaXRlIGVycm9ycyAqL1xuICAgIGdldFdyaXRlRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQud3JpdGVFcnJvcnM7XG4gICAgfVxuICAgIC8qKiBSZXRyaWV2ZSB0aGUgd3JpdGUgY29uY2VybiBlcnJvciBpZiBvbmUgZXhpc3RzICovXG4gICAgZ2V0V3JpdGVDb25jZXJuRXJyb3IoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdC53cml0ZUNvbmNlcm5FcnJvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5yZXN1bHQud3JpdGVDb25jZXJuRXJyb3JzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0LndyaXRlQ29uY2VybkVycm9yc1swXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIENvbWJpbmUgdGhlIGVycm9yc1xuICAgICAgICAgICAgbGV0IGVycm1zZyA9ICcnO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlc3VsdC53cml0ZUNvbmNlcm5FcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSB0aGlzLnJlc3VsdC53cml0ZUNvbmNlcm5FcnJvcnNbaV07XG4gICAgICAgICAgICAgICAgZXJybXNnID0gZXJybXNnICsgZXJyLmVycm1zZztcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBTb21ldGhpbmcgYmV0dGVyXG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IDApXG4gICAgICAgICAgICAgICAgICAgIGVycm1zZyA9IGVycm1zZyArICcgYW5kICc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdyaXRlQ29uY2VybkVycm9yKHsgZXJybXNnLCBjb2RlOiBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuV3JpdGVDb25jZXJuRmFpbGVkIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYEJ1bGtXcml0ZVJlc3VsdCgke3RoaXMucmVzdWx0fSlgO1xuICAgIH1cbiAgICBpc09rKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQub2sgPT09IDE7XG4gICAgfVxufVxuZXhwb3J0cy5CdWxrV3JpdGVSZXN1bHQgPSBCdWxrV3JpdGVSZXN1bHQ7XG4vKipcbiAqIEFuIGVycm9yIHJlcHJlc2VudGluZyBhIGZhaWx1cmUgYnkgdGhlIHNlcnZlciB0byBhcHBseSB0aGUgcmVxdWVzdGVkIHdyaXRlIGNvbmNlcm4gdG8gdGhlIGJ1bGsgb3BlcmF0aW9uLlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIFdyaXRlQ29uY2VybkVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihlcnJvcikge1xuICAgICAgICB0aGlzW2tTZXJ2ZXJFcnJvcl0gPSBlcnJvcjtcbiAgICB9XG4gICAgLyoqIFdyaXRlIGNvbmNlcm4gZXJyb3IgY29kZS4gKi9cbiAgICBnZXQgY29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba1NlcnZlckVycm9yXS5jb2RlO1xuICAgIH1cbiAgICAvKiogV3JpdGUgY29uY2VybiBlcnJvciBtZXNzYWdlLiAqL1xuICAgIGdldCBlcnJtc2coKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXJ2ZXJFcnJvcl0uZXJybXNnO1xuICAgIH1cbiAgICAvKiogV3JpdGUgY29uY2VybiBlcnJvciBpbmZvLiAqL1xuICAgIGdldCBlcnJJbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trU2VydmVyRXJyb3JdLmVyckluZm87XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba1NlcnZlckVycm9yXTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgV3JpdGVDb25jZXJuRXJyb3IoJHt0aGlzLmVycm1zZ30pYDtcbiAgICB9XG59XG5leHBvcnRzLldyaXRlQ29uY2VybkVycm9yID0gV3JpdGVDb25jZXJuRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIHRoYXQgb2NjdXJyZWQgZHVyaW5nIGEgQnVsa1dyaXRlIG9uIHRoZSBzZXJ2ZXIuXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgV3JpdGVFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZXJyKSB7XG4gICAgICAgIHRoaXMuZXJyID0gZXJyO1xuICAgIH1cbiAgICAvKiogV3JpdGVFcnJvciBjb2RlLiAqL1xuICAgIGdldCBjb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcnIuY29kZTtcbiAgICB9XG4gICAgLyoqIFdyaXRlRXJyb3Igb3JpZ2luYWwgYnVsayBvcGVyYXRpb24gaW5kZXguICovXG4gICAgZ2V0IGluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcnIuaW5kZXg7XG4gICAgfVxuICAgIC8qKiBXcml0ZUVycm9yIG1lc3NhZ2UuICovXG4gICAgZ2V0IGVycm1zZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyLmVycm1zZztcbiAgICB9XG4gICAgLyoqIFdyaXRlRXJyb3IgZGV0YWlscy4gKi9cbiAgICBnZXQgZXJySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyLmVyckluZm87XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIG9wZXJhdGlvbiB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgKi9cbiAgICBnZXRPcGVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVyci5vcDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4geyBjb2RlOiB0aGlzLmVyci5jb2RlLCBpbmRleDogdGhpcy5lcnIuaW5kZXgsIGVycm1zZzogdGhpcy5lcnIuZXJybXNnLCBvcDogdGhpcy5lcnIub3AgfTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgV3JpdGVFcnJvcigke0pTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKCkpfSlgO1xuICAgIH1cbn1cbmV4cG9ydHMuV3JpdGVFcnJvciA9IFdyaXRlRXJyb3I7XG4vKiogTWVyZ2VzIHJlc3VsdHMgaW50byBzaGFyZWQgZGF0YSBzdHJ1Y3R1cmUgKi9cbmZ1bmN0aW9uIG1lcmdlQmF0Y2hSZXN1bHRzKGJhdGNoLCBidWxrUmVzdWx0LCBlcnIsIHJlc3VsdCkge1xuICAgIC8vIElmIHdlIGhhdmUgYW4gZXJyb3Igc2V0IHRoZSByZXN1bHQgdG8gYmUgdGhlIGVyciBvYmplY3RcbiAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJlc3VsdCA9IGVycjtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVzdWx0ICYmIHJlc3VsdC5yZXN1bHQpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlc3VsdDtcbiAgICB9XG4gICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRG8gd2UgaGF2ZSBhIHRvcCBsZXZlbCBlcnJvciBzdG9wIHByb2Nlc3NpbmcgYW5kIHJldHVyblxuICAgIGlmIChyZXN1bHQub2sgPT09IDAgJiYgYnVsa1Jlc3VsdC5vayA9PT0gMSkge1xuICAgICAgICBidWxrUmVzdWx0Lm9rID0gMDtcbiAgICAgICAgY29uc3Qgd3JpdGVFcnJvciA9IHtcbiAgICAgICAgICAgIGluZGV4OiAwLFxuICAgICAgICAgICAgY29kZTogcmVzdWx0LmNvZGUgfHwgMCxcbiAgICAgICAgICAgIGVycm1zZzogcmVzdWx0Lm1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJJbmZvOiByZXN1bHQuZXJySW5mbyxcbiAgICAgICAgICAgIG9wOiBiYXRjaC5vcGVyYXRpb25zWzBdXG4gICAgICAgIH07XG4gICAgICAgIGJ1bGtSZXN1bHQud3JpdGVFcnJvcnMucHVzaChuZXcgV3JpdGVFcnJvcih3cml0ZUVycm9yKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVzdWx0Lm9rID09PSAwICYmIGJ1bGtSZXN1bHQub2sgPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBJZiB3ZSBoYXZlIGFuIGluc2VydCBCYXRjaCB0eXBlXG4gICAgaWYgKGlzSW5zZXJ0QmF0Y2goYmF0Y2gpICYmIHJlc3VsdC5uKSB7XG4gICAgICAgIGJ1bGtSZXN1bHQubkluc2VydGVkID0gYnVsa1Jlc3VsdC5uSW5zZXJ0ZWQgKyByZXN1bHQubjtcbiAgICB9XG4gICAgLy8gSWYgd2UgaGF2ZSBhbiBpbnNlcnQgQmF0Y2ggdHlwZVxuICAgIGlmIChpc0RlbGV0ZUJhdGNoKGJhdGNoKSAmJiByZXN1bHQubikge1xuICAgICAgICBidWxrUmVzdWx0Lm5SZW1vdmVkID0gYnVsa1Jlc3VsdC5uUmVtb3ZlZCArIHJlc3VsdC5uO1xuICAgIH1cbiAgICBsZXQgblVwc2VydGVkID0gMDtcbiAgICAvLyBXZSBoYXZlIGFuIGFycmF5IG9mIHVwc2VydGVkIHZhbHVlcywgd2UgbmVlZCB0byByZXdyaXRlIHRoZSBpbmRleGVzXG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0LnVwc2VydGVkKSkge1xuICAgICAgICBuVXBzZXJ0ZWQgPSByZXN1bHQudXBzZXJ0ZWQubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC51cHNlcnRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYnVsa1Jlc3VsdC51cHNlcnRlZC5wdXNoKHtcbiAgICAgICAgICAgICAgICBpbmRleDogcmVzdWx0LnVwc2VydGVkW2ldLmluZGV4ICsgYmF0Y2gub3JpZ2luYWxaZXJvSW5kZXgsXG4gICAgICAgICAgICAgICAgX2lkOiByZXN1bHQudXBzZXJ0ZWRbaV0uX2lkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChyZXN1bHQudXBzZXJ0ZWQpIHtcbiAgICAgICAgblVwc2VydGVkID0gMTtcbiAgICAgICAgYnVsa1Jlc3VsdC51cHNlcnRlZC5wdXNoKHtcbiAgICAgICAgICAgIGluZGV4OiBiYXRjaC5vcmlnaW5hbFplcm9JbmRleCxcbiAgICAgICAgICAgIF9pZDogcmVzdWx0LnVwc2VydGVkXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBJZiB3ZSBoYXZlIGFuIHVwZGF0ZSBCYXRjaCB0eXBlXG4gICAgaWYgKGlzVXBkYXRlQmF0Y2goYmF0Y2gpICYmIHJlc3VsdC5uKSB7XG4gICAgICAgIGNvbnN0IG5Nb2RpZmllZCA9IHJlc3VsdC5uTW9kaWZpZWQ7XG4gICAgICAgIGJ1bGtSZXN1bHQublVwc2VydGVkID0gYnVsa1Jlc3VsdC5uVXBzZXJ0ZWQgKyBuVXBzZXJ0ZWQ7XG4gICAgICAgIGJ1bGtSZXN1bHQubk1hdGNoZWQgPSBidWxrUmVzdWx0Lm5NYXRjaGVkICsgKHJlc3VsdC5uIC0gblVwc2VydGVkKTtcbiAgICAgICAgaWYgKHR5cGVvZiBuTW9kaWZpZWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBidWxrUmVzdWx0Lm5Nb2RpZmllZCA9IGJ1bGtSZXN1bHQubk1vZGlmaWVkICsgbk1vZGlmaWVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnVsa1Jlc3VsdC5uTW9kaWZpZWQgPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdC53cml0ZUVycm9ycykpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQud3JpdGVFcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHdyaXRlRXJyb3IgPSB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGJhdGNoLm9yaWdpbmFsSW5kZXhlc1tyZXN1bHQud3JpdGVFcnJvcnNbaV0uaW5kZXhdLFxuICAgICAgICAgICAgICAgIGNvZGU6IHJlc3VsdC53cml0ZUVycm9yc1tpXS5jb2RlLFxuICAgICAgICAgICAgICAgIGVycm1zZzogcmVzdWx0LndyaXRlRXJyb3JzW2ldLmVycm1zZyxcbiAgICAgICAgICAgICAgICBlcnJJbmZvOiByZXN1bHQud3JpdGVFcnJvcnNbaV0uZXJySW5mbyxcbiAgICAgICAgICAgICAgICBvcDogYmF0Y2gub3BlcmF0aW9uc1tyZXN1bHQud3JpdGVFcnJvcnNbaV0uaW5kZXhdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnVsa1Jlc3VsdC53cml0ZUVycm9ycy5wdXNoKG5ldyBXcml0ZUVycm9yKHdyaXRlRXJyb3IpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVzdWx0LndyaXRlQ29uY2VybkVycm9yKSB7XG4gICAgICAgIGJ1bGtSZXN1bHQud3JpdGVDb25jZXJuRXJyb3JzLnB1c2gobmV3IFdyaXRlQ29uY2VybkVycm9yKHJlc3VsdC53cml0ZUNvbmNlcm5FcnJvcikpO1xuICAgIH1cbn1cbmV4cG9ydHMubWVyZ2VCYXRjaFJlc3VsdHMgPSBtZXJnZUJhdGNoUmVzdWx0cztcbmZ1bmN0aW9uIGV4ZWN1dGVDb21tYW5kcyhidWxrT3BlcmF0aW9uLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGlmIChidWxrT3BlcmF0aW9uLnMuYmF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHVuZGVmaW5lZCwgbmV3IEJ1bGtXcml0ZVJlc3VsdChidWxrT3BlcmF0aW9uLnMuYnVsa1Jlc3VsdCwgYnVsa09wZXJhdGlvbi5pc09yZGVyZWQpKTtcbiAgICB9XG4gICAgY29uc3QgYmF0Y2ggPSBidWxrT3BlcmF0aW9uLnMuYmF0Y2hlcy5zaGlmdCgpO1xuICAgIGZ1bmN0aW9uIHJlc3VsdEhhbmRsZXIoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgLy8gRXJyb3IgaXMgYSBkcml2ZXIgcmVsYXRlZCBlcnJvciBub3QgYSBidWxrIG9wIGVycm9yLCByZXR1cm4gZWFybHlcbiAgICAgICAgaWYgKGVyciAmJiAnbWVzc2FnZScgaW4gZXJyICYmICEoZXJyIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb1dyaXRlQ29uY2VybkVycm9yKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBNb25nb0J1bGtXcml0ZUVycm9yKGVyciwgbmV3IEJ1bGtXcml0ZVJlc3VsdChidWxrT3BlcmF0aW9uLnMuYnVsa1Jlc3VsdCwgYnVsa09wZXJhdGlvbi5pc09yZGVyZWQpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29Xcml0ZUNvbmNlcm5FcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZU1vbmdvV3JpdGVDb25jZXJuRXJyb3IoYmF0Y2gsIGJ1bGtPcGVyYXRpb24ucy5idWxrUmVzdWx0LCBidWxrT3BlcmF0aW9uLmlzT3JkZXJlZCwgZXJyLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWVyZ2UgdGhlIHJlc3VsdHMgdG9nZXRoZXJcbiAgICAgICAgbWVyZ2VCYXRjaFJlc3VsdHMoYmF0Y2gsIGJ1bGtPcGVyYXRpb24ucy5idWxrUmVzdWx0LCBlcnIsIHJlc3VsdCk7XG4gICAgICAgIGNvbnN0IHdyaXRlUmVzdWx0ID0gbmV3IEJ1bGtXcml0ZVJlc3VsdChidWxrT3BlcmF0aW9uLnMuYnVsa1Jlc3VsdCwgYnVsa09wZXJhdGlvbi5pc09yZGVyZWQpO1xuICAgICAgICBpZiAoYnVsa09wZXJhdGlvbi5oYW5kbGVXcml0ZUVycm9yKGNhbGxiYWNrLCB3cml0ZVJlc3VsdCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIG5leHQgY29tbWFuZCBpbiBsaW5lXG4gICAgICAgIGV4ZWN1dGVDb21tYW5kcyhidWxrT3BlcmF0aW9uLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGNvbnN0IGZpbmFsT3B0aW9ucyA9ICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKShidWxrT3BlcmF0aW9uLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIG9yZGVyZWQ6IGJ1bGtPcGVyYXRpb24uaXNPcmRlcmVkXG4gICAgfSk7XG4gICAgaWYgKGZpbmFsT3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb24gIT09IHRydWUpIHtcbiAgICAgICAgZGVsZXRlIGZpbmFsT3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb247XG4gICAgfVxuICAgIC8vIFNldCBhbiBvcGVyYXRpb25JZiBpZiBwcm92aWRlZFxuICAgIGlmIChidWxrT3BlcmF0aW9uLm9wZXJhdGlvbklkKSB7XG4gICAgICAgIHJlc3VsdEhhbmRsZXIub3BlcmF0aW9uSWQgPSBidWxrT3BlcmF0aW9uLm9wZXJhdGlvbklkO1xuICAgIH1cbiAgICAvLyBJcyB0aGUgYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uIG9wdGlvbnMgc3BlY2lmaWNcbiAgICBpZiAoYnVsa09wZXJhdGlvbi5zLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgICBmaW5hbE9wdGlvbnMuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gSXMgdGhlIGNoZWNrS2V5cyBvcHRpb24gZGlzYWJsZWRcbiAgICBpZiAoYnVsa09wZXJhdGlvbi5zLmNoZWNrS2V5cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgZmluYWxPcHRpb25zLmNoZWNrS2V5cyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZmluYWxPcHRpb25zLnJldHJ5V3JpdGVzKSB7XG4gICAgICAgIGlmIChpc1VwZGF0ZUJhdGNoKGJhdGNoKSkge1xuICAgICAgICAgICAgZmluYWxPcHRpb25zLnJldHJ5V3JpdGVzID0gZmluYWxPcHRpb25zLnJldHJ5V3JpdGVzICYmICFiYXRjaC5vcGVyYXRpb25zLnNvbWUob3AgPT4gb3AubXVsdGkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0RlbGV0ZUJhdGNoKGJhdGNoKSkge1xuICAgICAgICAgICAgZmluYWxPcHRpb25zLnJldHJ5V3JpdGVzID1cbiAgICAgICAgICAgICAgICBmaW5hbE9wdGlvbnMucmV0cnlXcml0ZXMgJiYgIWJhdGNoLm9wZXJhdGlvbnMuc29tZShvcCA9PiBvcC5saW1pdCA9PT0gMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gaXNJbnNlcnRCYXRjaChiYXRjaClcbiAgICAgICAgICAgID8gbmV3IGluc2VydF8xLkluc2VydE9wZXJhdGlvbihidWxrT3BlcmF0aW9uLnMubmFtZXNwYWNlLCBiYXRjaC5vcGVyYXRpb25zLCBmaW5hbE9wdGlvbnMpXG4gICAgICAgICAgICA6IGlzVXBkYXRlQmF0Y2goYmF0Y2gpXG4gICAgICAgICAgICAgICAgPyBuZXcgdXBkYXRlXzEuVXBkYXRlT3BlcmF0aW9uKGJ1bGtPcGVyYXRpb24ucy5uYW1lc3BhY2UsIGJhdGNoLm9wZXJhdGlvbnMsIGZpbmFsT3B0aW9ucylcbiAgICAgICAgICAgICAgICA6IGlzRGVsZXRlQmF0Y2goYmF0Y2gpXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IGRlbGV0ZV8xLkRlbGV0ZU9wZXJhdGlvbihidWxrT3BlcmF0aW9uLnMubmFtZXNwYWNlLCBiYXRjaC5vcGVyYXRpb25zLCBmaW5hbE9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgaWYgKG9wZXJhdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKShidWxrT3BlcmF0aW9uLnMuY29sbGVjdGlvbi5jbGllbnQsIG9wZXJhdGlvbikudGhlbihyZXN1bHQgPT4gcmVzdWx0SGFuZGxlcih1bmRlZmluZWQsIHJlc3VsdCksIGVycm9yID0+IHJlc3VsdEhhbmRsZXIoZXJyb3IpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIEZvcmNlIHRvcCBsZXZlbCBlcnJvclxuICAgICAgICBlcnIub2sgPSAwO1xuICAgICAgICAvLyBNZXJnZSB0b3AgbGV2ZWwgZXJyb3IgYW5kIHJldHVyblxuICAgICAgICBtZXJnZUJhdGNoUmVzdWx0cyhiYXRjaCwgYnVsa09wZXJhdGlvbi5zLmJ1bGtSZXN1bHQsIGVyciwgdW5kZWZpbmVkKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG59XG5mdW5jdGlvbiBoYW5kbGVNb25nb1dyaXRlQ29uY2VybkVycm9yKGJhdGNoLCBidWxrUmVzdWx0LCBpc09yZGVyZWQsIGVyciwgY2FsbGJhY2spIHtcbiAgICBtZXJnZUJhdGNoUmVzdWx0cyhiYXRjaCwgYnVsa1Jlc3VsdCwgdW5kZWZpbmVkLCBlcnIucmVzdWx0KTtcbiAgICBjYWxsYmFjayhuZXcgTW9uZ29CdWxrV3JpdGVFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IGVyci5yZXN1bHQ/LndyaXRlQ29uY2VybkVycm9yLmVycm1zZyxcbiAgICAgICAgY29kZTogZXJyLnJlc3VsdD8ud3JpdGVDb25jZXJuRXJyb3IucmVzdWx0XG4gICAgfSwgbmV3IEJ1bGtXcml0ZVJlc3VsdChidWxrUmVzdWx0LCBpc09yZGVyZWQpKSk7XG59XG4vKipcbiAqIEFuIGVycm9yIGluZGljYXRpbmcgYW4gdW5zdWNjZXNzZnVsIEJ1bGsgV3JpdGVcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb0J1bGtXcml0ZUVycm9yIGV4dGVuZHMgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgICBzdXBlcihlcnJvcik7XG4gICAgICAgIHRoaXMud3JpdGVFcnJvcnMgPSBbXTtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgV3JpdGVDb25jZXJuRXJyb3IpXG4gICAgICAgICAgICB0aGlzLmVyciA9IGVycm9yO1xuICAgICAgICBlbHNlIGlmICghKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICAgICAgdGhpcy5jb2RlID0gZXJyb3IuY29kZTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVFcnJvcnMgPSBlcnJvci53cml0ZUVycm9ycyA/PyBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBlcnJvcik7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQnVsa1dyaXRlRXJyb3InO1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIGRvY3VtZW50cyBpbnNlcnRlZC4gKi9cbiAgICBnZXQgaW5zZXJ0ZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0Lmluc2VydGVkQ291bnQ7XG4gICAgfVxuICAgIC8qKiBOdW1iZXIgb2YgZG9jdW1lbnRzIG1hdGNoZWQgZm9yIHVwZGF0ZS4gKi9cbiAgICBnZXQgbWF0Y2hlZENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQubWF0Y2hlZENvdW50O1xuICAgIH1cbiAgICAvKiogTnVtYmVyIG9mIGRvY3VtZW50cyBtb2RpZmllZC4gKi9cbiAgICBnZXQgbW9kaWZpZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0Lm1vZGlmaWVkQ291bnQ7XG4gICAgfVxuICAgIC8qKiBOdW1iZXIgb2YgZG9jdW1lbnRzIGRlbGV0ZWQuICovXG4gICAgZ2V0IGRlbGV0ZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0LmRlbGV0ZWRDb3VudDtcbiAgICB9XG4gICAgLyoqIE51bWJlciBvZiBkb2N1bWVudHMgdXBzZXJ0ZWQuICovXG4gICAgZ2V0IHVwc2VydGVkQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdC51cHNlcnRlZENvdW50O1xuICAgIH1cbiAgICAvKiogSW5zZXJ0ZWQgZG9jdW1lbnQgZ2VuZXJhdGVkIElkJ3MsIGhhc2gga2V5IGlzIHRoZSBpbmRleCBvZiB0aGUgb3JpZ2luYXRpbmcgb3BlcmF0aW9uICovXG4gICAgZ2V0IGluc2VydGVkSWRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQuaW5zZXJ0ZWRJZHM7XG4gICAgfVxuICAgIC8qKiBVcHNlcnRlZCBkb2N1bWVudCBnZW5lcmF0ZWQgSWQncywgaGFzaCBrZXkgaXMgdGhlIGluZGV4IG9mIHRoZSBvcmlnaW5hdGluZyBvcGVyYXRpb24gKi9cbiAgICBnZXQgdXBzZXJ0ZWRJZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdC51cHNlcnRlZElkcztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvQnVsa1dyaXRlRXJyb3IgPSBNb25nb0J1bGtXcml0ZUVycm9yO1xuLyoqXG4gKiBBIGJ1aWxkZXIgb2JqZWN0IHRoYXQgaXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgQnVsa09wZXJhdGlvbkJhc2UjZmluZH0uXG4gKiBJcyB1c2VkIHRvIGJ1aWxkIGEgd3JpdGUgb3BlcmF0aW9uIHRoYXQgaW52b2x2ZXMgYSBxdWVyeSBmaWx0ZXIuXG4gKlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBGaW5kT3BlcmF0b3JzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEZpbmRPcGVyYXRvcnMgb2JqZWN0LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJ1bGtPcGVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5idWxrT3BlcmF0aW9uID0gYnVsa09wZXJhdGlvbjtcbiAgICB9XG4gICAgLyoqIEFkZCBhIG11bHRpcGxlIHVwZGF0ZSBvcGVyYXRpb24gdG8gdGhlIGJ1bGsgb3BlcmF0aW9uICovXG4gICAgdXBkYXRlKHVwZGF0ZURvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRPcCA9IGJ1aWxkQ3VycmVudE9wKHRoaXMuYnVsa09wZXJhdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1bGtPcGVyYXRpb24uYWRkVG9PcGVyYXRpb25zTGlzdChleHBvcnRzLkJhdGNoVHlwZS5VUERBVEUsICgwLCB1cGRhdGVfMS5tYWtlVXBkYXRlU3RhdGVtZW50KShjdXJyZW50T3Auc2VsZWN0b3IsIHVwZGF0ZURvY3VtZW50LCB7XG4gICAgICAgICAgICAuLi5jdXJyZW50T3AsXG4gICAgICAgICAgICBtdWx0aTogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBBZGQgYSBzaW5nbGUgdXBkYXRlIG9wZXJhdGlvbiB0byB0aGUgYnVsayBvcGVyYXRpb24gKi9cbiAgICB1cGRhdGVPbmUodXBkYXRlRG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKCEoMCwgdXRpbHNfMS5oYXNBdG9taWNPcGVyYXRvcnMpKHVwZGF0ZURvY3VtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignVXBkYXRlIGRvY3VtZW50IHJlcXVpcmVzIGF0b21pYyBvcGVyYXRvcnMnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50T3AgPSBidWlsZEN1cnJlbnRPcCh0aGlzLmJ1bGtPcGVyYXRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcy5idWxrT3BlcmF0aW9uLmFkZFRvT3BlcmF0aW9uc0xpc3QoZXhwb3J0cy5CYXRjaFR5cGUuVVBEQVRFLCAoMCwgdXBkYXRlXzEubWFrZVVwZGF0ZVN0YXRlbWVudCkoY3VycmVudE9wLnNlbGVjdG9yLCB1cGRhdGVEb2N1bWVudCwgeyAuLi5jdXJyZW50T3AsIG11bHRpOiBmYWxzZSB9KSk7XG4gICAgfVxuICAgIC8qKiBBZGQgYSByZXBsYWNlIG9uZSBvcGVyYXRpb24gdG8gdGhlIGJ1bGsgb3BlcmF0aW9uICovXG4gICAgcmVwbGFjZU9uZShyZXBsYWNlbWVudCkge1xuICAgICAgICBpZiAoKDAsIHV0aWxzXzEuaGFzQXRvbWljT3BlcmF0b3JzKShyZXBsYWNlbWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1JlcGxhY2VtZW50IGRvY3VtZW50IG11c3Qgbm90IHVzZSBhdG9taWMgb3BlcmF0b3JzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudE9wID0gYnVpbGRDdXJyZW50T3AodGhpcy5idWxrT3BlcmF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVsa09wZXJhdGlvbi5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLlVQREFURSwgKDAsIHVwZGF0ZV8xLm1ha2VVcGRhdGVTdGF0ZW1lbnQpKGN1cnJlbnRPcC5zZWxlY3RvciwgcmVwbGFjZW1lbnQsIHsgLi4uY3VycmVudE9wLCBtdWx0aTogZmFsc2UgfSkpO1xuICAgIH1cbiAgICAvKiogQWRkIGEgZGVsZXRlIG9uZSBvcGVyYXRpb24gdG8gdGhlIGJ1bGsgb3BlcmF0aW9uICovXG4gICAgZGVsZXRlT25lKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50T3AgPSBidWlsZEN1cnJlbnRPcCh0aGlzLmJ1bGtPcGVyYXRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcy5idWxrT3BlcmF0aW9uLmFkZFRvT3BlcmF0aW9uc0xpc3QoZXhwb3J0cy5CYXRjaFR5cGUuREVMRVRFLCAoMCwgZGVsZXRlXzEubWFrZURlbGV0ZVN0YXRlbWVudCkoY3VycmVudE9wLnNlbGVjdG9yLCB7IC4uLmN1cnJlbnRPcCwgbGltaXQ6IDEgfSkpO1xuICAgIH1cbiAgICAvKiogQWRkIGEgZGVsZXRlIG1hbnkgb3BlcmF0aW9uIHRvIHRoZSBidWxrIG9wZXJhdGlvbiAqL1xuICAgIGRlbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudE9wID0gYnVpbGRDdXJyZW50T3AodGhpcy5idWxrT3BlcmF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVsa09wZXJhdGlvbi5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLkRFTEVURSwgKDAsIGRlbGV0ZV8xLm1ha2VEZWxldGVTdGF0ZW1lbnQpKGN1cnJlbnRPcC5zZWxlY3RvciwgeyAuLi5jdXJyZW50T3AsIGxpbWl0OiAwIH0pKTtcbiAgICB9XG4gICAgLyoqIFVwc2VydCBtb2RpZmllciBmb3IgdXBkYXRlIGJ1bGsgb3BlcmF0aW9uLCBub3RpbmcgdGhhdCB0aGlzIG9wZXJhdGlvbiBpcyBhbiB1cHNlcnQuICovXG4gICAgdXBzZXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcCkge1xuICAgICAgICAgICAgdGhpcy5idWxrT3BlcmF0aW9uLnMuY3VycmVudE9wID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWxrT3BlcmF0aW9uLnMuY3VycmVudE9wLnVwc2VydCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogU3BlY2lmaWVzIHRoZSBjb2xsYXRpb24gZm9yIHRoZSBxdWVyeSBjb25kaXRpb24uICovXG4gICAgY29sbGF0aW9uKGNvbGxhdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcCkge1xuICAgICAgICAgICAgdGhpcy5idWxrT3BlcmF0aW9uLnMuY3VycmVudE9wID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWxrT3BlcmF0aW9uLnMuY3VycmVudE9wLmNvbGxhdGlvbiA9IGNvbGxhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBTcGVjaWZpZXMgYXJyYXlGaWx0ZXJzIGZvciBVcGRhdGVPbmUgb3IgVXBkYXRlTWFueSBidWxrIG9wZXJhdGlvbnMuICovXG4gICAgYXJyYXlGaWx0ZXJzKGFycmF5RmlsdGVycykge1xuICAgICAgICBpZiAoIXRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcCkge1xuICAgICAgICAgICAgdGhpcy5idWxrT3BlcmF0aW9uLnMuY3VycmVudE9wID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWxrT3BlcmF0aW9uLnMuY3VycmVudE9wLmFycmF5RmlsdGVycyA9IGFycmF5RmlsdGVycztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBTcGVjaWZpZXMgaGludCBmb3IgdGhlIGJ1bGsgb3BlcmF0aW9uLiAqL1xuICAgIGhpbnQoaGludCkge1xuICAgICAgICBpZiAoIXRoaXMuYnVsa09wZXJhdGlvbi5zLmN1cnJlbnRPcCkge1xuICAgICAgICAgICAgdGhpcy5idWxrT3BlcmF0aW9uLnMuY3VycmVudE9wID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idWxrT3BlcmF0aW9uLnMuY3VycmVudE9wLmhpbnQgPSBoaW50O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnRzLkZpbmRPcGVyYXRvcnMgPSBGaW5kT3BlcmF0b3JzO1xuY29uc3QgZXhlY3V0ZUNvbW1hbmRzQXN5bmMgPSAoMCwgdXRpbF8xLnByb21pc2lmeSkoZXhlY3V0ZUNvbW1hbmRzKTtcbi8qKlxuICogVE9ETyhOT0RFLTQwNjMpXG4gKiBCdWxrV3JpdGVzIG1lcmdlIGNvbXBsZXhpdHkgaXMgaW1wbGVtZW50ZWQgaW4gZXhlY3V0ZUNvbW1hbmRzXG4gKiBUaGlzIHByb3ZpZGVzIGEgdmVoaWNsZSB0byB0cmVhdCBidWxrT3BlcmF0aW9ucyBsaWtlIGFueSBvdGhlciBvcGVyYXRpb24gKGhlbmNlIFwic2hpbVwiKVxuICogV2Ugd291bGQgbGlrZSB0aGlzIGxvZ2ljIHRvIHNpbXBseSBsaXZlIGluc2lkZSB0aGUgQnVsa1dyaXRlT3BlcmF0aW9uIGNsYXNzXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQnVsa1dyaXRlU2hpbU9wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihidWxrT3BlcmF0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmJ1bGtPcGVyYXRpb24gPSBidWxrT3BlcmF0aW9uO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnYnVsa1dyaXRlJztcbiAgICB9XG4gICAgZXhlY3V0ZShfc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2Vzc2lvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBBbiBpbXBsaWNpdCBzZXNzaW9uIGNvdWxkIGhhdmUgYmVlbiBjcmVhdGVkIGJ5ICdleGVjdXRlT3BlcmF0aW9uJ1xuICAgICAgICAgICAgLy8gU28gaWYgd2Ugc3RpY2sgaXQgb24gZmluYWxPcHRpb25zIGhlcmUsIGVhY2ggYnVsayBvcGVyYXRpb25cbiAgICAgICAgICAgIC8vIHdpbGwgdXNlIHRoaXMgc2FtZSBzZXNzaW9uLCBpdCdsbCBiZSBwYXNzZWQgaW4gdGhlIHNhbWUgd2F5XG4gICAgICAgICAgICAvLyBhbiBleHBsaWNpdCBzZXNzaW9uIHdvdWxkIGJlXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4ZWN1dGVDb21tYW5kc0FzeW5jKHRoaXMuYnVsa09wZXJhdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICB9XG59XG5leHBvcnRzLkJ1bGtXcml0ZVNoaW1PcGVyYXRpb24gPSBCdWxrV3JpdGVTaGltT3BlcmF0aW9uO1xuLyoqIEBwdWJsaWMgKi9cbmNsYXNzIEJ1bGtPcGVyYXRpb25CYXNlIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgT3JkZXJlZEJ1bGtPcGVyYXRpb24gb3IgVW5vcmRlcmVkQnVsa09wZXJhdGlvbiBpbnN0YW5jZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG9wdGlvbnMsIGlzT3JkZXJlZCkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciBidWxrT3BlcmF0aW9uIGlzIG9yZGVyZWQgb3IgdW5vcmRlcmVkXG4gICAgICAgIHRoaXMuaXNPcmRlcmVkID0gaXNPcmRlcmVkO1xuICAgICAgICBjb25zdCB0b3BvbG9neSA9ICgwLCB1dGlsc18xLmdldFRvcG9sb2d5KShjb2xsZWN0aW9uKTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPT0gbnVsbCA/IHt9IDogb3B0aW9ucztcbiAgICAgICAgLy8gVE9ETyBCcmluZyBmcm9tIGRyaXZlciBpbmZvcm1hdGlvbiBpbiBoZWxsb1xuICAgICAgICAvLyBHZXQgdGhlIG5hbWVzcGFjZSBmb3IgdGhlIHdyaXRlIG9wZXJhdGlvbnNcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlID0gY29sbGVjdGlvbi5zLm5hbWVzcGFjZTtcbiAgICAgICAgLy8gVXNlZCB0byBtYXJrIG9wZXJhdGlvbiBhcyBleGVjdXRlZFxuICAgICAgICBjb25zdCBleGVjdXRlZCA9IGZhbHNlO1xuICAgICAgICAvLyBDdXJyZW50IGl0ZW1cbiAgICAgICAgY29uc3QgY3VycmVudE9wID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBTZXQgbWF4IGJ5dGUgc2l6ZVxuICAgICAgICBjb25zdCBoZWxsbyA9IHRvcG9sb2d5Lmxhc3RIZWxsbygpO1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGF1dG9FbmNyeXB0aW9uIG9uLCBiYXRjaC1zcGxpdHRpbmcgbXVzdCBiZSBkb25lIG9uIDJtYiBjaHVua3MsIGJ1dCBzaW5nbGUgZG9jdW1lbnRzXG4gICAgICAgIC8vIG92ZXIgMm1iIGFyZSBzdGlsbCBhbGxvd2VkXG4gICAgICAgIGNvbnN0IHVzaW5nQXV0b0VuY3J5cHRpb24gPSAhISh0b3BvbG9neS5zLm9wdGlvbnMgJiYgdG9wb2xvZ3kucy5vcHRpb25zLmF1dG9FbmNyeXB0ZXIpO1xuICAgICAgICBjb25zdCBtYXhCc29uT2JqZWN0U2l6ZSA9IGhlbGxvICYmIGhlbGxvLm1heEJzb25PYmplY3RTaXplID8gaGVsbG8ubWF4QnNvbk9iamVjdFNpemUgOiAxMDI0ICogMTAyNCAqIDE2O1xuICAgICAgICBjb25zdCBtYXhCYXRjaFNpemVCeXRlcyA9IHVzaW5nQXV0b0VuY3J5cHRpb24gPyAxMDI0ICogMTAyNCAqIDIgOiBtYXhCc29uT2JqZWN0U2l6ZTtcbiAgICAgICAgY29uc3QgbWF4V3JpdGVCYXRjaFNpemUgPSBoZWxsbyAmJiBoZWxsby5tYXhXcml0ZUJhdGNoU2l6ZSA/IGhlbGxvLm1heFdyaXRlQmF0Y2hTaXplIDogMTAwMDtcbiAgICAgICAgLy8gQ2FsY3VsYXRlcyB0aGUgbGFyZ2VzdCBwb3NzaWJsZSBzaXplIG9mIGFuIEFycmF5IGtleSwgcmVwcmVzZW50ZWQgYXMgYSBCU09OIHN0cmluZ1xuICAgICAgICAvLyBlbGVtZW50LiBUaGlzIGNhbGN1bGF0aW9uOlxuICAgICAgICAvLyAgICAgMSBieXRlIGZvciBCU09OIHR5cGVcbiAgICAgICAgLy8gICAgICMgb2YgYnl0ZXMgPSBsZW5ndGggb2YgKHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiAobWF4V3JpdGVCYXRjaFNpemUgLSAxKSlcbiAgICAgICAgLy8gICArIDEgYnl0ZXMgZm9yIG51bGwgdGVybWluYXRvclxuICAgICAgICBjb25zdCBtYXhLZXlTaXplID0gKG1heFdyaXRlQmF0Y2hTaXplIC0gMSkudG9TdHJpbmcoMTApLmxlbmd0aCArIDI7XG4gICAgICAgIC8vIEZpbmFsIG9wdGlvbnMgZm9yIHJldHJ5YWJsZSB3cml0ZXNcbiAgICAgICAgbGV0IGZpbmFsT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBmaW5hbE9wdGlvbnMgPSAoMCwgdXRpbHNfMS5hcHBseVJldHJ5YWJsZVdyaXRlcykoZmluYWxPcHRpb25zLCBjb2xsZWN0aW9uLnMuZGIpO1xuICAgICAgICAvLyBGaW5hbCByZXN1bHRzXG4gICAgICAgIGNvbnN0IGJ1bGtSZXN1bHQgPSB7XG4gICAgICAgICAgICBvazogMSxcbiAgICAgICAgICAgIHdyaXRlRXJyb3JzOiBbXSxcbiAgICAgICAgICAgIHdyaXRlQ29uY2VybkVycm9yczogW10sXG4gICAgICAgICAgICBpbnNlcnRlZElkczogW10sXG4gICAgICAgICAgICBuSW5zZXJ0ZWQ6IDAsXG4gICAgICAgICAgICBuVXBzZXJ0ZWQ6IDAsXG4gICAgICAgICAgICBuTWF0Y2hlZDogMCxcbiAgICAgICAgICAgIG5Nb2RpZmllZDogMCxcbiAgICAgICAgICAgIG5SZW1vdmVkOiAwLFxuICAgICAgICAgICAgdXBzZXJ0ZWQ6IFtdXG4gICAgICAgIH07XG4gICAgICAgIC8vIEludGVybmFsIHN0YXRlXG4gICAgICAgIHRoaXMucyA9IHtcbiAgICAgICAgICAgIC8vIEZpbmFsIHJlc3VsdFxuICAgICAgICAgICAgYnVsa1Jlc3VsdCxcbiAgICAgICAgICAgIC8vIEN1cnJlbnQgYmF0Y2ggc3RhdGVcbiAgICAgICAgICAgIGN1cnJlbnRCYXRjaDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY3VycmVudEluZGV4OiAwLFxuICAgICAgICAgICAgLy8gb3JkZXJlZCBzcGVjaWZpY1xuICAgICAgICAgICAgY3VycmVudEJhdGNoU2l6ZTogMCxcbiAgICAgICAgICAgIGN1cnJlbnRCYXRjaFNpemVCeXRlczogMCxcbiAgICAgICAgICAgIC8vIHVub3JkZXJlZCBzcGVjaWZpY1xuICAgICAgICAgICAgY3VycmVudEluc2VydEJhdGNoOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjdXJyZW50VXBkYXRlQmF0Y2g6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGN1cnJlbnRSZW1vdmVCYXRjaDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgYmF0Y2hlczogW10sXG4gICAgICAgICAgICAvLyBXcml0ZSBjb25jZXJuXG4gICAgICAgICAgICB3cml0ZUNvbmNlcm46IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyksXG4gICAgICAgICAgICAvLyBNYXggYmF0Y2ggc2l6ZSBvcHRpb25zXG4gICAgICAgICAgICBtYXhCc29uT2JqZWN0U2l6ZSxcbiAgICAgICAgICAgIG1heEJhdGNoU2l6ZUJ5dGVzLFxuICAgICAgICAgICAgbWF4V3JpdGVCYXRjaFNpemUsXG4gICAgICAgICAgICBtYXhLZXlTaXplLFxuICAgICAgICAgICAgLy8gTmFtZXNwYWNlXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICAvLyBUb3BvbG9neVxuICAgICAgICAgICAgdG9wb2xvZ3ksXG4gICAgICAgICAgICAvLyBPcHRpb25zXG4gICAgICAgICAgICBvcHRpb25zOiBmaW5hbE9wdGlvbnMsXG4gICAgICAgICAgICAvLyBCU09OIG9wdGlvbnNcbiAgICAgICAgICAgIGJzb25PcHRpb25zOiAoMCwgYnNvbl8xLnJlc29sdmVCU09OT3B0aW9ucykob3B0aW9ucyksXG4gICAgICAgICAgICAvLyBDdXJyZW50IG9wZXJhdGlvblxuICAgICAgICAgICAgY3VycmVudE9wLFxuICAgICAgICAgICAgLy8gRXhlY3V0ZWRcbiAgICAgICAgICAgIGV4ZWN1dGVkLFxuICAgICAgICAgICAgLy8gQ29sbGVjdGlvblxuICAgICAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgICAgIC8vIEZ1bmRhbWVudGFsIGVycm9yXG4gICAgICAgICAgICBlcnI6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIC8vIGNoZWNrIGtleXNcbiAgICAgICAgICAgIGNoZWNrS2V5czogdHlwZW9mIG9wdGlvbnMuY2hlY2tLZXlzID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmNoZWNrS2V5cyA6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIC8vIGJ5cGFzcyBWYWxpZGF0aW9uXG4gICAgICAgIGlmIChvcHRpb25zLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5zLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgc2luZ2xlIGluc2VydCBkb2N1bWVudCB0byB0aGUgYnVsayBvcGVyYXRpb25cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBidWxrT3AgPSBjb2xsZWN0aW9uLmluaXRpYWxpemVPcmRlcmVkQnVsa09wKCk7XG4gICAgICpcbiAgICAgKiAvLyBBZGRzIHRocmVlIGluc2VydHMgdG8gdGhlIGJ1bGtPcC5cbiAgICAgKiBidWxrT3BcbiAgICAgKiAgIC5pbnNlcnQoeyBhOiAxIH0pXG4gICAgICogICAuaW5zZXJ0KHsgYjogMiB9KVxuICAgICAqICAgLmluc2VydCh7IGM6IDMgfSk7XG4gICAgICogYXdhaXQgYnVsa09wLmV4ZWN1dGUoKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBpbnNlcnQoZG9jdW1lbnQpIHtcbiAgICAgICAgKDAsIGNvbW1vbl9mdW5jdGlvbnNfMS5tYXliZUFkZElkVG9Eb2N1bWVudHMpKHRoaXMuY29sbGVjdGlvbiwgZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIGZvcmNlU2VydmVyT2JqZWN0SWQ6IHRoaXMuc2hvdWxkRm9yY2VTZXJ2ZXJPYmplY3RJZCgpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLklOU0VSVCwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYSBmaW5kIG9wZXJhdGlvbiBmb3IgYW4gdXBkYXRlL3VwZGF0ZU9uZS9kZWxldGUvZGVsZXRlT25lL3JlcGxhY2VPbmUuXG4gICAgICogUmV0dXJucyBhIGJ1aWxkZXIgb2JqZWN0IHVzZWQgdG8gY29tcGxldGUgdGhlIGRlZmluaXRpb24gb2YgdGhlIG9wZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBidWxrT3AgPSBjb2xsZWN0aW9uLmluaXRpYWxpemVPcmRlcmVkQnVsa09wKCk7XG4gICAgICpcbiAgICAgKiAvLyBBZGQgYW4gdXBkYXRlT25lIHRvIHRoZSBidWxrT3BcbiAgICAgKiBidWxrT3AuZmluZCh7IGE6IDEgfSkudXBkYXRlT25lKHsgJHNldDogeyBiOiAyIH0gfSk7XG4gICAgICpcbiAgICAgKiAvLyBBZGQgYW4gdXBkYXRlTWFueSB0byB0aGUgYnVsa09wXG4gICAgICogYnVsa09wLmZpbmQoeyBjOiAzIH0pLnVwZGF0ZSh7ICRzZXQ6IHsgZDogNCB9IH0pO1xuICAgICAqXG4gICAgICogLy8gQWRkIGFuIHVwc2VydFxuICAgICAqIGJ1bGtPcC5maW5kKHsgZTogNSB9KS51cHNlcnQoKS51cGRhdGVPbmUoeyAkc2V0OiB7IGY6IDYgfSB9KTtcbiAgICAgKlxuICAgICAqIC8vIEFkZCBhIGRlbGV0aW9uXG4gICAgICogYnVsa09wLmZpbmQoeyBnOiA3IH0pLmRlbGV0ZU9uZSgpO1xuICAgICAqXG4gICAgICogLy8gQWRkIGEgbXVsdGkgZGVsZXRpb25cbiAgICAgKiBidWxrT3AuZmluZCh7IGg6IDggfSkuZGVsZXRlKCk7XG4gICAgICpcbiAgICAgKiAvLyBBZGQgYSByZXBsYWNlT25lXG4gICAgICogYnVsa09wLmZpbmQoeyBpOiA5IH0pLnJlcGxhY2VPbmUoe3dyaXRlQ29uY2VybjogeyBqOiAxMCB9fSk7XG4gICAgICpcbiAgICAgKiAvLyBVcGRhdGUgdXNpbmcgYSBwaXBlbGluZSAocmVxdWlyZXMgTW9uZ29kYiA0LjIgb3IgaGlnaGVyKVxuICAgICAqIGJ1bGsuZmluZCh7IGs6IDExLCB5OiB7ICRleGlzdHM6IHRydWUgfSwgejogeyAkZXhpc3RzOiB0cnVlIH0gfSkudXBkYXRlT25lKFtcbiAgICAgKiAgIHsgJHNldDogeyB0b3RhbDogeyAkc3VtOiBbICckeScsICckeicgXSB9IH0gfVxuICAgICAqIF0pO1xuICAgICAqXG4gICAgICogLy8gQWxsIG9mIHRoZSBvcHMgd2lsbCBub3cgYmUgZXhlY3V0ZWRcbiAgICAgKiBhd2FpdCBidWxrT3AuZXhlY3V0ZSgpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGZpbmQoc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQnVsayBmaW5kIG9wZXJhdGlvbiBtdXN0IHNwZWNpZnkgYSBzZWxlY3RvcicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNhdmUgYSBjdXJyZW50IHNlbGVjdG9yXG4gICAgICAgIHRoaXMucy5jdXJyZW50T3AgPSB7XG4gICAgICAgICAgICBzZWxlY3Rvcjogc2VsZWN0b3JcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaW5kT3BlcmF0b3JzKHRoaXMpO1xuICAgIH1cbiAgICAvKiogU3BlY2lmaWVzIGEgcmF3IG9wZXJhdGlvbiB0byBwZXJmb3JtIGluIHRoZSBidWxrIHdyaXRlLiAqL1xuICAgIHJhdyhvcCkge1xuICAgICAgICBpZiAob3AgPT0gbnVsbCB8fCB0eXBlb2Ygb3AgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdPcGVyYXRpb24gbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhbiBvcGVyYXRpb24ga2V5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdpbnNlcnRPbmUnIGluIG9wKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JjZVNlcnZlck9iamVjdElkID0gdGhpcy5zaG91bGRGb3JjZVNlcnZlck9iamVjdElkKCk7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IG9wLmluc2VydE9uZSAmJiBvcC5pbnNlcnRPbmUuZG9jdW1lbnQgPT0gbnVsbFxuICAgICAgICAgICAgICAgID8gLy8gVE9ETyhOT0RFLTYwMDMpOiByZW1vdmUgc3VwcG9ydCBmb3Igb21pdHRpbmcgdGhlIGBkb2N1bWVudHNgIHN1YmRvY3VtZW50IGluIGJ1bGsgaW5zZXJ0c1xuICAgICAgICAgICAgICAgICAgICBvcC5pbnNlcnRPbmVcbiAgICAgICAgICAgICAgICA6IG9wLmluc2VydE9uZS5kb2N1bWVudDtcbiAgICAgICAgICAgICgwLCBjb21tb25fZnVuY3Rpb25zXzEubWF5YmVBZGRJZFRvRG9jdW1lbnRzKSh0aGlzLmNvbGxlY3Rpb24sIGRvY3VtZW50LCB7IGZvcmNlU2VydmVyT2JqZWN0SWQgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLklOU0VSVCwgZG9jdW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgncmVwbGFjZU9uZScgaW4gb3AgfHwgJ3VwZGF0ZU9uZScgaW4gb3AgfHwgJ3VwZGF0ZU1hbnknIGluIG9wKSB7XG4gICAgICAgICAgICBpZiAoJ3JlcGxhY2VPbmUnIGluIG9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdxJyBpbiBvcC5yZXBsYWNlT25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1JhdyBvcGVyYXRpb25zIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVTdGF0ZW1lbnQgPSAoMCwgdXBkYXRlXzEubWFrZVVwZGF0ZVN0YXRlbWVudCkob3AucmVwbGFjZU9uZS5maWx0ZXIsIG9wLnJlcGxhY2VPbmUucmVwbGFjZW1lbnQsIHsgLi4ub3AucmVwbGFjZU9uZSwgbXVsdGk6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5oYXNBdG9taWNPcGVyYXRvcnMpKHVwZGF0ZVN0YXRlbWVudC51KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdSZXBsYWNlbWVudCBkb2N1bWVudCBtdXN0IG5vdCB1c2UgYXRvbWljIG9wZXJhdG9ycycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLlVQREFURSwgdXBkYXRlU3RhdGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgndXBkYXRlT25lJyBpbiBvcCkge1xuICAgICAgICAgICAgICAgIGlmICgncScgaW4gb3AudXBkYXRlT25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1JhdyBvcGVyYXRpb25zIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVTdGF0ZW1lbnQgPSAoMCwgdXBkYXRlXzEubWFrZVVwZGF0ZVN0YXRlbWVudCkob3AudXBkYXRlT25lLmZpbHRlciwgb3AudXBkYXRlT25lLnVwZGF0ZSwge1xuICAgICAgICAgICAgICAgICAgICAuLi5vcC51cGRhdGVPbmUsXG4gICAgICAgICAgICAgICAgICAgIG11bHRpOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghKDAsIHV0aWxzXzEuaGFzQXRvbWljT3BlcmF0b3JzKSh1cGRhdGVTdGF0ZW1lbnQudSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignVXBkYXRlIGRvY3VtZW50IHJlcXVpcmVzIGF0b21pYyBvcGVyYXRvcnMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkVG9PcGVyYXRpb25zTGlzdChleHBvcnRzLkJhdGNoVHlwZS5VUERBVEUsIHVwZGF0ZVN0YXRlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ3VwZGF0ZU1hbnknIGluIG9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdxJyBpbiBvcC51cGRhdGVNYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1JhdyBvcGVyYXRpb25zIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVTdGF0ZW1lbnQgPSAoMCwgdXBkYXRlXzEubWFrZVVwZGF0ZVN0YXRlbWVudCkob3AudXBkYXRlTWFueS5maWx0ZXIsIG9wLnVwZGF0ZU1hbnkudXBkYXRlLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wLnVwZGF0ZU1hbnksXG4gICAgICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCEoMCwgdXRpbHNfMS5oYXNBdG9taWNPcGVyYXRvcnMpKHVwZGF0ZVN0YXRlbWVudC51KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdVcGRhdGUgZG9jdW1lbnQgcmVxdWlyZXMgYXRvbWljIG9wZXJhdG9ycycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLlVQREFURSwgdXBkYXRlU3RhdGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2RlbGV0ZU9uZScgaW4gb3ApIHtcbiAgICAgICAgICAgIGlmICgncScgaW4gb3AuZGVsZXRlT25lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUmF3IG9wZXJhdGlvbnMgYXJlIG5vdCBhbGxvd2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLkRFTEVURSwgKDAsIGRlbGV0ZV8xLm1ha2VEZWxldGVTdGF0ZW1lbnQpKG9wLmRlbGV0ZU9uZS5maWx0ZXIsIHsgLi4ub3AuZGVsZXRlT25lLCBsaW1pdDogMSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdkZWxldGVNYW55JyBpbiBvcCkge1xuICAgICAgICAgICAgaWYgKCdxJyBpbiBvcC5kZWxldGVNYW55KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUmF3IG9wZXJhdGlvbnMgYXJlIG5vdCBhbGxvd2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUb09wZXJhdGlvbnNMaXN0KGV4cG9ydHMuQmF0Y2hUeXBlLkRFTEVURSwgKDAsIGRlbGV0ZV8xLm1ha2VEZWxldGVTdGF0ZW1lbnQpKG9wLmRlbGV0ZU1hbnkuZmlsdGVyLCB7IC4uLm9wLmRlbGV0ZU1hbnksIGxpbWl0OiAwIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBvdGhlcndpc2UgYW4gdW5rbm93biBvcGVyYXRpb24gd2FzIHByb3ZpZGVkXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ2J1bGtXcml0ZSBvbmx5IHN1cHBvcnRzIGluc2VydE9uZSwgdXBkYXRlT25lLCB1cGRhdGVNYW55LCBkZWxldGVPbmUsIGRlbGV0ZU1hbnknKTtcbiAgICB9XG4gICAgZ2V0IGJzb25PcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLmJzb25PcHRpb25zO1xuICAgIH1cbiAgICBnZXQgd3JpdGVDb25jZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLndyaXRlQ29uY2VybjtcbiAgICB9XG4gICAgZ2V0IGJhdGNoZXMoKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoZXMgPSBbLi4udGhpcy5zLmJhdGNoZXNdO1xuICAgICAgICBpZiAodGhpcy5pc09yZGVyZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudEJhdGNoKVxuICAgICAgICAgICAgICAgIGJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudEJhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudEluc2VydEJhdGNoKVxuICAgICAgICAgICAgICAgIGJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudEluc2VydEJhdGNoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudFVwZGF0ZUJhdGNoKVxuICAgICAgICAgICAgICAgIGJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudFVwZGF0ZUJhdGNoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudFJlbW92ZUJhdGNoKVxuICAgICAgICAgICAgICAgIGJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudFJlbW92ZUJhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmF0Y2hlcztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMucy5leGVjdXRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cml0ZUNvbmNlcm4gPSB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmZyb21PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBpZiAod3JpdGVDb25jZXJuKSB7XG4gICAgICAgICAgICB0aGlzLnMud3JpdGVDb25jZXJuID0gd3JpdGVDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGhhdmUgY3VycmVudCBiYXRjaFxuICAgICAgICBpZiAodGhpcy5pc09yZGVyZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudEJhdGNoKVxuICAgICAgICAgICAgICAgIHRoaXMucy5iYXRjaGVzLnB1c2godGhpcy5zLmN1cnJlbnRCYXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zLmN1cnJlbnRJbnNlcnRCYXRjaClcbiAgICAgICAgICAgICAgICB0aGlzLnMuYmF0Y2hlcy5wdXNoKHRoaXMucy5jdXJyZW50SW5zZXJ0QmF0Y2gpO1xuICAgICAgICAgICAgaWYgKHRoaXMucy5jdXJyZW50VXBkYXRlQmF0Y2gpXG4gICAgICAgICAgICAgICAgdGhpcy5zLmJhdGNoZXMucHVzaCh0aGlzLnMuY3VycmVudFVwZGF0ZUJhdGNoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnMuY3VycmVudFJlbW92ZUJhdGNoKVxuICAgICAgICAgICAgICAgIHRoaXMucy5iYXRjaGVzLnB1c2godGhpcy5zLmN1cnJlbnRSZW1vdmVCYXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBubyBvcGVyYXRpb25zIGluIHRoZSBidWxrIHJhaXNlIGFuIGVycm9yXG4gICAgICAgIGlmICh0aGlzLnMuYmF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0ludmFsaWQgQnVsa09wZXJhdGlvbiwgQmF0Y2ggY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zLmV4ZWN1dGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgZmluYWxPcHRpb25zID0geyAuLi50aGlzLnMub3B0aW9ucywgLi4ub3B0aW9ucyB9O1xuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBuZXcgQnVsa1dyaXRlU2hpbU9wZXJhdGlvbih0aGlzLCBmaW5hbE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5zLmNvbGxlY3Rpb24uY2xpZW50LCBvcGVyYXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB3cml0ZSBlcnJvciBiZWZvcmUgZXhlY3V0aW5nIGNvbW1hbmRzXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlV3JpdGVFcnJvcihjYWxsYmFjaywgd3JpdGVSZXN1bHQpIHtcbiAgICAgICAgaWYgKHRoaXMucy5idWxrUmVzdWx0LndyaXRlRXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IHRoaXMucy5idWxrUmVzdWx0LndyaXRlRXJyb3JzWzBdLmVycm1zZ1xuICAgICAgICAgICAgICAgID8gdGhpcy5zLmJ1bGtSZXN1bHQud3JpdGVFcnJvcnNbMF0uZXJybXNnXG4gICAgICAgICAgICAgICAgOiAnd3JpdGUgb3BlcmF0aW9uIGZhaWxlZCc7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXcgTW9uZ29CdWxrV3JpdGVFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnLFxuICAgICAgICAgICAgICAgIGNvZGU6IHRoaXMucy5idWxrUmVzdWx0LndyaXRlRXJyb3JzWzBdLmNvZGUsXG4gICAgICAgICAgICAgICAgd3JpdGVFcnJvcnM6IHRoaXMucy5idWxrUmVzdWx0LndyaXRlRXJyb3JzXG4gICAgICAgICAgICB9LCB3cml0ZVJlc3VsdCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JpdGVDb25jZXJuRXJyb3IgPSB3cml0ZVJlc3VsdC5nZXRXcml0ZUNvbmNlcm5FcnJvcigpO1xuICAgICAgICBpZiAod3JpdGVDb25jZXJuRXJyb3IpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBNb25nb0J1bGtXcml0ZUVycm9yKHdyaXRlQ29uY2VybkVycm9yLCB3cml0ZVJlc3VsdCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBzaG91bGRGb3JjZVNlcnZlck9iamVjdElkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMucy5vcHRpb25zLmZvcmNlU2VydmVyT2JqZWN0SWQgPT09IHRydWUgfHxcbiAgICAgICAgICAgIHRoaXMucy5jb2xsZWN0aW9uLnMuZGIub3B0aW9ucz8uZm9yY2VTZXJ2ZXJPYmplY3RJZCA9PT0gdHJ1ZSk7XG4gICAgfVxufVxuZXhwb3J0cy5CdWxrT3BlcmF0aW9uQmFzZSA9IEJ1bGtPcGVyYXRpb25CYXNlO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1bGtPcGVyYXRpb25CYXNlLnByb3RvdHlwZSwgJ2xlbmd0aCcsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5jdXJyZW50SW5kZXg7XG4gICAgfVxufSk7XG5mdW5jdGlvbiBpc0luc2VydEJhdGNoKGJhdGNoKSB7XG4gICAgcmV0dXJuIGJhdGNoLmJhdGNoVHlwZSA9PT0gZXhwb3J0cy5CYXRjaFR5cGUuSU5TRVJUO1xufVxuZnVuY3Rpb24gaXNVcGRhdGVCYXRjaChiYXRjaCkge1xuICAgIHJldHVybiBiYXRjaC5iYXRjaFR5cGUgPT09IGV4cG9ydHMuQmF0Y2hUeXBlLlVQREFURTtcbn1cbmZ1bmN0aW9uIGlzRGVsZXRlQmF0Y2goYmF0Y2gpIHtcbiAgICByZXR1cm4gYmF0Y2guYmF0Y2hUeXBlID09PSBleHBvcnRzLkJhdGNoVHlwZS5ERUxFVEU7XG59XG5mdW5jdGlvbiBidWlsZEN1cnJlbnRPcChidWxrT3ApIHtcbiAgICBsZXQgeyBjdXJyZW50T3AgfSA9IGJ1bGtPcC5zO1xuICAgIGJ1bGtPcC5zLmN1cnJlbnRPcCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoIWN1cnJlbnRPcClcbiAgICAgICAgY3VycmVudE9wID0ge307XG4gICAgcmV0dXJuIGN1cnJlbnRPcDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJCdWxrT3BlcmF0aW9uQmFzZSIsIkJ1bGtXcml0ZVNoaW1PcGVyYXRpb24iLCJGaW5kT3BlcmF0b3JzIiwiTW9uZ29CdWxrV3JpdGVFcnJvciIsIm1lcmdlQmF0Y2hSZXN1bHRzIiwiV3JpdGVFcnJvciIsIldyaXRlQ29uY2VybkVycm9yIiwiQnVsa1dyaXRlUmVzdWx0IiwiQmF0Y2giLCJCYXRjaFR5cGUiLCJ1dGlsXzEiLCJyZXF1aXJlIiwiYnNvbl8xIiwiZXJyb3JfMSIsImNvbW1vbl9mdW5jdGlvbnNfMSIsImRlbGV0ZV8xIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsImluc2VydF8xIiwib3BlcmF0aW9uXzEiLCJ1cGRhdGVfMSIsInV0aWxzXzEiLCJ3cml0ZV9jb25jZXJuXzEiLCJrU2VydmVyRXJyb3IiLCJTeW1ib2wiLCJmcmVlemUiLCJJTlNFUlQiLCJVUERBVEUiLCJERUxFVEUiLCJjb25zdHJ1Y3RvciIsImJhdGNoVHlwZSIsIm9yaWdpbmFsWmVyb0luZGV4IiwiY3VycmVudEluZGV4Iiwib3JpZ2luYWxJbmRleGVzIiwib3BlcmF0aW9ucyIsInNpemUiLCJzaXplQnl0ZXMiLCJnZW5lcmF0ZUlkTWFwIiwiaWRzIiwiaWRNYXAiLCJkb2MiLCJpbmRleCIsIl9pZCIsImJ1bGtSZXN1bHQiLCJpc09yZGVyZWQiLCJyZXN1bHQiLCJpbnNlcnRlZENvdW50Iiwibkluc2VydGVkIiwibWF0Y2hlZENvdW50Iiwibk1hdGNoZWQiLCJtb2RpZmllZENvdW50Iiwibk1vZGlmaWVkIiwiZGVsZXRlZENvdW50IiwiblJlbW92ZWQiLCJ1cHNlcnRlZENvdW50IiwidXBzZXJ0ZWQiLCJsZW5ndGgiLCJ1cHNlcnRlZElkcyIsImluc2VydGVkSWRzIiwiZ2V0U3VjY2Vzc2Z1bGx5SW5zZXJ0ZWRJZHMiLCJlbnVtZXJhYmxlIiwib2siLCJ3cml0ZUVycm9ycyIsInNsaWNlIiwiZmlsdGVyIiwic29tZSIsIndyaXRlRXJyb3IiLCJnZXRVcHNlcnRlZElkQXQiLCJnZXRSYXdSZXNwb25zZSIsImhhc1dyaXRlRXJyb3JzIiwiZ2V0V3JpdGVFcnJvckNvdW50IiwiZ2V0V3JpdGVFcnJvckF0IiwidW5kZWZpbmVkIiwiZ2V0V3JpdGVFcnJvcnMiLCJnZXRXcml0ZUNvbmNlcm5FcnJvciIsIndyaXRlQ29uY2VybkVycm9ycyIsImVycm1zZyIsImkiLCJlcnIiLCJjb2RlIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIldyaXRlQ29uY2VybkZhaWxlZCIsInRvU3RyaW5nIiwiaXNPayIsImVycm9yIiwiZXJySW5mbyIsInRvSlNPTiIsImdldE9wZXJhdGlvbiIsIm9wIiwiSlNPTiIsInN0cmluZ2lmeSIsImJhdGNoIiwibWVzc2FnZSIsInB1c2giLCJpc0luc2VydEJhdGNoIiwibiIsImlzRGVsZXRlQmF0Y2giLCJuVXBzZXJ0ZWQiLCJBcnJheSIsImlzQXJyYXkiLCJpc1VwZGF0ZUJhdGNoIiwid3JpdGVDb25jZXJuRXJyb3IiLCJleGVjdXRlQ29tbWFuZHMiLCJidWxrT3BlcmF0aW9uIiwib3B0aW9ucyIsImNhbGxiYWNrIiwicyIsImJhdGNoZXMiLCJzaGlmdCIsInJlc3VsdEhhbmRsZXIiLCJNb25nb1dyaXRlQ29uY2VybkVycm9yIiwiaGFuZGxlTW9uZ29Xcml0ZUNvbmNlcm5FcnJvciIsIndyaXRlUmVzdWx0IiwiaGFuZGxlV3JpdGVFcnJvciIsImZpbmFsT3B0aW9ucyIsInJlc29sdmVPcHRpb25zIiwib3JkZXJlZCIsImJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiIsIm9wZXJhdGlvbklkIiwiY2hlY2tLZXlzIiwicmV0cnlXcml0ZXMiLCJtdWx0aSIsImxpbWl0Iiwib3BlcmF0aW9uIiwiSW5zZXJ0T3BlcmF0aW9uIiwibmFtZXNwYWNlIiwiVXBkYXRlT3BlcmF0aW9uIiwiRGVsZXRlT3BlcmF0aW9uIiwiZXhlY3V0ZU9wZXJhdGlvbiIsImNvbGxlY3Rpb24iLCJjbGllbnQiLCJ0aGVuIiwiTW9uZ29TZXJ2ZXJFcnJvciIsIkVycm9yIiwiYXNzaWduIiwibmFtZSIsInVwZGF0ZSIsInVwZGF0ZURvY3VtZW50IiwiY3VycmVudE9wIiwiYnVpbGRDdXJyZW50T3AiLCJhZGRUb09wZXJhdGlvbnNMaXN0IiwibWFrZVVwZGF0ZVN0YXRlbWVudCIsInNlbGVjdG9yIiwidXBkYXRlT25lIiwiaGFzQXRvbWljT3BlcmF0b3JzIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsInJlcGxhY2VPbmUiLCJyZXBsYWNlbWVudCIsImRlbGV0ZU9uZSIsIm1ha2VEZWxldGVTdGF0ZW1lbnQiLCJkZWxldGUiLCJ1cHNlcnQiLCJjb2xsYXRpb24iLCJhcnJheUZpbHRlcnMiLCJoaW50IiwiZXhlY3V0ZUNvbW1hbmRzQXN5bmMiLCJwcm9taXNpZnkiLCJBYnN0cmFjdE9wZXJhdGlvbiIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsIl9zZXJ2ZXIiLCJzZXNzaW9uIiwidG9wb2xvZ3kiLCJnZXRUb3BvbG9neSIsImV4ZWN1dGVkIiwiaGVsbG8iLCJsYXN0SGVsbG8iLCJ1c2luZ0F1dG9FbmNyeXB0aW9uIiwiYXV0b0VuY3J5cHRlciIsIm1heEJzb25PYmplY3RTaXplIiwibWF4QmF0Y2hTaXplQnl0ZXMiLCJtYXhXcml0ZUJhdGNoU2l6ZSIsIm1heEtleVNpemUiLCJhcHBseVJldHJ5YWJsZVdyaXRlcyIsImRiIiwiY3VycmVudEJhdGNoIiwiY3VycmVudEJhdGNoU2l6ZSIsImN1cnJlbnRCYXRjaFNpemVCeXRlcyIsImN1cnJlbnRJbnNlcnRCYXRjaCIsImN1cnJlbnRVcGRhdGVCYXRjaCIsImN1cnJlbnRSZW1vdmVCYXRjaCIsIndyaXRlQ29uY2VybiIsIldyaXRlQ29uY2VybiIsImZyb21PcHRpb25zIiwiYnNvbk9wdGlvbnMiLCJyZXNvbHZlQlNPTk9wdGlvbnMiLCJpbnNlcnQiLCJkb2N1bWVudCIsIm1heWJlQWRkSWRUb0RvY3VtZW50cyIsImZvcmNlU2VydmVyT2JqZWN0SWQiLCJzaG91bGRGb3JjZVNlcnZlck9iamVjdElkIiwiZmluZCIsInJhdyIsImluc2VydE9uZSIsInVwZGF0ZVN0YXRlbWVudCIsInUiLCJ1cGRhdGVNYW55IiwiZGVsZXRlTWFueSIsIk1vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yIiwibXNnIiwicHJvdG90eXBlIiwiZ2V0IiwiYnVsa09wIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/bulk/common.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/bulk/ordered.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/bulk/ordered.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.OrderedBulkOperation = void 0;\nconst BSON = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/bulk/common.js\");\n/** @public */ class OrderedBulkOperation extends common_1.BulkOperationBase {\n    /** @internal */ constructor(collection, options){\n        super(collection, options, true);\n    }\n    addToOperationsList(batchType, document) {\n        // Get the bsonSize\n        const bsonSize = BSON.calculateObjectSize(document, {\n            checkKeys: false,\n            // Since we don't know what the user selected for BSON options here,\n            // err on the safe side, and check the size with ignoreUndefined: false.\n            ignoreUndefined: false\n        });\n        // Throw error if the doc is bigger than the max BSON size\n        if (bsonSize >= this.s.maxBsonObjectSize) // TODO(NODE-3483): Change this to MongoBSONError\n        throw new error_1.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);\n        // Create a new batch object if we don't have a current one\n        if (this.s.currentBatch == null) {\n            this.s.currentBatch = new common_1.Batch(batchType, this.s.currentIndex);\n        }\n        const maxKeySize = this.s.maxKeySize;\n        // Check if we need to create a new batch\n        if (// New batch if we exceed the max batch op size\n        this.s.currentBatchSize + 1 >= this.s.maxWriteBatchSize || // New batch if we exceed the maxBatchSizeBytes. Only matters if batch already has a doc,\n        // since we can't sent an empty batch\n        this.s.currentBatchSize > 0 && this.s.currentBatchSizeBytes + maxKeySize + bsonSize >= this.s.maxBatchSizeBytes || // New batch if the new op does not have the same op type as the current batch\n        this.s.currentBatch.batchType !== batchType) {\n            // Save the batch to the execution stack\n            this.s.batches.push(this.s.currentBatch);\n            // Create a new batch\n            this.s.currentBatch = new common_1.Batch(batchType, this.s.currentIndex);\n            // Reset the current size trackers\n            this.s.currentBatchSize = 0;\n            this.s.currentBatchSizeBytes = 0;\n        }\n        if (batchType === common_1.BatchType.INSERT) {\n            this.s.bulkResult.insertedIds.push({\n                index: this.s.currentIndex,\n                _id: document._id\n            });\n        }\n        // We have an array of documents\n        if (Array.isArray(document)) {\n            throw new error_1.MongoInvalidArgumentError(\"Operation passed in cannot be an Array\");\n        }\n        this.s.currentBatch.originalIndexes.push(this.s.currentIndex);\n        this.s.currentBatch.operations.push(document);\n        this.s.currentBatchSize += 1;\n        this.s.currentBatchSizeBytes += maxKeySize + bsonSize;\n        this.s.currentIndex += 1;\n        return this;\n    }\n}\nexports.OrderedBulkOperation = OrderedBulkOperation; //# sourceMappingURL=ordered.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnVsay9vcmRlcmVkLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw0QkFBNEIsR0FBRyxLQUFLO0FBQ3BDLE1BQU1HLE9BQU9DLG1CQUFPQSxDQUFDLHlEQUFTO0FBQzlCLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1FLFdBQVdGLG1CQUFPQSxDQUFDLGlFQUFVO0FBQ25DLFlBQVksR0FDWixNQUFNRiw2QkFBNkJJLFNBQVNDLGlCQUFpQjtJQUN6RCxjQUFjLEdBQ2RDLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxDQUFFO1FBQzdCLEtBQUssQ0FBQ0QsWUFBWUMsU0FBUztJQUMvQjtJQUNBQyxvQkFBb0JDLFNBQVMsRUFBRUMsUUFBUSxFQUFFO1FBQ3JDLG1CQUFtQjtRQUNuQixNQUFNQyxXQUFXWCxLQUFLWSxtQkFBbUIsQ0FBQ0YsVUFBVTtZQUNoREcsV0FBVztZQUNYLG9FQUFvRTtZQUNwRSx3RUFBd0U7WUFDeEVDLGlCQUFpQjtRQUNyQjtRQUNBLDBEQUEwRDtRQUMxRCxJQUFJSCxZQUFZLElBQUksQ0FBQ0ksQ0FBQyxDQUFDQyxpQkFBaUIsRUFDcEMsaURBQWlEO1FBQ2pELE1BQU0sSUFBSWQsUUFBUWUseUJBQXlCLENBQUMsQ0FBQyx5Q0FBeUMsRUFBRSxJQUFJLENBQUNGLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztRQUN0SCwyREFBMkQ7UUFDM0QsSUFBSSxJQUFJLENBQUNELENBQUMsQ0FBQ0csWUFBWSxJQUFJLE1BQU07WUFDN0IsSUFBSSxDQUFDSCxDQUFDLENBQUNHLFlBQVksR0FBRyxJQUFJZixTQUFTZ0IsS0FBSyxDQUFDVixXQUFXLElBQUksQ0FBQ00sQ0FBQyxDQUFDSyxZQUFZO1FBQzNFO1FBQ0EsTUFBTUMsYUFBYSxJQUFJLENBQUNOLENBQUMsQ0FBQ00sVUFBVTtRQUNwQyx5Q0FBeUM7UUFDekMsSUFDQSwrQ0FBK0M7UUFDL0MsSUFBSSxDQUFDTixDQUFDLENBQUNPLGdCQUFnQixHQUFHLEtBQUssSUFBSSxDQUFDUCxDQUFDLENBQUNRLGlCQUFpQixJQUNuRCx5RkFBeUY7UUFDekYscUNBQXFDO1FBQ3BDLElBQUksQ0FBQ1IsQ0FBQyxDQUFDTyxnQkFBZ0IsR0FBRyxLQUN2QixJQUFJLENBQUNQLENBQUMsQ0FBQ1MscUJBQXFCLEdBQUdILGFBQWFWLFlBQVksSUFBSSxDQUFDSSxDQUFDLENBQUNVLGlCQUFpQixJQUNwRiw4RUFBOEU7UUFDOUUsSUFBSSxDQUFDVixDQUFDLENBQUNHLFlBQVksQ0FBQ1QsU0FBUyxLQUFLQSxXQUFXO1lBQzdDLHdDQUF3QztZQUN4QyxJQUFJLENBQUNNLENBQUMsQ0FBQ1csT0FBTyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDWixDQUFDLENBQUNHLFlBQVk7WUFDdkMscUJBQXFCO1lBQ3JCLElBQUksQ0FBQ0gsQ0FBQyxDQUFDRyxZQUFZLEdBQUcsSUFBSWYsU0FBU2dCLEtBQUssQ0FBQ1YsV0FBVyxJQUFJLENBQUNNLENBQUMsQ0FBQ0ssWUFBWTtZQUN2RSxrQ0FBa0M7WUFDbEMsSUFBSSxDQUFDTCxDQUFDLENBQUNPLGdCQUFnQixHQUFHO1lBQzFCLElBQUksQ0FBQ1AsQ0FBQyxDQUFDUyxxQkFBcUIsR0FBRztRQUNuQztRQUNBLElBQUlmLGNBQWNOLFNBQVN5QixTQUFTLENBQUNDLE1BQU0sRUFBRTtZQUN6QyxJQUFJLENBQUNkLENBQUMsQ0FBQ2UsVUFBVSxDQUFDQyxXQUFXLENBQUNKLElBQUksQ0FBQztnQkFDL0JLLE9BQU8sSUFBSSxDQUFDakIsQ0FBQyxDQUFDSyxZQUFZO2dCQUMxQmEsS0FBS3ZCLFNBQVN1QixHQUFHO1lBQ3JCO1FBQ0o7UUFDQSxnQ0FBZ0M7UUFDaEMsSUFBSUMsTUFBTUMsT0FBTyxDQUFDekIsV0FBVztZQUN6QixNQUFNLElBQUlSLFFBQVFlLHlCQUF5QixDQUFDO1FBQ2hEO1FBQ0EsSUFBSSxDQUFDRixDQUFDLENBQUNHLFlBQVksQ0FBQ2tCLGVBQWUsQ0FBQ1QsSUFBSSxDQUFDLElBQUksQ0FBQ1osQ0FBQyxDQUFDSyxZQUFZO1FBQzVELElBQUksQ0FBQ0wsQ0FBQyxDQUFDRyxZQUFZLENBQUNtQixVQUFVLENBQUNWLElBQUksQ0FBQ2pCO1FBQ3BDLElBQUksQ0FBQ0ssQ0FBQyxDQUFDTyxnQkFBZ0IsSUFBSTtRQUMzQixJQUFJLENBQUNQLENBQUMsQ0FBQ1MscUJBQXFCLElBQUlILGFBQWFWO1FBQzdDLElBQUksQ0FBQ0ksQ0FBQyxDQUFDSyxZQUFZLElBQUk7UUFDdkIsT0FBTyxJQUFJO0lBQ2Y7QUFDSjtBQUNBdkIsNEJBQTRCLEdBQUdFLHNCQUMvQixtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2J1bGsvb3JkZXJlZC5qcz9lMjE2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5PcmRlcmVkQnVsa09wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IEJTT04gPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKTtcbi8qKiBAcHVibGljICovXG5jbGFzcyBPcmRlcmVkQnVsa09wZXJhdGlvbiBleHRlbmRzIGNvbW1vbl8xLkJ1bGtPcGVyYXRpb25CYXNlIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLCBvcHRpb25zLCB0cnVlKTtcbiAgICB9XG4gICAgYWRkVG9PcGVyYXRpb25zTGlzdChiYXRjaFR5cGUsIGRvY3VtZW50KSB7XG4gICAgICAgIC8vIEdldCB0aGUgYnNvblNpemVcbiAgICAgICAgY29uc3QgYnNvblNpemUgPSBCU09OLmNhbGN1bGF0ZU9iamVjdFNpemUoZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIGNoZWNrS2V5czogZmFsc2UsXG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSBkb24ndCBrbm93IHdoYXQgdGhlIHVzZXIgc2VsZWN0ZWQgZm9yIEJTT04gb3B0aW9ucyBoZXJlLFxuICAgICAgICAgICAgLy8gZXJyIG9uIHRoZSBzYWZlIHNpZGUsIGFuZCBjaGVjayB0aGUgc2l6ZSB3aXRoIGlnbm9yZVVuZGVmaW5lZDogZmFsc2UuXG4gICAgICAgICAgICBpZ25vcmVVbmRlZmluZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUaHJvdyBlcnJvciBpZiB0aGUgZG9jIGlzIGJpZ2dlciB0aGFuIHRoZSBtYXggQlNPTiBzaXplXG4gICAgICAgIGlmIChic29uU2l6ZSA+PSB0aGlzLnMubWF4QnNvbk9iamVjdFNpemUpXG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IENoYW5nZSB0aGlzIHRvIE1vbmdvQlNPTkVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBEb2N1bWVudCBpcyBsYXJnZXIgdGhhbiB0aGUgbWF4aW11bSBzaXplICR7dGhpcy5zLm1heEJzb25PYmplY3RTaXplfWApO1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgYmF0Y2ggb2JqZWN0IGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IG9uZVxuICAgICAgICBpZiAodGhpcy5zLmN1cnJlbnRCYXRjaCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoID0gbmV3IGNvbW1vbl8xLkJhdGNoKGJhdGNoVHlwZSwgdGhpcy5zLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWF4S2V5U2l6ZSA9IHRoaXMucy5tYXhLZXlTaXplO1xuICAgICAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBiYXRjaFxuICAgICAgICBpZiAoXG4gICAgICAgIC8vIE5ldyBiYXRjaCBpZiB3ZSBleGNlZWQgdGhlIG1heCBiYXRjaCBvcCBzaXplXG4gICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2hTaXplICsgMSA+PSB0aGlzLnMubWF4V3JpdGVCYXRjaFNpemUgfHxcbiAgICAgICAgICAgIC8vIE5ldyBiYXRjaCBpZiB3ZSBleGNlZWQgdGhlIG1heEJhdGNoU2l6ZUJ5dGVzLiBPbmx5IG1hdHRlcnMgaWYgYmF0Y2ggYWxyZWFkeSBoYXMgYSBkb2MsXG4gICAgICAgICAgICAvLyBzaW5jZSB3ZSBjYW4ndCBzZW50IGFuIGVtcHR5IGJhdGNoXG4gICAgICAgICAgICAodGhpcy5zLmN1cnJlbnRCYXRjaFNpemUgPiAwICYmXG4gICAgICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaFNpemVCeXRlcyArIG1heEtleVNpemUgKyBic29uU2l6ZSA+PSB0aGlzLnMubWF4QmF0Y2hTaXplQnl0ZXMpIHx8XG4gICAgICAgICAgICAvLyBOZXcgYmF0Y2ggaWYgdGhlIG5ldyBvcCBkb2VzIG5vdCBoYXZlIHRoZSBzYW1lIG9wIHR5cGUgYXMgdGhlIGN1cnJlbnQgYmF0Y2hcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2guYmF0Y2hUeXBlICE9PSBiYXRjaFR5cGUpIHtcbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIGJhdGNoIHRvIHRoZSBleGVjdXRpb24gc3RhY2tcbiAgICAgICAgICAgIHRoaXMucy5iYXRjaGVzLnB1c2godGhpcy5zLmN1cnJlbnRCYXRjaCk7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgYmF0Y2hcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2ggPSBuZXcgY29tbW9uXzEuQmF0Y2goYmF0Y2hUeXBlLCB0aGlzLnMuY3VycmVudEluZGV4KTtcbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBjdXJyZW50IHNpemUgdHJhY2tlcnNcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2hTaXplID0gMDtcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2hTaXplQnl0ZXMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiYXRjaFR5cGUgPT09IGNvbW1vbl8xLkJhdGNoVHlwZS5JTlNFUlQpIHtcbiAgICAgICAgICAgIHRoaXMucy5idWxrUmVzdWx0Lmluc2VydGVkSWRzLnB1c2goe1xuICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnMuY3VycmVudEluZGV4LFxuICAgICAgICAgICAgICAgIF9pZDogZG9jdW1lbnQuX2lkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBoYXZlIGFuIGFycmF5IG9mIGRvY3VtZW50c1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkb2N1bWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ09wZXJhdGlvbiBwYXNzZWQgaW4gY2Fubm90IGJlIGFuIEFycmF5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaC5vcmlnaW5hbEluZGV4ZXMucHVzaCh0aGlzLnMuY3VycmVudEluZGV4KTtcbiAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaC5vcGVyYXRpb25zLnB1c2goZG9jdW1lbnQpO1xuICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoU2l6ZSArPSAxO1xuICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoU2l6ZUJ5dGVzICs9IG1heEtleVNpemUgKyBic29uU2l6ZTtcbiAgICAgICAgdGhpcy5zLmN1cnJlbnRJbmRleCArPSAxO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnRzLk9yZGVyZWRCdWxrT3BlcmF0aW9uID0gT3JkZXJlZEJ1bGtPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcmRlcmVkLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk9yZGVyZWRCdWxrT3BlcmF0aW9uIiwiQlNPTiIsInJlcXVpcmUiLCJlcnJvcl8xIiwiY29tbW9uXzEiLCJCdWxrT3BlcmF0aW9uQmFzZSIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsIm9wdGlvbnMiLCJhZGRUb09wZXJhdGlvbnNMaXN0IiwiYmF0Y2hUeXBlIiwiZG9jdW1lbnQiLCJic29uU2l6ZSIsImNhbGN1bGF0ZU9iamVjdFNpemUiLCJjaGVja0tleXMiLCJpZ25vcmVVbmRlZmluZWQiLCJzIiwibWF4QnNvbk9iamVjdFNpemUiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiY3VycmVudEJhdGNoIiwiQmF0Y2giLCJjdXJyZW50SW5kZXgiLCJtYXhLZXlTaXplIiwiY3VycmVudEJhdGNoU2l6ZSIsIm1heFdyaXRlQmF0Y2hTaXplIiwiY3VycmVudEJhdGNoU2l6ZUJ5dGVzIiwibWF4QmF0Y2hTaXplQnl0ZXMiLCJiYXRjaGVzIiwicHVzaCIsIkJhdGNoVHlwZSIsIklOU0VSVCIsImJ1bGtSZXN1bHQiLCJpbnNlcnRlZElkcyIsImluZGV4IiwiX2lkIiwiQXJyYXkiLCJpc0FycmF5Iiwib3JpZ2luYWxJbmRleGVzIiwib3BlcmF0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/bulk/ordered.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/bulk/unordered.js":
/*!****************************************************!*\
  !*** ./node_modules/mongodb/lib/bulk/unordered.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.UnorderedBulkOperation = void 0;\nconst BSON = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/bulk/common.js\");\n/** @public */ class UnorderedBulkOperation extends common_1.BulkOperationBase {\n    /** @internal */ constructor(collection, options){\n        super(collection, options, false);\n    }\n    handleWriteError(callback, writeResult) {\n        if (this.s.batches.length) {\n            return false;\n        }\n        return super.handleWriteError(callback, writeResult);\n    }\n    addToOperationsList(batchType, document) {\n        // Get the bsonSize\n        const bsonSize = BSON.calculateObjectSize(document, {\n            checkKeys: false,\n            // Since we don't know what the user selected for BSON options here,\n            // err on the safe side, and check the size with ignoreUndefined: false.\n            ignoreUndefined: false\n        });\n        // Throw error if the doc is bigger than the max BSON size\n        if (bsonSize >= this.s.maxBsonObjectSize) {\n            // TODO(NODE-3483): Change this to MongoBSONError\n            throw new error_1.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);\n        }\n        // Holds the current batch\n        this.s.currentBatch = undefined;\n        // Get the right type of batch\n        if (batchType === common_1.BatchType.INSERT) {\n            this.s.currentBatch = this.s.currentInsertBatch;\n        } else if (batchType === common_1.BatchType.UPDATE) {\n            this.s.currentBatch = this.s.currentUpdateBatch;\n        } else if (batchType === common_1.BatchType.DELETE) {\n            this.s.currentBatch = this.s.currentRemoveBatch;\n        }\n        const maxKeySize = this.s.maxKeySize;\n        // Create a new batch object if we don't have a current one\n        if (this.s.currentBatch == null) {\n            this.s.currentBatch = new common_1.Batch(batchType, this.s.currentIndex);\n        }\n        // Check if we need to create a new batch\n        if (// New batch if we exceed the max batch op size\n        this.s.currentBatch.size + 1 >= this.s.maxWriteBatchSize || // New batch if we exceed the maxBatchSizeBytes. Only matters if batch already has a doc,\n        // since we can't sent an empty batch\n        this.s.currentBatch.size > 0 && this.s.currentBatch.sizeBytes + maxKeySize + bsonSize >= this.s.maxBatchSizeBytes || // New batch if the new op does not have the same op type as the current batch\n        this.s.currentBatch.batchType !== batchType) {\n            // Save the batch to the execution stack\n            this.s.batches.push(this.s.currentBatch);\n            // Create a new batch\n            this.s.currentBatch = new common_1.Batch(batchType, this.s.currentIndex);\n        }\n        // We have an array of documents\n        if (Array.isArray(document)) {\n            throw new error_1.MongoInvalidArgumentError(\"Operation passed in cannot be an Array\");\n        }\n        this.s.currentBatch.operations.push(document);\n        this.s.currentBatch.originalIndexes.push(this.s.currentIndex);\n        this.s.currentIndex = this.s.currentIndex + 1;\n        // Save back the current Batch to the right type\n        if (batchType === common_1.BatchType.INSERT) {\n            this.s.currentInsertBatch = this.s.currentBatch;\n            this.s.bulkResult.insertedIds.push({\n                index: this.s.bulkResult.insertedIds.length,\n                _id: document._id\n            });\n        } else if (batchType === common_1.BatchType.UPDATE) {\n            this.s.currentUpdateBatch = this.s.currentBatch;\n        } else if (batchType === common_1.BatchType.DELETE) {\n            this.s.currentRemoveBatch = this.s.currentBatch;\n        }\n        // Update current batch size\n        this.s.currentBatch.size += 1;\n        this.s.currentBatch.sizeBytes += maxKeySize + bsonSize;\n        return this;\n    }\n}\nexports.UnorderedBulkOperation = UnorderedBulkOperation; //# sourceMappingURL=unordered.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvYnVsay91bm9yZGVyZWQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDhCQUE4QixHQUFHLEtBQUs7QUFDdEMsTUFBTUcsT0FBT0MsbUJBQU9BLENBQUMseURBQVM7QUFDOUIsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUUsV0FBV0YsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsWUFBWSxHQUNaLE1BQU1GLCtCQUErQkksU0FBU0MsaUJBQWlCO0lBQzNELGNBQWMsR0FDZEMsWUFBWUMsVUFBVSxFQUFFQyxPQUFPLENBQUU7UUFDN0IsS0FBSyxDQUFDRCxZQUFZQyxTQUFTO0lBQy9CO0lBQ0FDLGlCQUFpQkMsUUFBUSxFQUFFQyxXQUFXLEVBQUU7UUFDcEMsSUFBSSxJQUFJLENBQUNDLENBQUMsQ0FBQ0MsT0FBTyxDQUFDQyxNQUFNLEVBQUU7WUFDdkIsT0FBTztRQUNYO1FBQ0EsT0FBTyxLQUFLLENBQUNMLGlCQUFpQkMsVUFBVUM7SUFDNUM7SUFDQUksb0JBQW9CQyxTQUFTLEVBQUVDLFFBQVEsRUFBRTtRQUNyQyxtQkFBbUI7UUFDbkIsTUFBTUMsV0FBV2pCLEtBQUtrQixtQkFBbUIsQ0FBQ0YsVUFBVTtZQUNoREcsV0FBVztZQUNYLG9FQUFvRTtZQUNwRSx3RUFBd0U7WUFDeEVDLGlCQUFpQjtRQUNyQjtRQUNBLDBEQUEwRDtRQUMxRCxJQUFJSCxZQUFZLElBQUksQ0FBQ04sQ0FBQyxDQUFDVSxpQkFBaUIsRUFBRTtZQUN0QyxpREFBaUQ7WUFDakQsTUFBTSxJQUFJbkIsUUFBUW9CLHlCQUF5QixDQUFDLENBQUMseUNBQXlDLEVBQUUsSUFBSSxDQUFDWCxDQUFDLENBQUNVLGlCQUFpQixDQUFDLENBQUM7UUFDdEg7UUFDQSwwQkFBMEI7UUFDMUIsSUFBSSxDQUFDVixDQUFDLENBQUNZLFlBQVksR0FB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O1lBQzlDLElBQUksQ0FBQ2pCLENBQUMsQ0FBQ2tCLGtCQUFrQixHQUFHLElBQUksQ0FBQ2xCLENBQUMsQ0FBQ1ksWUFBWTtRQUNuRCxPQUNLLElBQUlSLGNBQWNaLFNBQVNzQixTQUFTLENBQUNLLE1BQU0sRUFBRTtZQUM5QyxJQUFJLENBQUNuQixDQUFDLENBQUNvQixrQkFBa0IsR0FBRyxJQUFJLENBQUNwQixDQUFDLENBQUNZLFlBQVk7UUFDbkQ7UUFDQSw0QkFBNEI7UUFDNUIsSUFBSSxDQUFDWixDQUFDLENBQUNZLFlBQVksQ0FBQ1ksSUFBSSxJQUFJO1FBQzVCLElBQUksQ0FBQ3hCLENBQUMsQ0FBQ1ksWUFBWSxDQUFDYyxTQUFTLElBQUlMLGFBQWFmO1FBQzlDLE9BQU8sSUFBSTtJQUNmO0FBQ0o7QUFDQXBCLDhCQUE4QixHQUFHRSx3QkFDakMscUNBQXFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9idWxrL3Vub3JkZXJlZC5qcz9iYzM2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Vbm9yZGVyZWRCdWxrT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgQlNPTiA9IHJlcXVpcmUoXCIuLi9ic29uXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4vY29tbW9uXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmNsYXNzIFVub3JkZXJlZEJ1bGtPcGVyYXRpb24gZXh0ZW5kcyBjb21tb25fMS5CdWxrT3BlcmF0aW9uQmFzZSB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbiwgb3B0aW9ucywgZmFsc2UpO1xuICAgIH1cbiAgICBoYW5kbGVXcml0ZUVycm9yKGNhbGxiYWNrLCB3cml0ZVJlc3VsdCkge1xuICAgICAgICBpZiAodGhpcy5zLmJhdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmhhbmRsZVdyaXRlRXJyb3IoY2FsbGJhY2ssIHdyaXRlUmVzdWx0KTtcbiAgICB9XG4gICAgYWRkVG9PcGVyYXRpb25zTGlzdChiYXRjaFR5cGUsIGRvY3VtZW50KSB7XG4gICAgICAgIC8vIEdldCB0aGUgYnNvblNpemVcbiAgICAgICAgY29uc3QgYnNvblNpemUgPSBCU09OLmNhbGN1bGF0ZU9iamVjdFNpemUoZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIGNoZWNrS2V5czogZmFsc2UsXG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSBkb24ndCBrbm93IHdoYXQgdGhlIHVzZXIgc2VsZWN0ZWQgZm9yIEJTT04gb3B0aW9ucyBoZXJlLFxuICAgICAgICAgICAgLy8gZXJyIG9uIHRoZSBzYWZlIHNpZGUsIGFuZCBjaGVjayB0aGUgc2l6ZSB3aXRoIGlnbm9yZVVuZGVmaW5lZDogZmFsc2UuXG4gICAgICAgICAgICBpZ25vcmVVbmRlZmluZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUaHJvdyBlcnJvciBpZiB0aGUgZG9jIGlzIGJpZ2dlciB0aGFuIHRoZSBtYXggQlNPTiBzaXplXG4gICAgICAgIGlmIChic29uU2l6ZSA+PSB0aGlzLnMubWF4QnNvbk9iamVjdFNpemUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogQ2hhbmdlIHRoaXMgdG8gTW9uZ29CU09ORXJyb3JcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYERvY3VtZW50IGlzIGxhcmdlciB0aGFuIHRoZSBtYXhpbXVtIHNpemUgJHt0aGlzLnMubWF4QnNvbk9iamVjdFNpemV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSG9sZHMgdGhlIGN1cnJlbnQgYmF0Y2hcbiAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gR2V0IHRoZSByaWdodCB0eXBlIG9mIGJhdGNoXG4gICAgICAgIGlmIChiYXRjaFR5cGUgPT09IGNvbW1vbl8xLkJhdGNoVHlwZS5JTlNFUlQpIHtcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2ggPSB0aGlzLnMuY3VycmVudEluc2VydEJhdGNoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJhdGNoVHlwZSA9PT0gY29tbW9uXzEuQmF0Y2hUeXBlLlVQREFURSkge1xuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaCA9IHRoaXMucy5jdXJyZW50VXBkYXRlQmF0Y2g7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYmF0Y2hUeXBlID09PSBjb21tb25fMS5CYXRjaFR5cGUuREVMRVRFKSB7XG4gICAgICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoID0gdGhpcy5zLmN1cnJlbnRSZW1vdmVCYXRjaDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXhLZXlTaXplID0gdGhpcy5zLm1heEtleVNpemU7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBiYXRjaCBvYmplY3QgaWYgd2UgZG9uJ3QgaGF2ZSBhIGN1cnJlbnQgb25lXG4gICAgICAgIGlmICh0aGlzLnMuY3VycmVudEJhdGNoID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2ggPSBuZXcgY29tbW9uXzEuQmF0Y2goYmF0Y2hUeXBlLCB0aGlzLnMuY3VycmVudEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBiYXRjaFxuICAgICAgICBpZiAoXG4gICAgICAgIC8vIE5ldyBiYXRjaCBpZiB3ZSBleGNlZWQgdGhlIG1heCBiYXRjaCBvcCBzaXplXG4gICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2guc2l6ZSArIDEgPj0gdGhpcy5zLm1heFdyaXRlQmF0Y2hTaXplIHx8XG4gICAgICAgICAgICAvLyBOZXcgYmF0Y2ggaWYgd2UgZXhjZWVkIHRoZSBtYXhCYXRjaFNpemVCeXRlcy4gT25seSBtYXR0ZXJzIGlmIGJhdGNoIGFscmVhZHkgaGFzIGEgZG9jLFxuICAgICAgICAgICAgLy8gc2luY2Ugd2UgY2FuJ3Qgc2VudCBhbiBlbXB0eSBiYXRjaFxuICAgICAgICAgICAgKHRoaXMucy5jdXJyZW50QmF0Y2guc2l6ZSA+IDAgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoLnNpemVCeXRlcyArIG1heEtleVNpemUgKyBic29uU2l6ZSA+PSB0aGlzLnMubWF4QmF0Y2hTaXplQnl0ZXMpIHx8XG4gICAgICAgICAgICAvLyBOZXcgYmF0Y2ggaWYgdGhlIG5ldyBvcCBkb2VzIG5vdCBoYXZlIHRoZSBzYW1lIG9wIHR5cGUgYXMgdGhlIGN1cnJlbnQgYmF0Y2hcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2guYmF0Y2hUeXBlICE9PSBiYXRjaFR5cGUpIHtcbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIGJhdGNoIHRvIHRoZSBleGVjdXRpb24gc3RhY2tcbiAgICAgICAgICAgIHRoaXMucy5iYXRjaGVzLnB1c2godGhpcy5zLmN1cnJlbnRCYXRjaCk7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgYmF0Y2hcbiAgICAgICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2ggPSBuZXcgY29tbW9uXzEuQmF0Y2goYmF0Y2hUeXBlLCB0aGlzLnMuY3VycmVudEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBoYXZlIGFuIGFycmF5IG9mIGRvY3VtZW50c1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkb2N1bWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ09wZXJhdGlvbiBwYXNzZWQgaW4gY2Fubm90IGJlIGFuIEFycmF5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zLmN1cnJlbnRCYXRjaC5vcGVyYXRpb25zLnB1c2goZG9jdW1lbnQpO1xuICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoLm9yaWdpbmFsSW5kZXhlcy5wdXNoKHRoaXMucy5jdXJyZW50SW5kZXgpO1xuICAgICAgICB0aGlzLnMuY3VycmVudEluZGV4ID0gdGhpcy5zLmN1cnJlbnRJbmRleCArIDE7XG4gICAgICAgIC8vIFNhdmUgYmFjayB0aGUgY3VycmVudCBCYXRjaCB0byB0aGUgcmlnaHQgdHlwZVxuICAgICAgICBpZiAoYmF0Y2hUeXBlID09PSBjb21tb25fMS5CYXRjaFR5cGUuSU5TRVJUKSB7XG4gICAgICAgICAgICB0aGlzLnMuY3VycmVudEluc2VydEJhdGNoID0gdGhpcy5zLmN1cnJlbnRCYXRjaDtcbiAgICAgICAgICAgIHRoaXMucy5idWxrUmVzdWx0Lmluc2VydGVkSWRzLnB1c2goe1xuICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnMuYnVsa1Jlc3VsdC5pbnNlcnRlZElkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgX2lkOiBkb2N1bWVudC5faWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJhdGNoVHlwZSA9PT0gY29tbW9uXzEuQmF0Y2hUeXBlLlVQREFURSkge1xuICAgICAgICAgICAgdGhpcy5zLmN1cnJlbnRVcGRhdGVCYXRjaCA9IHRoaXMucy5jdXJyZW50QmF0Y2g7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYmF0Y2hUeXBlID09PSBjb21tb25fMS5CYXRjaFR5cGUuREVMRVRFKSB7XG4gICAgICAgICAgICB0aGlzLnMuY3VycmVudFJlbW92ZUJhdGNoID0gdGhpcy5zLmN1cnJlbnRCYXRjaDtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgY3VycmVudCBiYXRjaCBzaXplXG4gICAgICAgIHRoaXMucy5jdXJyZW50QmF0Y2guc2l6ZSArPSAxO1xuICAgICAgICB0aGlzLnMuY3VycmVudEJhdGNoLnNpemVCeXRlcyArPSBtYXhLZXlTaXplICsgYnNvblNpemU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbmV4cG9ydHMuVW5vcmRlcmVkQnVsa09wZXJhdGlvbiA9IFVub3JkZXJlZEJ1bGtPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bm9yZGVyZWQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiVW5vcmRlcmVkQnVsa09wZXJhdGlvbiIsIkJTT04iLCJyZXF1aXJlIiwiZXJyb3JfMSIsImNvbW1vbl8xIiwiQnVsa09wZXJhdGlvbkJhc2UiLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJvcHRpb25zIiwiaGFuZGxlV3JpdGVFcnJvciIsImNhbGxiYWNrIiwid3JpdGVSZXN1bHQiLCJzIiwiYmF0Y2hlcyIsImxlbmd0aCIsImFkZFRvT3BlcmF0aW9uc0xpc3QiLCJiYXRjaFR5cGUiLCJkb2N1bWVudCIsImJzb25TaXplIiwiY2FsY3VsYXRlT2JqZWN0U2l6ZSIsImNoZWNrS2V5cyIsImlnbm9yZVVuZGVmaW5lZCIsIm1heEJzb25PYmplY3RTaXplIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImN1cnJlbnRCYXRjaCIsInVuZGVmaW5lZCIsIkJhdGNoVHlwZSIsIklOU0VSVCIsImN1cnJlbnRJbnNlcnRCYXRjaCIsIlVQREFURSIsImN1cnJlbnRVcGRhdGVCYXRjaCIsIkRFTEVURSIsImN1cnJlbnRSZW1vdmVCYXRjaCIsIm1heEtleVNpemUiLCJCYXRjaCIsImN1cnJlbnRJbmRleCIsInNpemUiLCJtYXhXcml0ZUJhdGNoU2l6ZSIsInNpemVCeXRlcyIsIm1heEJhdGNoU2l6ZUJ5dGVzIiwicHVzaCIsIkFycmF5IiwiaXNBcnJheSIsIm9wZXJhdGlvbnMiLCJvcmlnaW5hbEluZGV4ZXMiLCJidWxrUmVzdWx0IiwiaW5zZXJ0ZWRJZHMiLCJpbmRleCIsIl9pZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/bulk/unordered.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/change_stream.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/change_stream.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ChangeStream = void 0;\nconst collection_1 = __webpack_require__(/*! ./collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst change_stream_cursor_1 = __webpack_require__(/*! ./cursor/change_stream_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/change_stream_cursor.js\");\nconst db_1 = __webpack_require__(/*! ./db */ \"(ssr)/./node_modules/mongodb/lib/db.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_client_1 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nconst mongo_types_1 = __webpack_require__(/*! ./mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/** @internal */ const kCursorStream = Symbol(\"cursorStream\");\n/** @internal */ const kClosed = Symbol(\"closed\");\n/** @internal */ const kMode = Symbol(\"mode\");\nconst CHANGE_STREAM_OPTIONS = [\n    \"resumeAfter\",\n    \"startAfter\",\n    \"startAtOperationTime\",\n    \"fullDocument\",\n    \"fullDocumentBeforeChange\",\n    \"showExpandedEvents\"\n];\nconst CHANGE_DOMAIN_TYPES = {\n    COLLECTION: Symbol(\"Collection\"),\n    DATABASE: Symbol(\"Database\"),\n    CLUSTER: Symbol(\"Cluster\")\n};\nconst CHANGE_STREAM_EVENTS = [\n    constants_1.RESUME_TOKEN_CHANGED,\n    constants_1.END,\n    constants_1.CLOSE\n];\nconst NO_RESUME_TOKEN_ERROR = \"A change stream document has been received that lacks a resume token (_id).\";\nconst CHANGESTREAM_CLOSED_ERROR = \"ChangeStream is closed\";\n/**\n * Creates a new Change Stream instance. Normally created using {@link Collection#watch|Collection.watch()}.\n * @public\n */ class ChangeStream extends mongo_types_1.TypedEventEmitter {\n    /**\n     * @internal\n     *\n     * @param parent - The parent object that created this change stream\n     * @param pipeline - An array of {@link https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/|aggregation pipeline stages} through which to pass change stream documents\n     */ constructor(parent, pipeline = [], options = {}){\n        super();\n        this.pipeline = pipeline;\n        this.options = {\n            ...options\n        };\n        delete this.options.writeConcern;\n        if (parent instanceof collection_1.Collection) {\n            this.type = CHANGE_DOMAIN_TYPES.COLLECTION;\n        } else if (parent instanceof db_1.Db) {\n            this.type = CHANGE_DOMAIN_TYPES.DATABASE;\n        } else if (parent instanceof mongo_client_1.MongoClient) {\n            this.type = CHANGE_DOMAIN_TYPES.CLUSTER;\n        } else {\n            throw new error_1.MongoChangeStreamError(\"Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient\");\n        }\n        this.parent = parent;\n        this.namespace = parent.s.namespace;\n        if (!this.options.readPreference && parent.readPreference) {\n            this.options.readPreference = parent.readPreference;\n        }\n        // Create contained Change Stream cursor\n        this.cursor = this._createChangeStreamCursor(options);\n        this[kClosed] = false;\n        this[kMode] = false;\n        // Listen for any `change` listeners being added to ChangeStream\n        this.on(\"newListener\", (eventName)=>{\n            if (eventName === \"change\" && this.cursor && this.listenerCount(\"change\") === 0) {\n                this._streamEvents(this.cursor);\n            }\n        });\n        this.on(\"removeListener\", (eventName)=>{\n            if (eventName === \"change\" && this.listenerCount(\"change\") === 0 && this.cursor) {\n                this[kCursorStream]?.removeAllListeners(\"data\");\n            }\n        });\n    }\n    /** @internal */ get cursorStream() {\n        return this[kCursorStream];\n    }\n    /** The cached resume token that is used to resume after the most recently returned change. */ get resumeToken() {\n        return this.cursor?.resumeToken;\n    }\n    /** Check if there is any document still available in the Change Stream */ async hasNext() {\n        this._setIsIterator();\n        // Change streams must resume indefinitely while each resume event succeeds.\n        // This loop continues until either a change event is received or until a resume attempt\n        // fails.\n        // eslint-disable-next-line no-constant-condition\n        while(true){\n            try {\n                const hasNext = await this.cursor.hasNext();\n                return hasNext;\n            } catch (error) {\n                try {\n                    await this._processErrorIteratorMode(error);\n                } catch (error) {\n                    try {\n                        await this.close();\n                    } catch  {\n                    // We are not concerned with errors from close()\n                    }\n                    throw error;\n                }\n            }\n        }\n    }\n    /** Get the next available document from the Change Stream. */ async next() {\n        this._setIsIterator();\n        // Change streams must resume indefinitely while each resume event succeeds.\n        // This loop continues until either a change event is received or until a resume attempt\n        // fails.\n        // eslint-disable-next-line no-constant-condition\n        while(true){\n            try {\n                const change = await this.cursor.next();\n                const processedChange = this._processChange(change ?? null);\n                return processedChange;\n            } catch (error) {\n                try {\n                    await this._processErrorIteratorMode(error);\n                } catch (error) {\n                    try {\n                        await this.close();\n                    } catch  {\n                    // We are not concerned with errors from close()\n                    }\n                    throw error;\n                }\n            }\n        }\n    }\n    /**\n     * Try to get the next available document from the Change Stream's cursor or `null` if an empty batch is returned\n     */ async tryNext() {\n        this._setIsIterator();\n        // Change streams must resume indefinitely while each resume event succeeds.\n        // This loop continues until either a change event is received or until a resume attempt\n        // fails.\n        // eslint-disable-next-line no-constant-condition\n        while(true){\n            try {\n                const change = await this.cursor.tryNext();\n                return change ?? null;\n            } catch (error) {\n                try {\n                    await this._processErrorIteratorMode(error);\n                } catch (error) {\n                    try {\n                        await this.close();\n                    } catch  {\n                    // We are not concerned with errors from close()\n                    }\n                    throw error;\n                }\n            }\n        }\n    }\n    async *[Symbol.asyncIterator]() {\n        if (this.closed) {\n            return;\n        }\n        try {\n            // Change streams run indefinitely as long as errors are resumable\n            // So the only loop breaking condition is if `next()` throws\n            while(true){\n                yield await this.next();\n            }\n        } finally{\n            try {\n                await this.close();\n            } catch  {\n            // we're not concerned with errors from close()\n            }\n        }\n    }\n    /** Is the cursor closed */ get closed() {\n        return this[kClosed] || this.cursor.closed;\n    }\n    /** Close the Change Stream */ async close() {\n        this[kClosed] = true;\n        const cursor = this.cursor;\n        try {\n            await cursor.close();\n        } finally{\n            this._endStream();\n        }\n    }\n    /**\n     * Return a modified Readable stream including a possible transform method.\n     *\n     * NOTE: When using a Stream to process change stream events, the stream will\n     * NOT automatically resume in the case a resumable error is encountered.\n     *\n     * @throws MongoChangeStreamError if the underlying cursor or the change stream is closed\n     */ stream(options) {\n        if (this.closed) {\n            throw new error_1.MongoChangeStreamError(CHANGESTREAM_CLOSED_ERROR);\n        }\n        this.streamOptions = options;\n        return this.cursor.stream(options);\n    }\n    /** @internal */ _setIsEmitter() {\n        if (this[kMode] === \"iterator\") {\n            // TODO(NODE-3485): Replace with MongoChangeStreamModeError\n            throw new error_1.MongoAPIError(\"ChangeStream cannot be used as an EventEmitter after being used as an iterator\");\n        }\n        this[kMode] = \"emitter\";\n    }\n    /** @internal */ _setIsIterator() {\n        if (this[kMode] === \"emitter\") {\n            // TODO(NODE-3485): Replace with MongoChangeStreamModeError\n            throw new error_1.MongoAPIError(\"ChangeStream cannot be used as an iterator after being used as an EventEmitter\");\n        }\n        this[kMode] = \"iterator\";\n    }\n    /**\n     * Create a new change stream cursor based on self's configuration\n     * @internal\n     */ _createChangeStreamCursor(options) {\n        const changeStreamStageOptions = (0, utils_1.filterOptions)(options, CHANGE_STREAM_OPTIONS);\n        if (this.type === CHANGE_DOMAIN_TYPES.CLUSTER) {\n            changeStreamStageOptions.allChangesForCluster = true;\n        }\n        const pipeline = [\n            {\n                $changeStream: changeStreamStageOptions\n            },\n            ...this.pipeline\n        ];\n        const client = this.type === CHANGE_DOMAIN_TYPES.CLUSTER ? this.parent : this.type === CHANGE_DOMAIN_TYPES.DATABASE ? this.parent.client : this.type === CHANGE_DOMAIN_TYPES.COLLECTION ? this.parent.client : null;\n        if (client == null) {\n            // This should never happen because of the assertion in the constructor\n            throw new error_1.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);\n        }\n        const changeStreamCursor = new change_stream_cursor_1.ChangeStreamCursor(client, this.namespace, pipeline, options);\n        for (const event of CHANGE_STREAM_EVENTS){\n            changeStreamCursor.on(event, (e)=>this.emit(event, e));\n        }\n        if (this.listenerCount(ChangeStream.CHANGE) > 0) {\n            this._streamEvents(changeStreamCursor);\n        }\n        return changeStreamCursor;\n    }\n    /** @internal */ _closeEmitterModeWithError(error) {\n        this.emit(ChangeStream.ERROR, error);\n        this.close().catch(()=>null);\n    }\n    /** @internal */ _streamEvents(cursor) {\n        this._setIsEmitter();\n        const stream = this[kCursorStream] ?? cursor.stream();\n        this[kCursorStream] = stream;\n        stream.on(\"data\", (change)=>{\n            try {\n                const processedChange = this._processChange(change);\n                this.emit(ChangeStream.CHANGE, processedChange);\n            } catch (error) {\n                this.emit(ChangeStream.ERROR, error);\n            }\n        });\n        stream.on(\"error\", (error)=>this._processErrorStreamMode(error));\n    }\n    /** @internal */ _endStream() {\n        const cursorStream = this[kCursorStream];\n        if (cursorStream) {\n            [\n                \"data\",\n                \"close\",\n                \"end\",\n                \"error\"\n            ].forEach((event)=>cursorStream.removeAllListeners(event));\n            cursorStream.destroy();\n        }\n        this[kCursorStream] = undefined;\n    }\n    /** @internal */ _processChange(change) {\n        if (this[kClosed]) {\n            // TODO(NODE-3485): Replace with MongoChangeStreamClosedError\n            throw new error_1.MongoAPIError(CHANGESTREAM_CLOSED_ERROR);\n        }\n        // a null change means the cursor has been notified, implicitly closing the change stream\n        if (change == null) {\n            // TODO(NODE-3485): Replace with MongoChangeStreamClosedError\n            throw new error_1.MongoRuntimeError(CHANGESTREAM_CLOSED_ERROR);\n        }\n        if (change && !change._id) {\n            throw new error_1.MongoChangeStreamError(NO_RESUME_TOKEN_ERROR);\n        }\n        // cache the resume token\n        this.cursor.cacheResumeToken(change._id);\n        // wipe the startAtOperationTime if there was one so that there won't be a conflict\n        // between resumeToken and startAtOperationTime if we need to reconnect the cursor\n        this.options.startAtOperationTime = undefined;\n        return change;\n    }\n    /** @internal */ _processErrorStreamMode(changeStreamError) {\n        // If the change stream has been closed explicitly, do not process error.\n        if (this[kClosed]) return;\n        if ((0, error_1.isResumableError)(changeStreamError, this.cursor.maxWireVersion)) {\n            this._endStream();\n            this.cursor.close().catch(()=>null);\n            const topology = (0, utils_1.getTopology)(this.parent);\n            topology.selectServer(this.cursor.readPreference, {\n                operationName: \"reconnect topology in change stream\"\n            }, (serverSelectionError)=>{\n                if (serverSelectionError) return this._closeEmitterModeWithError(changeStreamError);\n                this.cursor = this._createChangeStreamCursor(this.cursor.resumeOptions);\n            });\n        } else {\n            this._closeEmitterModeWithError(changeStreamError);\n        }\n    }\n    /** @internal */ async _processErrorIteratorMode(changeStreamError) {\n        if (this[kClosed]) {\n            // TODO(NODE-3485): Replace with MongoChangeStreamClosedError\n            throw new error_1.MongoAPIError(CHANGESTREAM_CLOSED_ERROR);\n        }\n        if (!(0, error_1.isResumableError)(changeStreamError, this.cursor.maxWireVersion)) {\n            try {\n                await this.close();\n            } catch  {\n            // ignore errors from close\n            }\n            throw changeStreamError;\n        }\n        await this.cursor.close().catch(()=>null);\n        const topology = (0, utils_1.getTopology)(this.parent);\n        try {\n            await topology.selectServerAsync(this.cursor.readPreference, {\n                operationName: \"reconnect topology in change stream\"\n            });\n            this.cursor = this._createChangeStreamCursor(this.cursor.resumeOptions);\n        } catch  {\n            // if the topology can't reconnect, close the stream\n            await this.close();\n            throw changeStreamError;\n        }\n    }\n}\n/** @event */ ChangeStream.RESPONSE = constants_1.RESPONSE;\n/** @event */ ChangeStream.MORE = constants_1.MORE;\n/** @event */ ChangeStream.INIT = constants_1.INIT;\n/** @event */ ChangeStream.CLOSE = constants_1.CLOSE;\n/**\n * Fired for each new matching change in the specified namespace. Attaching a `change`\n * event listener to a Change Stream will switch the stream into flowing mode. Data will\n * then be passed as soon as it is available.\n * @event\n */ ChangeStream.CHANGE = constants_1.CHANGE;\n/** @event */ ChangeStream.END = constants_1.END;\n/** @event */ ChangeStream.ERROR = constants_1.ERROR;\n/**\n * Emitted each time the change stream stores a new resume token.\n * @event\n */ ChangeStream.RESUME_TOKEN_CHANGED = constants_1.RESUME_TOKEN_CHANGED;\nexports.ChangeStream = ChangeStream; //# sourceMappingURL=change_stream.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2hhbmdlX3N0cmVhbS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0JBQW9CLEdBQUcsS0FBSztBQUM1QixNQUFNRyxlQUFlQyxtQkFBT0EsQ0FBQyxvRUFBYztBQUMzQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyxrRUFBYTtBQUN6QyxNQUFNRSx5QkFBeUJGLG1CQUFPQSxDQUFDLHNHQUErQjtBQUN0RSxNQUFNRyxPQUFPSCxtQkFBT0EsQ0FBQyxvREFBTTtBQUMzQixNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxNQUFNSyxpQkFBaUJMLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNTSxnQkFBZ0JOLG1CQUFPQSxDQUFDLHNFQUFlO0FBQzdDLE1BQU1PLFVBQVVQLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLGNBQWMsR0FDZCxNQUFNUSxnQkFBZ0JDLE9BQU87QUFDN0IsY0FBYyxHQUNkLE1BQU1DLFVBQVVELE9BQU87QUFDdkIsY0FBYyxHQUNkLE1BQU1FLFFBQVFGLE9BQU87QUFDckIsTUFBTUcsd0JBQXdCO0lBQzFCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNIO0FBQ0QsTUFBTUMsc0JBQXNCO0lBQ3hCQyxZQUFZTCxPQUFPO0lBQ25CTSxVQUFVTixPQUFPO0lBQ2pCTyxTQUFTUCxPQUFPO0FBQ3BCO0FBQ0EsTUFBTVEsdUJBQXVCO0lBQUNoQixZQUFZaUIsb0JBQW9CO0lBQUVqQixZQUFZa0IsR0FBRztJQUFFbEIsWUFBWW1CLEtBQUs7Q0FBQztBQUNuRyxNQUFNQyx3QkFBd0I7QUFDOUIsTUFBTUMsNEJBQTRCO0FBQ2xDOzs7Q0FHQyxHQUNELE1BQU14QixxQkFBcUJRLGNBQWNpQixpQkFBaUI7SUFDdEQ7Ozs7O0tBS0MsR0FDREMsWUFBWUMsTUFBTSxFQUFFQyxXQUFXLEVBQUUsRUFB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LEtBQUssR0FBRzVFLFlBQVk0RSxLQUFLO0FBQ3RDOzs7Q0FHQyxHQUNEL0UsYUFBYW9CLG9CQUFvQixHQUFHakIsWUFBWWlCLG9CQUFvQjtBQUNwRXRCLG9CQUFvQixHQUFHRSxjQUN2Qix5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NoYW5nZV9zdHJlYW0uanM/NjZlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2hhbmdlU3RyZWFtID0gdm9pZCAwO1xuY29uc3QgY29sbGVjdGlvbl8xID0gcmVxdWlyZShcIi4vY29sbGVjdGlvblwiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuY29uc3QgY2hhbmdlX3N0cmVhbV9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9jaGFuZ2Vfc3RyZWFtX2N1cnNvclwiKTtcbmNvbnN0IGRiXzEgPSByZXF1aXJlKFwiLi9kYlwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbmNvbnN0IG1vbmdvX2NsaWVudF8xID0gcmVxdWlyZShcIi4vbW9uZ29fY2xpZW50XCIpO1xuY29uc3QgbW9uZ29fdHlwZXNfMSA9IHJlcXVpcmUoXCIuL21vbmdvX3R5cGVzXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0N1cnNvclN0cmVhbSA9IFN5bWJvbCgnY3Vyc29yU3RyZWFtJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrQ2xvc2VkID0gU3ltYm9sKCdjbG9zZWQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtNb2RlID0gU3ltYm9sKCdtb2RlJyk7XG5jb25zdCBDSEFOR0VfU1RSRUFNX09QVElPTlMgPSBbXG4gICAgJ3Jlc3VtZUFmdGVyJyxcbiAgICAnc3RhcnRBZnRlcicsXG4gICAgJ3N0YXJ0QXRPcGVyYXRpb25UaW1lJyxcbiAgICAnZnVsbERvY3VtZW50JyxcbiAgICAnZnVsbERvY3VtZW50QmVmb3JlQ2hhbmdlJyxcbiAgICAnc2hvd0V4cGFuZGVkRXZlbnRzJ1xuXTtcbmNvbnN0IENIQU5HRV9ET01BSU5fVFlQRVMgPSB7XG4gICAgQ09MTEVDVElPTjogU3ltYm9sKCdDb2xsZWN0aW9uJyksXG4gICAgREFUQUJBU0U6IFN5bWJvbCgnRGF0YWJhc2UnKSxcbiAgICBDTFVTVEVSOiBTeW1ib2woJ0NsdXN0ZXInKVxufTtcbmNvbnN0IENIQU5HRV9TVFJFQU1fRVZFTlRTID0gW2NvbnN0YW50c18xLlJFU1VNRV9UT0tFTl9DSEFOR0VELCBjb25zdGFudHNfMS5FTkQsIGNvbnN0YW50c18xLkNMT1NFXTtcbmNvbnN0IE5PX1JFU1VNRV9UT0tFTl9FUlJPUiA9ICdBIGNoYW5nZSBzdHJlYW0gZG9jdW1lbnQgaGFzIGJlZW4gcmVjZWl2ZWQgdGhhdCBsYWNrcyBhIHJlc3VtZSB0b2tlbiAoX2lkKS4nO1xuY29uc3QgQ0hBTkdFU1RSRUFNX0NMT1NFRF9FUlJPUiA9ICdDaGFuZ2VTdHJlYW0gaXMgY2xvc2VkJztcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBDaGFuZ2UgU3RyZWFtIGluc3RhbmNlLiBOb3JtYWxseSBjcmVhdGVkIHVzaW5nIHtAbGluayBDb2xsZWN0aW9uI3dhdGNofENvbGxlY3Rpb24ud2F0Y2goKX0uXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIENoYW5nZVN0cmVhbSBleHRlbmRzIG1vbmdvX3R5cGVzXzEuVHlwZWRFdmVudEVtaXR0ZXIge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgb2JqZWN0IHRoYXQgY3JlYXRlZCB0aGlzIGNoYW5nZSBzdHJlYW1cbiAgICAgKiBAcGFyYW0gcGlwZWxpbmUgLSBBbiBhcnJheSBvZiB7QGxpbmsgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL2FnZ3JlZ2F0aW9uLXBpcGVsaW5lL3xhZ2dyZWdhdGlvbiBwaXBlbGluZSBzdGFnZXN9IHRocm91Z2ggd2hpY2ggdG8gcGFzcyBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50c1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgcGlwZWxpbmUgPSBbXSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucGlwZWxpbmUgPSBwaXBlbGluZTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgICAgIGRlbGV0ZSB0aGlzLm9wdGlvbnMud3JpdGVDb25jZXJuO1xuICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgY29sbGVjdGlvbl8xLkNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IENIQU5HRV9ET01BSU5fVFlQRVMuQ09MTEVDVElPTjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBkYl8xLkRiKSB7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSBDSEFOR0VfRE9NQUlOX1RZUEVTLkRBVEFCQVNFO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcmVudCBpbnN0YW5jZW9mIG1vbmdvX2NsaWVudF8xLk1vbmdvQ2xpZW50KSB7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSBDSEFOR0VfRE9NQUlOX1RZUEVTLkNMVVNURVI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0NoYW5nZVN0cmVhbUVycm9yKCdQYXJlbnQgcHJvdmlkZWQgdG8gQ2hhbmdlU3RyZWFtIGNvbnN0cnVjdG9yIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgQ29sbGVjdGlvbiwgRGIsIG9yIE1vbmdvQ2xpZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMubmFtZXNwYWNlID0gcGFyZW50LnMubmFtZXNwYWNlO1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5yZWFkUHJlZmVyZW5jZSAmJiBwYXJlbnQucmVhZFByZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5yZWFkUHJlZmVyZW5jZSA9IHBhcmVudC5yZWFkUHJlZmVyZW5jZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGUgY29udGFpbmVkIENoYW5nZSBTdHJlYW0gY3Vyc29yXG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5fY3JlYXRlQ2hhbmdlU3RyZWFtQ3Vyc29yKG9wdGlvbnMpO1xuICAgICAgICB0aGlzW2tDbG9zZWRdID0gZmFsc2U7XG4gICAgICAgIHRoaXNba01vZGVdID0gZmFsc2U7XG4gICAgICAgIC8vIExpc3RlbiBmb3IgYW55IGBjaGFuZ2VgIGxpc3RlbmVycyBiZWluZyBhZGRlZCB0byBDaGFuZ2VTdHJlYW1cbiAgICAgICAgdGhpcy5vbignbmV3TGlzdGVuZXInLCBldmVudE5hbWUgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gJ2NoYW5nZScgJiYgdGhpcy5jdXJzb3IgJiYgdGhpcy5saXN0ZW5lckNvdW50KCdjaGFuZ2UnKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0cmVhbUV2ZW50cyh0aGlzLmN1cnNvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9uKCdyZW1vdmVMaXN0ZW5lcicsIGV2ZW50TmFtZSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnROYW1lID09PSAnY2hhbmdlJyAmJiB0aGlzLmxpc3RlbmVyQ291bnQoJ2NoYW5nZScpID09PSAwICYmIHRoaXMuY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trQ3Vyc29yU3RyZWFtXT8ucmVtb3ZlQWxsTGlzdGVuZXJzKCdkYXRhJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZ2V0IGN1cnNvclN0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0N1cnNvclN0cmVhbV07XG4gICAgfVxuICAgIC8qKiBUaGUgY2FjaGVkIHJlc3VtZSB0b2tlbiB0aGF0IGlzIHVzZWQgdG8gcmVzdW1lIGFmdGVyIHRoZSBtb3N0IHJlY2VudGx5IHJldHVybmVkIGNoYW5nZS4gKi9cbiAgICBnZXQgcmVzdW1lVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnNvcj8ucmVzdW1lVG9rZW47XG4gICAgfVxuICAgIC8qKiBDaGVjayBpZiB0aGVyZSBpcyBhbnkgZG9jdW1lbnQgc3RpbGwgYXZhaWxhYmxlIGluIHRoZSBDaGFuZ2UgU3RyZWFtICovXG4gICAgYXN5bmMgaGFzTmV4dCgpIHtcbiAgICAgICAgdGhpcy5fc2V0SXNJdGVyYXRvcigpO1xuICAgICAgICAvLyBDaGFuZ2Ugc3RyZWFtcyBtdXN0IHJlc3VtZSBpbmRlZmluaXRlbHkgd2hpbGUgZWFjaCByZXN1bWUgZXZlbnQgc3VjY2VlZHMuXG4gICAgICAgIC8vIFRoaXMgbG9vcCBjb250aW51ZXMgdW50aWwgZWl0aGVyIGEgY2hhbmdlIGV2ZW50IGlzIHJlY2VpdmVkIG9yIHVudGlsIGEgcmVzdW1lIGF0dGVtcHRcbiAgICAgICAgLy8gZmFpbHMuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb25cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzTmV4dCA9IGF3YWl0IHRoaXMuY3Vyc29yLmhhc05leHQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzTmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NFcnJvckl0ZXJhdG9yTW9kZShlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBub3QgY29uY2VybmVkIHdpdGggZXJyb3JzIGZyb20gY2xvc2UoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogR2V0IHRoZSBuZXh0IGF2YWlsYWJsZSBkb2N1bWVudCBmcm9tIHRoZSBDaGFuZ2UgU3RyZWFtLiAqL1xuICAgIGFzeW5jIG5leHQoKSB7XG4gICAgICAgIHRoaXMuX3NldElzSXRlcmF0b3IoKTtcbiAgICAgICAgLy8gQ2hhbmdlIHN0cmVhbXMgbXVzdCByZXN1bWUgaW5kZWZpbml0ZWx5IHdoaWxlIGVhY2ggcmVzdW1lIGV2ZW50IHN1Y2NlZWRzLlxuICAgICAgICAvLyBUaGlzIGxvb3AgY29udGludWVzIHVudGlsIGVpdGhlciBhIGNoYW5nZSBldmVudCBpcyByZWNlaXZlZCBvciB1bnRpbCBhIHJlc3VtZSBhdHRlbXB0XG4gICAgICAgIC8vIGZhaWxzLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZSA9IGF3YWl0IHRoaXMuY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRDaGFuZ2UgPSB0aGlzLl9wcm9jZXNzQ2hhbmdlKGNoYW5nZSA/PyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvY2Vzc2VkQ2hhbmdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcHJvY2Vzc0Vycm9ySXRlcmF0b3JNb2RlKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgYXJlIG5vdCBjb25jZXJuZWQgd2l0aCBlcnJvcnMgZnJvbSBjbG9zZSgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyeSB0byBnZXQgdGhlIG5leHQgYXZhaWxhYmxlIGRvY3VtZW50IGZyb20gdGhlIENoYW5nZSBTdHJlYW0ncyBjdXJzb3Igb3IgYG51bGxgIGlmIGFuIGVtcHR5IGJhdGNoIGlzIHJldHVybmVkXG4gICAgICovXG4gICAgYXN5bmMgdHJ5TmV4dCgpIHtcbiAgICAgICAgdGhpcy5fc2V0SXNJdGVyYXRvcigpO1xuICAgICAgICAvLyBDaGFuZ2Ugc3RyZWFtcyBtdXN0IHJlc3VtZSBpbmRlZmluaXRlbHkgd2hpbGUgZWFjaCByZXN1bWUgZXZlbnQgc3VjY2VlZHMuXG4gICAgICAgIC8vIFRoaXMgbG9vcCBjb250aW51ZXMgdW50aWwgZWl0aGVyIGEgY2hhbmdlIGV2ZW50IGlzIHJlY2VpdmVkIG9yIHVudGlsIGEgcmVzdW1lIGF0dGVtcHRcbiAgICAgICAgLy8gZmFpbHMuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb25cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlID0gYXdhaXQgdGhpcy5jdXJzb3IudHJ5TmV4dCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFuZ2UgPz8gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NFcnJvckl0ZXJhdG9yTW9kZShlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBub3QgY29uY2VybmVkIHdpdGggZXJyb3JzIGZyb20gY2xvc2UoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENoYW5nZSBzdHJlYW1zIHJ1biBpbmRlZmluaXRlbHkgYXMgbG9uZyBhcyBlcnJvcnMgYXJlIHJlc3VtYWJsZVxuICAgICAgICAgICAgLy8gU28gdGhlIG9ubHkgbG9vcCBicmVha2luZyBjb25kaXRpb24gaXMgaWYgYG5leHQoKWAgdGhyb3dzXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGF3YWl0IHRoaXMubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgLy8gd2UncmUgbm90IGNvbmNlcm5lZCB3aXRoIGVycm9ycyBmcm9tIGNsb3NlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogSXMgdGhlIGN1cnNvciBjbG9zZWQgKi9cbiAgICBnZXQgY2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trQ2xvc2VkXSB8fCB0aGlzLmN1cnNvci5jbG9zZWQ7XG4gICAgfVxuICAgIC8qKiBDbG9zZSB0aGUgQ2hhbmdlIFN0cmVhbSAqL1xuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICB0aGlzW2tDbG9zZWRdID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBjdXJzb3IuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuX2VuZFN0cmVhbSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIG1vZGlmaWVkIFJlYWRhYmxlIHN0cmVhbSBpbmNsdWRpbmcgYSBwb3NzaWJsZSB0cmFuc2Zvcm0gbWV0aG9kLlxuICAgICAqXG4gICAgICogTk9URTogV2hlbiB1c2luZyBhIFN0cmVhbSB0byBwcm9jZXNzIGNoYW5nZSBzdHJlYW0gZXZlbnRzLCB0aGUgc3RyZWFtIHdpbGxcbiAgICAgKiBOT1QgYXV0b21hdGljYWxseSByZXN1bWUgaW4gdGhlIGNhc2UgYSByZXN1bWFibGUgZXJyb3IgaXMgZW5jb3VudGVyZWQuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIE1vbmdvQ2hhbmdlU3RyZWFtRXJyb3IgaWYgdGhlIHVuZGVybHlpbmcgY3Vyc29yIG9yIHRoZSBjaGFuZ2Ugc3RyZWFtIGlzIGNsb3NlZFxuICAgICAqL1xuICAgIHN0cmVhbShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29DaGFuZ2VTdHJlYW1FcnJvcihDSEFOR0VTVFJFQU1fQ0xPU0VEX0VSUk9SKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0cmVhbU9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJzb3Iuc3RyZWFtKG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX3NldElzRW1pdHRlcigpIHtcbiAgICAgICAgaWYgKHRoaXNba01vZGVdID09PSAnaXRlcmF0b3InKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NSk6IFJlcGxhY2Ugd2l0aCBNb25nb0NoYW5nZVN0cmVhbU1vZGVFcnJvclxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignQ2hhbmdlU3RyZWFtIGNhbm5vdCBiZSB1c2VkIGFzIGFuIEV2ZW50RW1pdHRlciBhZnRlciBiZWluZyB1c2VkIGFzIGFuIGl0ZXJhdG9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trTW9kZV0gPSAnZW1pdHRlcic7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfc2V0SXNJdGVyYXRvcigpIHtcbiAgICAgICAgaWYgKHRoaXNba01vZGVdID09PSAnZW1pdHRlcicpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDg1KTogUmVwbGFjZSB3aXRoIE1vbmdvQ2hhbmdlU3RyZWFtTW9kZUVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdDaGFuZ2VTdHJlYW0gY2Fubm90IGJlIHVzZWQgYXMgYW4gaXRlcmF0b3IgYWZ0ZXIgYmVpbmcgdXNlZCBhcyBhbiBFdmVudEVtaXR0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tNb2RlXSA9ICdpdGVyYXRvcic7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBjaGFuZ2Ugc3RyZWFtIGN1cnNvciBiYXNlZCBvbiBzZWxmJ3MgY29uZmlndXJhdGlvblxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9jcmVhdGVDaGFuZ2VTdHJlYW1DdXJzb3Iob3B0aW9ucykge1xuICAgICAgICBjb25zdCBjaGFuZ2VTdHJlYW1TdGFnZU9wdGlvbnMgPSAoMCwgdXRpbHNfMS5maWx0ZXJPcHRpb25zKShvcHRpb25zLCBDSEFOR0VfU1RSRUFNX09QVElPTlMpO1xuICAgICAgICBpZiAodGhpcy50eXBlID09PSBDSEFOR0VfRE9NQUlOX1RZUEVTLkNMVVNURVIpIHtcbiAgICAgICAgICAgIGNoYW5nZVN0cmVhbVN0YWdlT3B0aW9ucy5hbGxDaGFuZ2VzRm9yQ2x1c3RlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGlwZWxpbmUgPSBbeyAkY2hhbmdlU3RyZWFtOiBjaGFuZ2VTdHJlYW1TdGFnZU9wdGlvbnMgfSwgLi4udGhpcy5waXBlbGluZV07XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IHRoaXMudHlwZSA9PT0gQ0hBTkdFX0RPTUFJTl9UWVBFUy5DTFVTVEVSXG4gICAgICAgICAgICA/IHRoaXMucGFyZW50XG4gICAgICAgICAgICA6IHRoaXMudHlwZSA9PT0gQ0hBTkdFX0RPTUFJTl9UWVBFUy5EQVRBQkFTRVxuICAgICAgICAgICAgICAgID8gdGhpcy5wYXJlbnQuY2xpZW50XG4gICAgICAgICAgICAgICAgOiB0aGlzLnR5cGUgPT09IENIQU5HRV9ET01BSU5fVFlQRVMuQ09MTEVDVElPTlxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMucGFyZW50LmNsaWVudFxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGlmIChjbGllbnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuIGJlY2F1c2Ugb2YgdGhlIGFzc2VydGlvbiBpbiB0aGUgY29uc3RydWN0b3JcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBDaGFuZ2VzdHJlYW0gdHlwZSBzaG91bGQgb25seSBiZSBvbmUgb2YgY2x1c3RlciwgZGF0YWJhc2UsIGNvbGxlY3Rpb24uIEZvdW5kICR7dGhpcy50eXBlLnRvU3RyaW5nKCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hhbmdlU3RyZWFtQ3Vyc29yID0gbmV3IGNoYW5nZV9zdHJlYW1fY3Vyc29yXzEuQ2hhbmdlU3RyZWFtQ3Vyc29yKGNsaWVudCwgdGhpcy5uYW1lc3BhY2UsIHBpcGVsaW5lLCBvcHRpb25zKTtcbiAgICAgICAgZm9yIChjb25zdCBldmVudCBvZiBDSEFOR0VfU1RSRUFNX0VWRU5UUykge1xuICAgICAgICAgICAgY2hhbmdlU3RyZWFtQ3Vyc29yLm9uKGV2ZW50LCBlID0+IHRoaXMuZW1pdChldmVudCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyQ291bnQoQ2hhbmdlU3RyZWFtLkNIQU5HRSkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9zdHJlYW1FdmVudHMoY2hhbmdlU3RyZWFtQ3Vyc29yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlU3RyZWFtQ3Vyc29yO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2Nsb3NlRW1pdHRlck1vZGVXaXRoRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KENoYW5nZVN0cmVhbS5FUlJPUiwgZXJyb3IpO1xuICAgICAgICB0aGlzLmNsb3NlKCkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfc3RyZWFtRXZlbnRzKGN1cnNvcikge1xuICAgICAgICB0aGlzLl9zZXRJc0VtaXR0ZXIoKTtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpc1trQ3Vyc29yU3RyZWFtXSA/PyBjdXJzb3Iuc3RyZWFtKCk7XG4gICAgICAgIHRoaXNba0N1cnNvclN0cmVhbV0gPSBzdHJlYW07XG4gICAgICAgIHN0cmVhbS5vbignZGF0YScsIGNoYW5nZSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZENoYW5nZSA9IHRoaXMuX3Byb2Nlc3NDaGFuZ2UoY2hhbmdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoQ2hhbmdlU3RyZWFtLkNIQU5HRSwgcHJvY2Vzc2VkQ2hhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChDaGFuZ2VTdHJlYW0uRVJST1IsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHN0cmVhbS5vbignZXJyb3InLCBlcnJvciA9PiB0aGlzLl9wcm9jZXNzRXJyb3JTdHJlYW1Nb2RlKGVycm9yKSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfZW5kU3RyZWFtKCkge1xuICAgICAgICBjb25zdCBjdXJzb3JTdHJlYW0gPSB0aGlzW2tDdXJzb3JTdHJlYW1dO1xuICAgICAgICBpZiAoY3Vyc29yU3RyZWFtKSB7XG4gICAgICAgICAgICBbJ2RhdGEnLCAnY2xvc2UnLCAnZW5kJywgJ2Vycm9yJ10uZm9yRWFjaChldmVudCA9PiBjdXJzb3JTdHJlYW0ucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSk7XG4gICAgICAgICAgICBjdXJzb3JTdHJlYW0uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba0N1cnNvclN0cmVhbV0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfcHJvY2Vzc0NoYW5nZShjaGFuZ2UpIHtcbiAgICAgICAgaWYgKHRoaXNba0Nsb3NlZF0pIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDg1KTogUmVwbGFjZSB3aXRoIE1vbmdvQ2hhbmdlU3RyZWFtQ2xvc2VkRXJyb3JcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoQ0hBTkdFU1RSRUFNX0NMT1NFRF9FUlJPUik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYSBudWxsIGNoYW5nZSBtZWFucyB0aGUgY3Vyc29yIGhhcyBiZWVuIG5vdGlmaWVkLCBpbXBsaWNpdGx5IGNsb3NpbmcgdGhlIGNoYW5nZSBzdHJlYW1cbiAgICAgICAgaWYgKGNoYW5nZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NSk6IFJlcGxhY2Ugd2l0aCBNb25nb0NoYW5nZVN0cmVhbUNsb3NlZEVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihDSEFOR0VTVFJFQU1fQ0xPU0VEX0VSUk9SKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlICYmICFjaGFuZ2UuX2lkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0NoYW5nZVN0cmVhbUVycm9yKE5PX1JFU1VNRV9UT0tFTl9FUlJPUik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2FjaGUgdGhlIHJlc3VtZSB0b2tlblxuICAgICAgICB0aGlzLmN1cnNvci5jYWNoZVJlc3VtZVRva2VuKGNoYW5nZS5faWQpO1xuICAgICAgICAvLyB3aXBlIHRoZSBzdGFydEF0T3BlcmF0aW9uVGltZSBpZiB0aGVyZSB3YXMgb25lIHNvIHRoYXQgdGhlcmUgd29uJ3QgYmUgYSBjb25mbGljdFxuICAgICAgICAvLyBiZXR3ZWVuIHJlc3VtZVRva2VuIGFuZCBzdGFydEF0T3BlcmF0aW9uVGltZSBpZiB3ZSBuZWVkIHRvIHJlY29ubmVjdCB0aGUgY3Vyc29yXG4gICAgICAgIHRoaXMub3B0aW9ucy5zdGFydEF0T3BlcmF0aW9uVGltZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIGNoYW5nZTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9wcm9jZXNzRXJyb3JTdHJlYW1Nb2RlKGNoYW5nZVN0cmVhbUVycm9yKSB7XG4gICAgICAgIC8vIElmIHRoZSBjaGFuZ2Ugc3RyZWFtIGhhcyBiZWVuIGNsb3NlZCBleHBsaWNpdGx5LCBkbyBub3QgcHJvY2VzcyBlcnJvci5cbiAgICAgICAgaWYgKHRoaXNba0Nsb3NlZF0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICgoMCwgZXJyb3JfMS5pc1Jlc3VtYWJsZUVycm9yKShjaGFuZ2VTdHJlYW1FcnJvciwgdGhpcy5jdXJzb3IubWF4V2lyZVZlcnNpb24pKSB7XG4gICAgICAgICAgICB0aGlzLl9lbmRTdHJlYW0oKTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yLmNsb3NlKCkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgICAgICAgICBjb25zdCB0b3BvbG9neSA9ICgwLCB1dGlsc18xLmdldFRvcG9sb2d5KSh0aGlzLnBhcmVudCk7XG4gICAgICAgICAgICB0b3BvbG9neS5zZWxlY3RTZXJ2ZXIodGhpcy5jdXJzb3IucmVhZFByZWZlcmVuY2UsIHsgb3BlcmF0aW9uTmFtZTogJ3JlY29ubmVjdCB0b3BvbG9neSBpbiBjaGFuZ2Ugc3RyZWFtJyB9LCBzZXJ2ZXJTZWxlY3Rpb25FcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNlcnZlclNlbGVjdGlvbkVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2xvc2VFbWl0dGVyTW9kZVdpdGhFcnJvcihjaGFuZ2VTdHJlYW1FcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLl9jcmVhdGVDaGFuZ2VTdHJlYW1DdXJzb3IodGhpcy5jdXJzb3IucmVzdW1lT3B0aW9ucyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2Nsb3NlRW1pdHRlck1vZGVXaXRoRXJyb3IoY2hhbmdlU3RyZWFtRXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBhc3luYyBfcHJvY2Vzc0Vycm9ySXRlcmF0b3JNb2RlKGNoYW5nZVN0cmVhbUVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzW2tDbG9zZWRdKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NSk6IFJlcGxhY2Ugd2l0aCBNb25nb0NoYW5nZVN0cmVhbUNsb3NlZEVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKENIQU5HRVNUUkVBTV9DTE9TRURfRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKDAsIGVycm9yXzEuaXNSZXN1bWFibGVFcnJvcikoY2hhbmdlU3RyZWFtRXJyb3IsIHRoaXMuY3Vyc29yLm1heFdpcmVWZXJzaW9uKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBmcm9tIGNsb3NlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBjaGFuZ2VTdHJlYW1FcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmN1cnNvci5jbG9zZSgpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICBjb25zdCB0b3BvbG9neSA9ICgwLCB1dGlsc18xLmdldFRvcG9sb2d5KSh0aGlzLnBhcmVudCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0b3BvbG9neS5zZWxlY3RTZXJ2ZXJBc3luYyh0aGlzLmN1cnNvci5yZWFkUHJlZmVyZW5jZSwge1xuICAgICAgICAgICAgICAgIG9wZXJhdGlvbk5hbWU6ICdyZWNvbm5lY3QgdG9wb2xvZ3kgaW4gY2hhbmdlIHN0cmVhbSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLl9jcmVhdGVDaGFuZ2VTdHJlYW1DdXJzb3IodGhpcy5jdXJzb3IucmVzdW1lT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgLy8gaWYgdGhlIHRvcG9sb2d5IGNhbid0IHJlY29ubmVjdCwgY2xvc2UgdGhlIHN0cmVhbVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhyb3cgY2hhbmdlU3RyZWFtRXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKiogQGV2ZW50ICovXG5DaGFuZ2VTdHJlYW0uUkVTUE9OU0UgPSBjb25zdGFudHNfMS5SRVNQT05TRTtcbi8qKiBAZXZlbnQgKi9cbkNoYW5nZVN0cmVhbS5NT1JFID0gY29uc3RhbnRzXzEuTU9SRTtcbi8qKiBAZXZlbnQgKi9cbkNoYW5nZVN0cmVhbS5JTklUID0gY29uc3RhbnRzXzEuSU5JVDtcbi8qKiBAZXZlbnQgKi9cbkNoYW5nZVN0cmVhbS5DTE9TRSA9IGNvbnN0YW50c18xLkNMT1NFO1xuLyoqXG4gKiBGaXJlZCBmb3IgZWFjaCBuZXcgbWF0Y2hpbmcgY2hhbmdlIGluIHRoZSBzcGVjaWZpZWQgbmFtZXNwYWNlLiBBdHRhY2hpbmcgYSBgY2hhbmdlYFxuICogZXZlbnQgbGlzdGVuZXIgdG8gYSBDaGFuZ2UgU3RyZWFtIHdpbGwgc3dpdGNoIHRoZSBzdHJlYW0gaW50byBmbG93aW5nIG1vZGUuIERhdGEgd2lsbFxuICogdGhlbiBiZSBwYXNzZWQgYXMgc29vbiBhcyBpdCBpcyBhdmFpbGFibGUuXG4gKiBAZXZlbnRcbiAqL1xuQ2hhbmdlU3RyZWFtLkNIQU5HRSA9IGNvbnN0YW50c18xLkNIQU5HRTtcbi8qKiBAZXZlbnQgKi9cbkNoYW5nZVN0cmVhbS5FTkQgPSBjb25zdGFudHNfMS5FTkQ7XG4vKiogQGV2ZW50ICovXG5DaGFuZ2VTdHJlYW0uRVJST1IgPSBjb25zdGFudHNfMS5FUlJPUjtcbi8qKlxuICogRW1pdHRlZCBlYWNoIHRpbWUgdGhlIGNoYW5nZSBzdHJlYW0gc3RvcmVzIGEgbmV3IHJlc3VtZSB0b2tlbi5cbiAqIEBldmVudFxuICovXG5DaGFuZ2VTdHJlYW0uUkVTVU1FX1RPS0VOX0NIQU5HRUQgPSBjb25zdGFudHNfMS5SRVNVTUVfVE9LRU5fQ0hBTkdFRDtcbmV4cG9ydHMuQ2hhbmdlU3RyZWFtID0gQ2hhbmdlU3RyZWFtO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hhbmdlX3N0cmVhbS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDaGFuZ2VTdHJlYW0iLCJjb2xsZWN0aW9uXzEiLCJyZXF1aXJlIiwiY29uc3RhbnRzXzEiLCJjaGFuZ2Vfc3RyZWFtX2N1cnNvcl8xIiwiZGJfMSIsImVycm9yXzEiLCJtb25nb19jbGllbnRfMSIsIm1vbmdvX3R5cGVzXzEiLCJ1dGlsc18xIiwia0N1cnNvclN0cmVhbSIsIlN5bWJvbCIsImtDbG9zZWQiLCJrTW9kZSIsIkNIQU5HRV9TVFJFQU1fT1BUSU9OUyIsIkNIQU5HRV9ET01BSU5fVFlQRVMiLCJDT0xMRUNUSU9OIiwiREFUQUJBU0UiLCJDTFVTVEVSIiwiQ0hBTkdFX1NUUkVBTV9FVkVOVFMiLCJSRVNVTUVfVE9LRU5fQ0hBTkdFRCIsIkVORCIsIkNMT1NFIiwiTk9fUkVTVU1FX1RPS0VOX0VSUk9SIiwiQ0hBTkdFU1RSRUFNX0NMT1NFRF9FUlJPUiIsIlR5cGVkRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJwYXJlbnQiLCJwaXBlbGluZSIsIm9wdGlvbnMiLCJ3cml0ZUNvbmNlcm4iLCJDb2xsZWN0aW9uIiwidHlwZSIsIkRiIiwiTW9uZ29DbGllbnQiLCJNb25nb0NoYW5nZVN0cmVhbUVycm9yIiwibmFtZXNwYWNlIiwicyIsInJlYWRQcmVmZXJlbmNlIiwiY3Vyc29yIiwiX2NyZWF0ZUNoYW5nZVN0cmVhbUN1cnNvciIsIm9uIiwiZXZlbnROYW1lIiwibGlzdGVuZXJDb3VudCIsIl9zdHJlYW1FdmVudHMiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJjdXJzb3JTdHJlYW0iLCJyZXN1bWVUb2tlbiIsImhhc05leHQiLCJfc2V0SXNJdGVyYXRvciIsImVycm9yIiwiX3Byb2Nlc3NFcnJvckl0ZXJhdG9yTW9kZSIsImNsb3NlIiwibmV4dCIsImNoYW5nZSIsInByb2Nlc3NlZENoYW5nZSIsIl9wcm9jZXNzQ2hhbmdlIiwidHJ5TmV4dCIsImFzeW5jSXRlcmF0b3IiLCJjbG9zZWQiLCJfZW5kU3RyZWFtIiwic3RyZWFtIiwic3RyZWFtT3B0aW9ucyIsIl9zZXRJc0VtaXR0ZXIiLCJNb25nb0FQSUVycm9yIiwiY2hhbmdlU3RyZWFtU3RhZ2VPcHRpb25zIiwiZmlsdGVyT3B0aW9ucyIsImFsbENoYW5nZXNGb3JDbHVzdGVyIiwiJGNoYW5nZVN0cmVhbSIsImNsaWVudCIsIk1vbmdvUnVudGltZUVycm9yIiwidG9TdHJpbmciLCJjaGFuZ2VTdHJlYW1DdXJzb3IiLCJDaGFuZ2VTdHJlYW1DdXJzb3IiLCJldmVudCIsImUiLCJlbWl0IiwiQ0hBTkdFIiwiX2Nsb3NlRW1pdHRlck1vZGVXaXRoRXJyb3IiLCJFUlJPUiIsImNhdGNoIiwiX3Byb2Nlc3NFcnJvclN0cmVhbU1vZGUiLCJmb3JFYWNoIiwiZGVzdHJveSIsInVuZGVmaW5lZCIsIl9pZCIsImNhY2hlUmVzdW1lVG9rZW4iLCJzdGFydEF0T3BlcmF0aW9uVGltZSIsImNoYW5nZVN0cmVhbUVycm9yIiwiaXNSZXN1bWFibGVFcnJvciIsIm1heFdpcmVWZXJzaW9uIiwidG9wb2xvZ3kiLCJnZXRUb3BvbG9neSIsInNlbGVjdFNlcnZlciIsIm9wZXJhdGlvbk5hbWUiLCJzZXJ2ZXJTZWxlY3Rpb25FcnJvciIsInJlc3VtZU9wdGlvbnMiLCJzZWxlY3RTZXJ2ZXJBc3luYyIsIlJFU1BPTlNFIiwiTU9SRSIsIklOSVQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/change_stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/auto_encrypter.js":
/*!***************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/auto_encrypter.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar _a;\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AutoEncrypter = exports.AutoEncryptionLoggerLevel = void 0;\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst deps_1 = __webpack_require__(/*! ../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_client_1 = __webpack_require__(/*! ../mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst cryptoCallbacks = __webpack_require__(/*! ./crypto_callbacks */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/crypto_callbacks.js\");\nconst errors_1 = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/errors.js\");\nconst mongocryptd_manager_1 = __webpack_require__(/*! ./mongocryptd_manager */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/mongocryptd_manager.js\");\nconst providers_1 = __webpack_require__(/*! ./providers */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/index.js\");\nconst state_machine_1 = __webpack_require__(/*! ./state_machine */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/state_machine.js\");\n/** @public */ exports.AutoEncryptionLoggerLevel = Object.freeze({\n    FatalError: 0,\n    Error: 1,\n    Warning: 2,\n    Info: 3,\n    Trace: 4\n});\n// Typescript errors if we index objects with `Symbol.for(...)`, so\n// to avoid TS errors we pull them out into variables.  Then we can type\n// the objects (and class) that we expect to see them on and prevent TS\n// errors.\n/** @internal */ const kDecorateResult = Symbol.for(\"@@mdb.decorateDecryptionResult\");\n/** @internal */ const kDecoratedKeys = Symbol.for(\"@@mdb.decryptedKeys\");\n/**\n * @internal An internal class to be used by the driver for auto encryption\n * **NOTE**: Not meant to be instantiated directly, this is for internal use only.\n */ class AutoEncrypter {\n    /** @internal */ static getMongoCrypt() {\n        const encryption = (0, deps_1.getMongoDBClientEncryption)();\n        if (\"kModuleError\" in encryption) {\n            throw encryption.kModuleError;\n        }\n        return encryption.MongoCrypt;\n    }\n    /**\n     * Create an AutoEncrypter\n     *\n     * **Note**: Do not instantiate this class directly. Rather, supply the relevant options to a MongoClient\n     *\n     * **Note**: Supplying `options.schemaMap` provides more security than relying on JSON Schemas obtained from the server.\n     * It protects against a malicious server advertising a false JSON Schema, which could trick the client into sending unencrypted data that should be encrypted.\n     * Schemas supplied in the schemaMap only apply to configuring automatic encryption for Client-Side Field Level Encryption.\n     * Other validation rules in the JSON schema will not be enforced by the driver and will result in an error.\n     *\n     * @example <caption>Create an AutoEncrypter that makes use of mongocryptd</caption>\n     * ```ts\n     * // Enabling autoEncryption via a MongoClient using mongocryptd\n     * const { MongoClient } = require('mongodb');\n     * const client = new MongoClient(URL, {\n     *   autoEncryption: {\n     *     kmsProviders: {\n     *       aws: {\n     *         accessKeyId: AWS_ACCESS_KEY,\n     *         secretAccessKey: AWS_SECRET_KEY\n     *       }\n     *     }\n     *   }\n     * });\n     * ```\n     *\n     * await client.connect();\n     * // From here on, the client will be encrypting / decrypting automatically\n     * @example <caption>Create an AutoEncrypter that makes use of libmongocrypt's CSFLE shared library</caption>\n     * ```ts\n     * // Enabling autoEncryption via a MongoClient using CSFLE shared library\n     * const { MongoClient } = require('mongodb');\n     * const client = new MongoClient(URL, {\n     *   autoEncryption: {\n     *     kmsProviders: {\n     *       aws: {}\n     *     },\n     *     extraOptions: {\n     *       cryptSharedLibPath: '/path/to/local/crypt/shared/lib',\n     *       cryptSharedLibRequired: true\n     *     }\n     *   }\n     * });\n     * ```\n     *\n     * await client.connect();\n     * // From here on, the client will be encrypting / decrypting automatically\n     */ constructor(client, options){\n        /**\n         * Used by devtools to enable decorating decryption results.\n         *\n         * When set and enabled, `decrypt` will automatically recursively\n         * traverse a decrypted document and if a field has been decrypted,\n         * it will mark it as decrypted.  Compass uses this to determine which\n         * fields were decrypted.\n         */ this[_a] = false;\n        this._client = client;\n        this._bypassEncryption = options.bypassAutoEncryption === true;\n        this._keyVaultNamespace = options.keyVaultNamespace || \"admin.datakeys\";\n        this._keyVaultClient = options.keyVaultClient || client;\n        this._metaDataClient = options.metadataClient || client;\n        this._proxyOptions = options.proxyOptions || {};\n        this._tlsOptions = options.tlsOptions || {};\n        this._kmsProviders = options.kmsProviders || {};\n        const mongoCryptOptions = {\n            cryptoCallbacks\n        };\n        if (options.schemaMap) {\n            mongoCryptOptions.schemaMap = Buffer.isBuffer(options.schemaMap) ? options.schemaMap : (0, bson_1.serialize)(options.schemaMap);\n        }\n        if (options.encryptedFieldsMap) {\n            mongoCryptOptions.encryptedFieldsMap = Buffer.isBuffer(options.encryptedFieldsMap) ? options.encryptedFieldsMap : (0, bson_1.serialize)(options.encryptedFieldsMap);\n        }\n        mongoCryptOptions.kmsProviders = !Buffer.isBuffer(this._kmsProviders) ? (0, bson_1.serialize)(this._kmsProviders) : this._kmsProviders;\n        if (options.options?.logger) {\n            mongoCryptOptions.logger = options.options.logger;\n        }\n        if (options.extraOptions && options.extraOptions.cryptSharedLibPath) {\n            mongoCryptOptions.cryptSharedLibPath = options.extraOptions.cryptSharedLibPath;\n        }\n        if (options.bypassQueryAnalysis) {\n            mongoCryptOptions.bypassQueryAnalysis = options.bypassQueryAnalysis;\n        }\n        this._bypassMongocryptdAndCryptShared = this._bypassEncryption || !!options.bypassQueryAnalysis;\n        if (options.extraOptions && options.extraOptions.cryptSharedLibSearchPaths) {\n            // Only for driver testing\n            mongoCryptOptions.cryptSharedLibSearchPaths = options.extraOptions.cryptSharedLibSearchPaths;\n        } else if (!this._bypassMongocryptdAndCryptShared) {\n            mongoCryptOptions.cryptSharedLibSearchPaths = [\n                \"$SYSTEM\"\n            ];\n        }\n        const MongoCrypt = AutoEncrypter.getMongoCrypt();\n        this._mongocrypt = new MongoCrypt(mongoCryptOptions);\n        this._contextCounter = 0;\n        if (options.extraOptions && options.extraOptions.cryptSharedLibRequired && !this.cryptSharedLibVersionInfo) {\n            throw new errors_1.MongoCryptInvalidArgumentError(\"`cryptSharedLibRequired` set but no crypt_shared library loaded\");\n        }\n        // Only instantiate mongocryptd manager/client once we know for sure\n        // that we are not using the CSFLE shared library.\n        if (!this._bypassMongocryptdAndCryptShared && !this.cryptSharedLibVersionInfo) {\n            this._mongocryptdManager = new mongocryptd_manager_1.MongocryptdManager(options.extraOptions);\n            const clientOptions = {\n                serverSelectionTimeoutMS: 10000\n            };\n            if (options.extraOptions == null || typeof options.extraOptions.mongocryptdURI !== \"string\") {\n                clientOptions.family = 4;\n            }\n            this._mongocryptdClient = new mongo_client_1.MongoClient(this._mongocryptdManager.uri, clientOptions);\n        }\n    }\n    /**\n     * Initializes the auto encrypter by spawning a mongocryptd and connecting to it.\n     *\n     * This function is a no-op when bypassSpawn is set or the crypt shared library is used.\n     */ async init() {\n        if (this._bypassMongocryptdAndCryptShared || this.cryptSharedLibVersionInfo) {\n            return;\n        }\n        if (!this._mongocryptdManager) {\n            throw new error_1.MongoRuntimeError(\"Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.\");\n        }\n        if (!this._mongocryptdClient) {\n            throw new error_1.MongoRuntimeError(\"Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.\");\n        }\n        if (!this._mongocryptdManager.bypassSpawn) {\n            await this._mongocryptdManager.spawn();\n        }\n        try {\n            const client = await this._mongocryptdClient.connect();\n            return client;\n        } catch (error) {\n            const { message } = error;\n            if (message && (message.match(/timed out after/) || message.match(/ENOTFOUND/))) {\n                throw new error_1.MongoRuntimeError(\"Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn\", {\n                    cause: error\n                });\n            }\n            throw error;\n        }\n    }\n    /**\n     * Cleans up the `_mongocryptdClient`, if present.\n     */ async teardown(force) {\n        await this._mongocryptdClient?.close(force);\n    }\n    /**\n     * Encrypt a command for a given namespace.\n     */ async encrypt(ns, cmd, options = {}) {\n        if (this._bypassEncryption) {\n            // If `bypassAutoEncryption` has been specified, don't encrypt\n            return cmd;\n        }\n        const commandBuffer = Buffer.isBuffer(cmd) ? cmd : (0, bson_1.serialize)(cmd, options);\n        const context = this._mongocrypt.makeEncryptionContext(utils_1.MongoDBCollectionNamespace.fromString(ns).db, commandBuffer);\n        context.id = this._contextCounter++;\n        context.ns = ns;\n        context.document = cmd;\n        const stateMachine = new state_machine_1.StateMachine({\n            promoteValues: false,\n            promoteLongs: false,\n            proxyOptions: this._proxyOptions,\n            tlsOptions: this._tlsOptions\n        });\n        return stateMachine.execute(this, context);\n    }\n    /**\n     * Decrypt a command response\n     */ async decrypt(response, options = {}) {\n        const buffer = Buffer.isBuffer(response) ? response : (0, bson_1.serialize)(response, options);\n        const context = this._mongocrypt.makeDecryptionContext(buffer);\n        context.id = this._contextCounter++;\n        const stateMachine = new state_machine_1.StateMachine({\n            ...options,\n            proxyOptions: this._proxyOptions,\n            tlsOptions: this._tlsOptions\n        });\n        const decorateResult = this[kDecorateResult];\n        const result = await stateMachine.execute(this, context);\n        if (decorateResult) {\n            decorateDecryptionResult(result, response);\n        }\n        return result;\n    }\n    /**\n     * Ask the user for KMS credentials.\n     *\n     * This returns anything that looks like the kmsProviders original input\n     * option. It can be empty, and any provider specified here will override\n     * the original ones.\n     */ async askForKMSCredentials() {\n        return (0, providers_1.refreshKMSCredentials)(this._kmsProviders);\n    }\n    /**\n     * Return the current libmongocrypt's CSFLE shared library version\n     * as `{ version: bigint, versionStr: string }`, or `null` if no CSFLE\n     * shared library was loaded.\n     */ get cryptSharedLibVersionInfo() {\n        return this._mongocrypt.cryptSharedLibVersionInfo;\n    }\n    static get libmongocryptVersion() {\n        return AutoEncrypter.getMongoCrypt().libmongocryptVersion;\n    }\n}\nexports.AutoEncrypter = AutoEncrypter;\n_a = kDecorateResult;\n/**\n * Recurse through the (identically-shaped) `decrypted` and `original`\n * objects and attach a `decryptedKeys` property on each sub-object that\n * contained encrypted fields. Because we only call this on BSON responses,\n * we do not need to worry about circular references.\n *\n * @internal\n */ function decorateDecryptionResult(decrypted, original, isTopLevelDecorateCall = true) {\n    if (isTopLevelDecorateCall) {\n        // The original value could have been either a JS object or a BSON buffer\n        if (Buffer.isBuffer(original)) {\n            original = (0, bson_1.deserialize)(original);\n        }\n        if (Buffer.isBuffer(decrypted)) {\n            throw new error_1.MongoRuntimeError(\"Expected result of decryption to be deserialized BSON object\");\n        }\n    }\n    if (!decrypted || typeof decrypted !== \"object\") return;\n    for (const k of Object.keys(decrypted)){\n        const originalValue = original[k];\n        // An object was decrypted by libmongocrypt if and only if it was\n        // a BSON Binary object with subtype 6.\n        if (originalValue && originalValue._bsontype === \"Binary\" && originalValue.sub_type === 6) {\n            if (!decrypted[kDecoratedKeys]) {\n                Object.defineProperty(decrypted, kDecoratedKeys, {\n                    value: [],\n                    configurable: true,\n                    enumerable: false,\n                    writable: false\n                });\n            }\n            // this is defined in the preceding if-statement\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            decrypted[kDecoratedKeys].push(k);\n            continue;\n        }\n        decorateDecryptionResult(decrypted[k], originalValue, false);\n    }\n} //# sourceMappingURL=auto_encrypter.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9hdXRvX2VuY3J5cHRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBO0FBQ0pDLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBR0EsaUNBQWlDLEdBQUcsS0FBSztBQUNqRSxNQUFNSSxTQUFTQyxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxpQkFBaUJILG1CQUFPQSxDQUFDLHlFQUFpQjtBQUNoRCxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNSyxrQkFBa0JMLG1CQUFPQSxDQUFDLHVHQUFvQjtBQUNwRCxNQUFNTSxXQUFXTixtQkFBT0EsQ0FBQyxtRkFBVTtBQUNuQyxNQUFNTyx3QkFBd0JQLG1CQUFPQSxDQUFDLDZHQUF1QjtBQUM3RCxNQUFNUSxjQUFjUixtQkFBT0EsQ0FBQywrRkFBYTtBQUN6QyxNQUFNUyxrQkFBa0JULG1CQUFPQSxDQUFDLGlHQUFpQjtBQUNqRCxZQUFZLEdBQ1pMLGlDQUFpQyxHQUFHRixPQUFPaUIsTUFBTSxDQUFDO0lBQzlDQyxZQUFZO0lBQ1pDLE9BQU87SUFDUEMsU0FBUztJQUNUQyxNQUFNO0lBQ05DLE9BQU87QUFDWDtBQUNBLG1FQUFtRTtBQUNuRSx3RUFBd0U7QUFDeEUsdUVBQXVFO0FBQ3ZFLFVBQVU7QUFDVixjQUFjLEdBQ2QsTUFBTUMsa0JBQWtCQyxPQUFPQyxHQUFHLENBQUM7QUFDbkMsY0FBYyxHQUNkLE1BQU1DLGlCQUFpQkYsT0FBT0MsR0FBRyxDQUFDO0FBQ2xDOzs7Q0FHQyxHQUNELE1BQU1yQjtJQUNGLGNBQWMsR0FDZCxPQUFPdUIsZ0JBQWdCO1FBQ25CLE1BQU1DLGFBQWEsQ0FBQyxHQUFH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STtJQUNoRixJQUFJQSx3QkFBd0I7UUFDeEIseUVBQXlFO1FBQ3pFLElBQUloRSxPQUFPQyxRQUFRLENBQUM4RCxXQUFXO1lBQzNCQSxXQUFXLENBQUMsR0FBRzdHLE9BQU8rRyxXQUFXLEVBQUVGO1FBQ3ZDO1FBQ0EsSUFBSS9ELE9BQU9DLFFBQVEsQ0FBQzZELFlBQVk7WUFDNUIsTUFBTSxJQUFJekcsUUFBUW9FLGlCQUFpQixDQUFDO1FBQ3hDO0lBQ0o7SUFDQSxJQUFJLENBQUNxQyxhQUFhLE9BQU9BLGNBQWMsVUFDbkM7SUFDSixLQUFLLE1BQU1JLEtBQUt0SCxPQUFPdUgsSUFBSSxDQUFDTCxXQUFZO1FBQ3BDLE1BQU1NLGdCQUFnQkwsUUFBUSxDQUFDRyxFQUFFO1FBQ2pDLGlFQUFpRTtRQUNqRSx1Q0FBdUM7UUFDdkMsSUFBSUUsaUJBQWlCQSxjQUFjQyxTQUFTLEtBQUssWUFBWUQsY0FBY0UsUUFBUSxLQUFLLEdBQUc7WUFDdkYsSUFBSSxDQUFDUixTQUFTLENBQUN4RixlQUFlLEVBQUU7Z0JBQzVCMUIsT0FBT0MsY0FBYyxDQUFDaUgsV0FBV3hGLGdCQUFnQjtvQkFDN0N2QixPQUFPLEVBQUU7b0JBQ1R3SCxjQUFjO29CQUNkQyxZQUFZO29CQUNaQyxVQUFVO2dCQUNkO1lBQ0o7WUFDQSxnREFBZ0Q7WUFDaEQsb0VBQW9FO1lBQ3BFWCxTQUFTLENBQUN4RixlQUFlLENBQUNvRyxJQUFJLENBQUNSO1lBRy9CO1FBQ0o7UUFDQVIseUJBQXlCSSxTQUFTLENBQUNJLEVBQUUsRUFBRUUsZUFBZTtJQUMxRDtBQUNKLEVBQ0EsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbGllbnQtc2lkZS1lbmNyeXB0aW9uL2F1dG9fZW5jcnlwdGVyLmpzPzU0ZTAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX2E7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkF1dG9FbmNyeXB0ZXIgPSBleHBvcnRzLkF1dG9FbmNyeXB0aW9uTG9nZ2VyTGV2ZWwgPSB2b2lkIDA7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGRlcHNfMSA9IHJlcXVpcmUoXCIuLi9kZXBzXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IG1vbmdvX2NsaWVudF8xID0gcmVxdWlyZShcIi4uL21vbmdvX2NsaWVudFwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjcnlwdG9DYWxsYmFja3MgPSByZXF1aXJlKFwiLi9jcnlwdG9fY2FsbGJhY2tzXCIpO1xuY29uc3QgZXJyb3JzXzEgPSByZXF1aXJlKFwiLi9lcnJvcnNcIik7XG5jb25zdCBtb25nb2NyeXB0ZF9tYW5hZ2VyXzEgPSByZXF1aXJlKFwiLi9tb25nb2NyeXB0ZF9tYW5hZ2VyXCIpO1xuY29uc3QgcHJvdmlkZXJzXzEgPSByZXF1aXJlKFwiLi9wcm92aWRlcnNcIik7XG5jb25zdCBzdGF0ZV9tYWNoaW5lXzEgPSByZXF1aXJlKFwiLi9zdGF0ZV9tYWNoaW5lXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuQXV0b0VuY3J5cHRpb25Mb2dnZXJMZXZlbCA9IE9iamVjdC5mcmVlemUoe1xuICAgIEZhdGFsRXJyb3I6IDAsXG4gICAgRXJyb3I6IDEsXG4gICAgV2FybmluZzogMixcbiAgICBJbmZvOiAzLFxuICAgIFRyYWNlOiA0XG59KTtcbi8vIFR5cGVzY3JpcHQgZXJyb3JzIGlmIHdlIGluZGV4IG9iamVjdHMgd2l0aCBgU3ltYm9sLmZvciguLi4pYCwgc29cbi8vIHRvIGF2b2lkIFRTIGVycm9ycyB3ZSBwdWxsIHRoZW0gb3V0IGludG8gdmFyaWFibGVzLiAgVGhlbiB3ZSBjYW4gdHlwZVxuLy8gdGhlIG9iamVjdHMgKGFuZCBjbGFzcykgdGhhdCB3ZSBleHBlY3QgdG8gc2VlIHRoZW0gb24gYW5kIHByZXZlbnQgVFNcbi8vIGVycm9ycy5cbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtEZWNvcmF0ZVJlc3VsdCA9IFN5bWJvbC5mb3IoJ0BAbWRiLmRlY29yYXRlRGVjcnlwdGlvblJlc3VsdCcpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0RlY29yYXRlZEtleXMgPSBTeW1ib2wuZm9yKCdAQG1kYi5kZWNyeXB0ZWRLZXlzJyk7XG4vKipcbiAqIEBpbnRlcm5hbCBBbiBpbnRlcm5hbCBjbGFzcyB0byBiZSB1c2VkIGJ5IHRoZSBkcml2ZXIgZm9yIGF1dG8gZW5jcnlwdGlvblxuICogKipOT1RFKio6IE5vdCBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHksIHRoaXMgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICovXG5jbGFzcyBBdXRvRW5jcnlwdGVyIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgc3RhdGljIGdldE1vbmdvQ3J5cHQoKSB7XG4gICAgICAgIGNvbnN0IGVuY3J5cHRpb24gPSAoMCwgZGVwc18xLmdldE1vbmdvREJDbGllbnRFbmNyeXB0aW9uKSgpO1xuICAgICAgICBpZiAoJ2tNb2R1bGVFcnJvcicgaW4gZW5jcnlwdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgZW5jcnlwdGlvbi5rTW9kdWxlRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuY3J5cHRpb24uTW9uZ29DcnlwdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIEF1dG9FbmNyeXB0ZXJcbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiBEbyBub3QgaW5zdGFudGlhdGUgdGhpcyBjbGFzcyBkaXJlY3RseS4gUmF0aGVyLCBzdXBwbHkgdGhlIHJlbGV2YW50IG9wdGlvbnMgdG8gYSBNb25nb0NsaWVudFxuICAgICAqXG4gICAgICogKipOb3RlKio6IFN1cHBseWluZyBgb3B0aW9ucy5zY2hlbWFNYXBgIHByb3ZpZGVzIG1vcmUgc2VjdXJpdHkgdGhhbiByZWx5aW5nIG9uIEpTT04gU2NoZW1hcyBvYnRhaW5lZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogSXQgcHJvdGVjdHMgYWdhaW5zdCBhIG1hbGljaW91cyBzZXJ2ZXIgYWR2ZXJ0aXNpbmcgYSBmYWxzZSBKU09OIFNjaGVtYSwgd2hpY2ggY291bGQgdHJpY2sgdGhlIGNsaWVudCBpbnRvIHNlbmRpbmcgdW5lbmNyeXB0ZWQgZGF0YSB0aGF0IHNob3VsZCBiZSBlbmNyeXB0ZWQuXG4gICAgICogU2NoZW1hcyBzdXBwbGllZCBpbiB0aGUgc2NoZW1hTWFwIG9ubHkgYXBwbHkgdG8gY29uZmlndXJpbmcgYXV0b21hdGljIGVuY3J5cHRpb24gZm9yIENsaWVudC1TaWRlIEZpZWxkIExldmVsIEVuY3J5cHRpb24uXG4gICAgICogT3RoZXIgdmFsaWRhdGlvbiBydWxlcyBpbiB0aGUgSlNPTiBzY2hlbWEgd2lsbCBub3QgYmUgZW5mb3JjZWQgYnkgdGhlIGRyaXZlciBhbmQgd2lsbCByZXN1bHQgaW4gYW4gZXJyb3IuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5DcmVhdGUgYW4gQXV0b0VuY3J5cHRlciB0aGF0IG1ha2VzIHVzZSBvZiBtb25nb2NyeXB0ZDwvY2FwdGlvbj5cbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIEVuYWJsaW5nIGF1dG9FbmNyeXB0aW9uIHZpYSBhIE1vbmdvQ2xpZW50IHVzaW5nIG1vbmdvY3J5cHRkXG4gICAgICogY29uc3QgeyBNb25nb0NsaWVudCB9ID0gcmVxdWlyZSgnbW9uZ29kYicpO1xuICAgICAqIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChVUkwsIHtcbiAgICAgKiAgIGF1dG9FbmNyeXB0aW9uOiB7XG4gICAgICogICAgIGttc1Byb3ZpZGVyczoge1xuICAgICAqICAgICAgIGF3czoge1xuICAgICAqICAgICAgICAgYWNjZXNzS2V5SWQ6IEFXU19BQ0NFU1NfS0VZLFxuICAgICAqICAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiBBV1NfU0VDUkVUX0tFWVxuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogYXdhaXQgY2xpZW50LmNvbm5lY3QoKTtcbiAgICAgKiAvLyBGcm9tIGhlcmUgb24sIHRoZSBjbGllbnQgd2lsbCBiZSBlbmNyeXB0aW5nIC8gZGVjcnlwdGluZyBhdXRvbWF0aWNhbGx5XG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+Q3JlYXRlIGFuIEF1dG9FbmNyeXB0ZXIgdGhhdCBtYWtlcyB1c2Ugb2YgbGlibW9uZ29jcnlwdCdzIENTRkxFIHNoYXJlZCBsaWJyYXJ5PC9jYXB0aW9uPlxuICAgICAqIGBgYHRzXG4gICAgICogLy8gRW5hYmxpbmcgYXV0b0VuY3J5cHRpb24gdmlhIGEgTW9uZ29DbGllbnQgdXNpbmcgQ1NGTEUgc2hhcmVkIGxpYnJhcnlcbiAgICAgKiBjb25zdCB7IE1vbmdvQ2xpZW50IH0gPSByZXF1aXJlKCdtb25nb2RiJyk7XG4gICAgICogY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KFVSTCwge1xuICAgICAqICAgYXV0b0VuY3J5cHRpb246IHtcbiAgICAgKiAgICAga21zUHJvdmlkZXJzOiB7XG4gICAgICogICAgICAgYXdzOiB7fVxuICAgICAqICAgICB9LFxuICAgICAqICAgICBleHRyYU9wdGlvbnM6IHtcbiAgICAgKiAgICAgICBjcnlwdFNoYXJlZExpYlBhdGg6ICcvcGF0aC90by9sb2NhbC9jcnlwdC9zaGFyZWQvbGliJyxcbiAgICAgKiAgICAgICBjcnlwdFNoYXJlZExpYlJlcXVpcmVkOiB0cnVlXG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIGF3YWl0IGNsaWVudC5jb25uZWN0KCk7XG4gICAgICogLy8gRnJvbSBoZXJlIG9uLCB0aGUgY2xpZW50IHdpbGwgYmUgZW5jcnlwdGluZyAvIGRlY3J5cHRpbmcgYXV0b21hdGljYWxseVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNsaWVudCwgb3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCBieSBkZXZ0b29scyB0byBlbmFibGUgZGVjb3JhdGluZyBkZWNyeXB0aW9uIHJlc3VsdHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gc2V0IGFuZCBlbmFibGVkLCBgZGVjcnlwdGAgd2lsbCBhdXRvbWF0aWNhbGx5IHJlY3Vyc2l2ZWx5XG4gICAgICAgICAqIHRyYXZlcnNlIGEgZGVjcnlwdGVkIGRvY3VtZW50IGFuZCBpZiBhIGZpZWxkIGhhcyBiZWVuIGRlY3J5cHRlZCxcbiAgICAgICAgICogaXQgd2lsbCBtYXJrIGl0IGFzIGRlY3J5cHRlZC4gIENvbXBhc3MgdXNlcyB0aGlzIHRvIGRldGVybWluZSB3aGljaFxuICAgICAgICAgKiBmaWVsZHMgd2VyZSBkZWNyeXB0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzW19hXSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jbGllbnQgPSBjbGllbnQ7XG4gICAgICAgIHRoaXMuX2J5cGFzc0VuY3J5cHRpb24gPSBvcHRpb25zLmJ5cGFzc0F1dG9FbmNyeXB0aW9uID09PSB0cnVlO1xuICAgICAgICB0aGlzLl9rZXlWYXVsdE5hbWVzcGFjZSA9IG9wdGlvbnMua2V5VmF1bHROYW1lc3BhY2UgfHwgJ2FkbWluLmRhdGFrZXlzJztcbiAgICAgICAgdGhpcy5fa2V5VmF1bHRDbGllbnQgPSBvcHRpb25zLmtleVZhdWx0Q2xpZW50IHx8IGNsaWVudDtcbiAgICAgICAgdGhpcy5fbWV0YURhdGFDbGllbnQgPSBvcHRpb25zLm1ldGFkYXRhQ2xpZW50IHx8IGNsaWVudDtcbiAgICAgICAgdGhpcy5fcHJveHlPcHRpb25zID0gb3B0aW9ucy5wcm94eU9wdGlvbnMgfHwge307XG4gICAgICAgIHRoaXMuX3Rsc09wdGlvbnMgPSBvcHRpb25zLnRsc09wdGlvbnMgfHwge307XG4gICAgICAgIHRoaXMuX2ttc1Byb3ZpZGVycyA9IG9wdGlvbnMua21zUHJvdmlkZXJzIHx8IHt9O1xuICAgICAgICBjb25zdCBtb25nb0NyeXB0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNyeXB0b0NhbGxiYWNrc1xuICAgICAgICB9O1xuICAgICAgICBpZiAob3B0aW9ucy5zY2hlbWFNYXApIHtcbiAgICAgICAgICAgIG1vbmdvQ3J5cHRPcHRpb25zLnNjaGVtYU1hcCA9IEJ1ZmZlci5pc0J1ZmZlcihvcHRpb25zLnNjaGVtYU1hcClcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuc2NoZW1hTWFwXG4gICAgICAgICAgICAgICAgOiAoMCwgYnNvbl8xLnNlcmlhbGl6ZSkob3B0aW9ucy5zY2hlbWFNYXApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmVuY3J5cHRlZEZpZWxkc01hcCkge1xuICAgICAgICAgICAgbW9uZ29DcnlwdE9wdGlvbnMuZW5jcnlwdGVkRmllbGRzTWFwID0gQnVmZmVyLmlzQnVmZmVyKG9wdGlvbnMuZW5jcnlwdGVkRmllbGRzTWFwKVxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5lbmNyeXB0ZWRGaWVsZHNNYXBcbiAgICAgICAgICAgICAgICA6ICgwLCBic29uXzEuc2VyaWFsaXplKShvcHRpb25zLmVuY3J5cHRlZEZpZWxkc01hcCk7XG4gICAgICAgIH1cbiAgICAgICAgbW9uZ29DcnlwdE9wdGlvbnMua21zUHJvdmlkZXJzID0gIUJ1ZmZlci5pc0J1ZmZlcih0aGlzLl9rbXNQcm92aWRlcnMpXG4gICAgICAgICAgICA/ICgwLCBic29uXzEuc2VyaWFsaXplKSh0aGlzLl9rbXNQcm92aWRlcnMpXG4gICAgICAgICAgICA6IHRoaXMuX2ttc1Byb3ZpZGVycztcbiAgICAgICAgaWYgKG9wdGlvbnMub3B0aW9ucz8ubG9nZ2VyKSB7XG4gICAgICAgICAgICBtb25nb0NyeXB0T3B0aW9ucy5sb2dnZXIgPSBvcHRpb25zLm9wdGlvbnMubG9nZ2VyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmV4dHJhT3B0aW9ucyAmJiBvcHRpb25zLmV4dHJhT3B0aW9ucy5jcnlwdFNoYXJlZExpYlBhdGgpIHtcbiAgICAgICAgICAgIG1vbmdvQ3J5cHRPcHRpb25zLmNyeXB0U2hhcmVkTGliUGF0aCA9IG9wdGlvbnMuZXh0cmFPcHRpb25zLmNyeXB0U2hhcmVkTGliUGF0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5ieXBhc3NRdWVyeUFuYWx5c2lzKSB7XG4gICAgICAgICAgICBtb25nb0NyeXB0T3B0aW9ucy5ieXBhc3NRdWVyeUFuYWx5c2lzID0gb3B0aW9ucy5ieXBhc3NRdWVyeUFuYWx5c2lzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2J5cGFzc01vbmdvY3J5cHRkQW5kQ3J5cHRTaGFyZWQgPSB0aGlzLl9ieXBhc3NFbmNyeXB0aW9uIHx8ICEhb3B0aW9ucy5ieXBhc3NRdWVyeUFuYWx5c2lzO1xuICAgICAgICBpZiAob3B0aW9ucy5leHRyYU9wdGlvbnMgJiYgb3B0aW9ucy5leHRyYU9wdGlvbnMuY3J5cHRTaGFyZWRMaWJTZWFyY2hQYXRocykge1xuICAgICAgICAgICAgLy8gT25seSBmb3IgZHJpdmVyIHRlc3RpbmdcbiAgICAgICAgICAgIG1vbmdvQ3J5cHRPcHRpb25zLmNyeXB0U2hhcmVkTGliU2VhcmNoUGF0aHMgPSBvcHRpb25zLmV4dHJhT3B0aW9ucy5jcnlwdFNoYXJlZExpYlNlYXJjaFBhdGhzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLl9ieXBhc3NNb25nb2NyeXB0ZEFuZENyeXB0U2hhcmVkKSB7XG4gICAgICAgICAgICBtb25nb0NyeXB0T3B0aW9ucy5jcnlwdFNoYXJlZExpYlNlYXJjaFBhdGhzID0gWyckU1lTVEVNJ107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgTW9uZ29DcnlwdCA9IEF1dG9FbmNyeXB0ZXIuZ2V0TW9uZ29DcnlwdCgpO1xuICAgICAgICB0aGlzLl9tb25nb2NyeXB0ID0gbmV3IE1vbmdvQ3J5cHQobW9uZ29DcnlwdE9wdGlvbnMpO1xuICAgICAgICB0aGlzLl9jb250ZXh0Q291bnRlciA9IDA7XG4gICAgICAgIGlmIChvcHRpb25zLmV4dHJhT3B0aW9ucyAmJlxuICAgICAgICAgICAgb3B0aW9ucy5leHRyYU9wdGlvbnMuY3J5cHRTaGFyZWRMaWJSZXF1aXJlZCAmJlxuICAgICAgICAgICAgIXRoaXMuY3J5cHRTaGFyZWRMaWJWZXJzaW9uSW5mbykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yc18xLk1vbmdvQ3J5cHRJbnZhbGlkQXJndW1lbnRFcnJvcignYGNyeXB0U2hhcmVkTGliUmVxdWlyZWRgIHNldCBidXQgbm8gY3J5cHRfc2hhcmVkIGxpYnJhcnkgbG9hZGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT25seSBpbnN0YW50aWF0ZSBtb25nb2NyeXB0ZCBtYW5hZ2VyL2NsaWVudCBvbmNlIHdlIGtub3cgZm9yIHN1cmVcbiAgICAgICAgLy8gdGhhdCB3ZSBhcmUgbm90IHVzaW5nIHRoZSBDU0ZMRSBzaGFyZWQgbGlicmFyeS5cbiAgICAgICAgaWYgKCF0aGlzLl9ieXBhc3NNb25nb2NyeXB0ZEFuZENyeXB0U2hhcmVkICYmICF0aGlzLmNyeXB0U2hhcmVkTGliVmVyc2lvbkluZm8pIHtcbiAgICAgICAgICAgIHRoaXMuX21vbmdvY3J5cHRkTWFuYWdlciA9IG5ldyBtb25nb2NyeXB0ZF9tYW5hZ2VyXzEuTW9uZ29jcnlwdGRNYW5hZ2VyKG9wdGlvbnMuZXh0cmFPcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgc2VydmVyU2VsZWN0aW9uVGltZW91dE1TOiAxMDAwMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmV4dHJhT3B0aW9ucyA9PSBudWxsIHx8IHR5cGVvZiBvcHRpb25zLmV4dHJhT3B0aW9ucy5tb25nb2NyeXB0ZFVSSSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjbGllbnRPcHRpb25zLmZhbWlseSA9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9tb25nb2NyeXB0ZENsaWVudCA9IG5ldyBtb25nb19jbGllbnRfMS5Nb25nb0NsaWVudCh0aGlzLl9tb25nb2NyeXB0ZE1hbmFnZXIudXJpLCBjbGllbnRPcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgYXV0byBlbmNyeXB0ZXIgYnkgc3Bhd25pbmcgYSBtb25nb2NyeXB0ZCBhbmQgY29ubmVjdGluZyB0byBpdC5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgYSBuby1vcCB3aGVuIGJ5cGFzc1NwYXduIGlzIHNldCBvciB0aGUgY3J5cHQgc2hhcmVkIGxpYnJhcnkgaXMgdXNlZC5cbiAgICAgKi9cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICBpZiAodGhpcy5fYnlwYXNzTW9uZ29jcnlwdGRBbmRDcnlwdFNoYXJlZCB8fCB0aGlzLmNyeXB0U2hhcmVkTGliVmVyc2lvbkluZm8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX21vbmdvY3J5cHRkTWFuYWdlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ1JlYWNoZWQgaW1wb3NzaWJsZSBzdGF0ZTogbW9uZ29jcnlwdGRNYW5hZ2VyIGlzIHVuZGVmaW5lZCB3aGVuIG5laXRoZXIgYnlwYXNzU3Bhd24gbm9yIHRoZSBzaGFyZWQgbGliIGFyZSBzcGVjaWZpZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9tb25nb2NyeXB0ZENsaWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ1JlYWNoZWQgaW1wb3NzaWJsZSBzdGF0ZTogbW9uZ29jcnlwdGRDbGllbnQgaXMgdW5kZWZpbmVkIHdoZW4gbmVpdGhlciBieXBhc3NTcGF3biBub3IgdGhlIHNoYXJlZCBsaWIgYXJlIHNwZWNpZmllZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX21vbmdvY3J5cHRkTWFuYWdlci5ieXBhc3NTcGF3bikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fbW9uZ29jcnlwdGRNYW5hZ2VyLnNwYXduKCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuX21vbmdvY3J5cHRkQ2xpZW50LmNvbm5lY3QoKTtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IGVycm9yO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UgJiYgKG1lc3NhZ2UubWF0Y2goL3RpbWVkIG91dCBhZnRlci8pIHx8IG1lc3NhZ2UubWF0Y2goL0VOT1RGT1VORC8pKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdVbmFibGUgdG8gY29ubmVjdCB0byBgbW9uZ29jcnlwdGRgLCBwbGVhc2UgbWFrZSBzdXJlIGl0IGlzIHJ1bm5pbmcgb3IgaW4geW91ciBQQVRIIGZvciBhdXRvLXNwYXduJywgeyBjYXVzZTogZXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbnMgdXAgdGhlIGBfbW9uZ29jcnlwdGRDbGllbnRgLCBpZiBwcmVzZW50LlxuICAgICAqL1xuICAgIGFzeW5jIHRlYXJkb3duKGZvcmNlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX21vbmdvY3J5cHRkQ2xpZW50Py5jbG9zZShmb3JjZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY3J5cHQgYSBjb21tYW5kIGZvciBhIGdpdmVuIG5hbWVzcGFjZS5cbiAgICAgKi9cbiAgICBhc3luYyBlbmNyeXB0KG5zLCBjbWQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fYnlwYXNzRW5jcnlwdGlvbikge1xuICAgICAgICAgICAgLy8gSWYgYGJ5cGFzc0F1dG9FbmNyeXB0aW9uYCBoYXMgYmVlbiBzcGVjaWZpZWQsIGRvbid0IGVuY3J5cHRcbiAgICAgICAgICAgIHJldHVybiBjbWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tbWFuZEJ1ZmZlciA9IEJ1ZmZlci5pc0J1ZmZlcihjbWQpID8gY21kIDogKDAsIGJzb25fMS5zZXJpYWxpemUpKGNtZCwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLl9tb25nb2NyeXB0Lm1ha2VFbmNyeXB0aW9uQ29udGV4dCh1dGlsc18xLk1vbmdvREJDb2xsZWN0aW9uTmFtZXNwYWNlLmZyb21TdHJpbmcobnMpLmRiLCBjb21tYW5kQnVmZmVyKTtcbiAgICAgICAgY29udGV4dC5pZCA9IHRoaXMuX2NvbnRleHRDb3VudGVyKys7XG4gICAgICAgIGNvbnRleHQubnMgPSBucztcbiAgICAgICAgY29udGV4dC5kb2N1bWVudCA9IGNtZDtcbiAgICAgICAgY29uc3Qgc3RhdGVNYWNoaW5lID0gbmV3IHN0YXRlX21hY2hpbmVfMS5TdGF0ZU1hY2hpbmUoe1xuICAgICAgICAgICAgcHJvbW90ZVZhbHVlczogZmFsc2UsXG4gICAgICAgICAgICBwcm9tb3RlTG9uZ3M6IGZhbHNlLFxuICAgICAgICAgICAgcHJveHlPcHRpb25zOiB0aGlzLl9wcm94eU9wdGlvbnMsXG4gICAgICAgICAgICB0bHNPcHRpb25zOiB0aGlzLl90bHNPcHRpb25zXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3RhdGVNYWNoaW5lLmV4ZWN1dGUodGhpcywgY29udGV4dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY3J5cHQgYSBjb21tYW5kIHJlc3BvbnNlXG4gICAgICovXG4gICAgYXN5bmMgZGVjcnlwdChyZXNwb25zZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5pc0J1ZmZlcihyZXNwb25zZSkgPyByZXNwb25zZSA6ICgwLCBic29uXzEuc2VyaWFsaXplKShyZXNwb25zZSwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLl9tb25nb2NyeXB0Lm1ha2VEZWNyeXB0aW9uQ29udGV4dChidWZmZXIpO1xuICAgICAgICBjb250ZXh0LmlkID0gdGhpcy5fY29udGV4dENvdW50ZXIrKztcbiAgICAgICAgY29uc3Qgc3RhdGVNYWNoaW5lID0gbmV3IHN0YXRlX21hY2hpbmVfMS5TdGF0ZU1hY2hpbmUoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHByb3h5T3B0aW9uczogdGhpcy5fcHJveHlPcHRpb25zLFxuICAgICAgICAgICAgdGxzT3B0aW9uczogdGhpcy5fdGxzT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGVjb3JhdGVSZXN1bHQgPSB0aGlzW2tEZWNvcmF0ZVJlc3VsdF07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0YXRlTWFjaGluZS5leGVjdXRlKHRoaXMsIGNvbnRleHQpO1xuICAgICAgICBpZiAoZGVjb3JhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGRlY29yYXRlRGVjcnlwdGlvblJlc3VsdChyZXN1bHQsIHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBc2sgdGhlIHVzZXIgZm9yIEtNUyBjcmVkZW50aWFscy5cbiAgICAgKlxuICAgICAqIFRoaXMgcmV0dXJucyBhbnl0aGluZyB0aGF0IGxvb2tzIGxpa2UgdGhlIGttc1Byb3ZpZGVycyBvcmlnaW5hbCBpbnB1dFxuICAgICAqIG9wdGlvbi4gSXQgY2FuIGJlIGVtcHR5LCBhbmQgYW55IHByb3ZpZGVyIHNwZWNpZmllZCBoZXJlIHdpbGwgb3ZlcnJpZGVcbiAgICAgKiB0aGUgb3JpZ2luYWwgb25lcy5cbiAgICAgKi9cbiAgICBhc3luYyBhc2tGb3JLTVNDcmVkZW50aWFscygpIHtcbiAgICAgICAgcmV0dXJuICgwLCBwcm92aWRlcnNfMS5yZWZyZXNoS01TQ3JlZGVudGlhbHMpKHRoaXMuX2ttc1Byb3ZpZGVycyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY3VycmVudCBsaWJtb25nb2NyeXB0J3MgQ1NGTEUgc2hhcmVkIGxpYnJhcnkgdmVyc2lvblxuICAgICAqIGFzIGB7IHZlcnNpb246IGJpZ2ludCwgdmVyc2lvblN0cjogc3RyaW5nIH1gLCBvciBgbnVsbGAgaWYgbm8gQ1NGTEVcbiAgICAgKiBzaGFyZWQgbGlicmFyeSB3YXMgbG9hZGVkLlxuICAgICAqL1xuICAgIGdldCBjcnlwdFNoYXJlZExpYlZlcnNpb25JbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbW9uZ29jcnlwdC5jcnlwdFNoYXJlZExpYlZlcnNpb25JbmZvO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGxpYm1vbmdvY3J5cHRWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gQXV0b0VuY3J5cHRlci5nZXRNb25nb0NyeXB0KCkubGlibW9uZ29jcnlwdFZlcnNpb247XG4gICAgfVxufVxuZXhwb3J0cy5BdXRvRW5jcnlwdGVyID0gQXV0b0VuY3J5cHRlcjtcbl9hID0ga0RlY29yYXRlUmVzdWx0O1xuLyoqXG4gKiBSZWN1cnNlIHRocm91Z2ggdGhlIChpZGVudGljYWxseS1zaGFwZWQpIGBkZWNyeXB0ZWRgIGFuZCBgb3JpZ2luYWxgXG4gKiBvYmplY3RzIGFuZCBhdHRhY2ggYSBgZGVjcnlwdGVkS2V5c2AgcHJvcGVydHkgb24gZWFjaCBzdWItb2JqZWN0IHRoYXRcbiAqIGNvbnRhaW5lZCBlbmNyeXB0ZWQgZmllbGRzLiBCZWNhdXNlIHdlIG9ubHkgY2FsbCB0aGlzIG9uIEJTT04gcmVzcG9uc2VzLFxuICogd2UgZG8gbm90IG5lZWQgdG8gd29ycnkgYWJvdXQgY2lyY3VsYXIgcmVmZXJlbmNlcy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZGVjb3JhdGVEZWNyeXB0aW9uUmVzdWx0KGRlY3J5cHRlZCwgb3JpZ2luYWwsIGlzVG9wTGV2ZWxEZWNvcmF0ZUNhbGwgPSB0cnVlKSB7XG4gICAgaWYgKGlzVG9wTGV2ZWxEZWNvcmF0ZUNhbGwpIHtcbiAgICAgICAgLy8gVGhlIG9yaWdpbmFsIHZhbHVlIGNvdWxkIGhhdmUgYmVlbiBlaXRoZXIgYSBKUyBvYmplY3Qgb3IgYSBCU09OIGJ1ZmZlclxuICAgICAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9yaWdpbmFsKSkge1xuICAgICAgICAgICAgb3JpZ2luYWwgPSAoMCwgYnNvbl8xLmRlc2VyaWFsaXplKShvcmlnaW5hbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihkZWNyeXB0ZWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignRXhwZWN0ZWQgcmVzdWx0IG9mIGRlY3J5cHRpb24gdG8gYmUgZGVzZXJpYWxpemVkIEJTT04gb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFkZWNyeXB0ZWQgfHwgdHlwZW9mIGRlY3J5cHRlZCAhPT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybjtcbiAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXMoZGVjcnlwdGVkKSkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFZhbHVlID0gb3JpZ2luYWxba107XG4gICAgICAgIC8vIEFuIG9iamVjdCB3YXMgZGVjcnlwdGVkIGJ5IGxpYm1vbmdvY3J5cHQgaWYgYW5kIG9ubHkgaWYgaXQgd2FzXG4gICAgICAgIC8vIGEgQlNPTiBCaW5hcnkgb2JqZWN0IHdpdGggc3VidHlwZSA2LlxuICAgICAgICBpZiAob3JpZ2luYWxWYWx1ZSAmJiBvcmlnaW5hbFZhbHVlLl9ic29udHlwZSA9PT0gJ0JpbmFyeScgJiYgb3JpZ2luYWxWYWx1ZS5zdWJfdHlwZSA9PT0gNikge1xuICAgICAgICAgICAgaWYgKCFkZWNyeXB0ZWRba0RlY29yYXRlZEtleXNdKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRlY3J5cHRlZCwga0RlY29yYXRlZEtleXMsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtdLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoaXMgaXMgZGVmaW5lZCBpbiB0aGUgcHJlY2VkaW5nIGlmLXN0YXRlbWVudFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGRlY3J5cHRlZFtrRGVjb3JhdGVkS2V5c10ucHVzaChrKTtcbiAgICAgICAgICAgIC8vIERvIG5vdCByZWN1cnNlIGludG8gdGhpcyBkZWNyeXB0ZWQgdmFsdWUuIEl0IGNvdWxkIGJlIGEgc3ViLWRvY3VtZW50L2FycmF5LFxuICAgICAgICAgICAgLy8gaW4gd2hpY2ggY2FzZSB0aGVyZSBpcyBubyBvcmlnaW5hbCB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggaXRzIHN1YmZpZWxkcy5cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGRlY29yYXRlRGVjcnlwdGlvblJlc3VsdChkZWNyeXB0ZWRba10sIG9yaWdpbmFsVmFsdWUsIGZhbHNlKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdXRvX2VuY3J5cHRlci5qcy5tYXAiXSwibmFtZXMiOlsiX2EiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkF1dG9FbmNyeXB0ZXIiLCJBdXRvRW5jcnlwdGlvbkxvZ2dlckxldmVsIiwiYnNvbl8xIiwicmVxdWlyZSIsImRlcHNfMSIsImVycm9yXzEiLCJtb25nb19jbGllbnRfMSIsInV0aWxzXzEiLCJjcnlwdG9DYWxsYmFja3MiLCJlcnJvcnNfMSIsIm1vbmdvY3J5cHRkX21hbmFnZXJfMSIsInByb3ZpZGVyc18xIiwic3RhdGVfbWFjaGluZV8xIiwiZnJlZXplIiwiRmF0YWxFcnJvciIsIkVycm9yIiwiV2FybmluZyIsIkluZm8iLCJUcmFjZSIsImtEZWNvcmF0ZVJlc3VsdCIsIlN5bWJvbCIsImZvciIsImtEZWNvcmF0ZWRLZXlzIiwiZ2V0TW9uZ29DcnlwdCIsImVuY3J5cHRpb24iLCJnZXRNb25nb0RCQ2xpZW50RW5jcnlwdGlvbiIsImtNb2R1bGVFcnJvciIsIk1vbmdvQ3J5cHQiLCJjb25zdHJ1Y3RvciIsImNsaWVudCIsIm9wdGlvbnMiLCJfY2xpZW50IiwiX2J5cGFzc0VuY3J5cHRpb24iLCJieXBhc3NBdXRvRW5jcnlwdGlvbiIsIl9rZXlWYXVsdE5hbWVzcGFjZSIsImtleVZhdWx0TmFtZXNwYWNlIiwiX2tleVZhdWx0Q2xpZW50Iiwia2V5VmF1bHRDbGllbnQiLCJfbWV0YURhdGFDbGllbnQiLCJtZXRhZGF0YUNsaWVudCIsIl9wcm94eU9wdGlvbnMiLCJwcm94eU9wdGlvbnMiLCJfdGxzT3B0aW9ucyIsInRsc09wdGlvbnMiLCJfa21zUHJvdmlkZXJzIiwia21zUHJvdmlkZXJzIiwibW9uZ29DcnlwdE9wdGlvbnMiLCJzY2hlbWFNYXAiLCJCdWZmZXIiLCJpc0J1ZmZlciIsInNlcmlhbGl6ZSIsImVuY3J5cHRlZEZpZWxkc01hcCIsImxvZ2dlciIsImV4dHJhT3B0aW9ucyIsImNyeXB0U2hhcmVkTGliUGF0aCIsImJ5cGFzc1F1ZXJ5QW5hbHlzaXMiLCJfYnlwYXNzTW9uZ29jcnlwdGRBbmRDcnlwdFNoYXJlZCIsImNyeXB0U2hhcmVkTGliU2VhcmNoUGF0aHMiLCJfbW9uZ29jcnlwdCIsIl9jb250ZXh0Q291bnRlciIsImNyeXB0U2hhcmVkTGliUmVxdWlyZWQiLCJjcnlwdFNoYXJlZExpYlZlcnNpb25JbmZvIiwiTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yIiwiX21vbmdvY3J5cHRkTWFuYWdlciIsIk1vbmdvY3J5cHRkTWFuYWdlciIsImNsaWVudE9wdGlvbnMiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJtb25nb2NyeXB0ZFVSSSIsImZhbWlseSIsIl9tb25nb2NyeXB0ZENsaWVudCIsIk1vbmdvQ2xpZW50IiwidXJpIiwiaW5pdCIsIk1vbmdvUnVudGltZUVycm9yIiwiYnlwYXNzU3Bhd24iLCJzcGF3biIsImNvbm5lY3QiLCJlcnJvciIsIm1lc3NhZ2UiLCJtYXRjaCIsImNhdXNlIiwidGVhcmRvd24iLCJmb3JjZSIsImNsb3NlIiwiZW5jcnlwdCIsIm5zIiwiY21kIiwiY29tbWFuZEJ1ZmZlciIsImNvbnRleHQiLCJtYWtlRW5jcnlwdGlvbkNvbnRleHQiLCJNb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZSIsImZyb21TdHJpbmciLCJkYiIsImlkIiwiZG9jdW1lbnQiLCJzdGF0ZU1hY2hpbmUiLCJTdGF0ZU1hY2hpbmUiLCJwcm9tb3RlVmFsdWVzIiwicHJvbW90ZUxvbmdzIiwiZXhlY3V0ZSIsImRlY3J5cHQiLCJyZXNwb25zZSIsImJ1ZmZlciIsIm1ha2VEZWNyeXB0aW9uQ29udGV4dCIsImRlY29yYXRlUmVzdWx0IiwicmVzdWx0IiwiZGVjb3JhdGVEZWNyeXB0aW9uUmVzdWx0IiwiYXNrRm9yS01TQ3JlZGVudGlhbHMiLCJyZWZyZXNoS01TQ3JlZGVudGlhbHMiLCJsaWJtb25nb2NyeXB0VmVyc2lvbiIsImRlY3J5cHRlZCIsIm9yaWdpbmFsIiwiaXNUb3BMZXZlbERlY29yYXRlQ2FsbCIsImRlc2VyaWFsaXplIiwiayIsImtleXMiLCJvcmlnaW5hbFZhbHVlIiwiX2Jzb250eXBlIiwic3ViX3R5cGUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/auto_encrypter.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/client_encryption.js":
/*!******************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/client_encryption.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ClientEncryption = void 0;\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst deps_1 = __webpack_require__(/*! ../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst cryptoCallbacks = __webpack_require__(/*! ./crypto_callbacks */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/crypto_callbacks.js\");\nconst errors_1 = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/errors.js\");\nconst index_1 = __webpack_require__(/*! ./providers/index */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/index.js\");\nconst state_machine_1 = __webpack_require__(/*! ./state_machine */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/state_machine.js\");\n/**\n * @public\n * The public interface for explicit in-use encryption\n */ class ClientEncryption {\n    /** @internal */ static getMongoCrypt() {\n        const encryption = (0, deps_1.getMongoDBClientEncryption)();\n        if (\"kModuleError\" in encryption) {\n            throw encryption.kModuleError;\n        }\n        return encryption.MongoCrypt;\n    }\n    /**\n     * Create a new encryption instance\n     *\n     * @example\n     * ```ts\n     * new ClientEncryption(mongoClient, {\n     *   keyVaultNamespace: 'client.encryption',\n     *   kmsProviders: {\n     *     local: {\n     *       key: masterKey // The master key used for encryption/decryption. A 96-byte long Buffer\n     *     }\n     *   }\n     * });\n     * ```\n     *\n     * @example\n     * ```ts\n     * new ClientEncryption(mongoClient, {\n     *   keyVaultNamespace: 'client.encryption',\n     *   kmsProviders: {\n     *     aws: {\n     *       accessKeyId: AWS_ACCESS_KEY,\n     *       secretAccessKey: AWS_SECRET_KEY\n     *     }\n     *   }\n     * });\n     * ```\n     */ constructor(client, options){\n        this._client = client;\n        this._proxyOptions = options.proxyOptions ?? {};\n        this._tlsOptions = options.tlsOptions ?? {};\n        this._kmsProviders = options.kmsProviders || {};\n        if (options.keyVaultNamespace == null) {\n            throw new errors_1.MongoCryptInvalidArgumentError(\"Missing required option `keyVaultNamespace`\");\n        }\n        const mongoCryptOptions = {\n            ...options,\n            cryptoCallbacks,\n            kmsProviders: !Buffer.isBuffer(this._kmsProviders) ? (0, bson_1.serialize)(this._kmsProviders) : this._kmsProviders\n        };\n        this._keyVaultNamespace = options.keyVaultNamespace;\n        this._keyVaultClient = options.keyVaultClient || client;\n        const MongoCrypt = ClientEncryption.getMongoCrypt();\n        this._mongoCrypt = new MongoCrypt(mongoCryptOptions);\n    }\n    /**\n     * Creates a data key used for explicit encryption and inserts it into the key vault namespace\n     *\n     * @example\n     * ```ts\n     * // Using async/await to create a local key\n     * const dataKeyId = await clientEncryption.createDataKey('local');\n     * ```\n     *\n     * @example\n     * ```ts\n     * // Using async/await to create an aws key\n     * const dataKeyId = await clientEncryption.createDataKey('aws', {\n     *   masterKey: {\n     *     region: 'us-east-1',\n     *     key: 'xxxxxxxxxxxxxx' // CMK ARN here\n     *   }\n     * });\n     * ```\n     *\n     * @example\n     * ```ts\n     * // Using async/await to create an aws key with a keyAltName\n     * const dataKeyId = await clientEncryption.createDataKey('aws', {\n     *   masterKey: {\n     *     region: 'us-east-1',\n     *     key: 'xxxxxxxxxxxxxx' // CMK ARN here\n     *   },\n     *   keyAltNames: [ 'mySpecialKey' ]\n     * });\n     * ```\n     */ async createDataKey(provider, options = {}) {\n        if (options.keyAltNames && !Array.isArray(options.keyAltNames)) {\n            throw new errors_1.MongoCryptInvalidArgumentError(`Option \"keyAltNames\" must be an array of strings, but was of type ${typeof options.keyAltNames}.`);\n        }\n        let keyAltNames = undefined;\n        if (options.keyAltNames && options.keyAltNames.length > 0) {\n            keyAltNames = options.keyAltNames.map((keyAltName, i)=>{\n                if (typeof keyAltName !== \"string\") {\n                    throw new errors_1.MongoCryptInvalidArgumentError(`Option \"keyAltNames\" must be an array of strings, but item at index ${i} was of type ${typeof keyAltName}`);\n                }\n                return (0, bson_1.serialize)({\n                    keyAltName\n                });\n            });\n        }\n        let keyMaterial = undefined;\n        if (options.keyMaterial) {\n            keyMaterial = (0, bson_1.serialize)({\n                keyMaterial: options.keyMaterial\n            });\n        }\n        const dataKeyBson = (0, bson_1.serialize)({\n            provider,\n            ...options.masterKey\n        });\n        const context = this._mongoCrypt.makeDataKeyContext(dataKeyBson, {\n            keyAltNames,\n            keyMaterial\n        });\n        const stateMachine = new state_machine_1.StateMachine({\n            proxyOptions: this._proxyOptions,\n            tlsOptions: this._tlsOptions\n        });\n        const dataKey = await stateMachine.execute(this, context);\n        const { db: dbName, collection: collectionName } = utils_1.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);\n        const { insertedId } = await this._keyVaultClient.db(dbName).collection(collectionName).insertOne(dataKey, {\n            writeConcern: {\n                w: \"majority\"\n            }\n        });\n        return insertedId;\n    }\n    /**\n     * Searches the keyvault for any data keys matching the provided filter.  If there are matches, rewrapManyDataKey then attempts to re-wrap the data keys using the provided options.\n     *\n     * If no matches are found, then no bulk write is performed.\n     *\n     * @example\n     * ```ts\n     * // rewrapping all data data keys (using a filter that matches all documents)\n     * const filter = {};\n     *\n     * const result = await clientEncryption.rewrapManyDataKey(filter);\n     * if (result.bulkWriteResult != null) {\n     *  // keys were re-wrapped, results will be available in the bulkWrite object.\n     * }\n     * ```\n     *\n     * @example\n     * ```ts\n     * // attempting to rewrap all data keys with no matches\n     * const filter = { _id: new Binary() } // assume _id matches no documents in the database\n     * const result = await clientEncryption.rewrapManyDataKey(filter);\n     *\n     * if (result.bulkWriteResult == null) {\n     *  // no keys matched, `bulkWriteResult` does not exist on the result object\n     * }\n     * ```\n     */ async rewrapManyDataKey(filter, options) {\n        let keyEncryptionKeyBson = undefined;\n        if (options) {\n            const keyEncryptionKey = Object.assign({\n                provider: options.provider\n            }, options.masterKey);\n            keyEncryptionKeyBson = (0, bson_1.serialize)(keyEncryptionKey);\n        }\n        const filterBson = (0, bson_1.serialize)(filter);\n        const context = this._mongoCrypt.makeRewrapManyDataKeyContext(filterBson, keyEncryptionKeyBson);\n        const stateMachine = new state_machine_1.StateMachine({\n            proxyOptions: this._proxyOptions,\n            tlsOptions: this._tlsOptions\n        });\n        const { v: dataKeys } = await stateMachine.execute(this, context);\n        if (dataKeys.length === 0) {\n            return {};\n        }\n        const { db: dbName, collection: collectionName } = utils_1.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);\n        const replacements = dataKeys.map((key)=>({\n                updateOne: {\n                    filter: {\n                        _id: key._id\n                    },\n                    update: {\n                        $set: {\n                            masterKey: key.masterKey,\n                            keyMaterial: key.keyMaterial\n                        },\n                        $currentDate: {\n                            updateDate: true\n                        }\n                    }\n                }\n            }));\n        const result = await this._keyVaultClient.db(dbName).collection(collectionName).bulkWrite(replacements, {\n            writeConcern: {\n                w: \"majority\"\n            }\n        });\n        return {\n            bulkWriteResult: result\n        };\n    }\n    /**\n     * Deletes the key with the provided id from the keyvault, if it exists.\n     *\n     * @example\n     * ```ts\n     * // delete a key by _id\n     * const id = new Binary(); // id is a bson binary subtype 4 object\n     * const { deletedCount } = await clientEncryption.deleteKey(id);\n     *\n     * if (deletedCount != null && deletedCount > 0) {\n     *   // successful deletion\n     * }\n     * ```\n     *\n     */ async deleteKey(_id) {\n        const { db: dbName, collection: collectionName } = utils_1.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);\n        return this._keyVaultClient.db(dbName).collection(collectionName).deleteOne({\n            _id\n        }, {\n            writeConcern: {\n                w: \"majority\"\n            }\n        });\n    }\n    /**\n     * Finds all the keys currently stored in the keyvault.\n     *\n     * This method will not throw.\n     *\n     * @returns a FindCursor over all keys in the keyvault.\n     * @example\n     * ```ts\n     * // fetching all keys\n     * const keys = await clientEncryption.getKeys().toArray();\n     * ```\n     */ getKeys() {\n        const { db: dbName, collection: collectionName } = utils_1.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);\n        return this._keyVaultClient.db(dbName).collection(collectionName).find({}, {\n            readConcern: {\n                level: \"majority\"\n            }\n        });\n    }\n    /**\n     * Finds a key in the keyvault with the specified _id.\n     *\n     * Returns a promise that either resolves to a {@link DataKey} if a document matches the key or null if no documents\n     * match the id.  The promise rejects with an error if an error is thrown.\n     * @example\n     * ```ts\n     * // getting a key by id\n     * const id = new Binary(); // id is a bson binary subtype 4 object\n     * const key = await clientEncryption.getKey(id);\n     * if (!key) {\n     *  // key is null if there was no matching key\n     * }\n     * ```\n     */ async getKey(_id) {\n        const { db: dbName, collection: collectionName } = utils_1.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);\n        return this._keyVaultClient.db(dbName).collection(collectionName).findOne({\n            _id\n        }, {\n            readConcern: {\n                level: \"majority\"\n            }\n        });\n    }\n    /**\n     * Finds a key in the keyvault which has the specified keyAltName.\n     *\n     * @param keyAltName - a keyAltName to search for a key\n     * @returns Returns a promise that either resolves to a {@link DataKey} if a document matches the key or null if no documents\n     * match the keyAltName.  The promise rejects with an error if an error is thrown.\n     * @example\n     * ```ts\n     * // get a key by alt name\n     * const keyAltName = 'keyAltName';\n     * const key = await clientEncryption.getKeyByAltName(keyAltName);\n     * if (!key) {\n     *  // key is null if there is no matching key\n     * }\n     * ```\n     */ async getKeyByAltName(keyAltName) {\n        const { db: dbName, collection: collectionName } = utils_1.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);\n        return this._keyVaultClient.db(dbName).collection(collectionName).findOne({\n            keyAltNames: keyAltName\n        }, {\n            readConcern: {\n                level: \"majority\"\n            }\n        });\n    }\n    /**\n     * Adds a keyAltName to a key identified by the provided _id.\n     *\n     * This method resolves to/returns the *old* key value (prior to adding the new altKeyName).\n     *\n     * @param _id - The id of the document to update.\n     * @param keyAltName - a keyAltName to search for a key\n     * @returns Returns a promise that either resolves to a {@link DataKey} if a document matches the key or null if no documents\n     * match the id.  The promise rejects with an error if an error is thrown.\n     * @example\n     * ```ts\n     * // adding an keyAltName to a data key\n     * const id = new Binary();  // id is a bson binary subtype 4 object\n     * const keyAltName = 'keyAltName';\n     * const oldKey = await clientEncryption.addKeyAltName(id, keyAltName);\n     * if (!oldKey) {\n     *  // null is returned if there is no matching document with an id matching the supplied id\n     * }\n     * ```\n     */ async addKeyAltName(_id, keyAltName) {\n        const { db: dbName, collection: collectionName } = utils_1.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);\n        const value = await this._keyVaultClient.db(dbName).collection(collectionName).findOneAndUpdate({\n            _id\n        }, {\n            $addToSet: {\n                keyAltNames: keyAltName\n            }\n        }, {\n            writeConcern: {\n                w: \"majority\"\n            },\n            returnDocument: \"before\"\n        });\n        return value;\n    }\n    /**\n     * Adds a keyAltName to a key identified by the provided _id.\n     *\n     * This method resolves to/returns the *old* key value (prior to removing the new altKeyName).\n     *\n     * If the removed keyAltName is the last keyAltName for that key, the `altKeyNames` property is unset from the document.\n     *\n     * @param _id - The id of the document to update.\n     * @param keyAltName - a keyAltName to search for a key\n     * @returns Returns a promise that either resolves to a {@link DataKey} if a document matches the key or null if no documents\n     * match the id.  The promise rejects with an error if an error is thrown.\n     * @example\n     * ```ts\n     * // removing a key alt name from a data key\n     * const id = new Binary();  // id is a bson binary subtype 4 object\n     * const keyAltName = 'keyAltName';\n     * const oldKey = await clientEncryption.removeKeyAltName(id, keyAltName);\n     *\n     * if (!oldKey) {\n     *  // null is returned if there is no matching document with an id matching the supplied id\n     * }\n     * ```\n     */ async removeKeyAltName(_id, keyAltName) {\n        const { db: dbName, collection: collectionName } = utils_1.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);\n        const pipeline = [\n            {\n                $set: {\n                    keyAltNames: {\n                        $cond: [\n                            {\n                                $eq: [\n                                    \"$keyAltNames\",\n                                    [\n                                        keyAltName\n                                    ]\n                                ]\n                            },\n                            \"$$REMOVE\",\n                            {\n                                $filter: {\n                                    input: \"$keyAltNames\",\n                                    cond: {\n                                        $ne: [\n                                            \"$$this\",\n                                            keyAltName\n                                        ]\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                }\n            }\n        ];\n        const value = await this._keyVaultClient.db(dbName).collection(collectionName).findOneAndUpdate({\n            _id\n        }, pipeline, {\n            writeConcern: {\n                w: \"majority\"\n            },\n            returnDocument: \"before\"\n        });\n        return value;\n    }\n    /**\n     * A convenience method for creating an encrypted collection.\n     * This method will create data keys for any encryptedFields that do not have a `keyId` defined\n     * and then create a new collection with the full set of encryptedFields.\n     *\n     * @param db - A Node.js driver Db object with which to create the collection\n     * @param name - The name of the collection to be created\n     * @param options - Options for createDataKey and for createCollection\n     * @returns created collection and generated encryptedFields\n     * @throws MongoCryptCreateDataKeyError - If part way through the process a createDataKey invocation fails, an error will be rejected that has the partial `encryptedFields` that were created.\n     * @throws MongoCryptCreateEncryptedCollectionError - If creating the collection fails, an error will be rejected that has the entire `encryptedFields` that were created.\n     */ async createEncryptedCollection(db, name, options) {\n        const { provider, masterKey, createCollectionOptions: { encryptedFields: { ...encryptedFields }, ...createCollectionOptions } } = options;\n        if (Array.isArray(encryptedFields.fields)) {\n            const createDataKeyPromises = encryptedFields.fields.map(async (field)=>field == null || typeof field !== \"object\" || field.keyId != null ? field : {\n                    ...field,\n                    keyId: await this.createDataKey(provider, {\n                        masterKey\n                    })\n                });\n            const createDataKeyResolutions = await Promise.allSettled(createDataKeyPromises);\n            encryptedFields.fields = createDataKeyResolutions.map((resolution, index)=>resolution.status === \"fulfilled\" ? resolution.value : encryptedFields.fields[index]);\n            const rejection = createDataKeyResolutions.find((result)=>result.status === \"rejected\");\n            if (rejection != null) {\n                throw new errors_1.MongoCryptCreateDataKeyError(encryptedFields, {\n                    cause: rejection.reason\n                });\n            }\n        }\n        try {\n            const collection = await db.createCollection(name, {\n                ...createCollectionOptions,\n                encryptedFields\n            });\n            return {\n                collection,\n                encryptedFields\n            };\n        } catch (cause) {\n            throw new errors_1.MongoCryptCreateEncryptedCollectionError(encryptedFields, {\n                cause\n            });\n        }\n    }\n    /**\n     * Explicitly encrypt a provided value. Note that either `options.keyId` or `options.keyAltName` must\n     * be specified. Specifying both `options.keyId` and `options.keyAltName` is considered an error.\n     *\n     * @param value - The value that you wish to serialize. Must be of a type that can be serialized into BSON\n     * @param options -\n     * @returns a Promise that either resolves with the encrypted value, or rejects with an error.\n     *\n     * @example\n     * ```ts\n     * // Encryption with async/await api\n     * async function encryptMyData(value) {\n     *   const keyId = await clientEncryption.createDataKey('local');\n     *   return clientEncryption.encrypt(value, { keyId, algorithm: 'AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic' });\n     * }\n     * ```\n     *\n     * @example\n     * ```ts\n     * // Encryption using a keyAltName\n     * async function encryptMyData(value) {\n     *   await clientEncryption.createDataKey('local', { keyAltNames: 'mySpecialKey' });\n     *   return clientEncryption.encrypt(value, { keyAltName: 'mySpecialKey', algorithm: 'AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic' });\n     * }\n     * ```\n     */ async encrypt(value, options) {\n        return this._encrypt(value, false, options);\n    }\n    /**\n     * Encrypts a Match Expression or Aggregate Expression to query a range index.\n     *\n     * Only supported when queryType is \"rangePreview\" and algorithm is \"RangePreview\".\n     *\n     * @experimental The Range algorithm is experimental only. It is not intended for production use. It is subject to breaking changes.\n     *\n     * @param expression - a BSON document of one of the following forms:\n     *  1. A Match Expression of this form:\n     *      `{$and: [{<field>: {$gt: <value1>}}, {<field>: {$lt: <value2> }}]}`\n     *  2. An Aggregate Expression of this form:\n     *      `{$and: [{$gt: [<fieldpath>, <value1>]}, {$lt: [<fieldpath>, <value2>]}]}`\n     *\n     *    `$gt` may also be `$gte`. `$lt` may also be `$lte`.\n     *\n     * @param options -\n     * @returns Returns a Promise that either resolves with the encrypted value or rejects with an error.\n     */ async encryptExpression(expression, options) {\n        return this._encrypt(expression, true, options);\n    }\n    /**\n     * Explicitly decrypt a provided encrypted value\n     *\n     * @param value - An encrypted value\n     * @returns a Promise that either resolves with the decrypted value, or rejects with an error\n     *\n     * @example\n     * ```ts\n     * // Decrypting value with async/await API\n     * async function decryptMyValue(value) {\n     *   return clientEncryption.decrypt(value);\n     * }\n     * ```\n     */ async decrypt(value) {\n        const valueBuffer = (0, bson_1.serialize)({\n            v: value\n        });\n        const context = this._mongoCrypt.makeExplicitDecryptionContext(valueBuffer);\n        const stateMachine = new state_machine_1.StateMachine({\n            proxyOptions: this._proxyOptions,\n            tlsOptions: this._tlsOptions\n        });\n        const { v } = await stateMachine.execute(this, context);\n        return v;\n    }\n    /**\n     * @internal\n     * Ask the user for KMS credentials.\n     *\n     * This returns anything that looks like the kmsProviders original input\n     * option. It can be empty, and any provider specified here will override\n     * the original ones.\n     */ async askForKMSCredentials() {\n        return (0, index_1.refreshKMSCredentials)(this._kmsProviders);\n    }\n    static get libmongocryptVersion() {\n        return ClientEncryption.getMongoCrypt().libmongocryptVersion;\n    }\n    /**\n     * @internal\n     * A helper that perform explicit encryption of values and expressions.\n     * Explicitly encrypt a provided value. Note that either `options.keyId` or `options.keyAltName` must\n     * be specified. Specifying both `options.keyId` and `options.keyAltName` is considered an error.\n     *\n     * @param value - The value that you wish to encrypt. Must be of a type that can be serialized into BSON\n     * @param expressionMode - a boolean that indicates whether or not to encrypt the value as an expression\n     * @param options - options to pass to encrypt\n     * @returns the raw result of the call to stateMachine.execute().  When expressionMode is set to true, the return\n     *          value will be a bson document.  When false, the value will be a BSON Binary.\n     *\n     */ async _encrypt(value, expressionMode, options) {\n        const { algorithm, keyId, keyAltName, contentionFactor, queryType, rangeOptions } = options;\n        const contextOptions = {\n            expressionMode,\n            algorithm\n        };\n        if (keyId) {\n            contextOptions.keyId = keyId.buffer;\n        }\n        if (keyAltName) {\n            if (keyId) {\n                throw new errors_1.MongoCryptInvalidArgumentError(`\"options\" cannot contain both \"keyId\" and \"keyAltName\"`);\n            }\n            if (typeof keyAltName !== \"string\") {\n                throw new errors_1.MongoCryptInvalidArgumentError(`\"options.keyAltName\" must be of type string, but was of type ${typeof keyAltName}`);\n            }\n            contextOptions.keyAltName = (0, bson_1.serialize)({\n                keyAltName\n            });\n        }\n        if (typeof contentionFactor === \"number\" || typeof contentionFactor === \"bigint\") {\n            contextOptions.contentionFactor = contentionFactor;\n        }\n        if (typeof queryType === \"string\") {\n            contextOptions.queryType = queryType;\n        }\n        if (typeof rangeOptions === \"object\") {\n            contextOptions.rangeOptions = (0, bson_1.serialize)(rangeOptions);\n        }\n        const valueBuffer = (0, bson_1.serialize)({\n            v: value\n        });\n        const stateMachine = new state_machine_1.StateMachine({\n            proxyOptions: this._proxyOptions,\n            tlsOptions: this._tlsOptions\n        });\n        const context = this._mongoCrypt.makeExplicitEncryptionContext(valueBuffer, contextOptions);\n        const result = await stateMachine.execute(this, context);\n        return result.v;\n    }\n}\nexports.ClientEncryption = ClientEncryption; //# sourceMappingURL=client_encryption.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9jbGllbnRfZW5jcnlwdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxTQUFTQyxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxrQkFBa0JILG1CQUFPQSxDQUFDLHVHQUFvQjtBQUNwRCxNQUFNSSxXQUFXSixtQkFBT0EsQ0FBQyxtRkFBVTtBQUNuQyxNQUFNSyxVQUFVTCxtQkFBT0EsQ0FBQyxxR0FBbUI7QUFDM0MsTUFBTU0sa0JBQWtCTixtQkFBT0EsQ0FBQyxpR0FBaUI7QUFDakQ7OztDQUdDLEdBQ0QsTUFBTUY7SUFDRixjQUFjLEdBQ2QsT0FBT1MsZ0JBQWdCO1FBQ25CLE1BQU1DLGFBQWEsQ0FBQyxHQUFHUCxPQUFPUSwwQkFBMEI7UUFDeEQsSUFBSSxrQkFBa0JELFlBQVk7WUFDOUIsTUFBTUEsV0FBV0UsWUFBWTtRQUNqQztRQUNBLE9BQU9GLFdBQVdHLFVBQVU7SUFDaEM7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBMkJDLEdBQ0RDLFlBQVlDLE1BQU0sRUFBRUMsT0FBTyxDQUFFO1FBQ3pCLElBQUksQ0FBQ0MsT0FBTyxHQUFHRjtRQUNmLElBQUksQ0FBQ0csYUFBYSxHQUFHRixRQUFRRyxZQUFZLElBQUksQ0FBQztRQUM5QyxJQUFJLENBQUNDLFdBQVcsR0FBR0osUUFBUUssVUFBVSxJQUFJLENBQUM7UUFDMUMsSUFBSSxDQUFDQyxhQUFhLEdBQUdOLFFBQVFPLFlBQVksSUFBSSxDQUFDO1FBQzlDLElBQUlQLFFBQVFRLGlCQUFpQixJQUFJLE1BQU07WUFDbkMsTUFB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ekMsT0FBTzRCLFNBQVMsRUFBRTtnQkFBRWE7WUFBVztRQUNuRTtRQUNBLElBQUksT0FBTzhGLHFCQUFxQixZQUFZLE9BQU9BLHFCQUFxQixVQUFVO1lBQzlFRyxlQUFlSCxnQkFBZ0IsR0FBR0E7UUFDdEM7UUFDQSxJQUFJLE9BQU9DLGNBQWMsVUFBVTtZQUMvQkUsZUFBZUYsU0FBUyxHQUFHQTtRQUMvQjtRQUNBLElBQUksT0FBT0MsaUJBQWlCLFVBQVU7WUFDbENDLGVBQWVELFlBQVksR0FBRyxDQUFDLEdBQUd6SSxPQUFPNEIsU0FBUyxFQUFFNkc7UUFDeEQ7UUFDQSxNQUFNVCxjQUFjLENBQUMsR0FBR2hJLE9BQU80QixTQUFTLEVBQUU7WUFBRXlDLEdBQUd2RTtRQUFNO1FBQ3JELE1BQU1rRCxlQUFlLElBQUl6QyxnQkFBZ0IwQyxZQUFZLENBQUM7WUFDbEQvQixjQUFjLElBQUksQ0FBQ0QsYUFBYTtZQUNoQ0csWUFBWSxJQUFJLENBQUNELFdBQVc7UUFDaEM7UUFDQSxNQUFNMkIsVUFBVSxJQUFJLENBQUNkLFdBQVcsQ0FBQzRHLDZCQUE2QixDQUFDWixhQUFhVTtRQUM1RSxNQUFNM0QsU0FBUyxNQUFNL0IsYUFBYUcsT0FBTyxDQUFDLElBQUksRUFBRUw7UUFDaEQsT0FBT2lDLE9BQU9WLENBQUM7SUFDbkI7QUFDSjtBQUNBeEUsd0JBQXdCLEdBQUdFLGtCQUMzQiw2Q0FBNkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NsaWVudC1zaWRlLWVuY3J5cHRpb24vY2xpZW50X2VuY3J5cHRpb24uanM/ZmU0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2xpZW50RW5jcnlwdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuLi9ic29uXCIpO1xuY29uc3QgZGVwc18xID0gcmVxdWlyZShcIi4uL2RlcHNcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY3J5cHRvQ2FsbGJhY2tzID0gcmVxdWlyZShcIi4vY3J5cHRvX2NhbGxiYWNrc1wiKTtcbmNvbnN0IGVycm9yc18xID0gcmVxdWlyZShcIi4vZXJyb3JzXCIpO1xuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuL3Byb3ZpZGVycy9pbmRleFwiKTtcbmNvbnN0IHN0YXRlX21hY2hpbmVfMSA9IHJlcXVpcmUoXCIuL3N0YXRlX21hY2hpbmVcIik7XG4vKipcbiAqIEBwdWJsaWNcbiAqIFRoZSBwdWJsaWMgaW50ZXJmYWNlIGZvciBleHBsaWNpdCBpbi11c2UgZW5jcnlwdGlvblxuICovXG5jbGFzcyBDbGllbnRFbmNyeXB0aW9uIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgc3RhdGljIGdldE1vbmdvQ3J5cHQoKSB7XG4gICAgICAgIGNvbnN0IGVuY3J5cHRpb24gPSAoMCwgZGVwc18xLmdldE1vbmdvREJDbGllbnRFbmNyeXB0aW9uKSgpO1xuICAgICAgICBpZiAoJ2tNb2R1bGVFcnJvcicgaW4gZW5jcnlwdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgZW5jcnlwdGlvbi5rTW9kdWxlRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuY3J5cHRpb24uTW9uZ29DcnlwdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGVuY3J5cHRpb24gaW5zdGFuY2VcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBuZXcgQ2xpZW50RW5jcnlwdGlvbihtb25nb0NsaWVudCwge1xuICAgICAqICAga2V5VmF1bHROYW1lc3BhY2U6ICdjbGllbnQuZW5jcnlwdGlvbicsXG4gICAgICogICBrbXNQcm92aWRlcnM6IHtcbiAgICAgKiAgICAgbG9jYWw6IHtcbiAgICAgKiAgICAgICBrZXk6IG1hc3RlcktleSAvLyBUaGUgbWFzdGVyIGtleSB1c2VkIGZvciBlbmNyeXB0aW9uL2RlY3J5cHRpb24uIEEgOTYtYnl0ZSBsb25nIEJ1ZmZlclxuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogbmV3IENsaWVudEVuY3J5cHRpb24obW9uZ29DbGllbnQsIHtcbiAgICAgKiAgIGtleVZhdWx0TmFtZXNwYWNlOiAnY2xpZW50LmVuY3J5cHRpb24nLFxuICAgICAqICAga21zUHJvdmlkZXJzOiB7XG4gICAgICogICAgIGF3czoge1xuICAgICAqICAgICAgIGFjY2Vzc0tleUlkOiBBV1NfQUNDRVNTX0tFWSxcbiAgICAgKiAgICAgICBzZWNyZXRBY2Nlc3NLZXk6IEFXU19TRUNSRVRfS0VZXG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjbGllbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fY2xpZW50ID0gY2xpZW50O1xuICAgICAgICB0aGlzLl9wcm94eU9wdGlvbnMgPSBvcHRpb25zLnByb3h5T3B0aW9ucyA/PyB7fTtcbiAgICAgICAgdGhpcy5fdGxzT3B0aW9ucyA9IG9wdGlvbnMudGxzT3B0aW9ucyA/PyB7fTtcbiAgICAgICAgdGhpcy5fa21zUHJvdmlkZXJzID0gb3B0aW9ucy5rbXNQcm92aWRlcnMgfHwge307XG4gICAgICAgIGlmIChvcHRpb25zLmtleVZhdWx0TmFtZXNwYWNlID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnNfMS5Nb25nb0NyeXB0SW52YWxpZEFyZ3VtZW50RXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgb3B0aW9uIGBrZXlWYXVsdE5hbWVzcGFjZWAnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb25nb0NyeXB0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBjcnlwdG9DYWxsYmFja3MsXG4gICAgICAgICAgICBrbXNQcm92aWRlcnM6ICFCdWZmZXIuaXNCdWZmZXIodGhpcy5fa21zUHJvdmlkZXJzKVxuICAgICAgICAgICAgICAgID8gKDAsIGJzb25fMS5zZXJpYWxpemUpKHRoaXMuX2ttc1Byb3ZpZGVycylcbiAgICAgICAgICAgICAgICA6IHRoaXMuX2ttc1Byb3ZpZGVyc1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9rZXlWYXVsdE5hbWVzcGFjZSA9IG9wdGlvbnMua2V5VmF1bHROYW1lc3BhY2U7XG4gICAgICAgIHRoaXMuX2tleVZhdWx0Q2xpZW50ID0gb3B0aW9ucy5rZXlWYXVsdENsaWVudCB8fCBjbGllbnQ7XG4gICAgICAgIGNvbnN0IE1vbmdvQ3J5cHQgPSBDbGllbnRFbmNyeXB0aW9uLmdldE1vbmdvQ3J5cHQoKTtcbiAgICAgICAgdGhpcy5fbW9uZ29DcnlwdCA9IG5ldyBNb25nb0NyeXB0KG1vbmdvQ3J5cHRPcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRhdGEga2V5IHVzZWQgZm9yIGV4cGxpY2l0IGVuY3J5cHRpb24gYW5kIGluc2VydHMgaXQgaW50byB0aGUga2V5IHZhdWx0IG5hbWVzcGFjZVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIFVzaW5nIGFzeW5jL2F3YWl0IHRvIGNyZWF0ZSBhIGxvY2FsIGtleVxuICAgICAqIGNvbnN0IGRhdGFLZXlJZCA9IGF3YWl0IGNsaWVudEVuY3J5cHRpb24uY3JlYXRlRGF0YUtleSgnbG9jYWwnKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBVc2luZyBhc3luYy9hd2FpdCB0byBjcmVhdGUgYW4gYXdzIGtleVxuICAgICAqIGNvbnN0IGRhdGFLZXlJZCA9IGF3YWl0IGNsaWVudEVuY3J5cHRpb24uY3JlYXRlRGF0YUtleSgnYXdzJywge1xuICAgICAqICAgbWFzdGVyS2V5OiB7XG4gICAgICogICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXG4gICAgICogICAgIGtleTogJ3h4eHh4eHh4eHh4eHh4JyAvLyBDTUsgQVJOIGhlcmVcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBVc2luZyBhc3luYy9hd2FpdCB0byBjcmVhdGUgYW4gYXdzIGtleSB3aXRoIGEga2V5QWx0TmFtZVxuICAgICAqIGNvbnN0IGRhdGFLZXlJZCA9IGF3YWl0IGNsaWVudEVuY3J5cHRpb24uY3JlYXRlRGF0YUtleSgnYXdzJywge1xuICAgICAqICAgbWFzdGVyS2V5OiB7XG4gICAgICogICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXG4gICAgICogICAgIGtleTogJ3h4eHh4eHh4eHh4eHh4JyAvLyBDTUsgQVJOIGhlcmVcbiAgICAgKiAgIH0sXG4gICAgICogICBrZXlBbHROYW1lczogWyAnbXlTcGVjaWFsS2V5JyBdXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlRGF0YUtleShwcm92aWRlciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmtleUFsdE5hbWVzICYmICFBcnJheS5pc0FycmF5KG9wdGlvbnMua2V5QWx0TmFtZXMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yKGBPcHRpb24gXCJrZXlBbHROYW1lc1wiIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncywgYnV0IHdhcyBvZiB0eXBlICR7dHlwZW9mIG9wdGlvbnMua2V5QWx0TmFtZXN9LmApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBrZXlBbHROYW1lcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG9wdGlvbnMua2V5QWx0TmFtZXMgJiYgb3B0aW9ucy5rZXlBbHROYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBrZXlBbHROYW1lcyA9IG9wdGlvbnMua2V5QWx0TmFtZXMubWFwKChrZXlBbHROYW1lLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXlBbHROYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yKGBPcHRpb24gXCJrZXlBbHROYW1lc1wiIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncywgYnV0IGl0ZW0gYXQgaW5kZXggJHtpfSB3YXMgb2YgdHlwZSAke3R5cGVvZiBrZXlBbHROYW1lfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gKDAsIGJzb25fMS5zZXJpYWxpemUpKHsga2V5QWx0TmFtZSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBrZXlNYXRlcmlhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG9wdGlvbnMua2V5TWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIGtleU1hdGVyaWFsID0gKDAsIGJzb25fMS5zZXJpYWxpemUpKHsga2V5TWF0ZXJpYWw6IG9wdGlvbnMua2V5TWF0ZXJpYWwgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YUtleUJzb24gPSAoMCwgYnNvbl8xLnNlcmlhbGl6ZSkoe1xuICAgICAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgICAgICAuLi5vcHRpb25zLm1hc3RlcktleVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuX21vbmdvQ3J5cHQubWFrZURhdGFLZXlDb250ZXh0KGRhdGFLZXlCc29uLCB7XG4gICAgICAgICAgICBrZXlBbHROYW1lcyxcbiAgICAgICAgICAgIGtleU1hdGVyaWFsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdGF0ZU1hY2hpbmUgPSBuZXcgc3RhdGVfbWFjaGluZV8xLlN0YXRlTWFjaGluZSh7XG4gICAgICAgICAgICBwcm94eU9wdGlvbnM6IHRoaXMuX3Byb3h5T3B0aW9ucyxcbiAgICAgICAgICAgIHRsc09wdGlvbnM6IHRoaXMuX3Rsc09wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRhdGFLZXkgPSBhd2FpdCBzdGF0ZU1hY2hpbmUuZXhlY3V0ZSh0aGlzLCBjb250ZXh0KTtcbiAgICAgICAgY29uc3QgeyBkYjogZGJOYW1lLCBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uTmFtZSB9ID0gdXRpbHNfMS5Nb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZS5mcm9tU3RyaW5nKHRoaXMuX2tleVZhdWx0TmFtZXNwYWNlKTtcbiAgICAgICAgY29uc3QgeyBpbnNlcnRlZElkIH0gPSBhd2FpdCB0aGlzLl9rZXlWYXVsdENsaWVudFxuICAgICAgICAgICAgLmRiKGRiTmFtZSlcbiAgICAgICAgICAgIC5jb2xsZWN0aW9uKGNvbGxlY3Rpb25OYW1lKVxuICAgICAgICAgICAgLmluc2VydE9uZShkYXRhS2V5LCB7IHdyaXRlQ29uY2VybjogeyB3OiAnbWFqb3JpdHknIH0gfSk7XG4gICAgICAgIHJldHVybiBpbnNlcnRlZElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWFyY2hlcyB0aGUga2V5dmF1bHQgZm9yIGFueSBkYXRhIGtleXMgbWF0Y2hpbmcgdGhlIHByb3ZpZGVkIGZpbHRlci4gIElmIHRoZXJlIGFyZSBtYXRjaGVzLCByZXdyYXBNYW55RGF0YUtleSB0aGVuIGF0dGVtcHRzIHRvIHJlLXdyYXAgdGhlIGRhdGEga2V5cyB1c2luZyB0aGUgcHJvdmlkZWQgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIElmIG5vIG1hdGNoZXMgYXJlIGZvdW5kLCB0aGVuIG5vIGJ1bGsgd3JpdGUgaXMgcGVyZm9ybWVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIHJld3JhcHBpbmcgYWxsIGRhdGEgZGF0YSBrZXlzICh1c2luZyBhIGZpbHRlciB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cylcbiAgICAgKiBjb25zdCBmaWx0ZXIgPSB7fTtcbiAgICAgKlxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudEVuY3J5cHRpb24ucmV3cmFwTWFueURhdGFLZXkoZmlsdGVyKTtcbiAgICAgKiBpZiAocmVzdWx0LmJ1bGtXcml0ZVJlc3VsdCAhPSBudWxsKSB7XG4gICAgICogIC8vIGtleXMgd2VyZSByZS13cmFwcGVkLCByZXN1bHRzIHdpbGwgYmUgYXZhaWxhYmxlIGluIHRoZSBidWxrV3JpdGUgb2JqZWN0LlxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBhdHRlbXB0aW5nIHRvIHJld3JhcCBhbGwgZGF0YSBrZXlzIHdpdGggbm8gbWF0Y2hlc1xuICAgICAqIGNvbnN0IGZpbHRlciA9IHsgX2lkOiBuZXcgQmluYXJ5KCkgfSAvLyBhc3N1bWUgX2lkIG1hdGNoZXMgbm8gZG9jdW1lbnRzIGluIHRoZSBkYXRhYmFzZVxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudEVuY3J5cHRpb24ucmV3cmFwTWFueURhdGFLZXkoZmlsdGVyKTtcbiAgICAgKlxuICAgICAqIGlmIChyZXN1bHQuYnVsa1dyaXRlUmVzdWx0ID09IG51bGwpIHtcbiAgICAgKiAgLy8gbm8ga2V5cyBtYXRjaGVkLCBgYnVsa1dyaXRlUmVzdWx0YCBkb2VzIG5vdCBleGlzdCBvbiB0aGUgcmVzdWx0IG9iamVjdFxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBhc3luYyByZXdyYXBNYW55RGF0YUtleShmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGtleUVuY3J5cHRpb25LZXlCc29uID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3Qga2V5RW5jcnlwdGlvbktleSA9IE9iamVjdC5hc3NpZ24oeyBwcm92aWRlcjogb3B0aW9ucy5wcm92aWRlciB9LCBvcHRpb25zLm1hc3RlcktleSk7XG4gICAgICAgICAgICBrZXlFbmNyeXB0aW9uS2V5QnNvbiA9ICgwLCBic29uXzEuc2VyaWFsaXplKShrZXlFbmNyeXB0aW9uS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWx0ZXJCc29uID0gKDAsIGJzb25fMS5zZXJpYWxpemUpKGZpbHRlcik7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLl9tb25nb0NyeXB0Lm1ha2VSZXdyYXBNYW55RGF0YUtleUNvbnRleHQoZmlsdGVyQnNvbiwga2V5RW5jcnlwdGlvbktleUJzb24pO1xuICAgICAgICBjb25zdCBzdGF0ZU1hY2hpbmUgPSBuZXcgc3RhdGVfbWFjaGluZV8xLlN0YXRlTWFjaGluZSh7XG4gICAgICAgICAgICBwcm94eU9wdGlvbnM6IHRoaXMuX3Byb3h5T3B0aW9ucyxcbiAgICAgICAgICAgIHRsc09wdGlvbnM6IHRoaXMuX3Rsc09wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdjogZGF0YUtleXMgfSA9IGF3YWl0IHN0YXRlTWFjaGluZS5leGVjdXRlKHRoaXMsIGNvbnRleHQpO1xuICAgICAgICBpZiAoZGF0YUtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBkYjogZGJOYW1lLCBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uTmFtZSB9ID0gdXRpbHNfMS5Nb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZS5mcm9tU3RyaW5nKHRoaXMuX2tleVZhdWx0TmFtZXNwYWNlKTtcbiAgICAgICAgY29uc3QgcmVwbGFjZW1lbnRzID0gZGF0YUtleXMubWFwKChrZXkpID0+ICh7XG4gICAgICAgICAgICB1cGRhdGVPbmU6IHtcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IHsgX2lkOiBrZXkuX2lkIH0sXG4gICAgICAgICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICAgICAgICAgICRzZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc3RlcktleToga2V5Lm1hc3RlcktleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleU1hdGVyaWFsOiBrZXkua2V5TWF0ZXJpYWxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnREYXRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVEYXRlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fa2V5VmF1bHRDbGllbnRcbiAgICAgICAgICAgIC5kYihkYk5hbWUpXG4gICAgICAgICAgICAuY29sbGVjdGlvbihjb2xsZWN0aW9uTmFtZSlcbiAgICAgICAgICAgIC5idWxrV3JpdGUocmVwbGFjZW1lbnRzLCB7XG4gICAgICAgICAgICB3cml0ZUNvbmNlcm46IHsgdzogJ21ham9yaXR5JyB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBidWxrV3JpdGVSZXN1bHQ6IHJlc3VsdCB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBrZXkgd2l0aCB0aGUgcHJvdmlkZWQgaWQgZnJvbSB0aGUga2V5dmF1bHQsIGlmIGl0IGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBkZWxldGUgYSBrZXkgYnkgX2lkXG4gICAgICogY29uc3QgaWQgPSBuZXcgQmluYXJ5KCk7IC8vIGlkIGlzIGEgYnNvbiBiaW5hcnkgc3VidHlwZSA0IG9iamVjdFxuICAgICAqIGNvbnN0IHsgZGVsZXRlZENvdW50IH0gPSBhd2FpdCBjbGllbnRFbmNyeXB0aW9uLmRlbGV0ZUtleShpZCk7XG4gICAgICpcbiAgICAgKiBpZiAoZGVsZXRlZENvdW50ICE9IG51bGwgJiYgZGVsZXRlZENvdW50ID4gMCkge1xuICAgICAqICAgLy8gc3VjY2Vzc2Z1bCBkZWxldGlvblxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGRlbGV0ZUtleShfaWQpIHtcbiAgICAgICAgY29uc3QgeyBkYjogZGJOYW1lLCBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uTmFtZSB9ID0gdXRpbHNfMS5Nb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZS5mcm9tU3RyaW5nKHRoaXMuX2tleVZhdWx0TmFtZXNwYWNlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleVZhdWx0Q2xpZW50XG4gICAgICAgICAgICAuZGIoZGJOYW1lKVxuICAgICAgICAgICAgLmNvbGxlY3Rpb24oY29sbGVjdGlvbk5hbWUpXG4gICAgICAgICAgICAuZGVsZXRlT25lKHsgX2lkIH0sIHsgd3JpdGVDb25jZXJuOiB7IHc6ICdtYWpvcml0eScgfSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgYWxsIHRoZSBrZXlzIGN1cnJlbnRseSBzdG9yZWQgaW4gdGhlIGtleXZhdWx0LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBub3QgdGhyb3cuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIEZpbmRDdXJzb3Igb3ZlciBhbGwga2V5cyBpbiB0aGUga2V5dmF1bHQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIGZldGNoaW5nIGFsbCBrZXlzXG4gICAgICogY29uc3Qga2V5cyA9IGF3YWl0IGNsaWVudEVuY3J5cHRpb24uZ2V0S2V5cygpLnRvQXJyYXkoKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXRLZXlzKCkge1xuICAgICAgICBjb25zdCB7IGRiOiBkYk5hbWUsIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25OYW1lIH0gPSB1dGlsc18xLk1vbmdvREJDb2xsZWN0aW9uTmFtZXNwYWNlLmZyb21TdHJpbmcodGhpcy5fa2V5VmF1bHROYW1lc3BhY2UpO1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5VmF1bHRDbGllbnRcbiAgICAgICAgICAgIC5kYihkYk5hbWUpXG4gICAgICAgICAgICAuY29sbGVjdGlvbihjb2xsZWN0aW9uTmFtZSlcbiAgICAgICAgICAgIC5maW5kKHt9LCB7IHJlYWRDb25jZXJuOiB7IGxldmVsOiAnbWFqb3JpdHknIH0gfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIGEga2V5IGluIHRoZSBrZXl2YXVsdCB3aXRoIHRoZSBzcGVjaWZpZWQgX2lkLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCBlaXRoZXIgcmVzb2x2ZXMgdG8gYSB7QGxpbmsgRGF0YUtleX0gaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZSBrZXkgb3IgbnVsbCBpZiBubyBkb2N1bWVudHNcbiAgICAgKiBtYXRjaCB0aGUgaWQuICBUaGUgcHJvbWlzZSByZWplY3RzIHdpdGggYW4gZXJyb3IgaWYgYW4gZXJyb3IgaXMgdGhyb3duLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBnZXR0aW5nIGEga2V5IGJ5IGlkXG4gICAgICogY29uc3QgaWQgPSBuZXcgQmluYXJ5KCk7IC8vIGlkIGlzIGEgYnNvbiBiaW5hcnkgc3VidHlwZSA0IG9iamVjdFxuICAgICAqIGNvbnN0IGtleSA9IGF3YWl0IGNsaWVudEVuY3J5cHRpb24uZ2V0S2V5KGlkKTtcbiAgICAgKiBpZiAoIWtleSkge1xuICAgICAqICAvLyBrZXkgaXMgbnVsbCBpZiB0aGVyZSB3YXMgbm8gbWF0Y2hpbmcga2V5XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGFzeW5jIGdldEtleShfaWQpIHtcbiAgICAgICAgY29uc3QgeyBkYjogZGJOYW1lLCBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uTmFtZSB9ID0gdXRpbHNfMS5Nb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZS5mcm9tU3RyaW5nKHRoaXMuX2tleVZhdWx0TmFtZXNwYWNlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleVZhdWx0Q2xpZW50XG4gICAgICAgICAgICAuZGIoZGJOYW1lKVxuICAgICAgICAgICAgLmNvbGxlY3Rpb24oY29sbGVjdGlvbk5hbWUpXG4gICAgICAgICAgICAuZmluZE9uZSh7IF9pZCB9LCB7IHJlYWRDb25jZXJuOiB7IGxldmVsOiAnbWFqb3JpdHknIH0gfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIGEga2V5IGluIHRoZSBrZXl2YXVsdCB3aGljaCBoYXMgdGhlIHNwZWNpZmllZCBrZXlBbHROYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIGtleUFsdE5hbWUgLSBhIGtleUFsdE5hbWUgdG8gc2VhcmNoIGZvciBhIGtleVxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBwcm9taXNlIHRoYXQgZWl0aGVyIHJlc29sdmVzIHRvIGEge0BsaW5rIERhdGFLZXl9IGlmIGEgZG9jdW1lbnQgbWF0Y2hlcyB0aGUga2V5IG9yIG51bGwgaWYgbm8gZG9jdW1lbnRzXG4gICAgICogbWF0Y2ggdGhlIGtleUFsdE5hbWUuICBUaGUgcHJvbWlzZSByZWplY3RzIHdpdGggYW4gZXJyb3IgaWYgYW4gZXJyb3IgaXMgdGhyb3duLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBnZXQgYSBrZXkgYnkgYWx0IG5hbWVcbiAgICAgKiBjb25zdCBrZXlBbHROYW1lID0gJ2tleUFsdE5hbWUnO1xuICAgICAqIGNvbnN0IGtleSA9IGF3YWl0IGNsaWVudEVuY3J5cHRpb24uZ2V0S2V5QnlBbHROYW1lKGtleUFsdE5hbWUpO1xuICAgICAqIGlmICgha2V5KSB7XG4gICAgICogIC8vIGtleSBpcyBudWxsIGlmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIGtleVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBhc3luYyBnZXRLZXlCeUFsdE5hbWUoa2V5QWx0TmFtZSkge1xuICAgICAgICBjb25zdCB7IGRiOiBkYk5hbWUsIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25OYW1lIH0gPSB1dGlsc18xLk1vbmdvREJDb2xsZWN0aW9uTmFtZXNwYWNlLmZyb21TdHJpbmcodGhpcy5fa2V5VmF1bHROYW1lc3BhY2UpO1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5VmF1bHRDbGllbnRcbiAgICAgICAgICAgIC5kYihkYk5hbWUpXG4gICAgICAgICAgICAuY29sbGVjdGlvbihjb2xsZWN0aW9uTmFtZSlcbiAgICAgICAgICAgIC5maW5kT25lKHsga2V5QWx0TmFtZXM6IGtleUFsdE5hbWUgfSwgeyByZWFkQ29uY2VybjogeyBsZXZlbDogJ21ham9yaXR5JyB9IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEga2V5QWx0TmFtZSB0byBhIGtleSBpZGVudGlmaWVkIGJ5IHRoZSBwcm92aWRlZCBfaWQuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCByZXNvbHZlcyB0by9yZXR1cm5zIHRoZSAqb2xkKiBrZXkgdmFsdWUgKHByaW9yIHRvIGFkZGluZyB0aGUgbmV3IGFsdEtleU5hbWUpLlxuICAgICAqXG4gICAgICogQHBhcmFtIF9pZCAtIFRoZSBpZCBvZiB0aGUgZG9jdW1lbnQgdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSBrZXlBbHROYW1lIC0gYSBrZXlBbHROYW1lIHRvIHNlYXJjaCBmb3IgYSBrZXlcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGVpdGhlciByZXNvbHZlcyB0byBhIHtAbGluayBEYXRhS2V5fSBpZiBhIGRvY3VtZW50IG1hdGNoZXMgdGhlIGtleSBvciBudWxsIGlmIG5vIGRvY3VtZW50c1xuICAgICAqIG1hdGNoIHRoZSBpZC4gIFRoZSBwcm9taXNlIHJlamVjdHMgd2l0aCBhbiBlcnJvciBpZiBhbiBlcnJvciBpcyB0aHJvd24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIGFkZGluZyBhbiBrZXlBbHROYW1lIHRvIGEgZGF0YSBrZXlcbiAgICAgKiBjb25zdCBpZCA9IG5ldyBCaW5hcnkoKTsgIC8vIGlkIGlzIGEgYnNvbiBiaW5hcnkgc3VidHlwZSA0IG9iamVjdFxuICAgICAqIGNvbnN0IGtleUFsdE5hbWUgPSAna2V5QWx0TmFtZSc7XG4gICAgICogY29uc3Qgb2xkS2V5ID0gYXdhaXQgY2xpZW50RW5jcnlwdGlvbi5hZGRLZXlBbHROYW1lKGlkLCBrZXlBbHROYW1lKTtcbiAgICAgKiBpZiAoIW9sZEtleSkge1xuICAgICAqICAvLyBudWxsIGlzIHJldHVybmVkIGlmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIGRvY3VtZW50IHdpdGggYW4gaWQgbWF0Y2hpbmcgdGhlIHN1cHBsaWVkIGlkXG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGFzeW5jIGFkZEtleUFsdE5hbWUoX2lkLCBrZXlBbHROYW1lKSB7XG4gICAgICAgIGNvbnN0IHsgZGI6IGRiTmFtZSwgY29sbGVjdGlvbjogY29sbGVjdGlvbk5hbWUgfSA9IHV0aWxzXzEuTW9uZ29EQkNvbGxlY3Rpb25OYW1lc3BhY2UuZnJvbVN0cmluZyh0aGlzLl9rZXlWYXVsdE5hbWVzcGFjZSk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGhpcy5fa2V5VmF1bHRDbGllbnRcbiAgICAgICAgICAgIC5kYihkYk5hbWUpXG4gICAgICAgICAgICAuY29sbGVjdGlvbihjb2xsZWN0aW9uTmFtZSlcbiAgICAgICAgICAgIC5maW5kT25lQW5kVXBkYXRlKHsgX2lkIH0sIHsgJGFkZFRvU2V0OiB7IGtleUFsdE5hbWVzOiBrZXlBbHROYW1lIH0gfSwgeyB3cml0ZUNvbmNlcm46IHsgdzogJ21ham9yaXR5JyB9LCByZXR1cm5Eb2N1bWVudDogJ2JlZm9yZScgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIGtleUFsdE5hbWUgdG8gYSBrZXkgaWRlbnRpZmllZCBieSB0aGUgcHJvdmlkZWQgX2lkLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgcmVzb2x2ZXMgdG8vcmV0dXJucyB0aGUgKm9sZCoga2V5IHZhbHVlIChwcmlvciB0byByZW1vdmluZyB0aGUgbmV3IGFsdEtleU5hbWUpLlxuICAgICAqXG4gICAgICogSWYgdGhlIHJlbW92ZWQga2V5QWx0TmFtZSBpcyB0aGUgbGFzdCBrZXlBbHROYW1lIGZvciB0aGF0IGtleSwgdGhlIGBhbHRLZXlOYW1lc2AgcHJvcGVydHkgaXMgdW5zZXQgZnJvbSB0aGUgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gX2lkIC0gVGhlIGlkIG9mIHRoZSBkb2N1bWVudCB0byB1cGRhdGUuXG4gICAgICogQHBhcmFtIGtleUFsdE5hbWUgLSBhIGtleUFsdE5hbWUgdG8gc2VhcmNoIGZvciBhIGtleVxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBwcm9taXNlIHRoYXQgZWl0aGVyIHJlc29sdmVzIHRvIGEge0BsaW5rIERhdGFLZXl9IGlmIGEgZG9jdW1lbnQgbWF0Y2hlcyB0aGUga2V5IG9yIG51bGwgaWYgbm8gZG9jdW1lbnRzXG4gICAgICogbWF0Y2ggdGhlIGlkLiAgVGhlIHByb21pc2UgcmVqZWN0cyB3aXRoIGFuIGVycm9yIGlmIGFuIGVycm9yIGlzIHRocm93bi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogLy8gcmVtb3ZpbmcgYSBrZXkgYWx0IG5hbWUgZnJvbSBhIGRhdGEga2V5XG4gICAgICogY29uc3QgaWQgPSBuZXcgQmluYXJ5KCk7ICAvLyBpZCBpcyBhIGJzb24gYmluYXJ5IHN1YnR5cGUgNCBvYmplY3RcbiAgICAgKiBjb25zdCBrZXlBbHROYW1lID0gJ2tleUFsdE5hbWUnO1xuICAgICAqIGNvbnN0IG9sZEtleSA9IGF3YWl0IGNsaWVudEVuY3J5cHRpb24ucmVtb3ZlS2V5QWx0TmFtZShpZCwga2V5QWx0TmFtZSk7XG4gICAgICpcbiAgICAgKiBpZiAoIW9sZEtleSkge1xuICAgICAqICAvLyBudWxsIGlzIHJldHVybmVkIGlmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIGRvY3VtZW50IHdpdGggYW4gaWQgbWF0Y2hpbmcgdGhlIHN1cHBsaWVkIGlkXG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZUtleUFsdE5hbWUoX2lkLCBrZXlBbHROYW1lKSB7XG4gICAgICAgIGNvbnN0IHsgZGI6IGRiTmFtZSwgY29sbGVjdGlvbjogY29sbGVjdGlvbk5hbWUgfSA9IHV0aWxzXzEuTW9uZ29EQkNvbGxlY3Rpb25OYW1lc3BhY2UuZnJvbVN0cmluZyh0aGlzLl9rZXlWYXVsdE5hbWVzcGFjZSk7XG4gICAgICAgIGNvbnN0IHBpcGVsaW5lID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRzZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAga2V5QWx0TmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb25kOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXE6IFsnJGtleUFsdE5hbWVzJywgW2tleUFsdE5hbWVdXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQkUkVNT1ZFJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiAnJGtleUFsdE5hbWVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbmU6IFsnJCR0aGlzJywga2V5QWx0TmFtZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCB0aGlzLl9rZXlWYXVsdENsaWVudFxuICAgICAgICAgICAgLmRiKGRiTmFtZSlcbiAgICAgICAgICAgIC5jb2xsZWN0aW9uKGNvbGxlY3Rpb25OYW1lKVxuICAgICAgICAgICAgLmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQgfSwgcGlwZWxpbmUsIHtcbiAgICAgICAgICAgIHdyaXRlQ29uY2VybjogeyB3OiAnbWFqb3JpdHknIH0sXG4gICAgICAgICAgICByZXR1cm5Eb2N1bWVudDogJ2JlZm9yZSdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBjb252ZW5pZW5jZSBtZXRob2QgZm9yIGNyZWF0aW5nIGFuIGVuY3J5cHRlZCBjb2xsZWN0aW9uLlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgY3JlYXRlIGRhdGEga2V5cyBmb3IgYW55IGVuY3J5cHRlZEZpZWxkcyB0aGF0IGRvIG5vdCBoYXZlIGEgYGtleUlkYCBkZWZpbmVkXG4gICAgICogYW5kIHRoZW4gY3JlYXRlIGEgbmV3IGNvbGxlY3Rpb24gd2l0aCB0aGUgZnVsbCBzZXQgb2YgZW5jcnlwdGVkRmllbGRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRiIC0gQSBOb2RlLmpzIGRyaXZlciBEYiBvYmplY3Qgd2l0aCB3aGljaCB0byBjcmVhdGUgdGhlIGNvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBjb2xsZWN0aW9uIHRvIGJlIGNyZWF0ZWRcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIGNyZWF0ZURhdGFLZXkgYW5kIGZvciBjcmVhdGVDb2xsZWN0aW9uXG4gICAgICogQHJldHVybnMgY3JlYXRlZCBjb2xsZWN0aW9uIGFuZCBnZW5lcmF0ZWQgZW5jcnlwdGVkRmllbGRzXG4gICAgICogQHRocm93cyBNb25nb0NyeXB0Q3JlYXRlRGF0YUtleUVycm9yIC0gSWYgcGFydCB3YXkgdGhyb3VnaCB0aGUgcHJvY2VzcyBhIGNyZWF0ZURhdGFLZXkgaW52b2NhdGlvbiBmYWlscywgYW4gZXJyb3Igd2lsbCBiZSByZWplY3RlZCB0aGF0IGhhcyB0aGUgcGFydGlhbCBgZW5jcnlwdGVkRmllbGRzYCB0aGF0IHdlcmUgY3JlYXRlZC5cbiAgICAgKiBAdGhyb3dzIE1vbmdvQ3J5cHRDcmVhdGVFbmNyeXB0ZWRDb2xsZWN0aW9uRXJyb3IgLSBJZiBjcmVhdGluZyB0aGUgY29sbGVjdGlvbiBmYWlscywgYW4gZXJyb3Igd2lsbCBiZSByZWplY3RlZCB0aGF0IGhhcyB0aGUgZW50aXJlIGBlbmNyeXB0ZWRGaWVsZHNgIHRoYXQgd2VyZSBjcmVhdGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb24oZGIsIG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBwcm92aWRlciwgbWFzdGVyS2V5LCBjcmVhdGVDb2xsZWN0aW9uT3B0aW9uczogeyBlbmNyeXB0ZWRGaWVsZHM6IHsgLi4uZW5jcnlwdGVkRmllbGRzIH0sIC4uLmNyZWF0ZUNvbGxlY3Rpb25PcHRpb25zIH0gfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVuY3J5cHRlZEZpZWxkcy5maWVsZHMpKSB7XG4gICAgICAgICAgICBjb25zdCBjcmVhdGVEYXRhS2V5UHJvbWlzZXMgPSBlbmNyeXB0ZWRGaWVsZHMuZmllbGRzLm1hcChhc3luYyAoZmllbGQpID0+IGZpZWxkID09IG51bGwgfHwgdHlwZW9mIGZpZWxkICE9PSAnb2JqZWN0JyB8fCBmaWVsZC5rZXlJZCAhPSBudWxsXG4gICAgICAgICAgICAgICAgPyBmaWVsZFxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAuLi5maWVsZCxcbiAgICAgICAgICAgICAgICAgICAga2V5SWQ6IGF3YWl0IHRoaXMuY3JlYXRlRGF0YUtleShwcm92aWRlciwgeyBtYXN0ZXJLZXkgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZURhdGFLZXlSZXNvbHV0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChjcmVhdGVEYXRhS2V5UHJvbWlzZXMpO1xuICAgICAgICAgICAgZW5jcnlwdGVkRmllbGRzLmZpZWxkcyA9IGNyZWF0ZURhdGFLZXlSZXNvbHV0aW9ucy5tYXAoKHJlc29sdXRpb24sIGluZGV4KSA9PiByZXNvbHV0aW9uLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgPyByZXNvbHV0aW9uLnZhbHVlIDogZW5jcnlwdGVkRmllbGRzLmZpZWxkc1tpbmRleF0pO1xuICAgICAgICAgICAgY29uc3QgcmVqZWN0aW9uID0gY3JlYXRlRGF0YUtleVJlc29sdXRpb25zLmZpbmQoKHJlc3VsdCkgPT4gcmVzdWx0LnN0YXR1cyA9PT0gJ3JlamVjdGVkJyk7XG4gICAgICAgICAgICBpZiAocmVqZWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdENyZWF0ZURhdGFLZXlFcnJvcihlbmNyeXB0ZWRGaWVsZHMsIHsgY2F1c2U6IHJlamVjdGlvbi5yZWFzb24gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBkYi5jcmVhdGVDb2xsZWN0aW9uKG5hbWUsIHtcbiAgICAgICAgICAgICAgICAuLi5jcmVhdGVDb2xsZWN0aW9uT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRGaWVsZHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHsgY29sbGVjdGlvbiwgZW5jcnlwdGVkRmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdENyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb25FcnJvcihlbmNyeXB0ZWRGaWVsZHMsIHsgY2F1c2UgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwbGljaXRseSBlbmNyeXB0IGEgcHJvdmlkZWQgdmFsdWUuIE5vdGUgdGhhdCBlaXRoZXIgYG9wdGlvbnMua2V5SWRgIG9yIGBvcHRpb25zLmtleUFsdE5hbWVgIG11c3RcbiAgICAgKiBiZSBzcGVjaWZpZWQuIFNwZWNpZnlpbmcgYm90aCBgb3B0aW9ucy5rZXlJZGAgYW5kIGBvcHRpb25zLmtleUFsdE5hbWVgIGlzIGNvbnNpZGVyZWQgYW4gZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdGhhdCB5b3Ugd2lzaCB0byBzZXJpYWxpemUuIE11c3QgYmUgb2YgYSB0eXBlIHRoYXQgY2FuIGJlIHNlcmlhbGl6ZWQgaW50byBCU09OXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLVxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IGVpdGhlciByZXNvbHZlcyB3aXRoIHRoZSBlbmNyeXB0ZWQgdmFsdWUsIG9yIHJlamVjdHMgd2l0aCBhbiBlcnJvci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBFbmNyeXB0aW9uIHdpdGggYXN5bmMvYXdhaXQgYXBpXG4gICAgICogYXN5bmMgZnVuY3Rpb24gZW5jcnlwdE15RGF0YSh2YWx1ZSkge1xuICAgICAqICAgY29uc3Qga2V5SWQgPSBhd2FpdCBjbGllbnRFbmNyeXB0aW9uLmNyZWF0ZURhdGFLZXkoJ2xvY2FsJyk7XG4gICAgICogICByZXR1cm4gY2xpZW50RW5jcnlwdGlvbi5lbmNyeXB0KHZhbHVlLCB7IGtleUlkLCBhbGdvcml0aG06ICdBRUFEX0FFU18yNTZfQ0JDX0hNQUNfU0hBXzUxMi1EZXRlcm1pbmlzdGljJyB9KTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogLy8gRW5jcnlwdGlvbiB1c2luZyBhIGtleUFsdE5hbWVcbiAgICAgKiBhc3luYyBmdW5jdGlvbiBlbmNyeXB0TXlEYXRhKHZhbHVlKSB7XG4gICAgICogICBhd2FpdCBjbGllbnRFbmNyeXB0aW9uLmNyZWF0ZURhdGFLZXkoJ2xvY2FsJywgeyBrZXlBbHROYW1lczogJ215U3BlY2lhbEtleScgfSk7XG4gICAgICogICByZXR1cm4gY2xpZW50RW5jcnlwdGlvbi5lbmNyeXB0KHZhbHVlLCB7IGtleUFsdE5hbWU6ICdteVNwZWNpYWxLZXknLCBhbGdvcml0aG06ICdBRUFEX0FFU18yNTZfQ0JDX0hNQUNfU0hBXzUxMi1EZXRlcm1pbmlzdGljJyB9KTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgYXN5bmMgZW5jcnlwdCh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5jcnlwdCh2YWx1ZSwgZmFsc2UsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNyeXB0cyBhIE1hdGNoIEV4cHJlc3Npb24gb3IgQWdncmVnYXRlIEV4cHJlc3Npb24gdG8gcXVlcnkgYSByYW5nZSBpbmRleC5cbiAgICAgKlxuICAgICAqIE9ubHkgc3VwcG9ydGVkIHdoZW4gcXVlcnlUeXBlIGlzIFwicmFuZ2VQcmV2aWV3XCIgYW5kIGFsZ29yaXRobSBpcyBcIlJhbmdlUHJldmlld1wiLlxuICAgICAqXG4gICAgICogQGV4cGVyaW1lbnRhbCBUaGUgUmFuZ2UgYWxnb3JpdGhtIGlzIGV4cGVyaW1lbnRhbCBvbmx5LiBJdCBpcyBub3QgaW50ZW5kZWQgZm9yIHByb2R1Y3Rpb24gdXNlLiBJdCBpcyBzdWJqZWN0IHRvIGJyZWFraW5nIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXhwcmVzc2lvbiAtIGEgQlNPTiBkb2N1bWVudCBvZiBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtczpcbiAgICAgKiAgMS4gQSBNYXRjaCBFeHByZXNzaW9uIG9mIHRoaXMgZm9ybTpcbiAgICAgKiAgICAgIGB7JGFuZDogW3s8ZmllbGQ+OiB7JGd0OiA8dmFsdWUxPn19LCB7PGZpZWxkPjogeyRsdDogPHZhbHVlMj4gfX1dfWBcbiAgICAgKiAgMi4gQW4gQWdncmVnYXRlIEV4cHJlc3Npb24gb2YgdGhpcyBmb3JtOlxuICAgICAqICAgICAgYHskYW5kOiBbeyRndDogWzxmaWVsZHBhdGg+LCA8dmFsdWUxPl19LCB7JGx0OiBbPGZpZWxkcGF0aD4sIDx2YWx1ZTI+XX1dfWBcbiAgICAgKlxuICAgICAqICAgIGAkZ3RgIG1heSBhbHNvIGJlIGAkZ3RlYC4gYCRsdGAgbWF5IGFsc28gYmUgYCRsdGVgLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLVxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBQcm9taXNlIHRoYXQgZWl0aGVyIHJlc29sdmVzIHdpdGggdGhlIGVuY3J5cHRlZCB2YWx1ZSBvciByZWplY3RzIHdpdGggYW4gZXJyb3IuXG4gICAgICovXG4gICAgYXN5bmMgZW5jcnlwdEV4cHJlc3Npb24oZXhwcmVzc2lvbiwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5jcnlwdChleHByZXNzaW9uLCB0cnVlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwbGljaXRseSBkZWNyeXB0IGEgcHJvdmlkZWQgZW5jcnlwdGVkIHZhbHVlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBBbiBlbmNyeXB0ZWQgdmFsdWVcbiAgICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCBlaXRoZXIgcmVzb2x2ZXMgd2l0aCB0aGUgZGVjcnlwdGVkIHZhbHVlLCBvciByZWplY3RzIHdpdGggYW4gZXJyb3JcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBEZWNyeXB0aW5nIHZhbHVlIHdpdGggYXN5bmMvYXdhaXQgQVBJXG4gICAgICogYXN5bmMgZnVuY3Rpb24gZGVjcnlwdE15VmFsdWUodmFsdWUpIHtcbiAgICAgKiAgIHJldHVybiBjbGllbnRFbmNyeXB0aW9uLmRlY3J5cHQodmFsdWUpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBhc3luYyBkZWNyeXB0KHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlQnVmZmVyID0gKDAsIGJzb25fMS5zZXJpYWxpemUpKHsgdjogdmFsdWUgfSk7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLl9tb25nb0NyeXB0Lm1ha2VFeHBsaWNpdERlY3J5cHRpb25Db250ZXh0KHZhbHVlQnVmZmVyKTtcbiAgICAgICAgY29uc3Qgc3RhdGVNYWNoaW5lID0gbmV3IHN0YXRlX21hY2hpbmVfMS5TdGF0ZU1hY2hpbmUoe1xuICAgICAgICAgICAgcHJveHlPcHRpb25zOiB0aGlzLl9wcm94eU9wdGlvbnMsXG4gICAgICAgICAgICB0bHNPcHRpb25zOiB0aGlzLl90bHNPcHRpb25zXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHYgfSA9IGF3YWl0IHN0YXRlTWFjaGluZS5leGVjdXRlKHRoaXMsIGNvbnRleHQpO1xuICAgICAgICByZXR1cm4gdjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQXNrIHRoZSB1c2VyIGZvciBLTVMgY3JlZGVudGlhbHMuXG4gICAgICpcbiAgICAgKiBUaGlzIHJldHVybnMgYW55dGhpbmcgdGhhdCBsb29rcyBsaWtlIHRoZSBrbXNQcm92aWRlcnMgb3JpZ2luYWwgaW5wdXRcbiAgICAgKiBvcHRpb24uIEl0IGNhbiBiZSBlbXB0eSwgYW5kIGFueSBwcm92aWRlciBzcGVjaWZpZWQgaGVyZSB3aWxsIG92ZXJyaWRlXG4gICAgICogdGhlIG9yaWdpbmFsIG9uZXMuXG4gICAgICovXG4gICAgYXN5bmMgYXNrRm9yS01TQ3JlZGVudGlhbHMoKSB7XG4gICAgICAgIHJldHVybiAoMCwgaW5kZXhfMS5yZWZyZXNoS01TQ3JlZGVudGlhbHMpKHRoaXMuX2ttc1Byb3ZpZGVycyk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgbGlibW9uZ29jcnlwdFZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiBDbGllbnRFbmNyeXB0aW9uLmdldE1vbmdvQ3J5cHQoKS5saWJtb25nb2NyeXB0VmVyc2lvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQSBoZWxwZXIgdGhhdCBwZXJmb3JtIGV4cGxpY2l0IGVuY3J5cHRpb24gb2YgdmFsdWVzIGFuZCBleHByZXNzaW9ucy5cbiAgICAgKiBFeHBsaWNpdGx5IGVuY3J5cHQgYSBwcm92aWRlZCB2YWx1ZS4gTm90ZSB0aGF0IGVpdGhlciBgb3B0aW9ucy5rZXlJZGAgb3IgYG9wdGlvbnMua2V5QWx0TmFtZWAgbXVzdFxuICAgICAqIGJlIHNwZWNpZmllZC4gU3BlY2lmeWluZyBib3RoIGBvcHRpb25zLmtleUlkYCBhbmQgYG9wdGlvbnMua2V5QWx0TmFtZWAgaXMgY29uc2lkZXJlZCBhbiBlcnJvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0aGF0IHlvdSB3aXNoIHRvIGVuY3J5cHQuIE11c3QgYmUgb2YgYSB0eXBlIHRoYXQgY2FuIGJlIHNlcmlhbGl6ZWQgaW50byBCU09OXG4gICAgICogQHBhcmFtIGV4cHJlc3Npb25Nb2RlIC0gYSBib29sZWFuIHRoYXQgaW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRvIGVuY3J5cHQgdGhlIHZhbHVlIGFzIGFuIGV4cHJlc3Npb25cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIG9wdGlvbnMgdG8gcGFzcyB0byBlbmNyeXB0XG4gICAgICogQHJldHVybnMgdGhlIHJhdyByZXN1bHQgb2YgdGhlIGNhbGwgdG8gc3RhdGVNYWNoaW5lLmV4ZWN1dGUoKS4gIFdoZW4gZXhwcmVzc2lvbk1vZGUgaXMgc2V0IHRvIHRydWUsIHRoZSByZXR1cm5cbiAgICAgKiAgICAgICAgICB2YWx1ZSB3aWxsIGJlIGEgYnNvbiBkb2N1bWVudC4gIFdoZW4gZmFsc2UsIHRoZSB2YWx1ZSB3aWxsIGJlIGEgQlNPTiBCaW5hcnkuXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBfZW5jcnlwdCh2YWx1ZSwgZXhwcmVzc2lvbk1vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBhbGdvcml0aG0sIGtleUlkLCBrZXlBbHROYW1lLCBjb250ZW50aW9uRmFjdG9yLCBxdWVyeVR5cGUsIHJhbmdlT3B0aW9ucyB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgY29udGV4dE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBleHByZXNzaW9uTW9kZSxcbiAgICAgICAgICAgIGFsZ29yaXRobVxuICAgICAgICB9O1xuICAgICAgICBpZiAoa2V5SWQpIHtcbiAgICAgICAgICAgIGNvbnRleHRPcHRpb25zLmtleUlkID0ga2V5SWQuYnVmZmVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXlBbHROYW1lKSB7XG4gICAgICAgICAgICBpZiAoa2V5SWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yKGBcIm9wdGlvbnNcIiBjYW5ub3QgY29udGFpbiBib3RoIFwia2V5SWRcIiBhbmQgXCJrZXlBbHROYW1lXCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5QWx0TmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yKGBcIm9wdGlvbnMua2V5QWx0TmFtZVwiIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcsIGJ1dCB3YXMgb2YgdHlwZSAke3R5cGVvZiBrZXlBbHROYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dE9wdGlvbnMua2V5QWx0TmFtZSA9ICgwLCBic29uXzEuc2VyaWFsaXplKSh7IGtleUFsdE5hbWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50aW9uRmFjdG9yID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgY29udGVudGlvbkZhY3RvciA9PT0gJ2JpZ2ludCcpIHtcbiAgICAgICAgICAgIGNvbnRleHRPcHRpb25zLmNvbnRlbnRpb25GYWN0b3IgPSBjb250ZW50aW9uRmFjdG9yO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcXVlcnlUeXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29udGV4dE9wdGlvbnMucXVlcnlUeXBlID0gcXVlcnlUeXBlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmFuZ2VPcHRpb25zID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29udGV4dE9wdGlvbnMucmFuZ2VPcHRpb25zID0gKDAsIGJzb25fMS5zZXJpYWxpemUpKHJhbmdlT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWVCdWZmZXIgPSAoMCwgYnNvbl8xLnNlcmlhbGl6ZSkoeyB2OiB2YWx1ZSB9KTtcbiAgICAgICAgY29uc3Qgc3RhdGVNYWNoaW5lID0gbmV3IHN0YXRlX21hY2hpbmVfMS5TdGF0ZU1hY2hpbmUoe1xuICAgICAgICAgICAgcHJveHlPcHRpb25zOiB0aGlzLl9wcm94eU9wdGlvbnMsXG4gICAgICAgICAgICB0bHNPcHRpb25zOiB0aGlzLl90bHNPcHRpb25zXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5fbW9uZ29DcnlwdC5tYWtlRXhwbGljaXRFbmNyeXB0aW9uQ29udGV4dCh2YWx1ZUJ1ZmZlciwgY29udGV4dE9wdGlvbnMpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdGF0ZU1hY2hpbmUuZXhlY3V0ZSh0aGlzLCBjb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC52O1xuICAgIH1cbn1cbmV4cG9ydHMuQ2xpZW50RW5jcnlwdGlvbiA9IENsaWVudEVuY3J5cHRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnRfZW5jcnlwdGlvbi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDbGllbnRFbmNyeXB0aW9uIiwiYnNvbl8xIiwicmVxdWlyZSIsImRlcHNfMSIsInV0aWxzXzEiLCJjcnlwdG9DYWxsYmFja3MiLCJlcnJvcnNfMSIsImluZGV4XzEiLCJzdGF0ZV9tYWNoaW5lXzEiLCJnZXRNb25nb0NyeXB0IiwiZW5jcnlwdGlvbiIsImdldE1vbmdvREJDbGllbnRFbmNyeXB0aW9uIiwia01vZHVsZUVycm9yIiwiTW9uZ29DcnlwdCIsImNvbnN0cnVjdG9yIiwiY2xpZW50Iiwib3B0aW9ucyIsIl9jbGllbnQiLCJfcHJveHlPcHRpb25zIiwicHJveHlPcHRpb25zIiwiX3Rsc09wdGlvbnMiLCJ0bHNPcHRpb25zIiwiX2ttc1Byb3ZpZGVycyIsImttc1Byb3ZpZGVycyIsImtleVZhdWx0TmFtZXNwYWNlIiwiTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yIiwibW9uZ29DcnlwdE9wdGlvbnMiLCJCdWZmZXIiLCJpc0J1ZmZlciIsInNlcmlhbGl6ZSIsIl9rZXlWYXVsdE5hbWVzcGFjZSIsIl9rZXlWYXVsdENsaWVudCIsImtleVZhdWx0Q2xpZW50IiwiX21vbmdvQ3J5cHQiLCJjcmVhdGVEYXRhS2V5IiwicHJvdmlkZXIiLCJrZXlBbHROYW1lcyIsIkFycmF5IiwiaXNBcnJheSIsInVuZGVmaW5lZCIsImxlbmd0aCIsIm1hcCIsImtleUFsdE5hbWUiLCJpIiwia2V5TWF0ZXJpYWwiLCJkYXRhS2V5QnNvbiIsIm1hc3RlcktleSIsImNvbnRleHQiLCJtYWtlRGF0YUtleUNvbnRleHQiLCJzdGF0ZU1hY2hpbmUiLCJTdGF0ZU1hY2hpbmUiLCJkYXRhS2V5IiwiZXhlY3V0ZSIsImRiIiwiZGJOYW1lIiwiY29sbGVjdGlvbiIsImNvbGxlY3Rpb25OYW1lIiwiTW9uZ29EQkNvbGxlY3Rpb25OYW1lc3BhY2UiLCJmcm9tU3RyaW5nIiwiaW5zZXJ0ZWRJZCIsImluc2VydE9uZSIsIndyaXRlQ29uY2VybiIsInciLCJyZXdyYXBNYW55RGF0YUtleSIsImZpbHRlciIsImtleUVuY3J5cHRpb25LZXlCc29uIiwia2V5RW5jcnlwdGlvbktleSIsImFzc2lnbiIsImZpbHRlckJzb24iLCJtYWtlUmV3cmFwTWFueURhdGFLZXlDb250ZXh0IiwidiIsImRhdGFLZXlzIiwicmVwbGFjZW1lbnRzIiwia2V5IiwidXBkYXRlT25lIiwiX2lkIiwidXBkYXRlIiwiJHNldCIsIiRjdXJyZW50RGF0ZSIsInVwZGF0ZURhdGUiLCJyZXN1bHQiLCJidWxrV3JpdGUiLCJidWxrV3JpdGVSZXN1bHQiLCJkZWxldGVLZXkiLCJkZWxldGVPbmUiLCJnZXRLZXlzIiwiZmluZCIsInJlYWRDb25jZXJuIiwibGV2ZWwiLCJnZXRLZXkiLCJmaW5kT25lIiwiZ2V0S2V5QnlBbHROYW1lIiwiYWRkS2V5QWx0TmFtZSIsImZpbmRPbmVBbmRVcGRhdGUiLCIkYWRkVG9TZXQiLCJyZXR1cm5Eb2N1bWVudCIsInJlbW92ZUtleUFsdE5hbWUiLCJwaXBlbGluZSIsIiRjb25kIiwiJGVxIiwiJGZpbHRlciIsImlucHV0IiwiY29uZCIsIiRuZSIsImNyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb24iLCJuYW1lIiwiY3JlYXRlQ29sbGVjdGlvbk9wdGlvbnMiLCJlbmNyeXB0ZWRGaWVsZHMiLCJmaWVsZHMiLCJjcmVhdGVEYXRhS2V5UHJvbWlzZXMiLCJmaWVsZCIsImtleUlkIiwiY3JlYXRlRGF0YUtleVJlc29sdXRpb25zIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJyZXNvbHV0aW9uIiwiaW5kZXgiLCJzdGF0dXMiLCJyZWplY3Rpb24iLCJNb25nb0NyeXB0Q3JlYXRlRGF0YUtleUVycm9yIiwiY2F1c2UiLCJyZWFzb24iLCJjcmVhdGVDb2xsZWN0aW9uIiwiTW9uZ29DcnlwdENyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb25FcnJvciIsImVuY3J5cHQiLCJfZW5jcnlwdCIsImVuY3J5cHRFeHByZXNzaW9uIiwiZXhwcmVzc2lvbiIsImRlY3J5cHQiLCJ2YWx1ZUJ1ZmZlciIsIm1ha2VFeHBsaWNpdERlY3J5cHRpb25Db250ZXh0IiwiYXNrRm9yS01TQ3JlZGVudGlhbHMiLCJyZWZyZXNoS01TQ3JlZGVudGlhbHMiLCJsaWJtb25nb2NyeXB0VmVyc2lvbiIsImV4cHJlc3Npb25Nb2RlIiwiYWxnb3JpdGhtIiwiY29udGVudGlvbkZhY3RvciIsInF1ZXJ5VHlwZSIsInJhbmdlT3B0aW9ucyIsImNvbnRleHRPcHRpb25zIiwiYnVmZmVyIiwibWFrZUV4cGxpY2l0RW5jcnlwdGlvbkNvbnRleHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/client_encryption.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/crypto_callbacks.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/crypto_callbacks.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.hmacSha256Hook = exports.hmacSha512Hook = exports.aes256CtrDecryptHook = exports.aes256CtrEncryptHook = exports.aes256CbcDecryptHook = exports.aes256CbcEncryptHook = exports.signRsaSha256Hook = exports.makeHmacHook = exports.sha256Hook = exports.randomHook = exports.makeAES256Hook = void 0;\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nfunction makeAES256Hook(method, mode) {\n    return function(key, iv, input, output) {\n        let result;\n        try {\n            const cipher = crypto[method](mode, key, iv);\n            cipher.setAutoPadding(false);\n            result = cipher.update(input);\n            const final = cipher.final();\n            if (final.length > 0) {\n                result = Buffer.concat([\n                    result,\n                    final\n                ]);\n            }\n        } catch (e) {\n            return e;\n        }\n        result.copy(output);\n        return result.length;\n    };\n}\nexports.makeAES256Hook = makeAES256Hook;\nfunction randomHook(buffer, count) {\n    try {\n        crypto.randomFillSync(buffer, 0, count);\n    } catch (e) {\n        return e;\n    }\n    return count;\n}\nexports.randomHook = randomHook;\nfunction sha256Hook(input, output) {\n    let result;\n    try {\n        result = crypto.createHash(\"sha256\").update(input).digest();\n    } catch (e) {\n        return e;\n    }\n    result.copy(output);\n    return result.length;\n}\nexports.sha256Hook = sha256Hook;\nfunction makeHmacHook(algorithm) {\n    return (key, input, output)=>{\n        let result;\n        try {\n            result = crypto.createHmac(algorithm, key).update(input).digest();\n        } catch (e) {\n            return e;\n        }\n        result.copy(output);\n        return result.length;\n    };\n}\nexports.makeHmacHook = makeHmacHook;\nfunction signRsaSha256Hook(key, input, output) {\n    let result;\n    try {\n        const signer = crypto.createSign(\"sha256WithRSAEncryption\");\n        const privateKey = Buffer.from(`-----BEGIN PRIVATE KEY-----\\n${key.toString(\"base64\")}\\n-----END PRIVATE KEY-----\\n`);\n        result = signer.update(input).end().sign(privateKey);\n    } catch (e) {\n        return e;\n    }\n    result.copy(output);\n    return result.length;\n}\nexports.signRsaSha256Hook = signRsaSha256Hook;\nexports.aes256CbcEncryptHook = makeAES256Hook(\"createCipheriv\", \"aes-256-cbc\");\nexports.aes256CbcDecryptHook = makeAES256Hook(\"createDecipheriv\", \"aes-256-cbc\");\nexports.aes256CtrEncryptHook = makeAES256Hook(\"createCipheriv\", \"aes-256-ctr\");\nexports.aes256CtrDecryptHook = makeAES256Hook(\"createDecipheriv\", \"aes-256-ctr\");\nexports.hmacSha512Hook = makeHmacHook(\"sha512\");\nexports.hmacSha256Hook = makeHmacHook(\"sha256\"); //# sourceMappingURL=crypto_callbacks.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9jcnlwdG9fY2FsbGJhY2tzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxzQkFBc0IsR0FBR0Esc0JBQXNCLEdBQUdBLDRCQUE0QixHQUFHQSw0QkFBNEIsR0FBR0EsNEJBQTRCLEdBQUdBLDRCQUE0QixHQUFHQSx5QkFBeUIsR0FBR0Esb0JBQW9CLEdBQUdBLGtCQUFrQixHQUFHQSxrQkFBa0IsR0FBR0Esc0JBQXNCLEdBQUcsS0FBSztBQUN6UyxNQUFNYSxTQUFTQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUMvQixTQUFTRixlQUFlRyxNQUFNLEVBQUVDLElBQUk7SUFDaEMsT0FBTyxTQUFVQyxHQUFHLEVBQUVDLEVBQUUsRUFBRUMsS0FBSyxFQUFFQyxNQUFNO1FBQ25DLElBQUlDO1FBQ0osSUFBSTtZQUNBLE1BQU1DLFNBQVNULE1BQU0sQ0FBQ0UsT0FBTyxDQUFDQyxNQUFNQyxLQUFLQztZQUN6Q0ksT0FBT0MsY0FBYyxDQUFDO1lBQ3RCRixTQUFTQyxPQUFPRSxNQUFNLENBQUNMO1lBQ3ZCLE1BQU1NLFFBQVFILE9BQU9HLEtBQUs7WUFDMUIsSUFBSUEsTUFBTUMsTUFBTSxHQUFHLEdBQUc7Z0JBQ2xCTCxTQUFTTSxPQUFPQyxNQUFNLENBQUM7b0JBQUNQO29CQUFRSTtpQkFBTTtZQUMxQztRQUNKLEVBQ0EsT0FBT0ksR0FBRztZQUNOLE9BQU9BO1FBQ1g7UUFDQVIsT0FBT1MsSUFBSSxDQUFDVjtRQUNaLE9BQU9DLE9BQU9LLE1BQU07SUFDeEI7QUFDSjtBQUNBMUIsc0JBQXNCLEdBQUdZO0FBQ3pCLFNBQVNELFdBQVdvQixNQUFNLEVBQUVDLEtBQUs7SUFDN0IsSUFBSTtRQUNBbkIsT0FBT29CLGNBQWMsQ0FBQ0YsUUFBUSxHQUFHQztJQUNyQyxFQUNBLE9BQU9ILEdBQUc7UUFDTixPQUFPQTtJQUNYO0lBQ0EsT0FBT0c7QUFDWDtBQUNBaEMsa0JBQWtCLEdBQUdXO0FBQ3JCLFNBQVNELFdBQVdTLEtBQUssRUFBRUMsTUFBTTtJQUM3QixJQUFJQztJQUNKLElBQUk7UUFDQUEsU0FBU1IsT0FBT3FCLFVBQVUsQ0FBQyxVQUFVVixNQUFNLENBQUNMLE9BQU9nQixNQUFNO0lBQzdELEVBQ0EsT0FBT04sR0FBRztRQUNOLE9BQU9BO0lBQ1g7SUFDQVIsT0FBT1MsSUFBSSxDQUFDVjtJQUNaLE9BQU9DLE9BQU9LLE1BQU07QUFDeEI7QUFDQTFCLGtCQUFrQixHQUFHVTtBQUNyQixTQUFTRCxhQUFhMkIsU0FBUztJQUMzQixPQUFPLENBQUNuQixLQUFLRSxPQUFPQztRQUNoQixJQUFJQztRQUNKLElBQUk7WUFDQUEsU0FBU1IsT0FBT3dCLFVBQVUsQ0FBQ0QsV0FBV25CLEtBQUtPLE1BQU0sQ0FBQ0wsT0FBT2dCLE1BQU07UUFDbkUsRUFDQSxPQUFPTixHQUFHO1lBQ04sT0FBT0E7UUFDWDtRQUNBUixPQUFPUyxJQUFJLENBQUNWO1FBQ1osT0FBT0MsT0FBT0ssTUFBTTtJQUN4QjtBQUNKO0FBQ0ExQixvQkFBb0IsR0FBR1M7QUFDdkIsU0FBU0Qsa0JBQWtCUyxHQUFHLEVBQUVFLEtBQUssRUFBRUMsTUFBTTtJQUN6QyxJQUFJQztJQUNKLElBQUk7UUFDQSxNQUFNaUIsU0FBU3pCLE9BQU8wQixVQUFVLENBQUM7UUFDakMsTUFBTUMsYUFBYWIsT0FBT2MsSUFBSSxDQUFDLENBQUMsNkJBQTZCLEVBQUV4QixJQUFJeUIsUUFBUSxDQUFDLFVBQVUsNkJBQTZCLENBQUM7UUFDcEhyQixTQUFTaUIsT0FBT2QsTUFBTSxDQUFDTCxPQUFPd0IsR0FBRyxHQUFHQyxJQUFJLENBQUNKO0lBQzdDLEVBQ0EsT0FBT1gsR0FBRztRQUNOLE9BQU9BO0lBQ1g7SUFDQVIsT0FBT1MsSUFBSSxDQUFDVjtJQUNaLE9BQU9DLE9BQU9LLE1BQU07QUFDeEI7QUFDQTFCLHlCQUF5QixHQUFHUTtBQUM1QlIsNEJBQTRCLEdBQUdZLGVBQWUsa0JBQWtCO0FBQ2hFWiw0QkFBNEIsR0FBR1ksZUFBZSxvQkFBb0I7QUFDbEVaLDRCQUE0QixHQUFHWSxlQUFlLGtCQUFrQjtBQUNoRVosNEJBQTRCLEdBQUdZLGVBQWUsb0JBQW9CO0FBQ2xFWixzQkFBc0IsR0FBR1MsYUFBYTtBQUN0Q1Qsc0JBQXNCLEdBQUdTLGFBQWEsV0FDdEMsNENBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbGllbnQtc2lkZS1lbmNyeXB0aW9uL2NyeXB0b19jYWxsYmFja3MuanM/OWQ4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaG1hY1NoYTI1Nkhvb2sgPSBleHBvcnRzLmhtYWNTaGE1MTJIb29rID0gZXhwb3J0cy5hZXMyNTZDdHJEZWNyeXB0SG9vayA9IGV4cG9ydHMuYWVzMjU2Q3RyRW5jcnlwdEhvb2sgPSBleHBvcnRzLmFlczI1NkNiY0RlY3J5cHRIb29rID0gZXhwb3J0cy5hZXMyNTZDYmNFbmNyeXB0SG9vayA9IGV4cG9ydHMuc2lnblJzYVNoYTI1Nkhvb2sgPSBleHBvcnRzLm1ha2VIbWFjSG9vayA9IGV4cG9ydHMuc2hhMjU2SG9vayA9IGV4cG9ydHMucmFuZG9tSG9vayA9IGV4cG9ydHMubWFrZUFFUzI1Nkhvb2sgPSB2b2lkIDA7XG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKFwiY3J5cHRvXCIpO1xuZnVuY3Rpb24gbWFrZUFFUzI1Nkhvb2sobWV0aG9kLCBtb2RlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChrZXksIGl2LCBpbnB1dCwgb3V0cHV0KSB7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjaXBoZXIgPSBjcnlwdG9bbWV0aG9kXShtb2RlLCBrZXksIGl2KTtcbiAgICAgICAgICAgIGNpcGhlci5zZXRBdXRvUGFkZGluZyhmYWxzZSk7XG4gICAgICAgICAgICByZXN1bHQgPSBjaXBoZXIudXBkYXRlKGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsID0gY2lwaGVyLmZpbmFsKCk7XG4gICAgICAgICAgICBpZiAoZmluYWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IEJ1ZmZlci5jb25jYXQoW3Jlc3VsdCwgZmluYWxdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0LmNvcHkob3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGg7XG4gICAgfTtcbn1cbmV4cG9ydHMubWFrZUFFUzI1Nkhvb2sgPSBtYWtlQUVTMjU2SG9vaztcbmZ1bmN0aW9uIHJhbmRvbUhvb2soYnVmZmVyLCBjb3VudCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNyeXB0by5yYW5kb21GaWxsU3luYyhidWZmZXIsIDAsIGNvdW50KTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJldHVybiBjb3VudDtcbn1cbmV4cG9ydHMucmFuZG9tSG9vayA9IHJhbmRvbUhvb2s7XG5mdW5jdGlvbiBzaGEyNTZIb29rKGlucHV0LCBvdXRwdXQpIHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoaW5wdXQpLmRpZ2VzdCgpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgcmVzdWx0LmNvcHkob3V0cHV0KTtcbiAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aDtcbn1cbmV4cG9ydHMuc2hhMjU2SG9vayA9IHNoYTI1Nkhvb2s7XG5mdW5jdGlvbiBtYWtlSG1hY0hvb2soYWxnb3JpdGhtKSB7XG4gICAgcmV0dXJuIChrZXksIGlucHV0LCBvdXRwdXQpID0+IHtcbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGNyeXB0by5jcmVhdGVIbWFjKGFsZ29yaXRobSwga2V5KS51cGRhdGUoaW5wdXQpLmRpZ2VzdCgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQuY29weShvdXRwdXQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aDtcbiAgICB9O1xufVxuZXhwb3J0cy5tYWtlSG1hY0hvb2sgPSBtYWtlSG1hY0hvb2s7XG5mdW5jdGlvbiBzaWduUnNhU2hhMjU2SG9vayhrZXksIGlucHV0LCBvdXRwdXQpIHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNpZ25lciA9IGNyeXB0by5jcmVhdGVTaWduKCdzaGEyNTZXaXRoUlNBRW5jcnlwdGlvbicpO1xuICAgICAgICBjb25zdCBwcml2YXRlS2V5ID0gQnVmZmVyLmZyb20oYC0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxcbiR7a2V5LnRvU3RyaW5nKCdiYXNlNjQnKX1cXG4tLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tXFxuYCk7XG4gICAgICAgIHJlc3VsdCA9IHNpZ25lci51cGRhdGUoaW5wdXQpLmVuZCgpLnNpZ24ocHJpdmF0ZUtleSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZXN1bHQuY29weShvdXRwdXQpO1xuICAgIHJldHVybiByZXN1bHQubGVuZ3RoO1xufVxuZXhwb3J0cy5zaWduUnNhU2hhMjU2SG9vayA9IHNpZ25Sc2FTaGEyNTZIb29rO1xuZXhwb3J0cy5hZXMyNTZDYmNFbmNyeXB0SG9vayA9IG1ha2VBRVMyNTZIb29rKCdjcmVhdGVDaXBoZXJpdicsICdhZXMtMjU2LWNiYycpO1xuZXhwb3J0cy5hZXMyNTZDYmNEZWNyeXB0SG9vayA9IG1ha2VBRVMyNTZIb29rKCdjcmVhdGVEZWNpcGhlcml2JywgJ2Flcy0yNTYtY2JjJyk7XG5leHBvcnRzLmFlczI1NkN0ckVuY3J5cHRIb29rID0gbWFrZUFFUzI1Nkhvb2soJ2NyZWF0ZUNpcGhlcml2JywgJ2Flcy0yNTYtY3RyJyk7XG5leHBvcnRzLmFlczI1NkN0ckRlY3J5cHRIb29rID0gbWFrZUFFUzI1Nkhvb2soJ2NyZWF0ZURlY2lwaGVyaXYnLCAnYWVzLTI1Ni1jdHInKTtcbmV4cG9ydHMuaG1hY1NoYTUxMkhvb2sgPSBtYWtlSG1hY0hvb2soJ3NoYTUxMicpO1xuZXhwb3J0cy5obWFjU2hhMjU2SG9vayA9IG1ha2VIbWFjSG9vaygnc2hhMjU2Jyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcnlwdG9fY2FsbGJhY2tzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImhtYWNTaGEyNTZIb29rIiwiaG1hY1NoYTUxMkhvb2siLCJhZXMyNTZDdHJEZWNyeXB0SG9vayIsImFlczI1NkN0ckVuY3J5cHRIb29rIiwiYWVzMjU2Q2JjRGVjcnlwdEhvb2siLCJhZXMyNTZDYmNFbmNyeXB0SG9vayIsInNpZ25Sc2FTaGEyNTZIb29rIiwibWFrZUhtYWNIb29rIiwic2hhMjU2SG9vayIsInJhbmRvbUhvb2siLCJtYWtlQUVTMjU2SG9vayIsImNyeXB0byIsInJlcXVpcmUiLCJtZXRob2QiLCJtb2RlIiwia2V5IiwiaXYiLCJpbnB1dCIsIm91dHB1dCIsInJlc3VsdCIsImNpcGhlciIsInNldEF1dG9QYWRkaW5nIiwidXBkYXRlIiwiZmluYWwiLCJsZW5ndGgiLCJCdWZmZXIiLCJjb25jYXQiLCJlIiwiY29weSIsImJ1ZmZlciIsImNvdW50IiwicmFuZG9tRmlsbFN5bmMiLCJjcmVhdGVIYXNoIiwiZGlnZXN0IiwiYWxnb3JpdGhtIiwiY3JlYXRlSG1hYyIsInNpZ25lciIsImNyZWF0ZVNpZ24iLCJwcml2YXRlS2V5IiwiZnJvbSIsInRvU3RyaW5nIiwiZW5kIiwic2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/crypto_callbacks.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/errors.js":
/*!*******************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/errors.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoCryptKMSRequestNetworkTimeoutError = exports.MongoCryptAzureKMSRequestError = exports.MongoCryptCreateEncryptedCollectionError = exports.MongoCryptCreateDataKeyError = exports.MongoCryptInvalidArgumentError = exports.MongoCryptError = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/**\n * @public\n * An error indicating that something went wrong specifically with MongoDB Client Encryption\n */ class MongoCryptError extends error_1.MongoError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, options = {}){\n        super(message, options);\n    }\n    get name() {\n        return \"MongoCryptError\";\n    }\n}\nexports.MongoCryptError = MongoCryptError;\n/**\n * @public\n *\n * An error indicating an invalid argument was provided to an encryption API.\n */ class MongoCryptInvalidArgumentError extends MongoCryptError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoCryptInvalidArgumentError\";\n    }\n}\nexports.MongoCryptInvalidArgumentError = MongoCryptInvalidArgumentError;\n/**\n * @public\n * An error indicating that `ClientEncryption.createEncryptedCollection()` failed to create data keys\n */ class MongoCryptCreateDataKeyError extends MongoCryptError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(encryptedFields, { cause }){\n        super(`Unable to complete creating data keys: ${cause.message}`, {\n            cause\n        });\n        this.encryptedFields = encryptedFields;\n    }\n    get name() {\n        return \"MongoCryptCreateDataKeyError\";\n    }\n}\nexports.MongoCryptCreateDataKeyError = MongoCryptCreateDataKeyError;\n/**\n * @public\n * An error indicating that `ClientEncryption.createEncryptedCollection()` failed to create a collection\n */ class MongoCryptCreateEncryptedCollectionError extends MongoCryptError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(encryptedFields, { cause }){\n        super(`Unable to create collection: ${cause.message}`, {\n            cause\n        });\n        this.encryptedFields = encryptedFields;\n    }\n    get name() {\n        return \"MongoCryptCreateEncryptedCollectionError\";\n    }\n}\nexports.MongoCryptCreateEncryptedCollectionError = MongoCryptCreateEncryptedCollectionError;\n/**\n * @public\n * An error indicating that mongodb-client-encryption failed to auto-refresh Azure KMS credentials.\n */ class MongoCryptAzureKMSRequestError extends MongoCryptError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, body){\n        super(message);\n        this.body = body;\n    }\n    get name() {\n        return \"MongoCryptAzureKMSRequestError\";\n    }\n}\nexports.MongoCryptAzureKMSRequestError = MongoCryptAzureKMSRequestError;\n/** @public */ class MongoCryptKMSRequestNetworkTimeoutError extends MongoCryptError {\n    get name() {\n        return \"MongoCryptKMSRequestNetworkTimeoutError\";\n    }\n}\nexports.MongoCryptKMSRequestNetworkTimeoutError = MongoCryptKMSRequestNetworkTimeoutError; //# sourceMappingURL=errors.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9lcnJvcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELCtDQUErQyxHQUFHQSxzQ0FBc0MsR0FBR0EsZ0RBQWdELEdBQUdBLG9DQUFvQyxHQUFHQSxzQ0FBc0MsR0FBR0EsdUJBQXVCLEdBQUcsS0FBSztBQUM3UCxNQUFNUSxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQzs7O0NBR0MsR0FDRCxNQUFNRix3QkFBd0JDLFFBQVFFLFVBQVU7SUFDNUM7Ozs7Ozs7Ozs7TUFVRSxHQUNGQyxZQUFZQyxPQUFPLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDL0IsS0FBSyxDQUFDRCxTQUFTQztJQUNuQjtJQUNBLElBQUlDLE9BQU87UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBZCx1QkFBdUIsR0FBR087QUFDMUI7Ozs7Q0FJQyxHQUNELE1BQU1ELHVDQUF1Q0M7SUFDekM7Ozs7Ozs7Ozs7TUFVRSxHQUNGSSxZQUFZQyxPQUFPLENBQUU7UUFDakIsS0FBSyxDQUFDQTtJQUNWO0lBQ0EsSUFBSUUsT0FBTztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0FkLHNDQUFzQyxHQUFHTTtBQUN6Qzs7O0NBR0MsR0FDRCxNQUFNRCxxQ0FBcUNFO0lBQ3ZDOzs7Ozs7Ozs7O01BVUUsR0FDRkksWUFBWUksZUFBZSxFQUFFLEVBQUVDLEtBQUssRUFBRSxDQUFFO1FBQ3BDLEtBQUssQ0FBQyxDQUFDLHVDQUF1QyxFQUFFQSxNQUFNSixPQUFPLENBQUMsQ0FBQyxFQUFFO1lBQUVJO1FBQU07UUFDekUsSUFBSSxDQUFDRCxlQUFlLEdBQUdBO0lBQzNCO0lBQ0EsSUFBSUQsT0FBTztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0FkLG9DQUFvQyxHQUFHSztBQUN2Qzs7O0NBR0MsR0FDRCxNQUFNRCxpREFBaURHO0lBQ25EOzs7Ozs7Ozs7O01BVUUsR0FDRkksWUFBWUksZUFBZSxFQUFFLEVBQUVDLEtBQUssRUFBRSxDQUFFO1FBQ3BDLEtBQUssQ0FBQyxDQUFDLDZCQUE2QixFQUFFQSxNQUFNSixPQUFPLENBQUMsQ0FBQyxFQUFFO1lBQUVJO1FBQU07UUFDL0QsSUFBSSxDQUFDRCxlQUFlLEdBQUdBO0lBQzNCO0lBQ0EsSUFBSUQsT0FBTztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0FkLGdEQUFnRCxHQUFHSTtBQUNuRDs7O0NBR0MsR0FDRCxNQUFNRCx1Q0FBdUNJO0lBQ3pDOzs7Ozs7Ozs7O01BVUUsR0FDRkksWUFBWUMsT0FBTyxFQUFFSyxJQUFJLENBQUU7UUFDdkIsS0FBSyxDQUFDTDtRQUNOLElBQUksQ0FBQ0ssSUFBSSxHQUFHQTtJQUNoQjtJQUNBLElBQUlILE9BQU87UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBZCxzQ0FBc0MsR0FBR0c7QUFDekMsWUFBWSxHQUNaLE1BQU1ELGdEQUFnREs7SUFDbEQsSUFBSU8sT0FBTztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0FkLCtDQUErQyxHQUFHRSx5Q0FDbEQsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbGllbnQtc2lkZS1lbmNyeXB0aW9uL2Vycm9ycy5qcz85NTY1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Nb25nb0NyeXB0S01TUmVxdWVzdE5ldHdvcmtUaW1lb3V0RXJyb3IgPSBleHBvcnRzLk1vbmdvQ3J5cHRBenVyZUtNU1JlcXVlc3RFcnJvciA9IGV4cG9ydHMuTW9uZ29DcnlwdENyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb25FcnJvciA9IGV4cG9ydHMuTW9uZ29DcnlwdENyZWF0ZURhdGFLZXlFcnJvciA9IGV4cG9ydHMuTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yID0gZXhwb3J0cy5Nb25nb0NyeXB0RXJyb3IgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuLyoqXG4gKiBAcHVibGljXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIHRoYXQgc29tZXRoaW5nIHdlbnQgd3Jvbmcgc3BlY2lmaWNhbGx5IHdpdGggTW9uZ29EQiBDbGllbnQgRW5jcnlwdGlvblxuICovXG5jbGFzcyBNb25nb0NyeXB0RXJyb3IgZXh0ZW5kcyBlcnJvcl8xLk1vbmdvRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQ3J5cHRFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NyeXB0RXJyb3IgPSBNb25nb0NyeXB0RXJyb3I7XG4vKipcbiAqIEBwdWJsaWNcbiAqXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIGFuIGludmFsaWQgYXJndW1lbnQgd2FzIHByb3ZpZGVkIHRvIGFuIGVuY3J5cHRpb24gQVBJLlxuICovXG5jbGFzcyBNb25nb0NyeXB0SW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBNb25nb0NyeXB0RXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0NyeXB0SW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yID0gTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yO1xuLyoqXG4gKiBAcHVibGljXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIHRoYXQgYENsaWVudEVuY3J5cHRpb24uY3JlYXRlRW5jcnlwdGVkQ29sbGVjdGlvbigpYCBmYWlsZWQgdG8gY3JlYXRlIGRhdGEga2V5c1xuICovXG5jbGFzcyBNb25nb0NyeXB0Q3JlYXRlRGF0YUtleUVycm9yIGV4dGVuZHMgTW9uZ29DcnlwdEVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IoZW5jcnlwdGVkRmllbGRzLCB7IGNhdXNlIH0pIHtcbiAgICAgICAgc3VwZXIoYFVuYWJsZSB0byBjb21wbGV0ZSBjcmVhdGluZyBkYXRhIGtleXM6ICR7Y2F1c2UubWVzc2FnZX1gLCB7IGNhdXNlIH0pO1xuICAgICAgICB0aGlzLmVuY3J5cHRlZEZpZWxkcyA9IGVuY3J5cHRlZEZpZWxkcztcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29DcnlwdENyZWF0ZURhdGFLZXlFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NyeXB0Q3JlYXRlRGF0YUtleUVycm9yID0gTW9uZ29DcnlwdENyZWF0ZURhdGFLZXlFcnJvcjtcbi8qKlxuICogQHB1YmxpY1xuICogQW4gZXJyb3IgaW5kaWNhdGluZyB0aGF0IGBDbGllbnRFbmNyeXB0aW9uLmNyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb24oKWAgZmFpbGVkIHRvIGNyZWF0ZSBhIGNvbGxlY3Rpb25cbiAqL1xuY2xhc3MgTW9uZ29DcnlwdENyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb25FcnJvciBleHRlbmRzIE1vbmdvQ3J5cHRFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKGVuY3J5cHRlZEZpZWxkcywgeyBjYXVzZSB9KSB7XG4gICAgICAgIHN1cGVyKGBVbmFibGUgdG8gY3JlYXRlIGNvbGxlY3Rpb246ICR7Y2F1c2UubWVzc2FnZX1gLCB7IGNhdXNlIH0pO1xuICAgICAgICB0aGlzLmVuY3J5cHRlZEZpZWxkcyA9IGVuY3J5cHRlZEZpZWxkcztcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29DcnlwdENyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb25FcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NyeXB0Q3JlYXRlRW5jcnlwdGVkQ29sbGVjdGlvbkVycm9yID0gTW9uZ29DcnlwdENyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb25FcnJvcjtcbi8qKlxuICogQHB1YmxpY1xuICogQW4gZXJyb3IgaW5kaWNhdGluZyB0aGF0IG1vbmdvZGItY2xpZW50LWVuY3J5cHRpb24gZmFpbGVkIHRvIGF1dG8tcmVmcmVzaCBBenVyZSBLTVMgY3JlZGVudGlhbHMuXG4gKi9cbmNsYXNzIE1vbmdvQ3J5cHRBenVyZUtNU1JlcXVlc3RFcnJvciBleHRlbmRzIE1vbmdvQ3J5cHRFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGJvZHkpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQ3J5cHRBenVyZUtNU1JlcXVlc3RFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NyeXB0QXp1cmVLTVNSZXF1ZXN0RXJyb3IgPSBNb25nb0NyeXB0QXp1cmVLTVNSZXF1ZXN0RXJyb3I7XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgTW9uZ29DcnlwdEtNU1JlcXVlc3ROZXR3b3JrVGltZW91dEVycm9yIGV4dGVuZHMgTW9uZ29DcnlwdEVycm9yIHtcbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0NyeXB0S01TUmVxdWVzdE5ldHdvcmtUaW1lb3V0RXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29DcnlwdEtNU1JlcXVlc3ROZXR3b3JrVGltZW91dEVycm9yID0gTW9uZ29DcnlwdEtNU1JlcXVlc3ROZXR3b3JrVGltZW91dEVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1vbmdvQ3J5cHRLTVNSZXF1ZXN0TmV0d29ya1RpbWVvdXRFcnJvciIsIk1vbmdvQ3J5cHRBenVyZUtNU1JlcXVlc3RFcnJvciIsIk1vbmdvQ3J5cHRDcmVhdGVFbmNyeXB0ZWRDb2xsZWN0aW9uRXJyb3IiLCJNb25nb0NyeXB0Q3JlYXRlRGF0YUtleUVycm9yIiwiTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yIiwiTW9uZ29DcnlwdEVycm9yIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJNb25nb0Vycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwib3B0aW9ucyIsIm5hbWUiLCJlbmNyeXB0ZWRGaWVsZHMiLCJjYXVzZSIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/mongocryptd_manager.js":
/*!********************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/mongocryptd_manager.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongocryptdManager = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/**\n * @internal\n * An internal class that handles spawning a mongocryptd.\n */ class MongocryptdManager {\n    constructor(extraOptions = {}){\n        this.uri = typeof extraOptions.mongocryptdURI === \"string\" && extraOptions.mongocryptdURI.length > 0 ? extraOptions.mongocryptdURI : MongocryptdManager.DEFAULT_MONGOCRYPTD_URI;\n        this.bypassSpawn = !!extraOptions.mongocryptdBypassSpawn;\n        this.spawnPath = extraOptions.mongocryptdSpawnPath || \"\";\n        this.spawnArgs = [];\n        if (Array.isArray(extraOptions.mongocryptdSpawnArgs)) {\n            this.spawnArgs = this.spawnArgs.concat(extraOptions.mongocryptdSpawnArgs);\n        }\n        if (this.spawnArgs.filter((arg)=>typeof arg === \"string\").every((arg)=>arg.indexOf(\"--idleShutdownTimeoutSecs\") < 0)) {\n            this.spawnArgs.push(\"--idleShutdownTimeoutSecs\", \"60\");\n        }\n    }\n    /**\n     * Will check to see if a mongocryptd is up. If it is not up, it will attempt\n     * to spawn a mongocryptd in a detached process, and then wait for it to be up.\n     */ async spawn() {\n        const cmdName = this.spawnPath || \"mongocryptd\";\n        // eslint-disable-next-line @typescript-eslint/no-var-requires\n        const { spawn } = __webpack_require__(/*! child_process */ \"child_process\");\n        // Spawned with stdio: ignore and detached: true\n        // to ensure child can outlive parent.\n        this._child = spawn(cmdName, this.spawnArgs, {\n            stdio: \"ignore\",\n            detached: true\n        });\n        this._child.on(\"error\", ()=>{\n        // From the FLE spec:\n        // \"The stdout and stderr of the spawned process MUST not be exposed in the driver\n        // (e.g. redirect to /dev/null). Users can pass the argument --logpath to\n        // extraOptions.mongocryptdSpawnArgs if they need to inspect mongocryptd logs.\n        // If spawning is necessary, the driver MUST spawn mongocryptd whenever server\n        // selection on the MongoClient to mongocryptd fails. If the MongoClient fails to\n        // connect after spawning, the server selection error is propagated to the user.\"\n        // The AutoEncrypter and MongoCryptdManager should work together to spawn\n        // mongocryptd whenever necessary.  Additionally, the `mongocryptd` intentionally\n        // shuts down after 60s and gets respawned when necessary.  We rely on server\n        // selection timeouts when connecting to the `mongocryptd` to inform users that something\n        // has been configured incorrectly.  For those reasons, we suppress stderr from\n        // the `mongocryptd` process and immediately unref the process.\n        });\n        // unref child to remove handle from event loop\n        this._child.unref();\n    }\n    /**\n     * @returns the result of `fn` or rejects with an error.\n     */ async withRespawn(fn) {\n        try {\n            const result = await fn();\n            return result;\n        } catch (err) {\n            // If we are not bypassing spawning, then we should retry once on a MongoTimeoutError (server selection error)\n            const shouldSpawn = err instanceof error_1.MongoNetworkTimeoutError && !this.bypassSpawn;\n            if (!shouldSpawn) {\n                throw err;\n            }\n        }\n        await this.spawn();\n        const result = await fn();\n        return result;\n    }\n}\nMongocryptdManager.DEFAULT_MONGOCRYPTD_URI = \"mongodb://localhost:27020\";\nexports.MongocryptdManager = MongocryptdManager; //# sourceMappingURL=mongocryptd_manager.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9tb25nb2NyeXB0ZF9tYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDOzs7Q0FHQyxHQUNELE1BQU1GO0lBQ0ZHLFlBQVlDLGVBQWUsQ0FBQyxDQUFDLENBQUU7UUFDM0IsSUFBSSxDQUFDQyxHQUFHLEdBQ0osT0FBT0QsYUFBYUUsY0FBYyxLQUFLLFlBQVlGLGFBQWFFLGNBQWMsQ0FBQ0MsTUFBTSxHQUFHLElBQ2xGSCxhQUFhRSxjQUFjLEdBQzNCTixtQkFBbUJRLHVCQUF1QjtRQUNwRCxJQUFJLENBQUNDLFdBQVcsR0FBRyxDQUFDLENBQUNMLGFBQWFNLHNCQUFzQjtRQUN4RCxJQUFJLENBQUNDLFNBQVMsR0FBR1AsYUFBYVEsb0JBQW9CLElBQUk7UUFDdEQsSUFBSSxDQUFDQyxTQUFTLEdBQUcsRUFBRTtRQUNuQixJQUFJQyxNQUFNQyxPQUFPLENBQUNYLGFBQWFZLG9CQUFvQixHQUFHO1lBQ2xELElBQUksQ0FBQ0gsU0FBUyxHQUFHLElBQUksQ0FBQ0EsU0FBUyxDQUFDSSxNQUFNLENBQUNiLGFBQWFZLG9CQUFvQjtRQUM1RTtRQUNBLElBQUksSUFBSSxDQUFDSCxTQUFTLENBQ2JLLE1BQU0sQ0FBQ0MsQ0FBQUEsTUFBTyxPQUFPQSxRQUFRLFVBQzdCQyxLQUFLLENBQUNELENBQUFBLE1BQU9BLElBQUlFLE9BQU8sQ0FBQywrQkFBK0IsSUFBSTtZQUM3RCxJQUFJLENBQUNSLFNBQVMsQ0FBQ1MsSUFBSSxDQUFDLDZCQUE2QjtRQUNyRDtJQUNKO0lBQ0E7OztLQUdDLEdBQ0QsTUFBTUMsUUFBUTtRQUNWLE1BQU1DLFVBQVUsSUFBSSxDQUFDYixTQUFTLElBQUk7UUFDbEMsOERBQThEO1FBQzlELE1BQU0sRUFBRVksS0FBSyxFQUFFLEdBQUdyQixtQkFBT0EsQ0FBQztRQUMxQixnREFBZ0Q7UUFDaEQsc0NBQXNDO1FBQ3RDLElBQUksQ0FBQ3VCLE1BQU0sR0FBR0YsTUFBTUMsU0FBUyxJQUFJLENBQUNYLFNBQVMsRUFBRTtZQUN6Q2EsT0FBTztZQUNQQyxVQUFVO1FBQ2Q7UUFDQSxJQUFJLENBQUNGLE1BQU0sQ0FBQ0csRUFBRSxDQUFDLFNBQVM7UUFDcEIscUJBQXFCO1FBQ3JCLGtGQUFrRjtRQUNsRix5RUFBeUU7UUFDekUsOEVBQThFO1FBQzlFLDhFQUE4RTtRQUM5RSxpRkFBaUY7UUFDakYsaUZBQWlGO1FBQ2pGLHlFQUF5RTtRQUN6RSxpRkFBaUY7UUFDakYsNkVBQTZFO1FBQzdFLHlGQUF5RjtRQUN6RiwrRUFBK0U7UUFDL0UsK0RBQStEO1FBQ25FO1FBQ0EsK0NBQStDO1FBQy9DLElBQUksQ0FBQ0gsTUFBTSxDQUFDSSxLQUFLO0lBQ3JCO0lBQ0E7O0tBRUMsR0FDRCxNQUFNQyxZQUFZQyxFQUFFLEVBQUU7UUFDbEIsSUFBSTtZQUNBLE1BQU1DLFNBQVMsTUFBTUQ7WUFDckIsT0FBT0M7UUFDWCxFQUNBLE9BQU9DLEtBQUs7WUFDUiw4R0FBOEc7WUFDOUcsTUFBTUMsY0FBY0QsZUFBZWhDLFFBQVFrQyx3QkFBd0IsSUFBSSxDQUFDLElBQUksQ0FBQzFCLFdBQVc7WUFDeEYsSUFBSSxDQUFDeUIsYUFBYTtnQkFDZCxNQUFNRDtZQUNWO1FBQ0o7UUFDQSxNQUFNLElBQUksQ0FBQ1YsS0FBSztRQUNoQixNQUFNUyxTQUFTLE1BQU1EO1FBQ3JCLE9BQU9DO0lBQ1g7QUFDSjtBQUNBaEMsbUJBQW1CUSx1QkFBdUIsR0FBRztBQUM3Q1YsMEJBQTBCLEdBQUdFLG9CQUM3QiwrQ0FBK0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NsaWVudC1zaWRlLWVuY3J5cHRpb24vbW9uZ29jcnlwdGRfbWFuYWdlci5qcz81YzIxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Nb25nb2NyeXB0ZE1hbmFnZXIgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEFuIGludGVybmFsIGNsYXNzIHRoYXQgaGFuZGxlcyBzcGF3bmluZyBhIG1vbmdvY3J5cHRkLlxuICovXG5jbGFzcyBNb25nb2NyeXB0ZE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKGV4dHJhT3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMudXJpID1cbiAgICAgICAgICAgIHR5cGVvZiBleHRyYU9wdGlvbnMubW9uZ29jcnlwdGRVUkkgPT09ICdzdHJpbmcnICYmIGV4dHJhT3B0aW9ucy5tb25nb2NyeXB0ZFVSSS5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBleHRyYU9wdGlvbnMubW9uZ29jcnlwdGRVUklcbiAgICAgICAgICAgICAgICA6IE1vbmdvY3J5cHRkTWFuYWdlci5ERUZBVUxUX01PTkdPQ1JZUFREX1VSSTtcbiAgICAgICAgdGhpcy5ieXBhc3NTcGF3biA9ICEhZXh0cmFPcHRpb25zLm1vbmdvY3J5cHRkQnlwYXNzU3Bhd247XG4gICAgICAgIHRoaXMuc3Bhd25QYXRoID0gZXh0cmFPcHRpb25zLm1vbmdvY3J5cHRkU3Bhd25QYXRoIHx8ICcnO1xuICAgICAgICB0aGlzLnNwYXduQXJncyA9IFtdO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShleHRyYU9wdGlvbnMubW9uZ29jcnlwdGRTcGF3bkFyZ3MpKSB7XG4gICAgICAgICAgICB0aGlzLnNwYXduQXJncyA9IHRoaXMuc3Bhd25BcmdzLmNvbmNhdChleHRyYU9wdGlvbnMubW9uZ29jcnlwdGRTcGF3bkFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNwYXduQXJnc1xuICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAuZXZlcnkoYXJnID0+IGFyZy5pbmRleE9mKCctLWlkbGVTaHV0ZG93blRpbWVvdXRTZWNzJykgPCAwKSkge1xuICAgICAgICAgICAgdGhpcy5zcGF3bkFyZ3MucHVzaCgnLS1pZGxlU2h1dGRvd25UaW1lb3V0U2VjcycsICc2MCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdpbGwgY2hlY2sgdG8gc2VlIGlmIGEgbW9uZ29jcnlwdGQgaXMgdXAuIElmIGl0IGlzIG5vdCB1cCwgaXQgd2lsbCBhdHRlbXB0XG4gICAgICogdG8gc3Bhd24gYSBtb25nb2NyeXB0ZCBpbiBhIGRldGFjaGVkIHByb2Nlc3MsIGFuZCB0aGVuIHdhaXQgZm9yIGl0IHRvIGJlIHVwLlxuICAgICAqL1xuICAgIGFzeW5jIHNwYXduKCkge1xuICAgICAgICBjb25zdCBjbWROYW1lID0gdGhpcy5zcGF3blBhdGggfHwgJ21vbmdvY3J5cHRkJztcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXNcbiAgICAgICAgY29uc3QgeyBzcGF3biB9ID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuICAgICAgICAvLyBTcGF3bmVkIHdpdGggc3RkaW86IGlnbm9yZSBhbmQgZGV0YWNoZWQ6IHRydWVcbiAgICAgICAgLy8gdG8gZW5zdXJlIGNoaWxkIGNhbiBvdXRsaXZlIHBhcmVudC5cbiAgICAgICAgdGhpcy5fY2hpbGQgPSBzcGF3bihjbWROYW1lLCB0aGlzLnNwYXduQXJncywge1xuICAgICAgICAgICAgc3RkaW86ICdpZ25vcmUnLFxuICAgICAgICAgICAgZGV0YWNoZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2NoaWxkLm9uKCdlcnJvcicsICgpID0+IHtcbiAgICAgICAgICAgIC8vIEZyb20gdGhlIEZMRSBzcGVjOlxuICAgICAgICAgICAgLy8gXCJUaGUgc3Rkb3V0IGFuZCBzdGRlcnIgb2YgdGhlIHNwYXduZWQgcHJvY2VzcyBNVVNUIG5vdCBiZSBleHBvc2VkIGluIHRoZSBkcml2ZXJcbiAgICAgICAgICAgIC8vIChlLmcuIHJlZGlyZWN0IHRvIC9kZXYvbnVsbCkuIFVzZXJzIGNhbiBwYXNzIHRoZSBhcmd1bWVudCAtLWxvZ3BhdGggdG9cbiAgICAgICAgICAgIC8vIGV4dHJhT3B0aW9ucy5tb25nb2NyeXB0ZFNwYXduQXJncyBpZiB0aGV5IG5lZWQgdG8gaW5zcGVjdCBtb25nb2NyeXB0ZCBsb2dzLlxuICAgICAgICAgICAgLy8gSWYgc3Bhd25pbmcgaXMgbmVjZXNzYXJ5LCB0aGUgZHJpdmVyIE1VU1Qgc3Bhd24gbW9uZ29jcnlwdGQgd2hlbmV2ZXIgc2VydmVyXG4gICAgICAgICAgICAvLyBzZWxlY3Rpb24gb24gdGhlIE1vbmdvQ2xpZW50IHRvIG1vbmdvY3J5cHRkIGZhaWxzLiBJZiB0aGUgTW9uZ29DbGllbnQgZmFpbHMgdG9cbiAgICAgICAgICAgIC8vIGNvbm5lY3QgYWZ0ZXIgc3Bhd25pbmcsIHRoZSBzZXJ2ZXIgc2VsZWN0aW9uIGVycm9yIGlzIHByb3BhZ2F0ZWQgdG8gdGhlIHVzZXIuXCJcbiAgICAgICAgICAgIC8vIFRoZSBBdXRvRW5jcnlwdGVyIGFuZCBNb25nb0NyeXB0ZE1hbmFnZXIgc2hvdWxkIHdvcmsgdG9nZXRoZXIgdG8gc3Bhd25cbiAgICAgICAgICAgIC8vIG1vbmdvY3J5cHRkIHdoZW5ldmVyIG5lY2Vzc2FyeS4gIEFkZGl0aW9uYWxseSwgdGhlIGBtb25nb2NyeXB0ZGAgaW50ZW50aW9uYWxseVxuICAgICAgICAgICAgLy8gc2h1dHMgZG93biBhZnRlciA2MHMgYW5kIGdldHMgcmVzcGF3bmVkIHdoZW4gbmVjZXNzYXJ5LiAgV2UgcmVseSBvbiBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIHNlbGVjdGlvbiB0aW1lb3V0cyB3aGVuIGNvbm5lY3RpbmcgdG8gdGhlIGBtb25nb2NyeXB0ZGAgdG8gaW5mb3JtIHVzZXJzIHRoYXQgc29tZXRoaW5nXG4gICAgICAgICAgICAvLyBoYXMgYmVlbiBjb25maWd1cmVkIGluY29ycmVjdGx5LiAgRm9yIHRob3NlIHJlYXNvbnMsIHdlIHN1cHByZXNzIHN0ZGVyciBmcm9tXG4gICAgICAgICAgICAvLyB0aGUgYG1vbmdvY3J5cHRkYCBwcm9jZXNzIGFuZCBpbW1lZGlhdGVseSB1bnJlZiB0aGUgcHJvY2Vzcy5cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHVucmVmIGNoaWxkIHRvIHJlbW92ZSBoYW5kbGUgZnJvbSBldmVudCBsb29wXG4gICAgICAgIHRoaXMuX2NoaWxkLnVucmVmKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHRoZSByZXN1bHQgb2YgYGZuYCBvciByZWplY3RzIHdpdGggYW4gZXJyb3IuXG4gICAgICovXG4gICAgYXN5bmMgd2l0aFJlc3Bhd24oZm4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBub3QgYnlwYXNzaW5nIHNwYXduaW5nLCB0aGVuIHdlIHNob3VsZCByZXRyeSBvbmNlIG9uIGEgTW9uZ29UaW1lb3V0RXJyb3IgKHNlcnZlciBzZWxlY3Rpb24gZXJyb3IpXG4gICAgICAgICAgICBjb25zdCBzaG91bGRTcGF3biA9IGVyciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29OZXR3b3JrVGltZW91dEVycm9yICYmICF0aGlzLmJ5cGFzc1NwYXduO1xuICAgICAgICAgICAgaWYgKCFzaG91bGRTcGF3bikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNwYXduKCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuTW9uZ29jcnlwdGRNYW5hZ2VyLkRFRkFVTFRfTU9OR09DUllQVERfVVJJID0gJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMjAnO1xuZXhwb3J0cy5Nb25nb2NyeXB0ZE1hbmFnZXIgPSBNb25nb2NyeXB0ZE1hbmFnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb25nb2NyeXB0ZF9tYW5hZ2VyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1vbmdvY3J5cHRkTWFuYWdlciIsImVycm9yXzEiLCJyZXF1aXJlIiwiY29uc3RydWN0b3IiLCJleHRyYU9wdGlvbnMiLCJ1cmkiLCJtb25nb2NyeXB0ZFVSSSIsImxlbmd0aCIsIkRFRkFVTFRfTU9OR09DUllQVERfVVJJIiwiYnlwYXNzU3Bhd24iLCJtb25nb2NyeXB0ZEJ5cGFzc1NwYXduIiwic3Bhd25QYXRoIiwibW9uZ29jcnlwdGRTcGF3blBhdGgiLCJzcGF3bkFyZ3MiLCJBcnJheSIsImlzQXJyYXkiLCJtb25nb2NyeXB0ZFNwYXduQXJncyIsImNvbmNhdCIsImZpbHRlciIsImFyZyIsImV2ZXJ5IiwiaW5kZXhPZiIsInB1c2giLCJzcGF3biIsImNtZE5hbWUiLCJfY2hpbGQiLCJzdGRpbyIsImRldGFjaGVkIiwib24iLCJ1bnJlZiIsIndpdGhSZXNwYXduIiwiZm4iLCJyZXN1bHQiLCJlcnIiLCJzaG91bGRTcGF3biIsIk1vbmdvTmV0d29ya1RpbWVvdXRFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/mongocryptd_manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/aws.js":
/*!**************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/providers/aws.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.loadAWSCredentials = void 0;\nconst deps_1 = __webpack_require__(/*! ../../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\n/**\n * @internal\n */ async function loadAWSCredentials(kmsProviders) {\n    const credentialProvider = (0, deps_1.getAwsCredentialProvider)();\n    if (\"kModuleError\" in credentialProvider) {\n        return kmsProviders;\n    }\n    const { fromNodeProviderChain } = credentialProvider;\n    const provider = fromNodeProviderChain();\n    // The state machine is the only place calling this so it will\n    // catch if there is a rejection here.\n    const aws = await provider();\n    return {\n        ...kmsProviders,\n        aws\n    };\n}\nexports.loadAWSCredentials = loadAWSCredentials; //# sourceMappingURL=aws.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9wcm92aWRlcnMvYXdzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xDLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLDREQUFZO0FBQ25DOztDQUVDLEdBQ0QsZUFBZUYsbUJBQW1CRyxZQUFZO0lBQzFDLE1BQU1DLHFCQUFxQixDQUFDLEdBQUdILE9BQU9JLHdCQUF3QjtJQUM5RCxJQUFJLGtCQUFrQkQsb0JBQW9CO1FBQ3RDLE9BQU9EO0lBQ1g7SUFDQSxNQUFNLEVBQUVHLHFCQUFxQixFQUFFLEdBQUdGO0lBQ2xDLE1BQU1HLFdBQVdEO0lBQ2pCLDhEQUE4RDtJQUM5RCxzQ0FBc0M7SUFDdEMsTUFBTUUsTUFBTSxNQUFNRDtJQUNsQixPQUFPO1FBQUUsR0FBR0osWUFBWTtRQUFFSztJQUFJO0FBQ2xDO0FBQ0FWLDBCQUEwQixHQUFHRSxvQkFDN0IsK0JBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbGllbnQtc2lkZS1lbmNyeXB0aW9uL3Byb3ZpZGVycy9hd3MuanM/NDAzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubG9hZEFXU0NyZWRlbnRpYWxzID0gdm9pZCAwO1xuY29uc3QgZGVwc18xID0gcmVxdWlyZShcIi4uLy4uL2RlcHNcIik7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5hc3luYyBmdW5jdGlvbiBsb2FkQVdTQ3JlZGVudGlhbHMoa21zUHJvdmlkZXJzKSB7XG4gICAgY29uc3QgY3JlZGVudGlhbFByb3ZpZGVyID0gKDAsIGRlcHNfMS5nZXRBd3NDcmVkZW50aWFsUHJvdmlkZXIpKCk7XG4gICAgaWYgKCdrTW9kdWxlRXJyb3InIGluIGNyZWRlbnRpYWxQcm92aWRlcikge1xuICAgICAgICByZXR1cm4ga21zUHJvdmlkZXJzO1xuICAgIH1cbiAgICBjb25zdCB7IGZyb21Ob2RlUHJvdmlkZXJDaGFpbiB9ID0gY3JlZGVudGlhbFByb3ZpZGVyO1xuICAgIGNvbnN0IHByb3ZpZGVyID0gZnJvbU5vZGVQcm92aWRlckNoYWluKCk7XG4gICAgLy8gVGhlIHN0YXRlIG1hY2hpbmUgaXMgdGhlIG9ubHkgcGxhY2UgY2FsbGluZyB0aGlzIHNvIGl0IHdpbGxcbiAgICAvLyBjYXRjaCBpZiB0aGVyZSBpcyBhIHJlamVjdGlvbiBoZXJlLlxuICAgIGNvbnN0IGF3cyA9IGF3YWl0IHByb3ZpZGVyKCk7XG4gICAgcmV0dXJuIHsgLi4ua21zUHJvdmlkZXJzLCBhd3MgfTtcbn1cbmV4cG9ydHMubG9hZEFXU0NyZWRlbnRpYWxzID0gbG9hZEFXU0NyZWRlbnRpYWxzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXdzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImxvYWRBV1NDcmVkZW50aWFscyIsImRlcHNfMSIsInJlcXVpcmUiLCJrbXNQcm92aWRlcnMiLCJjcmVkZW50aWFsUHJvdmlkZXIiLCJnZXRBd3NDcmVkZW50aWFsUHJvdmlkZXIiLCJmcm9tTm9kZVByb3ZpZGVyQ2hhaW4iLCJwcm92aWRlciIsImF3cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/aws.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/azure.js":
/*!****************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/providers/azure.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.loadAzureCredentials = exports.fetchAzureKMSToken = exports.prepareRequest = exports.tokenCache = exports.AzureCredentialCache = void 0;\nconst errors_1 = __webpack_require__(/*! ../errors */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/errors.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/utils.js\");\nconst MINIMUM_TOKEN_REFRESH_IN_MILLISECONDS = 6000;\n/**\n * @internal\n */ class AzureCredentialCache {\n    constructor(){\n        this.cachedToken = null;\n    }\n    async getToken() {\n        if (this.cachedToken == null || this.needsRefresh(this.cachedToken)) {\n            this.cachedToken = await this._getToken();\n        }\n        return {\n            accessToken: this.cachedToken.accessToken\n        };\n    }\n    needsRefresh(token) {\n        const timeUntilExpirationMS = token.expiresOnTimestamp - Date.now();\n        return timeUntilExpirationMS <= MINIMUM_TOKEN_REFRESH_IN_MILLISECONDS;\n    }\n    /**\n     * exposed for testing\n     */ resetCache() {\n        this.cachedToken = null;\n    }\n    /**\n     * exposed for testing\n     */ _getToken() {\n        return fetchAzureKMSToken();\n    }\n}\nexports.AzureCredentialCache = AzureCredentialCache;\n/** @internal */ exports.tokenCache = new AzureCredentialCache();\n/** @internal */ async function parseResponse(response) {\n    const { status, body: rawBody } = response;\n    const body = (()=>{\n        try {\n            return JSON.parse(rawBody);\n        } catch  {\n            throw new errors_1.MongoCryptAzureKMSRequestError(\"Malformed JSON body in GET request.\");\n        }\n    })();\n    if (status !== 200) {\n        throw new errors_1.MongoCryptAzureKMSRequestError(\"Unable to complete request.\", body);\n    }\n    if (!body.access_token) {\n        throw new errors_1.MongoCryptAzureKMSRequestError(\"Malformed response body - missing field `access_token`.\");\n    }\n    if (!body.expires_in) {\n        throw new errors_1.MongoCryptAzureKMSRequestError(\"Malformed response body - missing field `expires_in`.\");\n    }\n    const expiresInMS = Number(body.expires_in) * 1000;\n    if (Number.isNaN(expiresInMS)) {\n        throw new errors_1.MongoCryptAzureKMSRequestError(\"Malformed response body - unable to parse int from `expires_in` field.\");\n    }\n    return {\n        accessToken: body.access_token,\n        expiresOnTimestamp: Date.now() + expiresInMS\n    };\n}\n/**\n * @internal\n *\n * parses any options provided by prose tests to `fetchAzureKMSToken` and merges them with\n * the default values for headers and the request url.\n */ function prepareRequest(options) {\n    const url = new URL(options.url?.toString() ?? \"http://169.254.169.254/metadata/identity/oauth2/token\");\n    url.searchParams.append(\"api-version\", \"2018-02-01\");\n    url.searchParams.append(\"resource\", \"https://vault.azure.net\");\n    const headers = {\n        ...options.headers,\n        \"Content-Type\": \"application/json\",\n        Metadata: true\n    };\n    return {\n        headers,\n        url\n    };\n}\nexports.prepareRequest = prepareRequest;\n/**\n * @internal\n *\n * `AzureKMSRequestOptions` allows prose tests to modify the http request sent to the idms\n * servers.  This is required to simulate different server conditions.  No options are expected to\n * be set outside of tests.\n *\n * exposed for CSFLE\n * [prose test 18](https://github.com/mongodb/specifications/tree/master/source/client-side-encryption/tests#azure-imds-credentials)\n */ async function fetchAzureKMSToken(options = {}) {\n    const { headers, url } = prepareRequest(options);\n    const response = await (0, utils_1.get)(url, {\n        headers\n    }).catch((error)=>{\n        if (error instanceof errors_1.MongoCryptKMSRequestNetworkTimeoutError) {\n            throw new errors_1.MongoCryptAzureKMSRequestError(`[Azure KMS] ${error.message}`);\n        }\n        throw error;\n    });\n    return parseResponse(response);\n}\nexports.fetchAzureKMSToken = fetchAzureKMSToken;\n/**\n * @internal\n *\n * @throws Will reject with a `MongoCryptError` if the http request fails or the http response is malformed.\n */ async function loadAzureCredentials(kmsProviders) {\n    const azure = await exports.tokenCache.getToken();\n    return {\n        ...kmsProviders,\n        azure\n    };\n}\nexports.loadAzureCredentials = loadAzureCredentials; //# sourceMappingURL=azure.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9wcm92aWRlcnMvYXp1cmUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDRCQUE0QixHQUFHQSwwQkFBMEIsR0FBR0Esc0JBQXNCLEdBQUdBLGtCQUFrQixHQUFHQSw0QkFBNEIsR0FBRyxLQUFLO0FBQzlJLE1BQU1PLFdBQVdDLG1CQUFPQSxDQUFDLG9GQUFXO0FBQ3BDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJGQUFTO0FBQ2pDLE1BQU1FLHdDQUF3QztBQUM5Qzs7Q0FFQyxHQUNELE1BQU1KO0lBQ0ZLLGFBQWM7UUFDVixJQUFJLENBQUNDLFdBQVcsR0FBRztJQUN2QjtJQUNBLE1BQU1DLFdBQVc7UUFDYixJQUFJLElBQUksQ0FBQ0QsV0FBVyxJQUFJLFFBQVEsSUFBSSxDQUFDRSxZQUFZLENBQUMsSUFBSSxDQUFDRixXQUFXLEdBQUc7WUFDakUsSUFBSSxDQUFDQSxXQUFXLEdBQUcsTUFBTSxJQUFJLENBQUNHLFNBQVM7UUFDM0M7UUFDQSxPQUFPO1lBQUVDLGFBQWEsSUFBSSxDQUFDSixXQUFXLENBQUNJLFdBQVc7UUFBQztJQUN2RDtJQUNBRixhQUFhRyxLQUFLLEVBQUU7UUFDaEIsTUFBTUMsd0JBQXdCRCxNQUFNRSxrQkFBa0IsR0FBR0MsS0FBS0MsR0FBRztRQUNqRSxPQUFPSCx5QkFBeUJSO0lBQ3BDO0lBQ0E7O0tBRUMsR0FDRFksYUFBYTtRQUNULElBQUksQ0FBQ1YsV0FBVyxHQUFHO0lBQ3ZCO0lBQ0E7O0tBRUMsR0FDREcsWUFBWTtRQUNSLE9BQU9aO0lBQ1g7QUFDSjtBQUNBSCw0QkFBNEIsR0FBR007QUFDL0IsY0FBYyxHQUNkTixrQkFBa0IsR0FBRyxJQUFJTTtBQUN6QixjQUFjLEdBQ2QsZUFBZWlCLGNBQWNDLFFBQVE7SUFDakMsTUFBTSxFQUFFQyxNQUFNLEVBQUVDLE1BQU1DLE9BQU8sRUFBRSxHQUFHSDtJQUNsQyxNQUFNRSxPQUFPLENBQUM7UUFDVixJQUFJO1lBQ0EsT0FBT0UsS0FBS0MsS0FBSyxDQUFDRjtRQUN0QixFQUNBLE9BQU07WUFDRixNQUFNLElBQUlwQixTQUFTdUIsOEJBQThCLENBQUM7UUFDdEQ7SUFDSjtJQUNBLElBQUlMLFdBQVcsS0FBSztRQUNoQixNQUFNLElBQUlsQixTQUFTdUIsOEJBQThCLENBQUMsK0JBQStCSjtJQUNyRjtJQUNBLElBQUksQ0FBQ0EsS0FBS0ssWUFBWSxFQUFFO1FBQ3BCLE1BQU0sSUFBSXhCLFNBQVN1Qiw4QkFBOEIsQ0FBQztJQUN0RDtJQUNBLElBQUksQ0FBQ0osS0FBS00sVUFBVSxFQUFFO1FBQ2xCLE1BQU0sSUFBSXpCLFNBQVN1Qiw4QkFBOEIsQ0FBQztJQUN0RDtJQUNBLE1BQU1HLGNBQWNDLE9BQU9SLEtBQUtNLFVBQVUsSUFBSTtJQUM5QyxJQUFJRSxPQUFPQyxLQUFLLENBQUNGLGNBQWM7UUFDM0IsTUFBTSxJQUFJMUIsU0FBU3VCLDhCQUE4QixDQUFDO0lBQ3REO0lBQ0EsT0FBTztRQUNIZCxhQUFhVSxLQUFLSyxZQUFZO1FBQzlCWixvQkFBb0JDLEtBQUtDLEdBQUcsS0FBS1k7SUFDckM7QUFDSjtBQUNBOzs7OztDQUtDLEdBQ0QsU0FBUzdCLGVBQWVnQyxPQUFPO0lBQzNCLE1BQU1DLE1BQU0sSUFBSUMsSUFBSUYsUUFBUUMsR0FBRyxFQUFFRSxjQUFjO0lBQy9DRixJQUFJRyxZQUFZLENBQUNDLE1BQU0sQ0FBQyxlQUFlO0lBQ3ZDSixJQUFJRyxZQUFZLENBQUNDLE1BQU0sQ0FBQyxZQUFZO0lBQ3BDLE1BQU1DLFVBQVU7UUFBRSxHQUFHTixRQUFRTSxPQUFPO1FBQUUsZ0JBQWdCO1FBQW9CQyxVQUFVO0lBQUs7SUFDekYsT0FBTztRQUFFRDtRQUFTTDtJQUFJO0FBQzFCO0FBQ0FyQyxzQkFBc0IsR0FBR0k7QUFDekI7Ozs7Ozs7OztDQVNDLEdBQ0QsZUFBZUQsbUJBQW1CaUMsVUFBVSxDQUFDLENBQUM7SUFDMUMsTUFBTSxFQUFFTSxPQUFPLEVBQUVMLEdBQUcsRUFBRSxHQUFHakMsZUFBZWdDO0lBQ3hDLE1BQU1aLFdBQVcsTUFBTSxDQUFDLEdBQUdmLFFBQVFtQyxHQUFHLEVBQUVQLEtBQUs7UUFBRUs7SUFBUSxHQUFHRyxLQUFLLENBQUNDLENBQUFBO1FBQzVELElBQUlBLGlCQUFpQnZDLFNBQVN3Qyx1Q0FBdUMsRUFBRTtZQUNuRSxNQUFNLElBQUl4QyxTQUFTdUIsOEJBQThCLENBQUMsQ0FBQyxZQUFZLEVBQUVnQixNQUFNRSxPQUFPLENBQUMsQ0FBQztRQUNwRjtRQUNBLE1BQU1GO0lBQ1Y7SUFDQSxPQUFPdkIsY0FBY0M7QUFDekI7QUFDQXhCLDBCQUEwQixHQUFHRztBQUM3Qjs7OztDQUlDLEdBQ0QsZUFBZUQscUJBQXFCK0MsWUFBWTtJQUM1QyxNQUFNQyxRQUFRLE1BQU1sRCxRQUFRSyxVQUFVLENBQUNRLFFBQVE7SUFDL0MsT0FBTztRQUFFLEdBQUdvQyxZQUFZO1FBQUVDO0lBQU07QUFDcEM7QUFDQWxELDRCQUE0QixHQUFHRSxzQkFDL0IsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbGllbnQtc2lkZS1lbmNyeXB0aW9uL3Byb3ZpZGVycy9henVyZS5qcz9iNWJlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5sb2FkQXp1cmVDcmVkZW50aWFscyA9IGV4cG9ydHMuZmV0Y2hBenVyZUtNU1Rva2VuID0gZXhwb3J0cy5wcmVwYXJlUmVxdWVzdCA9IGV4cG9ydHMudG9rZW5DYWNoZSA9IGV4cG9ydHMuQXp1cmVDcmVkZW50aWFsQ2FjaGUgPSB2b2lkIDA7XG5jb25zdCBlcnJvcnNfMSA9IHJlcXVpcmUoXCIuLi9lcnJvcnNcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5jb25zdCBNSU5JTVVNX1RPS0VOX1JFRlJFU0hfSU5fTUlMTElTRUNPTkRTID0gNjAwMDtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEF6dXJlQ3JlZGVudGlhbENhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jYWNoZWRUb2tlbiA9IG51bGw7XG4gICAgfVxuICAgIGFzeW5jIGdldFRva2VuKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZWRUb2tlbiA9PSBudWxsIHx8IHRoaXMubmVlZHNSZWZyZXNoKHRoaXMuY2FjaGVkVG9rZW4pKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlZFRva2VuID0gYXdhaXQgdGhpcy5fZ2V0VG9rZW4oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBhY2Nlc3NUb2tlbjogdGhpcy5jYWNoZWRUb2tlbi5hY2Nlc3NUb2tlbiB9O1xuICAgIH1cbiAgICBuZWVkc1JlZnJlc2godG9rZW4pIHtcbiAgICAgICAgY29uc3QgdGltZVVudGlsRXhwaXJhdGlvbk1TID0gdG9rZW4uZXhwaXJlc09uVGltZXN0YW1wIC0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHRpbWVVbnRpbEV4cGlyYXRpb25NUyA8PSBNSU5JTVVNX1RPS0VOX1JFRlJFU0hfSU5fTUlMTElTRUNPTkRTO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBleHBvc2VkIGZvciB0ZXN0aW5nXG4gICAgICovXG4gICAgcmVzZXRDYWNoZSgpIHtcbiAgICAgICAgdGhpcy5jYWNoZWRUb2tlbiA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGV4cG9zZWQgZm9yIHRlc3RpbmdcbiAgICAgKi9cbiAgICBfZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBmZXRjaEF6dXJlS01TVG9rZW4oKTtcbiAgICB9XG59XG5leHBvcnRzLkF6dXJlQ3JlZGVudGlhbENhY2hlID0gQXp1cmVDcmVkZW50aWFsQ2FjaGU7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLnRva2VuQ2FjaGUgPSBuZXcgQXp1cmVDcmVkZW50aWFsQ2FjaGUoKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICBjb25zdCB7IHN0YXR1cywgYm9keTogcmF3Qm9keSB9ID0gcmVzcG9uc2U7XG4gICAgY29uc3QgYm9keSA9ICgoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyYXdCb2R5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEF6dXJlS01TUmVxdWVzdEVycm9yKCdNYWxmb3JtZWQgSlNPTiBib2R5IGluIEdFVCByZXF1ZXN0LicpO1xuICAgICAgICB9XG4gICAgfSkoKTtcbiAgICBpZiAoc3RhdHVzICE9PSAyMDApIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yc18xLk1vbmdvQ3J5cHRBenVyZUtNU1JlcXVlc3RFcnJvcignVW5hYmxlIHRvIGNvbXBsZXRlIHJlcXVlc3QuJywgYm9keSk7XG4gICAgfVxuICAgIGlmICghYm9keS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yc18xLk1vbmdvQ3J5cHRBenVyZUtNU1JlcXVlc3RFcnJvcignTWFsZm9ybWVkIHJlc3BvbnNlIGJvZHkgLSBtaXNzaW5nIGZpZWxkIGBhY2Nlc3NfdG9rZW5gLicpO1xuICAgIH1cbiAgICBpZiAoIWJvZHkuZXhwaXJlc19pbikge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEF6dXJlS01TUmVxdWVzdEVycm9yKCdNYWxmb3JtZWQgcmVzcG9uc2UgYm9keSAtIG1pc3NpbmcgZmllbGQgYGV4cGlyZXNfaW5gLicpO1xuICAgIH1cbiAgICBjb25zdCBleHBpcmVzSW5NUyA9IE51bWJlcihib2R5LmV4cGlyZXNfaW4pICogMTAwMDtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKGV4cGlyZXNJbk1TKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEF6dXJlS01TUmVxdWVzdEVycm9yKCdNYWxmb3JtZWQgcmVzcG9uc2UgYm9keSAtIHVuYWJsZSB0byBwYXJzZSBpbnQgZnJvbSBgZXhwaXJlc19pbmAgZmllbGQuJyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGFjY2Vzc1Rva2VuOiBib2R5LmFjY2Vzc190b2tlbixcbiAgICAgICAgZXhwaXJlc09uVGltZXN0YW1wOiBEYXRlLm5vdygpICsgZXhwaXJlc0luTVNcbiAgICB9O1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBwYXJzZXMgYW55IG9wdGlvbnMgcHJvdmlkZWQgYnkgcHJvc2UgdGVzdHMgdG8gYGZldGNoQXp1cmVLTVNUb2tlbmAgYW5kIG1lcmdlcyB0aGVtIHdpdGhcbiAqIHRoZSBkZWZhdWx0IHZhbHVlcyBmb3IgaGVhZGVycyBhbmQgdGhlIHJlcXVlc3QgdXJsLlxuICovXG5mdW5jdGlvbiBwcmVwYXJlUmVxdWVzdChvcHRpb25zKSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChvcHRpb25zLnVybD8udG9TdHJpbmcoKSA/PyAnaHR0cDovLzE2OS4yNTQuMTY5LjI1NC9tZXRhZGF0YS9pZGVudGl0eS9vYXV0aDIvdG9rZW4nKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnYXBpLXZlcnNpb24nLCAnMjAxOC0wMi0wMScpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKCdyZXNvdXJjZScsICdodHRwczovL3ZhdWx0LmF6dXJlLm5ldCcpO1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7IC4uLm9wdGlvbnMuaGVhZGVycywgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgTWV0YWRhdGE6IHRydWUgfTtcbiAgICByZXR1cm4geyBoZWFkZXJzLCB1cmwgfTtcbn1cbmV4cG9ydHMucHJlcGFyZVJlcXVlc3QgPSBwcmVwYXJlUmVxdWVzdDtcbi8qKlxuICogQGludGVybmFsXG4gKlxuICogYEF6dXJlS01TUmVxdWVzdE9wdGlvbnNgIGFsbG93cyBwcm9zZSB0ZXN0cyB0byBtb2RpZnkgdGhlIGh0dHAgcmVxdWVzdCBzZW50IHRvIHRoZSBpZG1zXG4gKiBzZXJ2ZXJzLiAgVGhpcyBpcyByZXF1aXJlZCB0byBzaW11bGF0ZSBkaWZmZXJlbnQgc2VydmVyIGNvbmRpdGlvbnMuICBObyBvcHRpb25zIGFyZSBleHBlY3RlZCB0b1xuICogYmUgc2V0IG91dHNpZGUgb2YgdGVzdHMuXG4gKlxuICogZXhwb3NlZCBmb3IgQ1NGTEVcbiAqIFtwcm9zZSB0ZXN0IDE4XShodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy90cmVlL21hc3Rlci9zb3VyY2UvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi90ZXN0cyNhenVyZS1pbWRzLWNyZWRlbnRpYWxzKVxuICovXG5hc3luYyBmdW5jdGlvbiBmZXRjaEF6dXJlS01TVG9rZW4ob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgeyBoZWFkZXJzLCB1cmwgfSA9IHByZXBhcmVSZXF1ZXN0KG9wdGlvbnMpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIHV0aWxzXzEuZ2V0KSh1cmwsIHsgaGVhZGVycyB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIGVycm9yc18xLk1vbmdvQ3J5cHRLTVNSZXF1ZXN0TmV0d29ya1RpbWVvdXRFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yc18xLk1vbmdvQ3J5cHRBenVyZUtNU1JlcXVlc3RFcnJvcihgW0F6dXJlIEtNU10gJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlKTtcbn1cbmV4cG9ydHMuZmV0Y2hBenVyZUtNU1Rva2VuID0gZmV0Y2hBenVyZUtNU1Rva2VuO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBAdGhyb3dzIFdpbGwgcmVqZWN0IHdpdGggYSBgTW9uZ29DcnlwdEVycm9yYCBpZiB0aGUgaHR0cCByZXF1ZXN0IGZhaWxzIG9yIHRoZSBodHRwIHJlc3BvbnNlIGlzIG1hbGZvcm1lZC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gbG9hZEF6dXJlQ3JlZGVudGlhbHMoa21zUHJvdmlkZXJzKSB7XG4gICAgY29uc3QgYXp1cmUgPSBhd2FpdCBleHBvcnRzLnRva2VuQ2FjaGUuZ2V0VG9rZW4oKTtcbiAgICByZXR1cm4geyAuLi5rbXNQcm92aWRlcnMsIGF6dXJlIH07XG59XG5leHBvcnRzLmxvYWRBenVyZUNyZWRlbnRpYWxzID0gbG9hZEF6dXJlQ3JlZGVudGlhbHM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1henVyZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJsb2FkQXp1cmVDcmVkZW50aWFscyIsImZldGNoQXp1cmVLTVNUb2tlbiIsInByZXBhcmVSZXF1ZXN0IiwidG9rZW5DYWNoZSIsIkF6dXJlQ3JlZGVudGlhbENhY2hlIiwiZXJyb3JzXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsIk1JTklNVU1fVE9LRU5fUkVGUkVTSF9JTl9NSUxMSVNFQ09ORFMiLCJjb25zdHJ1Y3RvciIsImNhY2hlZFRva2VuIiwiZ2V0VG9rZW4iLCJuZWVkc1JlZnJlc2giLCJfZ2V0VG9rZW4iLCJhY2Nlc3NUb2tlbiIsInRva2VuIiwidGltZVVudGlsRXhwaXJhdGlvbk1TIiwiZXhwaXJlc09uVGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInJlc2V0Q2FjaGUiLCJwYXJzZVJlc3BvbnNlIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJib2R5IiwicmF3Qm9keSIsIkpTT04iLCJwYXJzZSIsIk1vbmdvQ3J5cHRBenVyZUtNU1JlcXVlc3RFcnJvciIsImFjY2Vzc190b2tlbiIsImV4cGlyZXNfaW4iLCJleHBpcmVzSW5NUyIsIk51bWJlciIsImlzTmFOIiwib3B0aW9ucyIsInVybCIsIlVSTCIsInRvU3RyaW5nIiwic2VhcmNoUGFyYW1zIiwiYXBwZW5kIiwiaGVhZGVycyIsIk1ldGFkYXRhIiwiZ2V0IiwiY2F0Y2giLCJlcnJvciIsIk1vbmdvQ3J5cHRLTVNSZXF1ZXN0TmV0d29ya1RpbWVvdXRFcnJvciIsIm1lc3NhZ2UiLCJrbXNQcm92aWRlcnMiLCJhenVyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/azure.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/gcp.js":
/*!**************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/providers/gcp.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.loadGCPCredentials = void 0;\nconst deps_1 = __webpack_require__(/*! ../../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\n/** @internal */ async function loadGCPCredentials(kmsProviders) {\n    const gcpMetadata = (0, deps_1.getGcpMetadata)();\n    if (\"kModuleError\" in gcpMetadata) {\n        return kmsProviders;\n    }\n    const { access_token: accessToken } = await gcpMetadata.instance({\n        property: \"service-accounts/default/token\"\n    });\n    return {\n        ...kmsProviders,\n        gcp: {\n            accessToken\n        }\n    };\n}\nexports.loadGCPCredentials = loadGCPCredentials; //# sourceMappingURL=gcp.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9wcm92aWRlcnMvZ2NwLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xDLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLDREQUFZO0FBQ25DLGNBQWMsR0FDZCxlQUFlRixtQkFBbUJHLFlBQVk7SUFDMUMsTUFBTUMsY0FBYyxDQUFDLEdBQUdILE9BQU9JLGNBQWM7SUFDN0MsSUFBSSxrQkFBa0JELGFBQWE7UUFDL0IsT0FBT0Q7SUFDWDtJQUNBLE1BQU0sRUFBRUcsY0FBY0MsV0FBVyxFQUFFLEdBQUcsTUFBTUgsWUFBWUksUUFBUSxDQUFDO1FBQzdEQyxVQUFVO0lBQ2Q7SUFDQSxPQUFPO1FBQUUsR0FBR04sWUFBWTtRQUFFTyxLQUFLO1lBQUVIO1FBQVk7SUFBRTtBQUNuRDtBQUNBVCwwQkFBMEIsR0FBR0Usb0JBQzdCLCtCQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9wcm92aWRlcnMvZ2NwLmpzP2YzODIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmxvYWRHQ1BDcmVkZW50aWFscyA9IHZvaWQgMDtcbmNvbnN0IGRlcHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9kZXBzXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuYXN5bmMgZnVuY3Rpb24gbG9hZEdDUENyZWRlbnRpYWxzKGttc1Byb3ZpZGVycykge1xuICAgIGNvbnN0IGdjcE1ldGFkYXRhID0gKDAsIGRlcHNfMS5nZXRHY3BNZXRhZGF0YSkoKTtcbiAgICBpZiAoJ2tNb2R1bGVFcnJvcicgaW4gZ2NwTWV0YWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGttc1Byb3ZpZGVycztcbiAgICB9XG4gICAgY29uc3QgeyBhY2Nlc3NfdG9rZW46IGFjY2Vzc1Rva2VuIH0gPSBhd2FpdCBnY3BNZXRhZGF0YS5pbnN0YW5jZSh7XG4gICAgICAgIHByb3BlcnR5OiAnc2VydmljZS1hY2NvdW50cy9kZWZhdWx0L3Rva2VuJ1xuICAgIH0pO1xuICAgIHJldHVybiB7IC4uLmttc1Byb3ZpZGVycywgZ2NwOiB7IGFjY2Vzc1Rva2VuIH0gfTtcbn1cbmV4cG9ydHMubG9hZEdDUENyZWRlbnRpYWxzID0gbG9hZEdDUENyZWRlbnRpYWxzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2NwLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImxvYWRHQ1BDcmVkZW50aWFscyIsImRlcHNfMSIsInJlcXVpcmUiLCJrbXNQcm92aWRlcnMiLCJnY3BNZXRhZGF0YSIsImdldEdjcE1ldGFkYXRhIiwiYWNjZXNzX3Rva2VuIiwiYWNjZXNzVG9rZW4iLCJpbnN0YW5jZSIsInByb3BlcnR5IiwiZ2NwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/gcp.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/providers/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.refreshKMSCredentials = exports.isEmptyCredentials = void 0;\nconst aws_1 = __webpack_require__(/*! ./aws */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/aws.js\");\nconst azure_1 = __webpack_require__(/*! ./azure */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/azure.js\");\nconst gcp_1 = __webpack_require__(/*! ./gcp */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/gcp.js\");\n/**\n * Auto credential fetching should only occur when the provider is defined on the kmsProviders map\n * and the settings are an empty object.\n *\n * This is distinct from a nullish provider key.\n *\n * @internal - exposed for testing purposes only\n */ function isEmptyCredentials(providerName, kmsProviders) {\n    const provider = kmsProviders[providerName];\n    if (provider == null) {\n        return false;\n    }\n    return typeof provider === \"object\" && Object.keys(provider).length === 0;\n}\nexports.isEmptyCredentials = isEmptyCredentials;\n/**\n * Load cloud provider credentials for the user provided KMS providers.\n * Credentials will only attempt to get loaded if they do not exist\n * and no existing credentials will get overwritten.\n *\n * @internal\n */ async function refreshKMSCredentials(kmsProviders) {\n    let finalKMSProviders = kmsProviders;\n    if (isEmptyCredentials(\"aws\", kmsProviders)) {\n        finalKMSProviders = await (0, aws_1.loadAWSCredentials)(finalKMSProviders);\n    }\n    if (isEmptyCredentials(\"gcp\", kmsProviders)) {\n        finalKMSProviders = await (0, gcp_1.loadGCPCredentials)(finalKMSProviders);\n    }\n    if (isEmptyCredentials(\"azure\", kmsProviders)) {\n        finalKMSProviders = await (0, azure_1.loadAzureCredentials)(finalKMSProviders);\n    }\n    return finalKMSProviders;\n}\nexports.refreshKMSCredentials = refreshKMSCredentials; //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9wcm92aWRlcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDZCQUE2QixHQUFHQSwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xFLE1BQU1JLFFBQVFDLG1CQUFPQSxDQUFDLHVGQUFPO0FBQzdCLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJGQUFTO0FBQ2pDLE1BQU1FLFFBQVFGLG1CQUFPQSxDQUFDLHVGQUFPO0FBQzdCOzs7Ozs7O0NBT0MsR0FDRCxTQUFTRixtQkFBbUJLLFlBQVksRUFBRUMsWUFBWTtJQUNsRCxNQUFNQyxXQUFXRCxZQUFZLENBQUNELGFBQWE7SUFDM0MsSUFBSUUsWUFBWSxNQUFNO1FBQ2xCLE9BQU87SUFDWDtJQUNBLE9BQU8sT0FBT0EsYUFBYSxZQUFZWixPQUFPYSxJQUFJLENBQUNELFVBQVVFLE1BQU0sS0FBSztBQUM1RTtBQUNBWiwwQkFBMEIsR0FBR0c7QUFDN0I7Ozs7OztDQU1DLEdBQ0QsZUFBZUQsc0JBQXNCTyxZQUFZO0lBQzdDLElBQUlJLG9CQUFvQko7SUFDeEIsSUFBSU4sbUJBQW1CLE9BQU9NLGVBQWU7UUFDekNJLG9CQUFvQixNQUFNLENBQUMsR0FBR1QsTUFBTVUsa0JBQWtCLEVBQUVEO0lBQzVEO0lBQ0EsSUFBSVYsbUJBQW1CLE9BQU9NLGVBQWU7UUFDekNJLG9CQUFvQixNQUFNLENBQUMsR0FBR04sTUFBTVEsa0JBQWtCLEVBQUVGO0lBQzVEO0lBQ0EsSUFBSVYsbUJBQW1CLFNBQVNNLGVBQWU7UUFDM0NJLG9CQUFvQixNQUFNLENBQUMsR0FBR1AsUUFBUVUsb0JBQW9CLEVBQUVIO0lBQ2hFO0lBQ0EsT0FBT0E7QUFDWDtBQUNBYiw2QkFBNkIsR0FBR0UsdUJBQ2hDLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9wcm92aWRlcnMvaW5kZXguanM/N2IyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVmcmVzaEtNU0NyZWRlbnRpYWxzID0gZXhwb3J0cy5pc0VtcHR5Q3JlZGVudGlhbHMgPSB2b2lkIDA7XG5jb25zdCBhd3NfMSA9IHJlcXVpcmUoXCIuL2F3c1wiKTtcbmNvbnN0IGF6dXJlXzEgPSByZXF1aXJlKFwiLi9henVyZVwiKTtcbmNvbnN0IGdjcF8xID0gcmVxdWlyZShcIi4vZ2NwXCIpO1xuLyoqXG4gKiBBdXRvIGNyZWRlbnRpYWwgZmV0Y2hpbmcgc2hvdWxkIG9ubHkgb2NjdXIgd2hlbiB0aGUgcHJvdmlkZXIgaXMgZGVmaW5lZCBvbiB0aGUga21zUHJvdmlkZXJzIG1hcFxuICogYW5kIHRoZSBzZXR0aW5ncyBhcmUgYW4gZW1wdHkgb2JqZWN0LlxuICpcbiAqIFRoaXMgaXMgZGlzdGluY3QgZnJvbSBhIG51bGxpc2ggcHJvdmlkZXIga2V5LlxuICpcbiAqIEBpbnRlcm5hbCAtIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seVxuICovXG5mdW5jdGlvbiBpc0VtcHR5Q3JlZGVudGlhbHMocHJvdmlkZXJOYW1lLCBrbXNQcm92aWRlcnMpIHtcbiAgICBjb25zdCBwcm92aWRlciA9IGttc1Byb3ZpZGVyc1twcm92aWRlck5hbWVdO1xuICAgIGlmIChwcm92aWRlciA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiBwcm92aWRlciA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMocHJvdmlkZXIpLmxlbmd0aCA9PT0gMDtcbn1cbmV4cG9ydHMuaXNFbXB0eUNyZWRlbnRpYWxzID0gaXNFbXB0eUNyZWRlbnRpYWxzO1xuLyoqXG4gKiBMb2FkIGNsb3VkIHByb3ZpZGVyIGNyZWRlbnRpYWxzIGZvciB0aGUgdXNlciBwcm92aWRlZCBLTVMgcHJvdmlkZXJzLlxuICogQ3JlZGVudGlhbHMgd2lsbCBvbmx5IGF0dGVtcHQgdG8gZ2V0IGxvYWRlZCBpZiB0aGV5IGRvIG5vdCBleGlzdFxuICogYW5kIG5vIGV4aXN0aW5nIGNyZWRlbnRpYWxzIHdpbGwgZ2V0IG92ZXJ3cml0dGVuLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5hc3luYyBmdW5jdGlvbiByZWZyZXNoS01TQ3JlZGVudGlhbHMoa21zUHJvdmlkZXJzKSB7XG4gICAgbGV0IGZpbmFsS01TUHJvdmlkZXJzID0ga21zUHJvdmlkZXJzO1xuICAgIGlmIChpc0VtcHR5Q3JlZGVudGlhbHMoJ2F3cycsIGttc1Byb3ZpZGVycykpIHtcbiAgICAgICAgZmluYWxLTVNQcm92aWRlcnMgPSBhd2FpdCAoMCwgYXdzXzEubG9hZEFXU0NyZWRlbnRpYWxzKShmaW5hbEtNU1Byb3ZpZGVycyk7XG4gICAgfVxuICAgIGlmIChpc0VtcHR5Q3JlZGVudGlhbHMoJ2djcCcsIGttc1Byb3ZpZGVycykpIHtcbiAgICAgICAgZmluYWxLTVNQcm92aWRlcnMgPSBhd2FpdCAoMCwgZ2NwXzEubG9hZEdDUENyZWRlbnRpYWxzKShmaW5hbEtNU1Byb3ZpZGVycyk7XG4gICAgfVxuICAgIGlmIChpc0VtcHR5Q3JlZGVudGlhbHMoJ2F6dXJlJywga21zUHJvdmlkZXJzKSkge1xuICAgICAgICBmaW5hbEtNU1Byb3ZpZGVycyA9IGF3YWl0ICgwLCBhenVyZV8xLmxvYWRBenVyZUNyZWRlbnRpYWxzKShmaW5hbEtNU1Byb3ZpZGVycyk7XG4gICAgfVxuICAgIHJldHVybiBmaW5hbEtNU1Byb3ZpZGVycztcbn1cbmV4cG9ydHMucmVmcmVzaEtNU0NyZWRlbnRpYWxzID0gcmVmcmVzaEtNU0NyZWRlbnRpYWxzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicmVmcmVzaEtNU0NyZWRlbnRpYWxzIiwiaXNFbXB0eUNyZWRlbnRpYWxzIiwiYXdzXzEiLCJyZXF1aXJlIiwiYXp1cmVfMSIsImdjcF8xIiwicHJvdmlkZXJOYW1lIiwia21zUHJvdmlkZXJzIiwicHJvdmlkZXIiLCJrZXlzIiwibGVuZ3RoIiwiZmluYWxLTVNQcm92aWRlcnMiLCJsb2FkQVdTQ3JlZGVudGlhbHMiLCJsb2FkR0NQQ3JlZGVudGlhbHMiLCJsb2FkQXp1cmVDcmVkZW50aWFscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/utils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/providers/utils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.get = void 0;\nconst http = __webpack_require__(/*! http */ \"http\");\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst errors_1 = __webpack_require__(/*! ../errors */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/errors.js\");\n/**\n * @internal\n */ function get(url, options = {}) {\n    return new Promise((resolve, reject)=>{\n        /* eslint-disable prefer-const */ let timeoutId;\n        const request = http.get(url, options, (response)=>{\n            response.setEncoding(\"utf8\");\n            let body = \"\";\n            response.on(\"data\", (chunk)=>body += chunk);\n            response.on(\"end\", ()=>{\n                (0, timers_1.clearTimeout)(timeoutId);\n                resolve({\n                    status: response.statusCode,\n                    body\n                });\n            });\n        }).on(\"error\", (error)=>{\n            (0, timers_1.clearTimeout)(timeoutId);\n            reject(error);\n        }).end();\n        timeoutId = (0, timers_1.setTimeout)(()=>{\n            request.destroy(new errors_1.MongoCryptKMSRequestNetworkTimeoutError(`request timed out after 10 seconds`));\n        }, 10000);\n    });\n}\nexports.get = get; //# sourceMappingURL=utils.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9wcm92aWRlcnMvdXRpbHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELFdBQVcsR0FBRyxLQUFLO0FBQ25CLE1BQU1HLE9BQU9DLG1CQUFPQSxDQUFDLGtCQUFNO0FBQzNCLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1FLFdBQVdGLG1CQUFPQSxDQUFDLG9GQUFXO0FBQ3BDOztDQUVDLEdBQ0QsU0FBU0YsSUFBSUssR0FBRyxFQUFFQyxVQUFVLENBQUMsQ0FBQztJQUMxQixPQUFPLElBQUlDLFFBQVEsQ0FBQ0MsU0FBU0M7UUFDekIsK0JBQStCLEdBQy9CLElBQUlDO1FBQ0osTUFBTUMsVUFBVVYsS0FDWEQsR0FBRyxDQUFDSyxLQUFLQyxTQUFTTSxDQUFBQTtZQUNuQkEsU0FBU0MsV0FBVyxDQUFDO1lBQ3JCLElBQUlDLE9BQU87WUFDWEYsU0FBU0csRUFBRSxDQUFDLFFBQVFDLENBQUFBLFFBQVVGLFFBQVFFO1lBQ3RDSixTQUFTRyxFQUFFLENBQUMsT0FBTztnQkFDZCxJQUFHWixTQUFTYyxZQUFZLEVBQUVQO2dCQUMzQkYsUUFBUTtvQkFBRVUsUUFBUU4sU0FBU08sVUFBVTtvQkFBRUw7Z0JBQUs7WUFDaEQ7UUFDSixHQUNLQyxFQUFFLENBQUMsU0FBU0ssQ0FBQUE7WUFDWixJQUFHakIsU0FBU2MsWUFBWSxFQUFFUDtZQUMzQkQsT0FBT1c7UUFDWCxHQUNLQyxHQUFHO1FBQ1JYLFlBQVksQ0FBQyxHQUFHUCxTQUFTbUIsVUFBVSxFQUFFO1lBQ2pDWCxRQUFRWSxPQUFPLENBQUMsSUFBSW5CLFNBQVNvQix1Q0FBdUMsQ0FBQyxDQUFDLGtDQUFrQyxDQUFDO1FBQzdHLEdBQUc7SUFDUDtBQUNKO0FBQ0ExQixXQUFXLEdBQUdFLEtBQ2QsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbGllbnQtc2lkZS1lbmNyeXB0aW9uL3Byb3ZpZGVycy91dGlscy5qcz84NzRmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXQgPSB2b2lkIDA7XG5jb25zdCBodHRwID0gcmVxdWlyZShcImh0dHBcIik7XG5jb25zdCB0aW1lcnNfMSA9IHJlcXVpcmUoXCJ0aW1lcnNcIik7XG5jb25zdCBlcnJvcnNfMSA9IHJlcXVpcmUoXCIuLi9lcnJvcnNcIik7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBnZXQodXJsLCBvcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItY29uc3QgKi9cbiAgICAgICAgbGV0IHRpbWVvdXRJZDtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IGh0dHBcbiAgICAgICAgICAgIC5nZXQodXJsLCBvcHRpb25zLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICByZXNwb25zZS5zZXRFbmNvZGluZygndXRmOCcpO1xuICAgICAgICAgICAgbGV0IGJvZHkgPSAnJztcbiAgICAgICAgICAgIHJlc3BvbnNlLm9uKCdkYXRhJywgY2h1bmsgPT4gKGJvZHkgKz0gY2h1bmspKTtcbiAgICAgICAgICAgIHJlc3BvbnNlLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgKDAsIHRpbWVyc18xLmNsZWFyVGltZW91dCkodGltZW91dElkKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHsgc3RhdHVzOiByZXNwb25zZS5zdGF0dXNDb2RlLCBib2R5IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ2Vycm9yJywgZXJyb3IgPT4ge1xuICAgICAgICAgICAgKDAsIHRpbWVyc18xLmNsZWFyVGltZW91dCkodGltZW91dElkKTtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZW5kKCk7XG4gICAgICAgIHRpbWVvdXRJZCA9ICgwLCB0aW1lcnNfMS5zZXRUaW1lb3V0KSgoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LmRlc3Ryb3kobmV3IGVycm9yc18xLk1vbmdvQ3J5cHRLTVNSZXF1ZXN0TmV0d29ya1RpbWVvdXRFcnJvcihgcmVxdWVzdCB0aW1lZCBvdXQgYWZ0ZXIgMTAgc2Vjb25kc2ApKTtcbiAgICAgICAgfSwgMTAwMDApO1xuICAgIH0pO1xufVxuZXhwb3J0cy5nZXQgPSBnZXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXQiLCJodHRwIiwicmVxdWlyZSIsInRpbWVyc18xIiwiZXJyb3JzXzEiLCJ1cmwiLCJvcHRpb25zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ0aW1lb3V0SWQiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJzZXRFbmNvZGluZyIsImJvZHkiLCJvbiIsImNodW5rIiwiY2xlYXJUaW1lb3V0Iiwic3RhdHVzIiwic3RhdHVzQ29kZSIsImVycm9yIiwiZW5kIiwic2V0VGltZW91dCIsImRlc3Ryb3kiLCJNb25nb0NyeXB0S01TUmVxdWVzdE5ldHdvcmtUaW1lb3V0RXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/providers/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/client-side-encryption/state_machine.js":
/*!**************************************************************************!*\
  !*** ./node_modules/mongodb/lib/client-side-encryption/state_machine.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.StateMachine = void 0;\nconst fs = __webpack_require__(/*! fs/promises */ \"fs/promises\");\nconst net = __webpack_require__(/*! net */ \"net\");\nconst tls = __webpack_require__(/*! tls */ \"tls\");\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst deps_1 = __webpack_require__(/*! ../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst errors_1 = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/errors.js\");\nlet socks = null;\nfunction loadSocks() {\n    if (socks == null) {\n        const socksImport = (0, deps_1.getSocks)();\n        if (\"kModuleError\" in socksImport) {\n            throw socksImport.kModuleError;\n        }\n        socks = socksImport;\n    }\n    return socks;\n}\n// libmongocrypt states\nconst MONGOCRYPT_CTX_ERROR = 0;\nconst MONGOCRYPT_CTX_NEED_MONGO_COLLINFO = 1;\nconst MONGOCRYPT_CTX_NEED_MONGO_MARKINGS = 2;\nconst MONGOCRYPT_CTX_NEED_MONGO_KEYS = 3;\nconst MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS = 7;\nconst MONGOCRYPT_CTX_NEED_KMS = 4;\nconst MONGOCRYPT_CTX_READY = 5;\nconst MONGOCRYPT_CTX_DONE = 6;\nconst HTTPS_PORT = 443;\nconst stateToString = new Map([\n    [\n        MONGOCRYPT_CTX_ERROR,\n        \"MONGOCRYPT_CTX_ERROR\"\n    ],\n    [\n        MONGOCRYPT_CTX_NEED_MONGO_COLLINFO,\n        \"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO\"\n    ],\n    [\n        MONGOCRYPT_CTX_NEED_MONGO_MARKINGS,\n        \"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS\"\n    ],\n    [\n        MONGOCRYPT_CTX_NEED_MONGO_KEYS,\n        \"MONGOCRYPT_CTX_NEED_MONGO_KEYS\"\n    ],\n    [\n        MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS,\n        \"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS\"\n    ],\n    [\n        MONGOCRYPT_CTX_NEED_KMS,\n        \"MONGOCRYPT_CTX_NEED_KMS\"\n    ],\n    [\n        MONGOCRYPT_CTX_READY,\n        \"MONGOCRYPT_CTX_READY\"\n    ],\n    [\n        MONGOCRYPT_CTX_DONE,\n        \"MONGOCRYPT_CTX_DONE\"\n    ]\n]);\nconst INSECURE_TLS_OPTIONS = [\n    \"tlsInsecure\",\n    \"tlsAllowInvalidCertificates\",\n    \"tlsAllowInvalidHostnames\",\n    // These options are disallowed by the spec, so we explicitly filter them out if provided, even\n    // though the StateMachine does not declare support for these options.\n    \"tlsDisableOCSPEndpointCheck\",\n    \"tlsDisableCertificateRevocationCheck\"\n];\n/**\n * Helper function for logging. Enabled by setting the environment flag MONGODB_CRYPT_DEBUG.\n * @param msg - Anything you want to be logged.\n */ function debug(msg) {\n    if (process.env.MONGODB_CRYPT_DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error(msg);\n    }\n}\n/**\n * @internal\n * An internal class that executes across a MongoCryptContext until either\n * a finishing state or an error is reached. Do not instantiate directly.\n */ class StateMachine {\n    constructor(options, bsonOptions = (0, bson_1.pluckBSONSerializeOptions)(options)){\n        this.options = options;\n        this.bsonOptions = bsonOptions;\n    }\n    /**\n     * Executes the state machine according to the specification\n     */ async execute(executor, context) {\n        const keyVaultNamespace = executor._keyVaultNamespace;\n        const keyVaultClient = executor._keyVaultClient;\n        const metaDataClient = executor._metaDataClient;\n        const mongocryptdClient = executor._mongocryptdClient;\n        const mongocryptdManager = executor._mongocryptdManager;\n        let result = null;\n        while(context.state !== MONGOCRYPT_CTX_DONE && context.state !== MONGOCRYPT_CTX_ERROR){\n            debug(`[context#${context.id}] ${stateToString.get(context.state) || context.state}`);\n            switch(context.state){\n                case MONGOCRYPT_CTX_NEED_MONGO_COLLINFO:\n                    {\n                        const filter = (0, bson_1.deserialize)(context.nextMongoOperation());\n                        if (!metaDataClient) {\n                            throw new errors_1.MongoCryptError(\"unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined\");\n                        }\n                        const collInfo = await this.fetchCollectionInfo(metaDataClient, context.ns, filter);\n                        if (collInfo) {\n                            context.addMongoOperationResponse(collInfo);\n                        }\n                        context.finishMongoOperation();\n                        break;\n                    }\n                case MONGOCRYPT_CTX_NEED_MONGO_MARKINGS:\n                    {\n                        const command = context.nextMongoOperation();\n                        if (!mongocryptdClient) {\n                            throw new errors_1.MongoCryptError(\"unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined\");\n                        }\n                        // When we are using the shared library, we don't have a mongocryptd manager.\n                        const markedCommand = mongocryptdManager ? await mongocryptdManager.withRespawn(this.markCommand.bind(this, mongocryptdClient, context.ns, command)) : await this.markCommand(mongocryptdClient, context.ns, command);\n                        context.addMongoOperationResponse(markedCommand);\n                        context.finishMongoOperation();\n                        break;\n                    }\n                case MONGOCRYPT_CTX_NEED_MONGO_KEYS:\n                    {\n                        const filter = context.nextMongoOperation();\n                        const keys = await this.fetchKeys(keyVaultClient, keyVaultNamespace, filter);\n                        if (keys.length === 0) {\n                            // This is kind of a hack.  For `rewrapManyDataKey`, we have tests that\n                            // guarantee that when there are no matching keys, `rewrapManyDataKey` returns\n                            // nothing.  We also have tests for auto encryption that guarantee for `encrypt`\n                            // we return an error when there are no matching keys.  This error is generated in\n                            // subsequent iterations of the state machine.\n                            // Some apis (`encrypt`) throw if there are no filter matches and others (`rewrapManyDataKey`)\n                            // do not.  We set the result manually here, and let the state machine continue.  `libmongocrypt`\n                            // will inform us if we need to error by setting the state to `MONGOCRYPT_CTX_ERROR` but\n                            // otherwise we'll return `{ v: [] }`.\n                            result = {\n                                v: []\n                            };\n                        }\n                        for await (const key of keys){\n                            context.addMongoOperationResponse((0, bson_1.serialize)(key));\n                        }\n                        context.finishMongoOperation();\n                        break;\n                    }\n                case MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS:\n                    {\n                        const kmsProviders = await executor.askForKMSCredentials();\n                        context.provideKMSProviders((0, bson_1.serialize)(kmsProviders));\n                        break;\n                    }\n                case MONGOCRYPT_CTX_NEED_KMS:\n                    {\n                        const requests = Array.from(this.requests(context));\n                        await Promise.all(requests);\n                        context.finishKMSRequests();\n                        break;\n                    }\n                case MONGOCRYPT_CTX_READY:\n                    {\n                        const finalizedContext = context.finalize();\n                        // @ts-expect-error finalize can change the state, check for error\n                        if (context.state === MONGOCRYPT_CTX_ERROR) {\n                            const message = context.status.message || \"Finalization error\";\n                            throw new errors_1.MongoCryptError(message);\n                        }\n                        result = (0, bson_1.deserialize)(finalizedContext, this.options);\n                        break;\n                    }\n                default:\n                    throw new errors_1.MongoCryptError(`Unknown state: ${context.state}`);\n            }\n        }\n        if (context.state === MONGOCRYPT_CTX_ERROR || result == null) {\n            const message = context.status.message;\n            if (!message) {\n                debug(`unidentifiable error in MongoCrypt - received an error status from \\`libmongocrypt\\` but received no error message.`);\n            }\n            throw new errors_1.MongoCryptError(message ?? \"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.\");\n        }\n        return result;\n    }\n    /**\n     * Handles the request to the KMS service. Exposed for testing purposes. Do not directly invoke.\n     * @param kmsContext - A C++ KMS context returned from the bindings\n     * @returns A promise that resolves when the KMS reply has be fully parsed\n     */ async kmsRequest(request) {\n        const parsedUrl = request.endpoint.split(\":\");\n        const port = parsedUrl[1] != null ? Number.parseInt(parsedUrl[1], 10) : HTTPS_PORT;\n        const options = {\n            host: parsedUrl[0],\n            servername: parsedUrl[0],\n            port\n        };\n        const message = request.message;\n        const buffer = new utils_1.BufferPool();\n        const netSocket = new net.Socket();\n        let socket;\n        function destroySockets() {\n            for (const sock of [\n                socket,\n                netSocket\n            ]){\n                if (sock) {\n                    sock.removeAllListeners();\n                    sock.destroy();\n                }\n            }\n        }\n        function ontimeout() {\n            return new errors_1.MongoCryptError(\"KMS request timed out\");\n        }\n        function onerror(cause) {\n            return new errors_1.MongoCryptError(\"KMS request failed\", {\n                cause\n            });\n        }\n        function onclose() {\n            return new errors_1.MongoCryptError(\"KMS request closed\");\n        }\n        const tlsOptions = this.options.tlsOptions;\n        if (tlsOptions) {\n            const kmsProvider = request.kmsProvider;\n            const providerTlsOptions = tlsOptions[kmsProvider];\n            if (providerTlsOptions) {\n                const error = this.validateTlsOptions(kmsProvider, providerTlsOptions);\n                if (error) {\n                    throw error;\n                }\n                try {\n                    await this.setTlsOptions(providerTlsOptions, options);\n                } catch (err) {\n                    throw onerror(err);\n                }\n            }\n        }\n        const { promise: willConnect, reject: rejectOnNetSocketError, resolve: resolveOnNetSocketConnect } = (0, utils_1.promiseWithResolvers)();\n        netSocket.once(\"timeout\", ()=>rejectOnNetSocketError(ontimeout())).once(\"error\", (err)=>rejectOnNetSocketError(onerror(err))).once(\"close\", ()=>rejectOnNetSocketError(onclose())).once(\"connect\", ()=>resolveOnNetSocketConnect());\n        try {\n            if (this.options.proxyOptions && this.options.proxyOptions.proxyHost) {\n                netSocket.connect({\n                    host: this.options.proxyOptions.proxyHost,\n                    port: this.options.proxyOptions.proxyPort || 1080\n                });\n                await willConnect;\n                try {\n                    socks ??= loadSocks();\n                    options.socket = (await socks.SocksClient.createConnection({\n                        existing_socket: netSocket,\n                        command: \"connect\",\n                        destination: {\n                            host: options.host,\n                            port: options.port\n                        },\n                        proxy: {\n                            // host and port are ignored because we pass existing_socket\n                            host: \"iLoveJavaScript\",\n                            port: 0,\n                            type: 5,\n                            userId: this.options.proxyOptions.proxyUsername,\n                            password: this.options.proxyOptions.proxyPassword\n                        }\n                    })).socket;\n                } catch (err) {\n                    throw onerror(err);\n                }\n            }\n            socket = tls.connect(options, ()=>{\n                socket.write(message);\n            });\n            const { promise: willResolveKmsRequest, reject: rejectOnTlsSocketError, resolve } = (0, utils_1.promiseWithResolvers)();\n            socket.once(\"timeout\", ()=>rejectOnTlsSocketError(ontimeout())).once(\"error\", (err)=>rejectOnTlsSocketError(onerror(err))).once(\"close\", ()=>rejectOnTlsSocketError(onclose())).on(\"data\", (data)=>{\n                buffer.append(data);\n                while(request.bytesNeeded > 0 && buffer.length){\n                    const bytesNeeded = Math.min(request.bytesNeeded, buffer.length);\n                    request.addResponse(buffer.read(bytesNeeded));\n                }\n                if (request.bytesNeeded <= 0) {\n                    resolve();\n                }\n            });\n            await willResolveKmsRequest;\n        } finally{\n            // There's no need for any more activity on this socket at this point.\n            destroySockets();\n        }\n    }\n    *requests(context) {\n        for(let request = context.nextKMSRequest(); request != null; request = context.nextKMSRequest()){\n            yield this.kmsRequest(request);\n        }\n    }\n    /**\n     * Validates the provided TLS options are secure.\n     *\n     * @param kmsProvider - The KMS provider name.\n     * @param tlsOptions - The client TLS options for the provider.\n     *\n     * @returns An error if any option is invalid.\n     */ validateTlsOptions(kmsProvider, tlsOptions) {\n        const tlsOptionNames = Object.keys(tlsOptions);\n        for (const option of INSECURE_TLS_OPTIONS){\n            if (tlsOptionNames.includes(option)) {\n                return new errors_1.MongoCryptError(`Insecure TLS options prohibited for ${kmsProvider}: ${option}`);\n            }\n        }\n    }\n    /**\n     * Sets only the valid secure TLS options.\n     *\n     * @param tlsOptions - The client TLS options for the provider.\n     * @param options - The existing connection options.\n     */ async setTlsOptions(tlsOptions, options) {\n        if (tlsOptions.tlsCertificateKeyFile) {\n            const cert = await fs.readFile(tlsOptions.tlsCertificateKeyFile);\n            options.cert = options.key = cert;\n        }\n        if (tlsOptions.tlsCAFile) {\n            options.ca = await fs.readFile(tlsOptions.tlsCAFile);\n        }\n        if (tlsOptions.tlsCertificateKeyFilePassword) {\n            options.passphrase = tlsOptions.tlsCertificateKeyFilePassword;\n        }\n    }\n    /**\n     * Fetches collection info for a provided namespace, when libmongocrypt\n     * enters the `MONGOCRYPT_CTX_NEED_MONGO_COLLINFO` state. The result is\n     * used to inform libmongocrypt of the schema associated with this\n     * namespace. Exposed for testing purposes. Do not directly invoke.\n     *\n     * @param client - A MongoClient connected to the topology\n     * @param ns - The namespace to list collections from\n     * @param filter - A filter for the listCollections command\n     * @param callback - Invoked with the info of the requested collection, or with an error\n     */ async fetchCollectionInfo(client, ns, filter) {\n        const { db } = utils_1.MongoDBCollectionNamespace.fromString(ns);\n        const collections = await client.db(db).listCollections(filter, {\n            promoteLongs: false,\n            promoteValues: false\n        }).toArray();\n        const info = collections.length > 0 ? (0, bson_1.serialize)(collections[0]) : null;\n        return info;\n    }\n    /**\n     * Calls to the mongocryptd to provide markings for a command.\n     * Exposed for testing purposes. Do not directly invoke.\n     * @param client - A MongoClient connected to a mongocryptd\n     * @param ns - The namespace (database.collection) the command is being executed on\n     * @param command - The command to execute.\n     * @param callback - Invoked with the serialized and marked bson command, or with an error\n     */ async markCommand(client, ns, command) {\n        const options = {\n            promoteLongs: false,\n            promoteValues: false\n        };\n        const { db } = utils_1.MongoDBCollectionNamespace.fromString(ns);\n        const rawCommand = (0, bson_1.deserialize)(command, options);\n        const response = await client.db(db).command(rawCommand, options);\n        return (0, bson_1.serialize)(response, this.bsonOptions);\n    }\n    /**\n     * Requests keys from the keyVault collection on the topology.\n     * Exposed for testing purposes. Do not directly invoke.\n     * @param client - A MongoClient connected to the topology\n     * @param keyVaultNamespace - The namespace (database.collection) of the keyVault Collection\n     * @param filter - The filter for the find query against the keyVault Collection\n     * @param callback - Invoked with the found keys, or with an error\n     */ fetchKeys(client, keyVaultNamespace, filter) {\n        const { db: dbName, collection: collectionName } = utils_1.MongoDBCollectionNamespace.fromString(keyVaultNamespace);\n        return client.db(dbName).collection(collectionName, {\n            readConcern: {\n                level: \"majority\"\n            }\n        }).find((0, bson_1.deserialize)(filter)).toArray();\n    }\n}\nexports.StateMachine = StateMachine; //# sourceMappingURL=state_machine.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9zdGF0ZV9tYWNoaW5lLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxvQkFBb0IsR0FBRyxLQUFLO0FBQzVCLE1BQU1HLEtBQUtDLG1CQUFPQSxDQUFDLGdDQUFhO0FBQ2hDLE1BQU1DLE1BQU1ELG1CQUFPQSxDQUFDLGdCQUFLO0FBQ3pCLE1BQU1FLE1BQU1GLG1CQUFPQSxDQUFDLGdCQUFLO0FBQ3pCLE1BQU1HLFNBQVNILG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1JLFNBQVNKLG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1LLFVBQVVMLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1NLFdBQVdOLG1CQUFPQSxDQUFDLG1GQUFVO0FBQ25DLElBQUlPLFFBQVE7QUFDWixTQUFTQztJQUNMLElBQUlELFNBQVMsTUFBTTtRQUNmLE1BQU1FLGNBQWMsQ0FBQyxHQUFHTCxPQUFPTSxRQUFRO1FBQ3ZDLElBQUksa0JBQWtCRCxhQUFhO1lBQy9CLE1BQU1BLFlBQVlFLFlBQVk7UUFDbEM7UUFDQUosUUFBUUU7SUFDWjtJQUNBLE9BQU9GO0FBQ1g7QUFDQSx1QkFBdUI7QUFDdkIsTUFBTUssdUJBQXVCO0FBQzdCLE1BQU1DLHFDQUFxQztBQUMzQyxNQUFNQyxxQ0FBcUM7QUFDM0MsTUFBTUMsaUNBQWlDO0FBQ3ZDLE1BQU1DLHNDQUFzQztBQUM1QyxNQUFNQywwQkFBMEI7QUFDaEMsTUFBTUMsdUJBQXVCO0FBQzdCLE1BQU1DLHNCQUFzQjtBQUM1QixNQUFNQyxhQUFhO0FBQ25CLE1BQU1DLGdCQUFnQixJQUFJQyxJQUFJO0lBQzFCO1FBQUNWO1FBQXNCO0tBQXVCO0lBQzlDO1FBQUNDO1FBQW9DO0tBQXFDO0lBQzFFO1FBQUNDO1FBQW9DO0tBQXFDO0lBQzFFO1FBQUNDO1FBQWdD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VSxDQUFDM0g7UUFDakcsT0FBT3dILE9BQ0ZDLEVBQUUsQ0FBQ1csUUFDSEMsVUFBVSxDQUFDQyxnQkFBZ0I7WUFBRUMsYUFBYTtnQkFBRUMsT0FBTztZQUFXO1FBQUUsR0FDaEVDLElBQUksQ0FBQyxDQUFDLEdBQUc1SyxPQUFPa0QsV0FBVyxFQUFFRCxTQUM3QmtILE9BQU87SUFDaEI7QUFDSjtBQUNBMUssb0JBQW9CLEdBQUdFLGNBQ3ZCLHlDQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY2xpZW50LXNpZGUtZW5jcnlwdGlvbi9zdGF0ZV9tYWNoaW5lLmpzPzhjYTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlN0YXRlTWFjaGluZSA9IHZvaWQgMDtcbmNvbnN0IGZzID0gcmVxdWlyZShcImZzL3Byb21pc2VzXCIpO1xuY29uc3QgbmV0ID0gcmVxdWlyZShcIm5ldFwiKTtcbmNvbnN0IHRscyA9IHJlcXVpcmUoXCJ0bHNcIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGRlcHNfMSA9IHJlcXVpcmUoXCIuLi9kZXBzXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGVycm9yc18xID0gcmVxdWlyZShcIi4vZXJyb3JzXCIpO1xubGV0IHNvY2tzID0gbnVsbDtcbmZ1bmN0aW9uIGxvYWRTb2NrcygpIHtcbiAgICBpZiAoc29ja3MgPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBzb2Nrc0ltcG9ydCA9ICgwLCBkZXBzXzEuZ2V0U29ja3MpKCk7XG4gICAgICAgIGlmICgna01vZHVsZUVycm9yJyBpbiBzb2Nrc0ltcG9ydCkge1xuICAgICAgICAgICAgdGhyb3cgc29ja3NJbXBvcnQua01vZHVsZUVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHNvY2tzID0gc29ja3NJbXBvcnQ7XG4gICAgfVxuICAgIHJldHVybiBzb2Nrcztcbn1cbi8vIGxpYm1vbmdvY3J5cHQgc3RhdGVzXG5jb25zdCBNT05HT0NSWVBUX0NUWF9FUlJPUiA9IDA7XG5jb25zdCBNT05HT0NSWVBUX0NUWF9ORUVEX01PTkdPX0NPTExJTkZPID0gMTtcbmNvbnN0IE1PTkdPQ1JZUFRfQ1RYX05FRURfTU9OR09fTUFSS0lOR1MgPSAyO1xuY29uc3QgTU9OR09DUllQVF9DVFhfTkVFRF9NT05HT19LRVlTID0gMztcbmNvbnN0IE1PTkdPQ1JZUFRfQ1RYX05FRURfS01TX0NSRURFTlRJQUxTID0gNztcbmNvbnN0IE1PTkdPQ1JZUFRfQ1RYX05FRURfS01TID0gNDtcbmNvbnN0IE1PTkdPQ1JZUFRfQ1RYX1JFQURZID0gNTtcbmNvbnN0IE1PTkdPQ1JZUFRfQ1RYX0RPTkUgPSA2O1xuY29uc3QgSFRUUFNfUE9SVCA9IDQ0MztcbmNvbnN0IHN0YXRlVG9TdHJpbmcgPSBuZXcgTWFwKFtcbiAgICBbTU9OR09DUllQVF9DVFhfRVJST1IsICdNT05HT0NSWVBUX0NUWF9FUlJPUiddLFxuICAgIFtNT05HT0NSWVBUX0NUWF9ORUVEX01PTkdPX0NPTExJTkZPLCAnTU9OR09DUllQVF9DVFhfTkVFRF9NT05HT19DT0xMSU5GTyddLFxuICAgIFtNT05HT0NSWVBUX0NUWF9ORUVEX01PTkdPX01BUktJTkdTLCAnTU9OR09DUllQVF9DVFhfTkVFRF9NT05HT19NQVJLSU5HUyddLFxuICAgIFtNT05HT0NSWVBUX0NUWF9ORUVEX01PTkdPX0tFWVMsICdNT05HT0NSWVBUX0NUWF9ORUVEX01PTkdPX0tFWVMnXSxcbiAgICBbTU9OR09DUllQVF9DVFhfTkVFRF9LTVNfQ1JFREVOVElBTFMsICdNT05HT0NSWVBUX0NUWF9ORUVEX0tNU19DUkVERU5USUFMUyddLFxuICAgIFtNT05HT0NSWVBUX0NUWF9ORUVEX0tNUywgJ01PTkdPQ1JZUFRfQ1RYX05FRURfS01TJ10sXG4gICAgW01PTkdPQ1JZUFRfQ1RYX1JFQURZLCAnTU9OR09DUllQVF9DVFhfUkVBRFknXSxcbiAgICBbTU9OR09DUllQVF9DVFhfRE9ORSwgJ01PTkdPQ1JZUFRfQ1RYX0RPTkUnXVxuXSk7XG5jb25zdCBJTlNFQ1VSRV9UTFNfT1BUSU9OUyA9IFtcbiAgICAndGxzSW5zZWN1cmUnLFxuICAgICd0bHNBbGxvd0ludmFsaWRDZXJ0aWZpY2F0ZXMnLFxuICAgICd0bHNBbGxvd0ludmFsaWRIb3N0bmFtZXMnLFxuICAgIC8vIFRoZXNlIG9wdGlvbnMgYXJlIGRpc2FsbG93ZWQgYnkgdGhlIHNwZWMsIHNvIHdlIGV4cGxpY2l0bHkgZmlsdGVyIHRoZW0gb3V0IGlmIHByb3ZpZGVkLCBldmVuXG4gICAgLy8gdGhvdWdoIHRoZSBTdGF0ZU1hY2hpbmUgZG9lcyBub3QgZGVjbGFyZSBzdXBwb3J0IGZvciB0aGVzZSBvcHRpb25zLlxuICAgICd0bHNEaXNhYmxlT0NTUEVuZHBvaW50Q2hlY2snLFxuICAgICd0bHNEaXNhYmxlQ2VydGlmaWNhdGVSZXZvY2F0aW9uQ2hlY2snXG5dO1xuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGxvZ2dpbmcuIEVuYWJsZWQgYnkgc2V0dGluZyB0aGUgZW52aXJvbm1lbnQgZmxhZyBNT05HT0RCX0NSWVBUX0RFQlVHLlxuICogQHBhcmFtIG1zZyAtIEFueXRoaW5nIHlvdSB3YW50IHRvIGJlIGxvZ2dlZC5cbiAqL1xuZnVuY3Rpb24gZGVidWcobXNnKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk1PTkdPREJfQ1JZUFRfREVCVUcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBBbiBpbnRlcm5hbCBjbGFzcyB0aGF0IGV4ZWN1dGVzIGFjcm9zcyBhIE1vbmdvQ3J5cHRDb250ZXh0IHVudGlsIGVpdGhlclxuICogYSBmaW5pc2hpbmcgc3RhdGUgb3IgYW4gZXJyb3IgaXMgcmVhY2hlZC4gRG8gbm90IGluc3RhbnRpYXRlIGRpcmVjdGx5LlxuICovXG5jbGFzcyBTdGF0ZU1hY2hpbmUge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGJzb25PcHRpb25zID0gKDAsIGJzb25fMS5wbHVja0JTT05TZXJpYWxpemVPcHRpb25zKShvcHRpb25zKSkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmJzb25PcHRpb25zID0gYnNvbk9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBzdGF0ZSBtYWNoaW5lIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvblxuICAgICAqL1xuICAgIGFzeW5jIGV4ZWN1dGUoZXhlY3V0b3IsIGNvbnRleHQpIHtcbiAgICAgICAgY29uc3Qga2V5VmF1bHROYW1lc3BhY2UgPSBleGVjdXRvci5fa2V5VmF1bHROYW1lc3BhY2U7XG4gICAgICAgIGNvbnN0IGtleVZhdWx0Q2xpZW50ID0gZXhlY3V0b3IuX2tleVZhdWx0Q2xpZW50O1xuICAgICAgICBjb25zdCBtZXRhRGF0YUNsaWVudCA9IGV4ZWN1dG9yLl9tZXRhRGF0YUNsaWVudDtcbiAgICAgICAgY29uc3QgbW9uZ29jcnlwdGRDbGllbnQgPSBleGVjdXRvci5fbW9uZ29jcnlwdGRDbGllbnQ7XG4gICAgICAgIGNvbnN0IG1vbmdvY3J5cHRkTWFuYWdlciA9IGV4ZWN1dG9yLl9tb25nb2NyeXB0ZE1hbmFnZXI7XG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgICAgICB3aGlsZSAoY29udGV4dC5zdGF0ZSAhPT0gTU9OR09DUllQVF9DVFhfRE9ORSAmJiBjb250ZXh0LnN0YXRlICE9PSBNT05HT0NSWVBUX0NUWF9FUlJPUikge1xuICAgICAgICAgICAgZGVidWcoYFtjb250ZXh0IyR7Y29udGV4dC5pZH1dICR7c3RhdGVUb1N0cmluZy5nZXQoY29udGV4dC5zdGF0ZSkgfHwgY29udGV4dC5zdGF0ZX1gKTtcbiAgICAgICAgICAgIHN3aXRjaCAoY29udGV4dC5zdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgTU9OR09DUllQVF9DVFhfTkVFRF9NT05HT19DT0xMSU5GTzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSAoMCwgYnNvbl8xLmRlc2VyaWFsaXplKShjb250ZXh0Lm5leHRNb25nb09wZXJhdGlvbigpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXRhRGF0YUNsaWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yc18xLk1vbmdvQ3J5cHRFcnJvcigndW5yZWFjaGFibGUgc3RhdGUgbWFjaGluZSBzdGF0ZTogZW50ZXJlZCBNT05HT0NSWVBUX0NUWF9ORUVEX01PTkdPX0NPTExJTkZPIGJ1dCBtZXRhZGF0YSBjbGllbnQgaXMgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sbEluZm8gPSBhd2FpdCB0aGlzLmZldGNoQ29sbGVjdGlvbkluZm8obWV0YURhdGFDbGllbnQsIGNvbnRleHQubnMsIGZpbHRlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xsSW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5hZGRNb25nb09wZXJhdGlvblJlc3BvbnNlKGNvbGxJbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbmlzaE1vbmdvT3BlcmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIE1PTkdPQ1JZUFRfQ1RYX05FRURfTU9OR09fTUFSS0lOR1M6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IGNvbnRleHQubmV4dE1vbmdvT3BlcmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbW9uZ29jcnlwdGRDbGllbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnNfMS5Nb25nb0NyeXB0RXJyb3IoJ3VucmVhY2hhYmxlIHN0YXRlIG1hY2hpbmUgc3RhdGU6IGVudGVyZWQgTU9OR09DUllQVF9DVFhfTkVFRF9NT05HT19NQVJLSU5HUyBidXQgbW9uZ29jcnlwdGRDbGllbnQgaXMgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgdXNpbmcgdGhlIHNoYXJlZCBsaWJyYXJ5LCB3ZSBkb24ndCBoYXZlIGEgbW9uZ29jcnlwdGQgbWFuYWdlci5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VkQ29tbWFuZCA9IG1vbmdvY3J5cHRkTWFuYWdlclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBhd2FpdCBtb25nb2NyeXB0ZE1hbmFnZXIud2l0aFJlc3Bhd24odGhpcy5tYXJrQ29tbWFuZC5iaW5kKHRoaXMsIG1vbmdvY3J5cHRkQ2xpZW50LCBjb250ZXh0Lm5zLCBjb21tYW5kKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5tYXJrQ29tbWFuZChtb25nb2NyeXB0ZENsaWVudCwgY29udGV4dC5ucywgY29tbWFuZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYWRkTW9uZ29PcGVyYXRpb25SZXNwb25zZShtYXJrZWRDb21tYW5kKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maW5pc2hNb25nb09wZXJhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSBNT05HT0NSWVBUX0NUWF9ORUVEX01PTkdPX0tFWVM6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gY29udGV4dC5uZXh0TW9uZ29PcGVyYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IGF3YWl0IHRoaXMuZmV0Y2hLZXlzKGtleVZhdWx0Q2xpZW50LCBrZXlWYXVsdE5hbWVzcGFjZSwgZmlsdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGtpbmQgb2YgYSBoYWNrLiAgRm9yIGByZXdyYXBNYW55RGF0YUtleWAsIHdlIGhhdmUgdGVzdHMgdGhhdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3VhcmFudGVlIHRoYXQgd2hlbiB0aGVyZSBhcmUgbm8gbWF0Y2hpbmcga2V5cywgYHJld3JhcE1hbnlEYXRhS2V5YCByZXR1cm5zXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nLiAgV2UgYWxzbyBoYXZlIHRlc3RzIGZvciBhdXRvIGVuY3J5cHRpb24gdGhhdCBndWFyYW50ZWUgZm9yIGBlbmNyeXB0YFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgcmV0dXJuIGFuIGVycm9yIHdoZW4gdGhlcmUgYXJlIG5vIG1hdGNoaW5nIGtleXMuICBUaGlzIGVycm9yIGlzIGdlbmVyYXRlZCBpblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3Vic2VxdWVudCBpdGVyYXRpb25zIG9mIHRoZSBzdGF0ZSBtYWNoaW5lLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29tZSBhcGlzIChgZW5jcnlwdGApIHRocm93IGlmIHRoZXJlIGFyZSBubyBmaWx0ZXIgbWF0Y2hlcyBhbmQgb3RoZXJzIChgcmV3cmFwTWFueURhdGFLZXlgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90LiAgV2Ugc2V0IHRoZSByZXN1bHQgbWFudWFsbHkgaGVyZSwgYW5kIGxldCB0aGUgc3RhdGUgbWFjaGluZSBjb250aW51ZS4gIGBsaWJtb25nb2NyeXB0YFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCBpbmZvcm0gdXMgaWYgd2UgbmVlZCB0byBlcnJvciBieSBzZXR0aW5nIHRoZSBzdGF0ZSB0byBgTU9OR09DUllQVF9DVFhfRVJST1JgIGJ1dFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlJ2xsIHJldHVybiBgeyB2OiBbXSB9YC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsgdjogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmFkZE1vbmdvT3BlcmF0aW9uUmVzcG9uc2UoKDAsIGJzb25fMS5zZXJpYWxpemUpKGtleSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmluaXNoTW9uZ29PcGVyYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgTU9OR09DUllQVF9DVFhfTkVFRF9LTVNfQ1JFREVOVElBTFM6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga21zUHJvdmlkZXJzID0gYXdhaXQgZXhlY3V0b3IuYXNrRm9yS01TQ3JlZGVudGlhbHMoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5wcm92aWRlS01TUHJvdmlkZXJzKCgwLCBic29uXzEuc2VyaWFsaXplKShrbXNQcm92aWRlcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgTU9OR09DUllQVF9DVFhfTkVFRF9LTVM6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdHMgPSBBcnJheS5mcm9tKHRoaXMucmVxdWVzdHMoY29udGV4dCkpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0cyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmluaXNoS01TUmVxdWVzdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgTU9OR09DUllQVF9DVFhfUkVBRFk6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxpemVkQ29udGV4dCA9IGNvbnRleHQuZmluYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBmaW5hbGl6ZSBjYW4gY2hhbmdlIHRoZSBzdGF0ZSwgY2hlY2sgZm9yIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnN0YXRlID09PSBNT05HT0NSWVBUX0NUWF9FUlJPUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGNvbnRleHQuc3RhdHVzLm1lc3NhZ2UgfHwgJ0ZpbmFsaXphdGlvbiBlcnJvcic7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICgwLCBic29uXzEuZGVzZXJpYWxpemUpKGZpbmFsaXplZENvbnRleHQsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEVycm9yKGBVbmtub3duIHN0YXRlOiAke2NvbnRleHQuc3RhdGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQuc3RhdGUgPT09IE1PTkdPQ1JZUFRfQ1RYX0VSUk9SIHx8IHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gY29udGV4dC5zdGF0dXMubWVzc2FnZTtcbiAgICAgICAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGRlYnVnKGB1bmlkZW50aWZpYWJsZSBlcnJvciBpbiBNb25nb0NyeXB0IC0gcmVjZWl2ZWQgYW4gZXJyb3Igc3RhdHVzIGZyb20gXFxgbGlibW9uZ29jcnlwdFxcYCBidXQgcmVjZWl2ZWQgbm8gZXJyb3IgbWVzc2FnZS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnNfMS5Nb25nb0NyeXB0RXJyb3IobWVzc2FnZSA/P1xuICAgICAgICAgICAgICAgICd1bmlkZW50aWZpYWJsZSBlcnJvciBpbiBNb25nb0NyeXB0IC0gcmVjZWl2ZWQgYW4gZXJyb3Igc3RhdHVzIGZyb20gYGxpYm1vbmdvY3J5cHRgIGJ1dCByZWNlaXZlZCBubyBlcnJvciBtZXNzYWdlLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHJlcXVlc3QgdG8gdGhlIEtNUyBzZXJ2aWNlLiBFeHBvc2VkIGZvciB0ZXN0aW5nIHB1cnBvc2VzLiBEbyBub3QgZGlyZWN0bHkgaW52b2tlLlxuICAgICAqIEBwYXJhbSBrbXNDb250ZXh0IC0gQSBDKysgS01TIGNvbnRleHQgcmV0dXJuZWQgZnJvbSB0aGUgYmluZGluZ3NcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBLTVMgcmVwbHkgaGFzIGJlIGZ1bGx5IHBhcnNlZFxuICAgICAqL1xuICAgIGFzeW5jIGttc1JlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICBjb25zdCBwYXJzZWRVcmwgPSByZXF1ZXN0LmVuZHBvaW50LnNwbGl0KCc6Jyk7XG4gICAgICAgIGNvbnN0IHBvcnQgPSBwYXJzZWRVcmxbMV0gIT0gbnVsbCA/IE51bWJlci5wYXJzZUludChwYXJzZWRVcmxbMV0sIDEwKSA6IEhUVFBTX1BPUlQ7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBob3N0OiBwYXJzZWRVcmxbMF0sXG4gICAgICAgICAgICBzZXJ2ZXJuYW1lOiBwYXJzZWRVcmxbMF0sXG4gICAgICAgICAgICBwb3J0XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXF1ZXN0Lm1lc3NhZ2U7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyB1dGlsc18xLkJ1ZmZlclBvb2woKTtcbiAgICAgICAgY29uc3QgbmV0U29ja2V0ID0gbmV3IG5ldC5Tb2NrZXQoKTtcbiAgICAgICAgbGV0IHNvY2tldDtcbiAgICAgICAgZnVuY3Rpb24gZGVzdHJveVNvY2tldHMoKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNvY2sgb2YgW3NvY2tldCwgbmV0U29ja2V0XSkge1xuICAgICAgICAgICAgICAgIGlmIChzb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvY2sucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgIHNvY2suZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBvbnRpbWVvdXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGVycm9yc18xLk1vbmdvQ3J5cHRFcnJvcignS01TIHJlcXVlc3QgdGltZWQgb3V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gb25lcnJvcihjYXVzZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBlcnJvcnNfMS5Nb25nb0NyeXB0RXJyb3IoJ0tNUyByZXF1ZXN0IGZhaWxlZCcsIHsgY2F1c2UgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZXJyb3JzXzEuTW9uZ29DcnlwdEVycm9yKCdLTVMgcmVxdWVzdCBjbG9zZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0bHNPcHRpb25zID0gdGhpcy5vcHRpb25zLnRsc09wdGlvbnM7XG4gICAgICAgIGlmICh0bHNPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBrbXNQcm92aWRlciA9IHJlcXVlc3Qua21zUHJvdmlkZXI7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlclRsc09wdGlvbnMgPSB0bHNPcHRpb25zW2ttc1Byb3ZpZGVyXTtcbiAgICAgICAgICAgIGlmIChwcm92aWRlclRsc09wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMudmFsaWRhdGVUbHNPcHRpb25zKGttc1Byb3ZpZGVyLCBwcm92aWRlclRsc09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRUbHNPcHRpb25zKHByb3ZpZGVyVGxzT3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgb25lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHByb21pc2U6IHdpbGxDb25uZWN0LCByZWplY3Q6IHJlamVjdE9uTmV0U29ja2V0RXJyb3IsIHJlc29sdmU6IHJlc29sdmVPbk5ldFNvY2tldENvbm5lY3QgfSA9ICgwLCB1dGlsc18xLnByb21pc2VXaXRoUmVzb2x2ZXJzKSgpO1xuICAgICAgICBuZXRTb2NrZXRcbiAgICAgICAgICAgIC5vbmNlKCd0aW1lb3V0JywgKCkgPT4gcmVqZWN0T25OZXRTb2NrZXRFcnJvcihvbnRpbWVvdXQoKSkpXG4gICAgICAgICAgICAub25jZSgnZXJyb3InLCBlcnIgPT4gcmVqZWN0T25OZXRTb2NrZXRFcnJvcihvbmVycm9yKGVycikpKVxuICAgICAgICAgICAgLm9uY2UoJ2Nsb3NlJywgKCkgPT4gcmVqZWN0T25OZXRTb2NrZXRFcnJvcihvbmNsb3NlKCkpKVxuICAgICAgICAgICAgLm9uY2UoJ2Nvbm5lY3QnLCAoKSA9PiByZXNvbHZlT25OZXRTb2NrZXRDb25uZWN0KCkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcm94eU9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnByb3h5T3B0aW9ucy5wcm94eUhvc3QpIHtcbiAgICAgICAgICAgICAgICBuZXRTb2NrZXQuY29ubmVjdCh7XG4gICAgICAgICAgICAgICAgICAgIGhvc3Q6IHRoaXMub3B0aW9ucy5wcm94eU9wdGlvbnMucHJveHlIb3N0LFxuICAgICAgICAgICAgICAgICAgICBwb3J0OiB0aGlzLm9wdGlvbnMucHJveHlPcHRpb25zLnByb3h5UG9ydCB8fCAxMDgwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgd2lsbENvbm5lY3Q7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc29ja3MgPz89IGxvYWRTb2NrcygpO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNvY2tldCA9IChhd2FpdCBzb2Nrcy5Tb2Nrc0NsaWVudC5jcmVhdGVDb25uZWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nX3NvY2tldDogbmV0U29ja2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogJ2Nvbm5lY3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb246IHsgaG9zdDogb3B0aW9ucy5ob3N0LCBwb3J0OiBvcHRpb25zLnBvcnQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaG9zdCBhbmQgcG9ydCBhcmUgaWdub3JlZCBiZWNhdXNlIHdlIHBhc3MgZXhpc3Rpbmdfc29ja2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9zdDogJ2lMb3ZlSmF2YVNjcmlwdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9ydDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdGhpcy5vcHRpb25zLnByb3h5T3B0aW9ucy5wcm94eVVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLm9wdGlvbnMucHJveHlPcHRpb25zLnByb3h5UGFzc3dvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpLnNvY2tldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBvbmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc29ja2V0ID0gdGxzLmNvbm5lY3Qob3B0aW9ucywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNvY2tldC53cml0ZShtZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgeyBwcm9taXNlOiB3aWxsUmVzb2x2ZUttc1JlcXVlc3QsIHJlamVjdDogcmVqZWN0T25UbHNTb2NrZXRFcnJvciwgcmVzb2x2ZSB9ID0gKDAsIHV0aWxzXzEucHJvbWlzZVdpdGhSZXNvbHZlcnMpKCk7XG4gICAgICAgICAgICBzb2NrZXRcbiAgICAgICAgICAgICAgICAub25jZSgndGltZW91dCcsICgpID0+IHJlamVjdE9uVGxzU29ja2V0RXJyb3Iob250aW1lb3V0KCkpKVxuICAgICAgICAgICAgICAgIC5vbmNlKCdlcnJvcicsIGVyciA9PiByZWplY3RPblRsc1NvY2tldEVycm9yKG9uZXJyb3IoZXJyKSkpXG4gICAgICAgICAgICAgICAgLm9uY2UoJ2Nsb3NlJywgKCkgPT4gcmVqZWN0T25UbHNTb2NrZXRFcnJvcihvbmNsb3NlKCkpKVxuICAgICAgICAgICAgICAgIC5vbignZGF0YScsIGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgIGJ1ZmZlci5hcHBlbmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlcXVlc3QuYnl0ZXNOZWVkZWQgPiAwICYmIGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnl0ZXNOZWVkZWQgPSBNYXRoLm1pbihyZXF1ZXN0LmJ5dGVzTmVlZGVkLCBidWZmZXIubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5hZGRSZXNwb25zZShidWZmZXIucmVhZChieXRlc05lZWRlZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5ieXRlc05lZWRlZCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHdpbGxSZXNvbHZlS21zUmVxdWVzdDtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIC8vIFRoZXJlJ3Mgbm8gbmVlZCBmb3IgYW55IG1vcmUgYWN0aXZpdHkgb24gdGhpcyBzb2NrZXQgYXQgdGhpcyBwb2ludC5cbiAgICAgICAgICAgIGRlc3Ryb3lTb2NrZXRzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgKnJlcXVlc3RzKGNvbnRleHQpIHtcbiAgICAgICAgZm9yIChsZXQgcmVxdWVzdCA9IGNvbnRleHQubmV4dEtNU1JlcXVlc3QoKTsgcmVxdWVzdCAhPSBudWxsOyByZXF1ZXN0ID0gY29udGV4dC5uZXh0S01TUmVxdWVzdCgpKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmttc1JlcXVlc3QocmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBUTFMgb3B0aW9ucyBhcmUgc2VjdXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGttc1Byb3ZpZGVyIC0gVGhlIEtNUyBwcm92aWRlciBuYW1lLlxuICAgICAqIEBwYXJhbSB0bHNPcHRpb25zIC0gVGhlIGNsaWVudCBUTFMgb3B0aW9ucyBmb3IgdGhlIHByb3ZpZGVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gZXJyb3IgaWYgYW55IG9wdGlvbiBpcyBpbnZhbGlkLlxuICAgICAqL1xuICAgIHZhbGlkYXRlVGxzT3B0aW9ucyhrbXNQcm92aWRlciwgdGxzT3B0aW9ucykge1xuICAgICAgICBjb25zdCB0bHNPcHRpb25OYW1lcyA9IE9iamVjdC5rZXlzKHRsc09wdGlvbnMpO1xuICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBJTlNFQ1VSRV9UTFNfT1BUSU9OUykge1xuICAgICAgICAgICAgaWYgKHRsc09wdGlvbk5hbWVzLmluY2x1ZGVzKG9wdGlvbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVycm9yc18xLk1vbmdvQ3J5cHRFcnJvcihgSW5zZWN1cmUgVExTIG9wdGlvbnMgcHJvaGliaXRlZCBmb3IgJHtrbXNQcm92aWRlcn06ICR7b3B0aW9ufWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgb25seSB0aGUgdmFsaWQgc2VjdXJlIFRMUyBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRsc09wdGlvbnMgLSBUaGUgY2xpZW50IFRMUyBvcHRpb25zIGZvciB0aGUgcHJvdmlkZXIuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgZXhpc3RpbmcgY29ubmVjdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGFzeW5jIHNldFRsc09wdGlvbnModGxzT3B0aW9ucywgb3B0aW9ucykge1xuICAgICAgICBpZiAodGxzT3B0aW9ucy50bHNDZXJ0aWZpY2F0ZUtleUZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlcnQgPSBhd2FpdCBmcy5yZWFkRmlsZSh0bHNPcHRpb25zLnRsc0NlcnRpZmljYXRlS2V5RmlsZSk7XG4gICAgICAgICAgICBvcHRpb25zLmNlcnQgPSBvcHRpb25zLmtleSA9IGNlcnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRsc09wdGlvbnMudGxzQ0FGaWxlKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNhID0gYXdhaXQgZnMucmVhZEZpbGUodGxzT3B0aW9ucy50bHNDQUZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0bHNPcHRpb25zLnRsc0NlcnRpZmljYXRlS2V5RmlsZVBhc3N3b3JkKSB7XG4gICAgICAgICAgICBvcHRpb25zLnBhc3NwaHJhc2UgPSB0bHNPcHRpb25zLnRsc0NlcnRpZmljYXRlS2V5RmlsZVBhc3N3b3JkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgY29sbGVjdGlvbiBpbmZvIGZvciBhIHByb3ZpZGVkIG5hbWVzcGFjZSwgd2hlbiBsaWJtb25nb2NyeXB0XG4gICAgICogZW50ZXJzIHRoZSBgTU9OR09DUllQVF9DVFhfTkVFRF9NT05HT19DT0xMSU5GT2Agc3RhdGUuIFRoZSByZXN1bHQgaXNcbiAgICAgKiB1c2VkIHRvIGluZm9ybSBsaWJtb25nb2NyeXB0IG9mIHRoZSBzY2hlbWEgYXNzb2NpYXRlZCB3aXRoIHRoaXNcbiAgICAgKiBuYW1lc3BhY2UuIEV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMuIERvIG5vdCBkaXJlY3RseSBpbnZva2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2xpZW50IC0gQSBNb25nb0NsaWVudCBjb25uZWN0ZWQgdG8gdGhlIHRvcG9sb2d5XG4gICAgICogQHBhcmFtIG5zIC0gVGhlIG5hbWVzcGFjZSB0byBsaXN0IGNvbGxlY3Rpb25zIGZyb21cbiAgICAgKiBAcGFyYW0gZmlsdGVyIC0gQSBmaWx0ZXIgZm9yIHRoZSBsaXN0Q29sbGVjdGlvbnMgY29tbWFuZFxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEludm9rZWQgd2l0aCB0aGUgaW5mbyBvZiB0aGUgcmVxdWVzdGVkIGNvbGxlY3Rpb24sIG9yIHdpdGggYW4gZXJyb3JcbiAgICAgKi9cbiAgICBhc3luYyBmZXRjaENvbGxlY3Rpb25JbmZvKGNsaWVudCwgbnMsIGZpbHRlcikge1xuICAgICAgICBjb25zdCB7IGRiIH0gPSB1dGlsc18xLk1vbmdvREJDb2xsZWN0aW9uTmFtZXNwYWNlLmZyb21TdHJpbmcobnMpO1xuICAgICAgICBjb25zdCBjb2xsZWN0aW9ucyA9IGF3YWl0IGNsaWVudFxuICAgICAgICAgICAgLmRiKGRiKVxuICAgICAgICAgICAgLmxpc3RDb2xsZWN0aW9ucyhmaWx0ZXIsIHtcbiAgICAgICAgICAgIHByb21vdGVMb25nczogZmFsc2UsXG4gICAgICAgICAgICBwcm9tb3RlVmFsdWVzOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRvQXJyYXkoKTtcbiAgICAgICAgY29uc3QgaW5mbyA9IGNvbGxlY3Rpb25zLmxlbmd0aCA+IDAgPyAoMCwgYnNvbl8xLnNlcmlhbGl6ZSkoY29sbGVjdGlvbnNbMF0pIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxzIHRvIHRoZSBtb25nb2NyeXB0ZCB0byBwcm92aWRlIG1hcmtpbmdzIGZvciBhIGNvbW1hbmQuXG4gICAgICogRXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3Nlcy4gRG8gbm90IGRpcmVjdGx5IGludm9rZS5cbiAgICAgKiBAcGFyYW0gY2xpZW50IC0gQSBNb25nb0NsaWVudCBjb25uZWN0ZWQgdG8gYSBtb25nb2NyeXB0ZFxuICAgICAqIEBwYXJhbSBucyAtIFRoZSBuYW1lc3BhY2UgKGRhdGFiYXNlLmNvbGxlY3Rpb24pIHRoZSBjb21tYW5kIGlzIGJlaW5nIGV4ZWN1dGVkIG9uXG4gICAgICogQHBhcmFtIGNvbW1hbmQgLSBUaGUgY29tbWFuZCB0byBleGVjdXRlLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEludm9rZWQgd2l0aCB0aGUgc2VyaWFsaXplZCBhbmQgbWFya2VkIGJzb24gY29tbWFuZCwgb3Igd2l0aCBhbiBlcnJvclxuICAgICAqL1xuICAgIGFzeW5jIG1hcmtDb21tYW5kKGNsaWVudCwgbnMsIGNvbW1hbmQpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgcHJvbW90ZUxvbmdzOiBmYWxzZSwgcHJvbW90ZVZhbHVlczogZmFsc2UgfTtcbiAgICAgICAgY29uc3QgeyBkYiB9ID0gdXRpbHNfMS5Nb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZS5mcm9tU3RyaW5nKG5zKTtcbiAgICAgICAgY29uc3QgcmF3Q29tbWFuZCA9ICgwLCBic29uXzEuZGVzZXJpYWxpemUpKGNvbW1hbmQsIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5kYihkYikuY29tbWFuZChyYXdDb21tYW5kLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuICgwLCBic29uXzEuc2VyaWFsaXplKShyZXNwb25zZSwgdGhpcy5ic29uT3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcXVlc3RzIGtleXMgZnJvbSB0aGUga2V5VmF1bHQgY29sbGVjdGlvbiBvbiB0aGUgdG9wb2xvZ3kuXG4gICAgICogRXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3Nlcy4gRG8gbm90IGRpcmVjdGx5IGludm9rZS5cbiAgICAgKiBAcGFyYW0gY2xpZW50IC0gQSBNb25nb0NsaWVudCBjb25uZWN0ZWQgdG8gdGhlIHRvcG9sb2d5XG4gICAgICogQHBhcmFtIGtleVZhdWx0TmFtZXNwYWNlIC0gVGhlIG5hbWVzcGFjZSAoZGF0YWJhc2UuY29sbGVjdGlvbikgb2YgdGhlIGtleVZhdWx0IENvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0gZmlsdGVyIC0gVGhlIGZpbHRlciBmb3IgdGhlIGZpbmQgcXVlcnkgYWdhaW5zdCB0aGUga2V5VmF1bHQgQ29sbGVjdGlvblxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEludm9rZWQgd2l0aCB0aGUgZm91bmQga2V5cywgb3Igd2l0aCBhbiBlcnJvclxuICAgICAqL1xuICAgIGZldGNoS2V5cyhjbGllbnQsIGtleVZhdWx0TmFtZXNwYWNlLCBmaWx0ZXIpIHtcbiAgICAgICAgY29uc3QgeyBkYjogZGJOYW1lLCBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uTmFtZSB9ID0gdXRpbHNfMS5Nb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZS5mcm9tU3RyaW5nKGtleVZhdWx0TmFtZXNwYWNlKTtcbiAgICAgICAgcmV0dXJuIGNsaWVudFxuICAgICAgICAgICAgLmRiKGRiTmFtZSlcbiAgICAgICAgICAgIC5jb2xsZWN0aW9uKGNvbGxlY3Rpb25OYW1lLCB7IHJlYWRDb25jZXJuOiB7IGxldmVsOiAnbWFqb3JpdHknIH0gfSlcbiAgICAgICAgICAgIC5maW5kKCgwLCBic29uXzEuZGVzZXJpYWxpemUpKGZpbHRlcikpXG4gICAgICAgICAgICAudG9BcnJheSgpO1xuICAgIH1cbn1cbmV4cG9ydHMuU3RhdGVNYWNoaW5lID0gU3RhdGVNYWNoaW5lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGVfbWFjaGluZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTdGF0ZU1hY2hpbmUiLCJmcyIsInJlcXVpcmUiLCJuZXQiLCJ0bHMiLCJic29uXzEiLCJkZXBzXzEiLCJ1dGlsc18xIiwiZXJyb3JzXzEiLCJzb2NrcyIsImxvYWRTb2NrcyIsInNvY2tzSW1wb3J0IiwiZ2V0U29ja3MiLCJrTW9kdWxlRXJyb3IiLCJNT05HT0NSWVBUX0NUWF9FUlJPUiIsIk1PTkdPQ1JZUFRfQ1RYX05FRURfTU9OR09fQ09MTElORk8iLCJNT05HT0NSWVBUX0NUWF9ORUVEX01PTkdPX01BUktJTkdTIiwiTU9OR09DUllQVF9DVFhfTkVFRF9NT05HT19LRVlTIiwiTU9OR09DUllQVF9DVFhfTkVFRF9LTVNfQ1JFREVOVElBTFMiLCJNT05HT0NSWVBUX0NUWF9ORUVEX0tNUyIsIk1PTkdPQ1JZUFRfQ1RYX1JFQURZIiwiTU9OR09DUllQVF9DVFhfRE9ORSIsIkhUVFBTX1BPUlQiLCJzdGF0ZVRvU3RyaW5nIiwiTWFwIiwiSU5TRUNVUkVfVExTX09QVElPTlMiLCJkZWJ1ZyIsIm1zZyIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX0NSWVBUX0RFQlVHIiwiY29uc29sZSIsImVycm9yIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwiYnNvbk9wdGlvbnMiLCJwbHVja0JTT05TZXJpYWxpemVPcHRpb25zIiwiZXhlY3V0ZSIsImV4ZWN1dG9yIiwiY29udGV4dCIsImtleVZhdWx0TmFtZXNwYWNlIiwiX2tleVZhdWx0TmFtZXNwYWNlIiwia2V5VmF1bHRDbGllbnQiLCJfa2V5VmF1bHRDbGllbnQiLCJtZXRhRGF0YUNsaWVudCIsIl9tZXRhRGF0YUNsaWVudCIsIm1vbmdvY3J5cHRkQ2xpZW50IiwiX21vbmdvY3J5cHRkQ2xpZW50IiwibW9uZ29jcnlwdGRNYW5hZ2VyIiwiX21vbmdvY3J5cHRkTWFuYWdlciIsInJlc3VsdCIsInN0YXRlIiwiaWQiLCJnZXQiLCJmaWx0ZXIiLCJkZXNlcmlhbGl6ZSIsIm5leHRNb25nb09wZXJhdGlvbiIsIk1vbmdvQ3J5cHRFcnJvciIsImNvbGxJbmZvIiwiZmV0Y2hDb2xsZWN0aW9uSW5mbyIsIm5zIiwiYWRkTW9uZ29PcGVyYXRpb25SZXNwb25zZSIsImZpbmlzaE1vbmdvT3BlcmF0aW9uIiwiY29tbWFuZCIsIm1hcmtlZENvbW1hbmQiLCJ3aXRoUmVzcGF3biIsIm1hcmtDb21tYW5kIiwiYmluZCIsImtleXMiLCJmZXRjaEtleXMiLCJsZW5ndGgiLCJ2Iiwia2V5Iiwic2VyaWFsaXplIiwia21zUHJvdmlkZXJzIiwiYXNrRm9yS01TQ3JlZGVudGlhbHMiLCJwcm92aWRlS01TUHJvdmlkZXJzIiwicmVxdWVzdHMiLCJBcnJheSIsImZyb20iLCJQcm9taXNlIiwiYWxsIiwiZmluaXNoS01TUmVxdWVzdHMiLCJmaW5hbGl6ZWRDb250ZXh0IiwiZmluYWxpemUiLCJtZXNzYWdlIiwic3RhdHVzIiwia21zUmVxdWVzdCIsInJlcXVlc3QiLCJwYXJzZWRVcmwiLCJlbmRwb2ludCIsInNwbGl0IiwicG9ydCIsIk51bWJlciIsInBhcnNlSW50IiwiaG9zdCIsInNlcnZlcm5hbWUiLCJidWZmZXIiLCJCdWZmZXJQb29sIiwibmV0U29ja2V0IiwiU29ja2V0Iiwic29ja2V0IiwiZGVzdHJveVNvY2tldHMiLCJzb2NrIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZGVzdHJveSIsIm9udGltZW91dCIsIm9uZXJyb3IiLCJjYXVzZSIsIm9uY2xvc2UiLCJ0bHNPcHRpb25zIiwia21zUHJvdmlkZXIiLCJwcm92aWRlclRsc09wdGlvbnMiLCJ2YWxpZGF0ZVRsc09wdGlvbnMiLCJzZXRUbHNPcHRpb25zIiwiZXJyIiwicHJvbWlzZSIsIndpbGxDb25uZWN0IiwicmVqZWN0IiwicmVqZWN0T25OZXRTb2NrZXRFcnJvciIsInJlc29sdmUiLCJyZXNvbHZlT25OZXRTb2NrZXRDb25uZWN0IiwicHJvbWlzZVdpdGhSZXNvbHZlcnMiLCJvbmNlIiwicHJveHlPcHRpb25zIiwicHJveHlIb3N0IiwiY29ubmVjdCIsInByb3h5UG9ydCIsIlNvY2tzQ2xpZW50IiwiY3JlYXRlQ29ubmVjdGlvbiIsImV4aXN0aW5nX3NvY2tldCIsImRlc3RpbmF0aW9uIiwicHJveHkiLCJ0eXBlIiwidXNlcklkIiwicHJveHlVc2VybmFtZSIsInBhc3N3b3JkIiwicHJveHlQYXNzd29yZCIsIndyaXRlIiwid2lsbFJlc29sdmVLbXNSZXF1ZXN0IiwicmVqZWN0T25UbHNTb2NrZXRFcnJvciIsIm9uIiwiZGF0YSIsImFwcGVuZCIsImJ5dGVzTmVlZGVkIiwiTWF0aCIsIm1pbiIsImFkZFJlc3BvbnNlIiwicmVhZCIsIm5leHRLTVNSZXF1ZXN0IiwidGxzT3B0aW9uTmFtZXMiLCJvcHRpb24iLCJpbmNsdWRlcyIsInRsc0NlcnRpZmljYXRlS2V5RmlsZSIsImNlcnQiLCJyZWFkRmlsZSIsInRsc0NBRmlsZSIsImNhIiwidGxzQ2VydGlmaWNhdGVLZXlGaWxlUGFzc3dvcmQiLCJwYXNzcGhyYXNlIiwiY2xpZW50IiwiZGIiLCJNb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZSIsImZyb21TdHJpbmciLCJjb2xsZWN0aW9ucyIsImxpc3RDb2xsZWN0aW9ucyIsInByb21vdGVMb25ncyIsInByb21vdGVWYWx1ZXMiLCJ0b0FycmF5IiwiaW5mbyIsInJhd0NvbW1hbmQiLCJyZXNwb25zZSIsImRiTmFtZSIsImNvbGxlY3Rpb24iLCJjb2xsZWN0aW9uTmFtZSIsInJlYWRDb25jZXJuIiwibGV2ZWwiLCJmaW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/client-side-encryption/state_machine.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js":
/*!*************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/auth_provider.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AuthProvider = exports.AuthContext = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/**\n * Context used during authentication\n * @internal\n */ class AuthContext {\n    constructor(connection, credentials, options){\n        /** If the context is for reauthentication. */ this.reauthenticating = false;\n        this.connection = connection;\n        this.credentials = credentials;\n        this.options = options;\n    }\n}\nexports.AuthContext = AuthContext;\n/**\n * Provider used during authentication.\n * @internal\n */ class AuthProvider {\n    /**\n     * Prepare the handshake document before the initial handshake.\n     *\n     * @param handshakeDoc - The document used for the initial handshake on a connection\n     * @param authContext - Context for authentication flow\n     */ async prepare(handshakeDoc, _authContext) {\n        return handshakeDoc;\n    }\n    /**\n     * Reauthenticate.\n     * @param context - The shared auth context.\n     */ async reauth(context) {\n        if (context.reauthenticating) {\n            throw new error_1.MongoRuntimeError(\"Reauthentication already in progress.\");\n        }\n        try {\n            context.reauthenticating = true;\n            await this.auth(context);\n        } finally{\n            context.reauthenticating = false;\n        }\n    }\n}\nexports.AuthProvider = AuthProvider; //# sourceMappingURL=auth_provider.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL2F1dGhfcHJvdmlkZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHQSxtQkFBbUIsR0FBRyxLQUFLO0FBQ2xELE1BQU1JLFVBQVVDLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDOzs7Q0FHQyxHQUNELE1BQU1GO0lBQ0ZHLFlBQVlDLFVBQVUsRUFBRUMsV0FBVyxFQUFFQyxPQUFPLENBQUU7UUFDMUMsNENBQTRDLEdBQzVDLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUc7UUFDeEIsSUFBSSxDQUFDSCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsV0FBVyxHQUFHQTtRQUNuQixJQUFJLENBQUNDLE9BQU8sR0FBR0E7SUFDbkI7QUFDSjtBQUNBVCxtQkFBbUIsR0FBR0c7QUFDdEI7OztDQUdDLEdBQ0QsTUFBTUQ7SUFDRjs7Ozs7S0FLQyxHQUNELE1BQU1TLFFBQVFDLFlBQVksRUFBRUMsWUFBWSxFQUFFO1FBQ3RDLE9BQU9EO0lBQ1g7SUFDQTs7O0tBR0MsR0FDRCxNQUFNRSxPQUFPQyxPQUFPLEVBQUU7UUFDbEIsSUFBSUEsUUFBUUwsZ0JBQWdCLEVBQUU7WUFDMUIsTUFBTSxJQUFJTixRQUFRWSxpQkFBaUIsQ0FBQztRQUN4QztRQUNBLElBQUk7WUFDQUQsUUFBUUwsZ0JBQWdCLEdBQUc7WUFDM0IsTUFBTSxJQUFJLENBQUNPLElBQUksQ0FBQ0Y7UUFDcEIsU0FDUTtZQUNKQSxRQUFRTCxnQkFBZ0IsR0FBRztRQUMvQjtJQUNKO0FBQ0o7QUFDQVYsb0JBQW9CLEdBQUdFLGNBQ3ZCLHlDQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL2F1dGhfcHJvdmlkZXIuanM/MmU1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQXV0aFByb3ZpZGVyID0gZXhwb3J0cy5BdXRoQ29udGV4dCA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vZXJyb3JcIik7XG4vKipcbiAqIENvbnRleHQgdXNlZCBkdXJpbmcgYXV0aGVudGljYXRpb25cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBBdXRoQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgLyoqIElmIHRoZSBjb250ZXh0IGlzIGZvciByZWF1dGhlbnRpY2F0aW9uLiAqL1xuICAgICAgICB0aGlzLnJlYXV0aGVudGljYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGNyZWRlbnRpYWxzO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbn1cbmV4cG9ydHMuQXV0aENvbnRleHQgPSBBdXRoQ29udGV4dDtcbi8qKlxuICogUHJvdmlkZXIgdXNlZCBkdXJpbmcgYXV0aGVudGljYXRpb24uXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQXV0aFByb3ZpZGVyIHtcbiAgICAvKipcbiAgICAgKiBQcmVwYXJlIHRoZSBoYW5kc2hha2UgZG9jdW1lbnQgYmVmb3JlIHRoZSBpbml0aWFsIGhhbmRzaGFrZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBoYW5kc2hha2VEb2MgLSBUaGUgZG9jdW1lbnQgdXNlZCBmb3IgdGhlIGluaXRpYWwgaGFuZHNoYWtlIG9uIGEgY29ubmVjdGlvblxuICAgICAqIEBwYXJhbSBhdXRoQ29udGV4dCAtIENvbnRleHQgZm9yIGF1dGhlbnRpY2F0aW9uIGZsb3dcbiAgICAgKi9cbiAgICBhc3luYyBwcmVwYXJlKGhhbmRzaGFrZURvYywgX2F1dGhDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBoYW5kc2hha2VEb2M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYXV0aGVudGljYXRlLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIHNoYXJlZCBhdXRoIGNvbnRleHQuXG4gICAgICovXG4gICAgYXN5bmMgcmVhdXRoKGNvbnRleHQpIHtcbiAgICAgICAgaWYgKGNvbnRleHQucmVhdXRoZW50aWNhdGluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ1JlYXV0aGVudGljYXRpb24gYWxyZWFkeSBpbiBwcm9ncmVzcy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29udGV4dC5yZWF1dGhlbnRpY2F0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXV0aChjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNvbnRleHQucmVhdXRoZW50aWNhdGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5BdXRoUHJvdmlkZXIgPSBBdXRoUHJvdmlkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdXRoX3Byb3ZpZGVyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkF1dGhQcm92aWRlciIsIkF1dGhDb250ZXh0IiwiZXJyb3JfMSIsInJlcXVpcmUiLCJjb25zdHJ1Y3RvciIsImNvbm5lY3Rpb24iLCJjcmVkZW50aWFscyIsIm9wdGlvbnMiLCJyZWF1dGhlbnRpY2F0aW5nIiwicHJlcGFyZSIsImhhbmRzaGFrZURvYyIsIl9hdXRoQ29udGV4dCIsInJlYXV0aCIsImNvbnRleHQiLCJNb25nb1J1bnRpbWVFcnJvciIsImF1dGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js":
/*!******************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/gssapi.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.resolveCname = exports.performGSSAPICanonicalizeHostName = exports.GSSAPI = exports.GSSAPICanonicalizationValue = void 0;\nconst dns = __webpack_require__(/*! dns */ \"dns\");\nconst deps_1 = __webpack_require__(/*! ../../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\n/** @public */ exports.GSSAPICanonicalizationValue = Object.freeze({\n    on: true,\n    off: false,\n    none: \"none\",\n    forward: \"forward\",\n    forwardAndReverse: \"forwardAndReverse\"\n});\nasync function externalCommand(connection, command) {\n    return connection.command((0, utils_1.ns)(\"$external.$cmd\"), command, undefined);\n}\nlet krb;\nclass GSSAPI extends auth_provider_1.AuthProvider {\n    async auth(authContext) {\n        const { connection, credentials } = authContext;\n        if (credentials == null) {\n            throw new error_1.MongoMissingCredentialsError(\"Credentials required for GSSAPI authentication\");\n        }\n        const { username } = credentials;\n        const client = await makeKerberosClient(authContext);\n        const payload = await client.step(\"\");\n        const saslStartResponse = await externalCommand(connection, saslStart(payload));\n        const negotiatedPayload = await negotiate(client, 10, saslStartResponse.payload);\n        const saslContinueResponse = await externalCommand(connection, saslContinue(negotiatedPayload, saslStartResponse.conversationId));\n        const finalizePayload = await finalize(client, username, saslContinueResponse.payload);\n        await externalCommand(connection, {\n            saslContinue: 1,\n            conversationId: saslContinueResponse.conversationId,\n            payload: finalizePayload\n        });\n    }\n}\nexports.GSSAPI = GSSAPI;\nasync function makeKerberosClient(authContext) {\n    const { hostAddress } = authContext.options;\n    const { credentials } = authContext;\n    if (!hostAddress || typeof hostAddress.host !== \"string\" || !credentials) {\n        throw new error_1.MongoInvalidArgumentError(\"Connection must have host and port and credentials defined.\");\n    }\n    loadKrb();\n    if (\"kModuleError\" in krb) {\n        throw krb[\"kModuleError\"];\n    }\n    const { initializeClient } = krb;\n    const { username, password } = credentials;\n    const mechanismProperties = credentials.mechanismProperties;\n    const serviceName = mechanismProperties.SERVICE_NAME ?? \"mongodb\";\n    const host = await performGSSAPICanonicalizeHostName(hostAddress.host, mechanismProperties);\n    const initOptions = {};\n    if (password != null) {\n        // TODO(NODE-5139): These do not match the typescript options in initializeClient\n        Object.assign(initOptions, {\n            user: username,\n            password: password\n        });\n    }\n    const spnHost = mechanismProperties.SERVICE_HOST ?? host;\n    let spn = `${serviceName}${process.platform === \"win32\" ? \"/\" : \"@\"}${spnHost}`;\n    if (\"SERVICE_REALM\" in mechanismProperties) {\n        spn = `${spn}@${mechanismProperties.SERVICE_REALM}`;\n    }\n    return initializeClient(spn, initOptions);\n}\nfunction saslStart(payload) {\n    return {\n        saslStart: 1,\n        mechanism: \"GSSAPI\",\n        payload,\n        autoAuthorize: 1\n    };\n}\nfunction saslContinue(payload, conversationId) {\n    return {\n        saslContinue: 1,\n        conversationId,\n        payload\n    };\n}\nasync function negotiate(client, retries, payload) {\n    try {\n        const response = await client.step(payload);\n        return response || \"\";\n    } catch (error) {\n        if (retries === 0) {\n            // Retries exhausted, raise error\n            throw error;\n        }\n        // Adjust number of retries and call step again\n        return negotiate(client, retries - 1, payload);\n    }\n}\nasync function finalize(client, user, payload) {\n    // GSS Client Unwrap\n    const response = await client.unwrap(payload);\n    return client.wrap(response || \"\", {\n        user\n    });\n}\nasync function performGSSAPICanonicalizeHostName(host, mechanismProperties) {\n    const mode = mechanismProperties.CANONICALIZE_HOST_NAME;\n    if (!mode || mode === exports.GSSAPICanonicalizationValue.none) {\n        return host;\n    }\n    // If forward and reverse or true\n    if (mode === exports.GSSAPICanonicalizationValue.on || mode === exports.GSSAPICanonicalizationValue.forwardAndReverse) {\n        // Perform the lookup of the ip address.\n        const { address } = await dns.promises.lookup(host);\n        try {\n            // Perform a reverse ptr lookup on the ip address.\n            const results = await dns.promises.resolvePtr(address);\n            // If the ptr did not error but had no results, return the host.\n            return results.length > 0 ? results[0] : host;\n        } catch (error) {\n            // This can error as ptr records may not exist for all ips. In this case\n            // fallback to a cname lookup as dns.lookup() does not return the\n            // cname.\n            return resolveCname(host);\n        }\n    } else {\n        // The case for forward is just to resolve the cname as dns.lookup()\n        // will not return it.\n        return resolveCname(host);\n    }\n}\nexports.performGSSAPICanonicalizeHostName = performGSSAPICanonicalizeHostName;\nasync function resolveCname(host) {\n    // Attempt to resolve the host name\n    try {\n        const results = await dns.promises.resolveCname(host);\n        // Get the first resolved host id\n        return results.length > 0 ? results[0] : host;\n    } catch  {\n        return host;\n    }\n}\nexports.resolveCname = resolveCname;\n/**\n * Load the Kerberos library.\n */ function loadKrb() {\n    if (!krb) {\n        krb = (0, deps_1.getKerberos)();\n    }\n} //# sourceMappingURL=gssapi.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL2dzc2FwaS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0JBQW9CLEdBQUdBLHlDQUF5QyxHQUFHQSxjQUFjLEdBQUdBLG1DQUFtQyxHQUFHLEtBQUs7QUFDL0gsTUFBTU0sTUFBTUMsbUJBQU9BLENBQUMsZ0JBQUs7QUFDekIsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUMsNERBQVk7QUFDbkMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUcsVUFBVUgsbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUksa0JBQWtCSixtQkFBT0EsQ0FBQyxvRkFBaUI7QUFDakQsWUFBWSxHQUNaUCxtQ0FBbUMsR0FBR0YsT0FBT2MsTUFBTSxDQUFDO0lBQ2hEQyxJQUFJO0lBQ0pDLEtBQUs7SUFDTEMsTUFBTTtJQUNOQyxTQUFTO0lBQ1RDLG1CQUFtQjtBQUN2QjtBQUNBLGVBQWVDLGdCQUFnQkMsVUFBVSxFQUFFQyxPQUFPO0lBQzlDLE9BQU9ELFdBQVdDLE9BQU8sQ0FBQyxDQUFDLEdBQUdWLFFBQVFXLEVBQUUsRUFBRSxtQkFBbUJELFNBQVNFO0FBQzFFO0FBQ0EsSUFBSUM7QUFDSixNQUFNbkIsZUFBZU8sZ0JBQWdCYSxZQUFZO0lBQzdDLE1BQU1DLEtBQUtDLFdBQVcsRUFBRTtRQUNwQixNQUFNLEVBQUVQLFVBQVUsRUFBRVEsV0FBVyxFQUFFLEdBQUdEO1FBQ3BDLElBQUlDLGVBQWUsTUFBTTtZQUNyQixNQUFNLElBQUlsQixRQUFRbUIsNEJBQTRCLENBQUM7UUFDbkQ7UUFDQSxNQUFNLEVBQUVDLFFBQVEsRUFBRSxHQUFHRjtRQUNyQixNQUFNRyxTQUFTLE1BQU1DLG1CQUFtQkw7UUFDeEMsTUFBTU0sVUFBVSxNQUFNRixPQUFPRyxJQUFJLENBQUM7UUFDbEMsTUFBTUMsb0JBQW9CLE1BQU1o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O0lBQ2hDO0FBQ0osRUFDQSxrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC9nc3NhcGkuanM/NmE3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVzb2x2ZUNuYW1lID0gZXhwb3J0cy5wZXJmb3JtR1NTQVBJQ2Fub25pY2FsaXplSG9zdE5hbWUgPSBleHBvcnRzLkdTU0FQSSA9IGV4cG9ydHMuR1NTQVBJQ2Fub25pY2FsaXphdGlvblZhbHVlID0gdm9pZCAwO1xuY29uc3QgZG5zID0gcmVxdWlyZShcImRuc1wiKTtcbmNvbnN0IGRlcHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9kZXBzXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHNcIik7XG5jb25zdCBhdXRoX3Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi9hdXRoX3Byb3ZpZGVyXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuR1NTQVBJQ2Fub25pY2FsaXphdGlvblZhbHVlID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgb246IHRydWUsXG4gICAgb2ZmOiBmYWxzZSxcbiAgICBub25lOiAnbm9uZScsXG4gICAgZm9yd2FyZDogJ2ZvcndhcmQnLFxuICAgIGZvcndhcmRBbmRSZXZlcnNlOiAnZm9yd2FyZEFuZFJldmVyc2UnXG59KTtcbmFzeW5jIGZ1bmN0aW9uIGV4dGVybmFsQ29tbWFuZChjb25uZWN0aW9uLCBjb21tYW5kKSB7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJyRleHRlcm5hbC4kY21kJyksIGNvbW1hbmQsIHVuZGVmaW5lZCk7XG59XG5sZXQga3JiO1xuY2xhc3MgR1NTQVBJIGV4dGVuZHMgYXV0aF9wcm92aWRlcl8xLkF1dGhQcm92aWRlciB7XG4gICAgYXN5bmMgYXV0aChhdXRoQ29udGV4dCkge1xuICAgICAgICBjb25zdCB7IGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzIH0gPSBhdXRoQ29udGV4dDtcbiAgICAgICAgaWYgKGNyZWRlbnRpYWxzID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IoJ0NyZWRlbnRpYWxzIHJlcXVpcmVkIGZvciBHU1NBUEkgYXV0aGVudGljYXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHVzZXJuYW1lIH0gPSBjcmVkZW50aWFscztcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgbWFrZUtlcmJlcm9zQ2xpZW50KGF1dGhDb250ZXh0KTtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGNsaWVudC5zdGVwKCcnKTtcbiAgICAgICAgY29uc3Qgc2FzbFN0YXJ0UmVzcG9uc2UgPSBhd2FpdCBleHRlcm5hbENvbW1hbmQoY29ubmVjdGlvbiwgc2FzbFN0YXJ0KHBheWxvYWQpKTtcbiAgICAgICAgY29uc3QgbmVnb3RpYXRlZFBheWxvYWQgPSBhd2FpdCBuZWdvdGlhdGUoY2xpZW50LCAxMCwgc2FzbFN0YXJ0UmVzcG9uc2UucGF5bG9hZCk7XG4gICAgICAgIGNvbnN0IHNhc2xDb250aW51ZVJlc3BvbnNlID0gYXdhaXQgZXh0ZXJuYWxDb21tYW5kKGNvbm5lY3Rpb24sIHNhc2xDb250aW51ZShuZWdvdGlhdGVkUGF5bG9hZCwgc2FzbFN0YXJ0UmVzcG9uc2UuY29udmVyc2F0aW9uSWQpKTtcbiAgICAgICAgY29uc3QgZmluYWxpemVQYXlsb2FkID0gYXdhaXQgZmluYWxpemUoY2xpZW50LCB1c2VybmFtZSwgc2FzbENvbnRpbnVlUmVzcG9uc2UucGF5bG9hZCk7XG4gICAgICAgIGF3YWl0IGV4dGVybmFsQ29tbWFuZChjb25uZWN0aW9uLCB7XG4gICAgICAgICAgICBzYXNsQ29udGludWU6IDEsXG4gICAgICAgICAgICBjb252ZXJzYXRpb25JZDogc2FzbENvbnRpbnVlUmVzcG9uc2UuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICBwYXlsb2FkOiBmaW5hbGl6ZVBheWxvYWRcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5HU1NBUEkgPSBHU1NBUEk7XG5hc3luYyBmdW5jdGlvbiBtYWtlS2VyYmVyb3NDbGllbnQoYXV0aENvbnRleHQpIHtcbiAgICBjb25zdCB7IGhvc3RBZGRyZXNzIH0gPSBhdXRoQ29udGV4dC5vcHRpb25zO1xuICAgIGNvbnN0IHsgY3JlZGVudGlhbHMgfSA9IGF1dGhDb250ZXh0O1xuICAgIGlmICghaG9zdEFkZHJlc3MgfHwgdHlwZW9mIGhvc3RBZGRyZXNzLmhvc3QgIT09ICdzdHJpbmcnIHx8ICFjcmVkZW50aWFscykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdDb25uZWN0aW9uIG11c3QgaGF2ZSBob3N0IGFuZCBwb3J0IGFuZCBjcmVkZW50aWFscyBkZWZpbmVkLicpO1xuICAgIH1cbiAgICBsb2FkS3JiKCk7XG4gICAgaWYgKCdrTW9kdWxlRXJyb3InIGluIGtyYikge1xuICAgICAgICB0aHJvdyBrcmJbJ2tNb2R1bGVFcnJvciddO1xuICAgIH1cbiAgICBjb25zdCB7IGluaXRpYWxpemVDbGllbnQgfSA9IGtyYjtcbiAgICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gY3JlZGVudGlhbHM7XG4gICAgY29uc3QgbWVjaGFuaXNtUHJvcGVydGllcyA9IGNyZWRlbnRpYWxzLm1lY2hhbmlzbVByb3BlcnRpZXM7XG4gICAgY29uc3Qgc2VydmljZU5hbWUgPSBtZWNoYW5pc21Qcm9wZXJ0aWVzLlNFUlZJQ0VfTkFNRSA/PyAnbW9uZ29kYic7XG4gICAgY29uc3QgaG9zdCA9IGF3YWl0IHBlcmZvcm1HU1NBUElDYW5vbmljYWxpemVIb3N0TmFtZShob3N0QWRkcmVzcy5ob3N0LCBtZWNoYW5pc21Qcm9wZXJ0aWVzKTtcbiAgICBjb25zdCBpbml0T3B0aW9ucyA9IHt9O1xuICAgIGlmIChwYXNzd29yZCAhPSBudWxsKSB7XG4gICAgICAgIC8vIFRPRE8oTk9ERS01MTM5KTogVGhlc2UgZG8gbm90IG1hdGNoIHRoZSB0eXBlc2NyaXB0IG9wdGlvbnMgaW4gaW5pdGlhbGl6ZUNsaWVudFxuICAgICAgICBPYmplY3QuYXNzaWduKGluaXRPcHRpb25zLCB7IHVzZXI6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmQgfSk7XG4gICAgfVxuICAgIGNvbnN0IHNwbkhvc3QgPSBtZWNoYW5pc21Qcm9wZXJ0aWVzLlNFUlZJQ0VfSE9TVCA/PyBob3N0O1xuICAgIGxldCBzcG4gPSBgJHtzZXJ2aWNlTmFtZX0ke3Byb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicgPyAnLycgOiAnQCd9JHtzcG5Ib3N0fWA7XG4gICAgaWYgKCdTRVJWSUNFX1JFQUxNJyBpbiBtZWNoYW5pc21Qcm9wZXJ0aWVzKSB7XG4gICAgICAgIHNwbiA9IGAke3Nwbn1AJHttZWNoYW5pc21Qcm9wZXJ0aWVzLlNFUlZJQ0VfUkVBTE19YDtcbiAgICB9XG4gICAgcmV0dXJuIGluaXRpYWxpemVDbGllbnQoc3BuLCBpbml0T3B0aW9ucyk7XG59XG5mdW5jdGlvbiBzYXNsU3RhcnQocGF5bG9hZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNhc2xTdGFydDogMSxcbiAgICAgICAgbWVjaGFuaXNtOiAnR1NTQVBJJyxcbiAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgYXV0b0F1dGhvcml6ZTogMVxuICAgIH07XG59XG5mdW5jdGlvbiBzYXNsQ29udGludWUocGF5bG9hZCwgY29udmVyc2F0aW9uSWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzYXNsQ29udGludWU6IDEsXG4gICAgICAgIGNvbnZlcnNhdGlvbklkLFxuICAgICAgICBwYXlsb2FkXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIG5lZ290aWF0ZShjbGllbnQsIHJldHJpZXMsIHBheWxvYWQpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5zdGVwKHBheWxvYWQpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJyc7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAocmV0cmllcyA9PT0gMCkge1xuICAgICAgICAgICAgLy8gUmV0cmllcyBleGhhdXN0ZWQsIHJhaXNlIGVycm9yXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGp1c3QgbnVtYmVyIG9mIHJldHJpZXMgYW5kIGNhbGwgc3RlcCBhZ2FpblxuICAgICAgICByZXR1cm4gbmVnb3RpYXRlKGNsaWVudCwgcmV0cmllcyAtIDEsIHBheWxvYWQpO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGZpbmFsaXplKGNsaWVudCwgdXNlciwgcGF5bG9hZCkge1xuICAgIC8vIEdTUyBDbGllbnQgVW53cmFwXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQudW53cmFwKHBheWxvYWQpO1xuICAgIHJldHVybiBjbGllbnQud3JhcChyZXNwb25zZSB8fCAnJywgeyB1c2VyIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gcGVyZm9ybUdTU0FQSUNhbm9uaWNhbGl6ZUhvc3ROYW1lKGhvc3QsIG1lY2hhbmlzbVByb3BlcnRpZXMpIHtcbiAgICBjb25zdCBtb2RlID0gbWVjaGFuaXNtUHJvcGVydGllcy5DQU5PTklDQUxJWkVfSE9TVF9OQU1FO1xuICAgIGlmICghbW9kZSB8fCBtb2RlID09PSBleHBvcnRzLkdTU0FQSUNhbm9uaWNhbGl6YXRpb25WYWx1ZS5ub25lKSB7XG4gICAgICAgIHJldHVybiBob3N0O1xuICAgIH1cbiAgICAvLyBJZiBmb3J3YXJkIGFuZCByZXZlcnNlIG9yIHRydWVcbiAgICBpZiAobW9kZSA9PT0gZXhwb3J0cy5HU1NBUElDYW5vbmljYWxpemF0aW9uVmFsdWUub24gfHxcbiAgICAgICAgbW9kZSA9PT0gZXhwb3J0cy5HU1NBUElDYW5vbmljYWxpemF0aW9uVmFsdWUuZm9yd2FyZEFuZFJldmVyc2UpIHtcbiAgICAgICAgLy8gUGVyZm9ybSB0aGUgbG9va3VwIG9mIHRoZSBpcCBhZGRyZXNzLlxuICAgICAgICBjb25zdCB7IGFkZHJlc3MgfSA9IGF3YWl0IGRucy5wcm9taXNlcy5sb29rdXAoaG9zdCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIGEgcmV2ZXJzZSBwdHIgbG9va3VwIG9uIHRoZSBpcCBhZGRyZXNzLlxuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGRucy5wcm9taXNlcy5yZXNvbHZlUHRyKGFkZHJlc3MpO1xuICAgICAgICAgICAgLy8gSWYgdGhlIHB0ciBkaWQgbm90IGVycm9yIGJ1dCBoYWQgbm8gcmVzdWx0cywgcmV0dXJuIHRoZSBob3N0LlxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHMubGVuZ3RoID4gMCA/IHJlc3VsdHNbMF0gOiBob3N0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gVGhpcyBjYW4gZXJyb3IgYXMgcHRyIHJlY29yZHMgbWF5IG5vdCBleGlzdCBmb3IgYWxsIGlwcy4gSW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAvLyBmYWxsYmFjayB0byBhIGNuYW1lIGxvb2t1cCBhcyBkbnMubG9va3VwKCkgZG9lcyBub3QgcmV0dXJuIHRoZVxuICAgICAgICAgICAgLy8gY25hbWUuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZUNuYW1lKGhvc3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBUaGUgY2FzZSBmb3IgZm9yd2FyZCBpcyBqdXN0IHRvIHJlc29sdmUgdGhlIGNuYW1lIGFzIGRucy5sb29rdXAoKVxuICAgICAgICAvLyB3aWxsIG5vdCByZXR1cm4gaXQuXG4gICAgICAgIHJldHVybiByZXNvbHZlQ25hbWUoaG9zdCk7XG4gICAgfVxufVxuZXhwb3J0cy5wZXJmb3JtR1NTQVBJQ2Fub25pY2FsaXplSG9zdE5hbWUgPSBwZXJmb3JtR1NTQVBJQ2Fub25pY2FsaXplSG9zdE5hbWU7XG5hc3luYyBmdW5jdGlvbiByZXNvbHZlQ25hbWUoaG9zdCkge1xuICAgIC8vIEF0dGVtcHQgdG8gcmVzb2x2ZSB0aGUgaG9zdCBuYW1lXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGRucy5wcm9taXNlcy5yZXNvbHZlQ25hbWUoaG9zdCk7XG4gICAgICAgIC8vIEdldCB0aGUgZmlyc3QgcmVzb2x2ZWQgaG9zdCBpZFxuICAgICAgICByZXR1cm4gcmVzdWx0cy5sZW5ndGggPiAwID8gcmVzdWx0c1swXSA6IGhvc3Q7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGhvc3Q7XG4gICAgfVxufVxuZXhwb3J0cy5yZXNvbHZlQ25hbWUgPSByZXNvbHZlQ25hbWU7XG4vKipcbiAqIExvYWQgdGhlIEtlcmJlcm9zIGxpYnJhcnkuXG4gKi9cbmZ1bmN0aW9uIGxvYWRLcmIoKSB7XG4gICAgaWYgKCFrcmIpIHtcbiAgICAgICAga3JiID0gKDAsIGRlcHNfMS5nZXRLZXJiZXJvcykoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nc3NhcGkuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicmVzb2x2ZUNuYW1lIiwicGVyZm9ybUdTU0FQSUNhbm9uaWNhbGl6ZUhvc3ROYW1lIiwiR1NTQVBJIiwiR1NTQVBJQ2Fub25pY2FsaXphdGlvblZhbHVlIiwiZG5zIiwicmVxdWlyZSIsImRlcHNfMSIsImVycm9yXzEiLCJ1dGlsc18xIiwiYXV0aF9wcm92aWRlcl8xIiwiZnJlZXplIiwib24iLCJvZmYiLCJub25lIiwiZm9yd2FyZCIsImZvcndhcmRBbmRSZXZlcnNlIiwiZXh0ZXJuYWxDb21tYW5kIiwiY29ubmVjdGlvbiIsImNvbW1hbmQiLCJucyIsInVuZGVmaW5lZCIsImtyYiIsIkF1dGhQcm92aWRlciIsImF1dGgiLCJhdXRoQ29udGV4dCIsImNyZWRlbnRpYWxzIiwiTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvciIsInVzZXJuYW1lIiwiY2xpZW50IiwibWFrZUtlcmJlcm9zQ2xpZW50IiwicGF5bG9hZCIsInN0ZXAiLCJzYXNsU3RhcnRSZXNwb25zZSIsInNhc2xTdGFydCIsIm5lZ290aWF0ZWRQYXlsb2FkIiwibmVnb3RpYXRlIiwic2FzbENvbnRpbnVlUmVzcG9uc2UiLCJzYXNsQ29udGludWUiLCJjb252ZXJzYXRpb25JZCIsImZpbmFsaXplUGF5bG9hZCIsImZpbmFsaXplIiwiaG9zdEFkZHJlc3MiLCJvcHRpb25zIiwiaG9zdCIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJsb2FkS3JiIiwiaW5pdGlhbGl6ZUNsaWVudCIsInBhc3N3b3JkIiwibWVjaGFuaXNtUHJvcGVydGllcyIsInNlcnZpY2VOYW1lIiwiU0VSVklDRV9OQU1FIiwiaW5pdE9wdGlvbnMiLCJhc3NpZ24iLCJ1c2VyIiwic3BuSG9zdCIsIlNFUlZJQ0VfSE9TVCIsInNwbiIsInByb2Nlc3MiLCJwbGF0Zm9ybSIsIlNFUlZJQ0VfUkVBTE0iLCJtZWNoYW5pc20iLCJhdXRvQXV0aG9yaXplIiwicmV0cmllcyIsInJlc3BvbnNlIiwiZXJyb3IiLCJ1bndyYXAiLCJ3cmFwIiwibW9kZSIsIkNBTk9OSUNBTElaRV9IT1NUX05BTUUiLCJhZGRyZXNzIiwicHJvbWlzZXMiLCJsb29rdXAiLCJyZXN1bHRzIiwicmVzb2x2ZVB0ciIsImxlbmd0aCIsImdldEtlcmJlcm9zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoCredentials = exports.DEFAULT_ALLOWED_HOSTS = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst gssapi_1 = __webpack_require__(/*! ./gssapi */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js\");\nconst providers_1 = __webpack_require__(/*! ./providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\n// https://github.com/mongodb/specifications/blob/master/source/auth/auth.rst\nfunction getDefaultAuthMechanism(hello) {\n    if (hello) {\n        // If hello contains saslSupportedMechs, use scram-sha-256\n        // if it is available, else scram-sha-1\n        if (Array.isArray(hello.saslSupportedMechs)) {\n            return hello.saslSupportedMechs.includes(providers_1.AuthMechanism.MONGODB_SCRAM_SHA256) ? providers_1.AuthMechanism.MONGODB_SCRAM_SHA256 : providers_1.AuthMechanism.MONGODB_SCRAM_SHA1;\n        }\n        // Fallback to legacy selection method. If wire version >= 3, use scram-sha-1\n        if (hello.maxWireVersion >= 3) {\n            return providers_1.AuthMechanism.MONGODB_SCRAM_SHA1;\n        }\n    }\n    // Default for wireprotocol < 3\n    return providers_1.AuthMechanism.MONGODB_CR;\n}\nconst ALLOWED_PROVIDER_NAMES = [\n    \"aws\",\n    \"azure\"\n];\nconst ALLOWED_HOSTS_ERROR = \"Auth mechanism property ALLOWED_HOSTS must be an array of strings.\";\n/** @internal */ exports.DEFAULT_ALLOWED_HOSTS = [\n    \"*.mongodb.net\",\n    \"*.mongodb-dev.net\",\n    \"*.mongodbgov.net\",\n    \"localhost\",\n    \"127.0.0.1\",\n    \"::1\"\n];\n/** Error for when the token audience is missing in the environment. */ const TOKEN_AUDIENCE_MISSING_ERROR = \"TOKEN_AUDIENCE must be set in the auth mechanism properties when PROVIDER_NAME is azure.\";\n/**\n * A representation of the credentials used by MongoDB\n * @public\n */ class MongoCredentials {\n    constructor(options){\n        this.username = options.username ?? \"\";\n        this.password = options.password;\n        this.source = options.source;\n        if (!this.source && options.db) {\n            this.source = options.db;\n        }\n        this.mechanism = options.mechanism || providers_1.AuthMechanism.MONGODB_DEFAULT;\n        this.mechanismProperties = options.mechanismProperties || {};\n        if (this.mechanism.match(/MONGODB-AWS/i)) {\n            if (!this.username && process.env.AWS_ACCESS_KEY_ID) {\n                this.username = process.env.AWS_ACCESS_KEY_ID;\n            }\n            if (!this.password && process.env.AWS_SECRET_ACCESS_KEY) {\n                this.password = process.env.AWS_SECRET_ACCESS_KEY;\n            }\n            if (this.mechanismProperties.AWS_SESSION_TOKEN == null && process.env.AWS_SESSION_TOKEN != null) {\n                this.mechanismProperties = {\n                    ...this.mechanismProperties,\n                    AWS_SESSION_TOKEN: process.env.AWS_SESSION_TOKEN\n                };\n            }\n        }\n        if (this.mechanism === providers_1.AuthMechanism.MONGODB_OIDC && !this.mechanismProperties.ALLOWED_HOSTS) {\n            this.mechanismProperties = {\n                ...this.mechanismProperties,\n                ALLOWED_HOSTS: exports.DEFAULT_ALLOWED_HOSTS\n            };\n        }\n        Object.freeze(this.mechanismProperties);\n        Object.freeze(this);\n    }\n    /** Determines if two MongoCredentials objects are equivalent */ equals(other) {\n        return this.mechanism === other.mechanism && this.username === other.username && this.password === other.password && this.source === other.source;\n    }\n    /**\n     * If the authentication mechanism is set to \"default\", resolves the authMechanism\n     * based on the server version and server supported sasl mechanisms.\n     *\n     * @param hello - A hello response from the server\n     */ resolveAuthMechanism(hello) {\n        // If the mechanism is not \"default\", then it does not need to be resolved\n        if (this.mechanism.match(/DEFAULT/i)) {\n            return new MongoCredentials({\n                username: this.username,\n                password: this.password,\n                source: this.source,\n                mechanism: getDefaultAuthMechanism(hello),\n                mechanismProperties: this.mechanismProperties\n            });\n        }\n        return this;\n    }\n    validate() {\n        if ((this.mechanism === providers_1.AuthMechanism.MONGODB_GSSAPI || this.mechanism === providers_1.AuthMechanism.MONGODB_CR || this.mechanism === providers_1.AuthMechanism.MONGODB_PLAIN || this.mechanism === providers_1.AuthMechanism.MONGODB_SCRAM_SHA1 || this.mechanism === providers_1.AuthMechanism.MONGODB_SCRAM_SHA256) && !this.username) {\n            throw new error_1.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);\n        }\n        if (this.mechanism === providers_1.AuthMechanism.MONGODB_OIDC) {\n            if (this.username && this.mechanismProperties.PROVIDER_NAME) {\n                throw new error_1.MongoInvalidArgumentError(`username and PROVIDER_NAME may not be used together for mechanism '${this.mechanism}'.`);\n            }\n            if (this.mechanismProperties.PROVIDER_NAME === \"azure\" && !this.mechanismProperties.TOKEN_AUDIENCE) {\n                throw new error_1.MongoAzureError(TOKEN_AUDIENCE_MISSING_ERROR);\n            }\n            if (this.mechanismProperties.PROVIDER_NAME && !ALLOWED_PROVIDER_NAMES.includes(this.mechanismProperties.PROVIDER_NAME)) {\n                throw new error_1.MongoInvalidArgumentError(`Currently only a PROVIDER_NAME in ${ALLOWED_PROVIDER_NAMES.join(\",\")} is supported for mechanism '${this.mechanism}'.`);\n            }\n            if (this.mechanismProperties.REFRESH_TOKEN_CALLBACK && !this.mechanismProperties.REQUEST_TOKEN_CALLBACK) {\n                throw new error_1.MongoInvalidArgumentError(`A REQUEST_TOKEN_CALLBACK must be provided when using a REFRESH_TOKEN_CALLBACK for mechanism '${this.mechanism}'`);\n            }\n            if (!this.mechanismProperties.PROVIDER_NAME && !this.mechanismProperties.REQUEST_TOKEN_CALLBACK) {\n                throw new error_1.MongoInvalidArgumentError(`Either a PROVIDER_NAME or a REQUEST_TOKEN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);\n            }\n            if (this.mechanismProperties.ALLOWED_HOSTS) {\n                const hosts = this.mechanismProperties.ALLOWED_HOSTS;\n                if (!Array.isArray(hosts)) {\n                    throw new error_1.MongoInvalidArgumentError(ALLOWED_HOSTS_ERROR);\n                }\n                for (const host of hosts){\n                    if (typeof host !== \"string\") {\n                        throw new error_1.MongoInvalidArgumentError(ALLOWED_HOSTS_ERROR);\n                    }\n                }\n            }\n        }\n        if (providers_1.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)) {\n            if (this.source != null && this.source !== \"$external\") {\n                // TODO(NODE-3485): Replace this with a MongoAuthValidationError\n                throw new error_1.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);\n            }\n        }\n        if (this.mechanism === providers_1.AuthMechanism.MONGODB_PLAIN && this.source == null) {\n            // TODO(NODE-3485): Replace this with a MongoAuthValidationError\n            throw new error_1.MongoAPIError(\"PLAIN Authentication Mechanism needs an auth source\");\n        }\n        if (this.mechanism === providers_1.AuthMechanism.MONGODB_X509 && this.password != null) {\n            if (this.password === \"\") {\n                Reflect.set(this, \"password\", undefined);\n                return;\n            }\n            // TODO(NODE-3485): Replace this with a MongoAuthValidationError\n            throw new error_1.MongoAPIError(`Password not allowed for mechanism MONGODB-X509`);\n        }\n        const canonicalization = this.mechanismProperties.CANONICALIZE_HOST_NAME ?? false;\n        if (!Object.values(gssapi_1.GSSAPICanonicalizationValue).includes(canonicalization)) {\n            throw new error_1.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${canonicalization}`);\n        }\n    }\n    static merge(creds, options) {\n        return new MongoCredentials({\n            username: options.username ?? creds?.username ?? \"\",\n            password: options.password ?? creds?.password ?? \"\",\n            mechanism: options.mechanism ?? creds?.mechanism ?? providers_1.AuthMechanism.MONGODB_DEFAULT,\n            mechanismProperties: options.mechanismProperties ?? creds?.mechanismProperties ?? {},\n            source: options.source ?? options.db ?? creds?.source ?? \"admin\"\n        });\n    }\n}\nexports.MongoCredentials = MongoCredentials; //# sourceMappingURL=mongo_credentials.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvX2NyZWRlbnRpYWxzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx3QkFBd0IsR0FBR0EsNkJBQTZCLEdBQUcsS0FBSztBQUNoRSxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyxNQUFNQyxXQUFXRCxtQkFBT0EsQ0FBQyxzRUFBVTtBQUNuQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw0RUFBYTtBQUN6Qyw2RUFBNkU7QUFDN0UsU0FBU0csd0JBQXdCQyxLQUFLO0lBQ2xDLElBQUlBLE9BQU87UUFDUCwwREFBMEQ7UUFDMUQsdUNBQXVDO1FBQ3ZDLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0YsTUFBTUcsa0JBQWtCLEdBQUc7WUFDekMsT0FBT0gsTUFBTUcsa0JBQWtCLENBQUNDLFFBQVEsQ0FBQ04sWUFBWU8sYUFBYSxDQUFDQyxvQkFBb0IsSUFDakZSLFlBQVlPLGFBQWEsQ0FBQ0Msb0JBQW9CLEdBQzlDUixZQUFZTyxhQUFhLENBQUNFLGtCQUFrQjtRQUN0RDtRQUNBLDZFQUE2RTtRQUM3RSxJQUFJUCxNQUFNUSxjQUFjLElBQUksR0FBRztZQUMzQixPQUFPVixZQUFZTyxhQUFhLENBQUNFLGtCQUFrQjtRQUN2RDtJQUNKO0lBQ0EsK0JBQStCO0lBQy9CLE9BQU9ULFlBQVlPLGFBQWEsQ0FBQ0ksVUFBVTtBQUMvQztBQUNBLE1BQU1DLHlCQUF5QjtJQUFDO0lBQU87Q0FBUTtBQUMvQyxNQUFNQyxzQkFBc0I7QUFDNUIsY0FBYyxHQUNkcEIsNkJBQTZCLEdBQUc7SUFDNUI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRCxxRUFBcUUsR0FDckUsTUFBTXFCLCtCQUErQjtBQUNyQzs7O0NBR0MsR0FDRCxNQUFNbkI7SUFDRm9CLFlBQVlDLE9BQU8sQ0FBRTtRQUNqQixJQUFJ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O0lBQ0o7QUFDSjtBQUNBMUIsd0JBQXdCLEdBQUdFLGtCQUMzQiw2Q0FBNkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC9tb25nb19jcmVkZW50aWFscy5qcz8zNzkzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Nb25nb0NyZWRlbnRpYWxzID0gZXhwb3J0cy5ERUZBVUxUX0FMTE9XRURfSE9TVFMgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uL2Vycm9yXCIpO1xuY29uc3QgZ3NzYXBpXzEgPSByZXF1aXJlKFwiLi9nc3NhcGlcIik7XG5jb25zdCBwcm92aWRlcnNfMSA9IHJlcXVpcmUoXCIuL3Byb3ZpZGVyc1wiKTtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb25nb2RiL3NwZWNpZmljYXRpb25zL2Jsb2IvbWFzdGVyL3NvdXJjZS9hdXRoL2F1dGgucnN0XG5mdW5jdGlvbiBnZXREZWZhdWx0QXV0aE1lY2hhbmlzbShoZWxsbykge1xuICAgIGlmIChoZWxsbykge1xuICAgICAgICAvLyBJZiBoZWxsbyBjb250YWlucyBzYXNsU3VwcG9ydGVkTWVjaHMsIHVzZSBzY3JhbS1zaGEtMjU2XG4gICAgICAgIC8vIGlmIGl0IGlzIGF2YWlsYWJsZSwgZWxzZSBzY3JhbS1zaGEtMVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShoZWxsby5zYXNsU3VwcG9ydGVkTWVjaHMpKSB7XG4gICAgICAgICAgICByZXR1cm4gaGVsbG8uc2FzbFN1cHBvcnRlZE1lY2hzLmluY2x1ZGVzKHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEEyNTYpXG4gICAgICAgICAgICAgICAgPyBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfU0NSQU1fU0hBMjU2XG4gICAgICAgICAgICAgICAgOiBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfU0NSQU1fU0hBMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGYWxsYmFjayB0byBsZWdhY3kgc2VsZWN0aW9uIG1ldGhvZC4gSWYgd2lyZSB2ZXJzaW9uID49IDMsIHVzZSBzY3JhbS1zaGEtMVxuICAgICAgICBpZiAoaGVsbG8ubWF4V2lyZVZlcnNpb24gPj0gMykge1xuICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEExO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIERlZmF1bHQgZm9yIHdpcmVwcm90b2NvbCA8IDNcbiAgICByZXR1cm4gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0NSO1xufVxuY29uc3QgQUxMT1dFRF9QUk9WSURFUl9OQU1FUyA9IFsnYXdzJywgJ2F6dXJlJ107XG5jb25zdCBBTExPV0VEX0hPU1RTX0VSUk9SID0gJ0F1dGggbWVjaGFuaXNtIHByb3BlcnR5IEFMTE9XRURfSE9TVFMgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzLic7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkRFRkFVTFRfQUxMT1dFRF9IT1NUUyA9IFtcbiAgICAnKi5tb25nb2RiLm5ldCcsXG4gICAgJyoubW9uZ29kYi1kZXYubmV0JyxcbiAgICAnKi5tb25nb2RiZ292Lm5ldCcsXG4gICAgJ2xvY2FsaG9zdCcsXG4gICAgJzEyNy4wLjAuMScsXG4gICAgJzo6MSdcbl07XG4vKiogRXJyb3IgZm9yIHdoZW4gdGhlIHRva2VuIGF1ZGllbmNlIGlzIG1pc3NpbmcgaW4gdGhlIGVudmlyb25tZW50LiAqL1xuY29uc3QgVE9LRU5fQVVESUVOQ0VfTUlTU0lOR19FUlJPUiA9ICdUT0tFTl9BVURJRU5DRSBtdXN0IGJlIHNldCBpbiB0aGUgYXV0aCBtZWNoYW5pc20gcHJvcGVydGllcyB3aGVuIFBST1ZJREVSX05BTUUgaXMgYXp1cmUuJztcbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3JlZGVudGlhbHMgdXNlZCBieSBNb25nb0RCXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIE1vbmdvQ3JlZGVudGlhbHMge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IG9wdGlvbnMudXNlcm5hbWUgPz8gJyc7XG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSBvcHRpb25zLnBhc3N3b3JkO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IG9wdGlvbnMuc291cmNlO1xuICAgICAgICBpZiAoIXRoaXMuc291cmNlICYmIG9wdGlvbnMuZGIpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlID0gb3B0aW9ucy5kYjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1lY2hhbmlzbSA9IG9wdGlvbnMubWVjaGFuaXNtIHx8IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9ERUZBVUxUO1xuICAgICAgICB0aGlzLm1lY2hhbmlzbVByb3BlcnRpZXMgPSBvcHRpb25zLm1lY2hhbmlzbVByb3BlcnRpZXMgfHwge307XG4gICAgICAgIGlmICh0aGlzLm1lY2hhbmlzbS5tYXRjaCgvTU9OR09EQi1BV1MvaSkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy51c2VybmFtZSAmJiBwcm9jZXNzLmVudi5BV1NfQUNDRVNTX0tFWV9JRCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPSBwcm9jZXNzLmVudi5BV1NfQUNDRVNTX0tFWV9JRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5wYXNzd29yZCAmJiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5BV1NfU0VTU0lPTl9UT0tFTiA9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFU1NJT05fVE9LRU4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVjaGFuaXNtUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgICAgICBBV1NfU0VTU0lPTl9UT0tFTjogcHJvY2Vzcy5lbnYuQVdTX1NFU1NJT05fVE9LRU5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX09JREMgJiYgIXRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5BTExPV0VEX0hPU1RTKSB7XG4gICAgICAgICAgICB0aGlzLm1lY2hhbmlzbVByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIEFMTE9XRURfSE9TVFM6IGV4cG9ydHMuREVGQVVMVF9BTExPV0VEX0hPU1RTXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5mcmVlemUodGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzKTtcbiAgICAgICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbiAgICB9XG4gICAgLyoqIERldGVybWluZXMgaWYgdHdvIE1vbmdvQ3JlZGVudGlhbHMgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCAqL1xuICAgIGVxdWFscyhvdGhlcikge1xuICAgICAgICByZXR1cm4gKHRoaXMubWVjaGFuaXNtID09PSBvdGhlci5tZWNoYW5pc20gJiZcbiAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPT09IG90aGVyLnVzZXJuYW1lICYmXG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkID09PSBvdGhlci5wYXNzd29yZCAmJlxuICAgICAgICAgICAgdGhpcy5zb3VyY2UgPT09IG90aGVyLnNvdXJjZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBhdXRoZW50aWNhdGlvbiBtZWNoYW5pc20gaXMgc2V0IHRvIFwiZGVmYXVsdFwiLCByZXNvbHZlcyB0aGUgYXV0aE1lY2hhbmlzbVxuICAgICAqIGJhc2VkIG9uIHRoZSBzZXJ2ZXIgdmVyc2lvbiBhbmQgc2VydmVyIHN1cHBvcnRlZCBzYXNsIG1lY2hhbmlzbXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaGVsbG8gLSBBIGhlbGxvIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlclxuICAgICAqL1xuICAgIHJlc29sdmVBdXRoTWVjaGFuaXNtKGhlbGxvKSB7XG4gICAgICAgIC8vIElmIHRoZSBtZWNoYW5pc20gaXMgbm90IFwiZGVmYXVsdFwiLCB0aGVuIGl0IGRvZXMgbm90IG5lZWQgdG8gYmUgcmVzb2x2ZWRcbiAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtLm1hdGNoKC9ERUZBVUxUL2kpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1vbmdvQ3JlZGVudGlhbHMoe1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5zb3VyY2UsXG4gICAgICAgICAgICAgICAgbWVjaGFuaXNtOiBnZXREZWZhdWx0QXV0aE1lY2hhbmlzbShoZWxsbyksXG4gICAgICAgICAgICAgICAgbWVjaGFuaXNtUHJvcGVydGllczogdGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdmFsaWRhdGUoKSB7XG4gICAgICAgIGlmICgodGhpcy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9HU1NBUEkgfHxcbiAgICAgICAgICAgIHRoaXMubWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfQ1IgfHxcbiAgICAgICAgICAgIHRoaXMubWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfUExBSU4gfHxcbiAgICAgICAgICAgIHRoaXMubWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfU0NSQU1fU0hBMSB8fFxuICAgICAgICAgICAgdGhpcy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEEyNTYpICYmXG4gICAgICAgICAgICAhdGhpcy51c2VybmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcihgVXNlcm5hbWUgcmVxdWlyZWQgZm9yIG1lY2hhbmlzbSAnJHt0aGlzLm1lY2hhbmlzbX0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfT0lEQykge1xuICAgICAgICAgICAgaWYgKHRoaXMudXNlcm5hbWUgJiYgdGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlBST1ZJREVSX05BTUUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGB1c2VybmFtZSBhbmQgUFJPVklERVJfTkFNRSBtYXkgbm90IGJlIHVzZWQgdG9nZXRoZXIgZm9yIG1lY2hhbmlzbSAnJHt0aGlzLm1lY2hhbmlzbX0nLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5QUk9WSURFUl9OQU1FID09PSAnYXp1cmUnICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5UT0tFTl9BVURJRU5DRSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQXp1cmVFcnJvcihUT0tFTl9BVURJRU5DRV9NSVNTSU5HX0VSUk9SKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm1lY2hhbmlzbVByb3BlcnRpZXMuUFJPVklERVJfTkFNRSAmJlxuICAgICAgICAgICAgICAgICFBTExPV0VEX1BST1ZJREVSX05BTUVTLmluY2x1ZGVzKHRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5QUk9WSURFUl9OQU1FKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYEN1cnJlbnRseSBvbmx5IGEgUFJPVklERVJfTkFNRSBpbiAke0FMTE9XRURfUFJPVklERVJfTkFNRVMuam9pbignLCcpfSBpcyBzdXBwb3J0ZWQgZm9yIG1lY2hhbmlzbSAnJHt0aGlzLm1lY2hhbmlzbX0nLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5SRUZSRVNIX1RPS0VOX0NBTExCQUNLICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5SRVFVRVNUX1RPS0VOX0NBTExCQUNLKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgQSBSRVFVRVNUX1RPS0VOX0NBTExCQUNLIG11c3QgYmUgcHJvdmlkZWQgd2hlbiB1c2luZyBhIFJFRlJFU0hfVE9LRU5fQ0FMTEJBQ0sgZm9yIG1lY2hhbmlzbSAnJHt0aGlzLm1lY2hhbmlzbX0nYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5QUk9WSURFUl9OQU1FICYmXG4gICAgICAgICAgICAgICAgIXRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5SRVFVRVNUX1RPS0VOX0NBTExCQUNLKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgRWl0aGVyIGEgUFJPVklERVJfTkFNRSBvciBhIFJFUVVFU1RfVE9LRU5fQ0FMTEJBQ0sgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIG1lY2hhbmlzbSAnJHt0aGlzLm1lY2hhbmlzbX0nLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtUHJvcGVydGllcy5BTExPV0VEX0hPU1RTKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaG9zdHMgPSB0aGlzLm1lY2hhbmlzbVByb3BlcnRpZXMuQUxMT1dFRF9IT1NUUztcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaG9zdHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoQUxMT1dFRF9IT1NUU19FUlJPUik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaG9zdCBvZiBob3N0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGhvc3QgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKEFMTE9XRURfSE9TVFNfRVJST1IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm92aWRlcnNfMS5BVVRIX01FQ0hTX0FVVEhfU1JDX0VYVEVSTkFMLmhhcyh0aGlzLm1lY2hhbmlzbSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNvdXJjZSAhPSBudWxsICYmIHRoaXMuc291cmNlICE9PSAnJGV4dGVybmFsJykge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDg1KTogUmVwbGFjZSB0aGlzIHdpdGggYSBNb25nb0F1dGhWYWxpZGF0aW9uRXJyb3JcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKGBJbnZhbGlkIHNvdXJjZSAnJHt0aGlzLnNvdXJjZX0nIGZvciBtZWNoYW5pc20gJyR7dGhpcy5tZWNoYW5pc219JyBzcGVjaWZpZWQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfUExBSU4gJiYgdGhpcy5zb3VyY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODUpOiBSZXBsYWNlIHRoaXMgd2l0aCBhIE1vbmdvQXV0aFZhbGlkYXRpb25FcnJvclxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignUExBSU4gQXV0aGVudGljYXRpb24gTWVjaGFuaXNtIG5lZWRzIGFuIGF1dGggc291cmNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfWDUwOSAmJiB0aGlzLnBhc3N3b3JkICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhc3N3b3JkID09PSAnJykge1xuICAgICAgICAgICAgICAgIFJlZmxlY3Quc2V0KHRoaXMsICdwYXNzd29yZCcsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODUpOiBSZXBsYWNlIHRoaXMgd2l0aCBhIE1vbmdvQXV0aFZhbGlkYXRpb25FcnJvclxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcihgUGFzc3dvcmQgbm90IGFsbG93ZWQgZm9yIG1lY2hhbmlzbSBNT05HT0RCLVg1MDlgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYW5vbmljYWxpemF0aW9uID0gdGhpcy5tZWNoYW5pc21Qcm9wZXJ0aWVzLkNBTk9OSUNBTElaRV9IT1NUX05BTUUgPz8gZmFsc2U7XG4gICAgICAgIGlmICghT2JqZWN0LnZhbHVlcyhnc3NhcGlfMS5HU1NBUElDYW5vbmljYWxpemF0aW9uVmFsdWUpLmluY2x1ZGVzKGNhbm9uaWNhbGl6YXRpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKGBJbnZhbGlkIENBTk9OSUNBTElaRV9IT1NUX05BTUUgdmFsdWU6ICR7Y2Fub25pY2FsaXphdGlvbn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgbWVyZ2UoY3JlZHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNb25nb0NyZWRlbnRpYWxzKHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBvcHRpb25zLnVzZXJuYW1lID8/IGNyZWRzPy51c2VybmFtZSA/PyAnJyxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBvcHRpb25zLnBhc3N3b3JkID8/IGNyZWRzPy5wYXNzd29yZCA/PyAnJyxcbiAgICAgICAgICAgIG1lY2hhbmlzbTogb3B0aW9ucy5tZWNoYW5pc20gPz8gY3JlZHM/Lm1lY2hhbmlzbSA/PyBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfREVGQVVMVCxcbiAgICAgICAgICAgIG1lY2hhbmlzbVByb3BlcnRpZXM6IG9wdGlvbnMubWVjaGFuaXNtUHJvcGVydGllcyA/PyBjcmVkcz8ubWVjaGFuaXNtUHJvcGVydGllcyA/PyB7fSxcbiAgICAgICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2UgPz8gb3B0aW9ucy5kYiA/PyBjcmVkcz8uc291cmNlID8/ICdhZG1pbidcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NyZWRlbnRpYWxzID0gTW9uZ29DcmVkZW50aWFscztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvX2NyZWRlbnRpYWxzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1vbmdvQ3JlZGVudGlhbHMiLCJERUZBVUxUX0FMTE9XRURfSE9TVFMiLCJlcnJvcl8xIiwicmVxdWlyZSIsImdzc2FwaV8xIiwicHJvdmlkZXJzXzEiLCJnZXREZWZhdWx0QXV0aE1lY2hhbmlzbSIsImhlbGxvIiwiQXJyYXkiLCJpc0FycmF5Iiwic2FzbFN1cHBvcnRlZE1lY2hzIiwiaW5jbHVkZXMiLCJBdXRoTWVjaGFuaXNtIiwiTU9OR09EQl9TQ1JBTV9TSEEyNTYiLCJNT05HT0RCX1NDUkFNX1NIQTEiLCJtYXhXaXJlVmVyc2lvbiIsIk1PTkdPREJfQ1IiLCJBTExPV0VEX1BST1ZJREVSX05BTUVTIiwiQUxMT1dFRF9IT1NUU19FUlJPUiIsIlRPS0VOX0FVRElFTkNFX01JU1NJTkdfRVJST1IiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwic291cmNlIiwiZGIiLCJtZWNoYW5pc20iLCJNT05HT0RCX0RFRkFVTFQiLCJtZWNoYW5pc21Qcm9wZXJ0aWVzIiwibWF0Y2giLCJwcm9jZXNzIiwiZW52IiwiQVdTX0FDQ0VTU19LRVlfSUQiLCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiLCJBV1NfU0VTU0lPTl9UT0tFTiIsIk1PTkdPREJfT0lEQyIsIkFMTE9XRURfSE9TVFMiLCJmcmVlemUiLCJlcXVhbHMiLCJvdGhlciIsInJlc29sdmVBdXRoTWVjaGFuaXNtIiwidmFsaWRhdGUiLCJNT05HT0RCX0dTU0FQSSIsIk1PTkdPREJfUExBSU4iLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwiUFJPVklERVJfTkFNRSIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJUT0tFTl9BVURJRU5DRSIsIk1vbmdvQXp1cmVFcnJvciIsImpvaW4iLCJSRUZSRVNIX1RPS0VOX0NBTExCQUNLIiwiUkVRVUVTVF9UT0tFTl9DQUxMQkFDSyIsImhvc3RzIiwiaG9zdCIsIkFVVEhfTUVDSFNfQVVUSF9TUkNfRVhURVJOQUwiLCJoYXMiLCJNb25nb0FQSUVycm9yIiwiTU9OR09EQl9YNTA5IiwiUmVmbGVjdCIsInNldCIsInVuZGVmaW5lZCIsImNhbm9uaWNhbGl6YXRpb24iLCJDQU5PTklDQUxJWkVfSE9TVF9OQU1FIiwidmFsdWVzIiwiR1NTQVBJQ2Fub25pY2FsaXphdGlvblZhbHVlIiwibWVyZ2UiLCJjcmVkcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongocr.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongocr.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoCR = void 0;\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nclass MongoCR extends auth_provider_1.AuthProvider {\n    async auth(authContext) {\n        const { connection, credentials } = authContext;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        const { username, password, source } = credentials;\n        const { nonce } = await connection.command((0, utils_1.ns)(`${source}.$cmd`), {\n            getnonce: 1\n        }, undefined);\n        const hashPassword = crypto.createHash(\"md5\").update(`${username}:mongo:${password}`, \"utf8\").digest(\"hex\");\n        // Final key\n        const key = crypto.createHash(\"md5\").update(`${nonce}${username}${hashPassword}`, \"utf8\").digest(\"hex\");\n        const authenticateCommand = {\n            authenticate: 1,\n            user: username,\n            nonce,\n            key\n        };\n        await connection.command((0, utils_1.ns)(`${source}.$cmd`), authenticateCommand, undefined);\n    }\n}\nexports.MongoCR = MongoCR; //# sourceMappingURL=mongocr.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvY3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGVBQWUsR0FBRyxLQUFLO0FBQ3ZCLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQy9CLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1FLFVBQVVGLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1HLGtCQUFrQkgsbUJBQU9BLENBQUMsb0ZBQWlCO0FBQ2pELE1BQU1GLGdCQUFnQkssZ0JBQWdCQyxZQUFZO0lBQzlDLE1BQU1DLEtBQUtDLFdBQVcsRUFBRTtRQUNwQixNQUFNLEVBQUVDLFVBQVUsRUFBRUMsV0FBVyxFQUFFLEdBQUdGO1FBQ3BDLElBQUksQ0FBQ0UsYUFBYTtZQUNkLE1BQU0sSUFBSVAsUUFBUVEsNEJBQTRCLENBQUM7UUFDbkQ7UUFDQSxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxNQUFNLEVBQUUsR0FBR0o7UUFDdkMsTUFBTSxFQUFFSyxLQUFLLEVBQUUsR0FBRyxNQUFNTixXQUFXTyxPQUFPLENBQUMsQ0FBQyxHQUFHWixRQUFRYSxFQUFFLEVBQUUsQ0FBQyxFQUFFSCxPQUFPLEtBQUssQ0FBQyxHQUFHO1lBQUVJLFVBQVU7UUFBRSxHQUFHQztRQUMvRixNQUFNQyxlQUFlbkIsT0FDaEJvQixVQUFVLENBQUMsT0FDWEMsTUFBTSxDQUFDLENBQUMsRUFBRVYsU0FBUyxPQUFPLEVBQUVDLFNBQVMsQ0FBQyxFQUFFLFFBQ3hDVSxNQUFNLENBQUM7UUFDWixZQUFZO1FBQ1osTUFBTUMsTUFBTXZCLE9BQ1BvQixVQUFVLENBQUMsT0FDWEMsTUFBTSxDQUFDLENBQUMsRUFBRVAsTUFBTSxFQUFFSCxTQUFTLEVBQUVRLGFBQWEsQ0FBQyxFQUFFLFFBQzdDRyxNQUFNLENBQUM7UUFDWixNQUFNRSxzQkFBc0I7WUFDeEJDLGNBQWM7WUFDZEMsTUFBTWY7WUFDTkc7WUFDQVM7UUFDSjtRQUNBLE1BQU1mLFdBQVdPLE9BQU8sQ0FBQyxDQUFDLEdBQUdaLFFBQVFhLEVBQUUsRUFBRSxDQUFDLEVBQUVILE9BQU8sS0FBSyxDQUFDLEdBQUdXLHFCQUFxQk47SUFDckY7QUFDSjtBQUNBckIsZUFBZSxHQUFHRSxTQUNsQixtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC9tb25nb2NyLmpzPzAyM2QiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1vbmdvQ1IgPSB2b2lkIDA7XG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKFwiY3J5cHRvXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHNcIik7XG5jb25zdCBhdXRoX3Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi9hdXRoX3Byb3ZpZGVyXCIpO1xuY2xhc3MgTW9uZ29DUiBleHRlbmRzIGF1dGhfcHJvdmlkZXJfMS5BdXRoUHJvdmlkZXIge1xuICAgIGFzeW5jIGF1dGgoYXV0aENvbnRleHQpIHtcbiAgICAgICAgY29uc3QgeyBjb25uZWN0aW9uLCBjcmVkZW50aWFscyB9ID0gYXV0aENvbnRleHQ7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IoJ0F1dGhDb250ZXh0IG11c3QgcHJvdmlkZSBjcmVkZW50aWFscy4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCwgc291cmNlIH0gPSBjcmVkZW50aWFscztcbiAgICAgICAgY29uc3QgeyBub25jZSB9ID0gYXdhaXQgY29ubmVjdGlvbi5jb21tYW5kKCgwLCB1dGlsc18xLm5zKShgJHtzb3VyY2V9LiRjbWRgKSwgeyBnZXRub25jZTogMSB9LCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBoYXNoUGFzc3dvcmQgPSBjcnlwdG9cbiAgICAgICAgICAgIC5jcmVhdGVIYXNoKCdtZDUnKVxuICAgICAgICAgICAgLnVwZGF0ZShgJHt1c2VybmFtZX06bW9uZ286JHtwYXNzd29yZH1gLCAndXRmOCcpXG4gICAgICAgICAgICAuZGlnZXN0KCdoZXgnKTtcbiAgICAgICAgLy8gRmluYWwga2V5XG4gICAgICAgIGNvbnN0IGtleSA9IGNyeXB0b1xuICAgICAgICAgICAgLmNyZWF0ZUhhc2goJ21kNScpXG4gICAgICAgICAgICAudXBkYXRlKGAke25vbmNlfSR7dXNlcm5hbWV9JHtoYXNoUGFzc3dvcmR9YCwgJ3V0ZjgnKVxuICAgICAgICAgICAgLmRpZ2VzdCgnaGV4Jyk7XG4gICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0ZUNvbW1hbmQgPSB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGU6IDEsXG4gICAgICAgICAgICB1c2VyOiB1c2VybmFtZSxcbiAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAga2V5XG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoYCR7c291cmNlfS4kY21kYCksIGF1dGhlbnRpY2F0ZUNvbW1hbmQsIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NSID0gTW9uZ29DUjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvY3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTW9uZ29DUiIsImNyeXB0byIsInJlcXVpcmUiLCJlcnJvcl8xIiwidXRpbHNfMSIsImF1dGhfcHJvdmlkZXJfMSIsIkF1dGhQcm92aWRlciIsImF1dGgiLCJhdXRoQ29udGV4dCIsImNvbm5lY3Rpb24iLCJjcmVkZW50aWFscyIsIk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwic291cmNlIiwibm9uY2UiLCJjb21tYW5kIiwibnMiLCJnZXRub25jZSIsInVuZGVmaW5lZCIsImhhc2hQYXNzd29yZCIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJrZXkiLCJhdXRoZW50aWNhdGVDb21tYW5kIiwiYXV0aGVudGljYXRlIiwidXNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongocr.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_aws.js":
/*!***********************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_aws.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoDBAWS = void 0;\nconst process = __webpack_require__(/*! process */ \"process\");\nconst BSON = __webpack_require__(/*! ../../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst deps_1 = __webpack_require__(/*! ../../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nconst mongo_credentials_1 = __webpack_require__(/*! ./mongo_credentials */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js\");\nconst providers_1 = __webpack_require__(/*! ./providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\n/**\n * The following regions use the global AWS STS endpoint, sts.amazonaws.com, by default\n * https://docs.aws.amazon.com/sdkref/latest/guide/feature-sts-regionalized-endpoints.html\n */ const LEGACY_REGIONS = new Set([\n    \"ap-northeast-1\",\n    \"ap-south-1\",\n    \"ap-southeast-1\",\n    \"ap-southeast-2\",\n    \"aws-global\",\n    \"ca-central-1\",\n    \"eu-central-1\",\n    \"eu-north-1\",\n    \"eu-west-1\",\n    \"eu-west-2\",\n    \"eu-west-3\",\n    \"sa-east-1\",\n    \"us-east-1\",\n    \"us-east-2\",\n    \"us-west-1\",\n    \"us-west-2\"\n]);\nconst ASCII_N = 110;\nconst AWS_RELATIVE_URI = \"http://169.254.170.2\";\nconst AWS_EC2_URI = \"http://169.254.169.254\";\nconst AWS_EC2_PATH = \"/latest/meta-data/iam/security-credentials\";\nconst bsonOptions = {\n    useBigInt64: false,\n    promoteLongs: true,\n    promoteValues: true,\n    promoteBuffers: false,\n    bsonRegExp: false\n};\nclass MongoDBAWS extends auth_provider_1.AuthProvider {\n    constructor(){\n        super();\n        MongoDBAWS.credentialProvider ??= (0, deps_1.getAwsCredentialProvider)();\n        let { AWS_STS_REGIONAL_ENDPOINTS = \"\", AWS_REGION = \"\" } = process.env;\n        AWS_STS_REGIONAL_ENDPOINTS = AWS_STS_REGIONAL_ENDPOINTS.toLowerCase();\n        AWS_REGION = AWS_REGION.toLowerCase();\n        /** The option setting should work only for users who have explicit settings in their environment, the driver should not encode \"defaults\" */ const awsRegionSettingsExist = AWS_REGION.length !== 0 && AWS_STS_REGIONAL_ENDPOINTS.length !== 0;\n        /**\n         * If AWS_STS_REGIONAL_ENDPOINTS is set to regional, users are opting into the new behavior of respecting the region settings\n         *\n         * If AWS_STS_REGIONAL_ENDPOINTS is set to legacy, then \"old\" regions need to keep using the global setting.\n         * Technically the SDK gets this wrong, it reaches out to 'sts.us-east-1.amazonaws.com' when it should be 'sts.amazonaws.com'.\n         * That is not our bug to fix here. We leave that up to the SDK.\n         */ const useRegionalSts = AWS_STS_REGIONAL_ENDPOINTS === \"regional\" || AWS_STS_REGIONAL_ENDPOINTS === \"legacy\" && !LEGACY_REGIONS.has(AWS_REGION);\n        if (\"fromNodeProviderChain\" in MongoDBAWS.credentialProvider) {\n            this.provider = awsRegionSettingsExist && useRegionalSts ? MongoDBAWS.credentialProvider.fromNodeProviderChain({\n                clientConfig: {\n                    region: AWS_REGION\n                }\n            }) : MongoDBAWS.credentialProvider.fromNodeProviderChain();\n        }\n    }\n    async auth(authContext) {\n        const { connection } = authContext;\n        if (!authContext.credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        if (\"kModuleError\" in deps_1.aws4) {\n            throw deps_1.aws4[\"kModuleError\"];\n        }\n        const { sign } = deps_1.aws4;\n        if ((0, utils_1.maxWireVersion)(connection) < 9) {\n            throw new error_1.MongoCompatibilityError(\"MONGODB-AWS authentication requires MongoDB version 4.4 or later\");\n        }\n        if (!authContext.credentials.username) {\n            authContext.credentials = await makeTempCredentials(authContext.credentials, this.provider);\n        }\n        const { credentials } = authContext;\n        const accessKeyId = credentials.username;\n        const secretAccessKey = credentials.password;\n        // Allow the user to specify an AWS session token for authentication with temporary credentials.\n        const sessionToken = credentials.mechanismProperties.AWS_SESSION_TOKEN;\n        // If all three defined, include sessionToken, else include username and pass, else no credentials\n        const awsCredentials = accessKeyId && secretAccessKey && sessionToken ? {\n            accessKeyId,\n            secretAccessKey,\n            sessionToken\n        } : accessKeyId && secretAccessKey ? {\n            accessKeyId,\n            secretAccessKey\n        } : undefined;\n        const db = credentials.source;\n        const nonce = await (0, utils_1.randomBytes)(32);\n        // All messages between MongoDB clients and servers are sent as BSON objects\n        // in the payload field of saslStart and saslContinue.\n        const saslStart = {\n            saslStart: 1,\n            mechanism: \"MONGODB-AWS\",\n            payload: BSON.serialize({\n                r: nonce,\n                p: ASCII_N\n            }, bsonOptions)\n        };\n        const saslStartResponse = await connection.command((0, utils_1.ns)(`${db}.$cmd`), saslStart, undefined);\n        const serverResponse = BSON.deserialize(saslStartResponse.payload.buffer, bsonOptions);\n        const host = serverResponse.h;\n        const serverNonce = serverResponse.s.buffer;\n        if (serverNonce.length !== 64) {\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(`Invalid server nonce length ${serverNonce.length}, expected 64`);\n        }\n        if (!utils_1.ByteUtils.equals(serverNonce.subarray(0, nonce.byteLength), nonce)) {\n            // throw because the serverNonce's leading 32 bytes must equal the client nonce's 32 bytes\n            // https://github.com/mongodb/specifications/blob/875446db44aade414011731840831f38a6c668df/source/auth/auth.rst#id11\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(\"Server nonce does not begin with client nonce\");\n        }\n        if (host.length < 1 || host.length > 255 || host.indexOf(\"..\") !== -1) {\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(`Server returned an invalid host: \"${host}\"`);\n        }\n        const body = \"Action=GetCallerIdentity&Version=2011-06-15\";\n        const options = sign({\n            method: \"POST\",\n            host,\n            region: deriveRegion(serverResponse.h),\n            service: \"sts\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\n                \"Content-Length\": body.length,\n                \"X-MongoDB-Server-Nonce\": utils_1.ByteUtils.toBase64(serverNonce),\n                \"X-MongoDB-GS2-CB-Flag\": \"n\"\n            },\n            path: \"/\",\n            body\n        }, awsCredentials);\n        const payload = {\n            a: options.headers.Authorization,\n            d: options.headers[\"X-Amz-Date\"]\n        };\n        if (sessionToken) {\n            payload.t = sessionToken;\n        }\n        const saslContinue = {\n            saslContinue: 1,\n            conversationId: 1,\n            payload: BSON.serialize(payload, bsonOptions)\n        };\n        await connection.command((0, utils_1.ns)(`${db}.$cmd`), saslContinue, undefined);\n    }\n}\nexports.MongoDBAWS = MongoDBAWS;\nasync function makeTempCredentials(credentials, provider) {\n    function makeMongoCredentialsFromAWSTemp(creds) {\n        // The AWS session token (creds.Token) may or may not be set.\n        if (!creds.AccessKeyId || !creds.SecretAccessKey) {\n            throw new error_1.MongoMissingCredentialsError(\"Could not obtain temporary MONGODB-AWS credentials\");\n        }\n        return new mongo_credentials_1.MongoCredentials({\n            username: creds.AccessKeyId,\n            password: creds.SecretAccessKey,\n            source: credentials.source,\n            mechanism: providers_1.AuthMechanism.MONGODB_AWS,\n            mechanismProperties: {\n                AWS_SESSION_TOKEN: creds.Token\n            }\n        });\n    }\n    // Check if the AWS credential provider from the SDK is present. If not,\n    // use the old method.\n    if (provider && !(\"kModuleError\" in MongoDBAWS.credentialProvider)) {\n        /*\n         * Creates a credential provider that will attempt to find credentials from the\n         * following sources (listed in order of precedence):\n         *\n         * - Environment variables exposed via process.env\n         * - SSO credentials from token cache\n         * - Web identity token credentials\n         * - Shared credentials and config ini files\n         * - The EC2/ECS Instance Metadata Service\n         */ try {\n            const creds = await provider();\n            return makeMongoCredentialsFromAWSTemp({\n                AccessKeyId: creds.accessKeyId,\n                SecretAccessKey: creds.secretAccessKey,\n                Token: creds.sessionToken,\n                Expiration: creds.expiration\n            });\n        } catch (error) {\n            throw new error_1.MongoAWSError(error.message);\n        }\n    } else {\n        // If the environment variable AWS_CONTAINER_CREDENTIALS_RELATIVE_URI\n        // is set then drivers MUST assume that it was set by an AWS ECS agent\n        if (process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI) {\n            return makeMongoCredentialsFromAWSTemp(await (0, utils_1.request)(`${AWS_RELATIVE_URI}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`));\n        }\n        // Otherwise assume we are on an EC2 instance\n        // get a token\n        const token = await (0, utils_1.request)(`${AWS_EC2_URI}/latest/api/token`, {\n            method: \"PUT\",\n            json: false,\n            headers: {\n                \"X-aws-ec2-metadata-token-ttl-seconds\": 30\n            }\n        });\n        // get role name\n        const roleName = await (0, utils_1.request)(`${AWS_EC2_URI}/${AWS_EC2_PATH}`, {\n            json: false,\n            headers: {\n                \"X-aws-ec2-metadata-token\": token\n            }\n        });\n        // get temp credentials\n        const creds = await (0, utils_1.request)(`${AWS_EC2_URI}/${AWS_EC2_PATH}/${roleName}`, {\n            headers: {\n                \"X-aws-ec2-metadata-token\": token\n            }\n        });\n        return makeMongoCredentialsFromAWSTemp(creds);\n    }\n}\nfunction deriveRegion(host) {\n    const parts = host.split(\".\");\n    if (parts.length === 1 || parts[1] === \"amazonaws\") {\n        return \"us-east-1\";\n    }\n    return parts[1];\n} //# sourceMappingURL=mongodb_aws.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfYXdzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBRyxLQUFLO0FBQzFCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLHdCQUFTO0FBQ2pDLE1BQU1DLE9BQU9ELG1CQUFPQSxDQUFDLDREQUFZO0FBQ2pDLE1BQU1FLFNBQVNGLG1CQUFPQSxDQUFDLDREQUFZO0FBQ25DLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1JLFVBQVVKLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1LLGtCQUFrQkwsbUJBQU9BLENBQUMsb0ZBQWlCO0FBQ2pELE1BQU1NLHNCQUFzQk4sbUJBQU9BLENBQUMsNEZBQXFCO0FBQ3pELE1BQU1PLGNBQWNQLG1CQUFPQSxDQUFDLDRFQUFhO0FBQ3pDOzs7Q0FHQyxHQUNELE1BQU1RLGlCQUFpQixJQUFJQyxJQUFJO0lBQzNCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRCxNQUFNQyxVQUFVO0FBQ2hCLE1BQU1DLG1CQUFtQjtBQUN6QixNQUFNQyxjQUFjO0FBQ3BCLE1BQU1DLGVBQWU7QUFDckIsTUFBTUMsY0FBYztJQUNoQkMsYUFBYTtJQUNiQyxjQUFjO0lBQ2RDLGVBQWU7SUFDZkMsZ0JBQWdCO0lBQ2hCQyxZQUFZO0FBQ2hCO0FBQ0EsTUFBTXJCLG1CQUFtQk8sZ0JBQWdCZSxZQUFZO0lBQ2pEQyxhQUFjO1FBQ1YsS0FBSztRQUNMdkIsV0FBV3dCLGtCQUFrQixLQUFLLENBQUMsR0FBR3BCLE9BQU9xQix3QkFBd0I7UUFDckUsSUFBSSxFQUFFQyw2QkFBNkIsRUFBRSxFQUFFQyxhQUFhLEVBQUUsRUFBRSxHQUFHMUIsUUFB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LFFBQVEyQixHQUFHLENBQUNrRixzQ0FBc0MsQ0FBQyxDQUFDO1FBQ2hKO1FBQ0EsNkNBQTZDO1FBQzdDLGNBQWM7UUFDZCxNQUFNRSxRQUFRLE1BQU0sQ0FBQyxHQUFHMUcsUUFBUXlHLE9BQU8sRUFBRSxDQUFDLEVBQUVqRyxZQUFZLGlCQUFpQixDQUFDLEVBQUU7WUFDeEV1RSxRQUFRO1lBQ1I0QixNQUFNO1lBQ056QixTQUFTO2dCQUFFLHdDQUF3QztZQUFHO1FBQzFEO1FBQ0EsZ0JBQWdCO1FBQ2hCLE1BQU0wQixXQUFXLE1BQU0sQ0FBQyxHQUFHNUcsUUFBUXlHLE9BQU8sRUFBRSxDQUFDLEVBQUVqRyxZQUFZLENBQUMsRUFBRUMsYUFBYSxDQUFDLEVBQUU7WUFDMUVrRyxNQUFNO1lBQ056QixTQUFTO2dCQUFFLDRCQUE0QndCO1lBQU07UUFDakQ7UUFDQSx1QkFBdUI7UUFDdkIsTUFBTWQsUUFBUSxNQUFNLENBQUMsR0FBRzVGLFFBQVF5RyxPQUFPLEVBQUUsQ0FBQyxFQUFFakcsWUFBWSxDQUFDLEVBQUVDLGFBQWEsQ0FBQyxFQUFFbUcsU0FBUyxDQUFDLEVBQUU7WUFDbkYxQixTQUFTO2dCQUFFLDRCQUE0QndCO1lBQU07UUFDakQ7UUFDQSxPQUFPZixnQ0FBZ0NDO0lBQzNDO0FBQ0o7QUFDQSxTQUFTWixhQUFhYixJQUFJO0lBQ3RCLE1BQU0wQyxRQUFRMUMsS0FBSzJDLEtBQUssQ0FBQztJQUN6QixJQUFJRCxNQUFNcEYsTUFBTSxLQUFLLEtBQUtvRixLQUFLLENBQUMsRUFBRSxLQUFLLGFBQWE7UUFDaEQsT0FBTztJQUNYO0lBQ0EsT0FBT0EsS0FBSyxDQUFDLEVBQUU7QUFDbkIsRUFDQSx1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC9tb25nb2RiX2F3cy5qcz85ZjE1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Nb25nb0RCQVdTID0gdm9pZCAwO1xuY29uc3QgcHJvY2VzcyA9IHJlcXVpcmUoXCJwcm9jZXNzXCIpO1xuY29uc3QgQlNPTiA9IHJlcXVpcmUoXCIuLi8uLi9ic29uXCIpO1xuY29uc3QgZGVwc18xID0gcmVxdWlyZShcIi4uLy4uL2RlcHNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlsc1wiKTtcbmNvbnN0IGF1dGhfcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL2F1dGhfcHJvdmlkZXJcIik7XG5jb25zdCBtb25nb19jcmVkZW50aWFsc18xID0gcmVxdWlyZShcIi4vbW9uZ29fY3JlZGVudGlhbHNcIik7XG5jb25zdCBwcm92aWRlcnNfMSA9IHJlcXVpcmUoXCIuL3Byb3ZpZGVyc1wiKTtcbi8qKlxuICogVGhlIGZvbGxvd2luZyByZWdpb25zIHVzZSB0aGUgZ2xvYmFsIEFXUyBTVFMgZW5kcG9pbnQsIHN0cy5hbWF6b25hd3MuY29tLCBieSBkZWZhdWx0XG4gKiBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vc2RrcmVmL2xhdGVzdC9ndWlkZS9mZWF0dXJlLXN0cy1yZWdpb25hbGl6ZWQtZW5kcG9pbnRzLmh0bWxcbiAqL1xuY29uc3QgTEVHQUNZX1JFR0lPTlMgPSBuZXcgU2V0KFtcbiAgICAnYXAtbm9ydGhlYXN0LTEnLFxuICAgICdhcC1zb3V0aC0xJyxcbiAgICAnYXAtc291dGhlYXN0LTEnLFxuICAgICdhcC1zb3V0aGVhc3QtMicsXG4gICAgJ2F3cy1nbG9iYWwnLFxuICAgICdjYS1jZW50cmFsLTEnLFxuICAgICdldS1jZW50cmFsLTEnLFxuICAgICdldS1ub3J0aC0xJyxcbiAgICAnZXUtd2VzdC0xJyxcbiAgICAnZXUtd2VzdC0yJyxcbiAgICAnZXUtd2VzdC0zJyxcbiAgICAnc2EtZWFzdC0xJyxcbiAgICAndXMtZWFzdC0xJyxcbiAgICAndXMtZWFzdC0yJyxcbiAgICAndXMtd2VzdC0xJyxcbiAgICAndXMtd2VzdC0yJ1xuXSk7XG5jb25zdCBBU0NJSV9OID0gMTEwO1xuY29uc3QgQVdTX1JFTEFUSVZFX1VSSSA9ICdodHRwOi8vMTY5LjI1NC4xNzAuMic7XG5jb25zdCBBV1NfRUMyX1VSSSA9ICdodHRwOi8vMTY5LjI1NC4xNjkuMjU0JztcbmNvbnN0IEFXU19FQzJfUEFUSCA9ICcvbGF0ZXN0L21ldGEtZGF0YS9pYW0vc2VjdXJpdHktY3JlZGVudGlhbHMnO1xuY29uc3QgYnNvbk9wdGlvbnMgPSB7XG4gICAgdXNlQmlnSW50NjQ6IGZhbHNlLFxuICAgIHByb21vdGVMb25nczogdHJ1ZSxcbiAgICBwcm9tb3RlVmFsdWVzOiB0cnVlLFxuICAgIHByb21vdGVCdWZmZXJzOiBmYWxzZSxcbiAgICBic29uUmVnRXhwOiBmYWxzZVxufTtcbmNsYXNzIE1vbmdvREJBV1MgZXh0ZW5kcyBhdXRoX3Byb3ZpZGVyXzEuQXV0aFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgTW9uZ29EQkFXUy5jcmVkZW50aWFsUHJvdmlkZXIgPz89ICgwLCBkZXBzXzEuZ2V0QXdzQ3JlZGVudGlhbFByb3ZpZGVyKSgpO1xuICAgICAgICBsZXQgeyBBV1NfU1RTX1JFR0lPTkFMX0VORFBPSU5UUyA9ICcnLCBBV1NfUkVHSU9OID0gJycgfSA9IHByb2Nlc3MuZW52O1xuICAgICAgICBBV1NfU1RTX1JFR0lPTkFMX0VORFBPSU5UUyA9IEFXU19TVFNfUkVHSU9OQUxfRU5EUE9JTlRTLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIEFXU19SRUdJT04gPSBBV1NfUkVHSU9OLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIC8qKiBUaGUgb3B0aW9uIHNldHRpbmcgc2hvdWxkIHdvcmsgb25seSBmb3IgdXNlcnMgd2hvIGhhdmUgZXhwbGljaXQgc2V0dGluZ3MgaW4gdGhlaXIgZW52aXJvbm1lbnQsIHRoZSBkcml2ZXIgc2hvdWxkIG5vdCBlbmNvZGUgXCJkZWZhdWx0c1wiICovXG4gICAgICAgIGNvbnN0IGF3c1JlZ2lvblNldHRpbmdzRXhpc3QgPSBBV1NfUkVHSU9OLmxlbmd0aCAhPT0gMCAmJiBBV1NfU1RTX1JFR0lPTkFMX0VORFBPSU5UUy5sZW5ndGggIT09IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBBV1NfU1RTX1JFR0lPTkFMX0VORFBPSU5UUyBpcyBzZXQgdG8gcmVnaW9uYWwsIHVzZXJzIGFyZSBvcHRpbmcgaW50byB0aGUgbmV3IGJlaGF2aW9yIG9mIHJlc3BlY3RpbmcgdGhlIHJlZ2lvbiBzZXR0aW5nc1xuICAgICAgICAgKlxuICAgICAgICAgKiBJZiBBV1NfU1RTX1JFR0lPTkFMX0VORFBPSU5UUyBpcyBzZXQgdG8gbGVnYWN5LCB0aGVuIFwib2xkXCIgcmVnaW9ucyBuZWVkIHRvIGtlZXAgdXNpbmcgdGhlIGdsb2JhbCBzZXR0aW5nLlxuICAgICAgICAgKiBUZWNobmljYWxseSB0aGUgU0RLIGdldHMgdGhpcyB3cm9uZywgaXQgcmVhY2hlcyBvdXQgdG8gJ3N0cy51cy1lYXN0LTEuYW1hem9uYXdzLmNvbScgd2hlbiBpdCBzaG91bGQgYmUgJ3N0cy5hbWF6b25hd3MuY29tJy5cbiAgICAgICAgICogVGhhdCBpcyBub3Qgb3VyIGJ1ZyB0byBmaXggaGVyZS4gV2UgbGVhdmUgdGhhdCB1cCB0byB0aGUgU0RLLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgdXNlUmVnaW9uYWxTdHMgPSBBV1NfU1RTX1JFR0lPTkFMX0VORFBPSU5UUyA9PT0gJ3JlZ2lvbmFsJyB8fFxuICAgICAgICAgICAgKEFXU19TVFNfUkVHSU9OQUxfRU5EUE9JTlRTID09PSAnbGVnYWN5JyAmJiAhTEVHQUNZX1JFR0lPTlMuaGFzKEFXU19SRUdJT04pKTtcbiAgICAgICAgaWYgKCdmcm9tTm9kZVByb3ZpZGVyQ2hhaW4nIGluIE1vbmdvREJBV1MuY3JlZGVudGlhbFByb3ZpZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVyID1cbiAgICAgICAgICAgICAgICBhd3NSZWdpb25TZXR0aW5nc0V4aXN0ICYmIHVzZVJlZ2lvbmFsU3RzXG4gICAgICAgICAgICAgICAgICAgID8gTW9uZ29EQkFXUy5jcmVkZW50aWFsUHJvdmlkZXIuZnJvbU5vZGVQcm92aWRlckNoYWluKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudENvbmZpZzogeyByZWdpb246IEFXU19SRUdJT04gfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICA6IE1vbmdvREJBV1MuY3JlZGVudGlhbFByb3ZpZGVyLmZyb21Ob2RlUHJvdmlkZXJDaGFpbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGF1dGgoYXV0aENvbnRleHQpIHtcbiAgICAgICAgY29uc3QgeyBjb25uZWN0aW9uIH0gPSBhdXRoQ29udGV4dDtcbiAgICAgICAgaWYgKCFhdXRoQ29udGV4dC5jcmVkZW50aWFscykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcignQXV0aENvbnRleHQgbXVzdCBwcm92aWRlIGNyZWRlbnRpYWxzLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgna01vZHVsZUVycm9yJyBpbiBkZXBzXzEuYXdzNCkge1xuICAgICAgICAgICAgdGhyb3cgZGVwc18xLmF3czRbJ2tNb2R1bGVFcnJvciddO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc2lnbiB9ID0gZGVwc18xLmF3czQ7XG4gICAgICAgIGlmICgoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikoY29ubmVjdGlvbikgPCA5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcignTU9OR09EQi1BV1MgYXV0aGVudGljYXRpb24gcmVxdWlyZXMgTW9uZ29EQiB2ZXJzaW9uIDQuNCBvciBsYXRlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYXV0aENvbnRleHQuY3JlZGVudGlhbHMudXNlcm5hbWUpIHtcbiAgICAgICAgICAgIGF1dGhDb250ZXh0LmNyZWRlbnRpYWxzID0gYXdhaXQgbWFrZVRlbXBDcmVkZW50aWFscyhhdXRoQ29udGV4dC5jcmVkZW50aWFscywgdGhpcy5wcm92aWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBjcmVkZW50aWFscyB9ID0gYXV0aENvbnRleHQ7XG4gICAgICAgIGNvbnN0IGFjY2Vzc0tleUlkID0gY3JlZGVudGlhbHMudXNlcm5hbWU7XG4gICAgICAgIGNvbnN0IHNlY3JldEFjY2Vzc0tleSA9IGNyZWRlbnRpYWxzLnBhc3N3b3JkO1xuICAgICAgICAvLyBBbGxvdyB0aGUgdXNlciB0byBzcGVjaWZ5IGFuIEFXUyBzZXNzaW9uIHRva2VuIGZvciBhdXRoZW50aWNhdGlvbiB3aXRoIHRlbXBvcmFyeSBjcmVkZW50aWFscy5cbiAgICAgICAgY29uc3Qgc2Vzc2lvblRva2VuID0gY3JlZGVudGlhbHMubWVjaGFuaXNtUHJvcGVydGllcy5BV1NfU0VTU0lPTl9UT0tFTjtcbiAgICAgICAgLy8gSWYgYWxsIHRocmVlIGRlZmluZWQsIGluY2x1ZGUgc2Vzc2lvblRva2VuLCBlbHNlIGluY2x1ZGUgdXNlcm5hbWUgYW5kIHBhc3MsIGVsc2Ugbm8gY3JlZGVudGlhbHNcbiAgICAgICAgY29uc3QgYXdzQ3JlZGVudGlhbHMgPSBhY2Nlc3NLZXlJZCAmJiBzZWNyZXRBY2Nlc3NLZXkgJiYgc2Vzc2lvblRva2VuXG4gICAgICAgICAgICA/IHsgYWNjZXNzS2V5SWQsIHNlY3JldEFjY2Vzc0tleSwgc2Vzc2lvblRva2VuIH1cbiAgICAgICAgICAgIDogYWNjZXNzS2V5SWQgJiYgc2VjcmV0QWNjZXNzS2V5XG4gICAgICAgICAgICAgICAgPyB7IGFjY2Vzc0tleUlkLCBzZWNyZXRBY2Nlc3NLZXkgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBkYiA9IGNyZWRlbnRpYWxzLnNvdXJjZTtcbiAgICAgICAgY29uc3Qgbm9uY2UgPSBhd2FpdCAoMCwgdXRpbHNfMS5yYW5kb21CeXRlcykoMzIpO1xuICAgICAgICAvLyBBbGwgbWVzc2FnZXMgYmV0d2VlbiBNb25nb0RCIGNsaWVudHMgYW5kIHNlcnZlcnMgYXJlIHNlbnQgYXMgQlNPTiBvYmplY3RzXG4gICAgICAgIC8vIGluIHRoZSBwYXlsb2FkIGZpZWxkIG9mIHNhc2xTdGFydCBhbmQgc2FzbENvbnRpbnVlLlxuICAgICAgICBjb25zdCBzYXNsU3RhcnQgPSB7XG4gICAgICAgICAgICBzYXNsU3RhcnQ6IDEsXG4gICAgICAgICAgICBtZWNoYW5pc206ICdNT05HT0RCLUFXUycsXG4gICAgICAgICAgICBwYXlsb2FkOiBCU09OLnNlcmlhbGl6ZSh7IHI6IG5vbmNlLCBwOiBBU0NJSV9OIH0sIGJzb25PcHRpb25zKVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzYXNsU3RhcnRSZXNwb25zZSA9IGF3YWl0IGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoYCR7ZGJ9LiRjbWRgKSwgc2FzbFN0YXJ0LCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBzZXJ2ZXJSZXNwb25zZSA9IEJTT04uZGVzZXJpYWxpemUoc2FzbFN0YXJ0UmVzcG9uc2UucGF5bG9hZC5idWZmZXIsIGJzb25PcHRpb25zKTtcbiAgICAgICAgY29uc3QgaG9zdCA9IHNlcnZlclJlc3BvbnNlLmg7XG4gICAgICAgIGNvbnN0IHNlcnZlck5vbmNlID0gc2VydmVyUmVzcG9uc2Uucy5idWZmZXI7XG4gICAgICAgIGlmIChzZXJ2ZXJOb25jZS5sZW5ndGggIT09IDY0KSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4MylcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBJbnZhbGlkIHNlcnZlciBub25jZSBsZW5ndGggJHtzZXJ2ZXJOb25jZS5sZW5ndGh9LCBleHBlY3RlZCA2NGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdXRpbHNfMS5CeXRlVXRpbHMuZXF1YWxzKHNlcnZlck5vbmNlLnN1YmFycmF5KDAsIG5vbmNlLmJ5dGVMZW5ndGgpLCBub25jZSkpIHtcbiAgICAgICAgICAgIC8vIHRocm93IGJlY2F1c2UgdGhlIHNlcnZlck5vbmNlJ3MgbGVhZGluZyAzMiBieXRlcyBtdXN0IGVxdWFsIHRoZSBjbGllbnQgbm9uY2UncyAzMiBieXRlc1xuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi84NzU0NDZkYjQ0YWFkZTQxNDAxMTczMTg0MDgzMWYzOGE2YzY2OGRmL3NvdXJjZS9hdXRoL2F1dGgucnN0I2lkMTFcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ1NlcnZlciBub25jZSBkb2VzIG5vdCBiZWdpbiB3aXRoIGNsaWVudCBub25jZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChob3N0Lmxlbmd0aCA8IDEgfHwgaG9zdC5sZW5ndGggPiAyNTUgfHwgaG9zdC5pbmRleE9mKCcuLicpICE9PSAtMSkge1xuICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgU2VydmVyIHJldHVybmVkIGFuIGludmFsaWQgaG9zdDogXCIke2hvc3R9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBib2R5ID0gJ0FjdGlvbj1HZXRDYWxsZXJJZGVudGl0eSZWZXJzaW9uPTIwMTEtMDYtMTUnO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gc2lnbih7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhvc3QsXG4gICAgICAgICAgICByZWdpb246IGRlcml2ZVJlZ2lvbihzZXJ2ZXJSZXNwb25zZS5oKSxcbiAgICAgICAgICAgIHNlcnZpY2U6ICdzdHMnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1MZW5ndGgnOiBib2R5Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAnWC1Nb25nb0RCLVNlcnZlci1Ob25jZSc6IHV0aWxzXzEuQnl0ZVV0aWxzLnRvQmFzZTY0KHNlcnZlck5vbmNlKSxcbiAgICAgICAgICAgICAgICAnWC1Nb25nb0RCLUdTMi1DQi1GbGFnJzogJ24nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogJy8nLFxuICAgICAgICAgICAgYm9keVxuICAgICAgICB9LCBhd3NDcmVkZW50aWFscyk7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICBhOiBvcHRpb25zLmhlYWRlcnMuQXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgIGQ6IG9wdGlvbnMuaGVhZGVyc1snWC1BbXotRGF0ZSddXG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZXNzaW9uVG9rZW4pIHtcbiAgICAgICAgICAgIHBheWxvYWQudCA9IHNlc3Npb25Ub2tlbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzYXNsQ29udGludWUgPSB7XG4gICAgICAgICAgICBzYXNsQ29udGludWU6IDEsXG4gICAgICAgICAgICBjb252ZXJzYXRpb25JZDogMSxcbiAgICAgICAgICAgIHBheWxvYWQ6IEJTT04uc2VyaWFsaXplKHBheWxvYWQsIGJzb25PcHRpb25zKVxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbW1hbmQoKDAsIHV0aWxzXzEubnMpKGAke2RifS4kY21kYCksIHNhc2xDb250aW51ZSwgdW5kZWZpbmVkKTtcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvREJBV1MgPSBNb25nb0RCQVdTO1xuYXN5bmMgZnVuY3Rpb24gbWFrZVRlbXBDcmVkZW50aWFscyhjcmVkZW50aWFscywgcHJvdmlkZXIpIHtcbiAgICBmdW5jdGlvbiBtYWtlTW9uZ29DcmVkZW50aWFsc0Zyb21BV1NUZW1wKGNyZWRzKSB7XG4gICAgICAgIC8vIFRoZSBBV1Mgc2Vzc2lvbiB0b2tlbiAoY3JlZHMuVG9rZW4pIG1heSBvciBtYXkgbm90IGJlIHNldC5cbiAgICAgICAgaWYgKCFjcmVkcy5BY2Nlc3NLZXlJZCB8fCAhY3JlZHMuU2VjcmV0QWNjZXNzS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yKCdDb3VsZCBub3Qgb2J0YWluIHRlbXBvcmFyeSBNT05HT0RCLUFXUyBjcmVkZW50aWFscycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgbW9uZ29fY3JlZGVudGlhbHNfMS5Nb25nb0NyZWRlbnRpYWxzKHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBjcmVkcy5BY2Nlc3NLZXlJZCxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBjcmVkcy5TZWNyZXRBY2Nlc3NLZXksXG4gICAgICAgICAgICBzb3VyY2U6IGNyZWRlbnRpYWxzLnNvdXJjZSxcbiAgICAgICAgICAgIG1lY2hhbmlzbTogcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX0FXUyxcbiAgICAgICAgICAgIG1lY2hhbmlzbVByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICBBV1NfU0VTU0lPTl9UT0tFTjogY3JlZHMuVG9rZW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENoZWNrIGlmIHRoZSBBV1MgY3JlZGVudGlhbCBwcm92aWRlciBmcm9tIHRoZSBTREsgaXMgcHJlc2VudC4gSWYgbm90LFxuICAgIC8vIHVzZSB0aGUgb2xkIG1ldGhvZC5cbiAgICBpZiAocHJvdmlkZXIgJiYgISgna01vZHVsZUVycm9yJyBpbiBNb25nb0RCQVdTLmNyZWRlbnRpYWxQcm92aWRlcikpIHtcbiAgICAgICAgLypcbiAgICAgICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgcHJvdmlkZXIgdGhhdCB3aWxsIGF0dGVtcHQgdG8gZmluZCBjcmVkZW50aWFscyBmcm9tIHRoZVxuICAgICAgICAgKiBmb2xsb3dpbmcgc291cmNlcyAobGlzdGVkIGluIG9yZGVyIG9mIHByZWNlZGVuY2UpOlxuICAgICAgICAgKlxuICAgICAgICAgKiAtIEVudmlyb25tZW50IHZhcmlhYmxlcyBleHBvc2VkIHZpYSBwcm9jZXNzLmVudlxuICAgICAgICAgKiAtIFNTTyBjcmVkZW50aWFscyBmcm9tIHRva2VuIGNhY2hlXG4gICAgICAgICAqIC0gV2ViIGlkZW50aXR5IHRva2VuIGNyZWRlbnRpYWxzXG4gICAgICAgICAqIC0gU2hhcmVkIGNyZWRlbnRpYWxzIGFuZCBjb25maWcgaW5pIGZpbGVzXG4gICAgICAgICAqIC0gVGhlIEVDMi9FQ1MgSW5zdGFuY2UgTWV0YWRhdGEgU2VydmljZVxuICAgICAgICAgKi9cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNyZWRzID0gYXdhaXQgcHJvdmlkZXIoKTtcbiAgICAgICAgICAgIHJldHVybiBtYWtlTW9uZ29DcmVkZW50aWFsc0Zyb21BV1NUZW1wKHtcbiAgICAgICAgICAgICAgICBBY2Nlc3NLZXlJZDogY3JlZHMuYWNjZXNzS2V5SWQsXG4gICAgICAgICAgICAgICAgU2VjcmV0QWNjZXNzS2V5OiBjcmVkcy5zZWNyZXRBY2Nlc3NLZXksXG4gICAgICAgICAgICAgICAgVG9rZW46IGNyZWRzLnNlc3Npb25Ub2tlbixcbiAgICAgICAgICAgICAgICBFeHBpcmF0aW9uOiBjcmVkcy5leHBpcmF0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVdTRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIElmIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBBV1NfQ09OVEFJTkVSX0NSRURFTlRJQUxTX1JFTEFUSVZFX1VSSVxuICAgICAgICAvLyBpcyBzZXQgdGhlbiBkcml2ZXJzIE1VU1QgYXNzdW1lIHRoYXQgaXQgd2FzIHNldCBieSBhbiBBV1MgRUNTIGFnZW50XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5BV1NfQ09OVEFJTkVSX0NSRURFTlRJQUxTX1JFTEFUSVZFX1VSSSkge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VNb25nb0NyZWRlbnRpYWxzRnJvbUFXU1RlbXAoYXdhaXQgKDAsIHV0aWxzXzEucmVxdWVzdCkoYCR7QVdTX1JFTEFUSVZFX1VSSX0ke3Byb2Nlc3MuZW52LkFXU19DT05UQUlORVJfQ1JFREVOVElBTFNfUkVMQVRJVkVfVVJJfWApKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UgYXNzdW1lIHdlIGFyZSBvbiBhbiBFQzIgaW5zdGFuY2VcbiAgICAgICAgLy8gZ2V0IGEgdG9rZW5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCAoMCwgdXRpbHNfMS5yZXF1ZXN0KShgJHtBV1NfRUMyX1VSSX0vbGF0ZXN0L2FwaS90b2tlbmAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICBqc29uOiBmYWxzZSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ1gtYXdzLWVjMi1tZXRhZGF0YS10b2tlbi10dGwtc2Vjb25kcyc6IDMwIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGdldCByb2xlIG5hbWVcbiAgICAgICAgY29uc3Qgcm9sZU5hbWUgPSBhd2FpdCAoMCwgdXRpbHNfMS5yZXF1ZXN0KShgJHtBV1NfRUMyX1VSSX0vJHtBV1NfRUMyX1BBVEh9YCwge1xuICAgICAgICAgICAganNvbjogZmFsc2UsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdYLWF3cy1lYzItbWV0YWRhdGEtdG9rZW4nOiB0b2tlbiB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBnZXQgdGVtcCBjcmVkZW50aWFsc1xuICAgICAgICBjb25zdCBjcmVkcyA9IGF3YWl0ICgwLCB1dGlsc18xLnJlcXVlc3QpKGAke0FXU19FQzJfVVJJfS8ke0FXU19FQzJfUEFUSH0vJHtyb2xlTmFtZX1gLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdYLWF3cy1lYzItbWV0YWRhdGEtdG9rZW4nOiB0b2tlbiB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWFrZU1vbmdvQ3JlZGVudGlhbHNGcm9tQVdTVGVtcChjcmVkcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGVyaXZlUmVnaW9uKGhvc3QpIHtcbiAgICBjb25zdCBwYXJ0cyA9IGhvc3Quc3BsaXQoJy4nKTtcbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAxIHx8IHBhcnRzWzFdID09PSAnYW1hem9uYXdzJykge1xuICAgICAgICByZXR1cm4gJ3VzLWVhc3QtMSc7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0c1sxXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvZGJfYXdzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1vbmdvREJBV1MiLCJwcm9jZXNzIiwicmVxdWlyZSIsIkJTT04iLCJkZXBzXzEiLCJlcnJvcl8xIiwidXRpbHNfMSIsImF1dGhfcHJvdmlkZXJfMSIsIm1vbmdvX2NyZWRlbnRpYWxzXzEiLCJwcm92aWRlcnNfMSIsIkxFR0FDWV9SRUdJT05TIiwiU2V0IiwiQVNDSUlfTiIsIkFXU19SRUxBVElWRV9VUkkiLCJBV1NfRUMyX1VSSSIsIkFXU19FQzJfUEFUSCIsImJzb25PcHRpb25zIiwidXNlQmlnSW50NjQiLCJwcm9tb3RlTG9uZ3MiLCJwcm9tb3RlVmFsdWVzIiwicHJvbW90ZUJ1ZmZlcnMiLCJic29uUmVnRXhwIiwiQXV0aFByb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJjcmVkZW50aWFsUHJvdmlkZXIiLCJnZXRBd3NDcmVkZW50aWFsUHJvdmlkZXIiLCJBV1NfU1RTX1JFR0lPTkFMX0VORFBPSU5UUyIsIkFXU19SRUdJT04iLCJlbnYiLCJ0b0xvd2VyQ2FzZSIsImF3c1JlZ2lvblNldHRpbmdzRXhpc3QiLCJsZW5ndGgiLCJ1c2VSZWdpb25hbFN0cyIsImhhcyIsInByb3ZpZGVyIiwiZnJvbU5vZGVQcm92aWRlckNoYWluIiwiY2xpZW50Q29uZmlnIiwicmVnaW9uIiwiYXV0aCIsImF1dGhDb250ZXh0IiwiY29ubmVjdGlvbiIsImNyZWRlbnRpYWxzIiwiTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvciIsImF3czQiLCJzaWduIiwibWF4V2lyZVZlcnNpb24iLCJNb25nb0NvbXBhdGliaWxpdHlFcnJvciIsInVzZXJuYW1lIiwibWFrZVRlbXBDcmVkZW50aWFscyIsImFjY2Vzc0tleUlkIiwic2VjcmV0QWNjZXNzS2V5IiwicGFzc3dvcmQiLCJzZXNzaW9uVG9rZW4iLCJtZWNoYW5pc21Qcm9wZXJ0aWVzIiwiQVdTX1NFU1NJT05fVE9LRU4iLCJhd3NDcmVkZW50aWFscyIsInVuZGVmaW5lZCIsImRiIiwic291cmNlIiwibm9uY2UiLCJyYW5kb21CeXRlcyIsInNhc2xTdGFydCIsIm1lY2hhbmlzbSIsInBheWxvYWQiLCJzZXJpYWxpemUiLCJyIiwicCIsInNhc2xTdGFydFJlc3BvbnNlIiwiY29tbWFuZCIsIm5zIiwic2VydmVyUmVzcG9uc2UiLCJkZXNlcmlhbGl6ZSIsImJ1ZmZlciIsImhvc3QiLCJoIiwic2VydmVyTm9uY2UiLCJzIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJCeXRlVXRpbHMiLCJlcXVhbHMiLCJzdWJhcnJheSIsImJ5dGVMZW5ndGgiLCJpbmRleE9mIiwiYm9keSIsIm9wdGlvbnMiLCJtZXRob2QiLCJkZXJpdmVSZWdpb24iLCJzZXJ2aWNlIiwiaGVhZGVycyIsInRvQmFzZTY0IiwicGF0aCIsImEiLCJBdXRob3JpemF0aW9uIiwiZCIsInQiLCJzYXNsQ29udGludWUiLCJjb252ZXJzYXRpb25JZCIsIm1ha2VNb25nb0NyZWRlbnRpYWxzRnJvbUFXU1RlbXAiLCJjcmVkcyIsIkFjY2Vzc0tleUlkIiwiU2VjcmV0QWNjZXNzS2V5IiwiTW9uZ29DcmVkZW50aWFscyIsIkF1dGhNZWNoYW5pc20iLCJNT05HT0RCX0FXUyIsIlRva2VuIiwiRXhwaXJhdGlvbiIsImV4cGlyYXRpb24iLCJlcnJvciIsIk1vbmdvQVdTRXJyb3IiLCJtZXNzYWdlIiwiQVdTX0NPTlRBSU5FUl9DUkVERU5USUFMU19SRUxBVElWRV9VUkkiLCJyZXF1ZXN0IiwidG9rZW4iLCJqc29uIiwicm9sZU5hbWUiLCJwYXJ0cyIsInNwbGl0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_aws.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoDBOIDC = exports.OIDC_WORKFLOWS = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nconst aws_service_workflow_1 = __webpack_require__(/*! ./mongodb_oidc/aws_service_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/aws_service_workflow.js\");\nconst azure_service_workflow_1 = __webpack_require__(/*! ./mongodb_oidc/azure_service_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_service_workflow.js\");\nconst callback_workflow_1 = __webpack_require__(/*! ./mongodb_oidc/callback_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_workflow.js\");\n/** Error when credentials are missing. */ const MISSING_CREDENTIALS_ERROR = \"AuthContext must provide credentials.\";\n/** @internal */ exports.OIDC_WORKFLOWS = new Map();\nexports.OIDC_WORKFLOWS.set(\"callback\", new callback_workflow_1.CallbackWorkflow());\nexports.OIDC_WORKFLOWS.set(\"aws\", new aws_service_workflow_1.AwsServiceWorkflow());\nexports.OIDC_WORKFLOWS.set(\"azure\", new azure_service_workflow_1.AzureServiceWorkflow());\n/**\n * OIDC auth provider.\n * @experimental\n */ class MongoDBOIDC extends auth_provider_1.AuthProvider {\n    /**\n     * Instantiate the auth provider.\n     */ constructor(){\n        super();\n    }\n    /**\n     * Authenticate using OIDC\n     */ async auth(authContext) {\n        const { connection, reauthenticating, response } = authContext;\n        const credentials = getCredentials(authContext);\n        const workflow = getWorkflow(credentials);\n        await workflow.execute(connection, credentials, reauthenticating, response);\n    }\n    /**\n     * Add the speculative auth for the initial handshake.\n     */ async prepare(handshakeDoc, authContext) {\n        const credentials = getCredentials(authContext);\n        const workflow = getWorkflow(credentials);\n        const result = await workflow.speculativeAuth(credentials);\n        return {\n            ...handshakeDoc,\n            ...result\n        };\n    }\n}\nexports.MongoDBOIDC = MongoDBOIDC;\n/**\n * Get credentials from the auth context, throwing if they do not exist.\n */ function getCredentials(authContext) {\n    const { credentials } = authContext;\n    if (!credentials) {\n        throw new error_1.MongoMissingCredentialsError(MISSING_CREDENTIALS_ERROR);\n    }\n    return credentials;\n}\n/**\n * Gets either a device workflow or callback workflow.\n */ function getWorkflow(credentials) {\n    const providerName = credentials.mechanismProperties.PROVIDER_NAME;\n    const workflow = exports.OIDC_WORKFLOWS.get(providerName || \"callback\");\n    if (!workflow) {\n        throw new error_1.MongoInvalidArgumentError(`Could not load workflow for provider ${credentials.mechanismProperties.PROVIDER_NAME}`);\n    }\n    return workflow;\n} //# sourceMappingURL=mongodb_oidc.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUJBQW1CLEdBQUdBLHNCQUFzQixHQUFHLEtBQUs7QUFDcEQsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUMsa0JBQWtCRCxtQkFBT0EsQ0FBQyxvRkFBaUI7QUFDakQsTUFBTUUseUJBQXlCRixtQkFBT0EsQ0FBQyw0SEFBcUM7QUFDNUUsTUFBTUcsMkJBQTJCSCxtQkFBT0EsQ0FBQyxnSUFBdUM7QUFDaEYsTUFBTUksc0JBQXNCSixtQkFBT0EsQ0FBQyxzSEFBa0M7QUFDdEUsd0NBQXdDLEdBQ3hDLE1BQU1LLDRCQUE0QjtBQUNsQyxjQUFjLEdBQ2RWLHNCQUFzQixHQUFHLElBQUlXO0FBQzdCWCxRQUFRRyxjQUFjLENBQUNTLEdBQUcsQ0FBQyxZQUFZLElBQUlILG9CQUFvQkksZ0JBQWdCO0FBQy9FYixRQUFRRyxjQUFjLENBQUNTLEdBQUcsQ0FBQyxPQUFPLElBQUlMLHVCQUF1Qk8sa0JBQWtCO0FBQy9FZCxRQUFRRyxjQUFjLENBQUNTLEdBQUcsQ0FBQyxTQUFTLElBQUlKLHlCQUF5Qk8sb0JBQW9CO0FBQ3JGOzs7Q0FHQyxHQUNELE1BQU1iLG9CQUFvQkksZ0JBQWdCVSxZQUFZO0lBQ2xEOztLQUVDLEdBQ0RDLGFBQWM7UUFDVixLQUFLO0lBQ1Q7SUFDQTs7S0FFQyxHQUNELE1BQU1DLEtBQUtDLFdBQVcsRUFBRTtRQUNwQixNQUFNLEVBQUVDLFVBQVUsRUFBRUMsZ0JBQWdCLEVBQUVDLFFBQVEsRUFBRSxHQUFHSDtRQUNuRCxNQUFNSSxjQUFjQyxlQUFlTDtRQUNuQyxNQUFNTSxXQUFXQyxZQUFZSDtRQUM3QixNQUFNRSxTQUFTRSxPQUFPLENBQUNQLFlBQVlHLGFBQWFGLGtCQUFrQkM7SUFDdEU7SUFDQTs7S0FFQyxHQUNELE1BQU1NLFFBQVFDLFlBQVksRUFBRVYsV0FBVyxFQUFFO1FBQ3JDLE1BQU1JLGNBQWNDLGVBQWVMO1FBQ25DLE1BQU1NLFdBQVdDLFlBQVlIO1FBQzdCLE1BQU1PLFNBQVMsTUFBTUwsU0FBU00sZUFBZSxDQUFDUjtRQUM5QyxPQUFPO1lBQUUsR0FBR00sWUFBWTtZQUFFLEdBQUdDLE1BQU07UUFBQztJQUN4QztBQUNKO0FBQ0E5QixtQkFBbUIsR0FBR0U7QUFDdEI7O0NBRUMsR0FDRCxTQUFTc0IsZUFBZUwsV0FBVztJQUMvQixNQUFNLEVBQUVJLFdBQVcsRUFBRSxHQUFHSjtJQUN4QixJQUFJLENBQUNJLGFBQWE7UUFDZCxNQUFNLElBQUluQixRQUFRNEIsNEJBQTRCLENBQUN0QjtJQUNuRDtJQUNBLE9BQU9hO0FBQ1g7QUFDQTs7Q0FFQyxHQUNELFNBQVNHLFlBQVlILFdBQVc7SUFDNUIsTUFBTVUsZUFBZVYsWUFBWVcsbUJBQW1CLENBQUNDLGFBQWE7SUFDbEUsTUFBTVYsV0FBV3pCLFFBQVFHLGNBQWMsQ0FBQ2lDLEdBQUcsQ0FBQ0gsZ0JBQWdCO0lBQzVELElBQUksQ0FBQ1IsVUFBVTtRQUNYLE1BQU0sSUFBSXJCLFFBQVFpQyx5QkFBeUIsQ0FBQyxDQUFDLHFDQUFxQyxFQUFFZCxZQUFZVyxtQkFBbUIsQ0FBQ0MsYUFBYSxDQUFDLENBQUM7SUFDdkk7SUFDQSxPQUFPVjtBQUNYLEVBQ0Esd0NBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvbW9uZ29kYl9vaWRjLmpzPzdmZTQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1vbmdvREJPSURDID0gZXhwb3J0cy5PSURDX1dPUktGTE9XUyA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vZXJyb3JcIik7XG5jb25zdCBhdXRoX3Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi9hdXRoX3Byb3ZpZGVyXCIpO1xuY29uc3QgYXdzX3NlcnZpY2Vfd29ya2Zsb3dfMSA9IHJlcXVpcmUoXCIuL21vbmdvZGJfb2lkYy9hd3Nfc2VydmljZV93b3JrZmxvd1wiKTtcbmNvbnN0IGF6dXJlX3NlcnZpY2Vfd29ya2Zsb3dfMSA9IHJlcXVpcmUoXCIuL21vbmdvZGJfb2lkYy9henVyZV9zZXJ2aWNlX3dvcmtmbG93XCIpO1xuY29uc3QgY2FsbGJhY2tfd29ya2Zsb3dfMSA9IHJlcXVpcmUoXCIuL21vbmdvZGJfb2lkYy9jYWxsYmFja193b3JrZmxvd1wiKTtcbi8qKiBFcnJvciB3aGVuIGNyZWRlbnRpYWxzIGFyZSBtaXNzaW5nLiAqL1xuY29uc3QgTUlTU0lOR19DUkVERU5USUFMU19FUlJPUiA9ICdBdXRoQ29udGV4dCBtdXN0IHByb3ZpZGUgY3JlZGVudGlhbHMuJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuT0lEQ19XT1JLRkxPV1MgPSBuZXcgTWFwKCk7XG5leHBvcnRzLk9JRENfV09SS0ZMT1dTLnNldCgnY2FsbGJhY2snLCBuZXcgY2FsbGJhY2tfd29ya2Zsb3dfMS5DYWxsYmFja1dvcmtmbG93KCkpO1xuZXhwb3J0cy5PSURDX1dPUktGTE9XUy5zZXQoJ2F3cycsIG5ldyBhd3Nfc2VydmljZV93b3JrZmxvd18xLkF3c1NlcnZpY2VXb3JrZmxvdygpKTtcbmV4cG9ydHMuT0lEQ19XT1JLRkxPV1Muc2V0KCdhenVyZScsIG5ldyBhenVyZV9zZXJ2aWNlX3dvcmtmbG93XzEuQXp1cmVTZXJ2aWNlV29ya2Zsb3coKSk7XG4vKipcbiAqIE9JREMgYXV0aCBwcm92aWRlci5cbiAqIEBleHBlcmltZW50YWxcbiAqL1xuY2xhc3MgTW9uZ29EQk9JREMgZXh0ZW5kcyBhdXRoX3Byb3ZpZGVyXzEuQXV0aFByb3ZpZGVyIHtcbiAgICAvKipcbiAgICAgKiBJbnN0YW50aWF0ZSB0aGUgYXV0aCBwcm92aWRlci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXV0aGVudGljYXRlIHVzaW5nIE9JRENcbiAgICAgKi9cbiAgICBhc3luYyBhdXRoKGF1dGhDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHsgY29ubmVjdGlvbiwgcmVhdXRoZW50aWNhdGluZywgcmVzcG9uc2UgfSA9IGF1dGhDb250ZXh0O1xuICAgICAgICBjb25zdCBjcmVkZW50aWFscyA9IGdldENyZWRlbnRpYWxzKGF1dGhDb250ZXh0KTtcbiAgICAgICAgY29uc3Qgd29ya2Zsb3cgPSBnZXRXb3JrZmxvdyhjcmVkZW50aWFscyk7XG4gICAgICAgIGF3YWl0IHdvcmtmbG93LmV4ZWN1dGUoY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIHJlYXV0aGVudGljYXRpbmcsIHJlc3BvbnNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBzcGVjdWxhdGl2ZSBhdXRoIGZvciB0aGUgaW5pdGlhbCBoYW5kc2hha2UuXG4gICAgICovXG4gICAgYXN5bmMgcHJlcGFyZShoYW5kc2hha2VEb2MsIGF1dGhDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gZ2V0Q3JlZGVudGlhbHMoYXV0aENvbnRleHQpO1xuICAgICAgICBjb25zdCB3b3JrZmxvdyA9IGdldFdvcmtmbG93KGNyZWRlbnRpYWxzKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd29ya2Zsb3cuc3BlY3VsYXRpdmVBdXRoKGNyZWRlbnRpYWxzKTtcbiAgICAgICAgcmV0dXJuIHsgLi4uaGFuZHNoYWtlRG9jLCAuLi5yZXN1bHQgfTtcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvREJPSURDID0gTW9uZ29EQk9JREM7XG4vKipcbiAqIEdldCBjcmVkZW50aWFscyBmcm9tIHRoZSBhdXRoIGNvbnRleHQsIHRocm93aW5nIGlmIHRoZXkgZG8gbm90IGV4aXN0LlxuICovXG5mdW5jdGlvbiBnZXRDcmVkZW50aWFscyhhdXRoQ29udGV4dCkge1xuICAgIGNvbnN0IHsgY3JlZGVudGlhbHMgfSA9IGF1dGhDb250ZXh0O1xuICAgIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcihNSVNTSU5HX0NSRURFTlRJQUxTX0VSUk9SKTtcbiAgICB9XG4gICAgcmV0dXJuIGNyZWRlbnRpYWxzO1xufVxuLyoqXG4gKiBHZXRzIGVpdGhlciBhIGRldmljZSB3b3JrZmxvdyBvciBjYWxsYmFjayB3b3JrZmxvdy5cbiAqL1xuZnVuY3Rpb24gZ2V0V29ya2Zsb3coY3JlZGVudGlhbHMpIHtcbiAgICBjb25zdCBwcm92aWRlck5hbWUgPSBjcmVkZW50aWFscy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlBST1ZJREVSX05BTUU7XG4gICAgY29uc3Qgd29ya2Zsb3cgPSBleHBvcnRzLk9JRENfV09SS0ZMT1dTLmdldChwcm92aWRlck5hbWUgfHwgJ2NhbGxiYWNrJyk7XG4gICAgaWYgKCF3b3JrZmxvdykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBDb3VsZCBub3QgbG9hZCB3b3JrZmxvdyBmb3IgcHJvdmlkZXIgJHtjcmVkZW50aWFscy5tZWNoYW5pc21Qcm9wZXJ0aWVzLlBST1ZJREVSX05BTUV9YCk7XG4gICAgfVxuICAgIHJldHVybiB3b3JrZmxvdztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvZGJfb2lkYy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJNb25nb0RCT0lEQyIsIk9JRENfV09SS0ZMT1dTIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJhdXRoX3Byb3ZpZGVyXzEiLCJhd3Nfc2VydmljZV93b3JrZmxvd18xIiwiYXp1cmVfc2VydmljZV93b3JrZmxvd18xIiwiY2FsbGJhY2tfd29ya2Zsb3dfMSIsIk1JU1NJTkdfQ1JFREVOVElBTFNfRVJST1IiLCJNYXAiLCJzZXQiLCJDYWxsYmFja1dvcmtmbG93IiwiQXdzU2VydmljZVdvcmtmbG93IiwiQXp1cmVTZXJ2aWNlV29ya2Zsb3ciLCJBdXRoUHJvdmlkZXIiLCJjb25zdHJ1Y3RvciIsImF1dGgiLCJhdXRoQ29udGV4dCIsImNvbm5lY3Rpb24iLCJyZWF1dGhlbnRpY2F0aW5nIiwicmVzcG9uc2UiLCJjcmVkZW50aWFscyIsImdldENyZWRlbnRpYWxzIiwid29ya2Zsb3ciLCJnZXRXb3JrZmxvdyIsImV4ZWN1dGUiLCJwcmVwYXJlIiwiaGFuZHNoYWtlRG9jIiwicmVzdWx0Iiwic3BlY3VsYXRpdmVBdXRoIiwiTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvciIsInByb3ZpZGVyTmFtZSIsIm1lY2hhbmlzbVByb3BlcnRpZXMiLCJQUk9WSURFUl9OQU1FIiwiZ2V0IiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/aws_service_workflow.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/aws_service_workflow.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AwsServiceWorkflow = void 0;\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst error_1 = __webpack_require__(/*! ../../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst service_workflow_1 = __webpack_require__(/*! ./service_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js\");\n/** Error for when the token is missing in the environment. */ const TOKEN_MISSING_ERROR = \"AWS_WEB_IDENTITY_TOKEN_FILE must be set in the environment.\";\n/**\n * Device workflow implementation for AWS.\n *\n * @internal\n */ class AwsServiceWorkflow extends service_workflow_1.ServiceWorkflow {\n    constructor(){\n        super();\n    }\n    /**\n     * Get the token from the environment.\n     */ async getToken() {\n        const tokenFile = process.env.AWS_WEB_IDENTITY_TOKEN_FILE;\n        if (!tokenFile) {\n            throw new error_1.MongoAWSError(TOKEN_MISSING_ERROR);\n        }\n        return fs.promises.readFile(tokenFile, \"utf8\");\n    }\n}\nexports.AwsServiceWorkflow = AwsServiceWorkflow; //# sourceMappingURL=aws_service_workflow.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9hd3Nfc2VydmljZV93b3JrZmxvdy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMEJBQTBCLEdBQUcsS0FBSztBQUNsQyxNQUFNRyxLQUFLQyxtQkFBT0EsQ0FBQyxjQUFJO0FBQ3ZCLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLGlFQUFnQjtBQUN4QyxNQUFNRSxxQkFBcUJGLG1CQUFPQSxDQUFDLHVHQUFvQjtBQUN2RCw0REFBNEQsR0FDNUQsTUFBTUcsc0JBQXNCO0FBQzVCOzs7O0NBSUMsR0FDRCxNQUFNTCwyQkFBMkJJLG1CQUFtQkUsZUFBZTtJQUMvREMsYUFBYztRQUNWLEtBQUs7SUFDVDtJQUNBOztLQUVDLEdBQ0QsTUFBTUMsV0FBVztRQUNiLE1BQU1DLFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0MsMkJBQTJCO1FBQ3pELElBQUksQ0FBQ0gsV0FBVztZQUNaLE1BQU0sSUFBSU4sUUFBUVUsYUFBYSxDQUFDUjtRQUNwQztRQUNBLE9BQU9KLEdBQUdhLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDTixXQUFXO0lBQzNDO0FBQ0o7QUFDQVgsMEJBQTBCLEdBQUdFLG9CQUM3QixnREFBZ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC9tb25nb2RiX29pZGMvYXdzX3NlcnZpY2Vfd29ya2Zsb3cuanM/N2FhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQXdzU2VydmljZVdvcmtmbG93ID0gdm9pZCAwO1xuY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uLy4uL2Vycm9yXCIpO1xuY29uc3Qgc2VydmljZV93b3JrZmxvd18xID0gcmVxdWlyZShcIi4vc2VydmljZV93b3JrZmxvd1wiKTtcbi8qKiBFcnJvciBmb3Igd2hlbiB0aGUgdG9rZW4gaXMgbWlzc2luZyBpbiB0aGUgZW52aXJvbm1lbnQuICovXG5jb25zdCBUT0tFTl9NSVNTSU5HX0VSUk9SID0gJ0FXU19XRUJfSURFTlRJVFlfVE9LRU5fRklMRSBtdXN0IGJlIHNldCBpbiB0aGUgZW52aXJvbm1lbnQuJztcbi8qKlxuICogRGV2aWNlIHdvcmtmbG93IGltcGxlbWVudGF0aW9uIGZvciBBV1MuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEF3c1NlcnZpY2VXb3JrZmxvdyBleHRlbmRzIHNlcnZpY2Vfd29ya2Zsb3dfMS5TZXJ2aWNlV29ya2Zsb3cge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRva2VuIGZyb20gdGhlIGVudmlyb25tZW50LlxuICAgICAqL1xuICAgIGFzeW5jIGdldFRva2VuKCkge1xuICAgICAgICBjb25zdCB0b2tlbkZpbGUgPSBwcm9jZXNzLmVudi5BV1NfV0VCX0lERU5USVRZX1RPS0VOX0ZJTEU7XG4gICAgICAgIGlmICghdG9rZW5GaWxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FXU0Vycm9yKFRPS0VOX01JU1NJTkdfRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcy5wcm9taXNlcy5yZWFkRmlsZSh0b2tlbkZpbGUsICd1dGY4Jyk7XG4gICAgfVxufVxuZXhwb3J0cy5Bd3NTZXJ2aWNlV29ya2Zsb3cgPSBBd3NTZXJ2aWNlV29ya2Zsb3c7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hd3Nfc2VydmljZV93b3JrZmxvdy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJBd3NTZXJ2aWNlV29ya2Zsb3ciLCJmcyIsInJlcXVpcmUiLCJlcnJvcl8xIiwic2VydmljZV93b3JrZmxvd18xIiwiVE9LRU5fTUlTU0lOR19FUlJPUiIsIlNlcnZpY2VXb3JrZmxvdyIsImNvbnN0cnVjdG9yIiwiZ2V0VG9rZW4iLCJ0b2tlbkZpbGUiLCJwcm9jZXNzIiwiZW52IiwiQVdTX1dFQl9JREVOVElUWV9UT0tFTl9GSUxFIiwiTW9uZ29BV1NFcnJvciIsInByb21pc2VzIiwicmVhZEZpbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/aws_service_workflow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_service_workflow.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_service_workflow.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AzureServiceWorkflow = void 0;\nconst error_1 = __webpack_require__(/*! ../../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst azure_token_cache_1 = __webpack_require__(/*! ./azure_token_cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_token_cache.js\");\nconst service_workflow_1 = __webpack_require__(/*! ./service_workflow */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js\");\n/** Base URL for getting Azure tokens. */ const AZURE_BASE_URL = \"http://169.254.169.254/metadata/identity/oauth2/token?api-version=2018-02-01\";\n/** Azure request headers. */ const AZURE_HEADERS = Object.freeze({\n    Metadata: \"true\",\n    Accept: \"application/json\"\n});\n/** Invalid endpoint result error. */ const ENDPOINT_RESULT_ERROR = \"Azure endpoint did not return a value with only access_token and expires_in properties\";\n/** Error for when the token audience is missing in the environment. */ const TOKEN_AUDIENCE_MISSING_ERROR = \"TOKEN_AUDIENCE must be set in the auth mechanism properties when PROVIDER_NAME is azure.\";\n/**\n * Device workflow implementation for Azure.\n *\n * @internal\n */ class AzureServiceWorkflow extends service_workflow_1.ServiceWorkflow {\n    constructor(){\n        super(...arguments);\n        this.cache = new azure_token_cache_1.AzureTokenCache();\n    }\n    /**\n     * Get the token from the environment.\n     */ async getToken(credentials) {\n        const tokenAudience = credentials?.mechanismProperties.TOKEN_AUDIENCE;\n        if (!tokenAudience) {\n            throw new error_1.MongoAzureError(TOKEN_AUDIENCE_MISSING_ERROR);\n        }\n        let token;\n        const entry = this.cache.getEntry(tokenAudience);\n        if (entry?.isValid()) {\n            token = entry.token;\n        } else {\n            this.cache.deleteEntry(tokenAudience);\n            const response = await getAzureTokenData(tokenAudience);\n            if (!isEndpointResultValid(response)) {\n                throw new error_1.MongoAzureError(ENDPOINT_RESULT_ERROR);\n            }\n            this.cache.addEntry(tokenAudience, response);\n            token = response.access_token;\n        }\n        return token;\n    }\n}\nexports.AzureServiceWorkflow = AzureServiceWorkflow;\n/**\n * Hit the Azure endpoint to get the token data.\n */ async function getAzureTokenData(tokenAudience) {\n    const url = `${AZURE_BASE_URL}&resource=${tokenAudience}`;\n    const data = await (0, utils_1.request)(url, {\n        json: true,\n        headers: AZURE_HEADERS\n    });\n    return data;\n}\n/**\n * Determines if a result returned from the endpoint is valid.\n * This means the result is not nullish, contains the access_token required field\n * and the expires_in required field.\n */ function isEndpointResultValid(token) {\n    if (token == null || typeof token !== \"object\") return false;\n    return \"access_token\" in token && \"expires_in\" in token;\n} //# sourceMappingURL=azure_service_workflow.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9henVyZV9zZXJ2aWNlX3dvcmtmbG93LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw0QkFBNEIsR0FBRyxLQUFLO0FBQ3BDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLGlFQUFnQjtBQUN4QyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxpRUFBZ0I7QUFDeEMsTUFBTUUsc0JBQXNCRixtQkFBT0EsQ0FBQyx5R0FBcUI7QUFDekQsTUFBTUcscUJBQXFCSCxtQkFBT0EsQ0FBQyx1R0FBb0I7QUFDdkQsdUNBQXVDLEdBQ3ZDLE1BQU1JLGlCQUFpQjtBQUN2QiwyQkFBMkIsR0FDM0IsTUFBTUMsZ0JBQWdCWCxPQUFPWSxNQUFNLENBQUM7SUFBRUMsVUFBVTtJQUFRQyxRQUFRO0FBQW1CO0FBQ25GLG1DQUFtQyxHQUNuQyxNQUFNQyx3QkFBd0I7QUFDOUIscUVBQXFFLEdBQ3JFLE1BQU1DLCtCQUErQjtBQUNyQzs7OztDQUlDLEdBQ0QsTUFBTVosNkJBQTZCSyxtQkFBbUJRLGVBQWU7SUFDakVDLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1QsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSVosb0JBQW9CYSxlQUFlO0lBQ3hEO0lBQ0E7O0tBRUMsR0FDRCxNQUFNQyxTQUFTQyxXQUFXLEVBQUU7UUFDeEIsTUFBTUMsZ0JBQWdCRCxhQUFhRSxvQkFBb0JDO1FBQ3ZELElBQUksQ0FBQ0YsZUFBZTtZQUNoQixNQUFNLElBQUluQixRQUFRc0IsZUFBZSxDQUFDWDtRQUN0QztRQUNBLElBQUlZO1FBQ0osTUFBTUMsUUFBUSxJQUFJLENBQUNULEtBQUssQ0FBQ1UsUUFBUSxDQUFDTjtRQUNsQyxJQUFJSyxPQUFPRSxXQUFXO1lBQ2xCSCxRQUFRQyxNQUFNRCxLQUFLO1FBQ3ZCLE9BQ0s7WUFDRCxJQUFJLENBQUNSLEtBQUssQ0FBQ1ksV0FBVyxDQUFDUjtZQUN2QixNQUFNUyxXQUFXLE1BQU1DLGtCQUFrQlY7WUFDekMsSUFBSSxDQUFDVyxzQkFBc0JGLFdBQVc7Z0JBQ2xDLE1BQU0sSUFBSTVCLFFBQVFzQixlQUFlLENBQUNaO1lBQ3RDO1lBQ0EsSUFBSSxDQUFDSyxLQUFLLENBQUNnQixRQUFRLENBQUNaLGVBQWVTO1lBQ25DTCxRQUFRSyxTQUFTSSxZQUFZO1FBQ2pDO1FBQ0EsT0FBT1Q7SUFDWDtBQUNKO0FBQ0ExQiw0QkFBNEIsR0FBR0U7QUFDL0I7O0NBRUMsR0FDRCxlQUFlOEIsa0JBQWtCVixhQUFhO0lBQzFDLE1BQU1jLE1BQU0sQ0FBQyxFQUFFNUIsZUFBZSxVQUFVLEVBQUVjLGNBQWMsQ0FBQztJQUN6RCxNQUFNZSxPQUFPLE1BQU0sQ0FBQyxHQUFHaEMsUUFBUWlDLE9BQU8sRUFBRUYsS0FBSztRQUN6Q0csTUFBTTtRQUNOQyxTQUFTL0I7SUFDYjtJQUNBLE9BQU80QjtBQUNYO0FBQ0E7Ozs7Q0FJQyxHQUNELFNBQVNKLHNCQUFzQlAsS0FBSztJQUNoQyxJQUFJQSxTQUFTLFFBQVEsT0FBT0EsVUFBVSxVQUNsQyxPQUFPO0lBQ1gsT0FBTyxrQkFBa0JBLFNBQVMsZ0JBQWdCQTtBQUN0RCxFQUNBLGtEQUFrRCIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9henVyZV9zZXJ2aWNlX3dvcmtmbG93LmpzP2NiNjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkF6dXJlU2VydmljZVdvcmtmbG93ID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vdXRpbHNcIik7XG5jb25zdCBhenVyZV90b2tlbl9jYWNoZV8xID0gcmVxdWlyZShcIi4vYXp1cmVfdG9rZW5fY2FjaGVcIik7XG5jb25zdCBzZXJ2aWNlX3dvcmtmbG93XzEgPSByZXF1aXJlKFwiLi9zZXJ2aWNlX3dvcmtmbG93XCIpO1xuLyoqIEJhc2UgVVJMIGZvciBnZXR0aW5nIEF6dXJlIHRva2Vucy4gKi9cbmNvbnN0IEFaVVJFX0JBU0VfVVJMID0gJ2h0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbWV0YWRhdGEvaWRlbnRpdHkvb2F1dGgyL3Rva2VuP2FwaS12ZXJzaW9uPTIwMTgtMDItMDEnO1xuLyoqIEF6dXJlIHJlcXVlc3QgaGVhZGVycy4gKi9cbmNvbnN0IEFaVVJFX0hFQURFUlMgPSBPYmplY3QuZnJlZXplKHsgTWV0YWRhdGE6ICd0cnVlJywgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4vKiogSW52YWxpZCBlbmRwb2ludCByZXN1bHQgZXJyb3IuICovXG5jb25zdCBFTkRQT0lOVF9SRVNVTFRfRVJST1IgPSAnQXp1cmUgZW5kcG9pbnQgZGlkIG5vdCByZXR1cm4gYSB2YWx1ZSB3aXRoIG9ubHkgYWNjZXNzX3Rva2VuIGFuZCBleHBpcmVzX2luIHByb3BlcnRpZXMnO1xuLyoqIEVycm9yIGZvciB3aGVuIHRoZSB0b2tlbiBhdWRpZW5jZSBpcyBtaXNzaW5nIGluIHRoZSBlbnZpcm9ubWVudC4gKi9cbmNvbnN0IFRPS0VOX0FVRElFTkNFX01JU1NJTkdfRVJST1IgPSAnVE9LRU5fQVVESUVOQ0UgbXVzdCBiZSBzZXQgaW4gdGhlIGF1dGggbWVjaGFuaXNtIHByb3BlcnRpZXMgd2hlbiBQUk9WSURFUl9OQU1FIGlzIGF6dXJlLic7XG4vKipcbiAqIERldmljZSB3b3JrZmxvdyBpbXBsZW1lbnRhdGlvbiBmb3IgQXp1cmUuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEF6dXJlU2VydmljZVdvcmtmbG93IGV4dGVuZHMgc2VydmljZV93b3JrZmxvd18xLlNlcnZpY2VXb3JrZmxvdyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgYXp1cmVfdG9rZW5fY2FjaGVfMS5BenVyZVRva2VuQ2FjaGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0b2tlbiBmcm9tIHRoZSBlbnZpcm9ubWVudC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRUb2tlbihjcmVkZW50aWFscykge1xuICAgICAgICBjb25zdCB0b2tlbkF1ZGllbmNlID0gY3JlZGVudGlhbHM/Lm1lY2hhbmlzbVByb3BlcnRpZXMuVE9LRU5fQVVESUVOQ0U7XG4gICAgICAgIGlmICghdG9rZW5BdWRpZW5jZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BenVyZUVycm9yKFRPS0VOX0FVRElFTkNFX01JU1NJTkdfRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0b2tlbjtcbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLmNhY2hlLmdldEVudHJ5KHRva2VuQXVkaWVuY2UpO1xuICAgICAgICBpZiAoZW50cnk/LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgdG9rZW4gPSBlbnRyeS50b2tlbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlRW50cnkodG9rZW5BdWRpZW5jZSk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldEF6dXJlVG9rZW5EYXRhKHRva2VuQXVkaWVuY2UpO1xuICAgICAgICAgICAgaWYgKCFpc0VuZHBvaW50UmVzdWx0VmFsaWQocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BenVyZUVycm9yKEVORFBPSU5UX1JFU1VMVF9FUlJPUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNhY2hlLmFkZEVudHJ5KHRva2VuQXVkaWVuY2UsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHRva2VuID0gcmVzcG9uc2UuYWNjZXNzX3Rva2VuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG59XG5leHBvcnRzLkF6dXJlU2VydmljZVdvcmtmbG93ID0gQXp1cmVTZXJ2aWNlV29ya2Zsb3c7XG4vKipcbiAqIEhpdCB0aGUgQXp1cmUgZW5kcG9pbnQgdG8gZ2V0IHRoZSB0b2tlbiBkYXRhLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRBenVyZVRva2VuRGF0YSh0b2tlbkF1ZGllbmNlKSB7XG4gICAgY29uc3QgdXJsID0gYCR7QVpVUkVfQkFTRV9VUkx9JnJlc291cmNlPSR7dG9rZW5BdWRpZW5jZX1gO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCAoMCwgdXRpbHNfMS5yZXF1ZXN0KSh1cmwsIHtcbiAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgaGVhZGVyczogQVpVUkVfSEVBREVSU1xuICAgIH0pO1xuICAgIHJldHVybiBkYXRhO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVzdWx0IHJldHVybmVkIGZyb20gdGhlIGVuZHBvaW50IGlzIHZhbGlkLlxuICogVGhpcyBtZWFucyB0aGUgcmVzdWx0IGlzIG5vdCBudWxsaXNoLCBjb250YWlucyB0aGUgYWNjZXNzX3Rva2VuIHJlcXVpcmVkIGZpZWxkXG4gKiBhbmQgdGhlIGV4cGlyZXNfaW4gcmVxdWlyZWQgZmllbGQuXG4gKi9cbmZ1bmN0aW9uIGlzRW5kcG9pbnRSZXN1bHRWYWxpZCh0b2tlbikge1xuICAgIGlmICh0b2tlbiA9PSBudWxsIHx8IHR5cGVvZiB0b2tlbiAhPT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gJ2FjY2Vzc190b2tlbicgaW4gdG9rZW4gJiYgJ2V4cGlyZXNfaW4nIGluIHRva2VuO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXp1cmVfc2VydmljZV93b3JrZmxvdy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJBenVyZVNlcnZpY2VXb3JrZmxvdyIsImVycm9yXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsImF6dXJlX3Rva2VuX2NhY2hlXzEiLCJzZXJ2aWNlX3dvcmtmbG93XzEiLCJBWlVSRV9CQVNFX1VSTCIsIkFaVVJFX0hFQURFUlMiLCJmcmVlemUiLCJNZXRhZGF0YSIsIkFjY2VwdCIsIkVORFBPSU5UX1JFU1VMVF9FUlJPUiIsIlRPS0VOX0FVRElFTkNFX01JU1NJTkdfRVJST1IiLCJTZXJ2aWNlV29ya2Zsb3ciLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsImNhY2hlIiwiQXp1cmVUb2tlbkNhY2hlIiwiZ2V0VG9rZW4iLCJjcmVkZW50aWFscyIsInRva2VuQXVkaWVuY2UiLCJtZWNoYW5pc21Qcm9wZXJ0aWVzIiwiVE9LRU5fQVVESUVOQ0UiLCJNb25nb0F6dXJlRXJyb3IiLCJ0b2tlbiIsImVudHJ5IiwiZ2V0RW50cnkiLCJpc1ZhbGlkIiwiZGVsZXRlRW50cnkiLCJyZXNwb25zZSIsImdldEF6dXJlVG9rZW5EYXRhIiwiaXNFbmRwb2ludFJlc3VsdFZhbGlkIiwiYWRkRW50cnkiLCJhY2Nlc3NfdG9rZW4iLCJ1cmwiLCJkYXRhIiwicmVxdWVzdCIsImpzb24iLCJoZWFkZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_service_workflow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_token_cache.js":
/*!******************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_token_cache.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AzureTokenCache = exports.AzureTokenEntry = void 0;\nconst cache_1 = __webpack_require__(/*! ./cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js\");\n/** @internal */ class AzureTokenEntry extends cache_1.ExpiringCacheEntry {\n    /**\n     * Instantiate the entry.\n     */ constructor(token, expiration){\n        super(expiration);\n        this.token = token;\n    }\n}\nexports.AzureTokenEntry = AzureTokenEntry;\n/**\n * A cache of access tokens from Azure.\n * @internal\n */ class AzureTokenCache extends cache_1.Cache {\n    /**\n     * Add an entry to the cache.\n     */ addEntry(tokenAudience, token) {\n        const entry = new AzureTokenEntry(token.access_token, token.expires_in);\n        this.entries.set(tokenAudience, entry);\n        return entry;\n    }\n    /**\n     * Create a cache key.\n     */ cacheKey(tokenAudience) {\n        return tokenAudience;\n    }\n    /**\n     * Delete an entry from the cache.\n     */ deleteEntry(tokenAudience) {\n        this.entries.delete(tokenAudience);\n    }\n    /**\n     * Get an Azure token entry from the cache.\n     */ getEntry(tokenAudience) {\n        return this.entries.get(tokenAudience);\n    }\n}\nexports.AzureTokenCache = AzureTokenCache; //# sourceMappingURL=azure_token_cache.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9henVyZV90b2tlbl9jYWNoZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsdUJBQXVCLEdBQUdBLHVCQUF1QixHQUFHLEtBQUs7QUFDekQsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsaUZBQVM7QUFDakMsY0FBYyxHQUNkLE1BQU1GLHdCQUF3QkMsUUFBUUUsa0JBQWtCO0lBQ3BEOztLQUVDLEdBQ0RDLFlBQVlDLEtBQUssRUFBRUMsVUFBVSxDQUFFO1FBQzNCLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNELEtBQUssR0FBR0E7SUFDakI7QUFDSjtBQUNBUix1QkFBdUIsR0FBR0c7QUFDMUI7OztDQUdDLEdBQ0QsTUFBTUQsd0JBQXdCRSxRQUFRTSxLQUFLO0lBQ3ZDOztLQUVDLEdBQ0RDLFNBQVNDLGFBQWEsRUFBRUosS0FBSyxFQUFFO1FBQzNCLE1BQU1LLFFBQVEsSUFBSVYsZ0JBQWdCSyxNQUFNTSxZQUFZLEVBQUVOLE1BQU1PLFVBQVU7UUFDdEUsSUFBSSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0wsZUFBZUM7UUFDaEMsT0FBT0E7SUFDWDtJQUNBOztLQUVDLEdBQ0RLLFNBQVNOLGFBQWEsRUFBRTtRQUNwQixPQUFPQTtJQUNYO0lBQ0E7O0tBRUMsR0FDRE8sWUFBWVAsYUFBYSxFQUFFO1FBQ3ZCLElBQUksQ0FBQ0ksT0FBTyxDQUFDSSxNQUFNLENBQUNSO0lBQ3hCO0lBQ0E7O0tBRUMsR0FDRFMsU0FBU1QsYUFBYSxFQUFFO1FBQ3BCLE9BQU8sSUFBSSxDQUFDSSxPQUFPLENBQUNNLEdBQUcsQ0FBQ1Y7SUFDNUI7QUFDSjtBQUNBWix1QkFBdUIsR0FBR0UsaUJBQzFCLDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9henVyZV90b2tlbl9jYWNoZS5qcz9iMDNiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BenVyZVRva2VuQ2FjaGUgPSBleHBvcnRzLkF6dXJlVG9rZW5FbnRyeSA9IHZvaWQgMDtcbmNvbnN0IGNhY2hlXzEgPSByZXF1aXJlKFwiLi9jYWNoZVwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEF6dXJlVG9rZW5FbnRyeSBleHRlbmRzIGNhY2hlXzEuRXhwaXJpbmdDYWNoZUVudHJ5IHtcbiAgICAvKipcbiAgICAgKiBJbnN0YW50aWF0ZSB0aGUgZW50cnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodG9rZW4sIGV4cGlyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoZXhwaXJhdGlvbik7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICB9XG59XG5leHBvcnRzLkF6dXJlVG9rZW5FbnRyeSA9IEF6dXJlVG9rZW5FbnRyeTtcbi8qKlxuICogQSBjYWNoZSBvZiBhY2Nlc3MgdG9rZW5zIGZyb20gQXp1cmUuXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQXp1cmVUb2tlbkNhY2hlIGV4dGVuZHMgY2FjaGVfMS5DYWNoZSB7XG4gICAgLyoqXG4gICAgICogQWRkIGFuIGVudHJ5IHRvIHRoZSBjYWNoZS5cbiAgICAgKi9cbiAgICBhZGRFbnRyeSh0b2tlbkF1ZGllbmNlLCB0b2tlbikge1xuICAgICAgICBjb25zdCBlbnRyeSA9IG5ldyBBenVyZVRva2VuRW50cnkodG9rZW4uYWNjZXNzX3Rva2VuLCB0b2tlbi5leHBpcmVzX2luKTtcbiAgICAgICAgdGhpcy5lbnRyaWVzLnNldCh0b2tlbkF1ZGllbmNlLCBlbnRyeSk7XG4gICAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY2FjaGUga2V5LlxuICAgICAqL1xuICAgIGNhY2hlS2V5KHRva2VuQXVkaWVuY2UpIHtcbiAgICAgICAgcmV0dXJuIHRva2VuQXVkaWVuY2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhbiBlbnRyeSBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKi9cbiAgICBkZWxldGVFbnRyeSh0b2tlbkF1ZGllbmNlKSB7XG4gICAgICAgIHRoaXMuZW50cmllcy5kZWxldGUodG9rZW5BdWRpZW5jZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbiBBenVyZSB0b2tlbiBlbnRyeSBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKi9cbiAgICBnZXRFbnRyeSh0b2tlbkF1ZGllbmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudHJpZXMuZ2V0KHRva2VuQXVkaWVuY2UpO1xuICAgIH1cbn1cbmV4cG9ydHMuQXp1cmVUb2tlbkNhY2hlID0gQXp1cmVUb2tlbkNhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXp1cmVfdG9rZW5fY2FjaGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQXp1cmVUb2tlbkNhY2hlIiwiQXp1cmVUb2tlbkVudHJ5IiwiY2FjaGVfMSIsInJlcXVpcmUiLCJFeHBpcmluZ0NhY2hlRW50cnkiLCJjb25zdHJ1Y3RvciIsInRva2VuIiwiZXhwaXJhdGlvbiIsIkNhY2hlIiwiYWRkRW50cnkiLCJ0b2tlbkF1ZGllbmNlIiwiZW50cnkiLCJhY2Nlc3NfdG9rZW4iLCJleHBpcmVzX2luIiwiZW50cmllcyIsInNldCIsImNhY2hlS2V5IiwiZGVsZXRlRW50cnkiLCJkZWxldGUiLCJnZXRFbnRyeSIsImdldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/azure_token_cache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Cache = exports.ExpiringCacheEntry = void 0;\n/* 5 minutes in milliseconds */ const EXPIRATION_BUFFER_MS = 300000;\n/**\n * An entry in a cache that can expire in a certain amount of time.\n */ class ExpiringCacheEntry {\n    /**\n     * Create a new expiring token entry.\n     */ constructor(expiration){\n        this.expiration = this.expirationTime(expiration);\n    }\n    /**\n     * The entry is still valid if the expiration is more than\n     * 5 minutes from the expiration time.\n     */ isValid() {\n        return this.expiration - Date.now() > EXPIRATION_BUFFER_MS;\n    }\n    /**\n     * Get an expiration time in milliseconds past epoch.\n     */ expirationTime(expiresInSeconds) {\n        return Date.now() + expiresInSeconds * 1000;\n    }\n}\nexports.ExpiringCacheEntry = ExpiringCacheEntry;\n/**\n * Base class for OIDC caches.\n */ class Cache {\n    /**\n     * Create a new cache.\n     */ constructor(){\n        this.entries = new Map();\n    }\n    /**\n     * Clear the cache.\n     */ clear() {\n        this.entries.clear();\n    }\n    /**\n     * Create a cache key from the address and username.\n     */ hashedCacheKey(address, username, callbackHash) {\n        return JSON.stringify([\n            address,\n            username,\n            callbackHash\n        ]);\n    }\n}\nexports.Cache = Cache; //# sourceMappingURL=cache.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9jYWNoZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsYUFBYSxHQUFHQSwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xELDZCQUE2QixHQUM3QixNQUFNSSx1QkFBdUI7QUFDN0I7O0NBRUMsR0FDRCxNQUFNRDtJQUNGOztLQUVDLEdBQ0RFLFlBQVlDLFVBQVUsQ0FBRTtRQUNwQixJQUFJLENBQUNBLFVBQVUsR0FBRyxJQUFJLENBQUNDLGNBQWMsQ0FBQ0Q7SUFDMUM7SUFDQTs7O0tBR0MsR0FDREUsVUFBVTtRQUNOLE9BQU8sSUFBSSxDQUFDRixVQUFVLEdBQUdHLEtBQUtDLEdBQUcsS0FBS047SUFDMUM7SUFDQTs7S0FFQyxHQUNERyxlQUFlSSxnQkFBZ0IsRUFBRTtRQUM3QixPQUFPRixLQUFLQyxHQUFHLEtBQUtDLG1CQUFtQjtJQUMzQztBQUNKO0FBQ0FYLDBCQUEwQixHQUFHRztBQUM3Qjs7Q0FFQyxHQUNELE1BQU1EO0lBQ0Y7O0tBRUMsR0FDREcsYUFBYztRQUNWLElBQUksQ0FBQ08sT0FBTyxHQUFHLElBQUlDO0lBQ3ZCO0lBQ0E7O0tBRUMsR0FDREMsUUFBUTtRQUNKLElBQUksQ0FBQ0YsT0FBTyxDQUFDRSxLQUFLO0lBQ3RCO0lBQ0E7O0tBRUMsR0FDREMsZUFBZUMsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLFlBQVksRUFBRTtRQUM1QyxPQUFPQyxLQUFLQyxTQUFTLENBQUM7WUFBQ0o7WUFBU0M7WUFBVUM7U0FBYTtJQUMzRDtBQUNKO0FBQ0FsQixhQUFhLEdBQUdFLE9BQ2hCLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9jYWNoZS5qcz81ODEyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DYWNoZSA9IGV4cG9ydHMuRXhwaXJpbmdDYWNoZUVudHJ5ID0gdm9pZCAwO1xuLyogNSBtaW51dGVzIGluIG1pbGxpc2Vjb25kcyAqL1xuY29uc3QgRVhQSVJBVElPTl9CVUZGRVJfTVMgPSAzMDAwMDA7XG4vKipcbiAqIEFuIGVudHJ5IGluIGEgY2FjaGUgdGhhdCBjYW4gZXhwaXJlIGluIGEgY2VydGFpbiBhbW91bnQgb2YgdGltZS5cbiAqL1xuY2xhc3MgRXhwaXJpbmdDYWNoZUVudHJ5IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgZXhwaXJpbmcgdG9rZW4gZW50cnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZXhwaXJhdGlvbikge1xuICAgICAgICB0aGlzLmV4cGlyYXRpb24gPSB0aGlzLmV4cGlyYXRpb25UaW1lKGV4cGlyYXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZW50cnkgaXMgc3RpbGwgdmFsaWQgaWYgdGhlIGV4cGlyYXRpb24gaXMgbW9yZSB0aGFuXG4gICAgICogNSBtaW51dGVzIGZyb20gdGhlIGV4cGlyYXRpb24gdGltZS5cbiAgICAgKi9cbiAgICBpc1ZhbGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHBpcmF0aW9uIC0gRGF0ZS5ub3coKSA+IEVYUElSQVRJT05fQlVGRkVSX01TO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gZXhwaXJhdGlvbiB0aW1lIGluIG1pbGxpc2Vjb25kcyBwYXN0IGVwb2NoLlxuICAgICAqL1xuICAgIGV4cGlyYXRpb25UaW1lKGV4cGlyZXNJblNlY29uZHMpIHtcbiAgICAgICAgcmV0dXJuIERhdGUubm93KCkgKyBleHBpcmVzSW5TZWNvbmRzICogMTAwMDtcbiAgICB9XG59XG5leHBvcnRzLkV4cGlyaW5nQ2FjaGVFbnRyeSA9IEV4cGlyaW5nQ2FjaGVFbnRyeTtcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgT0lEQyBjYWNoZXMuXG4gKi9cbmNsYXNzIENhY2hlIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY2FjaGUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZW50cmllcyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXIgdGhlIGNhY2hlLlxuICAgICAqL1xuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLmVudHJpZXMuY2xlYXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY2FjaGUga2V5IGZyb20gdGhlIGFkZHJlc3MgYW5kIHVzZXJuYW1lLlxuICAgICAqL1xuICAgIGhhc2hlZENhY2hlS2V5KGFkZHJlc3MsIHVzZXJuYW1lLCBjYWxsYmFja0hhc2gpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KFthZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoXSk7XG4gICAgfVxufVxuZXhwb3J0cy5DYWNoZSA9IENhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ2FjaGUiLCJFeHBpcmluZ0NhY2hlRW50cnkiLCJFWFBJUkFUSU9OX0JVRkZFUl9NUyIsImNvbnN0cnVjdG9yIiwiZXhwaXJhdGlvbiIsImV4cGlyYXRpb25UaW1lIiwiaXNWYWxpZCIsIkRhdGUiLCJub3ciLCJleHBpcmVzSW5TZWNvbmRzIiwiZW50cmllcyIsIk1hcCIsImNsZWFyIiwiaGFzaGVkQ2FjaGVLZXkiLCJhZGRyZXNzIiwidXNlcm5hbWUiLCJjYWxsYmFja0hhc2giLCJKU09OIiwic3RyaW5naWZ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_lock_cache.js":
/*!********************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_lock_cache.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CallbackLockCache = void 0;\nconst error_1 = __webpack_require__(/*! ../../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst cache_1 = __webpack_require__(/*! ./cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js\");\n/** Error message for when request callback is missing. */ const REQUEST_CALLBACK_REQUIRED_ERROR = \"Auth mechanism property REQUEST_TOKEN_CALLBACK is required.\";\n/* Counter for function \"hashes\".*/ let FN_HASH_COUNTER = 0;\n/* No function present function */ const NO_FUNCTION = async ()=>({\n        accessToken: \"test\"\n    });\n/* The map of function hashes */ const FN_HASHES = new WeakMap();\n/* Put the no function hash in the map. */ FN_HASHES.set(NO_FUNCTION, FN_HASH_COUNTER);\n/**\n * A cache of request and refresh callbacks per server/user.\n */ class CallbackLockCache extends cache_1.Cache {\n    /**\n     * Get the callbacks for the connection and credentials. If an entry does not\n     * exist a new one will get set.\n     */ getEntry(connection, credentials) {\n        const requestCallback = credentials.mechanismProperties.REQUEST_TOKEN_CALLBACK;\n        const refreshCallback = credentials.mechanismProperties.REFRESH_TOKEN_CALLBACK;\n        if (!requestCallback) {\n            throw new error_1.MongoInvalidArgumentError(REQUEST_CALLBACK_REQUIRED_ERROR);\n        }\n        const callbackHash = hashFunctions(requestCallback, refreshCallback);\n        const key = this.cacheKey(connection.address, credentials.username, callbackHash);\n        const entry = this.entries.get(key);\n        if (entry) {\n            return entry;\n        }\n        return this.addEntry(key, callbackHash, requestCallback, refreshCallback);\n    }\n    /**\n     * Set locked callbacks on for connection and credentials.\n     */ addEntry(key, callbackHash, requestCallback, refreshCallback) {\n        const entry = {\n            requestCallback: withLock(requestCallback),\n            refreshCallback: refreshCallback ? withLock(refreshCallback) : undefined,\n            callbackHash: callbackHash\n        };\n        this.entries.set(key, entry);\n        return entry;\n    }\n    /**\n     * Create a cache key from the address and username.\n     */ cacheKey(address, username, callbackHash) {\n        return this.hashedCacheKey(address, username, callbackHash);\n    }\n}\nexports.CallbackLockCache = CallbackLockCache;\n/**\n * Ensure the callback is only executed one at a time.\n */ function withLock(callback) {\n    let lock = Promise.resolve();\n    return async (info, context)=>{\n        await lock;\n        lock = lock.then(()=>callback(info, context));\n        return lock;\n    };\n}\n/**\n * Get the hash string for the request and refresh functions.\n */ function hashFunctions(requestFn, refreshFn) {\n    let requestHash = FN_HASHES.get(requestFn);\n    let refreshHash = FN_HASHES.get(refreshFn ?? NO_FUNCTION);\n    if (requestHash == null) {\n        // Create a new one for the function and put it in the map.\n        FN_HASH_COUNTER++;\n        requestHash = FN_HASH_COUNTER;\n        FN_HASHES.set(requestFn, FN_HASH_COUNTER);\n    }\n    if (refreshHash == null && refreshFn) {\n        // Create a new one for the function and put it in the map.\n        FN_HASH_COUNTER++;\n        refreshHash = FN_HASH_COUNTER;\n        FN_HASHES.set(refreshFn, FN_HASH_COUNTER);\n    }\n    return `${requestHash}-${refreshHash}`;\n} //# sourceMappingURL=callback_lock_cache.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9jYWxsYmFja19sb2NrX2NhY2hlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx5QkFBeUIsR0FBRyxLQUFLO0FBQ2pDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLGlFQUFnQjtBQUN4QyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxpRkFBUztBQUNqQyx3REFBd0QsR0FDeEQsTUFBTUUsa0NBQWtDO0FBQ3hDLGlDQUFpQyxHQUNqQyxJQUFJQyxrQkFBa0I7QUFDdEIsZ0NBQWdDLEdBQ2hDLE1BQU1DLGNBQWMsVUFBYTtRQUFFQyxhQUFhO0lBQU87QUFDdkQsOEJBQThCLEdBQzlCLE1BQU1DLFlBQVksSUFBSUM7QUFDdEIsd0NBQXdDLEdBQ3hDRCxVQUFVRSxHQUFHLENBQUNKLGFBQWFEO0FBQzNCOztDQUVDLEdBQ0QsTUFBTUwsMEJBQTBCRyxRQUFRUSxLQUFLO0lBQ3pDOzs7S0FHQyxHQUNEQyxTQUFTQyxVQUFVLEVBQUVDLFdBQVcsRUFBRTtRQUM5QixNQUFNQyxrQkFBa0JELFlBQVlFLG1CQUFtQixDQUFDQyxzQkFBc0I7UUFDOUUsTUFBTUMsa0JBQWtCSixZQUFZRSxtQkFBbUIsQ0FBQ0csc0JBQXNCO1FBQzlFLElBQUksQ0FBQ0osaUJBQWlCO1lBQ2xCLE1BQU0sSUFBSWQsUUFBUW1CLHlCQUF5QixDQUFDaEI7UUFDaEQ7UUFDQSxNQUFNaUIsZUFBZUMsY0FBY1AsaUJBQWlCRztRQUNwRCxNQUFNSyxNQUFNLElBQUksQ0FBQ0MsUUFBUSxDQUFDWCxXQUFXWSxPQUFPLEVBQUVYLFlBQVlZLFFBQVEsRUFBRUw7UUFDcEUsTUFBTU0sUUFBUSxJQUFJLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTjtRQUMvQixJQUFJSSxPQUFPO1lBQ1AsT0FBT0E7UUFDWDtRQUNBLE9BQU8sSUFBSSxDQUFDRyxRQUFRLENBQUNQLEtBQUtGLGNBQWNOLGlCQUFpQkc7SUFDN0Q7SUFDQTs7S0FFQyxHQUNEWSxTQUFTUCxHQUFHLEVBQUVGLFlBQVksRUFBRU4sZUFBZSxFQUFFRyxlQUFlLEVBQUU7UUFDMUQsTUFBTVMsUUFBUTtZQUNWWixpQkFBaUJnQixTQUFTaEI7WUFDMUJHLGlCQUFpQkEsa0JBQWtCYSxTQUFTYixtQkFBbUJjO1lBQy9EWCxjQUFjQTtRQUNsQjtRQUNBLElBQUksQ0FBQ08sT0FBTyxDQUFDbEIsR0FBRyxDQUFDYSxLQUFLSTtRQUN0QixPQUFPQTtJQUNYO0lBQ0E7O0tBRUMsR0FDREgsU0FBU0MsT0FBTyxFQUFFQyxRQUFRLEVBQUVMLFlBQVksRUFBRTtRQUN0QyxPQUFPLElBQUksQ0FBQ1ksY0FBYyxDQUFDUixTQUFTQyxVQUFVTDtJQUNsRDtBQUNKO0FBQ0F2Qix5QkFBeUIsR0FBR0U7QUFDNUI7O0NBRUMsR0FDRCxTQUFTK0IsU0FBU0csUUFBUTtJQUN0QixJQUFJQyxPQUFPQyxRQUFRQyxPQUFPO0lBQzFCLE9BQU8sT0FBT0MsTUFBTUM7UUFDaEIsTUFBTUo7UUFDTkEsT0FBT0EsS0FBS0ssSUFBSSxDQUFDLElBQU1OLFNBQVNJLE1BQU1DO1FBQ3RDLE9BQU9KO0lBQ1g7QUFDSjtBQUNBOztDQUVDLEdBQ0QsU0FBU2IsY0FBY21CLFNBQVMsRUFBRUMsU0FBUztJQUN2QyxJQUFJQyxjQUFjbkMsVUFBVXFCLEdBQUcsQ0FBQ1k7SUFDaEMsSUFBSUcsY0FBY3BDLFVBQVVxQixHQUFHLENBQUNhLGFBQWFwQztJQUM3QyxJQUFJcUMsZUFBZSxNQUFNO1FBQ3JCLDJEQUEyRDtRQUMzRHRDO1FBQ0FzQyxjQUFjdEM7UUFDZEcsVUFBVUUsR0FBRyxDQUFDK0IsV0FBV3BDO0lBQzdCO0lBQ0EsSUFBSXVDLGVBQWUsUUFBUUYsV0FBVztRQUNsQywyREFBMkQ7UUFDM0RyQztRQUNBdUMsY0FBY3ZDO1FBQ2RHLFVBQVVFLEdBQUcsQ0FBQ2dDLFdBQVdyQztJQUM3QjtJQUNBLE9BQU8sQ0FBQyxFQUFFc0MsWUFBWSxDQUFDLEVBQUVDLFlBQVksQ0FBQztBQUMxQyxFQUNBLCtDQUErQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9jYWxsYmFja19sb2NrX2NhY2hlLmpzPzliMGYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhbGxiYWNrTG9ja0NhY2hlID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9lcnJvclwiKTtcbmNvbnN0IGNhY2hlXzEgPSByZXF1aXJlKFwiLi9jYWNoZVwiKTtcbi8qKiBFcnJvciBtZXNzYWdlIGZvciB3aGVuIHJlcXVlc3QgY2FsbGJhY2sgaXMgbWlzc2luZy4gKi9cbmNvbnN0IFJFUVVFU1RfQ0FMTEJBQ0tfUkVRVUlSRURfRVJST1IgPSAnQXV0aCBtZWNoYW5pc20gcHJvcGVydHkgUkVRVUVTVF9UT0tFTl9DQUxMQkFDSyBpcyByZXF1aXJlZC4nO1xuLyogQ291bnRlciBmb3IgZnVuY3Rpb24gXCJoYXNoZXNcIi4qL1xubGV0IEZOX0hBU0hfQ09VTlRFUiA9IDA7XG4vKiBObyBmdW5jdGlvbiBwcmVzZW50IGZ1bmN0aW9uICovXG5jb25zdCBOT19GVU5DVElPTiA9IGFzeW5jICgpID0+ICh7IGFjY2Vzc1Rva2VuOiAndGVzdCcgfSk7XG4vKiBUaGUgbWFwIG9mIGZ1bmN0aW9uIGhhc2hlcyAqL1xuY29uc3QgRk5fSEFTSEVTID0gbmV3IFdlYWtNYXAoKTtcbi8qIFB1dCB0aGUgbm8gZnVuY3Rpb24gaGFzaCBpbiB0aGUgbWFwLiAqL1xuRk5fSEFTSEVTLnNldChOT19GVU5DVElPTiwgRk5fSEFTSF9DT1VOVEVSKTtcbi8qKlxuICogQSBjYWNoZSBvZiByZXF1ZXN0IGFuZCByZWZyZXNoIGNhbGxiYWNrcyBwZXIgc2VydmVyL3VzZXIuXG4gKi9cbmNsYXNzIENhbGxiYWNrTG9ja0NhY2hlIGV4dGVuZHMgY2FjaGVfMS5DYWNoZSB7XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjYWxsYmFja3MgZm9yIHRoZSBjb25uZWN0aW9uIGFuZCBjcmVkZW50aWFscy4gSWYgYW4gZW50cnkgZG9lcyBub3RcbiAgICAgKiBleGlzdCBhIG5ldyBvbmUgd2lsbCBnZXQgc2V0LlxuICAgICAqL1xuICAgIGdldEVudHJ5KGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RDYWxsYmFjayA9IGNyZWRlbnRpYWxzLm1lY2hhbmlzbVByb3BlcnRpZXMuUkVRVUVTVF9UT0tFTl9DQUxMQkFDSztcbiAgICAgICAgY29uc3QgcmVmcmVzaENhbGxiYWNrID0gY3JlZGVudGlhbHMubWVjaGFuaXNtUHJvcGVydGllcy5SRUZSRVNIX1RPS0VOX0NBTExCQUNLO1xuICAgICAgICBpZiAoIXJlcXVlc3RDYWxsYmFjaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihSRVFVRVNUX0NBTExCQUNLX1JFUVVJUkVEX0VSUk9SKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWxsYmFja0hhc2ggPSBoYXNoRnVuY3Rpb25zKHJlcXVlc3RDYWxsYmFjaywgcmVmcmVzaENhbGxiYWNrKTtcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5jYWNoZUtleShjb25uZWN0aW9uLmFkZHJlc3MsIGNyZWRlbnRpYWxzLnVzZXJuYW1lLCBjYWxsYmFja0hhc2gpO1xuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuZW50cmllcy5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRW50cnkoa2V5LCBjYWxsYmFja0hhc2gsIHJlcXVlc3RDYWxsYmFjaywgcmVmcmVzaENhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGxvY2tlZCBjYWxsYmFja3Mgb24gZm9yIGNvbm5lY3Rpb24gYW5kIGNyZWRlbnRpYWxzLlxuICAgICAqL1xuICAgIGFkZEVudHJ5KGtleSwgY2FsbGJhY2tIYXNoLCByZXF1ZXN0Q2FsbGJhY2ssIHJlZnJlc2hDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBlbnRyeSA9IHtcbiAgICAgICAgICAgIHJlcXVlc3RDYWxsYmFjazogd2l0aExvY2socmVxdWVzdENhbGxiYWNrKSxcbiAgICAgICAgICAgIHJlZnJlc2hDYWxsYmFjazogcmVmcmVzaENhbGxiYWNrID8gd2l0aExvY2socmVmcmVzaENhbGxiYWNrKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNhbGxiYWNrSGFzaDogY2FsbGJhY2tIYXNoXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZW50cmllcy5zZXQoa2V5LCBlbnRyeSk7XG4gICAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY2FjaGUga2V5IGZyb20gdGhlIGFkZHJlc3MgYW5kIHVzZXJuYW1lLlxuICAgICAqL1xuICAgIGNhY2hlS2V5KGFkZHJlc3MsIHVzZXJuYW1lLCBjYWxsYmFja0hhc2gpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzaGVkQ2FjaGVLZXkoYWRkcmVzcywgdXNlcm5hbWUsIGNhbGxiYWNrSGFzaCk7XG4gICAgfVxufVxuZXhwb3J0cy5DYWxsYmFja0xvY2tDYWNoZSA9IENhbGxiYWNrTG9ja0NhY2hlO1xuLyoqXG4gKiBFbnN1cmUgdGhlIGNhbGxiYWNrIGlzIG9ubHkgZXhlY3V0ZWQgb25lIGF0IGEgdGltZS5cbiAqL1xuZnVuY3Rpb24gd2l0aExvY2soY2FsbGJhY2spIHtcbiAgICBsZXQgbG9jayA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIHJldHVybiBhc3luYyAoaW5mbywgY29udGV4dCkgPT4ge1xuICAgICAgICBhd2FpdCBsb2NrO1xuICAgICAgICBsb2NrID0gbG9jay50aGVuKCgpID0+IGNhbGxiYWNrKGluZm8sIGNvbnRleHQpKTtcbiAgICAgICAgcmV0dXJuIGxvY2s7XG4gICAgfTtcbn1cbi8qKlxuICogR2V0IHRoZSBoYXNoIHN0cmluZyBmb3IgdGhlIHJlcXVlc3QgYW5kIHJlZnJlc2ggZnVuY3Rpb25zLlxuICovXG5mdW5jdGlvbiBoYXNoRnVuY3Rpb25zKHJlcXVlc3RGbiwgcmVmcmVzaEZuKSB7XG4gICAgbGV0IHJlcXVlc3RIYXNoID0gRk5fSEFTSEVTLmdldChyZXF1ZXN0Rm4pO1xuICAgIGxldCByZWZyZXNoSGFzaCA9IEZOX0hBU0hFUy5nZXQocmVmcmVzaEZuID8/IE5PX0ZVTkNUSU9OKTtcbiAgICBpZiAocmVxdWVzdEhhc2ggPT0gbnVsbCkge1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgb25lIGZvciB0aGUgZnVuY3Rpb24gYW5kIHB1dCBpdCBpbiB0aGUgbWFwLlxuICAgICAgICBGTl9IQVNIX0NPVU5URVIrKztcbiAgICAgICAgcmVxdWVzdEhhc2ggPSBGTl9IQVNIX0NPVU5URVI7XG4gICAgICAgIEZOX0hBU0hFUy5zZXQocmVxdWVzdEZuLCBGTl9IQVNIX0NPVU5URVIpO1xuICAgIH1cbiAgICBpZiAocmVmcmVzaEhhc2ggPT0gbnVsbCAmJiByZWZyZXNoRm4pIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IG9uZSBmb3IgdGhlIGZ1bmN0aW9uIGFuZCBwdXQgaXQgaW4gdGhlIG1hcC5cbiAgICAgICAgRk5fSEFTSF9DT1VOVEVSKys7XG4gICAgICAgIHJlZnJlc2hIYXNoID0gRk5fSEFTSF9DT1VOVEVSO1xuICAgICAgICBGTl9IQVNIRVMuc2V0KHJlZnJlc2hGbiwgRk5fSEFTSF9DT1VOVEVSKTtcbiAgICB9XG4gICAgcmV0dXJuIGAke3JlcXVlc3RIYXNofS0ke3JlZnJlc2hIYXNofWA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxsYmFja19sb2NrX2NhY2hlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNhbGxiYWNrTG9ja0NhY2hlIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJjYWNoZV8xIiwiUkVRVUVTVF9DQUxMQkFDS19SRVFVSVJFRF9FUlJPUiIsIkZOX0hBU0hfQ09VTlRFUiIsIk5PX0ZVTkNUSU9OIiwiYWNjZXNzVG9rZW4iLCJGTl9IQVNIRVMiLCJXZWFrTWFwIiwic2V0IiwiQ2FjaGUiLCJnZXRFbnRyeSIsImNvbm5lY3Rpb24iLCJjcmVkZW50aWFscyIsInJlcXVlc3RDYWxsYmFjayIsIm1lY2hhbmlzbVByb3BlcnRpZXMiLCJSRVFVRVNUX1RPS0VOX0NBTExCQUNLIiwicmVmcmVzaENhbGxiYWNrIiwiUkVGUkVTSF9UT0tFTl9DQUxMQkFDSyIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJjYWxsYmFja0hhc2giLCJoYXNoRnVuY3Rpb25zIiwia2V5IiwiY2FjaGVLZXkiLCJhZGRyZXNzIiwidXNlcm5hbWUiLCJlbnRyeSIsImVudHJpZXMiLCJnZXQiLCJhZGRFbnRyeSIsIndpdGhMb2NrIiwidW5kZWZpbmVkIiwiaGFzaGVkQ2FjaGVLZXkiLCJjYWxsYmFjayIsImxvY2siLCJQcm9taXNlIiwicmVzb2x2ZSIsImluZm8iLCJjb250ZXh0IiwidGhlbiIsInJlcXVlc3RGbiIsInJlZnJlc2hGbiIsInJlcXVlc3RIYXNoIiwicmVmcmVzaEhhc2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_lock_cache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_workflow.js":
/*!******************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_workflow.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CallbackWorkflow = void 0;\nconst bson_1 = __webpack_require__(/*! bson */ \"(ssr)/./node_modules/bson/lib/bson.cjs\");\nconst error_1 = __webpack_require__(/*! ../../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst providers_1 = __webpack_require__(/*! ../providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst callback_lock_cache_1 = __webpack_require__(/*! ./callback_lock_cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_lock_cache.js\");\nconst token_entry_cache_1 = __webpack_require__(/*! ./token_entry_cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/token_entry_cache.js\");\n/** The current version of OIDC implementation. */ const OIDC_VERSION = 0;\n/** 5 minutes in seconds */ const TIMEOUT_S = 300;\n/** Properties allowed on results of callbacks. */ const RESULT_PROPERTIES = [\n    \"accessToken\",\n    \"expiresInSeconds\",\n    \"refreshToken\"\n];\n/** Error message when the callback result is invalid. */ const CALLBACK_RESULT_ERROR = \"User provided OIDC callbacks must return a valid object with an accessToken.\";\n/**\n * OIDC implementation of a callback based workflow.\n * @internal\n */ class CallbackWorkflow {\n    /**\n     * Instantiate the workflow\n     */ constructor(){\n        this.cache = new token_entry_cache_1.TokenEntryCache();\n        this.callbackCache = new callback_lock_cache_1.CallbackLockCache();\n    }\n    /**\n     * Get the document to add for speculative authentication. This also needs\n     * to add a db field from the credentials source.\n     */ async speculativeAuth(credentials) {\n        const document = startCommandDocument(credentials);\n        document.db = credentials.source;\n        return {\n            speculativeAuthenticate: document\n        };\n    }\n    /**\n     * Execute the OIDC callback workflow.\n     */ async execute(connection, credentials, reauthenticating, response) {\n        // Get the callbacks with locks from the callback lock cache.\n        const { requestCallback, refreshCallback, callbackHash } = this.callbackCache.getEntry(connection, credentials);\n        // Look for an existing entry in the cache.\n        const entry = this.cache.getEntry(connection.address, credentials.username, callbackHash);\n        let result;\n        if (entry) {\n            // Reauthentication cannot use a token from the cache since the server has\n            // stated it is invalid by the request for reauthentication.\n            if (entry.isValid() && !reauthenticating) {\n                // Presence of a valid cache entry means we can skip to the finishing step.\n                result = await this.finishAuthentication(connection, credentials, entry.tokenResult, response?.speculativeAuthenticate?.conversationId);\n            } else {\n                // Presence of an expired cache entry means we must fetch a new one and\n                // then execute the final step.\n                const tokenResult = await this.fetchAccessToken(connection, credentials, entry.serverInfo, reauthenticating, callbackHash, requestCallback, refreshCallback);\n                try {\n                    result = await this.finishAuthentication(connection, credentials, tokenResult, reauthenticating ? undefined : response?.speculativeAuthenticate?.conversationId);\n                } catch (error) {\n                    // If we are reauthenticating and this errors with reauthentication\n                    // required, we need to do the entire process over again and clear\n                    // the cache entry.\n                    if (reauthenticating && error instanceof error_1.MongoError && error.code === error_1.MONGODB_ERROR_CODES.Reauthenticate) {\n                        this.cache.deleteEntry(connection.address, credentials.username, callbackHash);\n                        result = await this.execute(connection, credentials, reauthenticating);\n                    } else {\n                        throw error;\n                    }\n                }\n            }\n        } else {\n            // No entry in the cache requires us to do all authentication steps\n            // from start to finish, including getting a fresh token for the cache.\n            const startDocument = await this.startAuthentication(connection, credentials, reauthenticating, response);\n            const conversationId = startDocument.conversationId;\n            const serverResult = bson_1.BSON.deserialize(startDocument.payload.buffer);\n            const tokenResult = await this.fetchAccessToken(connection, credentials, serverResult, reauthenticating, callbackHash, requestCallback, refreshCallback);\n            result = await this.finishAuthentication(connection, credentials, tokenResult, conversationId);\n        }\n        return result;\n    }\n    /**\n     * Starts the callback authentication process. If there is a speculative\n     * authentication document from the initial handshake, then we will use that\n     * value to get the issuer, otherwise we will send the saslStart command.\n     */ async startAuthentication(connection, credentials, reauthenticating, response) {\n        let result;\n        if (!reauthenticating && response?.speculativeAuthenticate) {\n            result = response.speculativeAuthenticate;\n        } else {\n            result = await connection.command((0, utils_1.ns)(credentials.source), startCommandDocument(credentials), undefined);\n        }\n        return result;\n    }\n    /**\n     * Finishes the callback authentication process.\n     */ async finishAuthentication(connection, credentials, tokenResult, conversationId) {\n        const result = await connection.command((0, utils_1.ns)(credentials.source), finishCommandDocument(tokenResult.accessToken, conversationId), undefined);\n        return result;\n    }\n    /**\n     * Fetches an access token using either the request or refresh callbacks and\n     * puts it in the cache.\n     */ async fetchAccessToken(connection, credentials, serverInfo, reauthenticating, callbackHash, requestCallback, refreshCallback) {\n        // Get the token from the cache.\n        const entry = this.cache.getEntry(connection.address, credentials.username, callbackHash);\n        let result;\n        const context = {\n            timeoutSeconds: TIMEOUT_S,\n            version: OIDC_VERSION\n        };\n        // Check if there's a token in the cache.\n        if (entry) {\n            // If the cache entry is valid, return the token result.\n            if (entry.isValid() && !reauthenticating) {\n                return entry.tokenResult;\n            }\n            // If the cache entry is not valid, remove it from the cache and first attempt\n            // to use the refresh callback to get a new token. If no refresh callback\n            // exists, then fallback to the request callback.\n            if (refreshCallback) {\n                context.refreshToken = entry.tokenResult.refreshToken;\n                result = await refreshCallback(serverInfo, context);\n            } else {\n                result = await requestCallback(serverInfo, context);\n            }\n        } else {\n            // With no token in the cache we use the request callback.\n            result = await requestCallback(serverInfo, context);\n        }\n        // Validate that the result returned by the callback is acceptable. If it is not\n        // we must clear the token result from the cache.\n        if (isCallbackResultInvalid(result)) {\n            this.cache.deleteEntry(connection.address, credentials.username, callbackHash);\n            throw new error_1.MongoMissingCredentialsError(CALLBACK_RESULT_ERROR);\n        }\n        // Cleanup the cache.\n        this.cache.deleteExpiredEntries();\n        // Put the new entry into the cache.\n        this.cache.addEntry(connection.address, credentials.username || \"\", callbackHash, result, serverInfo);\n        return result;\n    }\n}\nexports.CallbackWorkflow = CallbackWorkflow;\n/**\n * Generate the finishing command document for authentication. Will be a\n * saslStart or saslContinue depending on the presence of a conversation id.\n */ function finishCommandDocument(token, conversationId) {\n    if (conversationId != null && typeof conversationId === \"number\") {\n        return {\n            saslContinue: 1,\n            conversationId: conversationId,\n            payload: new bson_1.Binary(bson_1.BSON.serialize({\n                jwt: token\n            }))\n        };\n    }\n    // saslContinue requires a conversationId in the command to be valid so in this\n    // case the server allows \"step two\" to actually be a saslStart with the token\n    // as the jwt since the use of the cached value has no correlating conversating\n    // on the particular connection.\n    return {\n        saslStart: 1,\n        mechanism: providers_1.AuthMechanism.MONGODB_OIDC,\n        payload: new bson_1.Binary(bson_1.BSON.serialize({\n            jwt: token\n        }))\n    };\n}\n/**\n * Determines if a result returned from a request or refresh callback\n * function is invalid. This means the result is nullish, doesn't contain\n * the accessToken required field, and does not contain extra fields.\n */ function isCallbackResultInvalid(tokenResult) {\n    if (tokenResult == null || typeof tokenResult !== \"object\") return true;\n    if (!(\"accessToken\" in tokenResult)) return true;\n    return !Object.getOwnPropertyNames(tokenResult).every((prop)=>RESULT_PROPERTIES.includes(prop));\n}\n/**\n * Generate the saslStart command document.\n */ function startCommandDocument(credentials) {\n    const payload = {};\n    if (credentials.username) {\n        payload.n = credentials.username;\n    }\n    return {\n        saslStart: 1,\n        autoAuthorize: 1,\n        mechanism: providers_1.AuthMechanism.MONGODB_OIDC,\n        payload: new bson_1.Binary(bson_1.BSON.serialize(payload))\n    };\n} //# sourceMappingURL=callback_workflow.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9jYWxsYmFja193b3JrZmxvdy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxTQUFTQyxtQkFBT0EsQ0FBQyxvREFBTTtBQUM3QixNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxpRUFBZ0I7QUFDeEMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsaUVBQWdCO0FBQ3hDLE1BQU1HLGNBQWNILG1CQUFPQSxDQUFDLDZFQUFjO0FBQzFDLE1BQU1JLHdCQUF3QkosbUJBQU9BLENBQUMsNkdBQXVCO0FBQzdELE1BQU1LLHNCQUFzQkwsbUJBQU9BLENBQUMseUdBQXFCO0FBQ3pELGdEQUFnRCxHQUNoRCxNQUFNTSxlQUFlO0FBQ3JCLHlCQUF5QixHQUN6QixNQUFNQyxZQUFZO0FBQ2xCLGdEQUFnRCxHQUNoRCxNQUFNQyxvQkFBb0I7SUFBQztJQUFlO0lBQW9CO0NBQWU7QUFDN0UsdURBQXVELEdBQ3ZELE1BQU1DLHdCQUF3QjtBQUM5Qjs7O0NBR0MsR0FDRCxNQUFNWDtJQUNGOztLQUVDLEdBQ0RZLGFBQWM7UUFDVixJQUFJLENBQUNDLEtBQUssR0FBRyxJQUFJTixvQkFBb0JPLGVBQWU7UUFDcEQsSUFBSSxDQUFDQyxhQUFhLEdBQUcsSUFBSVQsc0JBQXNCVSxpQkFBaUI7SUFDcEU7SUFDQTs7O0tBR0MsR0FDRCxNQUFNQyxnQkFBZ0JDLFdBQVcsRUFBRTtRQUMvQixNQUFNQyxXQUFXQyxxQkFBcUJGO1FBQ3RDQyxTQUFTRSxFQUFFLEdBQUdILFlBQVlJLE1BQU07UUFDaEMsT0FBTztZQUFFQyx5QkFBeUJKO1FBQVM7SUFDL0M7SUFDQTs7S0FFQyxHQUNELE1BQU1LLFFBQVFDLFVBQVUsRUFBRVAsV0FBVyxFQUFFUSxnQkFBZ0IsRUFBRUMsUUFBUSxF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RTtRQUN0Qm9CLFFBQVEyQixDQUFDLEdBQUcvRCxZQUFZZ0IsUUFBUTtJQUNwQztJQUNBLE9BQU87UUFDSHVDLFdBQVc7UUFDWFMsZUFBZTtRQUNmUixXQUFXckUsWUFBWXNFLGFBQWEsQ0FBQ0MsWUFBWTtRQUNqRHRCLFNBQVMsSUFBSXJELE9BQU9xRSxNQUFNLENBQUNyRSxPQUFPbUQsSUFBSSxDQUFDbUIsU0FBUyxDQUFDakI7SUFDckQ7QUFDSixFQUNBLDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9jYWxsYmFja193b3JrZmxvdy5qcz84MGI2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DYWxsYmFja1dvcmtmbG93ID0gdm9pZCAwO1xuY29uc3QgYnNvbl8xID0gcmVxdWlyZShcImJzb25cIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uLy4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi91dGlsc1wiKTtcbmNvbnN0IHByb3ZpZGVyc18xID0gcmVxdWlyZShcIi4uL3Byb3ZpZGVyc1wiKTtcbmNvbnN0IGNhbGxiYWNrX2xvY2tfY2FjaGVfMSA9IHJlcXVpcmUoXCIuL2NhbGxiYWNrX2xvY2tfY2FjaGVcIik7XG5jb25zdCB0b2tlbl9lbnRyeV9jYWNoZV8xID0gcmVxdWlyZShcIi4vdG9rZW5fZW50cnlfY2FjaGVcIik7XG4vKiogVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBPSURDIGltcGxlbWVudGF0aW9uLiAqL1xuY29uc3QgT0lEQ19WRVJTSU9OID0gMDtcbi8qKiA1IG1pbnV0ZXMgaW4gc2Vjb25kcyAqL1xuY29uc3QgVElNRU9VVF9TID0gMzAwO1xuLyoqIFByb3BlcnRpZXMgYWxsb3dlZCBvbiByZXN1bHRzIG9mIGNhbGxiYWNrcy4gKi9cbmNvbnN0IFJFU1VMVF9QUk9QRVJUSUVTID0gWydhY2Nlc3NUb2tlbicsICdleHBpcmVzSW5TZWNvbmRzJywgJ3JlZnJlc2hUb2tlbiddO1xuLyoqIEVycm9yIG1lc3NhZ2Ugd2hlbiB0aGUgY2FsbGJhY2sgcmVzdWx0IGlzIGludmFsaWQuICovXG5jb25zdCBDQUxMQkFDS19SRVNVTFRfRVJST1IgPSAnVXNlciBwcm92aWRlZCBPSURDIGNhbGxiYWNrcyBtdXN0IHJldHVybiBhIHZhbGlkIG9iamVjdCB3aXRoIGFuIGFjY2Vzc1Rva2VuLic7XG4vKipcbiAqIE9JREMgaW1wbGVtZW50YXRpb24gb2YgYSBjYWxsYmFjayBiYXNlZCB3b3JrZmxvdy5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBDYWxsYmFja1dvcmtmbG93IHtcbiAgICAvKipcbiAgICAgKiBJbnN0YW50aWF0ZSB0aGUgd29ya2Zsb3dcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jYWNoZSA9IG5ldyB0b2tlbl9lbnRyeV9jYWNoZV8xLlRva2VuRW50cnlDYWNoZSgpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrQ2FjaGUgPSBuZXcgY2FsbGJhY2tfbG9ja19jYWNoZV8xLkNhbGxiYWNrTG9ja0NhY2hlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZG9jdW1lbnQgdG8gYWRkIGZvciBzcGVjdWxhdGl2ZSBhdXRoZW50aWNhdGlvbi4gVGhpcyBhbHNvIG5lZWRzXG4gICAgICogdG8gYWRkIGEgZGIgZmllbGQgZnJvbSB0aGUgY3JlZGVudGlhbHMgc291cmNlLlxuICAgICAqL1xuICAgIGFzeW5jIHNwZWN1bGF0aXZlQXV0aChjcmVkZW50aWFscykge1xuICAgICAgICBjb25zdCBkb2N1bWVudCA9IHN0YXJ0Q29tbWFuZERvY3VtZW50KGNyZWRlbnRpYWxzKTtcbiAgICAgICAgZG9jdW1lbnQuZGIgPSBjcmVkZW50aWFscy5zb3VyY2U7XG4gICAgICAgIHJldHVybiB7IHNwZWN1bGF0aXZlQXV0aGVudGljYXRlOiBkb2N1bWVudCB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIHRoZSBPSURDIGNhbGxiYWNrIHdvcmtmbG93LlxuICAgICAqL1xuICAgIGFzeW5jIGV4ZWN1dGUoY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIHJlYXV0aGVudGljYXRpbmcsIHJlc3BvbnNlKSB7XG4gICAgICAgIC8vIEdldCB0aGUgY2FsbGJhY2tzIHdpdGggbG9ja3MgZnJvbSB0aGUgY2FsbGJhY2sgbG9jayBjYWNoZS5cbiAgICAgICAgY29uc3QgeyByZXF1ZXN0Q2FsbGJhY2ssIHJlZnJlc2hDYWxsYmFjaywgY2FsbGJhY2tIYXNoIH0gPSB0aGlzLmNhbGxiYWNrQ2FjaGUuZ2V0RW50cnkoY29ubmVjdGlvbiwgY3JlZGVudGlhbHMpO1xuICAgICAgICAvLyBMb29rIGZvciBhbiBleGlzdGluZyBlbnRyeSBpbiB0aGUgY2FjaGUuXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZS5nZXRFbnRyeShjb25uZWN0aW9uLmFkZHJlc3MsIGNyZWRlbnRpYWxzLnVzZXJuYW1lLCBjYWxsYmFja0hhc2gpO1xuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgIC8vIFJlYXV0aGVudGljYXRpb24gY2Fubm90IHVzZSBhIHRva2VuIGZyb20gdGhlIGNhY2hlIHNpbmNlIHRoZSBzZXJ2ZXIgaGFzXG4gICAgICAgICAgICAvLyBzdGF0ZWQgaXQgaXMgaW52YWxpZCBieSB0aGUgcmVxdWVzdCBmb3IgcmVhdXRoZW50aWNhdGlvbi5cbiAgICAgICAgICAgIGlmIChlbnRyeS5pc1ZhbGlkKCkgJiYgIXJlYXV0aGVudGljYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBQcmVzZW5jZSBvZiBhIHZhbGlkIGNhY2hlIGVudHJ5IG1lYW5zIHdlIGNhbiBza2lwIHRvIHRoZSBmaW5pc2hpbmcgc3RlcC5cbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmZpbmlzaEF1dGhlbnRpY2F0aW9uKGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBlbnRyeS50b2tlblJlc3VsdCwgcmVzcG9uc2U/LnNwZWN1bGF0aXZlQXV0aGVudGljYXRlPy5jb252ZXJzYXRpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBQcmVzZW5jZSBvZiBhbiBleHBpcmVkIGNhY2hlIGVudHJ5IG1lYW5zIHdlIG11c3QgZmV0Y2ggYSBuZXcgb25lIGFuZFxuICAgICAgICAgICAgICAgIC8vIHRoZW4gZXhlY3V0ZSB0aGUgZmluYWwgc3RlcC5cbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblJlc3VsdCA9IGF3YWl0IHRoaXMuZmV0Y2hBY2Nlc3NUb2tlbihjb25uZWN0aW9uLCBjcmVkZW50aWFscywgZW50cnkuc2VydmVySW5mbywgcmVhdXRoZW50aWNhdGluZywgY2FsbGJhY2tIYXNoLCByZXF1ZXN0Q2FsbGJhY2ssIHJlZnJlc2hDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5maW5pc2hBdXRoZW50aWNhdGlvbihjb25uZWN0aW9uLCBjcmVkZW50aWFscywgdG9rZW5SZXN1bHQsIHJlYXV0aGVudGljYXRpbmcgPyB1bmRlZmluZWQgOiByZXNwb25zZT8uc3BlY3VsYXRpdmVBdXRoZW50aWNhdGU/LmNvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSByZWF1dGhlbnRpY2F0aW5nIGFuZCB0aGlzIGVycm9ycyB3aXRoIHJlYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVxdWlyZWQsIHdlIG5lZWQgdG8gZG8gdGhlIGVudGlyZSBwcm9jZXNzIG92ZXIgYWdhaW4gYW5kIGNsZWFyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjYWNoZSBlbnRyeS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYXV0aGVudGljYXRpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb0Vycm9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5jb2RlID09PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuUmVhdXRoZW50aWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlRW50cnkoY29ubmVjdGlvbi5hZGRyZXNzLCBjcmVkZW50aWFscy51c2VybmFtZSwgY2FsbGJhY2tIYXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZShjb25uZWN0aW9uLCBjcmVkZW50aWFscywgcmVhdXRoZW50aWNhdGluZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIGVudHJ5IGluIHRoZSBjYWNoZSByZXF1aXJlcyB1cyB0byBkbyBhbGwgYXV0aGVudGljYXRpb24gc3RlcHNcbiAgICAgICAgICAgIC8vIGZyb20gc3RhcnQgdG8gZmluaXNoLCBpbmNsdWRpbmcgZ2V0dGluZyBhIGZyZXNoIHRva2VuIGZvciB0aGUgY2FjaGUuXG4gICAgICAgICAgICBjb25zdCBzdGFydERvY3VtZW50ID0gYXdhaXQgdGhpcy5zdGFydEF1dGhlbnRpY2F0aW9uKGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCByZWF1dGhlbnRpY2F0aW5nLCByZXNwb25zZSk7XG4gICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JZCA9IHN0YXJ0RG9jdW1lbnQuY29udmVyc2F0aW9uSWQ7XG4gICAgICAgICAgICBjb25zdCBzZXJ2ZXJSZXN1bHQgPSBic29uXzEuQlNPTi5kZXNlcmlhbGl6ZShzdGFydERvY3VtZW50LnBheWxvYWQuYnVmZmVyKTtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuUmVzdWx0ID0gYXdhaXQgdGhpcy5mZXRjaEFjY2Vzc1Rva2VuKGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzLCBzZXJ2ZXJSZXN1bHQsIHJlYXV0aGVudGljYXRpbmcsIGNhbGxiYWNrSGFzaCwgcmVxdWVzdENhbGxiYWNrLCByZWZyZXNoQ2FsbGJhY2spO1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5maW5pc2hBdXRoZW50aWNhdGlvbihjb25uZWN0aW9uLCBjcmVkZW50aWFscywgdG9rZW5SZXN1bHQsIGNvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIGNhbGxiYWNrIGF1dGhlbnRpY2F0aW9uIHByb2Nlc3MuIElmIHRoZXJlIGlzIGEgc3BlY3VsYXRpdmVcbiAgICAgKiBhdXRoZW50aWNhdGlvbiBkb2N1bWVudCBmcm9tIHRoZSBpbml0aWFsIGhhbmRzaGFrZSwgdGhlbiB3ZSB3aWxsIHVzZSB0aGF0XG4gICAgICogdmFsdWUgdG8gZ2V0IHRoZSBpc3N1ZXIsIG90aGVyd2lzZSB3ZSB3aWxsIHNlbmQgdGhlIHNhc2xTdGFydCBjb21tYW5kLlxuICAgICAqL1xuICAgIGFzeW5jIHN0YXJ0QXV0aGVudGljYXRpb24oY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIHJlYXV0aGVudGljYXRpbmcsIHJlc3BvbnNlKSB7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGlmICghcmVhdXRoZW50aWNhdGluZyAmJiByZXNwb25zZT8uc3BlY3VsYXRpdmVBdXRoZW50aWNhdGUpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3BvbnNlLnNwZWN1bGF0aXZlQXV0aGVudGljYXRlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgY29ubmVjdGlvbi5jb21tYW5kKCgwLCB1dGlsc18xLm5zKShjcmVkZW50aWFscy5zb3VyY2UpLCBzdGFydENvbW1hbmREb2N1bWVudChjcmVkZW50aWFscyksIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluaXNoZXMgdGhlIGNhbGxiYWNrIGF1dGhlbnRpY2F0aW9uIHByb2Nlc3MuXG4gICAgICovXG4gICAgYXN5bmMgZmluaXNoQXV0aGVudGljYXRpb24oY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIHRva2VuUmVzdWx0LCBjb252ZXJzYXRpb25JZCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLmNvbW1hbmQoKDAsIHV0aWxzXzEubnMpKGNyZWRlbnRpYWxzLnNvdXJjZSksIGZpbmlzaENvbW1hbmREb2N1bWVudCh0b2tlblJlc3VsdC5hY2Nlc3NUb2tlbiwgY29udmVyc2F0aW9uSWQpLCB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIGFuIGFjY2VzcyB0b2tlbiB1c2luZyBlaXRoZXIgdGhlIHJlcXVlc3Qgb3IgcmVmcmVzaCBjYWxsYmFja3MgYW5kXG4gICAgICogcHV0cyBpdCBpbiB0aGUgY2FjaGUuXG4gICAgICovXG4gICAgYXN5bmMgZmV0Y2hBY2Nlc3NUb2tlbihjb25uZWN0aW9uLCBjcmVkZW50aWFscywgc2VydmVySW5mbywgcmVhdXRoZW50aWNhdGluZywgY2FsbGJhY2tIYXNoLCByZXF1ZXN0Q2FsbGJhY2ssIHJlZnJlc2hDYWxsYmFjaykge1xuICAgICAgICAvLyBHZXQgdGhlIHRva2VuIGZyb20gdGhlIGNhY2hlLlxuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuY2FjaGUuZ2V0RW50cnkoY29ubmVjdGlvbi5hZGRyZXNzLCBjcmVkZW50aWFscy51c2VybmFtZSwgY2FsbGJhY2tIYXNoKTtcbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHsgdGltZW91dFNlY29uZHM6IFRJTUVPVVRfUywgdmVyc2lvbjogT0lEQ19WRVJTSU9OIH07XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSB0b2tlbiBpbiB0aGUgY2FjaGUuXG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGNhY2hlIGVudHJ5IGlzIHZhbGlkLCByZXR1cm4gdGhlIHRva2VuIHJlc3VsdC5cbiAgICAgICAgICAgIGlmIChlbnRyeS5pc1ZhbGlkKCkgJiYgIXJlYXV0aGVudGljYXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnkudG9rZW5SZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgY2FjaGUgZW50cnkgaXMgbm90IHZhbGlkLCByZW1vdmUgaXQgZnJvbSB0aGUgY2FjaGUgYW5kIGZpcnN0IGF0dGVtcHRcbiAgICAgICAgICAgIC8vIHRvIHVzZSB0aGUgcmVmcmVzaCBjYWxsYmFjayB0byBnZXQgYSBuZXcgdG9rZW4uIElmIG5vIHJlZnJlc2ggY2FsbGJhY2tcbiAgICAgICAgICAgIC8vIGV4aXN0cywgdGhlbiBmYWxsYmFjayB0byB0aGUgcmVxdWVzdCBjYWxsYmFjay5cbiAgICAgICAgICAgIGlmIChyZWZyZXNoQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnJlZnJlc2hUb2tlbiA9IGVudHJ5LnRva2VuUmVzdWx0LnJlZnJlc2hUb2tlbjtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCByZWZyZXNoQ2FsbGJhY2soc2VydmVySW5mbywgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCByZXF1ZXN0Q2FsbGJhY2soc2VydmVySW5mbywgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXaXRoIG5vIHRva2VuIGluIHRoZSBjYWNoZSB3ZSB1c2UgdGhlIHJlcXVlc3QgY2FsbGJhY2suXG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCByZXF1ZXN0Q2FsbGJhY2soc2VydmVySW5mbywgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVmFsaWRhdGUgdGhhdCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBpcyBhY2NlcHRhYmxlLiBJZiBpdCBpcyBub3RcbiAgICAgICAgLy8gd2UgbXVzdCBjbGVhciB0aGUgdG9rZW4gcmVzdWx0IGZyb20gdGhlIGNhY2hlLlxuICAgICAgICBpZiAoaXNDYWxsYmFja1Jlc3VsdEludmFsaWQocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5kZWxldGVFbnRyeShjb25uZWN0aW9uLmFkZHJlc3MsIGNyZWRlbnRpYWxzLnVzZXJuYW1lLCBjYWxsYmFja0hhc2gpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcihDQUxMQkFDS19SRVNVTFRfRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFudXAgdGhlIGNhY2hlLlxuICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZUV4cGlyZWRFbnRyaWVzKCk7XG4gICAgICAgIC8vIFB1dCB0aGUgbmV3IGVudHJ5IGludG8gdGhlIGNhY2hlLlxuICAgICAgICB0aGlzLmNhY2hlLmFkZEVudHJ5KGNvbm5lY3Rpb24uYWRkcmVzcywgY3JlZGVudGlhbHMudXNlcm5hbWUgfHwgJycsIGNhbGxiYWNrSGFzaCwgcmVzdWx0LCBzZXJ2ZXJJbmZvKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5leHBvcnRzLkNhbGxiYWNrV29ya2Zsb3cgPSBDYWxsYmFja1dvcmtmbG93O1xuLyoqXG4gKiBHZW5lcmF0ZSB0aGUgZmluaXNoaW5nIGNvbW1hbmQgZG9jdW1lbnQgZm9yIGF1dGhlbnRpY2F0aW9uLiBXaWxsIGJlIGFcbiAqIHNhc2xTdGFydCBvciBzYXNsQ29udGludWUgZGVwZW5kaW5nIG9uIHRoZSBwcmVzZW5jZSBvZiBhIGNvbnZlcnNhdGlvbiBpZC5cbiAqL1xuZnVuY3Rpb24gZmluaXNoQ29tbWFuZERvY3VtZW50KHRva2VuLCBjb252ZXJzYXRpb25JZCkge1xuICAgIGlmIChjb252ZXJzYXRpb25JZCAhPSBudWxsICYmIHR5cGVvZiBjb252ZXJzYXRpb25JZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNhc2xDb250aW51ZTogMSxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgIHBheWxvYWQ6IG5ldyBic29uXzEuQmluYXJ5KGJzb25fMS5CU09OLnNlcmlhbGl6ZSh7IGp3dDogdG9rZW4gfSkpXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIHNhc2xDb250aW51ZSByZXF1aXJlcyBhIGNvbnZlcnNhdGlvbklkIGluIHRoZSBjb21tYW5kIHRvIGJlIHZhbGlkIHNvIGluIHRoaXNcbiAgICAvLyBjYXNlIHRoZSBzZXJ2ZXIgYWxsb3dzIFwic3RlcCB0d29cIiB0byBhY3R1YWxseSBiZSBhIHNhc2xTdGFydCB3aXRoIHRoZSB0b2tlblxuICAgIC8vIGFzIHRoZSBqd3Qgc2luY2UgdGhlIHVzZSBvZiB0aGUgY2FjaGVkIHZhbHVlIGhhcyBubyBjb3JyZWxhdGluZyBjb252ZXJzYXRpbmdcbiAgICAvLyBvbiB0aGUgcGFydGljdWxhciBjb25uZWN0aW9uLlxuICAgIHJldHVybiB7XG4gICAgICAgIHNhc2xTdGFydDogMSxcbiAgICAgICAgbWVjaGFuaXNtOiBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfT0lEQyxcbiAgICAgICAgcGF5bG9hZDogbmV3IGJzb25fMS5CaW5hcnkoYnNvbl8xLkJTT04uc2VyaWFsaXplKHsgand0OiB0b2tlbiB9KSlcbiAgICB9O1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVzdWx0IHJldHVybmVkIGZyb20gYSByZXF1ZXN0IG9yIHJlZnJlc2ggY2FsbGJhY2tcbiAqIGZ1bmN0aW9uIGlzIGludmFsaWQuIFRoaXMgbWVhbnMgdGhlIHJlc3VsdCBpcyBudWxsaXNoLCBkb2Vzbid0IGNvbnRhaW5cbiAqIHRoZSBhY2Nlc3NUb2tlbiByZXF1aXJlZCBmaWVsZCwgYW5kIGRvZXMgbm90IGNvbnRhaW4gZXh0cmEgZmllbGRzLlxuICovXG5mdW5jdGlvbiBpc0NhbGxiYWNrUmVzdWx0SW52YWxpZCh0b2tlblJlc3VsdCkge1xuICAgIGlmICh0b2tlblJlc3VsdCA9PSBudWxsIHx8IHR5cGVvZiB0b2tlblJlc3VsdCAhPT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmICghKCdhY2Nlc3NUb2tlbicgaW4gdG9rZW5SZXN1bHQpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRva2VuUmVzdWx0KS5ldmVyeShwcm9wID0+IFJFU1VMVF9QUk9QRVJUSUVTLmluY2x1ZGVzKHByb3ApKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgdGhlIHNhc2xTdGFydCBjb21tYW5kIGRvY3VtZW50LlxuICovXG5mdW5jdGlvbiBzdGFydENvbW1hbmREb2N1bWVudChjcmVkZW50aWFscykge1xuICAgIGNvbnN0IHBheWxvYWQgPSB7fTtcbiAgICBpZiAoY3JlZGVudGlhbHMudXNlcm5hbWUpIHtcbiAgICAgICAgcGF5bG9hZC5uID0gY3JlZGVudGlhbHMudXNlcm5hbWU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNhc2xTdGFydDogMSxcbiAgICAgICAgYXV0b0F1dGhvcml6ZTogMSxcbiAgICAgICAgbWVjaGFuaXNtOiBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfT0lEQyxcbiAgICAgICAgcGF5bG9hZDogbmV3IGJzb25fMS5CaW5hcnkoYnNvbl8xLkJTT04uc2VyaWFsaXplKHBheWxvYWQpKVxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxsYmFja193b3JrZmxvdy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDYWxsYmFja1dvcmtmbG93IiwiYnNvbl8xIiwicmVxdWlyZSIsImVycm9yXzEiLCJ1dGlsc18xIiwicHJvdmlkZXJzXzEiLCJjYWxsYmFja19sb2NrX2NhY2hlXzEiLCJ0b2tlbl9lbnRyeV9jYWNoZV8xIiwiT0lEQ19WRVJTSU9OIiwiVElNRU9VVF9TIiwiUkVTVUxUX1BST1BFUlRJRVMiLCJDQUxMQkFDS19SRVNVTFRfRVJST1IiLCJjb25zdHJ1Y3RvciIsImNhY2hlIiwiVG9rZW5FbnRyeUNhY2hlIiwiY2FsbGJhY2tDYWNoZSIsIkNhbGxiYWNrTG9ja0NhY2hlIiwic3BlY3VsYXRpdmVBdXRoIiwiY3JlZGVudGlhbHMiLCJkb2N1bWVudCIsInN0YXJ0Q29tbWFuZERvY3VtZW50IiwiZGIiLCJzb3VyY2UiLCJzcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZSIsImV4ZWN1dGUiLCJjb25uZWN0aW9uIiwicmVhdXRoZW50aWNhdGluZyIsInJlc3BvbnNlIiwicmVxdWVzdENhbGxiYWNrIiwicmVmcmVzaENhbGxiYWNrIiwiY2FsbGJhY2tIYXNoIiwiZ2V0RW50cnkiLCJlbnRyeSIsImFkZHJlc3MiLCJ1c2VybmFtZSIsInJlc3VsdCIsImlzVmFsaWQiLCJmaW5pc2hBdXRoZW50aWNhdGlvbiIsInRva2VuUmVzdWx0IiwiY29udmVyc2F0aW9uSWQiLCJmZXRjaEFjY2Vzc1Rva2VuIiwic2VydmVySW5mbyIsInVuZGVmaW5lZCIsImVycm9yIiwiTW9uZ29FcnJvciIsImNvZGUiLCJNT05HT0RCX0VSUk9SX0NPREVTIiwiUmVhdXRoZW50aWNhdGUiLCJkZWxldGVFbnRyeSIsInN0YXJ0RG9jdW1lbnQiLCJzdGFydEF1dGhlbnRpY2F0aW9uIiwic2VydmVyUmVzdWx0IiwiQlNPTiIsImRlc2VyaWFsaXplIiwicGF5bG9hZCIsImJ1ZmZlciIsImNvbW1hbmQiLCJucyIsImZpbmlzaENvbW1hbmREb2N1bWVudCIsImFjY2Vzc1Rva2VuIiwiY29udGV4dCIsInRpbWVvdXRTZWNvbmRzIiwidmVyc2lvbiIsInJlZnJlc2hUb2tlbiIsImlzQ2FsbGJhY2tSZXN1bHRJbnZhbGlkIiwiTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvciIsImRlbGV0ZUV4cGlyZWRFbnRyaWVzIiwiYWRkRW50cnkiLCJ0b2tlbiIsInNhc2xDb250aW51ZSIsIkJpbmFyeSIsInNlcmlhbGl6ZSIsImp3dCIsInNhc2xTdGFydCIsIm1lY2hhbmlzbSIsIkF1dGhNZWNoYW5pc20iLCJNT05HT0RCX09JREMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZXZlcnkiLCJwcm9wIiwiaW5jbHVkZXMiLCJuIiwiYXV0b0F1dGhvcml6ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/callback_workflow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.commandDocument = exports.ServiceWorkflow = void 0;\nconst bson_1 = __webpack_require__(/*! bson */ \"(ssr)/./node_modules/bson/lib/bson.cjs\");\nconst utils_1 = __webpack_require__(/*! ../../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst providers_1 = __webpack_require__(/*! ../providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\n/**\n * Common behaviour for OIDC device workflows.\n * @internal\n */ class ServiceWorkflow {\n    /**\n     * Execute the workflow. Looks for AWS_WEB_IDENTITY_TOKEN_FILE in the environment\n     * and then attempts to read the token from that path.\n     */ async execute(connection, credentials) {\n        const token = await this.getToken(credentials);\n        const command = commandDocument(token);\n        return connection.command((0, utils_1.ns)(credentials.source), command, undefined);\n    }\n    /**\n     * Get the document to add for speculative authentication.\n     */ async speculativeAuth(credentials) {\n        const token = await this.getToken(credentials);\n        const document = commandDocument(token);\n        document.db = credentials.source;\n        return {\n            speculativeAuthenticate: document\n        };\n    }\n}\nexports.ServiceWorkflow = ServiceWorkflow;\n/**\n * Create the saslStart command document.\n */ function commandDocument(token) {\n    return {\n        saslStart: 1,\n        mechanism: providers_1.AuthMechanism.MONGODB_OIDC,\n        payload: bson_1.BSON.serialize({\n            jwt: token\n        })\n    };\n}\nexports.commandDocument = commandDocument; //# sourceMappingURL=service_workflow.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy9zZXJ2aWNlX3dvcmtmbG93LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx1QkFBdUIsR0FBR0EsdUJBQXVCLEdBQUcsS0FBSztBQUN6RCxNQUFNSSxTQUFTQyxtQkFBT0EsQ0FBQyxvREFBTTtBQUM3QixNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxpRUFBZ0I7QUFDeEMsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsNkVBQWM7QUFDMUM7OztDQUdDLEdBQ0QsTUFBTUY7SUFDRjs7O0tBR0MsR0FDRCxNQUFNSyxRQUFRQyxVQUFVLEVBQUVDLFdBQVcsRUFBRTtRQUNuQyxNQUFNQyxRQUFRLE1BQU0sSUFBSSxDQUFDQyxRQUFRLENBQUNGO1FBQ2xDLE1BQU1HLFVBQVVYLGdCQUFnQlM7UUFDaEMsT0FBT0YsV0FBV0ksT0FBTyxDQUFDLENBQUMsR0FBR1AsUUFBUVEsRUFBRSxFQUFFSixZQUFZSyxNQUFNLEdBQUdGLFNBQVNHO0lBQzVFO0lBQ0E7O0tBRUMsR0FDRCxNQUFNQyxnQkFBZ0JQLFdBQVcsRUFBRTtRQUMvQixNQUFNQyxRQUFRLE1BQU0sSUFBSSxDQUFDQyxRQUFRLENBQUNGO1FBQ2xDLE1BQU1RLFdBQVdoQixnQkFBZ0JTO1FBQ2pDTyxTQUFTQyxFQUFFLEdBQUdULFlBQVlLLE1BQU07UUFDaEMsT0FBTztZQUFFSyx5QkFBeUJGO1FBQVM7SUFDL0M7QUFDSjtBQUNBbEIsdUJBQXVCLEdBQUdHO0FBQzFCOztDQUVDLEdBQ0QsU0FBU0QsZ0JBQWdCUyxLQUFLO0lBQzFCLE9BQU87UUFDSFUsV0FBVztRQUNYQyxXQUFXZixZQUFZZ0IsYUFBYSxDQUFDQyxZQUFZO1FBQ2pEQyxTQUFTckIsT0FBT3NCLElBQUksQ0FBQ0MsU0FBUyxDQUFDO1lBQUVDLEtBQUtqQjtRQUFNO0lBQ2hEO0FBQ0o7QUFDQVgsdUJBQXVCLEdBQUdFLGlCQUMxQiw0Q0FBNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvYXV0aC9tb25nb2RiX29pZGMvc2VydmljZV93b3JrZmxvdy5qcz9mNDAwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jb21tYW5kRG9jdW1lbnQgPSBleHBvcnRzLlNlcnZpY2VXb3JrZmxvdyA9IHZvaWQgMDtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCJic29uXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi91dGlsc1wiKTtcbmNvbnN0IHByb3ZpZGVyc18xID0gcmVxdWlyZShcIi4uL3Byb3ZpZGVyc1wiKTtcbi8qKlxuICogQ29tbW9uIGJlaGF2aW91ciBmb3IgT0lEQyBkZXZpY2Ugd29ya2Zsb3dzLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFNlcnZpY2VXb3JrZmxvdyB7XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSB0aGUgd29ya2Zsb3cuIExvb2tzIGZvciBBV1NfV0VCX0lERU5USVRZX1RPS0VOX0ZJTEUgaW4gdGhlIGVudmlyb25tZW50XG4gICAgICogYW5kIHRoZW4gYXR0ZW1wdHMgdG8gcmVhZCB0aGUgdG9rZW4gZnJvbSB0aGF0IHBhdGguXG4gICAgICovXG4gICAgYXN5bmMgZXhlY3V0ZShjb25uZWN0aW9uLCBjcmVkZW50aWFscykge1xuICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuZ2V0VG9rZW4oY3JlZGVudGlhbHMpO1xuICAgICAgICBjb25zdCBjb21tYW5kID0gY29tbWFuZERvY3VtZW50KHRva2VuKTtcbiAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoY3JlZGVudGlhbHMuc291cmNlKSwgY29tbWFuZCwgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkb2N1bWVudCB0byBhZGQgZm9yIHNwZWN1bGF0aXZlIGF1dGhlbnRpY2F0aW9uLlxuICAgICAqL1xuICAgIGFzeW5jIHNwZWN1bGF0aXZlQXV0aChjcmVkZW50aWFscykge1xuICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuZ2V0VG9rZW4oY3JlZGVudGlhbHMpO1xuICAgICAgICBjb25zdCBkb2N1bWVudCA9IGNvbW1hbmREb2N1bWVudCh0b2tlbik7XG4gICAgICAgIGRvY3VtZW50LmRiID0gY3JlZGVudGlhbHMuc291cmNlO1xuICAgICAgICByZXR1cm4geyBzcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZTogZG9jdW1lbnQgfTtcbiAgICB9XG59XG5leHBvcnRzLlNlcnZpY2VXb3JrZmxvdyA9IFNlcnZpY2VXb3JrZmxvdztcbi8qKlxuICogQ3JlYXRlIHRoZSBzYXNsU3RhcnQgY29tbWFuZCBkb2N1bWVudC5cbiAqL1xuZnVuY3Rpb24gY29tbWFuZERvY3VtZW50KHRva2VuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2FzbFN0YXJ0OiAxLFxuICAgICAgICBtZWNoYW5pc206IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9PSURDLFxuICAgICAgICBwYXlsb2FkOiBic29uXzEuQlNPTi5zZXJpYWxpemUoeyBqd3Q6IHRva2VuIH0pXG4gICAgfTtcbn1cbmV4cG9ydHMuY29tbWFuZERvY3VtZW50ID0gY29tbWFuZERvY3VtZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VydmljZV93b3JrZmxvdy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJjb21tYW5kRG9jdW1lbnQiLCJTZXJ2aWNlV29ya2Zsb3ciLCJic29uXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsInByb3ZpZGVyc18xIiwiZXhlY3V0ZSIsImNvbm5lY3Rpb24iLCJjcmVkZW50aWFscyIsInRva2VuIiwiZ2V0VG9rZW4iLCJjb21tYW5kIiwibnMiLCJzb3VyY2UiLCJ1bmRlZmluZWQiLCJzcGVjdWxhdGl2ZUF1dGgiLCJkb2N1bWVudCIsImRiIiwic3BlY3VsYXRpdmVBdXRoZW50aWNhdGUiLCJzYXNsU3RhcnQiLCJtZWNoYW5pc20iLCJBdXRoTWVjaGFuaXNtIiwiTU9OR09EQl9PSURDIiwicGF5bG9hZCIsIkJTT04iLCJzZXJpYWxpemUiLCJqd3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/service_workflow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/token_entry_cache.js":
/*!******************************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/token_entry_cache.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TokenEntryCache = exports.TokenEntry = void 0;\nconst cache_1 = __webpack_require__(/*! ./cache */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/cache.js\");\n/* Default expiration is now for when no expiration provided */ const DEFAULT_EXPIRATION_SECS = 0;\n/** @internal */ class TokenEntry extends cache_1.ExpiringCacheEntry {\n    /**\n     * Instantiate the entry.\n     */ constructor(tokenResult, serverInfo, expiration){\n        super(expiration);\n        this.tokenResult = tokenResult;\n        this.serverInfo = serverInfo;\n    }\n}\nexports.TokenEntry = TokenEntry;\n/**\n * Cache of OIDC token entries.\n * @internal\n */ class TokenEntryCache extends cache_1.Cache {\n    /**\n     * Set an entry in the token cache.\n     */ addEntry(address, username, callbackHash, tokenResult, serverInfo) {\n        const entry = new TokenEntry(tokenResult, serverInfo, tokenResult.expiresInSeconds ?? DEFAULT_EXPIRATION_SECS);\n        this.entries.set(this.cacheKey(address, username, callbackHash), entry);\n        return entry;\n    }\n    /**\n     * Delete an entry from the cache.\n     */ deleteEntry(address, username, callbackHash) {\n        this.entries.delete(this.cacheKey(address, username, callbackHash));\n    }\n    /**\n     * Get an entry from the cache.\n     */ getEntry(address, username, callbackHash) {\n        return this.entries.get(this.cacheKey(address, username, callbackHash));\n    }\n    /**\n     * Delete all expired entries from the cache.\n     */ deleteExpiredEntries() {\n        for (const [key, entry] of this.entries){\n            if (!entry.isValid()) {\n                this.entries.delete(key);\n            }\n        }\n    }\n    /**\n     * Create a cache key from the address and username.\n     */ cacheKey(address, username, callbackHash) {\n        return this.hashedCacheKey(address, username, callbackHash);\n    }\n}\nexports.TokenEntryCache = TokenEntryCache; //# sourceMappingURL=token_entry_cache.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy90b2tlbl9lbnRyeV9jYWNoZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsdUJBQXVCLEdBQUdBLGtCQUFrQixHQUFHLEtBQUs7QUFDcEQsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsaUZBQVM7QUFDakMsNkRBQTZELEdBQzdELE1BQU1DLDBCQUEwQjtBQUNoQyxjQUFjLEdBQ2QsTUFBTUgsbUJBQW1CQyxRQUFRRyxrQkFBa0I7SUFDL0M7O0tBRUMsR0FDREMsWUFBWUMsV0FBVyxFQUFFQyxVQUFVLEVBQUVDLFVBQVUsQ0FBRTtRQUM3QyxLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDRixXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsVUFBVSxHQUFHQTtJQUN0QjtBQUNKO0FBQ0FWLGtCQUFrQixHQUFHRztBQUNyQjs7O0NBR0MsR0FDRCxNQUFNRCx3QkFBd0JFLFFBQVFRLEtBQUs7SUFDdkM7O0tBRUMsR0FDREMsU0FBU0MsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLFlBQVksRUFBRVAsV0FBVyxFQUFFQyxVQUFVLEVBQUU7UUFDL0QsTUFBTU8sUUFBUSxJQUFJZCxXQUFXTSxhQUFhQyxZQUFZRCxZQUFZUyxnQkFBZ0IsSUFBSVo7UUFDdEYsSUFBSSxDQUFDYSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxJQUFJLENBQUNDLFFBQVEsQ0FBQ1AsU0FBU0MsVUFBVUMsZUFBZUM7UUFDakUsT0FBT0E7SUFDWDtJQUNBOztLQUVDLEdBQ0RLLFlBQVlSLE9BQU8sRUFBRUMsUUFBUSxFQUFFQyxZQUFZLEVBQUU7UUFDekMsSUFBSSxDQUFDRyxPQUFPLENBQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUNGLFFBQVEsQ0FBQ1AsU0FBU0MsVUFBVUM7SUFDekQ7SUFDQTs7S0FFQyxHQUNEUSxTQUFTVixPQUFPLEVBQUVDLFFBQVEsRUFBRUMsWUFBWSxFQUFFO1FBQ3RDLE9BQU8sSUFBSSxDQUFDRyxPQUFPLENBQUNNLEdBQUcsQ0FBQyxJQUFJLENBQUNKLFFBQVEsQ0FBQ1AsU0FBU0MsVUFBVUM7SUFDN0Q7SUFDQTs7S0FFQyxHQUNEVSx1QkFBdUI7UUFDbkIsS0FBSyxNQUFNLENBQUNDLEtBQUtWLE1BQU0sSUFBSSxJQUFJLENBQUNFLE9BQU8sQ0FBRTtZQUNyQyxJQUFJLENBQUNGLE1BQU1XLE9BQU8sSUFBSTtnQkFDbEIsSUFBSSxDQUFDVCxPQUFPLENBQUNJLE1BQU0sQ0FBQ0k7WUFDeEI7UUFDSjtJQUNKO0lBQ0E7O0tBRUMsR0FDRE4sU0FBU1AsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLFlBQVksRUFBRTtRQUN0QyxPQUFPLElBQUksQ0FBQ2EsY0FBYyxDQUFDZixTQUFTQyxVQUFVQztJQUNsRDtBQUNKO0FBQ0FoQix1QkFBdUIsR0FBR0UsaUJBQzFCLDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL21vbmdvZGJfb2lkYy90b2tlbl9lbnRyeV9jYWNoZS5qcz8wMWQ5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Ub2tlbkVudHJ5Q2FjaGUgPSBleHBvcnRzLlRva2VuRW50cnkgPSB2b2lkIDA7XG5jb25zdCBjYWNoZV8xID0gcmVxdWlyZShcIi4vY2FjaGVcIik7XG4vKiBEZWZhdWx0IGV4cGlyYXRpb24gaXMgbm93IGZvciB3aGVuIG5vIGV4cGlyYXRpb24gcHJvdmlkZWQgKi9cbmNvbnN0IERFRkFVTFRfRVhQSVJBVElPTl9TRUNTID0gMDtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFRva2VuRW50cnkgZXh0ZW5kcyBjYWNoZV8xLkV4cGlyaW5nQ2FjaGVFbnRyeSB7XG4gICAgLyoqXG4gICAgICogSW5zdGFudGlhdGUgdGhlIGVudHJ5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRva2VuUmVzdWx0LCBzZXJ2ZXJJbmZvLCBleHBpcmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGV4cGlyYXRpb24pO1xuICAgICAgICB0aGlzLnRva2VuUmVzdWx0ID0gdG9rZW5SZXN1bHQ7XG4gICAgICAgIHRoaXMuc2VydmVySW5mbyA9IHNlcnZlckluZm87XG4gICAgfVxufVxuZXhwb3J0cy5Ub2tlbkVudHJ5ID0gVG9rZW5FbnRyeTtcbi8qKlxuICogQ2FjaGUgb2YgT0lEQyB0b2tlbiBlbnRyaWVzLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFRva2VuRW50cnlDYWNoZSBleHRlbmRzIGNhY2hlXzEuQ2FjaGUge1xuICAgIC8qKlxuICAgICAqIFNldCBhbiBlbnRyeSBpbiB0aGUgdG9rZW4gY2FjaGUuXG4gICAgICovXG4gICAgYWRkRW50cnkoYWRkcmVzcywgdXNlcm5hbWUsIGNhbGxiYWNrSGFzaCwgdG9rZW5SZXN1bHQsIHNlcnZlckluZm8pIHtcbiAgICAgICAgY29uc3QgZW50cnkgPSBuZXcgVG9rZW5FbnRyeSh0b2tlblJlc3VsdCwgc2VydmVySW5mbywgdG9rZW5SZXN1bHQuZXhwaXJlc0luU2Vjb25kcyA/PyBERUZBVUxUX0VYUElSQVRJT05fU0VDUyk7XG4gICAgICAgIHRoaXMuZW50cmllcy5zZXQodGhpcy5jYWNoZUtleShhZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoKSwgZW50cnkpO1xuICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhbiBlbnRyeSBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKi9cbiAgICBkZWxldGVFbnRyeShhZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoKSB7XG4gICAgICAgIHRoaXMuZW50cmllcy5kZWxldGUodGhpcy5jYWNoZUtleShhZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbiBlbnRyeSBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKi9cbiAgICBnZXRFbnRyeShhZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudHJpZXMuZ2V0KHRoaXMuY2FjaGVLZXkoYWRkcmVzcywgdXNlcm5hbWUsIGNhbGxiYWNrSGFzaCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYWxsIGV4cGlyZWQgZW50cmllcyBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKi9cbiAgICBkZWxldGVFeHBpcmVkRW50cmllcygpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgdGhpcy5lbnRyaWVzKSB7XG4gICAgICAgICAgICBpZiAoIWVudHJ5LmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW50cmllcy5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjYWNoZSBrZXkgZnJvbSB0aGUgYWRkcmVzcyBhbmQgdXNlcm5hbWUuXG4gICAgICovXG4gICAgY2FjaGVLZXkoYWRkcmVzcywgdXNlcm5hbWUsIGNhbGxiYWNrSGFzaCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNoZWRDYWNoZUtleShhZGRyZXNzLCB1c2VybmFtZSwgY2FsbGJhY2tIYXNoKTtcbiAgICB9XG59XG5leHBvcnRzLlRva2VuRW50cnlDYWNoZSA9IFRva2VuRW50cnlDYWNoZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRva2VuX2VudHJ5X2NhY2hlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlRva2VuRW50cnlDYWNoZSIsIlRva2VuRW50cnkiLCJjYWNoZV8xIiwicmVxdWlyZSIsIkRFRkFVTFRfRVhQSVJBVElPTl9TRUNTIiwiRXhwaXJpbmdDYWNoZUVudHJ5IiwiY29uc3RydWN0b3IiLCJ0b2tlblJlc3VsdCIsInNlcnZlckluZm8iLCJleHBpcmF0aW9uIiwiQ2FjaGUiLCJhZGRFbnRyeSIsImFkZHJlc3MiLCJ1c2VybmFtZSIsImNhbGxiYWNrSGFzaCIsImVudHJ5IiwiZXhwaXJlc0luU2Vjb25kcyIsImVudHJpZXMiLCJzZXQiLCJjYWNoZUtleSIsImRlbGV0ZUVudHJ5IiwiZGVsZXRlIiwiZ2V0RW50cnkiLCJnZXQiLCJkZWxldGVFeHBpcmVkRW50cmllcyIsImtleSIsImlzVmFsaWQiLCJoYXNoZWRDYWNoZUtleSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc/token_entry_cache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/plain.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/plain.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Plain = void 0;\nconst bson_1 = __webpack_require__(/*! ../../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nclass Plain extends auth_provider_1.AuthProvider {\n    async auth(authContext) {\n        const { connection, credentials } = authContext;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        const { username, password } = credentials;\n        const payload = new bson_1.Binary(Buffer.from(`\\x00${username}\\x00${password}`));\n        const command = {\n            saslStart: 1,\n            mechanism: \"PLAIN\",\n            payload: payload,\n            autoAuthorize: 1\n        };\n        await connection.command((0, utils_1.ns)(\"$external.$cmd\"), command, undefined);\n    }\n}\nexports.Plain = Plain; //# sourceMappingURL=plain.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3BsYWluLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxhQUFhLEdBQUcsS0FBSztBQUNyQixNQUFNRyxTQUFTQyxtQkFBT0EsQ0FBQyw0REFBWTtBQUNuQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyxNQUFNRyxrQkFBa0JILG1CQUFPQSxDQUFDLG9GQUFpQjtBQUNqRCxNQUFNRixjQUFjSyxnQkFBZ0JDLFlBQVk7SUFDNUMsTUFBTUMsS0FBS0MsV0FBVyxFQUFFO1FBQ3BCLE1BQU0sRUFBRUMsVUFBVSxFQUFFQyxXQUFXLEVBQUUsR0FBR0Y7UUFDcEMsSUFBSSxDQUFDRSxhQUFhO1lBQ2QsTUFBTSxJQUFJUCxRQUFRUSw0QkFBNEIsQ0FBQztRQUNuRDtRQUNBLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUUsR0FBR0g7UUFDL0IsTUFBTUksVUFBVSxJQUFJYixPQUFPYyxNQUFNLENBQUNDLE9BQU9DLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRUwsU0FBUyxJQUFJLEVBQUVDLFNBQVMsQ0FBQztRQUM5RSxNQUFNSyxVQUFVO1lBQ1pDLFdBQVc7WUFDWEMsV0FBVztZQUNYTixTQUFTQTtZQUNUTyxlQUFlO1FBQ25CO1FBQ0EsTUFBTVosV0FBV1MsT0FBTyxDQUFDLENBQUMsR0FBR2QsUUFBUWtCLEVBQUUsRUFBRSxtQkFBbUJKLFNBQVNLO0lBQ3pFO0FBQ0o7QUFDQXpCLGFBQWEsR0FBR0UsT0FDaEIsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvcGxhaW4uanM/MDA2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUGxhaW4gPSB2b2lkIDA7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzXCIpO1xuY29uc3QgYXV0aF9wcm92aWRlcl8xID0gcmVxdWlyZShcIi4vYXV0aF9wcm92aWRlclwiKTtcbmNsYXNzIFBsYWluIGV4dGVuZHMgYXV0aF9wcm92aWRlcl8xLkF1dGhQcm92aWRlciB7XG4gICAgYXN5bmMgYXV0aChhdXRoQ29udGV4dCkge1xuICAgICAgICBjb25zdCB7IGNvbm5lY3Rpb24sIGNyZWRlbnRpYWxzIH0gPSBhdXRoQ29udGV4dDtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcignQXV0aENvbnRleHQgbXVzdCBwcm92aWRlIGNyZWRlbnRpYWxzLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSBjcmVkZW50aWFscztcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IG5ldyBic29uXzEuQmluYXJ5KEJ1ZmZlci5mcm9tKGBcXHgwMCR7dXNlcm5hbWV9XFx4MDAke3Bhc3N3b3JkfWApKTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHtcbiAgICAgICAgICAgIHNhc2xTdGFydDogMSxcbiAgICAgICAgICAgIG1lY2hhbmlzbTogJ1BMQUlOJyxcbiAgICAgICAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICAgICAgICBhdXRvQXV0aG9yaXplOiAxXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJyRleHRlcm5hbC4kY21kJyksIGNvbW1hbmQsIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuZXhwb3J0cy5QbGFpbiA9IFBsYWluO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGxhaW4uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUGxhaW4iLCJic29uXzEiLCJyZXF1aXJlIiwiZXJyb3JfMSIsInV0aWxzXzEiLCJhdXRoX3Byb3ZpZGVyXzEiLCJBdXRoUHJvdmlkZXIiLCJhdXRoIiwiYXV0aENvbnRleHQiLCJjb25uZWN0aW9uIiwiY3JlZGVudGlhbHMiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInBheWxvYWQiLCJCaW5hcnkiLCJCdWZmZXIiLCJmcm9tIiwiY29tbWFuZCIsInNhc2xTdGFydCIsIm1lY2hhbmlzbSIsImF1dG9BdXRob3JpemUiLCJucyIsInVuZGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/plain.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js":
/*!*********************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/providers.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AUTH_MECHS_AUTH_SRC_EXTERNAL = exports.AuthMechanism = void 0;\n/** @public */ exports.AuthMechanism = Object.freeze({\n    MONGODB_AWS: \"MONGODB-AWS\",\n    MONGODB_CR: \"MONGODB-CR\",\n    MONGODB_DEFAULT: \"DEFAULT\",\n    MONGODB_GSSAPI: \"GSSAPI\",\n    MONGODB_PLAIN: \"PLAIN\",\n    MONGODB_SCRAM_SHA1: \"SCRAM-SHA-1\",\n    MONGODB_SCRAM_SHA256: \"SCRAM-SHA-256\",\n    MONGODB_X509: \"MONGODB-X509\",\n    /** @experimental */ MONGODB_OIDC: \"MONGODB-OIDC\"\n});\n/** @internal */ exports.AUTH_MECHS_AUTH_SRC_EXTERNAL = new Set([\n    exports.AuthMechanism.MONGODB_GSSAPI,\n    exports.AuthMechanism.MONGODB_AWS,\n    exports.AuthMechanism.MONGODB_OIDC,\n    exports.AuthMechanism.MONGODB_X509\n]); //# sourceMappingURL=providers.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3Byb3ZpZGVycy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0NBQW9DLEdBQUdBLHFCQUFxQixHQUFHLEtBQUs7QUFDcEUsWUFBWSxHQUNaQSxxQkFBcUIsR0FBR0YsT0FBT00sTUFBTSxDQUFDO0lBQ2xDQyxhQUFhO0lBQ2JDLFlBQVk7SUFDWkMsaUJBQWlCO0lBQ2pCQyxnQkFBZ0I7SUFDaEJDLGVBQWU7SUFDZkMsb0JBQW9CO0lBQ3BCQyxzQkFBc0I7SUFDdEJDLGNBQWM7SUFDZCxrQkFBa0IsR0FDbEJDLGNBQWM7QUFDbEI7QUFDQSxjQUFjLEdBQ2RiLG9DQUFvQyxHQUFHLElBQUljLElBQUk7SUFDM0NkLFFBQVFHLGFBQWEsQ0FBQ0ssY0FBYztJQUNwQ1IsUUFBUUcsYUFBYSxDQUFDRSxXQUFXO0lBQ2pDTCxRQUFRRyxhQUFhLENBQUNVLFlBQVk7SUFDbENiLFFBQVFHLGFBQWEsQ0FBQ1MsWUFBWTtDQUNyQyxHQUNELHFDQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3Byb3ZpZGVycy5qcz83ZTNhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BVVRIX01FQ0hTX0FVVEhfU1JDX0VYVEVSTkFMID0gZXhwb3J0cy5BdXRoTWVjaGFuaXNtID0gdm9pZCAwO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuQXV0aE1lY2hhbmlzbSA9IE9iamVjdC5mcmVlemUoe1xuICAgIE1PTkdPREJfQVdTOiAnTU9OR09EQi1BV1MnLFxuICAgIE1PTkdPREJfQ1I6ICdNT05HT0RCLUNSJyxcbiAgICBNT05HT0RCX0RFRkFVTFQ6ICdERUZBVUxUJyxcbiAgICBNT05HT0RCX0dTU0FQSTogJ0dTU0FQSScsXG4gICAgTU9OR09EQl9QTEFJTjogJ1BMQUlOJyxcbiAgICBNT05HT0RCX1NDUkFNX1NIQTE6ICdTQ1JBTS1TSEEtMScsXG4gICAgTU9OR09EQl9TQ1JBTV9TSEEyNTY6ICdTQ1JBTS1TSEEtMjU2JyxcbiAgICBNT05HT0RCX1g1MDk6ICdNT05HT0RCLVg1MDknLFxuICAgIC8qKiBAZXhwZXJpbWVudGFsICovXG4gICAgTU9OR09EQl9PSURDOiAnTU9OR09EQi1PSURDJ1xufSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkFVVEhfTUVDSFNfQVVUSF9TUkNfRVhURVJOQUwgPSBuZXcgU2V0KFtcbiAgICBleHBvcnRzLkF1dGhNZWNoYW5pc20uTU9OR09EQl9HU1NBUEksXG4gICAgZXhwb3J0cy5BdXRoTWVjaGFuaXNtLk1PTkdPREJfQVdTLFxuICAgIGV4cG9ydHMuQXV0aE1lY2hhbmlzbS5NT05HT0RCX09JREMsXG4gICAgZXhwb3J0cy5BdXRoTWVjaGFuaXNtLk1PTkdPREJfWDUwOVxuXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlcnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQVVUSF9NRUNIU19BVVRIX1NSQ19FWFRFUk5BTCIsIkF1dGhNZWNoYW5pc20iLCJmcmVlemUiLCJNT05HT0RCX0FXUyIsIk1PTkdPREJfQ1IiLCJNT05HT0RCX0RFRkFVTFQiLCJNT05HT0RCX0dTU0FQSSIsIk1PTkdPREJfUExBSU4iLCJNT05HT0RCX1NDUkFNX1NIQTEiLCJNT05HT0RCX1NDUkFNX1NIQTI1NiIsIk1PTkdPREJfWDUwOSIsIk1PTkdPREJfT0lEQyIsIlNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/scram.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/scram.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ScramSHA256 = exports.ScramSHA1 = void 0;\nconst saslprep_1 = __webpack_require__(/*! @mongodb-js/saslprep */ \"(ssr)/./node_modules/@mongodb-js/saslprep/dist/node.js\");\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst bson_1 = __webpack_require__(/*! ../../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nconst providers_1 = __webpack_require__(/*! ./providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nclass ScramSHA extends auth_provider_1.AuthProvider {\n    constructor(cryptoMethod){\n        super();\n        this.cryptoMethod = cryptoMethod || \"sha1\";\n    }\n    async prepare(handshakeDoc, authContext) {\n        const cryptoMethod = this.cryptoMethod;\n        const credentials = authContext.credentials;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        const nonce = await (0, utils_1.randomBytes)(24);\n        // store the nonce for later use\n        authContext.nonce = nonce;\n        const request = {\n            ...handshakeDoc,\n            speculativeAuthenticate: {\n                ...makeFirstMessage(cryptoMethod, credentials, nonce),\n                db: credentials.source\n            }\n        };\n        return request;\n    }\n    async auth(authContext) {\n        const { reauthenticating, response } = authContext;\n        if (response?.speculativeAuthenticate && !reauthenticating) {\n            return continueScramConversation(this.cryptoMethod, response.speculativeAuthenticate, authContext);\n        }\n        return executeScram(this.cryptoMethod, authContext);\n    }\n}\nfunction cleanUsername(username) {\n    return username.replace(\"=\", \"=3D\").replace(\",\", \"=2C\");\n}\nfunction clientFirstMessageBare(username, nonce) {\n    // NOTE: This is done b/c Javascript uses UTF-16, but the server is hashing in UTF-8.\n    // Since the username is not sasl-prep-d, we need to do this here.\n    return Buffer.concat([\n        Buffer.from(\"n=\", \"utf8\"),\n        Buffer.from(username, \"utf8\"),\n        Buffer.from(\",r=\", \"utf8\"),\n        Buffer.from(nonce.toString(\"base64\"), \"utf8\")\n    ]);\n}\nfunction makeFirstMessage(cryptoMethod, credentials, nonce) {\n    const username = cleanUsername(credentials.username);\n    const mechanism = cryptoMethod === \"sha1\" ? providers_1.AuthMechanism.MONGODB_SCRAM_SHA1 : providers_1.AuthMechanism.MONGODB_SCRAM_SHA256;\n    // NOTE: This is done b/c Javascript uses UTF-16, but the server is hashing in UTF-8.\n    // Since the username is not sasl-prep-d, we need to do this here.\n    return {\n        saslStart: 1,\n        mechanism,\n        payload: new bson_1.Binary(Buffer.concat([\n            Buffer.from(\"n,,\", \"utf8\"),\n            clientFirstMessageBare(username, nonce)\n        ])),\n        autoAuthorize: 1,\n        options: {\n            skipEmptyExchange: true\n        }\n    };\n}\nasync function executeScram(cryptoMethod, authContext) {\n    const { connection, credentials } = authContext;\n    if (!credentials) {\n        throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n    }\n    if (!authContext.nonce) {\n        throw new error_1.MongoInvalidArgumentError(\"AuthContext must contain a valid nonce property\");\n    }\n    const nonce = authContext.nonce;\n    const db = credentials.source;\n    const saslStartCmd = makeFirstMessage(cryptoMethod, credentials, nonce);\n    const response = await connection.command((0, utils_1.ns)(`${db}.$cmd`), saslStartCmd, undefined);\n    await continueScramConversation(cryptoMethod, response, authContext);\n}\nasync function continueScramConversation(cryptoMethod, response, authContext) {\n    const connection = authContext.connection;\n    const credentials = authContext.credentials;\n    if (!credentials) {\n        throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n    }\n    if (!authContext.nonce) {\n        throw new error_1.MongoInvalidArgumentError(\"Unable to continue SCRAM without valid nonce\");\n    }\n    const nonce = authContext.nonce;\n    const db = credentials.source;\n    const username = cleanUsername(credentials.username);\n    const password = credentials.password;\n    const processedPassword = cryptoMethod === \"sha256\" ? (0, saslprep_1.saslprep)(password) : passwordDigest(username, password);\n    const payload = Buffer.isBuffer(response.payload) ? new bson_1.Binary(response.payload) : response.payload;\n    const dict = parsePayload(payload);\n    const iterations = parseInt(dict.i, 10);\n    if (iterations && iterations < 4096) {\n        // TODO(NODE-3483)\n        throw new error_1.MongoRuntimeError(`Server returned an invalid iteration count ${iterations}`);\n    }\n    const salt = dict.s;\n    const rnonce = dict.r;\n    if (rnonce.startsWith(\"nonce\")) {\n        // TODO(NODE-3483)\n        throw new error_1.MongoRuntimeError(`Server returned an invalid nonce: ${rnonce}`);\n    }\n    // Set up start of proof\n    const withoutProof = `c=biws,r=${rnonce}`;\n    const saltedPassword = HI(processedPassword, Buffer.from(salt, \"base64\"), iterations, cryptoMethod);\n    const clientKey = HMAC(cryptoMethod, saltedPassword, \"Client Key\");\n    const serverKey = HMAC(cryptoMethod, saltedPassword, \"Server Key\");\n    const storedKey = H(cryptoMethod, clientKey);\n    const authMessage = [\n        clientFirstMessageBare(username, nonce),\n        payload.toString(\"utf8\"),\n        withoutProof\n    ].join(\",\");\n    const clientSignature = HMAC(cryptoMethod, storedKey, authMessage);\n    const clientProof = `p=${xor(clientKey, clientSignature)}`;\n    const clientFinal = [\n        withoutProof,\n        clientProof\n    ].join(\",\");\n    const serverSignature = HMAC(cryptoMethod, serverKey, authMessage);\n    const saslContinueCmd = {\n        saslContinue: 1,\n        conversationId: response.conversationId,\n        payload: new bson_1.Binary(Buffer.from(clientFinal))\n    };\n    const r = await connection.command((0, utils_1.ns)(`${db}.$cmd`), saslContinueCmd, undefined);\n    const parsedResponse = parsePayload(r.payload);\n    if (!compareDigest(Buffer.from(parsedResponse.v, \"base64\"), serverSignature)) {\n        throw new error_1.MongoRuntimeError(\"Server returned an invalid signature\");\n    }\n    if (r.done !== false) {\n        // If the server sends r.done === true we can save one RTT\n        return;\n    }\n    const retrySaslContinueCmd = {\n        saslContinue: 1,\n        conversationId: r.conversationId,\n        payload: Buffer.alloc(0)\n    };\n    await connection.command((0, utils_1.ns)(`${db}.$cmd`), retrySaslContinueCmd, undefined);\n}\nfunction parsePayload(payload) {\n    const payloadStr = payload.toString(\"utf8\");\n    const dict = {};\n    const parts = payloadStr.split(\",\");\n    for(let i = 0; i < parts.length; i++){\n        const valueParts = (parts[i].match(/^([^=]*)=(.*)$/) ?? []).slice(1);\n        dict[valueParts[0]] = valueParts[1];\n    }\n    return dict;\n}\nfunction passwordDigest(username, password) {\n    if (typeof username !== \"string\") {\n        throw new error_1.MongoInvalidArgumentError(\"Username must be a string\");\n    }\n    if (typeof password !== \"string\") {\n        throw new error_1.MongoInvalidArgumentError(\"Password must be a string\");\n    }\n    if (password.length === 0) {\n        throw new error_1.MongoInvalidArgumentError(\"Password cannot be empty\");\n    }\n    let md5;\n    try {\n        md5 = crypto.createHash(\"md5\");\n    } catch (err) {\n        if (crypto.getFips()) {\n            // This error is (slightly) more helpful than what comes from OpenSSL directly, e.g.\n            // 'Error: error:060800C8:digital envelope routines:EVP_DigestInit_ex:disabled for FIPS'\n            throw new Error(\"Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode\");\n        }\n        throw err;\n    }\n    md5.update(`${username}:mongo:${password}`, \"utf8\");\n    return md5.digest(\"hex\");\n}\n// XOR two buffers\nfunction xor(a, b) {\n    if (!Buffer.isBuffer(a)) {\n        a = Buffer.from(a);\n    }\n    if (!Buffer.isBuffer(b)) {\n        b = Buffer.from(b);\n    }\n    const length = Math.max(a.length, b.length);\n    const res = [];\n    for(let i = 0; i < length; i += 1){\n        res.push(a[i] ^ b[i]);\n    }\n    return Buffer.from(res).toString(\"base64\");\n}\nfunction H(method, text) {\n    return crypto.createHash(method).update(text).digest();\n}\nfunction HMAC(method, key, text) {\n    return crypto.createHmac(method, key).update(text).digest();\n}\nlet _hiCache = {};\nlet _hiCacheCount = 0;\nfunction _hiCachePurge() {\n    _hiCache = {};\n    _hiCacheCount = 0;\n}\nconst hiLengthMap = {\n    sha256: 32,\n    sha1: 20\n};\nfunction HI(data, salt, iterations, cryptoMethod) {\n    // omit the work if already generated\n    const key = [\n        data,\n        salt.toString(\"base64\"),\n        iterations\n    ].join(\"_\");\n    if (_hiCache[key] != null) {\n        return _hiCache[key];\n    }\n    // generate the salt\n    const saltedData = crypto.pbkdf2Sync(data, salt, iterations, hiLengthMap[cryptoMethod], cryptoMethod);\n    // cache a copy to speed up the next lookup, but prevent unbounded cache growth\n    if (_hiCacheCount >= 200) {\n        _hiCachePurge();\n    }\n    _hiCache[key] = saltedData;\n    _hiCacheCount += 1;\n    return saltedData;\n}\nfunction compareDigest(lhs, rhs) {\n    if (lhs.length !== rhs.length) {\n        return false;\n    }\n    if (typeof crypto.timingSafeEqual === \"function\") {\n        return crypto.timingSafeEqual(lhs, rhs);\n    }\n    let result = 0;\n    for(let i = 0; i < lhs.length; i++){\n        result |= lhs[i] ^ rhs[i];\n    }\n    return result === 0;\n}\nclass ScramSHA1 extends ScramSHA {\n    constructor(){\n        super(\"sha1\");\n    }\n}\nexports.ScramSHA1 = ScramSHA1;\nclass ScramSHA256 extends ScramSHA {\n    constructor(){\n        super(\"sha256\");\n    }\n}\nexports.ScramSHA256 = ScramSHA256; //# sourceMappingURL=scram.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3NjcmFtLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0EsaUJBQWlCLEdBQUcsS0FBSztBQUMvQyxNQUFNSSxhQUFhQyxtQkFBT0EsQ0FBQyxvRkFBc0I7QUFDakQsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUMsc0JBQVE7QUFDL0IsTUFBTUUsU0FBU0YsbUJBQU9BLENBQUMsNERBQVk7QUFDbkMsTUFBTUcsVUFBVUgsbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUksVUFBVUosbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUssa0JBQWtCTCxtQkFBT0EsQ0FBQyxvRkFBaUI7QUFDakQsTUFBTU0sY0FBY04sbUJBQU9BLENBQUMsNEVBQWE7QUFDekMsTUFBTU8saUJBQWlCRixnQkFBZ0JHLFlBQVk7SUFDL0NDLFlBQVlDLFlBQVksQ0FBRTtRQUN0QixLQUFLO1FBQ0wsSUFBSSxDQUFDQSxZQUFZLEdBQUdBLGdCQUFnQjtJQUN4QztJQUNBLE1BQU1DLFFBQVFDLFlBQVksRUFBRUMsV0FBVyxFQUFFO1FBQ3JDLE1BQU1ILGVBQWUsSUFBSSxDQUFDQSxZQUFZO1FBQ3RDLE1BQU1JLGNBQWNELFlBQVlDLFdBQVc7UUFDM0MsSUFBSSxDQUFDQSxhQUFhO1lBQ2QsTUFBTSxJQUFJWCxRQUFRWSw0QkFBNEIsQ0FBQztRQUNuRDtRQUNBLE1BQU1DLFFBQVEsTUFBTSxDQUFDLEdBQUdaLFFBQVFhLFdBQVcsRUFBRTtRQUM3QyxnQ0FBZ0M7UUFDaENKLFlBQVlHLEtBQUssR0FBR0E7UUFDcEIsTUFBTUUsVUFBVTtZQUNaLEdBQUdOLFlBQVk7WUFDZk8seUJBQXlCO2dCQUNyQixHQUFHQyxpQkFBaUJWLGNBQWNJLGFBQWFFLE1BQU07Z0JBQ3JESyxJQUFJUCxZQUFZUSxNQUFNO1lBQzFCO1FBQ0o7UUFD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cEIsTUFBTVMsYUFBYTFILE9BQU8ySCxVQUFVLENBQUNGLE1BQU0zRCxNQUFNSixZQUFZNEQsV0FBVyxDQUFDN0csYUFBYSxFQUFFQTtJQUN4RiwrRUFBK0U7SUFDL0UsSUFBSTJHLGlCQUFpQixLQUFLO1FBQ3RCQztJQUNKO0lBQ0FGLFFBQVEsQ0FBQ0YsSUFBSSxHQUFHUztJQUNoQk4saUJBQWlCO0lBQ2pCLE9BQU9NO0FBQ1g7QUFDQSxTQUFTcEMsY0FBY3NDLEdBQUcsRUFBRUMsR0FBRztJQUMzQixJQUFJRCxJQUFJOUIsTUFBTSxLQUFLK0IsSUFBSS9CLE1BQU0sRUFBRTtRQUMzQixPQUFPO0lBQ1g7SUFDQSxJQUFJLE9BQU85RixPQUFPOEgsZUFBZSxLQUFLLFlBQVk7UUFDOUMsT0FBTzlILE9BQU84SCxlQUFlLENBQUNGLEtBQUtDO0lBQ3ZDO0lBQ0EsSUFBSUUsU0FBUztJQUNiLElBQUssSUFBSW5FLElBQUksR0FBR0EsSUFBSWdFLElBQUk5QixNQUFNLEVBQUVsQyxJQUFLO1FBQ2pDbUUsVUFBVUgsR0FBRyxDQUFDaEUsRUFBRSxHQUFHaUUsR0FBRyxDQUFDakUsRUFBRTtJQUM3QjtJQUNBLE9BQU9tRSxXQUFXO0FBQ3RCO0FBQ0EsTUFBTWxJLGtCQUFrQlM7SUFDcEJFLGFBQWM7UUFDVixLQUFLLENBQUM7SUFDVjtBQUNKO0FBQ0FkLGlCQUFpQixHQUFHRztBQUNwQixNQUFNRCxvQkFBb0JVO0lBQ3RCRSxhQUFjO1FBQ1YsS0FBSyxDQUFDO0lBQ1Y7QUFDSjtBQUNBZCxtQkFBbUIsR0FBR0UsYUFDdEIsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgvc2NyYW0uanM/YTI5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU2NyYW1TSEEyNTYgPSBleHBvcnRzLlNjcmFtU0hBMSA9IHZvaWQgMDtcbmNvbnN0IHNhc2xwcmVwXzEgPSByZXF1aXJlKFwiQG1vbmdvZGItanMvc2FzbHByZXBcIik7XG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKFwiY3J5cHRvXCIpO1xuY29uc3QgYnNvbl8xID0gcmVxdWlyZShcIi4uLy4uL2Jzb25cIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlsc1wiKTtcbmNvbnN0IGF1dGhfcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL2F1dGhfcHJvdmlkZXJcIik7XG5jb25zdCBwcm92aWRlcnNfMSA9IHJlcXVpcmUoXCIuL3Byb3ZpZGVyc1wiKTtcbmNsYXNzIFNjcmFtU0hBIGV4dGVuZHMgYXV0aF9wcm92aWRlcl8xLkF1dGhQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoY3J5cHRvTWV0aG9kKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY3J5cHRvTWV0aG9kID0gY3J5cHRvTWV0aG9kIHx8ICdzaGExJztcbiAgICB9XG4gICAgYXN5bmMgcHJlcGFyZShoYW5kc2hha2VEb2MsIGF1dGhDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IGNyeXB0b01ldGhvZCA9IHRoaXMuY3J5cHRvTWV0aG9kO1xuICAgICAgICBjb25zdCBjcmVkZW50aWFscyA9IGF1dGhDb250ZXh0LmNyZWRlbnRpYWxzO1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yKCdBdXRoQ29udGV4dCBtdXN0IHByb3ZpZGUgY3JlZGVudGlhbHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9uY2UgPSBhd2FpdCAoMCwgdXRpbHNfMS5yYW5kb21CeXRlcykoMjQpO1xuICAgICAgICAvLyBzdG9yZSB0aGUgbm9uY2UgZm9yIGxhdGVyIHVzZVxuICAgICAgICBhdXRoQ29udGV4dC5ub25jZSA9IG5vbmNlO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgLi4uaGFuZHNoYWtlRG9jLFxuICAgICAgICAgICAgc3BlY3VsYXRpdmVBdXRoZW50aWNhdGU6IHtcbiAgICAgICAgICAgICAgICAuLi5tYWtlRmlyc3RNZXNzYWdlKGNyeXB0b01ldGhvZCwgY3JlZGVudGlhbHMsIG5vbmNlKSxcbiAgICAgICAgICAgICAgICBkYjogY3JlZGVudGlhbHMuc291cmNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgIH1cbiAgICBhc3luYyBhdXRoKGF1dGhDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHsgcmVhdXRoZW50aWNhdGluZywgcmVzcG9uc2UgfSA9IGF1dGhDb250ZXh0O1xuICAgICAgICBpZiAocmVzcG9uc2U/LnNwZWN1bGF0aXZlQXV0aGVudGljYXRlICYmICFyZWF1dGhlbnRpY2F0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udGludWVTY3JhbUNvbnZlcnNhdGlvbih0aGlzLmNyeXB0b01ldGhvZCwgcmVzcG9uc2Uuc3BlY3VsYXRpdmVBdXRoZW50aWNhdGUsIGF1dGhDb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXhlY3V0ZVNjcmFtKHRoaXMuY3J5cHRvTWV0aG9kLCBhdXRoQ29udGV4dCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYW5Vc2VybmFtZSh1c2VybmFtZSkge1xuICAgIHJldHVybiB1c2VybmFtZS5yZXBsYWNlKCc9JywgJz0zRCcpLnJlcGxhY2UoJywnLCAnPTJDJyk7XG59XG5mdW5jdGlvbiBjbGllbnRGaXJzdE1lc3NhZ2VCYXJlKHVzZXJuYW1lLCBub25jZSkge1xuICAgIC8vIE5PVEU6IFRoaXMgaXMgZG9uZSBiL2MgSmF2YXNjcmlwdCB1c2VzIFVURi0xNiwgYnV0IHRoZSBzZXJ2ZXIgaXMgaGFzaGluZyBpbiBVVEYtOC5cbiAgICAvLyBTaW5jZSB0aGUgdXNlcm5hbWUgaXMgbm90IHNhc2wtcHJlcC1kLCB3ZSBuZWVkIHRvIGRvIHRoaXMgaGVyZS5cbiAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChbXG4gICAgICAgIEJ1ZmZlci5mcm9tKCduPScsICd1dGY4JyksXG4gICAgICAgIEJ1ZmZlci5mcm9tKHVzZXJuYW1lLCAndXRmOCcpLFxuICAgICAgICBCdWZmZXIuZnJvbSgnLHI9JywgJ3V0ZjgnKSxcbiAgICAgICAgQnVmZmVyLmZyb20obm9uY2UudG9TdHJpbmcoJ2Jhc2U2NCcpLCAndXRmOCcpXG4gICAgXSk7XG59XG5mdW5jdGlvbiBtYWtlRmlyc3RNZXNzYWdlKGNyeXB0b01ldGhvZCwgY3JlZGVudGlhbHMsIG5vbmNlKSB7XG4gICAgY29uc3QgdXNlcm5hbWUgPSBjbGVhblVzZXJuYW1lKGNyZWRlbnRpYWxzLnVzZXJuYW1lKTtcbiAgICBjb25zdCBtZWNoYW5pc20gPSBjcnlwdG9NZXRob2QgPT09ICdzaGExJyA/IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEExIDogcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1NDUkFNX1NIQTI1NjtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIGRvbmUgYi9jIEphdmFzY3JpcHQgdXNlcyBVVEYtMTYsIGJ1dCB0aGUgc2VydmVyIGlzIGhhc2hpbmcgaW4gVVRGLTguXG4gICAgLy8gU2luY2UgdGhlIHVzZXJuYW1lIGlzIG5vdCBzYXNsLXByZXAtZCwgd2UgbmVlZCB0byBkbyB0aGlzIGhlcmUuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2FzbFN0YXJ0OiAxLFxuICAgICAgICBtZWNoYW5pc20sXG4gICAgICAgIHBheWxvYWQ6IG5ldyBic29uXzEuQmluYXJ5KEJ1ZmZlci5jb25jYXQoW0J1ZmZlci5mcm9tKCduLCwnLCAndXRmOCcpLCBjbGllbnRGaXJzdE1lc3NhZ2VCYXJlKHVzZXJuYW1lLCBub25jZSldKSksXG4gICAgICAgIGF1dG9BdXRob3JpemU6IDEsXG4gICAgICAgIG9wdGlvbnM6IHsgc2tpcEVtcHR5RXhjaGFuZ2U6IHRydWUgfVxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBleGVjdXRlU2NyYW0oY3J5cHRvTWV0aG9kLCBhdXRoQ29udGV4dCkge1xuICAgIGNvbnN0IHsgY29ubmVjdGlvbiwgY3JlZGVudGlhbHMgfSA9IGF1dGhDb250ZXh0O1xuICAgIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcignQXV0aENvbnRleHQgbXVzdCBwcm92aWRlIGNyZWRlbnRpYWxzLicpO1xuICAgIH1cbiAgICBpZiAoIWF1dGhDb250ZXh0Lm5vbmNlKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0F1dGhDb250ZXh0IG11c3QgY29udGFpbiBhIHZhbGlkIG5vbmNlIHByb3BlcnR5Jyk7XG4gICAgfVxuICAgIGNvbnN0IG5vbmNlID0gYXV0aENvbnRleHQubm9uY2U7XG4gICAgY29uc3QgZGIgPSBjcmVkZW50aWFscy5zb3VyY2U7XG4gICAgY29uc3Qgc2FzbFN0YXJ0Q21kID0gbWFrZUZpcnN0TWVzc2FnZShjcnlwdG9NZXRob2QsIGNyZWRlbnRpYWxzLCBub25jZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjb25uZWN0aW9uLmNvbW1hbmQoKDAsIHV0aWxzXzEubnMpKGAke2RifS4kY21kYCksIHNhc2xTdGFydENtZCwgdW5kZWZpbmVkKTtcbiAgICBhd2FpdCBjb250aW51ZVNjcmFtQ29udmVyc2F0aW9uKGNyeXB0b01ldGhvZCwgcmVzcG9uc2UsIGF1dGhDb250ZXh0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbnRpbnVlU2NyYW1Db252ZXJzYXRpb24oY3J5cHRvTWV0aG9kLCByZXNwb25zZSwgYXV0aENvbnRleHQpIHtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXV0aENvbnRleHQuY29ubmVjdGlvbjtcbiAgICBjb25zdCBjcmVkZW50aWFscyA9IGF1dGhDb250ZXh0LmNyZWRlbnRpYWxzO1xuICAgIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcignQXV0aENvbnRleHQgbXVzdCBwcm92aWRlIGNyZWRlbnRpYWxzLicpO1xuICAgIH1cbiAgICBpZiAoIWF1dGhDb250ZXh0Lm5vbmNlKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1VuYWJsZSB0byBjb250aW51ZSBTQ1JBTSB3aXRob3V0IHZhbGlkIG5vbmNlJyk7XG4gICAgfVxuICAgIGNvbnN0IG5vbmNlID0gYXV0aENvbnRleHQubm9uY2U7XG4gICAgY29uc3QgZGIgPSBjcmVkZW50aWFscy5zb3VyY2U7XG4gICAgY29uc3QgdXNlcm5hbWUgPSBjbGVhblVzZXJuYW1lKGNyZWRlbnRpYWxzLnVzZXJuYW1lKTtcbiAgICBjb25zdCBwYXNzd29yZCA9IGNyZWRlbnRpYWxzLnBhc3N3b3JkO1xuICAgIGNvbnN0IHByb2Nlc3NlZFBhc3N3b3JkID0gY3J5cHRvTWV0aG9kID09PSAnc2hhMjU2JyA/ICgwLCBzYXNscHJlcF8xLnNhc2xwcmVwKShwYXNzd29yZCkgOiBwYXNzd29yZERpZ2VzdCh1c2VybmFtZSwgcGFzc3dvcmQpO1xuICAgIGNvbnN0IHBheWxvYWQgPSBCdWZmZXIuaXNCdWZmZXIocmVzcG9uc2UucGF5bG9hZClcbiAgICAgICAgPyBuZXcgYnNvbl8xLkJpbmFyeShyZXNwb25zZS5wYXlsb2FkKVxuICAgICAgICA6IHJlc3BvbnNlLnBheWxvYWQ7XG4gICAgY29uc3QgZGljdCA9IHBhcnNlUGF5bG9hZChwYXlsb2FkKTtcbiAgICBjb25zdCBpdGVyYXRpb25zID0gcGFyc2VJbnQoZGljdC5pLCAxMCk7XG4gICAgaWYgKGl0ZXJhdGlvbnMgJiYgaXRlcmF0aW9ucyA8IDQwOTYpIHtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBTZXJ2ZXIgcmV0dXJuZWQgYW4gaW52YWxpZCBpdGVyYXRpb24gY291bnQgJHtpdGVyYXRpb25zfWApO1xuICAgIH1cbiAgICBjb25zdCBzYWx0ID0gZGljdC5zO1xuICAgIGNvbnN0IHJub25jZSA9IGRpY3QucjtcbiAgICBpZiAocm5vbmNlLnN0YXJ0c1dpdGgoJ25vbmNlJykpIHtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBTZXJ2ZXIgcmV0dXJuZWQgYW4gaW52YWxpZCBub25jZTogJHtybm9uY2V9YCk7XG4gICAgfVxuICAgIC8vIFNldCB1cCBzdGFydCBvZiBwcm9vZlxuICAgIGNvbnN0IHdpdGhvdXRQcm9vZiA9IGBjPWJpd3Mscj0ke3Jub25jZX1gO1xuICAgIGNvbnN0IHNhbHRlZFBhc3N3b3JkID0gSEkocHJvY2Vzc2VkUGFzc3dvcmQsIEJ1ZmZlci5mcm9tKHNhbHQsICdiYXNlNjQnKSwgaXRlcmF0aW9ucywgY3J5cHRvTWV0aG9kKTtcbiAgICBjb25zdCBjbGllbnRLZXkgPSBITUFDKGNyeXB0b01ldGhvZCwgc2FsdGVkUGFzc3dvcmQsICdDbGllbnQgS2V5Jyk7XG4gICAgY29uc3Qgc2VydmVyS2V5ID0gSE1BQyhjcnlwdG9NZXRob2QsIHNhbHRlZFBhc3N3b3JkLCAnU2VydmVyIEtleScpO1xuICAgIGNvbnN0IHN0b3JlZEtleSA9IEgoY3J5cHRvTWV0aG9kLCBjbGllbnRLZXkpO1xuICAgIGNvbnN0IGF1dGhNZXNzYWdlID0gW1xuICAgICAgICBjbGllbnRGaXJzdE1lc3NhZ2VCYXJlKHVzZXJuYW1lLCBub25jZSksXG4gICAgICAgIHBheWxvYWQudG9TdHJpbmcoJ3V0ZjgnKSxcbiAgICAgICAgd2l0aG91dFByb29mXG4gICAgXS5qb2luKCcsJyk7XG4gICAgY29uc3QgY2xpZW50U2lnbmF0dXJlID0gSE1BQyhjcnlwdG9NZXRob2QsIHN0b3JlZEtleSwgYXV0aE1lc3NhZ2UpO1xuICAgIGNvbnN0IGNsaWVudFByb29mID0gYHA9JHt4b3IoY2xpZW50S2V5LCBjbGllbnRTaWduYXR1cmUpfWA7XG4gICAgY29uc3QgY2xpZW50RmluYWwgPSBbd2l0aG91dFByb29mLCBjbGllbnRQcm9vZl0uam9pbignLCcpO1xuICAgIGNvbnN0IHNlcnZlclNpZ25hdHVyZSA9IEhNQUMoY3J5cHRvTWV0aG9kLCBzZXJ2ZXJLZXksIGF1dGhNZXNzYWdlKTtcbiAgICBjb25zdCBzYXNsQ29udGludWVDbWQgPSB7XG4gICAgICAgIHNhc2xDb250aW51ZTogMSxcbiAgICAgICAgY29udmVyc2F0aW9uSWQ6IHJlc3BvbnNlLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICBwYXlsb2FkOiBuZXcgYnNvbl8xLkJpbmFyeShCdWZmZXIuZnJvbShjbGllbnRGaW5hbCkpXG4gICAgfTtcbiAgICBjb25zdCByID0gYXdhaXQgY29ubmVjdGlvbi5jb21tYW5kKCgwLCB1dGlsc18xLm5zKShgJHtkYn0uJGNtZGApLCBzYXNsQ29udGludWVDbWQsIHVuZGVmaW5lZCk7XG4gICAgY29uc3QgcGFyc2VkUmVzcG9uc2UgPSBwYXJzZVBheWxvYWQoci5wYXlsb2FkKTtcbiAgICBpZiAoIWNvbXBhcmVEaWdlc3QoQnVmZmVyLmZyb20ocGFyc2VkUmVzcG9uc2UudiwgJ2Jhc2U2NCcpLCBzZXJ2ZXJTaWduYXR1cmUpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdTZXJ2ZXIgcmV0dXJuZWQgYW4gaW52YWxpZCBzaWduYXR1cmUnKTtcbiAgICB9XG4gICAgaWYgKHIuZG9uZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNlcnZlciBzZW5kcyByLmRvbmUgPT09IHRydWUgd2UgY2FuIHNhdmUgb25lIFJUVFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJldHJ5U2FzbENvbnRpbnVlQ21kID0ge1xuICAgICAgICBzYXNsQ29udGludWU6IDEsXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiByLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICBwYXlsb2FkOiBCdWZmZXIuYWxsb2MoMClcbiAgICB9O1xuICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoYCR7ZGJ9LiRjbWRgKSwgcmV0cnlTYXNsQ29udGludWVDbWQsIHVuZGVmaW5lZCk7XG59XG5mdW5jdGlvbiBwYXJzZVBheWxvYWQocGF5bG9hZCkge1xuICAgIGNvbnN0IHBheWxvYWRTdHIgPSBwYXlsb2FkLnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgY29uc3QgZGljdCA9IHt9O1xuICAgIGNvbnN0IHBhcnRzID0gcGF5bG9hZFN0ci5zcGxpdCgnLCcpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdmFsdWVQYXJ0cyA9IChwYXJ0c1tpXS5tYXRjaCgvXihbXj1dKik9KC4qKSQvKSA/PyBbXSkuc2xpY2UoMSk7XG4gICAgICAgIGRpY3RbdmFsdWVQYXJ0c1swXV0gPSB2YWx1ZVBhcnRzWzFdO1xuICAgIH1cbiAgICByZXR1cm4gZGljdDtcbn1cbmZ1bmN0aW9uIHBhc3N3b3JkRGlnZXN0KHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIGlmICh0eXBlb2YgdXNlcm5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1VzZXJuYW1lIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUGFzc3dvcmQgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIH1cbiAgICBpZiAocGFzc3dvcmQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1Bhc3N3b3JkIGNhbm5vdCBiZSBlbXB0eScpO1xuICAgIH1cbiAgICBsZXQgbWQ1O1xuICAgIHRyeSB7XG4gICAgICAgIG1kNSA9IGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoY3J5cHRvLmdldEZpcHMoKSkge1xuICAgICAgICAgICAgLy8gVGhpcyBlcnJvciBpcyAoc2xpZ2h0bHkpIG1vcmUgaGVscGZ1bCB0aGFuIHdoYXQgY29tZXMgZnJvbSBPcGVuU1NMIGRpcmVjdGx5LCBlLmcuXG4gICAgICAgICAgICAvLyAnRXJyb3I6IGVycm9yOjA2MDgwMEM4OmRpZ2l0YWwgZW52ZWxvcGUgcm91dGluZXM6RVZQX0RpZ2VzdEluaXRfZXg6ZGlzYWJsZWQgZm9yIEZJUFMnXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGggbWVjaGFuaXNtIFNDUkFNLVNIQS0xIGlzIG5vdCBzdXBwb3J0ZWQgaW4gRklQUyBtb2RlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICBtZDUudXBkYXRlKGAke3VzZXJuYW1lfTptb25nbzoke3Bhc3N3b3JkfWAsICd1dGY4Jyk7XG4gICAgcmV0dXJuIG1kNS5kaWdlc3QoJ2hleCcpO1xufVxuLy8gWE9SIHR3byBidWZmZXJzXG5mdW5jdGlvbiB4b3IoYSwgYikge1xuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpKSB7XG4gICAgICAgIGEgPSBCdWZmZXIuZnJvbShhKTtcbiAgICB9XG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICAgICAgYiA9IEJ1ZmZlci5mcm9tKGIpO1xuICAgIH1cbiAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heChhLmxlbmd0aCwgYi5sZW5ndGgpO1xuICAgIGNvbnN0IHJlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgcmVzLnB1c2goYVtpXSBeIGJbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gQnVmZmVyLmZyb20ocmVzKS50b1N0cmluZygnYmFzZTY0Jyk7XG59XG5mdW5jdGlvbiBIKG1ldGhvZCwgdGV4dCkge1xuICAgIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaChtZXRob2QpLnVwZGF0ZSh0ZXh0KS5kaWdlc3QoKTtcbn1cbmZ1bmN0aW9uIEhNQUMobWV0aG9kLCBrZXksIHRleHQpIHtcbiAgICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhtYWMobWV0aG9kLCBrZXkpLnVwZGF0ZSh0ZXh0KS5kaWdlc3QoKTtcbn1cbmxldCBfaGlDYWNoZSA9IHt9O1xubGV0IF9oaUNhY2hlQ291bnQgPSAwO1xuZnVuY3Rpb24gX2hpQ2FjaGVQdXJnZSgpIHtcbiAgICBfaGlDYWNoZSA9IHt9O1xuICAgIF9oaUNhY2hlQ291bnQgPSAwO1xufVxuY29uc3QgaGlMZW5ndGhNYXAgPSB7XG4gICAgc2hhMjU2OiAzMixcbiAgICBzaGExOiAyMFxufTtcbmZ1bmN0aW9uIEhJKGRhdGEsIHNhbHQsIGl0ZXJhdGlvbnMsIGNyeXB0b01ldGhvZCkge1xuICAgIC8vIG9taXQgdGhlIHdvcmsgaWYgYWxyZWFkeSBnZW5lcmF0ZWRcbiAgICBjb25zdCBrZXkgPSBbZGF0YSwgc2FsdC50b1N0cmluZygnYmFzZTY0JyksIGl0ZXJhdGlvbnNdLmpvaW4oJ18nKTtcbiAgICBpZiAoX2hpQ2FjaGVba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBfaGlDYWNoZVtrZXldO1xuICAgIH1cbiAgICAvLyBnZW5lcmF0ZSB0aGUgc2FsdFxuICAgIGNvbnN0IHNhbHRlZERhdGEgPSBjcnlwdG8ucGJrZGYyU3luYyhkYXRhLCBzYWx0LCBpdGVyYXRpb25zLCBoaUxlbmd0aE1hcFtjcnlwdG9NZXRob2RdLCBjcnlwdG9NZXRob2QpO1xuICAgIC8vIGNhY2hlIGEgY29weSB0byBzcGVlZCB1cCB0aGUgbmV4dCBsb29rdXAsIGJ1dCBwcmV2ZW50IHVuYm91bmRlZCBjYWNoZSBncm93dGhcbiAgICBpZiAoX2hpQ2FjaGVDb3VudCA+PSAyMDApIHtcbiAgICAgICAgX2hpQ2FjaGVQdXJnZSgpO1xuICAgIH1cbiAgICBfaGlDYWNoZVtrZXldID0gc2FsdGVkRGF0YTtcbiAgICBfaGlDYWNoZUNvdW50ICs9IDE7XG4gICAgcmV0dXJuIHNhbHRlZERhdGE7XG59XG5mdW5jdGlvbiBjb21wYXJlRGlnZXN0KGxocywgcmhzKSB7XG4gICAgaWYgKGxocy5sZW5ndGggIT09IHJocy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyeXB0by50aW1pbmdTYWZlRXF1YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by50aW1pbmdTYWZlRXF1YWwobGhzLCByaHMpO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxocy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHQgfD0gbGhzW2ldIF4gcmhzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0ID09PSAwO1xufVxuY2xhc3MgU2NyYW1TSEExIGV4dGVuZHMgU2NyYW1TSEEge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignc2hhMScpO1xuICAgIH1cbn1cbmV4cG9ydHMuU2NyYW1TSEExID0gU2NyYW1TSEExO1xuY2xhc3MgU2NyYW1TSEEyNTYgZXh0ZW5kcyBTY3JhbVNIQSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdzaGEyNTYnKTtcbiAgICB9XG59XG5leHBvcnRzLlNjcmFtU0hBMjU2ID0gU2NyYW1TSEEyNTY7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY3JhbS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTY3JhbVNIQTI1NiIsIlNjcmFtU0hBMSIsInNhc2xwcmVwXzEiLCJyZXF1aXJlIiwiY3J5cHRvIiwiYnNvbl8xIiwiZXJyb3JfMSIsInV0aWxzXzEiLCJhdXRoX3Byb3ZpZGVyXzEiLCJwcm92aWRlcnNfMSIsIlNjcmFtU0hBIiwiQXV0aFByb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJjcnlwdG9NZXRob2QiLCJwcmVwYXJlIiwiaGFuZHNoYWtlRG9jIiwiYXV0aENvbnRleHQiLCJjcmVkZW50aWFscyIsIk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IiLCJub25jZSIsInJhbmRvbUJ5dGVzIiwicmVxdWVzdCIsInNwZWN1bGF0aXZlQXV0aGVudGljYXRlIiwibWFrZUZpcnN0TWVzc2FnZSIsImRiIiwic291cmNlIiwiYXV0aCIsInJlYXV0aGVudGljYXRpbmciLCJyZXNwb25zZSIsImNvbnRpbnVlU2NyYW1Db252ZXJzYXRpb24iLCJleGVjdXRlU2NyYW0iLCJjbGVhblVzZXJuYW1lIiwidXNlcm5hbWUiLCJyZXBsYWNlIiwiY2xpZW50Rmlyc3RNZXNzYWdlQmFyZSIsIkJ1ZmZlciIsImNvbmNhdCIsImZyb20iLCJ0b1N0cmluZyIsIm1lY2hhbmlzbSIsIkF1dGhNZWNoYW5pc20iLCJNT05HT0RCX1NDUkFNX1NIQTEiLCJNT05HT0RCX1NDUkFNX1NIQTI1NiIsInNhc2xTdGFydCIsInBheWxvYWQiLCJCaW5hcnkiLCJhdXRvQXV0aG9yaXplIiwib3B0aW9ucyIsInNraXBFbXB0eUV4Y2hhbmdlIiwiY29ubmVjdGlvbiIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJzYXNsU3RhcnRDbWQiLCJjb21tYW5kIiwibnMiLCJ1bmRlZmluZWQiLCJwYXNzd29yZCIsInByb2Nlc3NlZFBhc3N3b3JkIiwic2FzbHByZXAiLCJwYXNzd29yZERpZ2VzdCIsImlzQnVmZmVyIiwiZGljdCIsInBhcnNlUGF5bG9hZCIsIml0ZXJhdGlvbnMiLCJwYXJzZUludCIsImkiLCJNb25nb1J1bnRpbWVFcnJvciIsInNhbHQiLCJzIiwicm5vbmNlIiwiciIsInN0YXJ0c1dpdGgiLCJ3aXRob3V0UHJvb2YiLCJzYWx0ZWRQYXNzd29yZCIsIkhJIiwiY2xpZW50S2V5IiwiSE1BQyIsInNlcnZlcktleSIsInN0b3JlZEtleSIsIkgiLCJhdXRoTWVzc2FnZSIsImpvaW4iLCJjbGllbnRTaWduYXR1cmUiLCJjbGllbnRQcm9vZiIsInhvciIsImNsaWVudEZpbmFsIiwic2VydmVyU2lnbmF0dXJlIiwic2FzbENvbnRpbnVlQ21kIiwic2FzbENvbnRpbnVlIiwiY29udmVyc2F0aW9uSWQiLCJwYXJzZWRSZXNwb25zZSIsImNvbXBhcmVEaWdlc3QiLCJ2IiwiZG9uZSIsInJldHJ5U2FzbENvbnRpbnVlQ21kIiwiYWxsb2MiLCJwYXlsb2FkU3RyIiwicGFydHMiLCJzcGxpdCIsImxlbmd0aCIsInZhbHVlUGFydHMiLCJtYXRjaCIsInNsaWNlIiwibWQ1IiwiY3JlYXRlSGFzaCIsImVyciIsImdldEZpcHMiLCJFcnJvciIsInVwZGF0ZSIsImRpZ2VzdCIsImEiLCJiIiwiTWF0aCIsIm1heCIsInJlcyIsInB1c2giLCJtZXRob2QiLCJ0ZXh0Iiwia2V5IiwiY3JlYXRlSG1hYyIsIl9oaUNhY2hlIiwiX2hpQ2FjaGVDb3VudCIsIl9oaUNhY2hlUHVyZ2UiLCJoaUxlbmd0aE1hcCIsInNoYTI1NiIsInNoYTEiLCJkYXRhIiwic2FsdGVkRGF0YSIsInBia2RmMlN5bmMiLCJsaHMiLCJyaHMiLCJ0aW1pbmdTYWZlRXF1YWwiLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/scram.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/auth/x509.js":
/*!****************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/auth/x509.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.X509 = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nclass X509 extends auth_provider_1.AuthProvider {\n    async prepare(handshakeDoc, authContext) {\n        const { credentials } = authContext;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        return {\n            ...handshakeDoc,\n            speculativeAuthenticate: x509AuthenticateCommand(credentials)\n        };\n    }\n    async auth(authContext) {\n        const connection = authContext.connection;\n        const credentials = authContext.credentials;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"AuthContext must provide credentials.\");\n        }\n        const response = authContext.response;\n        if (response?.speculativeAuthenticate) {\n            return;\n        }\n        await connection.command((0, utils_1.ns)(\"$external.$cmd\"), x509AuthenticateCommand(credentials), undefined);\n    }\n}\nexports.X509 = X509;\nfunction x509AuthenticateCommand(credentials) {\n    const command = {\n        authenticate: 1,\n        mechanism: \"MONGODB-X509\"\n    };\n    if (credentials.username) {\n        command.user = credentials.username;\n    }\n    return command;\n} //# sourceMappingURL=x509.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9hdXRoL3g1MDkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELFlBQVksR0FBRyxLQUFLO0FBQ3BCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1FLGtCQUFrQkYsbUJBQU9BLENBQUMsb0ZBQWlCO0FBQ2pELE1BQU1GLGFBQWFJLGdCQUFnQkMsWUFBWTtJQUMzQyxNQUFNQyxRQUFRQyxZQUFZLEVBQUVDLFdBQVcsRUFBRTtRQUNyQyxNQUFNLEVBQUVDLFdBQVcsRUFBRSxHQUFHRDtRQUN4QixJQUFJLENBQUNDLGFBQWE7WUFDZCxNQUFNLElBQUlSLFFBQVFTLDRCQUE0QixDQUFDO1FBQ25EO1FBQ0EsT0FBTztZQUFFLEdBQUdILFlBQVk7WUFBRUkseUJBQXlCQyx3QkFBd0JIO1FBQWE7SUFDNUY7SUFDQSxNQUFNSSxLQUFLTCxXQUFXLEVBQUU7UUFDcEIsTUFBTU0sYUFBYU4sWUFBWU0sVUFBVTtRQUN6QyxNQUFNTCxjQUFjRCxZQUFZQyxXQUFXO1FBQzNDLElBQUksQ0FBQ0EsYUFBYTtZQUNkLE1BQU0sSUFBSVIsUUFBUVMsNEJBQTRCLENBQUM7UUFDbkQ7UUFDQSxNQUFNSyxXQUFXUCxZQUFZTyxRQUFRO1FBQ3JDLElBQUlBLFVBQVVKLHlCQUF5QjtZQUNuQztRQUNKO1FBQ0EsTUFBTUcsV0FBV0UsT0FBTyxDQUFDLENBQUMsR0FBR2IsUUFBUWMsRUFBRSxFQUFFLG1CQUFtQkwsd0JBQXdCSCxjQUFjUztJQUN0RztBQUNKO0FBQ0FwQixZQUFZLEdBQUdFO0FBQ2YsU0FBU1ksd0JBQXdCSCxXQUFXO0lBQ3hDLE1BQU1PLFVBQVU7UUFBRUcsY0FBYztRQUFHQyxXQUFXO0lBQWU7SUFDN0QsSUFBSVgsWUFBWVksUUFBUSxFQUFFO1FBQ3RCTCxRQUFRTSxJQUFJLEdBQUdiLFlBQVlZLFFBQVE7SUFDdkM7SUFDQSxPQUFPTDtBQUNYLEVBQ0EsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2F1dGgveDUwOS5qcz8zN2JkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5YNTA5ID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHNcIik7XG5jb25zdCBhdXRoX3Byb3ZpZGVyXzEgPSByZXF1aXJlKFwiLi9hdXRoX3Byb3ZpZGVyXCIpO1xuY2xhc3MgWDUwOSBleHRlbmRzIGF1dGhfcHJvdmlkZXJfMS5BdXRoUHJvdmlkZXIge1xuICAgIGFzeW5jIHByZXBhcmUoaGFuZHNoYWtlRG9jLCBhdXRoQ29udGV4dCkge1xuICAgICAgICBjb25zdCB7IGNyZWRlbnRpYWxzIH0gPSBhdXRoQ29udGV4dDtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcignQXV0aENvbnRleHQgbXVzdCBwcm92aWRlIGNyZWRlbnRpYWxzLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IC4uLmhhbmRzaGFrZURvYywgc3BlY3VsYXRpdmVBdXRoZW50aWNhdGU6IHg1MDlBdXRoZW50aWNhdGVDb21tYW5kKGNyZWRlbnRpYWxzKSB9O1xuICAgIH1cbiAgICBhc3luYyBhdXRoKGF1dGhDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhdXRoQ29udGV4dC5jb25uZWN0aW9uO1xuICAgICAgICBjb25zdCBjcmVkZW50aWFscyA9IGF1dGhDb250ZXh0LmNyZWRlbnRpYWxzO1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yKCdBdXRoQ29udGV4dCBtdXN0IHByb3ZpZGUgY3JlZGVudGlhbHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhdXRoQ29udGV4dC5yZXNwb25zZTtcbiAgICAgICAgaWYgKHJlc3BvbnNlPy5zcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJyRleHRlcm5hbC4kY21kJyksIHg1MDlBdXRoZW50aWNhdGVDb21tYW5kKGNyZWRlbnRpYWxzKSwgdW5kZWZpbmVkKTtcbiAgICB9XG59XG5leHBvcnRzLlg1MDkgPSBYNTA5O1xuZnVuY3Rpb24geDUwOUF1dGhlbnRpY2F0ZUNvbW1hbmQoY3JlZGVudGlhbHMpIHtcbiAgICBjb25zdCBjb21tYW5kID0geyBhdXRoZW50aWNhdGU6IDEsIG1lY2hhbmlzbTogJ01PTkdPREItWDUwOScgfTtcbiAgICBpZiAoY3JlZGVudGlhbHMudXNlcm5hbWUpIHtcbiAgICAgICAgY29tbWFuZC51c2VyID0gY3JlZGVudGlhbHMudXNlcm5hbWU7XG4gICAgfVxuICAgIHJldHVybiBjb21tYW5kO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9eDUwOS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJYNTA5IiwiZXJyb3JfMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwiYXV0aF9wcm92aWRlcl8xIiwiQXV0aFByb3ZpZGVyIiwicHJlcGFyZSIsImhhbmRzaGFrZURvYyIsImF1dGhDb250ZXh0IiwiY3JlZGVudGlhbHMiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwic3BlY3VsYXRpdmVBdXRoZW50aWNhdGUiLCJ4NTA5QXV0aGVudGljYXRlQ29tbWFuZCIsImF1dGgiLCJjb25uZWN0aW9uIiwicmVzcG9uc2UiLCJjb21tYW5kIiwibnMiLCJ1bmRlZmluZWQiLCJhdXRoZW50aWNhdGUiLCJtZWNoYW5pc20iLCJ1c2VybmFtZSIsInVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/auth/x509.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/command_monitoring_events.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/command_monitoring_events.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SENSITIVE_COMMANDS = exports.CommandFailedEvent = exports.CommandSucceededEvent = exports.CommandStartedEvent = void 0;\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst commands_1 = __webpack_require__(/*! ./commands */ \"(ssr)/./node_modules/mongodb/lib/cmap/commands.js\");\n/**\n * An event indicating the start of a given command\n * @public\n * @category Event\n */ class CommandStartedEvent {\n    /**\n     * Create a started event\n     *\n     * @internal\n     * @param pool - the pool that originated the command\n     * @param command - the command\n     */ constructor(connection, command, serverConnectionId){\n        /** @internal */ this.name = constants_1.COMMAND_STARTED;\n        const cmd = extractCommand(command);\n        const commandName = extractCommandName(cmd);\n        const { address, connectionId, serviceId } = extractConnectionDetails(connection);\n        // TODO: remove in major revision, this is not spec behavior\n        if (exports.SENSITIVE_COMMANDS.has(commandName)) {\n            this.commandObj = {};\n            this.commandObj[commandName] = true;\n        }\n        this.address = address;\n        this.connectionId = connectionId;\n        this.serviceId = serviceId;\n        this.requestId = command.requestId;\n        this.databaseName = command.databaseName;\n        this.commandName = commandName;\n        this.command = maybeRedact(commandName, cmd, cmd);\n        this.serverConnectionId = serverConnectionId;\n    }\n    /* @internal */ get hasServiceId() {\n        return !!this.serviceId;\n    }\n}\nexports.CommandStartedEvent = CommandStartedEvent;\n/**\n * An event indicating the success of a given command\n * @public\n * @category Event\n */ class CommandSucceededEvent {\n    /**\n     * Create a succeeded event\n     *\n     * @internal\n     * @param pool - the pool that originated the command\n     * @param command - the command\n     * @param reply - the reply for this command from the server\n     * @param started - a high resolution tuple timestamp of when the command was first sent, to calculate duration\n     */ constructor(connection, command, reply, started, serverConnectionId){\n        /** @internal */ this.name = constants_1.COMMAND_SUCCEEDED;\n        const cmd = extractCommand(command);\n        const commandName = extractCommandName(cmd);\n        const { address, connectionId, serviceId } = extractConnectionDetails(connection);\n        this.address = address;\n        this.connectionId = connectionId;\n        this.serviceId = serviceId;\n        this.requestId = command.requestId;\n        this.commandName = commandName;\n        this.duration = (0, utils_1.calculateDurationInMs)(started);\n        this.reply = maybeRedact(commandName, cmd, extractReply(command, reply));\n        this.serverConnectionId = serverConnectionId;\n    }\n    /* @internal */ get hasServiceId() {\n        return !!this.serviceId;\n    }\n}\nexports.CommandSucceededEvent = CommandSucceededEvent;\n/**\n * An event indicating the failure of a given command\n * @public\n * @category Event\n */ class CommandFailedEvent {\n    /**\n     * Create a failure event\n     *\n     * @internal\n     * @param pool - the pool that originated the command\n     * @param command - the command\n     * @param error - the generated error or a server error response\n     * @param started - a high resolution tuple timestamp of when the command was first sent, to calculate duration\n     */ constructor(connection, command, error, started, serverConnectionId){\n        /** @internal */ this.name = constants_1.COMMAND_FAILED;\n        const cmd = extractCommand(command);\n        const commandName = extractCommandName(cmd);\n        const { address, connectionId, serviceId } = extractConnectionDetails(connection);\n        this.address = address;\n        this.connectionId = connectionId;\n        this.serviceId = serviceId;\n        this.requestId = command.requestId;\n        this.commandName = commandName;\n        this.duration = (0, utils_1.calculateDurationInMs)(started);\n        this.failure = maybeRedact(commandName, cmd, error);\n        this.serverConnectionId = serverConnectionId;\n    }\n    /* @internal */ get hasServiceId() {\n        return !!this.serviceId;\n    }\n}\nexports.CommandFailedEvent = CommandFailedEvent;\n/**\n * Commands that we want to redact because of the sensitive nature of their contents\n * @internal\n */ exports.SENSITIVE_COMMANDS = new Set([\n    \"authenticate\",\n    \"saslStart\",\n    \"saslContinue\",\n    \"getnonce\",\n    \"createUser\",\n    \"updateUser\",\n    \"copydbgetnonce\",\n    \"copydbsaslstart\",\n    \"copydb\"\n]);\nconst HELLO_COMMANDS = new Set([\n    \"hello\",\n    constants_1.LEGACY_HELLO_COMMAND,\n    constants_1.LEGACY_HELLO_COMMAND_CAMEL_CASE\n]);\n// helper methods\nconst extractCommandName = (commandDoc)=>Object.keys(commandDoc)[0];\nconst namespace = (command)=>command.ns;\nconst collectionName = (command)=>command.ns.split(\".\")[1];\nconst maybeRedact = (commandName, commandDoc, result)=>exports.SENSITIVE_COMMANDS.has(commandName) || HELLO_COMMANDS.has(commandName) && commandDoc.speculativeAuthenticate ? {} : result;\nconst LEGACY_FIND_QUERY_MAP = {\n    $query: \"filter\",\n    $orderby: \"sort\",\n    $hint: \"hint\",\n    $comment: \"comment\",\n    $maxScan: \"maxScan\",\n    $max: \"max\",\n    $min: \"min\",\n    $returnKey: \"returnKey\",\n    $showDiskLoc: \"showRecordId\",\n    $maxTimeMS: \"maxTimeMS\",\n    $snapshot: \"snapshot\"\n};\nconst LEGACY_FIND_OPTIONS_MAP = {\n    numberToSkip: \"skip\",\n    numberToReturn: \"batchSize\",\n    returnFieldSelector: \"projection\"\n};\nconst OP_QUERY_KEYS = [\n    \"tailable\",\n    \"oplogReplay\",\n    \"noCursorTimeout\",\n    \"awaitData\",\n    \"partial\",\n    \"exhaust\"\n];\n/** Extract the actual command from the query, possibly up-converting if it's a legacy format */ function extractCommand(command) {\n    if (command instanceof commands_1.OpMsgRequest) {\n        return (0, utils_1.deepCopy)(command.command);\n    }\n    if (command.query?.$query) {\n        let result;\n        if (command.ns === \"admin.$cmd\") {\n            // up-convert legacy command\n            result = Object.assign({}, command.query.$query);\n        } else {\n            // up-convert legacy find command\n            result = {\n                find: collectionName(command)\n            };\n            Object.keys(LEGACY_FIND_QUERY_MAP).forEach((key)=>{\n                if (command.query[key] != null) {\n                    result[LEGACY_FIND_QUERY_MAP[key]] = (0, utils_1.deepCopy)(command.query[key]);\n                }\n            });\n        }\n        Object.keys(LEGACY_FIND_OPTIONS_MAP).forEach((key)=>{\n            const legacyKey = key;\n            if (command[legacyKey] != null) {\n                result[LEGACY_FIND_OPTIONS_MAP[legacyKey]] = (0, utils_1.deepCopy)(command[legacyKey]);\n            }\n        });\n        OP_QUERY_KEYS.forEach((key)=>{\n            if (command[key]) {\n                result[key] = command[key];\n            }\n        });\n        if (command.pre32Limit != null) {\n            result.limit = command.pre32Limit;\n        }\n        if (command.query.$explain) {\n            return {\n                explain: result\n            };\n        }\n        return result;\n    }\n    const clonedQuery = {};\n    const clonedCommand = {};\n    if (command.query) {\n        for(const k in command.query){\n            clonedQuery[k] = (0, utils_1.deepCopy)(command.query[k]);\n        }\n        clonedCommand.query = clonedQuery;\n    }\n    for(const k in command){\n        if (k === \"query\") continue;\n        clonedCommand[k] = (0, utils_1.deepCopy)(command[k]);\n    }\n    return command.query ? clonedQuery : clonedCommand;\n}\nfunction extractReply(command, reply) {\n    if (!reply) {\n        return reply;\n    }\n    if (command instanceof commands_1.OpMsgRequest) {\n        return (0, utils_1.deepCopy)(reply.result ? reply.result : reply);\n    }\n    // is this a legacy find command?\n    if (command.query && command.query.$query != null) {\n        return {\n            ok: 1,\n            cursor: {\n                id: (0, utils_1.deepCopy)(reply.cursorId),\n                ns: namespace(command),\n                firstBatch: (0, utils_1.deepCopy)(reply.documents)\n            }\n        };\n    }\n    return (0, utils_1.deepCopy)(reply.result ? reply.result : reply);\n}\nfunction extractConnectionDetails(connection) {\n    let connectionId;\n    if (\"id\" in connection) {\n        connectionId = connection.id;\n    }\n    return {\n        address: connection.address,\n        serviceId: connection.serviceId,\n        connectionId\n    };\n} //# sourceMappingURL=command_monitoring_events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb21tYW5kX21vbml0b3JpbmdfZXZlbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBR0EsMEJBQTBCLEdBQUdBLDZCQUE2QixHQUFHQSwyQkFBMkIsR0FBRyxLQUFLO0FBQzdILE1BQU1NLGNBQWNDLG1CQUFPQSxDQUFDLG1FQUFjO0FBQzFDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1FLGFBQWFGLG1CQUFPQSxDQUFDLHFFQUFZO0FBQ3ZDOzs7O0NBSUMsR0FDRCxNQUFNRjtJQUNGOzs7Ozs7S0FNQyxHQUNESyxZQUFZQyxVQUFVLEVBQUVDLE9BQU8sRUFBRUMsa0JBQWtCLENBQUU7UUFDakQsY0FBYyxHQUNkLElBQUksQ0FBQ0MsSUFBSSxHQUFHUixZQUFZUyxlQUFlO1FBQ3ZDLE1BQU1DLE1BQU1DLGVBQWVMO1FBQzNCLE1BQU1NLGNBQWNDLG1CQUFtQkg7UUFDdkMsTUFBTSxFQUFFSSxPQUFPLEVBQUVDLFlBQVksRUFBRUMsU0FBUyxFQUFFLEdBQUdDLHlCQUF5Qlo7UUFDdEUsNERBQTREO1FBQzVELElBQUlYLFFBQVFFLGtCQUFrQixDQUFDc0IsR0FBRyxDQUFDTixjQUFjO1lBQzdDLElBQUksQ0FBQ08sVUFBVSxHQUFHLENBQUM7WUFDbkIsSUFBSSxDQUFDQSxVQUFVLENBQUNQLFlBQVksR0FBRztRQUNuQztRQUNBLElBQUksQ0FBQ0UsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0MsWUFBWSxHQUFHQTtRQUNwQixJQUFJLENBQUNDLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDSSxTQUFTLEdBQUdkLFFBQVFjLFNBQVM7UUFDbEMsSUFBSSxDQUFDQyxZQUFZLEdBQUdmLFFBQVFlLFlBQVk7UUFDeEMsSUFBSSxDQUFDVCxXQUFXLEdBQUdBO1FBQ25CLElBQUks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cyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2NvbW1hbmRfbW9uaXRvcmluZ19ldmVudHMuanM/MGQ5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU0VOU0lUSVZFX0NPTU1BTkRTID0gZXhwb3J0cy5Db21tYW5kRmFpbGVkRXZlbnQgPSBleHBvcnRzLkNvbW1hbmRTdWNjZWVkZWRFdmVudCA9IGV4cG9ydHMuQ29tbWFuZFN0YXJ0ZWRFdmVudCA9IHZvaWQgMDtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tYW5kc18xID0gcmVxdWlyZShcIi4vY29tbWFuZHNcIik7XG4vKipcbiAqIEFuIGV2ZW50IGluZGljYXRpbmcgdGhlIHN0YXJ0IG9mIGEgZ2l2ZW4gY29tbWFuZFxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIENvbW1hbmRTdGFydGVkRXZlbnQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHN0YXJ0ZWQgZXZlbnRcbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBwb29sIC0gdGhlIHBvb2wgdGhhdCBvcmlnaW5hdGVkIHRoZSBjb21tYW5kXG4gICAgICogQHBhcmFtIGNvbW1hbmQgLSB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb24sIGNvbW1hbmQsIHNlcnZlckNvbm5lY3Rpb25JZCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTU1BTkRfU1RBUlRFRDtcbiAgICAgICAgY29uc3QgY21kID0gZXh0cmFjdENvbW1hbmQoY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IGNvbW1hbmROYW1lID0gZXh0cmFjdENvbW1hbmROYW1lKGNtZCk7XG4gICAgICAgIGNvbnN0IHsgYWRkcmVzcywgY29ubmVjdGlvbklkLCBzZXJ2aWNlSWQgfSA9IGV4dHJhY3RDb25uZWN0aW9uRGV0YWlscyhjb25uZWN0aW9uKTtcbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIGluIG1ham9yIHJldmlzaW9uLCB0aGlzIGlzIG5vdCBzcGVjIGJlaGF2aW9yXG4gICAgICAgIGlmIChleHBvcnRzLlNFTlNJVElWRV9DT01NQU5EUy5oYXMoY29tbWFuZE5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRPYmogPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZE9ialtjb21tYW5kTmFtZV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbklkID0gY29ubmVjdGlvbklkO1xuICAgICAgICB0aGlzLnNlcnZpY2VJZCA9IHNlcnZpY2VJZDtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SWQgPSBjb21tYW5kLnJlcXVlc3RJZDtcbiAgICAgICAgdGhpcy5kYXRhYmFzZU5hbWUgPSBjb21tYW5kLmRhdGFiYXNlTmFtZTtcbiAgICAgICAgdGhpcy5jb21tYW5kTmFtZSA9IGNvbW1hbmROYW1lO1xuICAgICAgICB0aGlzLmNvbW1hbmQgPSBtYXliZVJlZGFjdChjb21tYW5kTmFtZSwgY21kLCBjbWQpO1xuICAgICAgICB0aGlzLnNlcnZlckNvbm5lY3Rpb25JZCA9IHNlcnZlckNvbm5lY3Rpb25JZDtcbiAgICB9XG4gICAgLyogQGludGVybmFsICovXG4gICAgZ2V0IGhhc1NlcnZpY2VJZCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5zZXJ2aWNlSWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Db21tYW5kU3RhcnRlZEV2ZW50ID0gQ29tbWFuZFN0YXJ0ZWRFdmVudDtcbi8qKlxuICogQW4gZXZlbnQgaW5kaWNhdGluZyB0aGUgc3VjY2VzcyBvZiBhIGdpdmVuIGNvbW1hbmRcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb21tYW5kU3VjY2VlZGVkRXZlbnQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHN1Y2NlZWRlZCBldmVudFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHBvb2wgLSB0aGUgcG9vbCB0aGF0IG9yaWdpbmF0ZWQgdGhlIGNvbW1hbmRcbiAgICAgKiBAcGFyYW0gY29tbWFuZCAtIHRoZSBjb21tYW5kXG4gICAgICogQHBhcmFtIHJlcGx5IC0gdGhlIHJlcGx5IGZvciB0aGlzIGNvbW1hbmQgZnJvbSB0aGUgc2VydmVyXG4gICAgICogQHBhcmFtIHN0YXJ0ZWQgLSBhIGhpZ2ggcmVzb2x1dGlvbiB0dXBsZSB0aW1lc3RhbXAgb2Ygd2hlbiB0aGUgY29tbWFuZCB3YXMgZmlyc3Qgc2VudCwgdG8gY2FsY3VsYXRlIGR1cmF0aW9uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbiwgY29tbWFuZCwgcmVwbHksIHN0YXJ0ZWQsIHNlcnZlckNvbm5lY3Rpb25JZCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTU1BTkRfU1VDQ0VFREVEO1xuICAgICAgICBjb25zdCBjbWQgPSBleHRyYWN0Q29tbWFuZChjb21tYW5kKTtcbiAgICAgICAgY29uc3QgY29tbWFuZE5hbWUgPSBleHRyYWN0Q29tbWFuZE5hbWUoY21kKTtcbiAgICAgICAgY29uc3QgeyBhZGRyZXNzLCBjb25uZWN0aW9uSWQsIHNlcnZpY2VJZCB9ID0gZXh0cmFjdENvbm5lY3Rpb25EZXRhaWxzKGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgdGhpcy5zZXJ2aWNlSWQgPSBzZXJ2aWNlSWQ7XG4gICAgICAgIHRoaXMucmVxdWVzdElkID0gY29tbWFuZC5yZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMuY29tbWFuZE5hbWUgPSBjb21tYW5kTmFtZTtcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9ICgwLCB1dGlsc18xLmNhbGN1bGF0ZUR1cmF0aW9uSW5Ncykoc3RhcnRlZCk7XG4gICAgICAgIHRoaXMucmVwbHkgPSBtYXliZVJlZGFjdChjb21tYW5kTmFtZSwgY21kLCBleHRyYWN0UmVwbHkoY29tbWFuZCwgcmVwbHkpKTtcbiAgICAgICAgdGhpcy5zZXJ2ZXJDb25uZWN0aW9uSWQgPSBzZXJ2ZXJDb25uZWN0aW9uSWQ7XG4gICAgfVxuICAgIC8qIEBpbnRlcm5hbCAqL1xuICAgIGdldCBoYXNTZXJ2aWNlSWQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc2VydmljZUlkO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29tbWFuZFN1Y2NlZWRlZEV2ZW50ID0gQ29tbWFuZFN1Y2NlZWRlZEV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBpbmRpY2F0aW5nIHRoZSBmYWlsdXJlIG9mIGEgZ2l2ZW4gY29tbWFuZFxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIENvbW1hbmRGYWlsZWRFdmVudCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgZmFpbHVyZSBldmVudFxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHBvb2wgLSB0aGUgcG9vbCB0aGF0IG9yaWdpbmF0ZWQgdGhlIGNvbW1hbmRcbiAgICAgKiBAcGFyYW0gY29tbWFuZCAtIHRoZSBjb21tYW5kXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGdlbmVyYXRlZCBlcnJvciBvciBhIHNlcnZlciBlcnJvciByZXNwb25zZVxuICAgICAqIEBwYXJhbSBzdGFydGVkIC0gYSBoaWdoIHJlc29sdXRpb24gdHVwbGUgdGltZXN0YW1wIG9mIHdoZW4gdGhlIGNvbW1hbmQgd2FzIGZpcnN0IHNlbnQsIHRvIGNhbGN1bGF0ZSBkdXJhdGlvblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb24sIGNvbW1hbmQsIGVycm9yLCBzdGFydGVkLCBzZXJ2ZXJDb25uZWN0aW9uSWQpIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5DT01NQU5EX0ZBSUxFRDtcbiAgICAgICAgY29uc3QgY21kID0gZXh0cmFjdENvbW1hbmQoY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IGNvbW1hbmROYW1lID0gZXh0cmFjdENvbW1hbmROYW1lKGNtZCk7XG4gICAgICAgIGNvbnN0IHsgYWRkcmVzcywgY29ubmVjdGlvbklkLCBzZXJ2aWNlSWQgfSA9IGV4dHJhY3RDb25uZWN0aW9uRGV0YWlscyhjb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMuc2VydmljZUlkID0gc2VydmljZUlkO1xuICAgICAgICB0aGlzLnJlcXVlc3RJZCA9IGNvbW1hbmQucmVxdWVzdElkO1xuICAgICAgICB0aGlzLmNvbW1hbmROYW1lID0gY29tbWFuZE5hbWU7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSAoMCwgdXRpbHNfMS5jYWxjdWxhdGVEdXJhdGlvbkluTXMpKHN0YXJ0ZWQpO1xuICAgICAgICB0aGlzLmZhaWx1cmUgPSBtYXliZVJlZGFjdChjb21tYW5kTmFtZSwgY21kLCBlcnJvcik7XG4gICAgICAgIHRoaXMuc2VydmVyQ29ubmVjdGlvbklkID0gc2VydmVyQ29ubmVjdGlvbklkO1xuICAgIH1cbiAgICAvKiBAaW50ZXJuYWwgKi9cbiAgICBnZXQgaGFzU2VydmljZUlkKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnNlcnZpY2VJZDtcbiAgICB9XG59XG5leHBvcnRzLkNvbW1hbmRGYWlsZWRFdmVudCA9IENvbW1hbmRGYWlsZWRFdmVudDtcbi8qKlxuICogQ29tbWFuZHMgdGhhdCB3ZSB3YW50IHRvIHJlZGFjdCBiZWNhdXNlIG9mIHRoZSBzZW5zaXRpdmUgbmF0dXJlIG9mIHRoZWlyIGNvbnRlbnRzXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0cy5TRU5TSVRJVkVfQ09NTUFORFMgPSBuZXcgU2V0KFtcbiAgICAnYXV0aGVudGljYXRlJyxcbiAgICAnc2FzbFN0YXJ0JyxcbiAgICAnc2FzbENvbnRpbnVlJyxcbiAgICAnZ2V0bm9uY2UnLFxuICAgICdjcmVhdGVVc2VyJyxcbiAgICAndXBkYXRlVXNlcicsXG4gICAgJ2NvcHlkYmdldG5vbmNlJyxcbiAgICAnY29weWRic2FzbHN0YXJ0JyxcbiAgICAnY29weWRiJ1xuXSk7XG5jb25zdCBIRUxMT19DT01NQU5EUyA9IG5ldyBTZXQoWydoZWxsbycsIGNvbnN0YW50c18xLkxFR0FDWV9IRUxMT19DT01NQU5ELCBjb25zdGFudHNfMS5MRUdBQ1lfSEVMTE9fQ09NTUFORF9DQU1FTF9DQVNFXSk7XG4vLyBoZWxwZXIgbWV0aG9kc1xuY29uc3QgZXh0cmFjdENvbW1hbmROYW1lID0gKGNvbW1hbmREb2MpID0+IE9iamVjdC5rZXlzKGNvbW1hbmREb2MpWzBdO1xuY29uc3QgbmFtZXNwYWNlID0gKGNvbW1hbmQpID0+IGNvbW1hbmQubnM7XG5jb25zdCBjb2xsZWN0aW9uTmFtZSA9IChjb21tYW5kKSA9PiBjb21tYW5kLm5zLnNwbGl0KCcuJylbMV07XG5jb25zdCBtYXliZVJlZGFjdCA9IChjb21tYW5kTmFtZSwgY29tbWFuZERvYywgcmVzdWx0KSA9PiBleHBvcnRzLlNFTlNJVElWRV9DT01NQU5EUy5oYXMoY29tbWFuZE5hbWUpIHx8XG4gICAgKEhFTExPX0NPTU1BTkRTLmhhcyhjb21tYW5kTmFtZSkgJiYgY29tbWFuZERvYy5zcGVjdWxhdGl2ZUF1dGhlbnRpY2F0ZSlcbiAgICA/IHt9XG4gICAgOiByZXN1bHQ7XG5jb25zdCBMRUdBQ1lfRklORF9RVUVSWV9NQVAgPSB7XG4gICAgJHF1ZXJ5OiAnZmlsdGVyJyxcbiAgICAkb3JkZXJieTogJ3NvcnQnLFxuICAgICRoaW50OiAnaGludCcsXG4gICAgJGNvbW1lbnQ6ICdjb21tZW50JyxcbiAgICAkbWF4U2NhbjogJ21heFNjYW4nLFxuICAgICRtYXg6ICdtYXgnLFxuICAgICRtaW46ICdtaW4nLFxuICAgICRyZXR1cm5LZXk6ICdyZXR1cm5LZXknLFxuICAgICRzaG93RGlza0xvYzogJ3Nob3dSZWNvcmRJZCcsXG4gICAgJG1heFRpbWVNUzogJ21heFRpbWVNUycsXG4gICAgJHNuYXBzaG90OiAnc25hcHNob3QnXG59O1xuY29uc3QgTEVHQUNZX0ZJTkRfT1BUSU9OU19NQVAgPSB7XG4gICAgbnVtYmVyVG9Ta2lwOiAnc2tpcCcsXG4gICAgbnVtYmVyVG9SZXR1cm46ICdiYXRjaFNpemUnLFxuICAgIHJldHVybkZpZWxkU2VsZWN0b3I6ICdwcm9qZWN0aW9uJ1xufTtcbmNvbnN0IE9QX1FVRVJZX0tFWVMgPSBbXG4gICAgJ3RhaWxhYmxlJyxcbiAgICAnb3Bsb2dSZXBsYXknLFxuICAgICdub0N1cnNvclRpbWVvdXQnLFxuICAgICdhd2FpdERhdGEnLFxuICAgICdwYXJ0aWFsJyxcbiAgICAnZXhoYXVzdCdcbl07XG4vKiogRXh0cmFjdCB0aGUgYWN0dWFsIGNvbW1hbmQgZnJvbSB0aGUgcXVlcnksIHBvc3NpYmx5IHVwLWNvbnZlcnRpbmcgaWYgaXQncyBhIGxlZ2FjeSBmb3JtYXQgKi9cbmZ1bmN0aW9uIGV4dHJhY3RDb21tYW5kKGNvbW1hbmQpIHtcbiAgICBpZiAoY29tbWFuZCBpbnN0YW5jZW9mIGNvbW1hbmRzXzEuT3BNc2dSZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS5kZWVwQ29weSkoY29tbWFuZC5jb21tYW5kKTtcbiAgICB9XG4gICAgaWYgKGNvbW1hbmQucXVlcnk/LiRxdWVyeSkge1xuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBpZiAoY29tbWFuZC5ucyA9PT0gJ2FkbWluLiRjbWQnKSB7XG4gICAgICAgICAgICAvLyB1cC1jb252ZXJ0IGxlZ2FjeSBjb21tYW5kXG4gICAgICAgICAgICByZXN1bHQgPSBPYmplY3QuYXNzaWduKHt9LCBjb21tYW5kLnF1ZXJ5LiRxdWVyeSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB1cC1jb252ZXJ0IGxlZ2FjeSBmaW5kIGNvbW1hbmRcbiAgICAgICAgICAgIHJlc3VsdCA9IHsgZmluZDogY29sbGVjdGlvbk5hbWUoY29tbWFuZCkgfTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKExFR0FDWV9GSU5EX1FVRVJZX01BUCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb21tYW5kLnF1ZXJ5W2tleV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbTEVHQUNZX0ZJTkRfUVVFUllfTUFQW2tleV1dID0gKDAsIHV0aWxzXzEuZGVlcENvcHkpKGNvbW1hbmQucXVlcnlba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmtleXMoTEVHQUNZX0ZJTkRfT1BUSU9OU19NQVApLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxlZ2FjeUtleSA9IGtleTtcbiAgICAgICAgICAgIGlmIChjb21tYW5kW2xlZ2FjeUtleV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtMRUdBQ1lfRklORF9PUFRJT05TX01BUFtsZWdhY3lLZXldXSA9ICgwLCB1dGlsc18xLmRlZXBDb3B5KShjb21tYW5kW2xlZ2FjeUtleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT1BfUVVFUllfS0VZUy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBpZiAoY29tbWFuZFtrZXldKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBjb21tYW5kW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29tbWFuZC5wcmUzMkxpbWl0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJlc3VsdC5saW1pdCA9IGNvbW1hbmQucHJlMzJMaW1pdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tbWFuZC5xdWVyeS4kZXhwbGFpbikge1xuICAgICAgICAgICAgcmV0dXJuIHsgZXhwbGFpbjogcmVzdWx0IH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgY2xvbmVkUXVlcnkgPSB7fTtcbiAgICBjb25zdCBjbG9uZWRDb21tYW5kID0ge307XG4gICAgaWYgKGNvbW1hbmQucXVlcnkpIHtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIGNvbW1hbmQucXVlcnkpIHtcbiAgICAgICAgICAgIGNsb25lZFF1ZXJ5W2tdID0gKDAsIHV0aWxzXzEuZGVlcENvcHkpKGNvbW1hbmQucXVlcnlba10pO1xuICAgICAgICB9XG4gICAgICAgIGNsb25lZENvbW1hbmQucXVlcnkgPSBjbG9uZWRRdWVyeTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrIGluIGNvbW1hbmQpIHtcbiAgICAgICAgaWYgKGsgPT09ICdxdWVyeScpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY2xvbmVkQ29tbWFuZFtrXSA9ICgwLCB1dGlsc18xLmRlZXBDb3B5KShjb21tYW5kW2tdKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbW1hbmQucXVlcnkgPyBjbG9uZWRRdWVyeSA6IGNsb25lZENvbW1hbmQ7XG59XG5mdW5jdGlvbiBleHRyYWN0UmVwbHkoY29tbWFuZCwgcmVwbHkpIHtcbiAgICBpZiAoIXJlcGx5KSB7XG4gICAgICAgIHJldHVybiByZXBseTtcbiAgICB9XG4gICAgaWYgKGNvbW1hbmQgaW5zdGFuY2VvZiBjb21tYW5kc18xLk9wTXNnUmVxdWVzdCkge1xuICAgICAgICByZXR1cm4gKDAsIHV0aWxzXzEuZGVlcENvcHkpKHJlcGx5LnJlc3VsdCA/IHJlcGx5LnJlc3VsdCA6IHJlcGx5KTtcbiAgICB9XG4gICAgLy8gaXMgdGhpcyBhIGxlZ2FjeSBmaW5kIGNvbW1hbmQ/XG4gICAgaWYgKGNvbW1hbmQucXVlcnkgJiYgY29tbWFuZC5xdWVyeS4kcXVlcnkgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2s6IDEsXG4gICAgICAgICAgICBjdXJzb3I6IHtcbiAgICAgICAgICAgICAgICBpZDogKDAsIHV0aWxzXzEuZGVlcENvcHkpKHJlcGx5LmN1cnNvcklkKSxcbiAgICAgICAgICAgICAgICBuczogbmFtZXNwYWNlKGNvbW1hbmQpLFxuICAgICAgICAgICAgICAgIGZpcnN0QmF0Y2g6ICgwLCB1dGlsc18xLmRlZXBDb3B5KShyZXBseS5kb2N1bWVudHMpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiAoMCwgdXRpbHNfMS5kZWVwQ29weSkocmVwbHkucmVzdWx0ID8gcmVwbHkucmVzdWx0IDogcmVwbHkpO1xufVxuZnVuY3Rpb24gZXh0cmFjdENvbm5lY3Rpb25EZXRhaWxzKGNvbm5lY3Rpb24pIHtcbiAgICBsZXQgY29ubmVjdGlvbklkO1xuICAgIGlmICgnaWQnIGluIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29ubmVjdGlvbklkID0gY29ubmVjdGlvbi5pZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkcmVzczogY29ubmVjdGlvbi5hZGRyZXNzLFxuICAgICAgICBzZXJ2aWNlSWQ6IGNvbm5lY3Rpb24uc2VydmljZUlkLFxuICAgICAgICBjb25uZWN0aW9uSWRcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbWFuZF9tb25pdG9yaW5nX2V2ZW50cy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTRU5TSVRJVkVfQ09NTUFORFMiLCJDb21tYW5kRmFpbGVkRXZlbnQiLCJDb21tYW5kU3VjY2VlZGVkRXZlbnQiLCJDb21tYW5kU3RhcnRlZEV2ZW50IiwiY29uc3RhbnRzXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsImNvbW1hbmRzXzEiLCJjb25zdHJ1Y3RvciIsImNvbm5lY3Rpb24iLCJjb21tYW5kIiwic2VydmVyQ29ubmVjdGlvbklkIiwibmFtZSIsIkNPTU1BTkRfU1RBUlRFRCIsImNtZCIsImV4dHJhY3RDb21tYW5kIiwiY29tbWFuZE5hbWUiLCJleHRyYWN0Q29tbWFuZE5hbWUiLCJhZGRyZXNzIiwiY29ubmVjdGlvbklkIiwic2VydmljZUlkIiwiZXh0cmFjdENvbm5lY3Rpb25EZXRhaWxzIiwiaGFzIiwiY29tbWFuZE9iaiIsInJlcXVlc3RJZCIsImRhdGFiYXNlTmFtZSIsIm1heWJlUmVkYWN0IiwiaGFzU2VydmljZUlkIiwicmVwbHkiLCJzdGFydGVkIiwiQ09NTUFORF9TVUNDRUVERUQiLCJkdXJhdGlvbiIsImNhbGN1bGF0ZUR1cmF0aW9uSW5NcyIsImV4dHJhY3RSZXBseSIsImVycm9yIiwiQ09NTUFORF9GQUlMRUQiLCJmYWlsdXJlIiwiU2V0IiwiSEVMTE9fQ09NTUFORFMiLCJMRUdBQ1lfSEVMTE9fQ09NTUFORCIsIkxFR0FDWV9IRUxMT19DT01NQU5EX0NBTUVMX0NBU0UiLCJjb21tYW5kRG9jIiwia2V5cyIsIm5hbWVzcGFjZSIsIm5zIiwiY29sbGVjdGlvbk5hbWUiLCJzcGxpdCIsInJlc3VsdCIsInNwZWN1bGF0aXZlQXV0aGVudGljYXRlIiwiTEVHQUNZX0ZJTkRfUVVFUllfTUFQIiwiJHF1ZXJ5IiwiJG9yZGVyYnkiLCIkaGludCIsIiRjb21tZW50IiwiJG1heFNjYW4iLCIkbWF4IiwiJG1pbiIsIiRyZXR1cm5LZXkiLCIkc2hvd0Rpc2tMb2MiLCIkbWF4VGltZU1TIiwiJHNuYXBzaG90IiwiTEVHQUNZX0ZJTkRfT1BUSU9OU19NQVAiLCJudW1iZXJUb1NraXAiLCJudW1iZXJUb1JldHVybiIsInJldHVybkZpZWxkU2VsZWN0b3IiLCJPUF9RVUVSWV9LRVlTIiwiT3BNc2dSZXF1ZXN0IiwiZGVlcENvcHkiLCJxdWVyeSIsImFzc2lnbiIsImZpbmQiLCJmb3JFYWNoIiwia2V5IiwibGVnYWN5S2V5IiwicHJlMzJMaW1pdCIsImxpbWl0IiwiJGV4cGxhaW4iLCJleHBsYWluIiwiY2xvbmVkUXVlcnkiLCJjbG9uZWRDb21tYW5kIiwiayIsIm9rIiwiY3Vyc29yIiwiaWQiLCJjdXJzb3JJZCIsImZpcnN0QmF0Y2giLCJkb2N1bWVudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/command_monitoring_events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/commands.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/commands.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.OpCompressedRequest = exports.OpMsgResponse = exports.OpMsgRequest = exports.OpQueryResponse = exports.OpQueryRequest = void 0;\nconst BSON = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst compression_1 = __webpack_require__(/*! ./wire_protocol/compression */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js\");\nconst constants_1 = __webpack_require__(/*! ./wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\n// Incrementing request id\nlet _requestId = 0;\n// Query flags\nconst OPTS_TAILABLE_CURSOR = 2;\nconst OPTS_SECONDARY = 4;\nconst OPTS_OPLOG_REPLAY = 8;\nconst OPTS_NO_CURSOR_TIMEOUT = 16;\nconst OPTS_AWAIT_DATA = 32;\nconst OPTS_EXHAUST = 64;\nconst OPTS_PARTIAL = 128;\n// Response flags\nconst CURSOR_NOT_FOUND = 1;\nconst QUERY_FAILURE = 2;\nconst SHARD_CONFIG_STALE = 4;\nconst AWAIT_CAPABLE = 8;\n/**************************************************************\n * QUERY\n **************************************************************/ /** @internal */ class OpQueryRequest {\n    constructor(databaseName, query, options){\n        this.databaseName = databaseName;\n        this.query = query;\n        // Basic options needed to be passed in\n        // TODO(NODE-3483): Replace with MongoCommandError\n        const ns = `${databaseName}.$cmd`;\n        if (typeof databaseName !== \"string\") {\n            throw new error_1.MongoRuntimeError(\"Database name must be a string for a query\");\n        }\n        // TODO(NODE-3483): Replace with MongoCommandError\n        if (query == null) throw new error_1.MongoRuntimeError(\"A query document must be specified for query\");\n        // Validate that we are not passing 0x00 in the collection name\n        if (ns.indexOf(\"\\x00\") !== -1) {\n            // TODO(NODE-3483): Use MongoNamespace static method\n            throw new error_1.MongoRuntimeError(\"Namespace cannot contain a null character\");\n        }\n        // Basic options\n        this.ns = ns;\n        // Additional options\n        this.numberToSkip = options.numberToSkip || 0;\n        this.numberToReturn = options.numberToReturn || 0;\n        this.returnFieldSelector = options.returnFieldSelector || undefined;\n        this.requestId = options.requestId ?? OpQueryRequest.getRequestId();\n        // special case for pre-3.2 find commands, delete ASAP\n        this.pre32Limit = options.pre32Limit;\n        // Serialization option\n        this.serializeFunctions = typeof options.serializeFunctions === \"boolean\" ? options.serializeFunctions : false;\n        this.ignoreUndefined = typeof options.ignoreUndefined === \"boolean\" ? options.ignoreUndefined : false;\n        this.maxBsonSize = options.maxBsonSize || 1024 * 1024 * 16;\n        this.checkKeys = typeof options.checkKeys === \"boolean\" ? options.checkKeys : false;\n        this.batchSize = this.numberToReturn;\n        // Flags\n        this.tailable = false;\n        this.secondaryOk = typeof options.secondaryOk === \"boolean\" ? options.secondaryOk : false;\n        this.oplogReplay = false;\n        this.noCursorTimeout = false;\n        this.awaitData = false;\n        this.exhaust = false;\n        this.partial = false;\n    }\n    /** Assign next request Id. */ incRequestId() {\n        this.requestId = _requestId++;\n    }\n    /** Peek next request Id. */ nextRequestId() {\n        return _requestId + 1;\n    }\n    /** Increment then return next request Id. */ static getRequestId() {\n        return ++_requestId;\n    }\n    // Uses a single allocated buffer for the process, avoiding multiple memory allocations\n    toBin() {\n        const buffers = [];\n        let projection = null;\n        // Set up the flags\n        let flags = 0;\n        if (this.tailable) {\n            flags |= OPTS_TAILABLE_CURSOR;\n        }\n        if (this.secondaryOk) {\n            flags |= OPTS_SECONDARY;\n        }\n        if (this.oplogReplay) {\n            flags |= OPTS_OPLOG_REPLAY;\n        }\n        if (this.noCursorTimeout) {\n            flags |= OPTS_NO_CURSOR_TIMEOUT;\n        }\n        if (this.awaitData) {\n            flags |= OPTS_AWAIT_DATA;\n        }\n        if (this.exhaust) {\n            flags |= OPTS_EXHAUST;\n        }\n        if (this.partial) {\n            flags |= OPTS_PARTIAL;\n        }\n        // If batchSize is different to this.numberToReturn\n        if (this.batchSize !== this.numberToReturn) this.numberToReturn = this.batchSize;\n        // Allocate write protocol header buffer\n        const header = Buffer.alloc(4 * 4 + // Header\n        4 + // Flags\n        Buffer.byteLength(this.ns) + 1 + // namespace\n        4 + // numberToSkip\n        4 // numberToReturn\n        );\n        // Add header to buffers\n        buffers.push(header);\n        // Serialize the query\n        const query = BSON.serialize(this.query, {\n            checkKeys: this.checkKeys,\n            serializeFunctions: this.serializeFunctions,\n            ignoreUndefined: this.ignoreUndefined\n        });\n        // Add query document\n        buffers.push(query);\n        if (this.returnFieldSelector && Object.keys(this.returnFieldSelector).length > 0) {\n            // Serialize the projection document\n            projection = BSON.serialize(this.returnFieldSelector, {\n                checkKeys: this.checkKeys,\n                serializeFunctions: this.serializeFunctions,\n                ignoreUndefined: this.ignoreUndefined\n            });\n            // Add projection document\n            buffers.push(projection);\n        }\n        // Total message size\n        const totalLength = header.length + query.length + (projection ? projection.length : 0);\n        // Set up the index\n        let index = 4;\n        // Write total document length\n        header[3] = totalLength >> 24 & 0xff;\n        header[2] = totalLength >> 16 & 0xff;\n        header[1] = totalLength >> 8 & 0xff;\n        header[0] = totalLength & 0xff;\n        // Write header information requestId\n        header[index + 3] = this.requestId >> 24 & 0xff;\n        header[index + 2] = this.requestId >> 16 & 0xff;\n        header[index + 1] = this.requestId >> 8 & 0xff;\n        header[index] = this.requestId & 0xff;\n        index = index + 4;\n        // Write header information responseTo\n        header[index + 3] = 0 >> 24 & 0xff;\n        header[index + 2] = 0 >> 16 & 0xff;\n        header[index + 1] = 0 >> 8 & 0xff;\n        header[index] = 0 & 0xff;\n        index = index + 4;\n        // Write header information OP_QUERY\n        header[index + 3] = constants_1.OP_QUERY >> 24 & 0xff;\n        header[index + 2] = constants_1.OP_QUERY >> 16 & 0xff;\n        header[index + 1] = constants_1.OP_QUERY >> 8 & 0xff;\n        header[index] = constants_1.OP_QUERY & 0xff;\n        index = index + 4;\n        // Write header information flags\n        header[index + 3] = flags >> 24 & 0xff;\n        header[index + 2] = flags >> 16 & 0xff;\n        header[index + 1] = flags >> 8 & 0xff;\n        header[index] = flags & 0xff;\n        index = index + 4;\n        // Write collection name\n        index = index + header.write(this.ns, index, \"utf8\") + 1;\n        header[index - 1] = 0;\n        // Write header information flags numberToSkip\n        header[index + 3] = this.numberToSkip >> 24 & 0xff;\n        header[index + 2] = this.numberToSkip >> 16 & 0xff;\n        header[index + 1] = this.numberToSkip >> 8 & 0xff;\n        header[index] = this.numberToSkip & 0xff;\n        index = index + 4;\n        // Write header information flags numberToReturn\n        header[index + 3] = this.numberToReturn >> 24 & 0xff;\n        header[index + 2] = this.numberToReturn >> 16 & 0xff;\n        header[index + 1] = this.numberToReturn >> 8 & 0xff;\n        header[index] = this.numberToReturn & 0xff;\n        index = index + 4;\n        // Return the buffers\n        return buffers;\n    }\n}\nexports.OpQueryRequest = OpQueryRequest;\n/** @internal */ class OpQueryResponse {\n    constructor(message, msgHeader, msgBody, opts){\n        this.documents = new Array(0);\n        /** moreToCome is an OP_MSG only concept */ this.moreToCome = false;\n        this.parsed = false;\n        this.raw = message;\n        this.data = msgBody;\n        this.opts = opts ?? {\n            useBigInt64: false,\n            promoteLongs: true,\n            promoteValues: true,\n            promoteBuffers: false,\n            bsonRegExp: false\n        };\n        // Read the message header\n        this.length = msgHeader.length;\n        this.requestId = msgHeader.requestId;\n        this.responseTo = msgHeader.responseTo;\n        this.opCode = msgHeader.opCode;\n        this.fromCompressed = msgHeader.fromCompressed;\n        // Flag values\n        this.useBigInt64 = typeof this.opts.useBigInt64 === \"boolean\" ? this.opts.useBigInt64 : false;\n        this.promoteLongs = typeof this.opts.promoteLongs === \"boolean\" ? this.opts.promoteLongs : true;\n        this.promoteValues = typeof this.opts.promoteValues === \"boolean\" ? this.opts.promoteValues : true;\n        this.promoteBuffers = typeof this.opts.promoteBuffers === \"boolean\" ? this.opts.promoteBuffers : false;\n        this.bsonRegExp = typeof this.opts.bsonRegExp === \"boolean\" ? this.opts.bsonRegExp : false;\n    }\n    isParsed() {\n        return this.parsed;\n    }\n    parse(options) {\n        // Don't parse again if not needed\n        if (this.parsed) return;\n        options = options ?? {};\n        // Allow the return of raw documents instead of parsing\n        const raw = options.raw || false;\n        const documentsReturnedIn = options.documentsReturnedIn || null;\n        const useBigInt64 = options.useBigInt64 ?? this.opts.useBigInt64;\n        const promoteLongs = options.promoteLongs ?? this.opts.promoteLongs;\n        const promoteValues = options.promoteValues ?? this.opts.promoteValues;\n        const promoteBuffers = options.promoteBuffers ?? this.opts.promoteBuffers;\n        const bsonRegExp = options.bsonRegExp ?? this.opts.bsonRegExp;\n        let bsonSize;\n        // Set up the options\n        const _options = {\n            useBigInt64,\n            promoteLongs,\n            promoteValues,\n            promoteBuffers,\n            bsonRegExp\n        };\n        // Position within OP_REPLY at which documents start\n        // (See https://www.mongodb.com/docs/manual/reference/mongodb-wire-protocol/#wire-op-reply)\n        this.index = 20;\n        // Read the message body\n        this.responseFlags = this.data.readInt32LE(0);\n        this.cursorId = new BSON.Long(this.data.readInt32LE(4), this.data.readInt32LE(8));\n        this.startingFrom = this.data.readInt32LE(12);\n        this.numberReturned = this.data.readInt32LE(16);\n        // Preallocate document array\n        this.documents = new Array(this.numberReturned);\n        this.cursorNotFound = (this.responseFlags & CURSOR_NOT_FOUND) !== 0;\n        this.queryFailure = (this.responseFlags & QUERY_FAILURE) !== 0;\n        this.shardConfigStale = (this.responseFlags & SHARD_CONFIG_STALE) !== 0;\n        this.awaitCapable = (this.responseFlags & AWAIT_CAPABLE) !== 0;\n        // Parse Body\n        for(let i = 0; i < this.numberReturned; i++){\n            bsonSize = this.data[this.index] | this.data[this.index + 1] << 8 | this.data[this.index + 2] << 16 | this.data[this.index + 3] << 24;\n            // If we have raw results specified slice the return document\n            if (raw) {\n                this.documents[i] = this.data.slice(this.index, this.index + bsonSize);\n            } else {\n                this.documents[i] = BSON.deserialize(this.data.slice(this.index, this.index + bsonSize), _options);\n            }\n            // Adjust the index\n            this.index = this.index + bsonSize;\n        }\n        if (this.documents.length === 1 && documentsReturnedIn != null && raw) {\n            const fieldsAsRaw = {};\n            fieldsAsRaw[documentsReturnedIn] = true;\n            _options.fieldsAsRaw = fieldsAsRaw;\n            const doc = BSON.deserialize(this.documents[0], _options);\n            this.documents = [\n                doc\n            ];\n        }\n        // Set parsed\n        this.parsed = true;\n    }\n}\nexports.OpQueryResponse = OpQueryResponse;\n// Implementation of OP_MSG spec:\n// https://github.com/mongodb/specifications/blob/master/source/message/OP_MSG.rst\n//\n// struct Section {\n//   uint8 payloadType;\n//   union payload {\n//       document  document; // payloadType == 0\n//       struct sequence { // payloadType == 1\n//           int32      size;\n//           cstring    identifier;\n//           document*  documents;\n//       };\n//   };\n// };\n// struct OP_MSG {\n//   struct MsgHeader {\n//       int32  messageLength;\n//       int32  requestID;\n//       int32  responseTo;\n//       int32  opCode = 2013;\n//   };\n//   uint32      flagBits;\n//   Section+    sections;\n//   [uint32     checksum;]\n// };\n// Msg Flags\nconst OPTS_CHECKSUM_PRESENT = 1;\nconst OPTS_MORE_TO_COME = 2;\nconst OPTS_EXHAUST_ALLOWED = 1 << 16;\n/** @internal */ class OpMsgRequest {\n    constructor(databaseName, command, options){\n        this.databaseName = databaseName;\n        this.command = command;\n        this.options = options;\n        // Basic options needed to be passed in\n        if (command == null) throw new error_1.MongoInvalidArgumentError(\"Query document must be specified for query\");\n        // Basic options\n        this.command.$db = databaseName;\n        // Ensure empty options\n        this.options = options ?? {};\n        // Additional options\n        this.requestId = options.requestId ? options.requestId : OpMsgRequest.getRequestId();\n        // Serialization option\n        this.serializeFunctions = typeof options.serializeFunctions === \"boolean\" ? options.serializeFunctions : false;\n        this.ignoreUndefined = typeof options.ignoreUndefined === \"boolean\" ? options.ignoreUndefined : false;\n        this.checkKeys = typeof options.checkKeys === \"boolean\" ? options.checkKeys : false;\n        this.maxBsonSize = options.maxBsonSize || 1024 * 1024 * 16;\n        // flags\n        this.checksumPresent = false;\n        this.moreToCome = options.moreToCome || false;\n        this.exhaustAllowed = typeof options.exhaustAllowed === \"boolean\" ? options.exhaustAllowed : false;\n    }\n    toBin() {\n        const buffers = [];\n        let flags = 0;\n        if (this.checksumPresent) {\n            flags |= OPTS_CHECKSUM_PRESENT;\n        }\n        if (this.moreToCome) {\n            flags |= OPTS_MORE_TO_COME;\n        }\n        if (this.exhaustAllowed) {\n            flags |= OPTS_EXHAUST_ALLOWED;\n        }\n        const header = Buffer.alloc(4 * 4 + // Header\n        4 // Flags\n        );\n        buffers.push(header);\n        let totalLength = header.length;\n        const command = this.command;\n        totalLength += this.makeDocumentSegment(buffers, command);\n        header.writeInt32LE(totalLength, 0); // messageLength\n        header.writeInt32LE(this.requestId, 4); // requestID\n        header.writeInt32LE(0, 8); // responseTo\n        header.writeInt32LE(constants_1.OP_MSG, 12); // opCode\n        header.writeUInt32LE(flags, 16); // flags\n        return buffers;\n    }\n    makeDocumentSegment(buffers, document) {\n        const payloadTypeBuffer = Buffer.alloc(1);\n        payloadTypeBuffer[0] = 0;\n        const documentBuffer = this.serializeBson(document);\n        buffers.push(payloadTypeBuffer);\n        buffers.push(documentBuffer);\n        return payloadTypeBuffer.length + documentBuffer.length;\n    }\n    serializeBson(document) {\n        return BSON.serialize(document, {\n            checkKeys: this.checkKeys,\n            serializeFunctions: this.serializeFunctions,\n            ignoreUndefined: this.ignoreUndefined\n        });\n    }\n    static getRequestId() {\n        _requestId = _requestId + 1 & 0x7fffffff;\n        return _requestId;\n    }\n}\nexports.OpMsgRequest = OpMsgRequest;\n/** @internal */ class OpMsgResponse {\n    constructor(message, msgHeader, msgBody, opts){\n        this.parsed = false;\n        this.raw = message;\n        this.data = msgBody;\n        this.opts = opts ?? {\n            useBigInt64: false,\n            promoteLongs: true,\n            promoteValues: true,\n            promoteBuffers: false,\n            bsonRegExp: false\n        };\n        // Read the message header\n        this.length = msgHeader.length;\n        this.requestId = msgHeader.requestId;\n        this.responseTo = msgHeader.responseTo;\n        this.opCode = msgHeader.opCode;\n        this.fromCompressed = msgHeader.fromCompressed;\n        // Read response flags\n        this.responseFlags = msgBody.readInt32LE(0);\n        this.checksumPresent = (this.responseFlags & OPTS_CHECKSUM_PRESENT) !== 0;\n        this.moreToCome = (this.responseFlags & OPTS_MORE_TO_COME) !== 0;\n        this.exhaustAllowed = (this.responseFlags & OPTS_EXHAUST_ALLOWED) !== 0;\n        this.useBigInt64 = typeof this.opts.useBigInt64 === \"boolean\" ? this.opts.useBigInt64 : false;\n        this.promoteLongs = typeof this.opts.promoteLongs === \"boolean\" ? this.opts.promoteLongs : true;\n        this.promoteValues = typeof this.opts.promoteValues === \"boolean\" ? this.opts.promoteValues : true;\n        this.promoteBuffers = typeof this.opts.promoteBuffers === \"boolean\" ? this.opts.promoteBuffers : false;\n        this.bsonRegExp = typeof this.opts.bsonRegExp === \"boolean\" ? this.opts.bsonRegExp : false;\n        this.documents = [];\n    }\n    isParsed() {\n        return this.parsed;\n    }\n    parse(options) {\n        // Don't parse again if not needed\n        if (this.parsed) return;\n        options = options ?? {};\n        this.index = 4;\n        // Allow the return of raw documents instead of parsing\n        const raw = options.raw || false;\n        const documentsReturnedIn = options.documentsReturnedIn || null;\n        const useBigInt64 = options.useBigInt64 ?? this.opts.useBigInt64;\n        const promoteLongs = options.promoteLongs ?? this.opts.promoteLongs;\n        const promoteValues = options.promoteValues ?? this.opts.promoteValues;\n        const promoteBuffers = options.promoteBuffers ?? this.opts.promoteBuffers;\n        const bsonRegExp = options.bsonRegExp ?? this.opts.bsonRegExp;\n        const validation = this.parseBsonSerializationOptions(options);\n        // Set up the options\n        const bsonOptions = {\n            useBigInt64,\n            promoteLongs,\n            promoteValues,\n            promoteBuffers,\n            bsonRegExp,\n            validation\n        };\n        while(this.index < this.data.length){\n            const payloadType = this.data.readUInt8(this.index++);\n            if (payloadType === 0) {\n                const bsonSize = this.data.readUInt32LE(this.index);\n                const bin = this.data.slice(this.index, this.index + bsonSize);\n                this.documents.push(raw ? bin : BSON.deserialize(bin, bsonOptions));\n                this.index += bsonSize;\n            } else if (payloadType === 1) {\n                // It was decided that no driver makes use of payload type 1\n                // TODO(NODE-3483): Replace with MongoDeprecationError\n                throw new error_1.MongoRuntimeError(\"OP_MSG Payload Type 1 detected unsupported protocol\");\n            }\n        }\n        if (this.documents.length === 1 && documentsReturnedIn != null && raw) {\n            const fieldsAsRaw = {};\n            fieldsAsRaw[documentsReturnedIn] = true;\n            bsonOptions.fieldsAsRaw = fieldsAsRaw;\n            const doc = BSON.deserialize(this.documents[0], bsonOptions);\n            this.documents = [\n                doc\n            ];\n        }\n        this.parsed = true;\n    }\n    parseBsonSerializationOptions({ enableUtf8Validation }) {\n        if (enableUtf8Validation === false) {\n            return {\n                utf8: false\n            };\n        }\n        return {\n            utf8: {\n                writeErrors: false\n            }\n        };\n    }\n}\nexports.OpMsgResponse = OpMsgResponse;\nconst MESSAGE_HEADER_SIZE = 16;\nconst COMPRESSION_DETAILS_SIZE = 9; // originalOpcode + uncompressedSize, compressorID\n/**\n * @internal\n *\n * An OP_COMPRESSED request wraps either an OP_QUERY or OP_MSG message.\n */ class OpCompressedRequest {\n    constructor(command, options){\n        this.command = command;\n        this.options = options;\n    }\n    // Return whether a command contains an uncompressible command term\n    // Will return true if command contains no uncompressible command terms\n    static canCompress(command) {\n        const commandDoc = command instanceof OpMsgRequest ? command.command : command.query;\n        const commandName = Object.keys(commandDoc)[0];\n        return !compression_1.uncompressibleCommands.has(commandName);\n    }\n    async toBin() {\n        const concatenatedOriginalCommandBuffer = Buffer.concat(this.command.toBin());\n        // otherwise, compress the message\n        const messageToBeCompressed = concatenatedOriginalCommandBuffer.slice(MESSAGE_HEADER_SIZE);\n        // Extract information needed for OP_COMPRESSED from the uncompressed message\n        const originalCommandOpCode = concatenatedOriginalCommandBuffer.readInt32LE(12);\n        // Compress the message body\n        const compressedMessage = await (0, compression_1.compress)(this.options, messageToBeCompressed);\n        // Create the msgHeader of OP_COMPRESSED\n        const msgHeader = Buffer.alloc(MESSAGE_HEADER_SIZE);\n        msgHeader.writeInt32LE(MESSAGE_HEADER_SIZE + COMPRESSION_DETAILS_SIZE + compressedMessage.length, 0); // messageLength\n        msgHeader.writeInt32LE(this.command.requestId, 4); // requestID\n        msgHeader.writeInt32LE(0, 8); // responseTo (zero)\n        msgHeader.writeInt32LE(constants_1.OP_COMPRESSED, 12); // opCode\n        // Create the compression details of OP_COMPRESSED\n        const compressionDetails = Buffer.alloc(COMPRESSION_DETAILS_SIZE);\n        compressionDetails.writeInt32LE(originalCommandOpCode, 0); // originalOpcode\n        compressionDetails.writeInt32LE(messageToBeCompressed.length, 4); // Size of the uncompressed compressedMessage, excluding the MsgHeader\n        compressionDetails.writeUInt8(compression_1.Compressor[this.options.agreedCompressor], 8); // compressorID\n        return [\n            msgHeader,\n            compressionDetails,\n            compressedMessage\n        ];\n    }\n}\nexports.OpCompressedRequest = OpCompressedRequest; //# sourceMappingURL=commands.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb21tYW5kcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkJBQTJCLEdBQUdBLHFCQUFxQixHQUFHQSxvQkFBb0IsR0FBR0EsdUJBQXVCLEdBQUdBLHNCQUFzQixHQUFHLEtBQUs7QUFDckksTUFBTU8sT0FBT0MsbUJBQU9BLENBQUMseURBQVM7QUFDOUIsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUUsZ0JBQWdCRixtQkFBT0EsQ0FBQyx1R0FBNkI7QUFDM0QsTUFBTUcsY0FBY0gsbUJBQU9BLENBQUMsbUdBQTJCO0FBQ3ZELDBCQUEwQjtBQUMxQixJQUFJSSxhQUFhO0FBQ2pCLGNBQWM7QUFDZCxNQUFNQyx1QkFBdUI7QUFDN0IsTUFBTUMsaUJBQWlCO0FBQ3ZCLE1BQU1DLG9CQUFvQjtBQUMxQixNQUFNQyx5QkFBeUI7QUFDL0IsTUFBTUMsa0JBQWtCO0FBQ3hCLE1BQU1DLGVBQWU7QUFDckIsTUFBTUMsZUFBZTtBQUNyQixpQkFBaUI7QUFDakIsTUFBTUMsbUJBQW1CO0FBQ3pCLE1BQU1DLGdCQUFnQjtBQUN0QixNQUFNQyxxQkFBcUI7QUFDM0IsTUFBTUMsZ0JBQWdCO0FBQ3RCOzs4REFFOEQsR0FDOUQsY0FBYyxHQUNkLE1BQU1qQjtJQUNGa0IsWUFBWUMsWUFBWSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sQ0FBRTtRQUN0QyxJQUFJLENBQUNGLFlBQVksR0FBR0E7UUFDcEIsSUFBSSxDQUFDQyxLQUFLLEdBQUdBO1FBQ2IsdUNBQXVDO1FBQ3ZDLGtEQUFrRDtRQUNsRCxNQUFNRSxLQUFLLENBQUMsRUFBRUgsYUFBYSxLQUFLLENBQUM7UUFDakMsSUFBSSxPQUFPQSxpQkFBaUIsVUFBVTtZQUNsQyxNQUFNLElBQUloQixRQUFRb0IsaUJBQWlCLENBQUM7UUFDeEM7UUFDQSxrREFBa0Q7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QUEyQixHQUFHRSxxQkFDOUIsb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2NvbW1hbmRzLmpzPzVmMTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk9wQ29tcHJlc3NlZFJlcXVlc3QgPSBleHBvcnRzLk9wTXNnUmVzcG9uc2UgPSBleHBvcnRzLk9wTXNnUmVxdWVzdCA9IGV4cG9ydHMuT3BRdWVyeVJlc3BvbnNlID0gZXhwb3J0cy5PcFF1ZXJ5UmVxdWVzdCA9IHZvaWQgMDtcbmNvbnN0IEJTT04gPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBjb21wcmVzc2lvbl8xID0gcmVxdWlyZShcIi4vd2lyZV9wcm90b2NvbC9jb21wcmVzc2lvblwiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vd2lyZV9wcm90b2NvbC9jb25zdGFudHNcIik7XG4vLyBJbmNyZW1lbnRpbmcgcmVxdWVzdCBpZFxubGV0IF9yZXF1ZXN0SWQgPSAwO1xuLy8gUXVlcnkgZmxhZ3NcbmNvbnN0IE9QVFNfVEFJTEFCTEVfQ1VSU09SID0gMjtcbmNvbnN0IE9QVFNfU0VDT05EQVJZID0gNDtcbmNvbnN0IE9QVFNfT1BMT0dfUkVQTEFZID0gODtcbmNvbnN0IE9QVFNfTk9fQ1VSU09SX1RJTUVPVVQgPSAxNjtcbmNvbnN0IE9QVFNfQVdBSVRfREFUQSA9IDMyO1xuY29uc3QgT1BUU19FWEhBVVNUID0gNjQ7XG5jb25zdCBPUFRTX1BBUlRJQUwgPSAxMjg7XG4vLyBSZXNwb25zZSBmbGFnc1xuY29uc3QgQ1VSU09SX05PVF9GT1VORCA9IDE7XG5jb25zdCBRVUVSWV9GQUlMVVJFID0gMjtcbmNvbnN0IFNIQVJEX0NPTkZJR19TVEFMRSA9IDQ7XG5jb25zdCBBV0FJVF9DQVBBQkxFID0gODtcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogUVVFUllcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIE9wUXVlcnlSZXF1ZXN0IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhYmFzZU5hbWUsIHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VOYW1lID0gZGF0YWJhc2VOYW1lO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgIC8vIEJhc2ljIG9wdGlvbnMgbmVlZGVkIHRvIGJlIHBhc3NlZCBpblxuICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IFJlcGxhY2Ugd2l0aCBNb25nb0NvbW1hbmRFcnJvclxuICAgICAgICBjb25zdCBucyA9IGAke2RhdGFiYXNlTmFtZX0uJGNtZGA7XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YWJhc2VOYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0RhdGFiYXNlIG5hbWUgbXVzdCBiZSBhIHN0cmluZyBmb3IgYSBxdWVyeScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogUmVwbGFjZSB3aXRoIE1vbmdvQ29tbWFuZEVycm9yXG4gICAgICAgIGlmIChxdWVyeSA9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0EgcXVlcnkgZG9jdW1lbnQgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIHF1ZXJ5Jyk7XG4gICAgICAgIC8vIFZhbGlkYXRlIHRoYXQgd2UgYXJlIG5vdCBwYXNzaW5nIDB4MDAgaW4gdGhlIGNvbGxlY3Rpb24gbmFtZVxuICAgICAgICBpZiAobnMuaW5kZXhPZignXFx4MDAnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogVXNlIE1vbmdvTmFtZXNwYWNlIHN0YXRpYyBtZXRob2RcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdOYW1lc3BhY2UgY2Fubm90IGNvbnRhaW4gYSBudWxsIGNoYXJhY3RlcicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJhc2ljIG9wdGlvbnNcbiAgICAgICAgdGhpcy5ucyA9IG5zO1xuICAgICAgICAvLyBBZGRpdGlvbmFsIG9wdGlvbnNcbiAgICAgICAgdGhpcy5udW1iZXJUb1NraXAgPSBvcHRpb25zLm51bWJlclRvU2tpcCB8fCAwO1xuICAgICAgICB0aGlzLm51bWJlclRvUmV0dXJuID0gb3B0aW9ucy5udW1iZXJUb1JldHVybiB8fCAwO1xuICAgICAgICB0aGlzLnJldHVybkZpZWxkU2VsZWN0b3IgPSBvcHRpb25zLnJldHVybkZpZWxkU2VsZWN0b3IgfHwgdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJlcXVlc3RJZCA9IG9wdGlvbnMucmVxdWVzdElkID8/IE9wUXVlcnlSZXF1ZXN0LmdldFJlcXVlc3RJZCgpO1xuICAgICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIHByZS0zLjIgZmluZCBjb21tYW5kcywgZGVsZXRlIEFTQVBcbiAgICAgICAgdGhpcy5wcmUzMkxpbWl0ID0gb3B0aW9ucy5wcmUzMkxpbWl0O1xuICAgICAgICAvLyBTZXJpYWxpemF0aW9uIG9wdGlvblxuICAgICAgICB0aGlzLnNlcmlhbGl6ZUZ1bmN0aW9ucyA9XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5zZXJpYWxpemVGdW5jdGlvbnMgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuc2VyaWFsaXplRnVuY3Rpb25zIDogZmFsc2U7XG4gICAgICAgIHRoaXMuaWdub3JlVW5kZWZpbmVkID1cbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmlnbm9yZVVuZGVmaW5lZCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5pZ25vcmVVbmRlZmluZWQgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXhCc29uU2l6ZSA9IG9wdGlvbnMubWF4QnNvblNpemUgfHwgMTAyNCAqIDEwMjQgKiAxNjtcbiAgICAgICAgdGhpcy5jaGVja0tleXMgPSB0eXBlb2Ygb3B0aW9ucy5jaGVja0tleXMgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuY2hlY2tLZXlzIDogZmFsc2U7XG4gICAgICAgIHRoaXMuYmF0Y2hTaXplID0gdGhpcy5udW1iZXJUb1JldHVybjtcbiAgICAgICAgLy8gRmxhZ3NcbiAgICAgICAgdGhpcy50YWlsYWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNlY29uZGFyeU9rID0gdHlwZW9mIG9wdGlvbnMuc2Vjb25kYXJ5T2sgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuc2Vjb25kYXJ5T2sgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5vcGxvZ1JlcGxheSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5vQ3Vyc29yVGltZW91dCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmF3YWl0RGF0YSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV4aGF1c3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXJ0aWFsID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKiBBc3NpZ24gbmV4dCByZXF1ZXN0IElkLiAqL1xuICAgIGluY1JlcXVlc3RJZCgpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SWQgPSBfcmVxdWVzdElkKys7XG4gICAgfVxuICAgIC8qKiBQZWVrIG5leHQgcmVxdWVzdCBJZC4gKi9cbiAgICBuZXh0UmVxdWVzdElkKCkge1xuICAgICAgICByZXR1cm4gX3JlcXVlc3RJZCArIDE7XG4gICAgfVxuICAgIC8qKiBJbmNyZW1lbnQgdGhlbiByZXR1cm4gbmV4dCByZXF1ZXN0IElkLiAqL1xuICAgIHN0YXRpYyBnZXRSZXF1ZXN0SWQoKSB7XG4gICAgICAgIHJldHVybiArK19yZXF1ZXN0SWQ7XG4gICAgfVxuICAgIC8vIFVzZXMgYSBzaW5nbGUgYWxsb2NhdGVkIGJ1ZmZlciBmb3IgdGhlIHByb2Nlc3MsIGF2b2lkaW5nIG11bHRpcGxlIG1lbW9yeSBhbGxvY2F0aW9uc1xuICAgIHRvQmluKCkge1xuICAgICAgICBjb25zdCBidWZmZXJzID0gW107XG4gICAgICAgIGxldCBwcm9qZWN0aW9uID0gbnVsbDtcbiAgICAgICAgLy8gU2V0IHVwIHRoZSBmbGFnc1xuICAgICAgICBsZXQgZmxhZ3MgPSAwO1xuICAgICAgICBpZiAodGhpcy50YWlsYWJsZSkge1xuICAgICAgICAgICAgZmxhZ3MgfD0gT1BUU19UQUlMQUJMRV9DVVJTT1I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kYXJ5T2spIHtcbiAgICAgICAgICAgIGZsYWdzIHw9IE9QVFNfU0VDT05EQVJZO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wbG9nUmVwbGF5KSB7XG4gICAgICAgICAgICBmbGFncyB8PSBPUFRTX09QTE9HX1JFUExBWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ub0N1cnNvclRpbWVvdXQpIHtcbiAgICAgICAgICAgIGZsYWdzIHw9IE9QVFNfTk9fQ1VSU09SX1RJTUVPVVQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXdhaXREYXRhKSB7XG4gICAgICAgICAgICBmbGFncyB8PSBPUFRTX0FXQUlUX0RBVEE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhoYXVzdCkge1xuICAgICAgICAgICAgZmxhZ3MgfD0gT1BUU19FWEhBVVNUO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBhcnRpYWwpIHtcbiAgICAgICAgICAgIGZsYWdzIHw9IE9QVFNfUEFSVElBTDtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBiYXRjaFNpemUgaXMgZGlmZmVyZW50IHRvIHRoaXMubnVtYmVyVG9SZXR1cm5cbiAgICAgICAgaWYgKHRoaXMuYmF0Y2hTaXplICE9PSB0aGlzLm51bWJlclRvUmV0dXJuKVxuICAgICAgICAgICAgdGhpcy5udW1iZXJUb1JldHVybiA9IHRoaXMuYmF0Y2hTaXplO1xuICAgICAgICAvLyBBbGxvY2F0ZSB3cml0ZSBwcm90b2NvbCBoZWFkZXIgYnVmZmVyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IEJ1ZmZlci5hbGxvYyg0ICogNCArIC8vIEhlYWRlclxuICAgICAgICAgICAgNCArIC8vIEZsYWdzXG4gICAgICAgICAgICBCdWZmZXIuYnl0ZUxlbmd0aCh0aGlzLm5zKSArXG4gICAgICAgICAgICAxICsgLy8gbmFtZXNwYWNlXG4gICAgICAgICAgICA0ICsgLy8gbnVtYmVyVG9Ta2lwXG4gICAgICAgICAgICA0IC8vIG51bWJlclRvUmV0dXJuXG4gICAgICAgICk7XG4gICAgICAgIC8vIEFkZCBoZWFkZXIgdG8gYnVmZmVyc1xuICAgICAgICBidWZmZXJzLnB1c2goaGVhZGVyKTtcbiAgICAgICAgLy8gU2VyaWFsaXplIHRoZSBxdWVyeVxuICAgICAgICBjb25zdCBxdWVyeSA9IEJTT04uc2VyaWFsaXplKHRoaXMucXVlcnksIHtcbiAgICAgICAgICAgIGNoZWNrS2V5czogdGhpcy5jaGVja0tleXMsXG4gICAgICAgICAgICBzZXJpYWxpemVGdW5jdGlvbnM6IHRoaXMuc2VyaWFsaXplRnVuY3Rpb25zLFxuICAgICAgICAgICAgaWdub3JlVW5kZWZpbmVkOiB0aGlzLmlnbm9yZVVuZGVmaW5lZFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gQWRkIHF1ZXJ5IGRvY3VtZW50XG4gICAgICAgIGJ1ZmZlcnMucHVzaChxdWVyeSk7XG4gICAgICAgIGlmICh0aGlzLnJldHVybkZpZWxkU2VsZWN0b3IgJiYgT2JqZWN0LmtleXModGhpcy5yZXR1cm5GaWVsZFNlbGVjdG9yKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBTZXJpYWxpemUgdGhlIHByb2plY3Rpb24gZG9jdW1lbnRcbiAgICAgICAgICAgIHByb2plY3Rpb24gPSBCU09OLnNlcmlhbGl6ZSh0aGlzLnJldHVybkZpZWxkU2VsZWN0b3IsIHtcbiAgICAgICAgICAgICAgICBjaGVja0tleXM6IHRoaXMuY2hlY2tLZXlzLFxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZUZ1bmN0aW9uczogdGhpcy5zZXJpYWxpemVGdW5jdGlvbnMsXG4gICAgICAgICAgICAgICAgaWdub3JlVW5kZWZpbmVkOiB0aGlzLmlnbm9yZVVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBBZGQgcHJvamVjdGlvbiBkb2N1bWVudFxuICAgICAgICAgICAgYnVmZmVycy5wdXNoKHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRvdGFsIG1lc3NhZ2Ugc2l6ZVxuICAgICAgICBjb25zdCB0b3RhbExlbmd0aCA9IGhlYWRlci5sZW5ndGggKyBxdWVyeS5sZW5ndGggKyAocHJvamVjdGlvbiA/IHByb2plY3Rpb24ubGVuZ3RoIDogMCk7XG4gICAgICAgIC8vIFNldCB1cCB0aGUgaW5kZXhcbiAgICAgICAgbGV0IGluZGV4ID0gNDtcbiAgICAgICAgLy8gV3JpdGUgdG90YWwgZG9jdW1lbnQgbGVuZ3RoXG4gICAgICAgIGhlYWRlclszXSA9ICh0b3RhbExlbmd0aCA+PiAyNCkgJiAweGZmO1xuICAgICAgICBoZWFkZXJbMl0gPSAodG90YWxMZW5ndGggPj4gMTYpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyWzFdID0gKHRvdGFsTGVuZ3RoID4+IDgpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyWzBdID0gdG90YWxMZW5ndGggJiAweGZmO1xuICAgICAgICAvLyBXcml0ZSBoZWFkZXIgaW5mb3JtYXRpb24gcmVxdWVzdElkXG4gICAgICAgIGhlYWRlcltpbmRleCArIDNdID0gKHRoaXMucmVxdWVzdElkID4+IDI0KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleCArIDJdID0gKHRoaXMucmVxdWVzdElkID4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleCArIDFdID0gKHRoaXMucmVxdWVzdElkID4+IDgpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4XSA9IHRoaXMucmVxdWVzdElkICYgMHhmZjtcbiAgICAgICAgaW5kZXggPSBpbmRleCArIDQ7XG4gICAgICAgIC8vIFdyaXRlIGhlYWRlciBpbmZvcm1hdGlvbiByZXNwb25zZVRvXG4gICAgICAgIGhlYWRlcltpbmRleCArIDNdID0gKDAgPj4gMjQpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4ICsgMl0gPSAoMCA+PiAxNikgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAxXSA9ICgwID4+IDgpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4XSA9IDAgJiAweGZmO1xuICAgICAgICBpbmRleCA9IGluZGV4ICsgNDtcbiAgICAgICAgLy8gV3JpdGUgaGVhZGVyIGluZm9ybWF0aW9uIE9QX1FVRVJZXG4gICAgICAgIGhlYWRlcltpbmRleCArIDNdID0gKGNvbnN0YW50c18xLk9QX1FVRVJZID4+IDI0KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleCArIDJdID0gKGNvbnN0YW50c18xLk9QX1FVRVJZID4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleCArIDFdID0gKGNvbnN0YW50c18xLk9QX1FVRVJZID4+IDgpICYgMHhmZjtcbiAgICAgICAgaGVhZGVyW2luZGV4XSA9IGNvbnN0YW50c18xLk9QX1FVRVJZICYgMHhmZjtcbiAgICAgICAgaW5kZXggPSBpbmRleCArIDQ7XG4gICAgICAgIC8vIFdyaXRlIGhlYWRlciBpbmZvcm1hdGlvbiBmbGFnc1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAzXSA9IChmbGFncyA+PiAyNCkgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAyXSA9IChmbGFncyA+PiAxNikgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAxXSA9IChmbGFncyA+PiA4KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleF0gPSBmbGFncyAmIDB4ZmY7XG4gICAgICAgIGluZGV4ID0gaW5kZXggKyA0O1xuICAgICAgICAvLyBXcml0ZSBjb2xsZWN0aW9uIG5hbWVcbiAgICAgICAgaW5kZXggPSBpbmRleCArIGhlYWRlci53cml0ZSh0aGlzLm5zLCBpbmRleCwgJ3V0ZjgnKSArIDE7XG4gICAgICAgIGhlYWRlcltpbmRleCAtIDFdID0gMDtcbiAgICAgICAgLy8gV3JpdGUgaGVhZGVyIGluZm9ybWF0aW9uIGZsYWdzIG51bWJlclRvU2tpcFxuICAgICAgICBoZWFkZXJbaW5kZXggKyAzXSA9ICh0aGlzLm51bWJlclRvU2tpcCA+PiAyNCkgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAyXSA9ICh0aGlzLm51bWJlclRvU2tpcCA+PiAxNikgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAxXSA9ICh0aGlzLm51bWJlclRvU2tpcCA+PiA4KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleF0gPSB0aGlzLm51bWJlclRvU2tpcCAmIDB4ZmY7XG4gICAgICAgIGluZGV4ID0gaW5kZXggKyA0O1xuICAgICAgICAvLyBXcml0ZSBoZWFkZXIgaW5mb3JtYXRpb24gZmxhZ3MgbnVtYmVyVG9SZXR1cm5cbiAgICAgICAgaGVhZGVyW2luZGV4ICsgM10gPSAodGhpcy5udW1iZXJUb1JldHVybiA+PiAyNCkgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXggKyAyXSA9ICh0aGlzLm51bWJlclRvUmV0dXJuID4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhlYWRlcltpbmRleCArIDFdID0gKHRoaXMubnVtYmVyVG9SZXR1cm4gPj4gOCkgJiAweGZmO1xuICAgICAgICBoZWFkZXJbaW5kZXhdID0gdGhpcy5udW1iZXJUb1JldHVybiAmIDB4ZmY7XG4gICAgICAgIGluZGV4ID0gaW5kZXggKyA0O1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGJ1ZmZlcnNcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcnM7XG4gICAgfVxufVxuZXhwb3J0cy5PcFF1ZXJ5UmVxdWVzdCA9IE9wUXVlcnlSZXF1ZXN0O1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgT3BRdWVyeVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBtc2dIZWFkZXIsIG1zZ0JvZHksIG9wdHMpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBuZXcgQXJyYXkoMCk7XG4gICAgICAgIC8qKiBtb3JlVG9Db21lIGlzIGFuIE9QX01TRyBvbmx5IGNvbmNlcHQgKi9cbiAgICAgICAgdGhpcy5tb3JlVG9Db21lID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFyc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmF3ID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5kYXRhID0gbXNnQm9keTtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cyA/PyB7XG4gICAgICAgICAgICB1c2VCaWdJbnQ2NDogZmFsc2UsXG4gICAgICAgICAgICBwcm9tb3RlTG9uZ3M6IHRydWUsXG4gICAgICAgICAgICBwcm9tb3RlVmFsdWVzOiB0cnVlLFxuICAgICAgICAgICAgcHJvbW90ZUJ1ZmZlcnM6IGZhbHNlLFxuICAgICAgICAgICAgYnNvblJlZ0V4cDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVhZCB0aGUgbWVzc2FnZSBoZWFkZXJcbiAgICAgICAgdGhpcy5sZW5ndGggPSBtc2dIZWFkZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLnJlcXVlc3RJZCA9IG1zZ0hlYWRlci5yZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMucmVzcG9uc2VUbyA9IG1zZ0hlYWRlci5yZXNwb25zZVRvO1xuICAgICAgICB0aGlzLm9wQ29kZSA9IG1zZ0hlYWRlci5vcENvZGU7XG4gICAgICAgIHRoaXMuZnJvbUNvbXByZXNzZWQgPSBtc2dIZWFkZXIuZnJvbUNvbXByZXNzZWQ7XG4gICAgICAgIC8vIEZsYWcgdmFsdWVzXG4gICAgICAgIHRoaXMudXNlQmlnSW50NjQgPSB0eXBlb2YgdGhpcy5vcHRzLnVzZUJpZ0ludDY0ID09PSAnYm9vbGVhbicgPyB0aGlzLm9wdHMudXNlQmlnSW50NjQgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5wcm9tb3RlTG9uZ3MgPSB0eXBlb2YgdGhpcy5vcHRzLnByb21vdGVMb25ncyA9PT0gJ2Jvb2xlYW4nID8gdGhpcy5vcHRzLnByb21vdGVMb25ncyA6IHRydWU7XG4gICAgICAgIHRoaXMucHJvbW90ZVZhbHVlcyA9XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5vcHRzLnByb21vdGVWYWx1ZXMgPT09ICdib29sZWFuJyA/IHRoaXMub3B0cy5wcm9tb3RlVmFsdWVzIDogdHJ1ZTtcbiAgICAgICAgdGhpcy5wcm9tb3RlQnVmZmVycyA9XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5vcHRzLnByb21vdGVCdWZmZXJzID09PSAnYm9vbGVhbicgPyB0aGlzLm9wdHMucHJvbW90ZUJ1ZmZlcnMgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5ic29uUmVnRXhwID0gdHlwZW9mIHRoaXMub3B0cy5ic29uUmVnRXhwID09PSAnYm9vbGVhbicgPyB0aGlzLm9wdHMuYnNvblJlZ0V4cCA6IGZhbHNlO1xuICAgIH1cbiAgICBpc1BhcnNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkO1xuICAgIH1cbiAgICBwYXJzZShvcHRpb25zKSB7XG4gICAgICAgIC8vIERvbid0IHBhcnNlIGFnYWluIGlmIG5vdCBuZWVkZWRcbiAgICAgICAgaWYgKHRoaXMucGFyc2VkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgLy8gQWxsb3cgdGhlIHJldHVybiBvZiByYXcgZG9jdW1lbnRzIGluc3RlYWQgb2YgcGFyc2luZ1xuICAgICAgICBjb25zdCByYXcgPSBvcHRpb25zLnJhdyB8fCBmYWxzZTtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRzUmV0dXJuZWRJbiA9IG9wdGlvbnMuZG9jdW1lbnRzUmV0dXJuZWRJbiB8fCBudWxsO1xuICAgICAgICBjb25zdCB1c2VCaWdJbnQ2NCA9IG9wdGlvbnMudXNlQmlnSW50NjQgPz8gdGhpcy5vcHRzLnVzZUJpZ0ludDY0O1xuICAgICAgICBjb25zdCBwcm9tb3RlTG9uZ3MgPSBvcHRpb25zLnByb21vdGVMb25ncyA/PyB0aGlzLm9wdHMucHJvbW90ZUxvbmdzO1xuICAgICAgICBjb25zdCBwcm9tb3RlVmFsdWVzID0gb3B0aW9ucy5wcm9tb3RlVmFsdWVzID8/IHRoaXMub3B0cy5wcm9tb3RlVmFsdWVzO1xuICAgICAgICBjb25zdCBwcm9tb3RlQnVmZmVycyA9IG9wdGlvbnMucHJvbW90ZUJ1ZmZlcnMgPz8gdGhpcy5vcHRzLnByb21vdGVCdWZmZXJzO1xuICAgICAgICBjb25zdCBic29uUmVnRXhwID0gb3B0aW9ucy5ic29uUmVnRXhwID8/IHRoaXMub3B0cy5ic29uUmVnRXhwO1xuICAgICAgICBsZXQgYnNvblNpemU7XG4gICAgICAgIC8vIFNldCB1cCB0aGUgb3B0aW9uc1xuICAgICAgICBjb25zdCBfb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHVzZUJpZ0ludDY0LFxuICAgICAgICAgICAgcHJvbW90ZUxvbmdzLFxuICAgICAgICAgICAgcHJvbW90ZVZhbHVlcyxcbiAgICAgICAgICAgIHByb21vdGVCdWZmZXJzLFxuICAgICAgICAgICAgYnNvblJlZ0V4cFxuICAgICAgICB9O1xuICAgICAgICAvLyBQb3NpdGlvbiB3aXRoaW4gT1BfUkVQTFkgYXQgd2hpY2ggZG9jdW1lbnRzIHN0YXJ0XG4gICAgICAgIC8vIChTZWUgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL21vbmdvZGItd2lyZS1wcm90b2NvbC8jd2lyZS1vcC1yZXBseSlcbiAgICAgICAgdGhpcy5pbmRleCA9IDIwO1xuICAgICAgICAvLyBSZWFkIHRoZSBtZXNzYWdlIGJvZHlcbiAgICAgICAgdGhpcy5yZXNwb25zZUZsYWdzID0gdGhpcy5kYXRhLnJlYWRJbnQzMkxFKDApO1xuICAgICAgICB0aGlzLmN1cnNvcklkID0gbmV3IEJTT04uTG9uZyh0aGlzLmRhdGEucmVhZEludDMyTEUoNCksIHRoaXMuZGF0YS5yZWFkSW50MzJMRSg4KSk7XG4gICAgICAgIHRoaXMuc3RhcnRpbmdGcm9tID0gdGhpcy5kYXRhLnJlYWRJbnQzMkxFKDEyKTtcbiAgICAgICAgdGhpcy5udW1iZXJSZXR1cm5lZCA9IHRoaXMuZGF0YS5yZWFkSW50MzJMRSgxNik7XG4gICAgICAgIC8vIFByZWFsbG9jYXRlIGRvY3VtZW50IGFycmF5XG4gICAgICAgIHRoaXMuZG9jdW1lbnRzID0gbmV3IEFycmF5KHRoaXMubnVtYmVyUmV0dXJuZWQpO1xuICAgICAgICB0aGlzLmN1cnNvck5vdEZvdW5kID0gKHRoaXMucmVzcG9uc2VGbGFncyAmIENVUlNPUl9OT1RfRk9VTkQpICE9PSAwO1xuICAgICAgICB0aGlzLnF1ZXJ5RmFpbHVyZSA9ICh0aGlzLnJlc3BvbnNlRmxhZ3MgJiBRVUVSWV9GQUlMVVJFKSAhPT0gMDtcbiAgICAgICAgdGhpcy5zaGFyZENvbmZpZ1N0YWxlID0gKHRoaXMucmVzcG9uc2VGbGFncyAmIFNIQVJEX0NPTkZJR19TVEFMRSkgIT09IDA7XG4gICAgICAgIHRoaXMuYXdhaXRDYXBhYmxlID0gKHRoaXMucmVzcG9uc2VGbGFncyAmIEFXQUlUX0NBUEFCTEUpICE9PSAwO1xuICAgICAgICAvLyBQYXJzZSBCb2R5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1iZXJSZXR1cm5lZDsgaSsrKSB7XG4gICAgICAgICAgICBic29uU2l6ZSA9XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW3RoaXMuaW5kZXhdIHxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZGF0YVt0aGlzLmluZGV4ICsgMV0gPDwgOCkgfFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5kYXRhW3RoaXMuaW5kZXggKyAyXSA8PCAxNikgfFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5kYXRhW3RoaXMuaW5kZXggKyAzXSA8PCAyNCk7XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIHJhdyByZXN1bHRzIHNwZWNpZmllZCBzbGljZSB0aGUgcmV0dXJuIGRvY3VtZW50XG4gICAgICAgICAgICBpZiAocmF3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb2N1bWVudHNbaV0gPSB0aGlzLmRhdGEuc2xpY2UodGhpcy5pbmRleCwgdGhpcy5pbmRleCArIGJzb25TaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRzW2ldID0gQlNPTi5kZXNlcmlhbGl6ZSh0aGlzLmRhdGEuc2xpY2UodGhpcy5pbmRleCwgdGhpcy5pbmRleCArIGJzb25TaXplKSwgX29wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRqdXN0IHRoZSBpbmRleFxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuaW5kZXggKyBic29uU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudHMubGVuZ3RoID09PSAxICYmIGRvY3VtZW50c1JldHVybmVkSW4gIT0gbnVsbCAmJiByYXcpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkc0FzUmF3ID0ge307XG4gICAgICAgICAgICBmaWVsZHNBc1Jhd1tkb2N1bWVudHNSZXR1cm5lZEluXSA9IHRydWU7XG4gICAgICAgICAgICBfb3B0aW9ucy5maWVsZHNBc1JhdyA9IGZpZWxkc0FzUmF3O1xuICAgICAgICAgICAgY29uc3QgZG9jID0gQlNPTi5kZXNlcmlhbGl6ZSh0aGlzLmRvY3VtZW50c1swXSwgX29wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBbZG9jXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgcGFyc2VkXG4gICAgICAgIHRoaXMucGFyc2VkID0gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnRzLk9wUXVlcnlSZXNwb25zZSA9IE9wUXVlcnlSZXNwb25zZTtcbi8vIEltcGxlbWVudGF0aW9uIG9mIE9QX01TRyBzcGVjOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi9tYXN0ZXIvc291cmNlL21lc3NhZ2UvT1BfTVNHLnJzdFxuLy9cbi8vIHN0cnVjdCBTZWN0aW9uIHtcbi8vICAgdWludDggcGF5bG9hZFR5cGU7XG4vLyAgIHVuaW9uIHBheWxvYWQge1xuLy8gICAgICAgZG9jdW1lbnQgIGRvY3VtZW50OyAvLyBwYXlsb2FkVHlwZSA9PSAwXG4vLyAgICAgICBzdHJ1Y3Qgc2VxdWVuY2UgeyAvLyBwYXlsb2FkVHlwZSA9PSAxXG4vLyAgICAgICAgICAgaW50MzIgICAgICBzaXplO1xuLy8gICAgICAgICAgIGNzdHJpbmcgICAgaWRlbnRpZmllcjtcbi8vICAgICAgICAgICBkb2N1bWVudCogIGRvY3VtZW50cztcbi8vICAgICAgIH07XG4vLyAgIH07XG4vLyB9O1xuLy8gc3RydWN0IE9QX01TRyB7XG4vLyAgIHN0cnVjdCBNc2dIZWFkZXIge1xuLy8gICAgICAgaW50MzIgIG1lc3NhZ2VMZW5ndGg7XG4vLyAgICAgICBpbnQzMiAgcmVxdWVzdElEO1xuLy8gICAgICAgaW50MzIgIHJlc3BvbnNlVG87XG4vLyAgICAgICBpbnQzMiAgb3BDb2RlID0gMjAxMztcbi8vICAgfTtcbi8vICAgdWludDMyICAgICAgZmxhZ0JpdHM7XG4vLyAgIFNlY3Rpb24rICAgIHNlY3Rpb25zO1xuLy8gICBbdWludDMyICAgICBjaGVja3N1bTtdXG4vLyB9O1xuLy8gTXNnIEZsYWdzXG5jb25zdCBPUFRTX0NIRUNLU1VNX1BSRVNFTlQgPSAxO1xuY29uc3QgT1BUU19NT1JFX1RPX0NPTUUgPSAyO1xuY29uc3QgT1BUU19FWEhBVVNUX0FMTE9XRUQgPSAxIDw8IDE2O1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgT3BNc2dSZXF1ZXN0IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhYmFzZU5hbWUsIGNvbW1hbmQsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZU5hbWUgPSBkYXRhYmFzZU5hbWU7XG4gICAgICAgIHRoaXMuY29tbWFuZCA9IGNvbW1hbmQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIC8vIEJhc2ljIG9wdGlvbnMgbmVlZGVkIHRvIGJlIHBhc3NlZCBpblxuICAgICAgICBpZiAoY29tbWFuZCA9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUXVlcnkgZG9jdW1lbnQgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIHF1ZXJ5Jyk7XG4gICAgICAgIC8vIEJhc2ljIG9wdGlvbnNcbiAgICAgICAgdGhpcy5jb21tYW5kLiRkYiA9IGRhdGFiYXNlTmFtZTtcbiAgICAgICAgLy8gRW5zdXJlIGVtcHR5IG9wdGlvbnNcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgLy8gQWRkaXRpb25hbCBvcHRpb25zXG4gICAgICAgIHRoaXMucmVxdWVzdElkID0gb3B0aW9ucy5yZXF1ZXN0SWQgPyBvcHRpb25zLnJlcXVlc3RJZCA6IE9wTXNnUmVxdWVzdC5nZXRSZXF1ZXN0SWQoKTtcbiAgICAgICAgLy8gU2VyaWFsaXphdGlvbiBvcHRpb25cbiAgICAgICAgdGhpcy5zZXJpYWxpemVGdW5jdGlvbnMgPVxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuc2VyaWFsaXplRnVuY3Rpb25zID09PSAnYm9vbGVhbicgPyBvcHRpb25zLnNlcmlhbGl6ZUZ1bmN0aW9ucyA6IGZhbHNlO1xuICAgICAgICB0aGlzLmlnbm9yZVVuZGVmaW5lZCA9XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5pZ25vcmVVbmRlZmluZWQgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuaWdub3JlVW5kZWZpbmVkIDogZmFsc2U7XG4gICAgICAgIHRoaXMuY2hlY2tLZXlzID0gdHlwZW9mIG9wdGlvbnMuY2hlY2tLZXlzID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmNoZWNrS2V5cyA6IGZhbHNlO1xuICAgICAgICB0aGlzLm1heEJzb25TaXplID0gb3B0aW9ucy5tYXhCc29uU2l6ZSB8fCAxMDI0ICogMTAyNCAqIDE2O1xuICAgICAgICAvLyBmbGFnc1xuICAgICAgICB0aGlzLmNoZWNrc3VtUHJlc2VudCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1vcmVUb0NvbWUgPSBvcHRpb25zLm1vcmVUb0NvbWUgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuZXhoYXVzdEFsbG93ZWQgPVxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuZXhoYXVzdEFsbG93ZWQgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuZXhoYXVzdEFsbG93ZWQgOiBmYWxzZTtcbiAgICB9XG4gICAgdG9CaW4oKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgbGV0IGZsYWdzID0gMDtcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tzdW1QcmVzZW50KSB7XG4gICAgICAgICAgICBmbGFncyB8PSBPUFRTX0NIRUNLU1VNX1BSRVNFTlQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubW9yZVRvQ29tZSkge1xuICAgICAgICAgICAgZmxhZ3MgfD0gT1BUU19NT1JFX1RPX0NPTUU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhoYXVzdEFsbG93ZWQpIHtcbiAgICAgICAgICAgIGZsYWdzIHw9IE9QVFNfRVhIQVVTVF9BTExPV0VEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhlYWRlciA9IEJ1ZmZlci5hbGxvYyg0ICogNCArIC8vIEhlYWRlclxuICAgICAgICAgICAgNCAvLyBGbGFnc1xuICAgICAgICApO1xuICAgICAgICBidWZmZXJzLnB1c2goaGVhZGVyKTtcbiAgICAgICAgbGV0IHRvdGFsTGVuZ3RoID0gaGVhZGVyLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHRoaXMuY29tbWFuZDtcbiAgICAgICAgdG90YWxMZW5ndGggKz0gdGhpcy5tYWtlRG9jdW1lbnRTZWdtZW50KGJ1ZmZlcnMsIGNvbW1hbmQpO1xuICAgICAgICBoZWFkZXIud3JpdGVJbnQzMkxFKHRvdGFsTGVuZ3RoLCAwKTsgLy8gbWVzc2FnZUxlbmd0aFxuICAgICAgICBoZWFkZXIud3JpdGVJbnQzMkxFKHRoaXMucmVxdWVzdElkLCA0KTsgLy8gcmVxdWVzdElEXG4gICAgICAgIGhlYWRlci53cml0ZUludDMyTEUoMCwgOCk7IC8vIHJlc3BvbnNlVG9cbiAgICAgICAgaGVhZGVyLndyaXRlSW50MzJMRShjb25zdGFudHNfMS5PUF9NU0csIDEyKTsgLy8gb3BDb2RlXG4gICAgICAgIGhlYWRlci53cml0ZVVJbnQzMkxFKGZsYWdzLCAxNik7IC8vIGZsYWdzXG4gICAgICAgIHJldHVybiBidWZmZXJzO1xuICAgIH1cbiAgICBtYWtlRG9jdW1lbnRTZWdtZW50KGJ1ZmZlcnMsIGRvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWRUeXBlQnVmZmVyID0gQnVmZmVyLmFsbG9jKDEpO1xuICAgICAgICBwYXlsb2FkVHlwZUJ1ZmZlclswXSA9IDA7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50QnVmZmVyID0gdGhpcy5zZXJpYWxpemVCc29uKGRvY3VtZW50KTtcbiAgICAgICAgYnVmZmVycy5wdXNoKHBheWxvYWRUeXBlQnVmZmVyKTtcbiAgICAgICAgYnVmZmVycy5wdXNoKGRvY3VtZW50QnVmZmVyKTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWRUeXBlQnVmZmVyLmxlbmd0aCArIGRvY3VtZW50QnVmZmVyLmxlbmd0aDtcbiAgICB9XG4gICAgc2VyaWFsaXplQnNvbihkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gQlNPTi5zZXJpYWxpemUoZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIGNoZWNrS2V5czogdGhpcy5jaGVja0tleXMsXG4gICAgICAgICAgICBzZXJpYWxpemVGdW5jdGlvbnM6IHRoaXMuc2VyaWFsaXplRnVuY3Rpb25zLFxuICAgICAgICAgICAgaWdub3JlVW5kZWZpbmVkOiB0aGlzLmlnbm9yZVVuZGVmaW5lZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGdldFJlcXVlc3RJZCgpIHtcbiAgICAgICAgX3JlcXVlc3RJZCA9IChfcmVxdWVzdElkICsgMSkgJiAweDdmZmZmZmZmO1xuICAgICAgICByZXR1cm4gX3JlcXVlc3RJZDtcbiAgICB9XG59XG5leHBvcnRzLk9wTXNnUmVxdWVzdCA9IE9wTXNnUmVxdWVzdDtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIE9wTXNnUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG1zZ0hlYWRlciwgbXNnQm9keSwgb3B0cykge1xuICAgICAgICB0aGlzLnBhcnNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJhdyA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuZGF0YSA9IG1zZ0JvZHk7XG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHMgPz8ge1xuICAgICAgICAgICAgdXNlQmlnSW50NjQ6IGZhbHNlLFxuICAgICAgICAgICAgcHJvbW90ZUxvbmdzOiB0cnVlLFxuICAgICAgICAgICAgcHJvbW90ZVZhbHVlczogdHJ1ZSxcbiAgICAgICAgICAgIHByb21vdGVCdWZmZXJzOiBmYWxzZSxcbiAgICAgICAgICAgIGJzb25SZWdFeHA6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIC8vIFJlYWQgdGhlIG1lc3NhZ2UgaGVhZGVyXG4gICAgICAgIHRoaXMubGVuZ3RoID0gbXNnSGVhZGVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SWQgPSBtc2dIZWFkZXIucmVxdWVzdElkO1xuICAgICAgICB0aGlzLnJlc3BvbnNlVG8gPSBtc2dIZWFkZXIucmVzcG9uc2VUbztcbiAgICAgICAgdGhpcy5vcENvZGUgPSBtc2dIZWFkZXIub3BDb2RlO1xuICAgICAgICB0aGlzLmZyb21Db21wcmVzc2VkID0gbXNnSGVhZGVyLmZyb21Db21wcmVzc2VkO1xuICAgICAgICAvLyBSZWFkIHJlc3BvbnNlIGZsYWdzXG4gICAgICAgIHRoaXMucmVzcG9uc2VGbGFncyA9IG1zZ0JvZHkucmVhZEludDMyTEUoMCk7XG4gICAgICAgIHRoaXMuY2hlY2tzdW1QcmVzZW50ID0gKHRoaXMucmVzcG9uc2VGbGFncyAmIE9QVFNfQ0hFQ0tTVU1fUFJFU0VOVCkgIT09IDA7XG4gICAgICAgIHRoaXMubW9yZVRvQ29tZSA9ICh0aGlzLnJlc3BvbnNlRmxhZ3MgJiBPUFRTX01PUkVfVE9fQ09NRSkgIT09IDA7XG4gICAgICAgIHRoaXMuZXhoYXVzdEFsbG93ZWQgPSAodGhpcy5yZXNwb25zZUZsYWdzICYgT1BUU19FWEhBVVNUX0FMTE9XRUQpICE9PSAwO1xuICAgICAgICB0aGlzLnVzZUJpZ0ludDY0ID0gdHlwZW9mIHRoaXMub3B0cy51c2VCaWdJbnQ2NCA9PT0gJ2Jvb2xlYW4nID8gdGhpcy5vcHRzLnVzZUJpZ0ludDY0IDogZmFsc2U7XG4gICAgICAgIHRoaXMucHJvbW90ZUxvbmdzID0gdHlwZW9mIHRoaXMub3B0cy5wcm9tb3RlTG9uZ3MgPT09ICdib29sZWFuJyA/IHRoaXMub3B0cy5wcm9tb3RlTG9uZ3MgOiB0cnVlO1xuICAgICAgICB0aGlzLnByb21vdGVWYWx1ZXMgPVxuICAgICAgICAgICAgdHlwZW9mIHRoaXMub3B0cy5wcm9tb3RlVmFsdWVzID09PSAnYm9vbGVhbicgPyB0aGlzLm9wdHMucHJvbW90ZVZhbHVlcyA6IHRydWU7XG4gICAgICAgIHRoaXMucHJvbW90ZUJ1ZmZlcnMgPVxuICAgICAgICAgICAgdHlwZW9mIHRoaXMub3B0cy5wcm9tb3RlQnVmZmVycyA9PT0gJ2Jvb2xlYW4nID8gdGhpcy5vcHRzLnByb21vdGVCdWZmZXJzIDogZmFsc2U7XG4gICAgICAgIHRoaXMuYnNvblJlZ0V4cCA9IHR5cGVvZiB0aGlzLm9wdHMuYnNvblJlZ0V4cCA9PT0gJ2Jvb2xlYW4nID8gdGhpcy5vcHRzLmJzb25SZWdFeHAgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBbXTtcbiAgICB9XG4gICAgaXNQYXJzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlZDtcbiAgICB9XG4gICAgcGFyc2Uob3B0aW9ucykge1xuICAgICAgICAvLyBEb24ndCBwYXJzZSBhZ2FpbiBpZiBub3QgbmVlZGVkXG4gICAgICAgIGlmICh0aGlzLnBhcnNlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHRoaXMuaW5kZXggPSA0O1xuICAgICAgICAvLyBBbGxvdyB0aGUgcmV0dXJuIG9mIHJhdyBkb2N1bWVudHMgaW5zdGVhZCBvZiBwYXJzaW5nXG4gICAgICAgIGNvbnN0IHJhdyA9IG9wdGlvbnMucmF3IHx8IGZhbHNlO1xuICAgICAgICBjb25zdCBkb2N1bWVudHNSZXR1cm5lZEluID0gb3B0aW9ucy5kb2N1bWVudHNSZXR1cm5lZEluIHx8IG51bGw7XG4gICAgICAgIGNvbnN0IHVzZUJpZ0ludDY0ID0gb3B0aW9ucy51c2VCaWdJbnQ2NCA/PyB0aGlzLm9wdHMudXNlQmlnSW50NjQ7XG4gICAgICAgIGNvbnN0IHByb21vdGVMb25ncyA9IG9wdGlvbnMucHJvbW90ZUxvbmdzID8/IHRoaXMub3B0cy5wcm9tb3RlTG9uZ3M7XG4gICAgICAgIGNvbnN0IHByb21vdGVWYWx1ZXMgPSBvcHRpb25zLnByb21vdGVWYWx1ZXMgPz8gdGhpcy5vcHRzLnByb21vdGVWYWx1ZXM7XG4gICAgICAgIGNvbnN0IHByb21vdGVCdWZmZXJzID0gb3B0aW9ucy5wcm9tb3RlQnVmZmVycyA/PyB0aGlzLm9wdHMucHJvbW90ZUJ1ZmZlcnM7XG4gICAgICAgIGNvbnN0IGJzb25SZWdFeHAgPSBvcHRpb25zLmJzb25SZWdFeHAgPz8gdGhpcy5vcHRzLmJzb25SZWdFeHA7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLnBhcnNlQnNvblNlcmlhbGl6YXRpb25PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAvLyBTZXQgdXAgdGhlIG9wdGlvbnNcbiAgICAgICAgY29uc3QgYnNvbk9wdGlvbnMgPSB7XG4gICAgICAgICAgICB1c2VCaWdJbnQ2NCxcbiAgICAgICAgICAgIHByb21vdGVMb25ncyxcbiAgICAgICAgICAgIHByb21vdGVWYWx1ZXMsXG4gICAgICAgICAgICBwcm9tb3RlQnVmZmVycyxcbiAgICAgICAgICAgIGJzb25SZWdFeHAsXG4gICAgICAgICAgICB2YWxpZGF0aW9uXG4gICAgICAgICAgICAvLyBEdWUgdG8gdGhlIHN0cmljdG5lc3Mgb2YgdGhlIEJTT04gbGlicmFyaWVzIHZhbGlkYXRpb24gb3B0aW9uIHdlIG5lZWQgdGhpcyBjYXN0XG4gICAgICAgIH07XG4gICAgICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy5kYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZFR5cGUgPSB0aGlzLmRhdGEucmVhZFVJbnQ4KHRoaXMuaW5kZXgrKyk7XG4gICAgICAgICAgICBpZiAocGF5bG9hZFR5cGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBic29uU2l6ZSA9IHRoaXMuZGF0YS5yZWFkVUludDMyTEUodGhpcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmluID0gdGhpcy5kYXRhLnNsaWNlKHRoaXMuaW5kZXgsIHRoaXMuaW5kZXggKyBic29uU2l6ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kb2N1bWVudHMucHVzaChyYXcgPyBiaW4gOiBCU09OLmRlc2VyaWFsaXplKGJpbiwgYnNvbk9wdGlvbnMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4ICs9IGJzb25TaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGF5bG9hZFR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBJdCB3YXMgZGVjaWRlZCB0aGF0IG5vIGRyaXZlciBtYWtlcyB1c2Ugb2YgcGF5bG9hZCB0eXBlIDFcbiAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IFJlcGxhY2Ugd2l0aCBNb25nb0RlcHJlY2F0aW9uRXJyb3JcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignT1BfTVNHIFBheWxvYWQgVHlwZSAxIGRldGVjdGVkIHVuc3VwcG9ydGVkIHByb3RvY29sJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBkb2N1bWVudHNSZXR1cm5lZEluICE9IG51bGwgJiYgcmF3KSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZHNBc1JhdyA9IHt9O1xuICAgICAgICAgICAgZmllbGRzQXNSYXdbZG9jdW1lbnRzUmV0dXJuZWRJbl0gPSB0cnVlO1xuICAgICAgICAgICAgYnNvbk9wdGlvbnMuZmllbGRzQXNSYXcgPSBmaWVsZHNBc1JhdztcbiAgICAgICAgICAgIGNvbnN0IGRvYyA9IEJTT04uZGVzZXJpYWxpemUodGhpcy5kb2N1bWVudHNbMF0sIGJzb25PcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRzID0gW2RvY107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQgPSB0cnVlO1xuICAgIH1cbiAgICBwYXJzZUJzb25TZXJpYWxpemF0aW9uT3B0aW9ucyh7IGVuYWJsZVV0ZjhWYWxpZGF0aW9uIH0pIHtcbiAgICAgICAgaWYgKGVuYWJsZVV0ZjhWYWxpZGF0aW9uID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdXRmODogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB1dGY4OiB7IHdyaXRlRXJyb3JzOiBmYWxzZSB9IH07XG4gICAgfVxufVxuZXhwb3J0cy5PcE1zZ1Jlc3BvbnNlID0gT3BNc2dSZXNwb25zZTtcbmNvbnN0IE1FU1NBR0VfSEVBREVSX1NJWkUgPSAxNjtcbmNvbnN0IENPTVBSRVNTSU9OX0RFVEFJTFNfU0laRSA9IDk7IC8vIG9yaWdpbmFsT3Bjb2RlICsgdW5jb21wcmVzc2VkU2l6ZSwgY29tcHJlc3NvcklEXG4vKipcbiAqIEBpbnRlcm5hbFxuICpcbiAqIEFuIE9QX0NPTVBSRVNTRUQgcmVxdWVzdCB3cmFwcyBlaXRoZXIgYW4gT1BfUVVFUlkgb3IgT1BfTVNHIG1lc3NhZ2UuXG4gKi9cbmNsYXNzIE9wQ29tcHJlc3NlZFJlcXVlc3Qge1xuICAgIGNvbnN0cnVjdG9yKGNvbW1hbmQsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5jb21tYW5kID0gY29tbWFuZDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgLy8gUmV0dXJuIHdoZXRoZXIgYSBjb21tYW5kIGNvbnRhaW5zIGFuIHVuY29tcHJlc3NpYmxlIGNvbW1hbmQgdGVybVxuICAgIC8vIFdpbGwgcmV0dXJuIHRydWUgaWYgY29tbWFuZCBjb250YWlucyBubyB1bmNvbXByZXNzaWJsZSBjb21tYW5kIHRlcm1zXG4gICAgc3RhdGljIGNhbkNvbXByZXNzKGNvbW1hbmQpIHtcbiAgICAgICAgY29uc3QgY29tbWFuZERvYyA9IGNvbW1hbmQgaW5zdGFuY2VvZiBPcE1zZ1JlcXVlc3QgPyBjb21tYW5kLmNvbW1hbmQgOiBjb21tYW5kLnF1ZXJ5O1xuICAgICAgICBjb25zdCBjb21tYW5kTmFtZSA9IE9iamVjdC5rZXlzKGNvbW1hbmREb2MpWzBdO1xuICAgICAgICByZXR1cm4gIWNvbXByZXNzaW9uXzEudW5jb21wcmVzc2libGVDb21tYW5kcy5oYXMoY29tbWFuZE5hbWUpO1xuICAgIH1cbiAgICBhc3luYyB0b0JpbigpIHtcbiAgICAgICAgY29uc3QgY29uY2F0ZW5hdGVkT3JpZ2luYWxDb21tYW5kQnVmZmVyID0gQnVmZmVyLmNvbmNhdCh0aGlzLmNvbW1hbmQudG9CaW4oKSk7XG4gICAgICAgIC8vIG90aGVyd2lzZSwgY29tcHJlc3MgdGhlIG1lc3NhZ2VcbiAgICAgICAgY29uc3QgbWVzc2FnZVRvQmVDb21wcmVzc2VkID0gY29uY2F0ZW5hdGVkT3JpZ2luYWxDb21tYW5kQnVmZmVyLnNsaWNlKE1FU1NBR0VfSEVBREVSX1NJWkUpO1xuICAgICAgICAvLyBFeHRyYWN0IGluZm9ybWF0aW9uIG5lZWRlZCBmb3IgT1BfQ09NUFJFU1NFRCBmcm9tIHRoZSB1bmNvbXByZXNzZWQgbWVzc2FnZVxuICAgICAgICBjb25zdCBvcmlnaW5hbENvbW1hbmRPcENvZGUgPSBjb25jYXRlbmF0ZWRPcmlnaW5hbENvbW1hbmRCdWZmZXIucmVhZEludDMyTEUoMTIpO1xuICAgICAgICAvLyBDb21wcmVzcyB0aGUgbWVzc2FnZSBib2R5XG4gICAgICAgIGNvbnN0IGNvbXByZXNzZWRNZXNzYWdlID0gYXdhaXQgKDAsIGNvbXByZXNzaW9uXzEuY29tcHJlc3MpKHRoaXMub3B0aW9ucywgbWVzc2FnZVRvQmVDb21wcmVzc2VkKTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtc2dIZWFkZXIgb2YgT1BfQ09NUFJFU1NFRFxuICAgICAgICBjb25zdCBtc2dIZWFkZXIgPSBCdWZmZXIuYWxsb2MoTUVTU0FHRV9IRUFERVJfU0laRSk7XG4gICAgICAgIG1zZ0hlYWRlci53cml0ZUludDMyTEUoTUVTU0FHRV9IRUFERVJfU0laRSArIENPTVBSRVNTSU9OX0RFVEFJTFNfU0laRSArIGNvbXByZXNzZWRNZXNzYWdlLmxlbmd0aCwgMCk7IC8vIG1lc3NhZ2VMZW5ndGhcbiAgICAgICAgbXNnSGVhZGVyLndyaXRlSW50MzJMRSh0aGlzLmNvbW1hbmQucmVxdWVzdElkLCA0KTsgLy8gcmVxdWVzdElEXG4gICAgICAgIG1zZ0hlYWRlci53cml0ZUludDMyTEUoMCwgOCk7IC8vIHJlc3BvbnNlVG8gKHplcm8pXG4gICAgICAgIG1zZ0hlYWRlci53cml0ZUludDMyTEUoY29uc3RhbnRzXzEuT1BfQ09NUFJFU1NFRCwgMTIpOyAvLyBvcENvZGVcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjb21wcmVzc2lvbiBkZXRhaWxzIG9mIE9QX0NPTVBSRVNTRURcbiAgICAgICAgY29uc3QgY29tcHJlc3Npb25EZXRhaWxzID0gQnVmZmVyLmFsbG9jKENPTVBSRVNTSU9OX0RFVEFJTFNfU0laRSk7XG4gICAgICAgIGNvbXByZXNzaW9uRGV0YWlscy53cml0ZUludDMyTEUob3JpZ2luYWxDb21tYW5kT3BDb2RlLCAwKTsgLy8gb3JpZ2luYWxPcGNvZGVcbiAgICAgICAgY29tcHJlc3Npb25EZXRhaWxzLndyaXRlSW50MzJMRShtZXNzYWdlVG9CZUNvbXByZXNzZWQubGVuZ3RoLCA0KTsgLy8gU2l6ZSBvZiB0aGUgdW5jb21wcmVzc2VkIGNvbXByZXNzZWRNZXNzYWdlLCBleGNsdWRpbmcgdGhlIE1zZ0hlYWRlclxuICAgICAgICBjb21wcmVzc2lvbkRldGFpbHMud3JpdGVVSW50OChjb21wcmVzc2lvbl8xLkNvbXByZXNzb3JbdGhpcy5vcHRpb25zLmFncmVlZENvbXByZXNzb3JdLCA4KTsgLy8gY29tcHJlc3NvcklEXG4gICAgICAgIHJldHVybiBbbXNnSGVhZGVyLCBjb21wcmVzc2lvbkRldGFpbHMsIGNvbXByZXNzZWRNZXNzYWdlXTtcbiAgICB9XG59XG5leHBvcnRzLk9wQ29tcHJlc3NlZFJlcXVlc3QgPSBPcENvbXByZXNzZWRSZXF1ZXN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbWFuZHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiT3BDb21wcmVzc2VkUmVxdWVzdCIsIk9wTXNnUmVzcG9uc2UiLCJPcE1zZ1JlcXVlc3QiLCJPcFF1ZXJ5UmVzcG9uc2UiLCJPcFF1ZXJ5UmVxdWVzdCIsIkJTT04iLCJyZXF1aXJlIiwiZXJyb3JfMSIsImNvbXByZXNzaW9uXzEiLCJjb25zdGFudHNfMSIsIl9yZXF1ZXN0SWQiLCJPUFRTX1RBSUxBQkxFX0NVUlNPUiIsIk9QVFNfU0VDT05EQVJZIiwiT1BUU19PUExPR19SRVBMQVkiLCJPUFRTX05PX0NVUlNPUl9USU1FT1VUIiwiT1BUU19BV0FJVF9EQVRBIiwiT1BUU19FWEhBVVNUIiwiT1BUU19QQVJUSUFMIiwiQ1VSU09SX05PVF9GT1VORCIsIlFVRVJZX0ZBSUxVUkUiLCJTSEFSRF9DT05GSUdfU1RBTEUiLCJBV0FJVF9DQVBBQkxFIiwiY29uc3RydWN0b3IiLCJkYXRhYmFzZU5hbWUiLCJxdWVyeSIsIm9wdGlvbnMiLCJucyIsIk1vbmdvUnVudGltZUVycm9yIiwiaW5kZXhPZiIsIm51bWJlclRvU2tpcCIsIm51bWJlclRvUmV0dXJuIiwicmV0dXJuRmllbGRTZWxlY3RvciIsInVuZGVmaW5lZCIsInJlcXVlc3RJZCIsImdldFJlcXVlc3RJZCIsInByZTMyTGltaXQiLCJzZXJpYWxpemVGdW5jdGlvbnMiLCJpZ25vcmVVbmRlZmluZWQiLCJtYXhCc29uU2l6ZSIsImNoZWNrS2V5cyIsImJhdGNoU2l6ZSIsInRhaWxhYmxlIiwic2Vjb25kYXJ5T2siLCJvcGxvZ1JlcGxheSIsIm5vQ3Vyc29yVGltZW91dCIsImF3YWl0RGF0YSIsImV4aGF1c3QiLCJwYXJ0aWFsIiwiaW5jUmVxdWVzdElkIiwibmV4dFJlcXVlc3RJZCIsInRvQmluIiwiYnVmZmVycyIsInByb2plY3Rpb24iLCJmbGFncyIsImhlYWRlciIsIkJ1ZmZlciIsImFsbG9jIiwiYnl0ZUxlbmd0aCIsInB1c2giLCJzZXJpYWxpemUiLCJrZXlzIiwibGVuZ3RoIiwidG90YWxMZW5ndGgiLCJpbmRleCIsIk9QX1FVRVJZIiwid3JpdGUiLCJtZXNzYWdlIiwibXNnSGVhZGVyIiwibXNnQm9keSIsIm9wdHMiLCJkb2N1bWVudHMiLCJBcnJheSIsIm1vcmVUb0NvbWUiLCJwYXJzZWQiLCJyYXciLCJkYXRhIiwidXNlQmlnSW50NjQiLCJwcm9tb3RlTG9uZ3MiLCJwcm9tb3RlVmFsdWVzIiwicHJvbW90ZUJ1ZmZlcnMiLCJic29uUmVnRXhwIiwicmVzcG9uc2VUbyIsIm9wQ29kZSIsImZyb21Db21wcmVzc2VkIiwiaXNQYXJzZWQiLCJwYXJzZSIsImRvY3VtZW50c1JldHVybmVkSW4iLCJic29uU2l6ZSIsIl9vcHRpb25zIiwicmVzcG9uc2VGbGFncyIsInJlYWRJbnQzMkxFIiwiY3Vyc29ySWQiLCJMb25nIiwic3RhcnRpbmdGcm9tIiwibnVtYmVyUmV0dXJuZWQiLCJjdXJzb3JOb3RGb3VuZCIsInF1ZXJ5RmFpbHVyZSIsInNoYXJkQ29uZmlnU3RhbGUiLCJhd2FpdENhcGFibGUiLCJpIiwic2xpY2UiLCJkZXNlcmlhbGl6ZSIsImZpZWxkc0FzUmF3IiwiZG9jIiwiT1BUU19DSEVDS1NVTV9QUkVTRU5UIiwiT1BUU19NT1JFX1RPX0NPTUUiLCJPUFRTX0VYSEFVU1RfQUxMT1dFRCIsImNvbW1hbmQiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiJGRiIiwiY2hlY2tzdW1QcmVzZW50IiwiZXhoYXVzdEFsbG93ZWQiLCJtYWtlRG9jdW1lbnRTZWdtZW50Iiwid3JpdGVJbnQzMkxFIiwiT1BfTVNHIiwid3JpdGVVSW50MzJMRSIsImRvY3VtZW50IiwicGF5bG9hZFR5cGVCdWZmZXIiLCJkb2N1bWVudEJ1ZmZlciIsInNlcmlhbGl6ZUJzb24iLCJ2YWxpZGF0aW9uIiwicGFyc2VCc29uU2VyaWFsaXphdGlvbk9wdGlvbnMiLCJic29uT3B0aW9ucyIsInBheWxvYWRUeXBlIiwicmVhZFVJbnQ4IiwicmVhZFVJbnQzMkxFIiwiYmluIiwiZW5hYmxlVXRmOFZhbGlkYXRpb24iLCJ1dGY4Iiwid3JpdGVFcnJvcnMiLCJNRVNTQUdFX0hFQURFUl9TSVpFIiwiQ09NUFJFU1NJT05fREVUQUlMU19TSVpFIiwiY2FuQ29tcHJlc3MiLCJjb21tYW5kRG9jIiwiY29tbWFuZE5hbWUiLCJ1bmNvbXByZXNzaWJsZUNvbW1hbmRzIiwiaGFzIiwiY29uY2F0ZW5hdGVkT3JpZ2luYWxDb21tYW5kQnVmZmVyIiwiY29uY2F0IiwibWVzc2FnZVRvQmVDb21wcmVzc2VkIiwib3JpZ2luYWxDb21tYW5kT3BDb2RlIiwiY29tcHJlc3NlZE1lc3NhZ2UiLCJjb21wcmVzcyIsIk9QX0NPTVBSRVNTRUQiLCJjb21wcmVzc2lvbkRldGFpbHMiLCJ3cml0ZVVJbnQ4IiwiQ29tcHJlc3NvciIsImFncmVlZENvbXByZXNzb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/commands.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/connect.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/connect.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.makeSocket = exports.LEGAL_TCP_SOCKET_OPTIONS = exports.LEGAL_TLS_SOCKET_OPTIONS = exports.prepareHandshakeDocument = exports.performInitialHandshake = exports.makeConnection = exports.connect = void 0;\nconst net = __webpack_require__(/*! net */ \"net\");\nconst tls = __webpack_require__(/*! tls */ \"tls\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst deps_1 = __webpack_require__(/*! ../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst auth_provider_1 = __webpack_require__(/*! ./auth/auth_provider */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/auth_provider.js\");\nconst providers_1 = __webpack_require__(/*! ./auth/providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst connection_1 = __webpack_require__(/*! ./connection */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection.js\");\nconst constants_2 = __webpack_require__(/*! ./wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\nasync function connect(options) {\n    let connection = null;\n    try {\n        const socket = await makeSocket(options);\n        connection = makeConnection(options, socket);\n        await performInitialHandshake(connection, options);\n        return connection;\n    } catch (error) {\n        connection?.destroy();\n        throw error;\n    }\n}\nexports.connect = connect;\nfunction makeConnection(options, socket) {\n    let ConnectionType = options.connectionType ?? connection_1.Connection;\n    if (options.autoEncrypter) {\n        ConnectionType = connection_1.CryptoConnection;\n    }\n    return new ConnectionType(socket, options);\n}\nexports.makeConnection = makeConnection;\nfunction checkSupportedServer(hello, options) {\n    const maxWireVersion = Number(hello.maxWireVersion);\n    const minWireVersion = Number(hello.minWireVersion);\n    const serverVersionHighEnough = !Number.isNaN(maxWireVersion) && maxWireVersion >= constants_2.MIN_SUPPORTED_WIRE_VERSION;\n    const serverVersionLowEnough = !Number.isNaN(minWireVersion) && minWireVersion <= constants_2.MAX_SUPPORTED_WIRE_VERSION;\n    if (serverVersionHighEnough) {\n        if (serverVersionLowEnough) {\n            return null;\n        }\n        const message = `Server at ${options.hostAddress} reports minimum wire version ${JSON.stringify(hello.minWireVersion)}, but this version of the Node.js Driver requires at most ${constants_2.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${constants_2.MAX_SUPPORTED_SERVER_VERSION})`;\n        return new error_1.MongoCompatibilityError(message);\n    }\n    const message = `Server at ${options.hostAddress} reports maximum wire version ${JSON.stringify(hello.maxWireVersion) ?? 0}, but this version of the Node.js Driver requires at least ${constants_2.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${constants_2.MIN_SUPPORTED_SERVER_VERSION})`;\n    return new error_1.MongoCompatibilityError(message);\n}\nasync function performInitialHandshake(conn, options) {\n    const credentials = options.credentials;\n    if (credentials) {\n        if (!(credentials.mechanism === providers_1.AuthMechanism.MONGODB_DEFAULT) && !options.authProviders.getOrCreateProvider(credentials.mechanism)) {\n            throw new error_1.MongoInvalidArgumentError(`AuthMechanism '${credentials.mechanism}' not supported`);\n        }\n    }\n    const authContext = new auth_provider_1.AuthContext(conn, credentials, options);\n    conn.authContext = authContext;\n    const handshakeDoc = await prepareHandshakeDocument(authContext);\n    // @ts-expect-error: TODO(NODE-5141): The options need to be filtered properly, Connection options differ from Command options\n    const handshakeOptions = {\n        ...options\n    };\n    if (typeof options.connectTimeoutMS === \"number\") {\n        // The handshake technically is a monitoring check, so its socket timeout should be connectTimeoutMS\n        handshakeOptions.socketTimeoutMS = options.connectTimeoutMS;\n    }\n    const start = new Date().getTime();\n    const response = await conn.command((0, utils_1.ns)(\"admin.$cmd\"), handshakeDoc, handshakeOptions);\n    if (!(\"isWritablePrimary\" in response)) {\n        // Provide hello-style response document.\n        response.isWritablePrimary = response[constants_1.LEGACY_HELLO_COMMAND];\n    }\n    if (response.helloOk) {\n        conn.helloOk = true;\n    }\n    const supportedServerErr = checkSupportedServer(response, options);\n    if (supportedServerErr) {\n        throw supportedServerErr;\n    }\n    if (options.loadBalanced) {\n        if (!response.serviceId) {\n            throw new error_1.MongoCompatibilityError(\"Driver attempted to initialize in load balancing mode, \" + \"but the server does not support this mode.\");\n        }\n    }\n    // NOTE: This is metadata attached to the connection while porting away from\n    //       handshake being done in the `Server` class. Likely, it should be\n    //       relocated, or at very least restructured.\n    conn.hello = response;\n    conn.lastHelloMS = new Date().getTime() - start;\n    if (!response.arbiterOnly && credentials) {\n        // store the response on auth context\n        authContext.response = response;\n        const resolvedCredentials = credentials.resolveAuthMechanism(response);\n        const provider = options.authProviders.getOrCreateProvider(resolvedCredentials.mechanism);\n        if (!provider) {\n            throw new error_1.MongoInvalidArgumentError(`No AuthProvider for ${resolvedCredentials.mechanism} defined.`);\n        }\n        try {\n            await provider.auth(authContext);\n        } catch (error) {\n            if (error instanceof error_1.MongoError) {\n                error.addErrorLabel(error_1.MongoErrorLabel.HandshakeError);\n                if ((0, error_1.needsRetryableWriteLabel)(error, response.maxWireVersion)) {\n                    error.addErrorLabel(error_1.MongoErrorLabel.RetryableWriteError);\n                }\n            }\n            throw error;\n        }\n    }\n    // Connection establishment is socket creation (tcp handshake, tls handshake, MongoDB handshake (saslStart, saslContinue))\n    // Once connection is established, command logging can log events (if enabled)\n    conn.established = true;\n}\nexports.performInitialHandshake = performInitialHandshake;\n/**\n * @internal\n *\n * This function is only exposed for testing purposes.\n */ async function prepareHandshakeDocument(authContext) {\n    const options = authContext.options;\n    const compressors = options.compressors ? options.compressors : [];\n    const { serverApi } = authContext.connection;\n    const clientMetadata = await options.extendedMetadata;\n    const handshakeDoc = {\n        [serverApi?.version || options.loadBalanced === true ? \"hello\" : constants_1.LEGACY_HELLO_COMMAND]: 1,\n        helloOk: true,\n        client: clientMetadata,\n        compression: compressors\n    };\n    if (options.loadBalanced === true) {\n        handshakeDoc.loadBalanced = true;\n    }\n    const credentials = authContext.credentials;\n    if (credentials) {\n        if (credentials.mechanism === providers_1.AuthMechanism.MONGODB_DEFAULT && credentials.username) {\n            handshakeDoc.saslSupportedMechs = `${credentials.source}.${credentials.username}`;\n            const provider = authContext.options.authProviders.getOrCreateProvider(providers_1.AuthMechanism.MONGODB_SCRAM_SHA256);\n            if (!provider) {\n                // This auth mechanism is always present.\n                throw new error_1.MongoInvalidArgumentError(`No AuthProvider for ${providers_1.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);\n            }\n            return provider.prepare(handshakeDoc, authContext);\n        }\n        const provider = authContext.options.authProviders.getOrCreateProvider(credentials.mechanism);\n        if (!provider) {\n            throw new error_1.MongoInvalidArgumentError(`No AuthProvider for ${credentials.mechanism} defined.`);\n        }\n        return provider.prepare(handshakeDoc, authContext);\n    }\n    return handshakeDoc;\n}\nexports.prepareHandshakeDocument = prepareHandshakeDocument;\n/** @public */ exports.LEGAL_TLS_SOCKET_OPTIONS = [\n    \"ALPNProtocols\",\n    \"ca\",\n    \"cert\",\n    \"checkServerIdentity\",\n    \"ciphers\",\n    \"crl\",\n    \"ecdhCurve\",\n    \"key\",\n    \"minDHSize\",\n    \"passphrase\",\n    \"pfx\",\n    \"rejectUnauthorized\",\n    \"secureContext\",\n    \"secureProtocol\",\n    \"servername\",\n    \"session\"\n];\n/** @public */ exports.LEGAL_TCP_SOCKET_OPTIONS = [\n    \"family\",\n    \"hints\",\n    \"localAddress\",\n    \"localPort\",\n    \"lookup\"\n];\nfunction parseConnectOptions(options) {\n    const hostAddress = options.hostAddress;\n    if (!hostAddress) throw new error_1.MongoInvalidArgumentError('Option \"hostAddress\" is required');\n    const result = {};\n    for (const name of exports.LEGAL_TCP_SOCKET_OPTIONS){\n        if (options[name] != null) {\n            result[name] = options[name];\n        }\n    }\n    if (typeof hostAddress.socketPath === \"string\") {\n        result.path = hostAddress.socketPath;\n        return result;\n    } else if (typeof hostAddress.host === \"string\") {\n        result.host = hostAddress.host;\n        result.port = hostAddress.port;\n        return result;\n    } else {\n        // This should never happen since we set up HostAddresses\n        // But if we don't throw here the socket could hang until timeout\n        // TODO(NODE-3483)\n        throw new error_1.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(hostAddress)}`);\n    }\n}\nfunction parseSslOptions(options) {\n    const result = parseConnectOptions(options);\n    // Merge in valid SSL options\n    for (const name of exports.LEGAL_TLS_SOCKET_OPTIONS){\n        if (options[name] != null) {\n            result[name] = options[name];\n        }\n    }\n    if (options.existingSocket) {\n        result.socket = options.existingSocket;\n    }\n    // Set default sni servername to be the same as host\n    if (result.servername == null && result.host && !net.isIP(result.host)) {\n        result.servername = result.host;\n    }\n    return result;\n}\nasync function makeSocket(options) {\n    const useTLS = options.tls ?? false;\n    const noDelay = options.noDelay ?? true;\n    const connectTimeoutMS = options.connectTimeoutMS ?? 30000;\n    const existingSocket = options.existingSocket;\n    let socket;\n    if (options.proxyHost != null) {\n        // Currently, only Socks5 is supported.\n        return makeSocks5Connection({\n            ...options,\n            connectTimeoutMS\n        });\n    }\n    if (useTLS) {\n        const tlsSocket = tls.connect(parseSslOptions(options));\n        if (typeof tlsSocket.disableRenegotiation === \"function\") {\n            tlsSocket.disableRenegotiation();\n        }\n        socket = tlsSocket;\n    } else if (existingSocket) {\n        // In the TLS case, parseSslOptions() sets options.socket to existingSocket,\n        // so we only need to handle the non-TLS case here (where existingSocket\n        // gives us all we need out of the box).\n        socket = existingSocket;\n    } else {\n        socket = net.createConnection(parseConnectOptions(options));\n    }\n    socket.setKeepAlive(true, 300000);\n    socket.setTimeout(connectTimeoutMS);\n    socket.setNoDelay(noDelay);\n    let cancellationHandler = null;\n    const { promise: connectedSocket, resolve, reject } = (0, utils_1.promiseWithResolvers)();\n    if (existingSocket) {\n        resolve(socket);\n    } else {\n        const connectEvent = useTLS ? \"secureConnect\" : \"connect\";\n        socket.once(connectEvent, ()=>resolve(socket)).once(\"error\", (error)=>reject(connectionFailureError(\"error\", error))).once(\"timeout\", ()=>reject(connectionFailureError(\"timeout\"))).once(\"close\", ()=>reject(connectionFailureError(\"close\")));\n        if (options.cancellationToken != null) {\n            cancellationHandler = ()=>reject(connectionFailureError(\"cancel\"));\n            options.cancellationToken.once(\"cancel\", cancellationHandler);\n        }\n    }\n    try {\n        socket = await connectedSocket;\n        return socket;\n    } catch (error) {\n        socket.destroy();\n        throw error;\n    } finally{\n        socket.setTimeout(0);\n        socket.removeAllListeners();\n        if (cancellationHandler != null) {\n            options.cancellationToken?.removeListener(\"cancel\", cancellationHandler);\n        }\n    }\n}\nexports.makeSocket = makeSocket;\nlet socks = null;\nfunction loadSocks() {\n    if (socks == null) {\n        const socksImport = (0, deps_1.getSocks)();\n        if (\"kModuleError\" in socksImport) {\n            throw socksImport.kModuleError;\n        }\n        socks = socksImport;\n    }\n    return socks;\n}\nasync function makeSocks5Connection(options) {\n    const hostAddress = utils_1.HostAddress.fromHostPort(options.proxyHost ?? \"\", options.proxyPort ?? 1080);\n    // First, connect to the proxy server itself:\n    const rawSocket = await makeSocket({\n        ...options,\n        hostAddress,\n        tls: false,\n        proxyHost: undefined\n    });\n    const destination = parseConnectOptions(options);\n    if (typeof destination.host !== \"string\" || typeof destination.port !== \"number\") {\n        throw new error_1.MongoInvalidArgumentError(\"Can only make Socks5 connections to TCP hosts\");\n    }\n    socks ??= loadSocks();\n    try {\n        // Then, establish the Socks5 proxy connection:\n        const { socket } = await socks.SocksClient.createConnection({\n            existing_socket: rawSocket,\n            timeout: options.connectTimeoutMS,\n            command: \"connect\",\n            destination: {\n                host: destination.host,\n                port: destination.port\n            },\n            proxy: {\n                // host and port are ignored because we pass existing_socket\n                host: \"iLoveJavaScript\",\n                port: 0,\n                type: 5,\n                userId: options.proxyUsername || undefined,\n                password: options.proxyPassword || undefined\n            }\n        });\n        // Finally, now treat the resulting duplex stream as the\n        // socket over which we send and receive wire protocol messages:\n        return await makeSocket({\n            ...options,\n            existingSocket: socket,\n            proxyHost: undefined\n        });\n    } catch (error) {\n        throw connectionFailureError(\"error\", error);\n    }\n}\nfunction connectionFailureError(type, cause) {\n    switch(type){\n        case \"error\":\n            return new error_1.MongoNetworkError(error_1.MongoError.buildErrorMessage(cause), {\n                cause\n            });\n        case \"timeout\":\n            return new error_1.MongoNetworkTimeoutError(\"connection timed out\");\n        case \"close\":\n            return new error_1.MongoNetworkError(\"connection closed\");\n        case \"cancel\":\n            return new error_1.MongoNetworkError(\"connection establishment was cancelled\");\n        default:\n            return new error_1.MongoNetworkError(\"unknown network error\");\n    }\n} //# sourceMappingURL=connect.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBR0EsZ0NBQWdDLEdBQUdBLGdDQUFnQyxHQUFHQSxnQ0FBZ0MsR0FBR0EsK0JBQStCLEdBQUdBLHNCQUFzQixHQUFHQSxlQUFlLEdBQUcsS0FBSztBQUNoTixNQUFNUyxNQUFNQyxtQkFBT0EsQ0FBQyxnQkFBSztBQUN6QixNQUFNQyxNQUFNRCxtQkFBT0EsQ0FBQyxnQkFBSztBQUN6QixNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyxtRUFBYztBQUMxQyxNQUFNRyxTQUFTSCxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNSyxVQUFVTCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNTSxrQkFBa0JOLG1CQUFPQSxDQUFDLHlGQUFzQjtBQUN0RCxNQUFNTyxjQUFjUCxtQkFBT0EsQ0FBQyxpRkFBa0I7QUFDOUMsTUFBTVEsZUFBZVIsbUJBQU9BLENBQUMseUVBQWM7QUFDM0MsTUFBTVMsY0FBY1QsbUJBQU9BLENBQUMsbUdBQTJCO0FBQ3ZELGVBQWVGLFFBQVFZLE9BQU87SUFDMUIsSUFBSUMsYUFBYTtJQUNqQixJQUFJO1FBQ0EsTUFBTUMsU0FBUyxNQUFNcEIsV0FBV2tCO1FBQ2hDQyxhQUFhZCxlQUFlYSxTQUFTRTtRQUNyQyxNQUFNaEIsd0JBQXdCZSxZQUFZRDtRQUMxQyxPQUFPQztJQUNYLEVBQ0EsT0FBT0UsT0FBTztRQUNWRixZQUFZRztRQUNaLE1BQU1EO0lBQ1Y7QUFDSjtBQUNBdkIsZUFBZSxHQUFHUTtBQUNsQixTQUFTRCxlQUFlYSxPQUFPLEVBQUVFLE1BQU07SUFDbkMsSUFBSUcsaUJBQWlCTCxRQUFRTSxjQUFjLElBQUlSLGFBQWFTLFVBQVU7SUFDdEUsSUFB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STtnQkFDdEJDLE1BQU1zQyxZQUFZdEMsSUFBSTtZQUMxQjtZQUNBMEMsT0FBTztnQkFDSCw0REFBNEQ7Z0JBQzVEM0MsTUFBTTtnQkFDTkMsTUFBTTtnQkFDTjJDLE1BQU07Z0JBQ05DLFFBQVFoSSxRQUFRaUksYUFBYSxJQUFJUjtnQkFDakNTLFVBQVVsSSxRQUFRbUksYUFBYSxJQUFJVjtZQUN2QztRQUNKO1FBQ0Esd0RBQXdEO1FBQ3hELGdFQUFnRTtRQUNoRSxPQUFPLE1BQU0zSSxXQUFXO1lBQ3BCLEdBQUdrQixPQUFPO1lBQ1Z1RixnQkFBZ0JyRjtZQUNoQjBGLFdBQVc2QjtRQUNmO0lBQ0osRUFDQSxPQUFPdEgsT0FBTztRQUNWLE1BQU15Ryx1QkFBdUIsU0FBU3pHO0lBQzFDO0FBQ0o7QUFDQSxTQUFTeUcsdUJBQXVCbUIsSUFBSSxFQUFFSyxLQUFLO0lBQ3ZDLE9BQVFMO1FBQ0osS0FBSztZQUNELE9BQU8sSUFBSXJJLFFBQVEySSxpQkFBaUIsQ0FBQzNJLFFBQVFpRSxVQUFVLENBQUMyRSxpQkFBaUIsQ0FBQ0YsUUFBUTtnQkFBRUE7WUFBTTtRQUM5RixLQUFLO1lBQ0QsT0FBTyxJQUFJMUksUUFBUTZJLHdCQUF3QixDQUFDO1FBQ2hELEtBQUs7WUFDRCxPQUFPLElBQUk3SSxRQUFRMkksaUJBQWlCLENBQUM7UUFDekMsS0FBSztZQUNELE9BQU8sSUFBSTNJLFFBQVEySSxpQkFBaUIsQ0FBQztRQUN6QztZQUNJLE9BQU8sSUFBSTNJLFFBQVEySSxpQkFBaUIsQ0FBQztJQUM3QztBQUNKLEVBQ0EsbUNBQW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL2Nvbm5lY3QuanM/NzM0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubWFrZVNvY2tldCA9IGV4cG9ydHMuTEVHQUxfVENQX1NPQ0tFVF9PUFRJT05TID0gZXhwb3J0cy5MRUdBTF9UTFNfU09DS0VUX09QVElPTlMgPSBleHBvcnRzLnByZXBhcmVIYW5kc2hha2VEb2N1bWVudCA9IGV4cG9ydHMucGVyZm9ybUluaXRpYWxIYW5kc2hha2UgPSBleHBvcnRzLm1ha2VDb25uZWN0aW9uID0gZXhwb3J0cy5jb25uZWN0ID0gdm9pZCAwO1xuY29uc3QgbmV0ID0gcmVxdWlyZShcIm5ldFwiKTtcbmNvbnN0IHRscyA9IHJlcXVpcmUoXCJ0bHNcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5jb25zdCBkZXBzXzEgPSByZXF1aXJlKFwiLi4vZGVwc1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgYXV0aF9wcm92aWRlcl8xID0gcmVxdWlyZShcIi4vYXV0aC9hdXRoX3Byb3ZpZGVyXCIpO1xuY29uc3QgcHJvdmlkZXJzXzEgPSByZXF1aXJlKFwiLi9hdXRoL3Byb3ZpZGVyc1wiKTtcbmNvbnN0IGNvbm5lY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2Nvbm5lY3Rpb25cIik7XG5jb25zdCBjb25zdGFudHNfMiA9IHJlcXVpcmUoXCIuL3dpcmVfcHJvdG9jb2wvY29uc3RhbnRzXCIpO1xuYXN5bmMgZnVuY3Rpb24gY29ubmVjdChvcHRpb25zKSB7XG4gICAgbGV0IGNvbm5lY3Rpb24gPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNvY2tldCA9IGF3YWl0IG1ha2VTb2NrZXQob3B0aW9ucyk7XG4gICAgICAgIGNvbm5lY3Rpb24gPSBtYWtlQ29ubmVjdGlvbihvcHRpb25zLCBzb2NrZXQpO1xuICAgICAgICBhd2FpdCBwZXJmb3JtSW5pdGlhbEhhbmRzaGFrZShjb25uZWN0aW9uLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25uZWN0aW9uPy5kZXN0cm95KCk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbmV4cG9ydHMuY29ubmVjdCA9IGNvbm5lY3Q7XG5mdW5jdGlvbiBtYWtlQ29ubmVjdGlvbihvcHRpb25zLCBzb2NrZXQpIHtcbiAgICBsZXQgQ29ubmVjdGlvblR5cGUgPSBvcHRpb25zLmNvbm5lY3Rpb25UeXBlID8/IGNvbm5lY3Rpb25fMS5Db25uZWN0aW9uO1xuICAgIGlmIChvcHRpb25zLmF1dG9FbmNyeXB0ZXIpIHtcbiAgICAgICAgQ29ubmVjdGlvblR5cGUgPSBjb25uZWN0aW9uXzEuQ3J5cHRvQ29ubmVjdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDb25uZWN0aW9uVHlwZShzb2NrZXQsIG9wdGlvbnMpO1xufVxuZXhwb3J0cy5tYWtlQ29ubmVjdGlvbiA9IG1ha2VDb25uZWN0aW9uO1xuZnVuY3Rpb24gY2hlY2tTdXBwb3J0ZWRTZXJ2ZXIoaGVsbG8sIG9wdGlvbnMpIHtcbiAgICBjb25zdCBtYXhXaXJlVmVyc2lvbiA9IE51bWJlcihoZWxsby5tYXhXaXJlVmVyc2lvbik7XG4gICAgY29uc3QgbWluV2lyZVZlcnNpb24gPSBOdW1iZXIoaGVsbG8ubWluV2lyZVZlcnNpb24pO1xuICAgIGNvbnN0IHNlcnZlclZlcnNpb25IaWdoRW5vdWdoID0gIU51bWJlci5pc05hTihtYXhXaXJlVmVyc2lvbikgJiYgbWF4V2lyZVZlcnNpb24gPj0gY29uc3RhbnRzXzIuTUlOX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT047XG4gICAgY29uc3Qgc2VydmVyVmVyc2lvbkxvd0Vub3VnaCA9ICFOdW1iZXIuaXNOYU4obWluV2lyZVZlcnNpb24pICYmIG1pbldpcmVWZXJzaW9uIDw9IGNvbnN0YW50c18yLk1BWF9TVVBQT1JURURfV0lSRV9WRVJTSU9OO1xuICAgIGlmIChzZXJ2ZXJWZXJzaW9uSGlnaEVub3VnaCkge1xuICAgICAgICBpZiAoc2VydmVyVmVyc2lvbkxvd0Vub3VnaCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBTZXJ2ZXIgYXQgJHtvcHRpb25zLmhvc3RBZGRyZXNzfSByZXBvcnRzIG1pbmltdW0gd2lyZSB2ZXJzaW9uICR7SlNPTi5zdHJpbmdpZnkoaGVsbG8ubWluV2lyZVZlcnNpb24pfSwgYnV0IHRoaXMgdmVyc2lvbiBvZiB0aGUgTm9kZS5qcyBEcml2ZXIgcmVxdWlyZXMgYXQgbW9zdCAke2NvbnN0YW50c18yLk1BWF9TVVBQT1JURURfV0lSRV9WRVJTSU9OfSAoTW9uZ29EQiAke2NvbnN0YW50c18yLk1BWF9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT059KWA7XG4gICAgICAgIHJldHVybiBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgY29uc3QgbWVzc2FnZSA9IGBTZXJ2ZXIgYXQgJHtvcHRpb25zLmhvc3RBZGRyZXNzfSByZXBvcnRzIG1heGltdW0gd2lyZSB2ZXJzaW9uICR7SlNPTi5zdHJpbmdpZnkoaGVsbG8ubWF4V2lyZVZlcnNpb24pID8/IDB9LCBidXQgdGhpcyB2ZXJzaW9uIG9mIHRoZSBOb2RlLmpzIERyaXZlciByZXF1aXJlcyBhdCBsZWFzdCAke2NvbnN0YW50c18yLk1JTl9TVVBQT1JURURfV0lSRV9WRVJTSU9OfSAoTW9uZ29EQiAke2NvbnN0YW50c18yLk1JTl9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT059KWA7XG4gICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKG1lc3NhZ2UpO1xufVxuYXN5bmMgZnVuY3Rpb24gcGVyZm9ybUluaXRpYWxIYW5kc2hha2UoY29ubiwgb3B0aW9ucykge1xuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscztcbiAgICBpZiAoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgaWYgKCEoY3JlZGVudGlhbHMubWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfREVGQVVMVCkgJiZcbiAgICAgICAgICAgICFvcHRpb25zLmF1dGhQcm92aWRlcnMuZ2V0T3JDcmVhdGVQcm92aWRlcihjcmVkZW50aWFscy5tZWNoYW5pc20pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBBdXRoTWVjaGFuaXNtICcke2NyZWRlbnRpYWxzLm1lY2hhbmlzbX0nIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhdXRoQ29udGV4dCA9IG5ldyBhdXRoX3Byb3ZpZGVyXzEuQXV0aENvbnRleHQoY29ubiwgY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuICAgIGNvbm4uYXV0aENvbnRleHQgPSBhdXRoQ29udGV4dDtcbiAgICBjb25zdCBoYW5kc2hha2VEb2MgPSBhd2FpdCBwcmVwYXJlSGFuZHNoYWtlRG9jdW1lbnQoYXV0aENvbnRleHQpO1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IFRPRE8oTk9ERS01MTQxKTogVGhlIG9wdGlvbnMgbmVlZCB0byBiZSBmaWx0ZXJlZCBwcm9wZXJseSwgQ29ubmVjdGlvbiBvcHRpb25zIGRpZmZlciBmcm9tIENvbW1hbmQgb3B0aW9uc1xuICAgIGNvbnN0IGhhbmRzaGFrZU9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29ubmVjdFRpbWVvdXRNUyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgLy8gVGhlIGhhbmRzaGFrZSB0ZWNobmljYWxseSBpcyBhIG1vbml0b3JpbmcgY2hlY2ssIHNvIGl0cyBzb2NrZXQgdGltZW91dCBzaG91bGQgYmUgY29ubmVjdFRpbWVvdXRNU1xuICAgICAgICBoYW5kc2hha2VPcHRpb25zLnNvY2tldFRpbWVvdXRNUyA9IG9wdGlvbnMuY29ubmVjdFRpbWVvdXRNUztcbiAgICB9XG4gICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbm4uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJ2FkbWluLiRjbWQnKSwgaGFuZHNoYWtlRG9jLCBoYW5kc2hha2VPcHRpb25zKTtcbiAgICBpZiAoISgnaXNXcml0YWJsZVByaW1hcnknIGluIHJlc3BvbnNlKSkge1xuICAgICAgICAvLyBQcm92aWRlIGhlbGxvLXN0eWxlIHJlc3BvbnNlIGRvY3VtZW50LlxuICAgICAgICByZXNwb25zZS5pc1dyaXRhYmxlUHJpbWFyeSA9IHJlc3BvbnNlW2NvbnN0YW50c18xLkxFR0FDWV9IRUxMT19DT01NQU5EXTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLmhlbGxvT2spIHtcbiAgICAgICAgY29ubi5oZWxsb09rID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydGVkU2VydmVyRXJyID0gY2hlY2tTdXBwb3J0ZWRTZXJ2ZXIocmVzcG9uc2UsIG9wdGlvbnMpO1xuICAgIGlmIChzdXBwb3J0ZWRTZXJ2ZXJFcnIpIHtcbiAgICAgICAgdGhyb3cgc3VwcG9ydGVkU2VydmVyRXJyO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5zZXJ2aWNlSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKCdEcml2ZXIgYXR0ZW1wdGVkIHRvIGluaXRpYWxpemUgaW4gbG9hZCBiYWxhbmNpbmcgbW9kZSwgJyArXG4gICAgICAgICAgICAgICAgJ2J1dCB0aGUgc2VydmVyIGRvZXMgbm90IHN1cHBvcnQgdGhpcyBtb2RlLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIE5PVEU6IFRoaXMgaXMgbWV0YWRhdGEgYXR0YWNoZWQgdG8gdGhlIGNvbm5lY3Rpb24gd2hpbGUgcG9ydGluZyBhd2F5IGZyb21cbiAgICAvLyAgICAgICBoYW5kc2hha2UgYmVpbmcgZG9uZSBpbiB0aGUgYFNlcnZlcmAgY2xhc3MuIExpa2VseSwgaXQgc2hvdWxkIGJlXG4gICAgLy8gICAgICAgcmVsb2NhdGVkLCBvciBhdCB2ZXJ5IGxlYXN0IHJlc3RydWN0dXJlZC5cbiAgICBjb25uLmhlbGxvID0gcmVzcG9uc2U7XG4gICAgY29ubi5sYXN0SGVsbG9NUyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnQ7XG4gICAgaWYgKCFyZXNwb25zZS5hcmJpdGVyT25seSAmJiBjcmVkZW50aWFscykge1xuICAgICAgICAvLyBzdG9yZSB0aGUgcmVzcG9uc2Ugb24gYXV0aCBjb250ZXh0XG4gICAgICAgIGF1dGhDb250ZXh0LnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkQ3JlZGVudGlhbHMgPSBjcmVkZW50aWFscy5yZXNvbHZlQXV0aE1lY2hhbmlzbShyZXNwb25zZSk7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gb3B0aW9ucy5hdXRoUHJvdmlkZXJzLmdldE9yQ3JlYXRlUHJvdmlkZXIocmVzb2x2ZWRDcmVkZW50aWFscy5tZWNoYW5pc20pO1xuICAgICAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBObyBBdXRoUHJvdmlkZXIgZm9yICR7cmVzb2x2ZWRDcmVkZW50aWFscy5tZWNoYW5pc219IGRlZmluZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHByb3ZpZGVyLmF1dGgoYXV0aENvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IuYWRkRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5IYW5kc2hha2VFcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKCgwLCBlcnJvcl8xLm5lZWRzUmV0cnlhYmxlV3JpdGVMYWJlbCkoZXJyb3IsIHJlc3BvbnNlLm1heFdpcmVWZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJldHJ5YWJsZVdyaXRlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENvbm5lY3Rpb24gZXN0YWJsaXNobWVudCBpcyBzb2NrZXQgY3JlYXRpb24gKHRjcCBoYW5kc2hha2UsIHRscyBoYW5kc2hha2UsIE1vbmdvREIgaGFuZHNoYWtlIChzYXNsU3RhcnQsIHNhc2xDb250aW51ZSkpXG4gICAgLy8gT25jZSBjb25uZWN0aW9uIGlzIGVzdGFibGlzaGVkLCBjb21tYW5kIGxvZ2dpbmcgY2FuIGxvZyBldmVudHMgKGlmIGVuYWJsZWQpXG4gICAgY29ubi5lc3RhYmxpc2hlZCA9IHRydWU7XG59XG5leHBvcnRzLnBlcmZvcm1Jbml0aWFsSGFuZHNoYWtlID0gcGVyZm9ybUluaXRpYWxIYW5kc2hha2U7XG4vKipcbiAqIEBpbnRlcm5hbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgb25seSBleHBvc2VkIGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICovXG5hc3luYyBmdW5jdGlvbiBwcmVwYXJlSGFuZHNoYWtlRG9jdW1lbnQoYXV0aENvbnRleHQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gYXV0aENvbnRleHQub3B0aW9ucztcbiAgICBjb25zdCBjb21wcmVzc29ycyA9IG9wdGlvbnMuY29tcHJlc3NvcnMgPyBvcHRpb25zLmNvbXByZXNzb3JzIDogW107XG4gICAgY29uc3QgeyBzZXJ2ZXJBcGkgfSA9IGF1dGhDb250ZXh0LmNvbm5lY3Rpb247XG4gICAgY29uc3QgY2xpZW50TWV0YWRhdGEgPSBhd2FpdCBvcHRpb25zLmV4dGVuZGVkTWV0YWRhdGE7XG4gICAgY29uc3QgaGFuZHNoYWtlRG9jID0ge1xuICAgICAgICBbc2VydmVyQXBpPy52ZXJzaW9uIHx8IG9wdGlvbnMubG9hZEJhbGFuY2VkID09PSB0cnVlID8gJ2hlbGxvJyA6IGNvbnN0YW50c18xLkxFR0FDWV9IRUxMT19DT01NQU5EXTogMSxcbiAgICAgICAgaGVsbG9PazogdHJ1ZSxcbiAgICAgICAgY2xpZW50OiBjbGllbnRNZXRhZGF0YSxcbiAgICAgICAgY29tcHJlc3Npb246IGNvbXByZXNzb3JzXG4gICAgfTtcbiAgICBpZiAob3B0aW9ucy5sb2FkQmFsYW5jZWQgPT09IHRydWUpIHtcbiAgICAgICAgaGFuZHNoYWtlRG9jLmxvYWRCYWxhbmNlZCA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXV0aENvbnRleHQuY3JlZGVudGlhbHM7XG4gICAgaWYgKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmIChjcmVkZW50aWFscy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9ERUZBVUxUICYmIGNyZWRlbnRpYWxzLnVzZXJuYW1lKSB7XG4gICAgICAgICAgICBoYW5kc2hha2VEb2Muc2FzbFN1cHBvcnRlZE1lY2hzID0gYCR7Y3JlZGVudGlhbHMuc291cmNlfS4ke2NyZWRlbnRpYWxzLnVzZXJuYW1lfWA7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGF1dGhDb250ZXh0Lm9wdGlvbnMuYXV0aFByb3ZpZGVycy5nZXRPckNyZWF0ZVByb3ZpZGVyKHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEEyNTYpO1xuICAgICAgICAgICAgaWYgKCFwcm92aWRlcikge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgYXV0aCBtZWNoYW5pc20gaXMgYWx3YXlzIHByZXNlbnQuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgTm8gQXV0aFByb3ZpZGVyIGZvciAke3Byb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9TQ1JBTV9TSEEyNTZ9IGRlZmluZWQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXIucHJlcGFyZShoYW5kc2hha2VEb2MsIGF1dGhDb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm92aWRlciA9IGF1dGhDb250ZXh0Lm9wdGlvbnMuYXV0aFByb3ZpZGVycy5nZXRPckNyZWF0ZVByb3ZpZGVyKGNyZWRlbnRpYWxzLm1lY2hhbmlzbSk7XG4gICAgICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYE5vIEF1dGhQcm92aWRlciBmb3IgJHtjcmVkZW50aWFscy5tZWNoYW5pc219IGRlZmluZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLnByZXBhcmUoaGFuZHNoYWtlRG9jLCBhdXRoQ29udGV4dCk7XG4gICAgfVxuICAgIHJldHVybiBoYW5kc2hha2VEb2M7XG59XG5leHBvcnRzLnByZXBhcmVIYW5kc2hha2VEb2N1bWVudCA9IHByZXBhcmVIYW5kc2hha2VEb2N1bWVudDtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLkxFR0FMX1RMU19TT0NLRVRfT1BUSU9OUyA9IFtcbiAgICAnQUxQTlByb3RvY29scycsXG4gICAgJ2NhJyxcbiAgICAnY2VydCcsXG4gICAgJ2NoZWNrU2VydmVySWRlbnRpdHknLFxuICAgICdjaXBoZXJzJyxcbiAgICAnY3JsJyxcbiAgICAnZWNkaEN1cnZlJyxcbiAgICAna2V5JyxcbiAgICAnbWluREhTaXplJyxcbiAgICAncGFzc3BocmFzZScsXG4gICAgJ3BmeCcsXG4gICAgJ3JlamVjdFVuYXV0aG9yaXplZCcsXG4gICAgJ3NlY3VyZUNvbnRleHQnLFxuICAgICdzZWN1cmVQcm90b2NvbCcsXG4gICAgJ3NlcnZlcm5hbWUnLFxuICAgICdzZXNzaW9uJ1xuXTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLkxFR0FMX1RDUF9TT0NLRVRfT1BUSU9OUyA9IFtcbiAgICAnZmFtaWx5JyxcbiAgICAnaGludHMnLFxuICAgICdsb2NhbEFkZHJlc3MnLFxuICAgICdsb2NhbFBvcnQnLFxuICAgICdsb29rdXAnXG5dO1xuZnVuY3Rpb24gcGFyc2VDb25uZWN0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgY29uc3QgaG9zdEFkZHJlc3MgPSBvcHRpb25zLmhvc3RBZGRyZXNzO1xuICAgIGlmICghaG9zdEFkZHJlc3MpXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ09wdGlvbiBcImhvc3RBZGRyZXNzXCIgaXMgcmVxdWlyZWQnKTtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgZXhwb3J0cy5MRUdBTF9UQ1BfU09DS0VUX09QVElPTlMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gb3B0aW9uc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGhvc3RBZGRyZXNzLnNvY2tldFBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlc3VsdC5wYXRoID0gaG9zdEFkZHJlc3Muc29ja2V0UGF0aDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGhvc3RBZGRyZXNzLmhvc3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlc3VsdC5ob3N0ID0gaG9zdEFkZHJlc3MuaG9zdDtcbiAgICAgICAgcmVzdWx0LnBvcnQgPSBob3N0QWRkcmVzcy5wb3J0O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuIHNpbmNlIHdlIHNldCB1cCBIb3N0QWRkcmVzc2VzXG4gICAgICAgIC8vIEJ1dCBpZiB3ZSBkb24ndCB0aHJvdyBoZXJlIHRoZSBzb2NrZXQgY291bGQgaGFuZyB1bnRpbCB0aW1lb3V0XG4gICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKVxuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgVW5leHBlY3RlZCBIb3N0QWRkcmVzcyAke0pTT04uc3RyaW5naWZ5KGhvc3RBZGRyZXNzKX1gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwYXJzZVNzbE9wdGlvbnMob3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29ubmVjdE9wdGlvbnMob3B0aW9ucyk7XG4gICAgLy8gTWVyZ2UgaW4gdmFsaWQgU1NMIG9wdGlvbnNcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgZXhwb3J0cy5MRUdBTF9UTFNfU09DS0VUX09QVElPTlMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gb3B0aW9uc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5leGlzdGluZ1NvY2tldCkge1xuICAgICAgICByZXN1bHQuc29ja2V0ID0gb3B0aW9ucy5leGlzdGluZ1NvY2tldDtcbiAgICB9XG4gICAgLy8gU2V0IGRlZmF1bHQgc25pIHNlcnZlcm5hbWUgdG8gYmUgdGhlIHNhbWUgYXMgaG9zdFxuICAgIGlmIChyZXN1bHQuc2VydmVybmFtZSA9PSBudWxsICYmIHJlc3VsdC5ob3N0ICYmICFuZXQuaXNJUChyZXN1bHQuaG9zdCkpIHtcbiAgICAgICAgcmVzdWx0LnNlcnZlcm5hbWUgPSByZXN1bHQuaG9zdDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmFzeW5jIGZ1bmN0aW9uIG1ha2VTb2NrZXQob3B0aW9ucykge1xuICAgIGNvbnN0IHVzZVRMUyA9IG9wdGlvbnMudGxzID8/IGZhbHNlO1xuICAgIGNvbnN0IG5vRGVsYXkgPSBvcHRpb25zLm5vRGVsYXkgPz8gdHJ1ZTtcbiAgICBjb25zdCBjb25uZWN0VGltZW91dE1TID0gb3B0aW9ucy5jb25uZWN0VGltZW91dE1TID8/IDMwMDAwO1xuICAgIGNvbnN0IGV4aXN0aW5nU29ja2V0ID0gb3B0aW9ucy5leGlzdGluZ1NvY2tldDtcbiAgICBsZXQgc29ja2V0O1xuICAgIGlmIChvcHRpb25zLnByb3h5SG9zdCAhPSBudWxsKSB7XG4gICAgICAgIC8vIEN1cnJlbnRseSwgb25seSBTb2NrczUgaXMgc3VwcG9ydGVkLlxuICAgICAgICByZXR1cm4gbWFrZVNvY2tzNUNvbm5lY3Rpb24oe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGNvbm5lY3RUaW1lb3V0TVMgLy8gU2hvdWxkIGFsd2F5cyBiZSBwcmVzZW50IGZvciBTb2NrczVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh1c2VUTFMpIHtcbiAgICAgICAgY29uc3QgdGxzU29ja2V0ID0gdGxzLmNvbm5lY3QocGFyc2VTc2xPcHRpb25zKG9wdGlvbnMpKTtcbiAgICAgICAgaWYgKHR5cGVvZiB0bHNTb2NrZXQuZGlzYWJsZVJlbmVnb3RpYXRpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRsc1NvY2tldC5kaXNhYmxlUmVuZWdvdGlhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHNvY2tldCA9IHRsc1NvY2tldDtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXhpc3RpbmdTb2NrZXQpIHtcbiAgICAgICAgLy8gSW4gdGhlIFRMUyBjYXNlLCBwYXJzZVNzbE9wdGlvbnMoKSBzZXRzIG9wdGlvbnMuc29ja2V0IHRvIGV4aXN0aW5nU29ja2V0LFxuICAgICAgICAvLyBzbyB3ZSBvbmx5IG5lZWQgdG8gaGFuZGxlIHRoZSBub24tVExTIGNhc2UgaGVyZSAod2hlcmUgZXhpc3RpbmdTb2NrZXRcbiAgICAgICAgLy8gZ2l2ZXMgdXMgYWxsIHdlIG5lZWQgb3V0IG9mIHRoZSBib3gpLlxuICAgICAgICBzb2NrZXQgPSBleGlzdGluZ1NvY2tldDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNvY2tldCA9IG5ldC5jcmVhdGVDb25uZWN0aW9uKHBhcnNlQ29ubmVjdE9wdGlvbnMob3B0aW9ucykpO1xuICAgIH1cbiAgICBzb2NrZXQuc2V0S2VlcEFsaXZlKHRydWUsIDMwMDAwMCk7XG4gICAgc29ja2V0LnNldFRpbWVvdXQoY29ubmVjdFRpbWVvdXRNUyk7XG4gICAgc29ja2V0LnNldE5vRGVsYXkobm9EZWxheSk7XG4gICAgbGV0IGNhbmNlbGxhdGlvbkhhbmRsZXIgPSBudWxsO1xuICAgIGNvbnN0IHsgcHJvbWlzZTogY29ubmVjdGVkU29ja2V0LCByZXNvbHZlLCByZWplY3QgfSA9ICgwLCB1dGlsc18xLnByb21pc2VXaXRoUmVzb2x2ZXJzKSgpO1xuICAgIGlmIChleGlzdGluZ1NvY2tldCkge1xuICAgICAgICByZXNvbHZlKHNvY2tldCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjb25uZWN0RXZlbnQgPSB1c2VUTFMgPyAnc2VjdXJlQ29ubmVjdCcgOiAnY29ubmVjdCc7XG4gICAgICAgIHNvY2tldFxuICAgICAgICAgICAgLm9uY2UoY29ubmVjdEV2ZW50LCAoKSA9PiByZXNvbHZlKHNvY2tldCkpXG4gICAgICAgICAgICAub25jZSgnZXJyb3InLCBlcnJvciA9PiByZWplY3QoY29ubmVjdGlvbkZhaWx1cmVFcnJvcignZXJyb3InLCBlcnJvcikpKVxuICAgICAgICAgICAgLm9uY2UoJ3RpbWVvdXQnLCAoKSA9PiByZWplY3QoY29ubmVjdGlvbkZhaWx1cmVFcnJvcigndGltZW91dCcpKSlcbiAgICAgICAgICAgIC5vbmNlKCdjbG9zZScsICgpID0+IHJlamVjdChjb25uZWN0aW9uRmFpbHVyZUVycm9yKCdjbG9zZScpKSk7XG4gICAgICAgIGlmIChvcHRpb25zLmNhbmNlbGxhdGlvblRva2VuICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNhbmNlbGxhdGlvbkhhbmRsZXIgPSAoKSA9PiByZWplY3QoY29ubmVjdGlvbkZhaWx1cmVFcnJvcignY2FuY2VsJykpO1xuICAgICAgICAgICAgb3B0aW9ucy5jYW5jZWxsYXRpb25Ub2tlbi5vbmNlKCdjYW5jZWwnLCBjYW5jZWxsYXRpb25IYW5kbGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBzb2NrZXQgPSBhd2FpdCBjb25uZWN0ZWRTb2NrZXQ7XG4gICAgICAgIHJldHVybiBzb2NrZXQ7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBzb2NrZXQuZGVzdHJveSgpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIHNvY2tldC5zZXRUaW1lb3V0KDApO1xuICAgICAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgIGlmIChjYW5jZWxsYXRpb25IYW5kbGVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuY2FuY2VsbGF0aW9uVG9rZW4/LnJlbW92ZUxpc3RlbmVyKCdjYW5jZWwnLCBjYW5jZWxsYXRpb25IYW5kbGVyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMubWFrZVNvY2tldCA9IG1ha2VTb2NrZXQ7XG5sZXQgc29ja3MgPSBudWxsO1xuZnVuY3Rpb24gbG9hZFNvY2tzKCkge1xuICAgIGlmIChzb2NrcyA9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHNvY2tzSW1wb3J0ID0gKDAsIGRlcHNfMS5nZXRTb2NrcykoKTtcbiAgICAgICAgaWYgKCdrTW9kdWxlRXJyb3InIGluIHNvY2tzSW1wb3J0KSB7XG4gICAgICAgICAgICB0aHJvdyBzb2Nrc0ltcG9ydC5rTW9kdWxlRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgc29ja3MgPSBzb2Nrc0ltcG9ydDtcbiAgICB9XG4gICAgcmV0dXJuIHNvY2tzO1xufVxuYXN5bmMgZnVuY3Rpb24gbWFrZVNvY2tzNUNvbm5lY3Rpb24ob3B0aW9ucykge1xuICAgIGNvbnN0IGhvc3RBZGRyZXNzID0gdXRpbHNfMS5Ib3N0QWRkcmVzcy5mcm9tSG9zdFBvcnQob3B0aW9ucy5wcm94eUhvc3QgPz8gJycsIC8vIHByb3h5SG9zdCBpcyBndWFyYW50ZWVkIHRvIHNldCBoZXJlXG4gICAgb3B0aW9ucy5wcm94eVBvcnQgPz8gMTA4MCk7XG4gICAgLy8gRmlyc3QsIGNvbm5lY3QgdG8gdGhlIHByb3h5IHNlcnZlciBpdHNlbGY6XG4gICAgY29uc3QgcmF3U29ja2V0ID0gYXdhaXQgbWFrZVNvY2tldCh7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGhvc3RBZGRyZXNzLFxuICAgICAgICB0bHM6IGZhbHNlLFxuICAgICAgICBwcm94eUhvc3Q6IHVuZGVmaW5lZFxuICAgIH0pO1xuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gcGFyc2VDb25uZWN0T3B0aW9ucyhvcHRpb25zKTtcbiAgICBpZiAodHlwZW9mIGRlc3RpbmF0aW9uLmhvc3QgIT09ICdzdHJpbmcnIHx8IHR5cGVvZiBkZXN0aW5hdGlvbi5wb3J0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdDYW4gb25seSBtYWtlIFNvY2tzNSBjb25uZWN0aW9ucyB0byBUQ1AgaG9zdHMnKTtcbiAgICB9XG4gICAgc29ja3MgPz89IGxvYWRTb2NrcygpO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIFRoZW4sIGVzdGFibGlzaCB0aGUgU29ja3M1IHByb3h5IGNvbm5lY3Rpb246XG4gICAgICAgIGNvbnN0IHsgc29ja2V0IH0gPSBhd2FpdCBzb2Nrcy5Tb2Nrc0NsaWVudC5jcmVhdGVDb25uZWN0aW9uKHtcbiAgICAgICAgICAgIGV4aXN0aW5nX3NvY2tldDogcmF3U29ja2V0LFxuICAgICAgICAgICAgdGltZW91dDogb3B0aW9ucy5jb25uZWN0VGltZW91dE1TLFxuICAgICAgICAgICAgY29tbWFuZDogJ2Nvbm5lY3QnLFxuICAgICAgICAgICAgZGVzdGluYXRpb246IHtcbiAgICAgICAgICAgICAgICBob3N0OiBkZXN0aW5hdGlvbi5ob3N0LFxuICAgICAgICAgICAgICAgIHBvcnQ6IGRlc3RpbmF0aW9uLnBvcnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm94eToge1xuICAgICAgICAgICAgICAgIC8vIGhvc3QgYW5kIHBvcnQgYXJlIGlnbm9yZWQgYmVjYXVzZSB3ZSBwYXNzIGV4aXN0aW5nX3NvY2tldFxuICAgICAgICAgICAgICAgIGhvc3Q6ICdpTG92ZUphdmFTY3JpcHQnLFxuICAgICAgICAgICAgICAgIHBvcnQ6IDAsXG4gICAgICAgICAgICAgICAgdHlwZTogNSxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IG9wdGlvbnMucHJveHlVc2VybmFtZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IG9wdGlvbnMucHJveHlQYXNzd29yZCB8fCB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEZpbmFsbHksIG5vdyB0cmVhdCB0aGUgcmVzdWx0aW5nIGR1cGxleCBzdHJlYW0gYXMgdGhlXG4gICAgICAgIC8vIHNvY2tldCBvdmVyIHdoaWNoIHdlIHNlbmQgYW5kIHJlY2VpdmUgd2lyZSBwcm90b2NvbCBtZXNzYWdlczpcbiAgICAgICAgcmV0dXJuIGF3YWl0IG1ha2VTb2NrZXQoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGV4aXN0aW5nU29ja2V0OiBzb2NrZXQsXG4gICAgICAgICAgICBwcm94eUhvc3Q6IHVuZGVmaW5lZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IGNvbm5lY3Rpb25GYWlsdXJlRXJyb3IoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbm5lY3Rpb25GYWlsdXJlRXJyb3IodHlwZSwgY2F1c2UpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yKGVycm9yXzEuTW9uZ29FcnJvci5idWlsZEVycm9yTWVzc2FnZShjYXVzZSksIHsgY2F1c2UgfSk7XG4gICAgICAgIGNhc2UgJ3RpbWVvdXQnOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvTmV0d29ya1RpbWVvdXRFcnJvcignY29ubmVjdGlvbiB0aW1lZCBvdXQnKTtcbiAgICAgICAgY2FzZSAnY2xvc2UnOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yKCdjb25uZWN0aW9uIGNsb3NlZCcpO1xuICAgICAgICBjYXNlICdjYW5jZWwnOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yKCdjb25uZWN0aW9uIGVzdGFibGlzaG1lbnQgd2FzIGNhbmNlbGxlZCcpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yKCd1bmtub3duIG5ldHdvcmsgZXJyb3InKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25uZWN0LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIm1ha2VTb2NrZXQiLCJMRUdBTF9UQ1BfU09DS0VUX09QVElPTlMiLCJMRUdBTF9UTFNfU09DS0VUX09QVElPTlMiLCJwcmVwYXJlSGFuZHNoYWtlRG9jdW1lbnQiLCJwZXJmb3JtSW5pdGlhbEhhbmRzaGFrZSIsIm1ha2VDb25uZWN0aW9uIiwiY29ubmVjdCIsIm5ldCIsInJlcXVpcmUiLCJ0bHMiLCJjb25zdGFudHNfMSIsImRlcHNfMSIsImVycm9yXzEiLCJ1dGlsc18xIiwiYXV0aF9wcm92aWRlcl8xIiwicHJvdmlkZXJzXzEiLCJjb25uZWN0aW9uXzEiLCJjb25zdGFudHNfMiIsIm9wdGlvbnMiLCJjb25uZWN0aW9uIiwic29ja2V0IiwiZXJyb3IiLCJkZXN0cm95IiwiQ29ubmVjdGlvblR5cGUiLCJjb25uZWN0aW9uVHlwZSIsIkNvbm5lY3Rpb24iLCJhdXRvRW5jcnlwdGVyIiwiQ3J5cHRvQ29ubmVjdGlvbiIsImNoZWNrU3VwcG9ydGVkU2VydmVyIiwiaGVsbG8iLCJtYXhXaXJlVmVyc2lvbiIsIk51bWJlciIsIm1pbldpcmVWZXJzaW9uIiwic2VydmVyVmVyc2lvbkhpZ2hFbm91Z2giLCJpc05hTiIsIk1JTl9TVVBQT1JURURfV0lSRV9WRVJTSU9OIiwic2VydmVyVmVyc2lvbkxvd0Vub3VnaCIsIk1BWF9TVVBQT1JURURfV0lSRV9WRVJTSU9OIiwibWVzc2FnZSIsImhvc3RBZGRyZXNzIiwiSlNPTiIsInN0cmluZ2lmeSIsIk1BWF9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04iLCJNb25nb0NvbXBhdGliaWxpdHlFcnJvciIsIk1JTl9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04iLCJjb25uIiwiY3JlZGVudGlhbHMiLCJtZWNoYW5pc20iLCJBdXRoTWVjaGFuaXNtIiwiTU9OR09EQl9ERUZBVUxUIiwiYXV0aFByb3ZpZGVycyIsImdldE9yQ3JlYXRlUHJvdmlkZXIiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiYXV0aENvbnRleHQiLCJBdXRoQ29udGV4dCIsImhhbmRzaGFrZURvYyIsImhhbmRzaGFrZU9wdGlvbnMiLCJjb25uZWN0VGltZW91dE1TIiwic29ja2V0VGltZW91dE1TIiwic3RhcnQiLCJEYXRlIiwiZ2V0VGltZSIsInJlc3BvbnNlIiwiY29tbWFuZCIsIm5zIiwiaXNXcml0YWJsZVByaW1hcnkiLCJMRUdBQ1lfSEVMTE9fQ09NTUFORCIsImhlbGxvT2siLCJzdXBwb3J0ZWRTZXJ2ZXJFcnIiLCJsb2FkQmFsYW5jZWQiLCJzZXJ2aWNlSWQiLCJsYXN0SGVsbG9NUyIsImFyYml0ZXJPbmx5IiwicmVzb2x2ZWRDcmVkZW50aWFscyIsInJlc29sdmVBdXRoTWVjaGFuaXNtIiwicHJvdmlkZXIiLCJhdXRoIiwiTW9uZ29FcnJvciIsImFkZEVycm9yTGFiZWwiLCJNb25nb0Vycm9yTGFiZWwiLCJIYW5kc2hha2VFcnJvciIsIm5lZWRzUmV0cnlhYmxlV3JpdGVMYWJlbCIsIlJldHJ5YWJsZVdyaXRlRXJyb3IiLCJlc3RhYmxpc2hlZCIsImNvbXByZXNzb3JzIiwic2VydmVyQXBpIiwiY2xpZW50TWV0YWRhdGEiLCJleHRlbmRlZE1ldGFkYXRhIiwidmVyc2lvbiIsImNsaWVudCIsImNvbXByZXNzaW9uIiwidXNlcm5hbWUiLCJzYXNsU3VwcG9ydGVkTWVjaHMiLCJzb3VyY2UiLCJNT05HT0RCX1NDUkFNX1NIQTI1NiIsInByZXBhcmUiLCJwYXJzZUNvbm5lY3RPcHRpb25zIiwicmVzdWx0IiwibmFtZSIsInNvY2tldFBhdGgiLCJwYXRoIiwiaG9zdCIsInBvcnQiLCJNb25nb1J1bnRpbWVFcnJvciIsInBhcnNlU3NsT3B0aW9ucyIsImV4aXN0aW5nU29ja2V0Iiwic2VydmVybmFtZSIsImlzSVAiLCJ1c2VUTFMiLCJub0RlbGF5IiwicHJveHlIb3N0IiwibWFrZVNvY2tzNUNvbm5lY3Rpb24iLCJ0bHNTb2NrZXQiLCJkaXNhYmxlUmVuZWdvdGlhdGlvbiIsImNyZWF0ZUNvbm5lY3Rpb24iLCJzZXRLZWVwQWxpdmUiLCJzZXRUaW1lb3V0Iiwic2V0Tm9EZWxheSIsImNhbmNlbGxhdGlvbkhhbmRsZXIiLCJwcm9taXNlIiwiY29ubmVjdGVkU29ja2V0IiwicmVzb2x2ZSIsInJlamVjdCIsInByb21pc2VXaXRoUmVzb2x2ZXJzIiwiY29ubmVjdEV2ZW50Iiwib25jZSIsImNvbm5lY3Rpb25GYWlsdXJlRXJyb3IiLCJjYW5jZWxsYXRpb25Ub2tlbiIsInJlbW92ZUFsbExpc3RlbmVycyIsInJlbW92ZUxpc3RlbmVyIiwic29ja3MiLCJsb2FkU29ja3MiLCJzb2Nrc0ltcG9ydCIsImdldFNvY2tzIiwia01vZHVsZUVycm9yIiwiSG9zdEFkZHJlc3MiLCJmcm9tSG9zdFBvcnQiLCJwcm94eVBvcnQiLCJyYXdTb2NrZXQiLCJ1bmRlZmluZWQiLCJkZXN0aW5hdGlvbiIsIlNvY2tzQ2xpZW50IiwiZXhpc3Rpbmdfc29ja2V0IiwidGltZW91dCIsInByb3h5IiwidHlwZSIsInVzZXJJZCIsInByb3h5VXNlcm5hbWUiLCJwYXNzd29yZCIsInByb3h5UGFzc3dvcmQiLCJjYXVzZSIsIk1vbmdvTmV0d29ya0Vycm9yIiwiYnVpbGRFcnJvck1lc3NhZ2UiLCJNb25nb05ldHdvcmtUaW1lb3V0RXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/connect.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/connection.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/connection.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CryptoConnection = exports.SizedMessageTransform = exports.Connection = exports.hasSessionSupport = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_logger_1 = __webpack_require__(/*! ../mongo_logger */ \"(ssr)/./node_modules/mongodb/lib/mongo_logger.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst common_1 = __webpack_require__(/*! ../sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst sessions_1 = __webpack_require__(/*! ../sessions */ \"(ssr)/./node_modules/mongodb/lib/sessions.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_monitoring_events_1 = __webpack_require__(/*! ./command_monitoring_events */ \"(ssr)/./node_modules/mongodb/lib/cmap/command_monitoring_events.js\");\nconst commands_1 = __webpack_require__(/*! ./commands */ \"(ssr)/./node_modules/mongodb/lib/cmap/commands.js\");\nconst stream_description_1 = __webpack_require__(/*! ./stream_description */ \"(ssr)/./node_modules/mongodb/lib/cmap/stream_description.js\");\nconst compression_1 = __webpack_require__(/*! ./wire_protocol/compression */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js\");\nconst on_data_1 = __webpack_require__(/*! ./wire_protocol/on_data */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/on_data.js\");\nconst shared_1 = __webpack_require__(/*! ./wire_protocol/shared */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/shared.js\");\n/** @internal */ function hasSessionSupport(conn) {\n    const description = conn.description;\n    return description.logicalSessionTimeoutMinutes != null;\n}\nexports.hasSessionSupport = hasSessionSupport;\nfunction streamIdentifier(stream, options) {\n    if (options.proxyHost) {\n        // If proxy options are specified, the properties of `stream` itself\n        // will not accurately reflect what endpoint this is connected to.\n        return options.hostAddress.toString();\n    }\n    const { remoteAddress, remotePort } = stream;\n    if (typeof remoteAddress === \"string\" && typeof remotePort === \"number\") {\n        return utils_1.HostAddress.fromHostPort(remoteAddress, remotePort).toString();\n    }\n    return (0, utils_1.uuidV4)().toString(\"hex\");\n}\n/** @internal */ class Connection extends mongo_types_1.TypedEventEmitter {\n    constructor(stream, options){\n        super();\n        this.lastHelloMS = -1;\n        this.helloOk = false;\n        this.delayedTimeoutId = null;\n        /** Indicates that the connection (including underlying TCP socket) has been closed. */ this.closed = false;\n        this.clusterTime = null;\n        this.error = null;\n        this.dataEvents = null;\n        this.socket = stream;\n        this.id = options.id;\n        this.address = streamIdentifier(stream, options);\n        this.socketTimeoutMS = options.socketTimeoutMS ?? 0;\n        this.monitorCommands = options.monitorCommands;\n        this.serverApi = options.serverApi;\n        this.mongoLogger = options.mongoLogger;\n        this.established = false;\n        this.description = new stream_description_1.StreamDescription(this.address, options);\n        this.generation = options.generation;\n        this.lastUseTime = (0, utils_1.now)();\n        this.messageStream = this.socket.on(\"error\", this.onError.bind(this)).pipe(new SizedMessageTransform({\n            connection: this\n        })).on(\"error\", this.onError.bind(this));\n        this.socket.on(\"close\", this.onClose.bind(this));\n        this.socket.on(\"timeout\", this.onTimeout.bind(this));\n    }\n    get hello() {\n        return this.description.hello;\n    }\n    // the `connect` method stores the result of the handshake hello on the connection\n    set hello(response) {\n        this.description.receiveResponse(response);\n        Object.freeze(this.description);\n    }\n    get serviceId() {\n        return this.hello?.serviceId;\n    }\n    get loadBalanced() {\n        return this.description.loadBalanced;\n    }\n    get idleTime() {\n        return (0, utils_1.calculateDurationInMs)(this.lastUseTime);\n    }\n    get hasSessionSupport() {\n        return this.description.logicalSessionTimeoutMinutes != null;\n    }\n    get supportsOpMsg() {\n        return this.description != null && (0, utils_1.maxWireVersion)(this) >= 6 && !this.description.__nodejs_mock_server__;\n    }\n    get shouldEmitAndLogCommand() {\n        return (this.monitorCommands || this.established && !this.authContext?.reauthenticating && this.mongoLogger?.willLog(mongo_logger_1.MongoLoggableComponent.COMMAND, mongo_logger_1.SeverityLevel.DEBUG)) ?? false;\n    }\n    markAvailable() {\n        this.lastUseTime = (0, utils_1.now)();\n    }\n    onError(error) {\n        this.cleanup(error);\n    }\n    onClose() {\n        const message = `connection ${this.id} to ${this.address} closed`;\n        this.cleanup(new error_1.MongoNetworkError(message));\n    }\n    onTimeout() {\n        this.delayedTimeoutId = (0, timers_1.setTimeout)(()=>{\n            const message = `connection ${this.id} to ${this.address} timed out`;\n            const beforeHandshake = this.hello == null;\n            this.cleanup(new error_1.MongoNetworkTimeoutError(message, {\n                beforeHandshake\n            }));\n        }, 1).unref(); // No need for this timer to hold the event loop open\n    }\n    destroy() {\n        if (this.closed) {\n            return;\n        }\n        // load balanced mode requires that these listeners remain on the connection\n        // after cleanup on timeouts, errors or close so we remove them before calling\n        // cleanup.\n        this.removeAllListeners(Connection.PINNED);\n        this.removeAllListeners(Connection.UNPINNED);\n        const message = `connection ${this.id} to ${this.address} closed`;\n        this.cleanup(new error_1.MongoNetworkError(message));\n    }\n    /**\n     * A method that cleans up the connection.  When `force` is true, this method\n     * forcibly destroys the socket.\n     *\n     * If an error is provided, any in-flight operations will be closed with the error.\n     *\n     * This method does nothing if the connection is already closed.\n     */ cleanup(error) {\n        if (this.closed) {\n            return;\n        }\n        this.socket.destroy();\n        this.error = error;\n        this.dataEvents?.throw(error).then(undefined, ()=>null); // squash unhandled rejection\n        this.closed = true;\n        this.emit(Connection.CLOSE);\n    }\n    prepareCommand(db, command, options) {\n        let cmd = {\n            ...command\n        };\n        const readPreference = (0, shared_1.getReadPreference)(options);\n        const session = options?.session;\n        let clusterTime = this.clusterTime;\n        if (this.serverApi) {\n            const { version, strict, deprecationErrors } = this.serverApi;\n            cmd.apiVersion = version;\n            if (strict != null) cmd.apiStrict = strict;\n            if (deprecationErrors != null) cmd.apiDeprecationErrors = deprecationErrors;\n        }\n        if (this.hasSessionSupport && session) {\n            if (session.clusterTime && clusterTime && session.clusterTime.clusterTime.greaterThan(clusterTime.clusterTime)) {\n                clusterTime = session.clusterTime;\n            }\n            const sessionError = (0, sessions_1.applySession)(session, cmd, options);\n            if (sessionError) throw sessionError;\n        } else if (session?.explicit) {\n            throw new error_1.MongoCompatibilityError(\"Current topology does not support sessions\");\n        }\n        // if we have a known cluster time, gossip it\n        if (clusterTime) {\n            cmd.$clusterTime = clusterTime;\n        }\n        // For standalone, drivers MUST NOT set $readPreference.\n        if (this.description.type !== common_1.ServerType.Standalone) {\n            if (!(0, shared_1.isSharded)(this) && !this.description.loadBalanced && this.supportsOpMsg && options.directConnection === true && readPreference?.mode === \"primary\") {\n                // For mongos and load balancers with 'primary' mode, drivers MUST NOT set $readPreference.\n                // For all other types with a direct connection, if the read preference is 'primary'\n                // (driver sets 'primary' as default if no read preference is configured),\n                // the $readPreference MUST be set to 'primaryPreferred'\n                // to ensure that any server type can handle the request.\n                cmd.$readPreference = read_preference_1.ReadPreference.primaryPreferred.toJSON();\n            } else if ((0, shared_1.isSharded)(this) && !this.supportsOpMsg && readPreference?.mode !== \"primary\") {\n                // When sending a read operation via OP_QUERY and the $readPreference modifier,\n                // the query MUST be provided using the $query modifier.\n                cmd = {\n                    $query: cmd,\n                    $readPreference: readPreference.toJSON()\n                };\n            } else if (readPreference?.mode !== \"primary\") {\n                // For mode 'primary', drivers MUST NOT set $readPreference.\n                // For all other read preference modes (i.e. 'secondary', 'primaryPreferred', ...),\n                // drivers MUST set $readPreference\n                cmd.$readPreference = readPreference.toJSON();\n            }\n        }\n        const commandOptions = {\n            numberToSkip: 0,\n            numberToReturn: -1,\n            checkKeys: false,\n            // This value is not overridable\n            secondaryOk: readPreference.secondaryOk(),\n            ...options\n        };\n        const message = this.supportsOpMsg ? new commands_1.OpMsgRequest(db, cmd, commandOptions) : new commands_1.OpQueryRequest(db, cmd, commandOptions);\n        return message;\n    }\n    async *sendWire(message, options) {\n        this.throwIfAborted();\n        if (typeof options.socketTimeoutMS === \"number\") {\n            this.socket.setTimeout(options.socketTimeoutMS);\n        } else if (this.socketTimeoutMS !== 0) {\n            this.socket.setTimeout(this.socketTimeoutMS);\n        }\n        try {\n            await this.writeCommand(message, {\n                agreedCompressor: this.description.compressor ?? \"none\",\n                zlibCompressionLevel: this.description.zlibCompressionLevel\n            });\n            if (options.noResponse) {\n                yield {\n                    ok: 1\n                };\n                return;\n            }\n            this.throwIfAborted();\n            for await (const response of this.readMany()){\n                this.socket.setTimeout(0);\n                response.parse(options);\n                const [document] = response.documents;\n                if (!Buffer.isBuffer(document)) {\n                    const { session } = options;\n                    if (session) {\n                        (0, sessions_1.updateSessionFromResponse)(session, document);\n                    }\n                    if (document.$clusterTime) {\n                        this.clusterTime = document.$clusterTime;\n                        this.emit(Connection.CLUSTER_TIME_RECEIVED, document.$clusterTime);\n                    }\n                }\n                yield document;\n                this.throwIfAborted();\n                if (typeof options.socketTimeoutMS === \"number\") {\n                    this.socket.setTimeout(options.socketTimeoutMS);\n                } else if (this.socketTimeoutMS !== 0) {\n                    this.socket.setTimeout(this.socketTimeoutMS);\n                }\n            }\n        } finally{\n            this.socket.setTimeout(0);\n        }\n    }\n    async *sendCommand(ns, command, options = {}) {\n        const message = this.prepareCommand(ns.db, command, options);\n        let started = 0;\n        if (this.shouldEmitAndLogCommand) {\n            started = (0, utils_1.now)();\n            this.emitAndLogCommand(this.monitorCommands, Connection.COMMAND_STARTED, message.databaseName, this.established, new command_monitoring_events_1.CommandStartedEvent(this, message, this.description.serverConnectionId));\n        }\n        let document;\n        try {\n            this.throwIfAborted();\n            for await (document of this.sendWire(message, options)){\n                if (!Buffer.isBuffer(document) && document.writeConcernError) {\n                    throw new error_1.MongoWriteConcernError(document.writeConcernError, document);\n                }\n                if (!Buffer.isBuffer(document) && (document.ok === 0 || document.$err || document.errmsg || document.code)) {\n                    throw new error_1.MongoServerError(document);\n                }\n                if (this.shouldEmitAndLogCommand) {\n                    this.emitAndLogCommand(this.monitorCommands, Connection.COMMAND_SUCCEEDED, message.databaseName, this.established, new command_monitoring_events_1.CommandSucceededEvent(this, message, options.noResponse ? undefined : document, started, this.description.serverConnectionId));\n                }\n                yield document;\n                this.throwIfAborted();\n            }\n        } catch (error) {\n            if (this.shouldEmitAndLogCommand) {\n                if (error.name === \"MongoWriteConcernError\") {\n                    this.emitAndLogCommand(this.monitorCommands, Connection.COMMAND_SUCCEEDED, message.databaseName, this.established, new command_monitoring_events_1.CommandSucceededEvent(this, message, options.noResponse ? undefined : document, started, this.description.serverConnectionId));\n                } else {\n                    this.emitAndLogCommand(this.monitorCommands, Connection.COMMAND_FAILED, message.databaseName, this.established, new command_monitoring_events_1.CommandFailedEvent(this, message, error, started, this.description.serverConnectionId));\n                }\n            }\n            throw error;\n        }\n    }\n    async command(ns, command, options = {}) {\n        this.throwIfAborted();\n        for await (const document of this.sendCommand(ns, command, options)){\n            return document;\n        }\n        throw new error_1.MongoUnexpectedServerResponseError(\"Unable to get response from server\");\n    }\n    exhaustCommand(ns, command, options, replyListener) {\n        const exhaustLoop = async ()=>{\n            this.throwIfAborted();\n            for await (const reply of this.sendCommand(ns, command, options)){\n                replyListener(undefined, reply);\n                this.throwIfAborted();\n            }\n            throw new error_1.MongoUnexpectedServerResponseError(\"Server ended moreToCome unexpectedly\");\n        };\n        exhaustLoop().catch(replyListener);\n    }\n    throwIfAborted() {\n        if (this.error) throw this.error;\n    }\n    /**\n     * @internal\n     *\n     * Writes an OP_MSG or OP_QUERY request to the socket, optionally compressing the command. This method\n     * waits until the socket's buffer has emptied (the Nodejs socket `drain` event has fired).\n     */ async writeCommand(command, options) {\n        const finalCommand = options.agreedCompressor === \"none\" || !commands_1.OpCompressedRequest.canCompress(command) ? command : new commands_1.OpCompressedRequest(command, {\n            agreedCompressor: options.agreedCompressor ?? \"none\",\n            zlibCompressionLevel: options.zlibCompressionLevel ?? 0\n        });\n        const buffer = Buffer.concat(await finalCommand.toBin());\n        if (this.socket.write(buffer)) return;\n        return (0, utils_1.once)(this.socket, \"drain\");\n    }\n    /**\n     * @internal\n     *\n     * Returns an async generator that yields full wire protocol messages from the underlying socket.  This function\n     * yields messages until `moreToCome` is false or not present in a response, or the caller cancels the request\n     * by calling `return` on the generator.\n     *\n     * Note that `for-await` loops call `return` automatically when the loop is exited.\n     */ async *readMany() {\n        try {\n            this.dataEvents = (0, on_data_1.onData)(this.messageStream);\n            for await (const message of this.dataEvents){\n                const response = await (0, compression_1.decompressResponse)(message);\n                yield response;\n                if (!response.moreToCome) {\n                    return;\n                }\n            }\n        } finally{\n            this.dataEvents = null;\n            this.throwIfAborted();\n        }\n    }\n}\n/** @event */ Connection.COMMAND_STARTED = constants_1.COMMAND_STARTED;\n/** @event */ Connection.COMMAND_SUCCEEDED = constants_1.COMMAND_SUCCEEDED;\n/** @event */ Connection.COMMAND_FAILED = constants_1.COMMAND_FAILED;\n/** @event */ Connection.CLUSTER_TIME_RECEIVED = constants_1.CLUSTER_TIME_RECEIVED;\n/** @event */ Connection.CLOSE = constants_1.CLOSE;\n/** @event */ Connection.PINNED = constants_1.PINNED;\n/** @event */ Connection.UNPINNED = constants_1.UNPINNED;\nexports.Connection = Connection;\n/** @internal */ class SizedMessageTransform extends stream_1.Transform {\n    constructor({ connection }){\n        super({\n            objectMode: false\n        });\n        this.bufferPool = new utils_1.BufferPool();\n        this.connection = connection;\n    }\n    _transform(chunk, encoding, callback) {\n        if (this.connection.delayedTimeoutId != null) {\n            (0, timers_1.clearTimeout)(this.connection.delayedTimeoutId);\n            this.connection.delayedTimeoutId = null;\n        }\n        this.bufferPool.append(chunk);\n        const sizeOfMessage = this.bufferPool.getInt32();\n        if (sizeOfMessage == null) {\n            return callback();\n        }\n        if (sizeOfMessage < 0) {\n            return callback(new error_1.MongoParseError(`Invalid message size: ${sizeOfMessage}, too small`));\n        }\n        if (sizeOfMessage > this.bufferPool.length) {\n            return callback();\n        }\n        const message = this.bufferPool.read(sizeOfMessage);\n        return callback(null, message);\n    }\n}\nexports.SizedMessageTransform = SizedMessageTransform;\n/** @internal */ class CryptoConnection extends Connection {\n    constructor(stream, options){\n        super(stream, options);\n        this.autoEncrypter = options.autoEncrypter;\n    }\n    /** @internal @override */ async command(ns, cmd, options) {\n        const { autoEncrypter } = this;\n        if (!autoEncrypter) {\n            throw new error_1.MongoMissingDependencyError(\"No AutoEncrypter available for encryption\");\n        }\n        const serverWireVersion = (0, utils_1.maxWireVersion)(this);\n        if (serverWireVersion === 0) {\n            // This means the initial handshake hasn't happened yet\n            return super.command(ns, cmd, options);\n        }\n        if (serverWireVersion < 8) {\n            throw new error_1.MongoCompatibilityError(\"Auto-encryption requires a minimum MongoDB version of 4.2\");\n        }\n        // Save sort or indexKeys based on the command being run\n        // the encrypt API serializes our JS objects to BSON to pass to the native code layer\n        // and then deserializes the encrypted result, the protocol level components\n        // of the command (ex. sort) are then converted to JS objects potentially losing\n        // import key order information. These fields are never encrypted so we can save the values\n        // from before the encryption and replace them after encryption has been performed\n        const sort = cmd.find || cmd.findAndModify ? cmd.sort : null;\n        const indexKeys = cmd.createIndexes ? cmd.indexes.map((index)=>index.key) : null;\n        const encrypted = await autoEncrypter.encrypt(ns.toString(), cmd, options);\n        // Replace the saved values\n        if (sort != null && (cmd.find || cmd.findAndModify)) {\n            encrypted.sort = sort;\n        }\n        if (indexKeys != null && cmd.createIndexes) {\n            for (const [offset, index] of indexKeys.entries()){\n                // @ts-expect-error `encrypted` is a generic \"command\", but we've narrowed for only `createIndexes` commands here\n                encrypted.indexes[offset].key = index;\n            }\n        }\n        const response = await super.command(ns, encrypted, options);\n        return autoEncrypter.decrypt(response, options);\n    }\n}\nexports.CryptoConnection = CryptoConnection; //# sourceMappingURL=connection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx3QkFBd0IsR0FBR0EsNkJBQTZCLEdBQUdBLGtCQUFrQixHQUFHQSx5QkFBeUIsR0FBRyxLQUFLO0FBQ2pILE1BQU1NLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1FLGNBQWNGLG1CQUFPQSxDQUFDLG1FQUFjO0FBQzFDLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1JLGlCQUFpQkosbUJBQU9BLENBQUMseUVBQWlCO0FBQ2hELE1BQU1LLGdCQUFnQkwsbUJBQU9BLENBQUMsdUVBQWdCO0FBQzlDLE1BQU1NLG9CQUFvQk4sbUJBQU9BLENBQUMsK0VBQW9CO0FBQ3RELE1BQU1PLFdBQVdQLG1CQUFPQSxDQUFDLHVFQUFnQjtBQUN6QyxNQUFNUSxhQUFhUixtQkFBT0EsQ0FBQyxpRUFBYTtBQUN4QyxNQUFNUyxVQUFVVCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNVSw4QkFBOEJWLG1CQUFPQSxDQUFDLHVHQUE2QjtBQUN6RSxNQUFNVyxhQUFhWCxtQkFBT0EsQ0FBQyxxRUFBWTtBQUN2QyxNQUFNWSx1QkFBdUJaLG1CQUFPQSxDQUFDLHlGQUFzQjtBQUMzRCxNQUFNYSxnQkFBZ0JiLG1CQUFPQSxDQUFDLHVHQUE2QjtBQUMzRCxNQUFNYyxZQUFZZCxtQkFBT0EsQ0FBQywrRkFBeUI7QUFDbkQsTUFBTWUsV0FBV2YsbUJBQU9BLENBQUMsNkZBQXdCO0FBQ2pELGNBQWMsR0FDZCxTQUFTRixrQkFBa0JrQixJQUFJO0lBQzNCLE1BQU1DLGNBQWNELEtBQUtDLFdBQVc7SUFDcEMsT0FBT0EsWUFBWUMsNEJBQTRCLElBQUk7QUFDdkQ7QUFDQXpCLHlC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QWEsR0FBRztZQUNqRE8sVUFBVVQsSUFBSSxHQUFHQTtRQUNyQjtRQUNBLElBQUlHLGFBQWEsUUFBUTNHLElBQUk0RyxhQUFhLEVBQUU7WUFDeEMsS0FBSyxNQUFNLENBQUNPLFFBQVFKLE1BQU0sSUFBSUosVUFBVVMsT0FBTyxHQUFJO2dCQUMvQyxpSEFBaUg7Z0JBQ2pISCxVQUFVSixPQUFPLENBQUNNLE9BQU8sQ0FBQ0gsR0FBRyxHQUFHRDtZQUNwQztRQUNKO1FBQ0EsTUFBTXJKLFdBQVcsTUFBTSxLQUFLLENBQUNxQyxRQUFRb0QsSUFBSThELFdBQVc5TDtRQUNwRCxPQUFPa0wsY0FBY2dCLE9BQU8sQ0FBQzNKLFVBQVV2QztJQUMzQztBQUNKO0FBQ0E1Qix3QkFBd0IsR0FBR0Usa0JBQzNCLHNDQUFzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uLmpzP2ZlOGIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNyeXB0b0Nvbm5lY3Rpb24gPSBleHBvcnRzLlNpemVkTWVzc2FnZVRyYW5zZm9ybSA9IGV4cG9ydHMuQ29ubmVjdGlvbiA9IGV4cG9ydHMuaGFzU2Vzc2lvblN1cHBvcnQgPSB2b2lkIDA7XG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCJzdHJlYW1cIik7XG5jb25zdCB0aW1lcnNfMSA9IHJlcXVpcmUoXCJ0aW1lcnNcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgbW9uZ29fbG9nZ2VyXzEgPSByZXF1aXJlKFwiLi4vbW9uZ29fbG9nZ2VyXCIpO1xuY29uc3QgbW9uZ29fdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9tb25nb190eXBlc1wiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4uL3JlYWRfcHJlZmVyZW5jZVwiKTtcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4uL3NkYW0vY29tbW9uXCIpO1xuY29uc3Qgc2Vzc2lvbnNfMSA9IHJlcXVpcmUoXCIuLi9zZXNzaW9uc1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXCIpO1xuY29uc3QgY29tbWFuZHNfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRzXCIpO1xuY29uc3Qgc3RyZWFtX2Rlc2NyaXB0aW9uXzEgPSByZXF1aXJlKFwiLi9zdHJlYW1fZGVzY3JpcHRpb25cIik7XG5jb25zdCBjb21wcmVzc2lvbl8xID0gcmVxdWlyZShcIi4vd2lyZV9wcm90b2NvbC9jb21wcmVzc2lvblwiKTtcbmNvbnN0IG9uX2RhdGFfMSA9IHJlcXVpcmUoXCIuL3dpcmVfcHJvdG9jb2wvb25fZGF0YVwiKTtcbmNvbnN0IHNoYXJlZF8xID0gcmVxdWlyZShcIi4vd2lyZV9wcm90b2NvbC9zaGFyZWRcIik7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBoYXNTZXNzaW9uU3VwcG9ydChjb25uKSB7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBjb25uLmRlc2NyaXB0aW9uO1xuICAgIHJldHVybiBkZXNjcmlwdGlvbi5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzICE9IG51bGw7XG59XG5leHBvcnRzLmhhc1Nlc3Npb25TdXBwb3J0ID0gaGFzU2Vzc2lvblN1cHBvcnQ7XG5mdW5jdGlvbiBzdHJlYW1JZGVudGlmaWVyKHN0cmVhbSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLnByb3h5SG9zdCkge1xuICAgICAgICAvLyBJZiBwcm94eSBvcHRpb25zIGFyZSBzcGVjaWZpZWQsIHRoZSBwcm9wZXJ0aWVzIG9mIGBzdHJlYW1gIGl0c2VsZlxuICAgICAgICAvLyB3aWxsIG5vdCBhY2N1cmF0ZWx5IHJlZmxlY3Qgd2hhdCBlbmRwb2ludCB0aGlzIGlzIGNvbm5lY3RlZCB0by5cbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuaG9zdEFkZHJlc3MudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgY29uc3QgeyByZW1vdGVBZGRyZXNzLCByZW1vdGVQb3J0IH0gPSBzdHJlYW07XG4gICAgaWYgKHR5cGVvZiByZW1vdGVBZGRyZXNzID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgcmVtb3RlUG9ydCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHV0aWxzXzEuSG9zdEFkZHJlc3MuZnJvbUhvc3RQb3J0KHJlbW90ZUFkZHJlc3MsIHJlbW90ZVBvcnQpLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiAoMCwgdXRpbHNfMS51dWlkVjQpKCkudG9TdHJpbmcoJ2hleCcpO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQ29ubmVjdGlvbiBleHRlbmRzIG1vbmdvX3R5cGVzXzEuVHlwZWRFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHN0cmVhbSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmxhc3RIZWxsb01TID0gLTE7XG4gICAgICAgIHRoaXMuaGVsbG9PayA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlbGF5ZWRUaW1lb3V0SWQgPSBudWxsO1xuICAgICAgICAvKiogSW5kaWNhdGVzIHRoYXQgdGhlIGNvbm5lY3Rpb24gKGluY2x1ZGluZyB1bmRlcmx5aW5nIFRDUCBzb2NrZXQpIGhhcyBiZWVuIGNsb3NlZC4gKi9cbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbHVzdGVyVGltZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLmRhdGFFdmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLnNvY2tldCA9IHN0cmVhbTtcbiAgICAgICAgdGhpcy5pZCA9IG9wdGlvbnMuaWQ7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IHN0cmVhbUlkZW50aWZpZXIoc3RyZWFtLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5zb2NrZXRUaW1lb3V0TVMgPSBvcHRpb25zLnNvY2tldFRpbWVvdXRNUyA/PyAwO1xuICAgICAgICB0aGlzLm1vbml0b3JDb21tYW5kcyA9IG9wdGlvbnMubW9uaXRvckNvbW1hbmRzO1xuICAgICAgICB0aGlzLnNlcnZlckFwaSA9IG9wdGlvbnMuc2VydmVyQXBpO1xuICAgICAgICB0aGlzLm1vbmdvTG9nZ2VyID0gb3B0aW9ucy5tb25nb0xvZ2dlcjtcbiAgICAgICAgdGhpcy5lc3RhYmxpc2hlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gbmV3IHN0cmVhbV9kZXNjcmlwdGlvbl8xLlN0cmVhbURlc2NyaXB0aW9uKHRoaXMuYWRkcmVzcywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGlvbiA9IG9wdGlvbnMuZ2VuZXJhdGlvbjtcbiAgICAgICAgdGhpcy5sYXN0VXNlVGltZSA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlU3RyZWFtID0gdGhpcy5zb2NrZXRcbiAgICAgICAgICAgIC5vbignZXJyb3InLCB0aGlzLm9uRXJyb3IuYmluZCh0aGlzKSlcbiAgICAgICAgICAgIC5waXBlKG5ldyBTaXplZE1lc3NhZ2VUcmFuc2Zvcm0oeyBjb25uZWN0aW9uOiB0aGlzIH0pKVxuICAgICAgICAgICAgLm9uKCdlcnJvcicsIHRoaXMub25FcnJvci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5zb2NrZXQub24oJ2Nsb3NlJywgdGhpcy5vbkNsb3NlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnNvY2tldC5vbigndGltZW91dCcsIHRoaXMub25UaW1lb3V0LmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBnZXQgaGVsbG8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uLmhlbGxvO1xuICAgIH1cbiAgICAvLyB0aGUgYGNvbm5lY3RgIG1ldGhvZCBzdG9yZXMgdGhlIHJlc3VsdCBvZiB0aGUgaGFuZHNoYWtlIGhlbGxvIG9uIHRoZSBjb25uZWN0aW9uXG4gICAgc2V0IGhlbGxvKHJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24ucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgT2JqZWN0LmZyZWV6ZSh0aGlzLmRlc2NyaXB0aW9uKTtcbiAgICB9XG4gICAgZ2V0IHNlcnZpY2VJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVsbG8/LnNlcnZpY2VJZDtcbiAgICB9XG4gICAgZ2V0IGxvYWRCYWxhbmNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRpb24ubG9hZEJhbGFuY2VkO1xuICAgIH1cbiAgICBnZXQgaWRsZVRpbWUoKSB7XG4gICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS5jYWxjdWxhdGVEdXJhdGlvbkluTXMpKHRoaXMubGFzdFVzZVRpbWUpO1xuICAgIH1cbiAgICBnZXQgaGFzU2Vzc2lvblN1cHBvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMgIT0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHN1cHBvcnRzT3BNc2coKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5kZXNjcmlwdGlvbiAhPSBudWxsICYmXG4gICAgICAgICAgICAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikodGhpcykgPj0gNiAmJlxuICAgICAgICAgICAgIXRoaXMuZGVzY3JpcHRpb24uX19ub2RlanNfbW9ja19zZXJ2ZXJfXyk7XG4gICAgfVxuICAgIGdldCBzaG91bGRFbWl0QW5kTG9nQ29tbWFuZCgpIHtcbiAgICAgICAgcmV0dXJuICgodGhpcy5tb25pdG9yQ29tbWFuZHMgfHxcbiAgICAgICAgICAgICh0aGlzLmVzdGFibGlzaGVkICYmXG4gICAgICAgICAgICAgICAgIXRoaXMuYXV0aENvbnRleHQ/LnJlYXV0aGVudGljYXRpbmcgJiZcbiAgICAgICAgICAgICAgICB0aGlzLm1vbmdvTG9nZ2VyPy53aWxsTG9nKG1vbmdvX2xvZ2dlcl8xLk1vbmdvTG9nZ2FibGVDb21wb25lbnQuQ09NTUFORCwgbW9uZ29fbG9nZ2VyXzEuU2V2ZXJpdHlMZXZlbC5ERUJVRykpKSA/P1xuICAgICAgICAgICAgZmFsc2UpO1xuICAgIH1cbiAgICBtYXJrQXZhaWxhYmxlKCkge1xuICAgICAgICB0aGlzLmxhc3RVc2VUaW1lID0gKDAsIHV0aWxzXzEubm93KSgpO1xuICAgIH1cbiAgICBvbkVycm9yKGVycm9yKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cChlcnJvcik7XG4gICAgfVxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgY29ubmVjdGlvbiAke3RoaXMuaWR9IHRvICR7dGhpcy5hZGRyZXNzfSBjbG9zZWRgO1xuICAgICAgICB0aGlzLmNsZWFudXAobmV3IGVycm9yXzEuTW9uZ29OZXR3b3JrRXJyb3IobWVzc2FnZSkpO1xuICAgIH1cbiAgICBvblRpbWVvdXQoKSB7XG4gICAgICAgIHRoaXMuZGVsYXllZFRpbWVvdXRJZCA9ICgwLCB0aW1lcnNfMS5zZXRUaW1lb3V0KSgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYGNvbm5lY3Rpb24gJHt0aGlzLmlkfSB0byAke3RoaXMuYWRkcmVzc30gdGltZWQgb3V0YDtcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUhhbmRzaGFrZSA9IHRoaXMuaGVsbG8gPT0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cChuZXcgZXJyb3JfMS5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IobWVzc2FnZSwgeyBiZWZvcmVIYW5kc2hha2UgfSkpO1xuICAgICAgICB9LCAxKS51bnJlZigpOyAvLyBObyBuZWVkIGZvciB0aGlzIHRpbWVyIHRvIGhvbGQgdGhlIGV2ZW50IGxvb3Agb3BlblxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBsb2FkIGJhbGFuY2VkIG1vZGUgcmVxdWlyZXMgdGhhdCB0aGVzZSBsaXN0ZW5lcnMgcmVtYWluIG9uIHRoZSBjb25uZWN0aW9uXG4gICAgICAgIC8vIGFmdGVyIGNsZWFudXAgb24gdGltZW91dHMsIGVycm9ycyBvciBjbG9zZSBzbyB3ZSByZW1vdmUgdGhlbSBiZWZvcmUgY2FsbGluZ1xuICAgICAgICAvLyBjbGVhbnVwLlxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhDb25uZWN0aW9uLlBJTk5FRCk7XG4gICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKENvbm5lY3Rpb24uVU5QSU5ORUQpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYGNvbm5lY3Rpb24gJHt0aGlzLmlkfSB0byAke3RoaXMuYWRkcmVzc30gY2xvc2VkYDtcbiAgICAgICAgdGhpcy5jbGVhbnVwKG5ldyBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBtZXRob2QgdGhhdCBjbGVhbnMgdXAgdGhlIGNvbm5lY3Rpb24uICBXaGVuIGBmb3JjZWAgaXMgdHJ1ZSwgdGhpcyBtZXRob2RcbiAgICAgKiBmb3JjaWJseSBkZXN0cm95cyB0aGUgc29ja2V0LlxuICAgICAqXG4gICAgICogSWYgYW4gZXJyb3IgaXMgcHJvdmlkZWQsIGFueSBpbi1mbGlnaHQgb3BlcmF0aW9ucyB3aWxsIGJlIGNsb3NlZCB3aXRoIHRoZSBlcnJvci5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGRvZXMgbm90aGluZyBpZiB0aGUgY29ubmVjdGlvbiBpcyBhbHJlYWR5IGNsb3NlZC5cbiAgICAgKi9cbiAgICBjbGVhbnVwKGVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc29ja2V0LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLmRhdGFFdmVudHM/LnRocm93KGVycm9yKS50aGVuKHVuZGVmaW5lZCwgKCkgPT4gbnVsbCk7IC8vIHNxdWFzaCB1bmhhbmRsZWQgcmVqZWN0aW9uXG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lbWl0KENvbm5lY3Rpb24uQ0xPU0UpO1xuICAgIH1cbiAgICBwcmVwYXJlQ29tbWFuZChkYiwgY29tbWFuZCwgb3B0aW9ucykge1xuICAgICAgICBsZXQgY21kID0geyAuLi5jb21tYW5kIH07XG4gICAgICAgIGNvbnN0IHJlYWRQcmVmZXJlbmNlID0gKDAsIHNoYXJlZF8xLmdldFJlYWRQcmVmZXJlbmNlKShvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG9wdGlvbnM/LnNlc3Npb247XG4gICAgICAgIGxldCBjbHVzdGVyVGltZSA9IHRoaXMuY2x1c3RlclRpbWU7XG4gICAgICAgIGlmICh0aGlzLnNlcnZlckFwaSkge1xuICAgICAgICAgICAgY29uc3QgeyB2ZXJzaW9uLCBzdHJpY3QsIGRlcHJlY2F0aW9uRXJyb3JzIH0gPSB0aGlzLnNlcnZlckFwaTtcbiAgICAgICAgICAgIGNtZC5hcGlWZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgICAgIGlmIChzdHJpY3QgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBjbWQuYXBpU3RyaWN0ID0gc3RyaWN0O1xuICAgICAgICAgICAgaWYgKGRlcHJlY2F0aW9uRXJyb3JzICE9IG51bGwpXG4gICAgICAgICAgICAgICAgY21kLmFwaURlcHJlY2F0aW9uRXJyb3JzID0gZGVwcmVjYXRpb25FcnJvcnM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFzU2Vzc2lvblN1cHBvcnQgJiYgc2Vzc2lvbikge1xuICAgICAgICAgICAgaWYgKHNlc3Npb24uY2x1c3RlclRpbWUgJiZcbiAgICAgICAgICAgICAgICBjbHVzdGVyVGltZSAmJlxuICAgICAgICAgICAgICAgIHNlc3Npb24uY2x1c3RlclRpbWUuY2x1c3RlclRpbWUuZ3JlYXRlclRoYW4oY2x1c3RlclRpbWUuY2x1c3RlclRpbWUpKSB7XG4gICAgICAgICAgICAgICAgY2x1c3RlclRpbWUgPSBzZXNzaW9uLmNsdXN0ZXJUaW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkVycm9yID0gKDAsIHNlc3Npb25zXzEuYXBwbHlTZXNzaW9uKShzZXNzaW9uLCBjbWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHNlc3Npb25FcnJvcilcbiAgICAgICAgICAgICAgICB0aHJvdyBzZXNzaW9uRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2Vzc2lvbj8uZXhwbGljaXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKCdDdXJyZW50IHRvcG9sb2d5IGRvZXMgbm90IHN1cHBvcnQgc2Vzc2lvbnMnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGEga25vd24gY2x1c3RlciB0aW1lLCBnb3NzaXAgaXRcbiAgICAgICAgaWYgKGNsdXN0ZXJUaW1lKSB7XG4gICAgICAgICAgICBjbWQuJGNsdXN0ZXJUaW1lID0gY2x1c3RlclRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRm9yIHN0YW5kYWxvbmUsIGRyaXZlcnMgTVVTVCBOT1Qgc2V0ICRyZWFkUHJlZmVyZW5jZS5cbiAgICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb24udHlwZSAhPT0gY29tbW9uXzEuU2VydmVyVHlwZS5TdGFuZGFsb25lKSB7XG4gICAgICAgICAgICBpZiAoISgwLCBzaGFyZWRfMS5pc1NoYXJkZWQpKHRoaXMpICYmXG4gICAgICAgICAgICAgICAgIXRoaXMuZGVzY3JpcHRpb24ubG9hZEJhbGFuY2VkICYmXG4gICAgICAgICAgICAgICAgdGhpcy5zdXBwb3J0c09wTXNnICYmXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kaXJlY3RDb25uZWN0aW9uID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U/Lm1vZGUgPT09ICdwcmltYXJ5Jykge1xuICAgICAgICAgICAgICAgIC8vIEZvciBtb25nb3MgYW5kIGxvYWQgYmFsYW5jZXJzIHdpdGggJ3ByaW1hcnknIG1vZGUsIGRyaXZlcnMgTVVTVCBOT1Qgc2V0ICRyZWFkUHJlZmVyZW5jZS5cbiAgICAgICAgICAgICAgICAvLyBGb3IgYWxsIG90aGVyIHR5cGVzIHdpdGggYSBkaXJlY3QgY29ubmVjdGlvbiwgaWYgdGhlIHJlYWQgcHJlZmVyZW5jZSBpcyAncHJpbWFyeSdcbiAgICAgICAgICAgICAgICAvLyAoZHJpdmVyIHNldHMgJ3ByaW1hcnknIGFzIGRlZmF1bHQgaWYgbm8gcmVhZCBwcmVmZXJlbmNlIGlzIGNvbmZpZ3VyZWQpLFxuICAgICAgICAgICAgICAgIC8vIHRoZSAkcmVhZFByZWZlcmVuY2UgTVVTVCBiZSBzZXQgdG8gJ3ByaW1hcnlQcmVmZXJyZWQnXG4gICAgICAgICAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgYW55IHNlcnZlciB0eXBlIGNhbiBoYW5kbGUgdGhlIHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgY21kLiRyZWFkUHJlZmVyZW5jZSA9IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnlQcmVmZXJyZWQudG9KU09OKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgoMCwgc2hhcmVkXzEuaXNTaGFyZGVkKSh0aGlzKSAmJiAhdGhpcy5zdXBwb3J0c09wTXNnICYmIHJlYWRQcmVmZXJlbmNlPy5tb2RlICE9PSAncHJpbWFyeScpIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHNlbmRpbmcgYSByZWFkIG9wZXJhdGlvbiB2aWEgT1BfUVVFUlkgYW5kIHRoZSAkcmVhZFByZWZlcmVuY2UgbW9kaWZpZXIsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHF1ZXJ5IE1VU1QgYmUgcHJvdmlkZWQgdXNpbmcgdGhlICRxdWVyeSBtb2RpZmllci5cbiAgICAgICAgICAgICAgICBjbWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICRxdWVyeTogY21kLFxuICAgICAgICAgICAgICAgICAgICAkcmVhZFByZWZlcmVuY2U6IHJlYWRQcmVmZXJlbmNlLnRvSlNPTigpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlYWRQcmVmZXJlbmNlPy5tb2RlICE9PSAncHJpbWFyeScpIHtcbiAgICAgICAgICAgICAgICAvLyBGb3IgbW9kZSAncHJpbWFyeScsIGRyaXZlcnMgTVVTVCBOT1Qgc2V0ICRyZWFkUHJlZmVyZW5jZS5cbiAgICAgICAgICAgICAgICAvLyBGb3IgYWxsIG90aGVyIHJlYWQgcHJlZmVyZW5jZSBtb2RlcyAoaS5lLiAnc2Vjb25kYXJ5JywgJ3ByaW1hcnlQcmVmZXJyZWQnLCAuLi4pLFxuICAgICAgICAgICAgICAgIC8vIGRyaXZlcnMgTVVTVCBzZXQgJHJlYWRQcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgY21kLiRyZWFkUHJlZmVyZW5jZSA9IHJlYWRQcmVmZXJlbmNlLnRvSlNPTigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbW1hbmRPcHRpb25zID0ge1xuICAgICAgICAgICAgbnVtYmVyVG9Ta2lwOiAwLFxuICAgICAgICAgICAgbnVtYmVyVG9SZXR1cm46IC0xLFxuICAgICAgICAgICAgY2hlY2tLZXlzOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIFRoaXMgdmFsdWUgaXMgbm90IG92ZXJyaWRhYmxlXG4gICAgICAgICAgICBzZWNvbmRhcnlPazogcmVhZFByZWZlcmVuY2Uuc2Vjb25kYXJ5T2soKSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuc3VwcG9ydHNPcE1zZ1xuICAgICAgICAgICAgPyBuZXcgY29tbWFuZHNfMS5PcE1zZ1JlcXVlc3QoZGIsIGNtZCwgY29tbWFuZE9wdGlvbnMpXG4gICAgICAgICAgICA6IG5ldyBjb21tYW5kc18xLk9wUXVlcnlSZXF1ZXN0KGRiLCBjbWQsIGNvbW1hbmRPcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICAgIGFzeW5jICpzZW5kV2lyZShtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkFib3J0ZWQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNvY2tldFRpbWVvdXRNUyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRoaXMuc29ja2V0LnNldFRpbWVvdXQob3B0aW9ucy5zb2NrZXRUaW1lb3V0TVMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc29ja2V0VGltZW91dE1TICE9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5zZXRUaW1lb3V0KHRoaXMuc29ja2V0VGltZW91dE1TKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZUNvbW1hbmQobWVzc2FnZSwge1xuICAgICAgICAgICAgICAgIGFncmVlZENvbXByZXNzb3I6IHRoaXMuZGVzY3JpcHRpb24uY29tcHJlc3NvciA/PyAnbm9uZScsXG4gICAgICAgICAgICAgICAgemxpYkNvbXByZXNzaW9uTGV2ZWw6IHRoaXMuZGVzY3JpcHRpb24uemxpYkNvbXByZXNzaW9uTGV2ZWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubm9SZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHsgb2s6IDEgfTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHJlc3BvbnNlIG9mIHRoaXMucmVhZE1hbnkoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LnNldFRpbWVvdXQoMCk7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UucGFyc2Uob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgY29uc3QgW2RvY3VtZW50XSA9IHJlc3BvbnNlLmRvY3VtZW50cztcbiAgICAgICAgICAgICAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihkb2N1bWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzZXNzaW9uIH0gPSBvcHRpb25zO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIHNlc3Npb25zXzEudXBkYXRlU2Vzc2lvbkZyb21SZXNwb25zZSkoc2Vzc2lvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC4kY2x1c3RlclRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2x1c3RlclRpbWUgPSBkb2N1bWVudC4kY2x1c3RlclRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoQ29ubmVjdGlvbi5DTFVTVEVSX1RJTUVfUkVDRUlWRUQsIGRvY3VtZW50LiRjbHVzdGVyVGltZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zb2NrZXRUaW1lb3V0TVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LnNldFRpbWVvdXQob3B0aW9ucy5zb2NrZXRUaW1lb3V0TVMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNvY2tldFRpbWVvdXRNUyAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5zZXRUaW1lb3V0KHRoaXMuc29ja2V0VGltZW91dE1TKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5zZXRUaW1lb3V0KDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICpzZW5kQ29tbWFuZChucywgY29tbWFuZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnByZXBhcmVDb21tYW5kKG5zLmRiLCBjb21tYW5kLCBvcHRpb25zKTtcbiAgICAgICAgbGV0IHN0YXJ0ZWQgPSAwO1xuICAgICAgICBpZiAodGhpcy5zaG91bGRFbWl0QW5kTG9nQ29tbWFuZCkge1xuICAgICAgICAgICAgc3RhcnRlZCA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZ0NvbW1hbmQodGhpcy5tb25pdG9yQ29tbWFuZHMsIENvbm5lY3Rpb24uQ09NTUFORF9TVEFSVEVELCBtZXNzYWdlLmRhdGFiYXNlTmFtZSwgdGhpcy5lc3RhYmxpc2hlZCwgbmV3IGNvbW1hbmRfbW9uaXRvcmluZ19ldmVudHNfMS5Db21tYW5kU3RhcnRlZEV2ZW50KHRoaXMsIG1lc3NhZ2UsIHRoaXMuZGVzY3JpcHRpb24uc2VydmVyQ29ubmVjdGlvbklkKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRvY3VtZW50O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgZm9yIGF3YWl0IChkb2N1bWVudCBvZiB0aGlzLnNlbmRXaXJlKG1lc3NhZ2UsIG9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoZG9jdW1lbnQpICYmIGRvY3VtZW50LndyaXRlQ29uY2VybkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvV3JpdGVDb25jZXJuRXJyb3IoZG9jdW1lbnQud3JpdGVDb25jZXJuRXJyb3IsIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoZG9jdW1lbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIChkb2N1bWVudC5vayA9PT0gMCB8fCBkb2N1bWVudC4kZXJyIHx8IGRvY3VtZW50LmVycm1zZyB8fCBkb2N1bWVudC5jb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkRW1pdEFuZExvZ0NvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0QW5kTG9nQ29tbWFuZCh0aGlzLm1vbml0b3JDb21tYW5kcywgQ29ubmVjdGlvbi5DT01NQU5EX1NVQ0NFRURFRCwgbWVzc2FnZS5kYXRhYmFzZU5hbWUsIHRoaXMuZXN0YWJsaXNoZWQsIG5ldyBjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEuQ29tbWFuZFN1Y2NlZWRlZEV2ZW50KHRoaXMsIG1lc3NhZ2UsIG9wdGlvbnMubm9SZXNwb25zZSA/IHVuZGVmaW5lZCA6IGRvY3VtZW50LCBzdGFydGVkLCB0aGlzLmRlc2NyaXB0aW9uLnNlcnZlckNvbm5lY3Rpb25JZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB5aWVsZCBkb2N1bWVudDtcbiAgICAgICAgICAgICAgICB0aGlzLnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG91bGRFbWl0QW5kTG9nQ29tbWFuZCkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnTW9uZ29Xcml0ZUNvbmNlcm5FcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0QW5kTG9nQ29tbWFuZCh0aGlzLm1vbml0b3JDb21tYW5kcywgQ29ubmVjdGlvbi5DT01NQU5EX1NVQ0NFRURFRCwgbWVzc2FnZS5kYXRhYmFzZU5hbWUsIHRoaXMuZXN0YWJsaXNoZWQsIG5ldyBjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEuQ29tbWFuZFN1Y2NlZWRlZEV2ZW50KHRoaXMsIG1lc3NhZ2UsIG9wdGlvbnMubm9SZXNwb25zZSA/IHVuZGVmaW5lZCA6IGRvY3VtZW50LCBzdGFydGVkLCB0aGlzLmRlc2NyaXB0aW9uLnNlcnZlckNvbm5lY3Rpb25JZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0QW5kTG9nQ29tbWFuZCh0aGlzLm1vbml0b3JDb21tYW5kcywgQ29ubmVjdGlvbi5DT01NQU5EX0ZBSUxFRCwgbWVzc2FnZS5kYXRhYmFzZU5hbWUsIHRoaXMuZXN0YWJsaXNoZWQsIG5ldyBjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEuQ29tbWFuZEZhaWxlZEV2ZW50KHRoaXMsIG1lc3NhZ2UsIGVycm9yLCBzdGFydGVkLCB0aGlzLmRlc2NyaXB0aW9uLnNlcnZlckNvbm5lY3Rpb25JZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvbW1hbmQobnMsIGNvbW1hbmQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLnRocm93SWZBYm9ydGVkKCk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgZG9jdW1lbnQgb2YgdGhpcy5zZW5kQ29tbWFuZChucywgY29tbWFuZCwgb3B0aW9ucykpIHtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yKCdVbmFibGUgdG8gZ2V0IHJlc3BvbnNlIGZyb20gc2VydmVyJyk7XG4gICAgfVxuICAgIGV4aGF1c3RDb21tYW5kKG5zLCBjb21tYW5kLCBvcHRpb25zLCByZXBseUxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IGV4aGF1c3RMb29wID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCByZXBseSBvZiB0aGlzLnNlbmRDb21tYW5kKG5zLCBjb21tYW5kLCBvcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIHJlcGx5TGlzdGVuZXIodW5kZWZpbmVkLCByZXBseSk7XG4gICAgICAgICAgICAgICAgdGhpcy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvcignU2VydmVyIGVuZGVkIG1vcmVUb0NvbWUgdW5leHBlY3RlZGx5Jyk7XG4gICAgICAgIH07XG4gICAgICAgIGV4aGF1c3RMb29wKCkuY2F0Y2gocmVwbHlMaXN0ZW5lcik7XG4gICAgfVxuICAgIHRocm93SWZBYm9ydGVkKCkge1xuICAgICAgICBpZiAodGhpcy5lcnJvcilcbiAgICAgICAgICAgIHRocm93IHRoaXMuZXJyb3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogV3JpdGVzIGFuIE9QX01TRyBvciBPUF9RVUVSWSByZXF1ZXN0IHRvIHRoZSBzb2NrZXQsIG9wdGlvbmFsbHkgY29tcHJlc3NpbmcgdGhlIGNvbW1hbmQuIFRoaXMgbWV0aG9kXG4gICAgICogd2FpdHMgdW50aWwgdGhlIHNvY2tldCdzIGJ1ZmZlciBoYXMgZW1wdGllZCAodGhlIE5vZGVqcyBzb2NrZXQgYGRyYWluYCBldmVudCBoYXMgZmlyZWQpLlxuICAgICAqL1xuICAgIGFzeW5jIHdyaXRlQ29tbWFuZChjb21tYW5kLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsQ29tbWFuZCA9IG9wdGlvbnMuYWdyZWVkQ29tcHJlc3NvciA9PT0gJ25vbmUnIHx8ICFjb21tYW5kc18xLk9wQ29tcHJlc3NlZFJlcXVlc3QuY2FuQ29tcHJlc3MoY29tbWFuZClcbiAgICAgICAgICAgID8gY29tbWFuZFxuICAgICAgICAgICAgOiBuZXcgY29tbWFuZHNfMS5PcENvbXByZXNzZWRSZXF1ZXN0KGNvbW1hbmQsIHtcbiAgICAgICAgICAgICAgICBhZ3JlZWRDb21wcmVzc29yOiBvcHRpb25zLmFncmVlZENvbXByZXNzb3IgPz8gJ25vbmUnLFxuICAgICAgICAgICAgICAgIHpsaWJDb21wcmVzc2lvbkxldmVsOiBvcHRpb25zLnpsaWJDb21wcmVzc2lvbkxldmVsID8/IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuY29uY2F0KGF3YWl0IGZpbmFsQ29tbWFuZC50b0JpbigpKTtcbiAgICAgICAgaWYgKHRoaXMuc29ja2V0LndyaXRlKGJ1ZmZlcikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS5vbmNlKSh0aGlzLnNvY2tldCwgJ2RyYWluJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogUmV0dXJucyBhbiBhc3luYyBnZW5lcmF0b3IgdGhhdCB5aWVsZHMgZnVsbCB3aXJlIHByb3RvY29sIG1lc3NhZ2VzIGZyb20gdGhlIHVuZGVybHlpbmcgc29ja2V0LiAgVGhpcyBmdW5jdGlvblxuICAgICAqIHlpZWxkcyBtZXNzYWdlcyB1bnRpbCBgbW9yZVRvQ29tZWAgaXMgZmFsc2Ugb3Igbm90IHByZXNlbnQgaW4gYSByZXNwb25zZSwgb3IgdGhlIGNhbGxlciBjYW5jZWxzIHRoZSByZXF1ZXN0XG4gICAgICogYnkgY2FsbGluZyBgcmV0dXJuYCBvbiB0aGUgZ2VuZXJhdG9yLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGBmb3ItYXdhaXRgIGxvb3BzIGNhbGwgYHJldHVybmAgYXV0b21hdGljYWxseSB3aGVuIHRoZSBsb29wIGlzIGV4aXRlZC5cbiAgICAgKi9cbiAgICBhc3luYyAqcmVhZE1hbnkoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFFdmVudHMgPSAoMCwgb25fZGF0YV8xLm9uRGF0YSkodGhpcy5tZXNzYWdlU3RyZWFtKTtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgbWVzc2FnZSBvZiB0aGlzLmRhdGFFdmVudHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0ICgwLCBjb21wcmVzc2lvbl8xLmRlY29tcHJlc3NSZXNwb25zZSkobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgeWllbGQgcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5tb3JlVG9Db21lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFFdmVudHMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy50aHJvd0lmQWJvcnRlZCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqIEBldmVudCAqL1xuQ29ubmVjdGlvbi5DT01NQU5EX1NUQVJURUQgPSBjb25zdGFudHNfMS5DT01NQU5EX1NUQVJURUQ7XG4vKiogQGV2ZW50ICovXG5Db25uZWN0aW9uLkNPTU1BTkRfU1VDQ0VFREVEID0gY29uc3RhbnRzXzEuQ09NTUFORF9TVUNDRUVERUQ7XG4vKiogQGV2ZW50ICovXG5Db25uZWN0aW9uLkNPTU1BTkRfRkFJTEVEID0gY29uc3RhbnRzXzEuQ09NTUFORF9GQUlMRUQ7XG4vKiogQGV2ZW50ICovXG5Db25uZWN0aW9uLkNMVVNURVJfVElNRV9SRUNFSVZFRCA9IGNvbnN0YW50c18xLkNMVVNURVJfVElNRV9SRUNFSVZFRDtcbi8qKiBAZXZlbnQgKi9cbkNvbm5lY3Rpb24uQ0xPU0UgPSBjb25zdGFudHNfMS5DTE9TRTtcbi8qKiBAZXZlbnQgKi9cbkNvbm5lY3Rpb24uUElOTkVEID0gY29uc3RhbnRzXzEuUElOTkVEO1xuLyoqIEBldmVudCAqL1xuQ29ubmVjdGlvbi5VTlBJTk5FRCA9IGNvbnN0YW50c18xLlVOUElOTkVEO1xuZXhwb3J0cy5Db25uZWN0aW9uID0gQ29ubmVjdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFNpemVkTWVzc2FnZVRyYW5zZm9ybSBleHRlbmRzIHN0cmVhbV8xLlRyYW5zZm9ybSB7XG4gICAgY29uc3RydWN0b3IoeyBjb25uZWN0aW9uIH0pIHtcbiAgICAgICAgc3VwZXIoeyBvYmplY3RNb2RlOiBmYWxzZSB9KTtcbiAgICAgICAgdGhpcy5idWZmZXJQb29sID0gbmV3IHV0aWxzXzEuQnVmZmVyUG9vbCgpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgIH1cbiAgICBfdHJhbnNmb3JtKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbi5kZWxheWVkVGltZW91dElkICE9IG51bGwpIHtcbiAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXMuY29ubmVjdGlvbi5kZWxheWVkVGltZW91dElkKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5kZWxheWVkVGltZW91dElkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1ZmZlclBvb2wuYXBwZW5kKGNodW5rKTtcbiAgICAgICAgY29uc3Qgc2l6ZU9mTWVzc2FnZSA9IHRoaXMuYnVmZmVyUG9vbC5nZXRJbnQzMigpO1xuICAgICAgICBpZiAoc2l6ZU9mTWVzc2FnZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2l6ZU9mTWVzc2FnZSA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYEludmFsaWQgbWVzc2FnZSBzaXplOiAke3NpemVPZk1lc3NhZ2V9LCB0b28gc21hbGxgKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpemVPZk1lc3NhZ2UgPiB0aGlzLmJ1ZmZlclBvb2wubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5idWZmZXJQb29sLnJlYWQoc2l6ZU9mTWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBtZXNzYWdlKTtcbiAgICB9XG59XG5leHBvcnRzLlNpemVkTWVzc2FnZVRyYW5zZm9ybSA9IFNpemVkTWVzc2FnZVRyYW5zZm9ybTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENyeXB0b0Nvbm5lY3Rpb24gZXh0ZW5kcyBDb25uZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihzdHJlYW0sIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoc3RyZWFtLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5hdXRvRW5jcnlwdGVyID0gb3B0aW9ucy5hdXRvRW5jcnlwdGVyO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsIEBvdmVycmlkZSAqL1xuICAgIGFzeW5jIGNvbW1hbmQobnMsIGNtZCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IGF1dG9FbmNyeXB0ZXIgfSA9IHRoaXM7XG4gICAgICAgIGlmICghYXV0b0VuY3J5cHRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yKCdObyBBdXRvRW5jcnlwdGVyIGF2YWlsYWJsZSBmb3IgZW5jcnlwdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcnZlcldpcmVWZXJzaW9uID0gKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHRoaXMpO1xuICAgICAgICBpZiAoc2VydmVyV2lyZVZlcnNpb24gPT09IDApIHtcbiAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhlIGluaXRpYWwgaGFuZHNoYWtlIGhhc24ndCBoYXBwZW5lZCB5ZXRcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5jb21tYW5kKG5zLCBjbWQsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXJ2ZXJXaXJlVmVyc2lvbiA8IDgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKCdBdXRvLWVuY3J5cHRpb24gcmVxdWlyZXMgYSBtaW5pbXVtIE1vbmdvREIgdmVyc2lvbiBvZiA0LjInKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTYXZlIHNvcnQgb3IgaW5kZXhLZXlzIGJhc2VkIG9uIHRoZSBjb21tYW5kIGJlaW5nIHJ1blxuICAgICAgICAvLyB0aGUgZW5jcnlwdCBBUEkgc2VyaWFsaXplcyBvdXIgSlMgb2JqZWN0cyB0byBCU09OIHRvIHBhc3MgdG8gdGhlIG5hdGl2ZSBjb2RlIGxheWVyXG4gICAgICAgIC8vIGFuZCB0aGVuIGRlc2VyaWFsaXplcyB0aGUgZW5jcnlwdGVkIHJlc3VsdCwgdGhlIHByb3RvY29sIGxldmVsIGNvbXBvbmVudHNcbiAgICAgICAgLy8gb2YgdGhlIGNvbW1hbmQgKGV4LiBzb3J0KSBhcmUgdGhlbiBjb252ZXJ0ZWQgdG8gSlMgb2JqZWN0cyBwb3RlbnRpYWxseSBsb3NpbmdcbiAgICAgICAgLy8gaW1wb3J0IGtleSBvcmRlciBpbmZvcm1hdGlvbi4gVGhlc2UgZmllbGRzIGFyZSBuZXZlciBlbmNyeXB0ZWQgc28gd2UgY2FuIHNhdmUgdGhlIHZhbHVlc1xuICAgICAgICAvLyBmcm9tIGJlZm9yZSB0aGUgZW5jcnlwdGlvbiBhbmQgcmVwbGFjZSB0aGVtIGFmdGVyIGVuY3J5cHRpb24gaGFzIGJlZW4gcGVyZm9ybWVkXG4gICAgICAgIGNvbnN0IHNvcnQgPSBjbWQuZmluZCB8fCBjbWQuZmluZEFuZE1vZGlmeSA/IGNtZC5zb3J0IDogbnVsbDtcbiAgICAgICAgY29uc3QgaW5kZXhLZXlzID0gY21kLmNyZWF0ZUluZGV4ZXNcbiAgICAgICAgICAgID8gY21kLmluZGV4ZXMubWFwKChpbmRleCkgPT4gaW5kZXgua2V5KVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBjb25zdCBlbmNyeXB0ZWQgPSBhd2FpdCBhdXRvRW5jcnlwdGVyLmVuY3J5cHQobnMudG9TdHJpbmcoKSwgY21kLCBvcHRpb25zKTtcbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgc2F2ZWQgdmFsdWVzXG4gICAgICAgIGlmIChzb3J0ICE9IG51bGwgJiYgKGNtZC5maW5kIHx8IGNtZC5maW5kQW5kTW9kaWZ5KSkge1xuICAgICAgICAgICAgZW5jcnlwdGVkLnNvcnQgPSBzb3J0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleEtleXMgIT0gbnVsbCAmJiBjbWQuY3JlYXRlSW5kZXhlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbb2Zmc2V0LCBpbmRleF0gb2YgaW5kZXhLZXlzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYGVuY3J5cHRlZGAgaXMgYSBnZW5lcmljIFwiY29tbWFuZFwiLCBidXQgd2UndmUgbmFycm93ZWQgZm9yIG9ubHkgYGNyZWF0ZUluZGV4ZXNgIGNvbW1hbmRzIGhlcmVcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWQuaW5kZXhlc1tvZmZzZXRdLmtleSA9IGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXIuY29tbWFuZChucywgZW5jcnlwdGVkLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGF1dG9FbmNyeXB0ZXIuZGVjcnlwdChyZXNwb25zZSwgb3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0cy5DcnlwdG9Db25uZWN0aW9uID0gQ3J5cHRvQ29ubmVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbm5lY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ3J5cHRvQ29ubmVjdGlvbiIsIlNpemVkTWVzc2FnZVRyYW5zZm9ybSIsIkNvbm5lY3Rpb24iLCJoYXNTZXNzaW9uU3VwcG9ydCIsInN0cmVhbV8xIiwicmVxdWlyZSIsInRpbWVyc18xIiwiY29uc3RhbnRzXzEiLCJlcnJvcl8xIiwibW9uZ29fbG9nZ2VyXzEiLCJtb25nb190eXBlc18xIiwicmVhZF9wcmVmZXJlbmNlXzEiLCJjb21tb25fMSIsInNlc3Npb25zXzEiLCJ1dGlsc18xIiwiY29tbWFuZF9tb25pdG9yaW5nX2V2ZW50c18xIiwiY29tbWFuZHNfMSIsInN0cmVhbV9kZXNjcmlwdGlvbl8xIiwiY29tcHJlc3Npb25fMSIsIm9uX2RhdGFfMSIsInNoYXJlZF8xIiwiY29ubiIsImRlc2NyaXB0aW9uIiwibG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyIsInN0cmVhbUlkZW50aWZpZXIiLCJzdHJlYW0iLCJvcHRpb25zIiwicHJveHlIb3N0IiwiaG9zdEFkZHJlc3MiLCJ0b1N0cmluZyIsInJlbW90ZUFkZHJlc3MiLCJyZW1vdGVQb3J0IiwiSG9zdEFkZHJlc3MiLCJmcm9tSG9zdFBvcnQiLCJ1dWlkVjQiLCJUeXBlZEV2ZW50RW1pdHRlciIsImNvbnN0cnVjdG9yIiwibGFzdEhlbGxvTVMiLCJoZWxsb09rIiwiZGVsYXllZFRpbWVvdXRJZCIsImNsb3NlZCIsImNsdXN0ZXJUaW1lIiwiZXJyb3IiLCJkYXRhRXZlbnRzIiwic29ja2V0IiwiaWQiLCJhZGRyZXNzIiwic29ja2V0VGltZW91dE1TIiwibW9uaXRvckNvbW1hbmRzIiwic2VydmVyQXBpIiwibW9uZ29Mb2dnZXIiLCJlc3RhYmxpc2hlZCIsIlN0cmVhbURlc2NyaXB0aW9uIiwiZ2VuZXJhdGlvbiIsImxhc3RVc2VUaW1lIiwibm93IiwibWVzc2FnZVN0cmVhbSIsIm9uIiwib25FcnJvciIsImJpbmQiLCJwaXBlIiwiY29ubmVjdGlvbiIsIm9uQ2xvc2UiLCJvblRpbWVvdXQiLCJoZWxsbyIsInJlc3BvbnNlIiwicmVjZWl2ZVJlc3BvbnNlIiwiZnJlZXplIiwic2VydmljZUlkIiwibG9hZEJhbGFuY2VkIiwiaWRsZVRpbWUiLCJjYWxjdWxhdGVEdXJhdGlvbkluTXMiLCJzdXBwb3J0c09wTXNnIiwibWF4V2lyZVZlcnNpb24iLCJfX25vZGVqc19tb2NrX3NlcnZlcl9fIiwic2hvdWxkRW1pdEFuZExvZ0NvbW1hbmQiLCJhdXRoQ29udGV4dCIsInJlYXV0aGVudGljYXRpbmciLCJ3aWxsTG9nIiwiTW9uZ29Mb2dnYWJsZUNvbXBvbmVudCIsIkNPTU1BTkQiLCJTZXZlcml0eUxldmVsIiwiREVCVUciLCJtYXJrQXZhaWxhYmxlIiwiY2xlYW51cCIsIm1lc3NhZ2UiLCJNb25nb05ldHdvcmtFcnJvciIsInNldFRpbWVvdXQiLCJiZWZvcmVIYW5kc2hha2UiLCJNb25nb05ldHdvcmtUaW1lb3V0RXJyb3IiLCJ1bnJlZiIsImRlc3Ryb3kiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJQSU5ORUQiLCJVTlBJTk5FRCIsInRocm93IiwidGhlbiIsInVuZGVmaW5lZCIsImVtaXQiLCJDTE9TRSIsInByZXBhcmVDb21tYW5kIiwiZGIiLCJjb21tYW5kIiwiY21kIiwicmVhZFByZWZlcmVuY2UiLCJnZXRSZWFkUHJlZmVyZW5jZSIsInNlc3Npb24iLCJ2ZXJzaW9uIiwic3RyaWN0IiwiZGVwcmVjYXRpb25FcnJvcnMiLCJhcGlWZXJzaW9uIiwiYXBpU3RyaWN0IiwiYXBpRGVwcmVjYXRpb25FcnJvcnMiLCJncmVhdGVyVGhhbiIsInNlc3Npb25FcnJvciIsImFwcGx5U2Vzc2lvbiIsImV4cGxpY2l0IiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCIkY2x1c3RlclRpbWUiLCJ0eXBlIiwiU2VydmVyVHlwZSIsIlN0YW5kYWxvbmUiLCJpc1NoYXJkZWQiLCJkaXJlY3RDb25uZWN0aW9uIiwibW9kZSIsIiRyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeVByZWZlcnJlZCIsInRvSlNPTiIsIiRxdWVyeSIsImNvbW1hbmRPcHRpb25zIiwibnVtYmVyVG9Ta2lwIiwibnVtYmVyVG9SZXR1cm4iLCJjaGVja0tleXMiLCJzZWNvbmRhcnlPayIsIk9wTXNnUmVxdWVzdCIsIk9wUXVlcnlSZXF1ZXN0Iiwic2VuZFdpcmUiLCJ0aHJvd0lmQWJvcnRlZCIsIndyaXRlQ29tbWFuZCIsImFncmVlZENvbXByZXNzb3IiLCJjb21wcmVzc29yIiwiemxpYkNvbXByZXNzaW9uTGV2ZWwiLCJub1Jlc3BvbnNlIiwib2siLCJyZWFkTWFueSIsInBhcnNlIiwiZG9jdW1lbnQiLCJkb2N1bWVudHMiLCJCdWZmZXIiLCJpc0J1ZmZlciIsInVwZGF0ZVNlc3Npb25Gcm9tUmVzcG9uc2UiLCJDTFVTVEVSX1RJTUVfUkVDRUlWRUQiLCJzZW5kQ29tbWFuZCIsIm5zIiwic3RhcnRlZCIsImVtaXRBbmRMb2dDb21tYW5kIiwiQ09NTUFORF9TVEFSVEVEIiwiZGF0YWJhc2VOYW1lIiwiQ29tbWFuZFN0YXJ0ZWRFdmVudCIsInNlcnZlckNvbm5lY3Rpb25JZCIsIndyaXRlQ29uY2VybkVycm9yIiwiTW9uZ29Xcml0ZUNvbmNlcm5FcnJvciIsIiRlcnIiLCJlcnJtc2ciLCJjb2RlIiwiTW9uZ29TZXJ2ZXJFcnJvciIsIkNPTU1BTkRfU1VDQ0VFREVEIiwiQ29tbWFuZFN1Y2NlZWRlZEV2ZW50IiwibmFtZSIsIkNPTU1BTkRfRkFJTEVEIiwiQ29tbWFuZEZhaWxlZEV2ZW50IiwiTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvciIsImV4aGF1c3RDb21tYW5kIiwicmVwbHlMaXN0ZW5lciIsImV4aGF1c3RMb29wIiwicmVwbHkiLCJjYXRjaCIsImZpbmFsQ29tbWFuZCIsIk9wQ29tcHJlc3NlZFJlcXVlc3QiLCJjYW5Db21wcmVzcyIsImJ1ZmZlciIsImNvbmNhdCIsInRvQmluIiwid3JpdGUiLCJvbmNlIiwib25EYXRhIiwiZGVjb21wcmVzc1Jlc3BvbnNlIiwibW9yZVRvQ29tZSIsIlRyYW5zZm9ybSIsIm9iamVjdE1vZGUiLCJidWZmZXJQb29sIiwiQnVmZmVyUG9vbCIsIl90cmFuc2Zvcm0iLCJjaHVuayIsImVuY29kaW5nIiwiY2FsbGJhY2siLCJjbGVhclRpbWVvdXQiLCJhcHBlbmQiLCJzaXplT2ZNZXNzYWdlIiwiZ2V0SW50MzIiLCJNb25nb1BhcnNlRXJyb3IiLCJsZW5ndGgiLCJyZWFkIiwiYXV0b0VuY3J5cHRlciIsIk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvciIsInNlcnZlcldpcmVWZXJzaW9uIiwic29ydCIsImZpbmQiLCJmaW5kQW5kTW9kaWZ5IiwiaW5kZXhLZXlzIiwiY3JlYXRlSW5kZXhlcyIsImluZGV4ZXMiLCJtYXAiLCJpbmRleCIsImtleSIsImVuY3J5cHRlZCIsImVuY3J5cHQiLCJvZmZzZXQiLCJlbnRyaWVzIiwiZGVjcnlwdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/connection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/connection_pool.js":
/*!**********************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/connection_pool.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ConnectionPool = exports.PoolState = void 0;\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst connect_1 = __webpack_require__(/*! ./connect */ \"(ssr)/./node_modules/mongodb/lib/cmap/connect.js\");\nconst connection_1 = __webpack_require__(/*! ./connection */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection.js\");\nconst connection_pool_events_1 = __webpack_require__(/*! ./connection_pool_events */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection_pool_events.js\");\nconst errors_1 = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/mongodb/lib/cmap/errors.js\");\nconst metrics_1 = __webpack_require__(/*! ./metrics */ \"(ssr)/./node_modules/mongodb/lib/cmap/metrics.js\");\n/** @internal */ const kServer = Symbol(\"server\");\n/** @internal */ const kConnections = Symbol(\"connections\");\n/** @internal */ const kPending = Symbol(\"pending\");\n/** @internal */ const kCheckedOut = Symbol(\"checkedOut\");\n/** @internal */ const kMinPoolSizeTimer = Symbol(\"minPoolSizeTimer\");\n/** @internal */ const kGeneration = Symbol(\"generation\");\n/** @internal */ const kServiceGenerations = Symbol(\"serviceGenerations\");\n/** @internal */ const kConnectionCounter = Symbol(\"connectionCounter\");\n/** @internal */ const kCancellationToken = Symbol(\"cancellationToken\");\n/** @internal */ const kWaitQueue = Symbol(\"waitQueue\");\n/** @internal */ const kCancelled = Symbol(\"cancelled\");\n/** @internal */ const kMetrics = Symbol(\"metrics\");\n/** @internal */ const kProcessingWaitQueue = Symbol(\"processingWaitQueue\");\n/** @internal */ const kPoolState = Symbol(\"poolState\");\n/** @internal */ exports.PoolState = Object.freeze({\n    paused: \"paused\",\n    ready: \"ready\",\n    closed: \"closed\"\n});\n/**\n * A pool of connections which dynamically resizes, and emit events related to pool activity\n * @internal\n */ class ConnectionPool extends mongo_types_1.TypedEventEmitter {\n    constructor(server, options){\n        super();\n        this.options = Object.freeze({\n            connectionType: connection_1.Connection,\n            ...options,\n            maxPoolSize: options.maxPoolSize ?? 100,\n            minPoolSize: options.minPoolSize ?? 0,\n            maxConnecting: options.maxConnecting ?? 2,\n            maxIdleTimeMS: options.maxIdleTimeMS ?? 0,\n            waitQueueTimeoutMS: options.waitQueueTimeoutMS ?? 0,\n            minPoolSizeCheckFrequencyMS: options.minPoolSizeCheckFrequencyMS ?? 100,\n            autoEncrypter: options.autoEncrypter\n        });\n        if (this.options.minPoolSize > this.options.maxPoolSize) {\n            throw new error_1.MongoInvalidArgumentError(\"Connection pool minimum size must not be greater than maximum pool size\");\n        }\n        this[kPoolState] = exports.PoolState.paused;\n        this[kServer] = server;\n        this[kConnections] = new utils_1.List();\n        this[kPending] = 0;\n        this[kCheckedOut] = new Set();\n        this[kMinPoolSizeTimer] = undefined;\n        this[kGeneration] = 0;\n        this[kServiceGenerations] = new Map();\n        this[kConnectionCounter] = (0, utils_1.makeCounter)(1);\n        this[kCancellationToken] = new mongo_types_1.CancellationToken();\n        this[kCancellationToken].setMaxListeners(Infinity);\n        this[kWaitQueue] = new utils_1.List();\n        this[kMetrics] = new metrics_1.ConnectionPoolMetrics();\n        this[kProcessingWaitQueue] = false;\n        this.mongoLogger = this[kServer].topology.client?.mongoLogger;\n        this.component = \"connection\";\n        process.nextTick(()=>{\n            this.emitAndLog(ConnectionPool.CONNECTION_POOL_CREATED, new connection_pool_events_1.ConnectionPoolCreatedEvent(this));\n        });\n    }\n    /** The address of the endpoint the pool is connected to */ get address() {\n        return this.options.hostAddress.toString();\n    }\n    /**\n     * Check if the pool has been closed\n     *\n     * TODO(NODE-3263): We can remove this property once shell no longer needs it\n     */ get closed() {\n        return this[kPoolState] === exports.PoolState.closed;\n    }\n    /** An integer representing the SDAM generation of the pool */ get generation() {\n        return this[kGeneration];\n    }\n    /** An integer expressing how many total connections (available + pending + in use) the pool currently has */ get totalConnectionCount() {\n        return this.availableConnectionCount + this.pendingConnectionCount + this.currentCheckedOutCount;\n    }\n    /** An integer expressing how many connections are currently available in the pool. */ get availableConnectionCount() {\n        return this[kConnections].length;\n    }\n    get pendingConnectionCount() {\n        return this[kPending];\n    }\n    get currentCheckedOutCount() {\n        return this[kCheckedOut].size;\n    }\n    get waitQueueSize() {\n        return this[kWaitQueue].length;\n    }\n    get loadBalanced() {\n        return this.options.loadBalanced;\n    }\n    get serviceGenerations() {\n        return this[kServiceGenerations];\n    }\n    get serverError() {\n        return this[kServer].description.error;\n    }\n    /**\n     * This is exposed ONLY for use in mongosh, to enable\n     * killing all connections if a user quits the shell with\n     * operations in progress.\n     *\n     * This property may be removed as a part of NODE-3263.\n     */ get checkedOutConnections() {\n        return this[kCheckedOut];\n    }\n    /**\n     * Get the metrics information for the pool when a wait queue timeout occurs.\n     */ waitQueueErrorMetrics() {\n        return this[kMetrics].info(this.options.maxPoolSize);\n    }\n    /**\n     * Set the pool state to \"ready\"\n     */ ready() {\n        if (this[kPoolState] !== exports.PoolState.paused) {\n            return;\n        }\n        this[kPoolState] = exports.PoolState.ready;\n        this.emitAndLog(ConnectionPool.CONNECTION_POOL_READY, new connection_pool_events_1.ConnectionPoolReadyEvent(this));\n        (0, timers_1.clearTimeout)(this[kMinPoolSizeTimer]);\n        this.ensureMinPoolSize();\n    }\n    /**\n     * Check a connection out of this pool. The connection will continue to be tracked, but no reference to it\n     * will be held by the pool. This means that if a connection is checked out it MUST be checked back in or\n     * explicitly destroyed by the new owner.\n     */ async checkOut() {\n        this.emitAndLog(ConnectionPool.CONNECTION_CHECK_OUT_STARTED, new connection_pool_events_1.ConnectionCheckOutStartedEvent(this));\n        const waitQueueTimeoutMS = this.options.waitQueueTimeoutMS;\n        const { promise, resolve, reject } = (0, utils_1.promiseWithResolvers)();\n        const waitQueueMember = {\n            resolve,\n            reject,\n            timeoutController: new utils_1.TimeoutController(waitQueueTimeoutMS)\n        };\n        waitQueueMember.timeoutController.signal.addEventListener(\"abort\", ()=>{\n            waitQueueMember[kCancelled] = true;\n            waitQueueMember.timeoutController.clear();\n            this.emitAndLog(ConnectionPool.CONNECTION_CHECK_OUT_FAILED, new connection_pool_events_1.ConnectionCheckOutFailedEvent(this, \"timeout\"));\n            waitQueueMember.reject(new errors_1.WaitQueueTimeoutError(this.loadBalanced ? this.waitQueueErrorMetrics() : \"Timed out while checking out a connection from connection pool\", this.address));\n        });\n        this[kWaitQueue].push(waitQueueMember);\n        process.nextTick(()=>this.processWaitQueue());\n        return promise;\n    }\n    /**\n     * Check a connection into the pool.\n     *\n     * @param connection - The connection to check in\n     */ checkIn(connection) {\n        if (!this[kCheckedOut].has(connection)) {\n            return;\n        }\n        const poolClosed = this.closed;\n        const stale = this.connectionIsStale(connection);\n        const willDestroy = !!(poolClosed || stale || connection.closed);\n        if (!willDestroy) {\n            connection.markAvailable();\n            this[kConnections].unshift(connection);\n        }\n        this[kCheckedOut].delete(connection);\n        this.emitAndLog(ConnectionPool.CONNECTION_CHECKED_IN, new connection_pool_events_1.ConnectionCheckedInEvent(this, connection));\n        if (willDestroy) {\n            const reason = connection.closed ? \"error\" : poolClosed ? \"poolClosed\" : \"stale\";\n            this.destroyConnection(connection, reason);\n        }\n        process.nextTick(()=>this.processWaitQueue());\n    }\n    /**\n     * Clear the pool\n     *\n     * Pool reset is handled by incrementing the pool's generation count. Any existing connection of a\n     * previous generation will eventually be pruned during subsequent checkouts.\n     */ clear(options = {}) {\n        if (this.closed) {\n            return;\n        }\n        // handle load balanced case\n        if (this.loadBalanced) {\n            const { serviceId } = options;\n            if (!serviceId) {\n                throw new error_1.MongoRuntimeError(\"ConnectionPool.clear() called in load balanced mode with no serviceId.\");\n            }\n            const sid = serviceId.toHexString();\n            const generation = this.serviceGenerations.get(sid);\n            // Only need to worry if the generation exists, since it should\n            // always be there but typescript needs the check.\n            if (generation == null) {\n                throw new error_1.MongoRuntimeError(\"Service generations are required in load balancer mode.\");\n            } else {\n                // Increment the generation for the service id.\n                this.serviceGenerations.set(sid, generation + 1);\n            }\n            this.emitAndLog(ConnectionPool.CONNECTION_POOL_CLEARED, new connection_pool_events_1.ConnectionPoolClearedEvent(this, {\n                serviceId\n            }));\n            return;\n        }\n        // handle non load-balanced case\n        const interruptInUseConnections = options.interruptInUseConnections ?? false;\n        const oldGeneration = this[kGeneration];\n        this[kGeneration] += 1;\n        const alreadyPaused = this[kPoolState] === exports.PoolState.paused;\n        this[kPoolState] = exports.PoolState.paused;\n        this.clearMinPoolSizeTimer();\n        if (!alreadyPaused) {\n            this.emitAndLog(ConnectionPool.CONNECTION_POOL_CLEARED, new connection_pool_events_1.ConnectionPoolClearedEvent(this, {\n                interruptInUseConnections\n            }));\n        }\n        if (interruptInUseConnections) {\n            process.nextTick(()=>this.interruptInUseConnections(oldGeneration));\n        }\n        this.processWaitQueue();\n    }\n    /**\n     * Closes all stale in-use connections in the pool with a resumable PoolClearedOnNetworkError.\n     *\n     * Only connections where `connection.generation <= minGeneration` are killed.\n     */ interruptInUseConnections(minGeneration) {\n        for (const connection of this[kCheckedOut]){\n            if (connection.generation <= minGeneration) {\n                connection.onError(new errors_1.PoolClearedOnNetworkError(this));\n                this.checkIn(connection);\n            }\n        }\n    }\n    /** Close the pool */ close() {\n        if (this.closed) {\n            return;\n        }\n        // immediately cancel any in-flight connections\n        this[kCancellationToken].emit(\"cancel\");\n        // end the connection counter\n        if (typeof this[kConnectionCounter].return === \"function\") {\n            this[kConnectionCounter].return(undefined);\n        }\n        this[kPoolState] = exports.PoolState.closed;\n        this.clearMinPoolSizeTimer();\n        this.processWaitQueue();\n        for (const conn of this[kConnections]){\n            this.emitAndLog(ConnectionPool.CONNECTION_CLOSED, new connection_pool_events_1.ConnectionClosedEvent(this, conn, \"poolClosed\"));\n            conn.destroy();\n        }\n        this[kConnections].clear();\n        this.emitAndLog(ConnectionPool.CONNECTION_POOL_CLOSED, new connection_pool_events_1.ConnectionPoolClosedEvent(this));\n    }\n    /**\n     * @internal\n     * Reauthenticate a connection\n     */ async reauthenticate(connection) {\n        const authContext = connection.authContext;\n        if (!authContext) {\n            throw new error_1.MongoRuntimeError(\"No auth context found on connection.\");\n        }\n        const credentials = authContext.credentials;\n        if (!credentials) {\n            throw new error_1.MongoMissingCredentialsError(\"Connection is missing credentials when asked to reauthenticate\");\n        }\n        const resolvedCredentials = credentials.resolveAuthMechanism(connection.hello);\n        const provider = this[kServer].topology.client.s.authProviders.getOrCreateProvider(resolvedCredentials.mechanism);\n        if (!provider) {\n            throw new error_1.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${credentials.mechanism}`);\n        }\n        await provider.reauth(authContext);\n        return;\n    }\n    /** Clear the min pool size timer */ clearMinPoolSizeTimer() {\n        const minPoolSizeTimer = this[kMinPoolSizeTimer];\n        if (minPoolSizeTimer) {\n            (0, timers_1.clearTimeout)(minPoolSizeTimer);\n        }\n    }\n    destroyConnection(connection, reason) {\n        this.emitAndLog(ConnectionPool.CONNECTION_CLOSED, new connection_pool_events_1.ConnectionClosedEvent(this, connection, reason));\n        // destroy the connection\n        connection.destroy();\n    }\n    connectionIsStale(connection) {\n        const serviceId = connection.serviceId;\n        if (this.loadBalanced && serviceId) {\n            const sid = serviceId.toHexString();\n            const generation = this.serviceGenerations.get(sid);\n            return connection.generation !== generation;\n        }\n        return connection.generation !== this[kGeneration];\n    }\n    connectionIsIdle(connection) {\n        return !!(this.options.maxIdleTimeMS && connection.idleTime > this.options.maxIdleTimeMS);\n    }\n    /**\n     * Destroys a connection if the connection is perished.\n     *\n     * @returns `true` if the connection was destroyed, `false` otherwise.\n     */ destroyConnectionIfPerished(connection) {\n        const isStale = this.connectionIsStale(connection);\n        const isIdle = this.connectionIsIdle(connection);\n        if (!isStale && !isIdle && !connection.closed) {\n            return false;\n        }\n        const reason = connection.closed ? \"error\" : isStale ? \"stale\" : \"idle\";\n        this.destroyConnection(connection, reason);\n        return true;\n    }\n    createConnection(callback) {\n        const connectOptions = {\n            ...this.options,\n            id: this[kConnectionCounter].next().value,\n            generation: this[kGeneration],\n            cancellationToken: this[kCancellationToken],\n            mongoLogger: this.mongoLogger,\n            authProviders: this[kServer].topology.client.s.authProviders\n        };\n        this[kPending]++;\n        // This is our version of a \"virtual\" no-I/O connection as the spec requires\n        this.emitAndLog(ConnectionPool.CONNECTION_CREATED, new connection_pool_events_1.ConnectionCreatedEvent(this, {\n            id: connectOptions.id\n        }));\n        (0, connect_1.connect)(connectOptions).then((connection)=>{\n            // The pool might have closed since we started trying to create a connection\n            if (this[kPoolState] !== exports.PoolState.ready) {\n                this[kPending]--;\n                connection.destroy();\n                callback(this.closed ? new errors_1.PoolClosedError(this) : new errors_1.PoolClearedError(this));\n                return;\n            }\n            // forward all events from the connection to the pool\n            for (const event of [\n                ...constants_1.APM_EVENTS,\n                connection_1.Connection.CLUSTER_TIME_RECEIVED\n            ]){\n                connection.on(event, (e)=>this.emit(event, e));\n            }\n            if (this.loadBalanced) {\n                connection.on(connection_1.Connection.PINNED, (pinType)=>this[kMetrics].markPinned(pinType));\n                connection.on(connection_1.Connection.UNPINNED, (pinType)=>this[kMetrics].markUnpinned(pinType));\n                const serviceId = connection.serviceId;\n                if (serviceId) {\n                    let generation;\n                    const sid = serviceId.toHexString();\n                    if (generation = this.serviceGenerations.get(sid)) {\n                        connection.generation = generation;\n                    } else {\n                        this.serviceGenerations.set(sid, 0);\n                        connection.generation = 0;\n                    }\n                }\n            }\n            connection.markAvailable();\n            this.emitAndLog(ConnectionPool.CONNECTION_READY, new connection_pool_events_1.ConnectionReadyEvent(this, connection));\n            this[kPending]--;\n            callback(undefined, connection);\n        }, (error)=>{\n            this[kPending]--;\n            this.emitAndLog(ConnectionPool.CONNECTION_CLOSED, new connection_pool_events_1.ConnectionClosedEvent(this, {\n                id: connectOptions.id,\n                serviceId: undefined\n            }, \"error\", // TODO(NODE-5192): Remove this cast\n            error));\n            if (error instanceof error_1.MongoNetworkError || error instanceof error_1.MongoServerError) {\n                error.connectionGeneration = connectOptions.generation;\n            }\n            callback(error ?? new error_1.MongoRuntimeError(\"Connection creation failed without error\"));\n        });\n    }\n    ensureMinPoolSize() {\n        const minPoolSize = this.options.minPoolSize;\n        if (this[kPoolState] !== exports.PoolState.ready || minPoolSize === 0) {\n            return;\n        }\n        this[kConnections].prune((connection)=>this.destroyConnectionIfPerished(connection));\n        if (this.totalConnectionCount < minPoolSize && this.pendingConnectionCount < this.options.maxConnecting) {\n            // NOTE: ensureMinPoolSize should not try to get all the pending\n            // connection permits because that potentially delays the availability of\n            // the connection to a checkout request\n            this.createConnection((err, connection)=>{\n                if (err) {\n                    this[kServer].handleError(err);\n                }\n                if (!err && connection) {\n                    this[kConnections].push(connection);\n                    process.nextTick(()=>this.processWaitQueue());\n                }\n                if (this[kPoolState] === exports.PoolState.ready) {\n                    (0, timers_1.clearTimeout)(this[kMinPoolSizeTimer]);\n                    this[kMinPoolSizeTimer] = (0, timers_1.setTimeout)(()=>this.ensureMinPoolSize(), this.options.minPoolSizeCheckFrequencyMS);\n                }\n            });\n        } else {\n            (0, timers_1.clearTimeout)(this[kMinPoolSizeTimer]);\n            this[kMinPoolSizeTimer] = (0, timers_1.setTimeout)(()=>this.ensureMinPoolSize(), this.options.minPoolSizeCheckFrequencyMS);\n        }\n    }\n    processWaitQueue() {\n        if (this[kProcessingWaitQueue]) {\n            return;\n        }\n        this[kProcessingWaitQueue] = true;\n        while(this.waitQueueSize){\n            const waitQueueMember = this[kWaitQueue].first();\n            if (!waitQueueMember) {\n                this[kWaitQueue].shift();\n                continue;\n            }\n            if (waitQueueMember[kCancelled]) {\n                this[kWaitQueue].shift();\n                continue;\n            }\n            if (this[kPoolState] !== exports.PoolState.ready) {\n                const reason = this.closed ? \"poolClosed\" : \"connectionError\";\n                const error = this.closed ? new errors_1.PoolClosedError(this) : new errors_1.PoolClearedError(this);\n                this.emitAndLog(ConnectionPool.CONNECTION_CHECK_OUT_FAILED, new connection_pool_events_1.ConnectionCheckOutFailedEvent(this, reason, error));\n                waitQueueMember.timeoutController.clear();\n                this[kWaitQueue].shift();\n                waitQueueMember.reject(error);\n                continue;\n            }\n            if (!this.availableConnectionCount) {\n                break;\n            }\n            const connection = this[kConnections].shift();\n            if (!connection) {\n                break;\n            }\n            if (!this.destroyConnectionIfPerished(connection)) {\n                this[kCheckedOut].add(connection);\n                this.emitAndLog(ConnectionPool.CONNECTION_CHECKED_OUT, new connection_pool_events_1.ConnectionCheckedOutEvent(this, connection));\n                waitQueueMember.timeoutController.clear();\n                this[kWaitQueue].shift();\n                waitQueueMember.resolve(connection);\n            }\n        }\n        const { maxPoolSize, maxConnecting } = this.options;\n        while(this.waitQueueSize > 0 && this.pendingConnectionCount < maxConnecting && (maxPoolSize === 0 || this.totalConnectionCount < maxPoolSize)){\n            const waitQueueMember = this[kWaitQueue].shift();\n            if (!waitQueueMember || waitQueueMember[kCancelled]) {\n                continue;\n            }\n            this.createConnection((err, connection)=>{\n                if (waitQueueMember[kCancelled]) {\n                    if (!err && connection) {\n                        this[kConnections].push(connection);\n                    }\n                } else {\n                    if (err) {\n                        this.emitAndLog(ConnectionPool.CONNECTION_CHECK_OUT_FAILED, // TODO(NODE-5192): Remove this cast\n                        new connection_pool_events_1.ConnectionCheckOutFailedEvent(this, \"connectionError\", err));\n                        waitQueueMember.reject(err);\n                    } else if (connection) {\n                        this[kCheckedOut].add(connection);\n                        this.emitAndLog(ConnectionPool.CONNECTION_CHECKED_OUT, new connection_pool_events_1.ConnectionCheckedOutEvent(this, connection));\n                        waitQueueMember.resolve(connection);\n                    }\n                    waitQueueMember.timeoutController.clear();\n                }\n                process.nextTick(()=>this.processWaitQueue());\n            });\n        }\n        this[kProcessingWaitQueue] = false;\n    }\n}\n/**\n * Emitted when the connection pool is created.\n * @event\n */ ConnectionPool.CONNECTION_POOL_CREATED = constants_1.CONNECTION_POOL_CREATED;\n/**\n * Emitted once when the connection pool is closed\n * @event\n */ ConnectionPool.CONNECTION_POOL_CLOSED = constants_1.CONNECTION_POOL_CLOSED;\n/**\n * Emitted each time the connection pool is cleared and it's generation incremented\n * @event\n */ ConnectionPool.CONNECTION_POOL_CLEARED = constants_1.CONNECTION_POOL_CLEARED;\n/**\n * Emitted each time the connection pool is marked ready\n * @event\n */ ConnectionPool.CONNECTION_POOL_READY = constants_1.CONNECTION_POOL_READY;\n/**\n * Emitted when a connection is created.\n * @event\n */ ConnectionPool.CONNECTION_CREATED = constants_1.CONNECTION_CREATED;\n/**\n * Emitted when a connection becomes established, and is ready to use\n * @event\n */ ConnectionPool.CONNECTION_READY = constants_1.CONNECTION_READY;\n/**\n * Emitted when a connection is closed\n * @event\n */ ConnectionPool.CONNECTION_CLOSED = constants_1.CONNECTION_CLOSED;\n/**\n * Emitted when an attempt to check out a connection begins\n * @event\n */ ConnectionPool.CONNECTION_CHECK_OUT_STARTED = constants_1.CONNECTION_CHECK_OUT_STARTED;\n/**\n * Emitted when an attempt to check out a connection fails\n * @event\n */ ConnectionPool.CONNECTION_CHECK_OUT_FAILED = constants_1.CONNECTION_CHECK_OUT_FAILED;\n/**\n * Emitted each time a connection is successfully checked out of the connection pool\n * @event\n */ ConnectionPool.CONNECTION_CHECKED_OUT = constants_1.CONNECTION_CHECKED_OUT;\n/**\n * Emitted each time a connection is successfully checked into the connection pool\n * @event\n */ ConnectionPool.CONNECTION_CHECKED_IN = constants_1.CONNECTION_CHECKED_IN;\nexports.ConnectionPool = ConnectionPool; //# sourceMappingURL=connection_pool.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uX3Bvb2wuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHNCQUFzQixHQUFHQSxpQkFBaUIsR0FBRyxLQUFLO0FBQ2xELE1BQU1JLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1DLGNBQWNELG1CQUFPQSxDQUFDLG1FQUFjO0FBQzFDLE1BQU1FLFVBQVVGLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1HLGdCQUFnQkgsbUJBQU9BLENBQUMsdUVBQWdCO0FBQzlDLE1BQU1JLFVBQVVKLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1LLFlBQVlMLG1CQUFPQSxDQUFDLG1FQUFXO0FBQ3JDLE1BQU1NLGVBQWVOLG1CQUFPQSxDQUFDLHlFQUFjO0FBQzNDLE1BQU1PLDJCQUEyQlAsbUJBQU9BLENBQUMsaUdBQTBCO0FBQ25FLE1BQU1RLFdBQVdSLG1CQUFPQSxDQUFDLGlFQUFVO0FBQ25DLE1BQU1TLFlBQVlULG1CQUFPQSxDQUFDLG1FQUFXO0FBQ3JDLGNBQWMsR0FDZCxNQUFNVSxVQUFVQyxPQUFPO0FBQ3ZCLGNBQWMsR0FDZCxNQUFNQyxlQUFlRCxPQUFPO0FBQzVCLGNBQWMsR0FDZCxNQUFNRSxXQUFXRixPQUFPO0FBQ3hCLGNBQWMsR0FDZCxNQUFNRyxjQUFjSCxPQUFPO0FBQzNCLGNBQWMsR0FDZCxNQUFNSSxvQkFBb0JKLE9BQU87QUFDakMsY0FBYyxHQUNkLE1BQU1LLGNBQWNMLE9BQU87QUFDM0IsY0FBYyxHQUNkLE1BQU1NLHNCQUFzQk4sT0FBTztBQUNuQyxjQUFjLEdBQ2QsTUFBTU8scUJBQXFCUCxPQUFPO0FBQ2xDLGNBQWMsR0FDZCxNQUFNUSxxQkFBcUJSLE9BQU87QUFDbEMsY0FBYyxHQUNkLE1BQU1TLGFBQWFULE9BQU87QUFDMUIsY0FBYyxHQUNkLE1BQU1VLGFB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O2dCQUMzQztnQkFDQXhDLFFBQVFDLFFBQVEsQ0FBQyxJQUFNLElBQUksQ0FBQzRDLGdCQUFnQjtZQUNoRDtRQUNKO1FBQ0EsSUFBSSxDQUFDOUUscUJBQXFCLEdBQUc7SUFDakM7QUFDSjtBQUNBOzs7Q0FHQyxHQUNEMUIsZUFBZThELHVCQUF1QixHQUFHMUQsWUFBWTBELHVCQUF1QjtBQUM1RTs7O0NBR0MsR0FDRDlELGVBQWU2SSxzQkFBc0IsR0FBR3pJLFlBQVl5SSxzQkFBc0I7QUFDMUU7OztDQUdDLEdBQ0Q3SSxlQUFlNkgsdUJBQXVCLEdBQUd6SCxZQUFZeUgsdUJBQXVCO0FBQzVFOzs7Q0FHQyxHQUNEN0gsZUFBZW1GLHFCQUFxQixHQUFHL0UsWUFBWStFLHFCQUFxQjtBQUN4RTs7O0NBR0MsR0FDRG5GLGVBQWV3SyxrQkFBa0IsR0FBR3BLLFlBQVlvSyxrQkFBa0I7QUFDbEU7OztDQUdDLEdBQ0R4SyxlQUFld0wsZ0JBQWdCLEdBQUdwTCxZQUFZb0wsZ0JBQWdCO0FBQzlEOzs7Q0FHQyxHQUNEeEwsZUFBZTBJLGlCQUFpQixHQUFHdEksWUFBWXNJLGlCQUFpQjtBQUNoRTs7O0NBR0MsR0FDRDFJLGVBQWV3Riw0QkFBNEIsR0FBR3BGLFlBQVlvRiw0QkFBNEI7QUFDdEY7OztDQUdDLEdBQ0R4RixlQUFlb0csMkJBQTJCLEdBQUdoRyxZQUFZZ0csMkJBQTJCO0FBQ3BGOzs7Q0FHQyxHQUNEcEcsZUFBZW9NLHNCQUFzQixHQUFHaE0sWUFBWWdNLHNCQUFzQjtBQUMxRTs7O0NBR0MsR0FDRHBNLGVBQWVtSCxxQkFBcUIsR0FBRy9HLFlBQVkrRyxxQkFBcUI7QUFDeEVySCxzQkFBc0IsR0FBR0UsZ0JBQ3pCLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uX3Bvb2wuanM/ZmE5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29ubmVjdGlvblBvb2wgPSBleHBvcnRzLlBvb2xTdGF0ZSA9IHZvaWQgMDtcbmNvbnN0IHRpbWVyc18xID0gcmVxdWlyZShcInRpbWVyc1wiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4uL21vbmdvX3R5cGVzXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbm5lY3RfMSA9IHJlcXVpcmUoXCIuL2Nvbm5lY3RcIik7XG5jb25zdCBjb25uZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9jb25uZWN0aW9uXCIpO1xuY29uc3QgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xID0gcmVxdWlyZShcIi4vY29ubmVjdGlvbl9wb29sX2V2ZW50c1wiKTtcbmNvbnN0IGVycm9yc18xID0gcmVxdWlyZShcIi4vZXJyb3JzXCIpO1xuY29uc3QgbWV0cmljc18xID0gcmVxdWlyZShcIi4vbWV0cmljc1wiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXJ2ZXIgPSBTeW1ib2woJ3NlcnZlcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0Nvbm5lY3Rpb25zID0gU3ltYm9sKCdjb25uZWN0aW9ucycpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1BlbmRpbmcgPSBTeW1ib2woJ3BlbmRpbmcnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtDaGVja2VkT3V0ID0gU3ltYm9sKCdjaGVja2VkT3V0Jyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrTWluUG9vbFNpemVUaW1lciA9IFN5bWJvbCgnbWluUG9vbFNpemVUaW1lcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0dlbmVyYXRpb24gPSBTeW1ib2woJ2dlbmVyYXRpb24nKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXJ2aWNlR2VuZXJhdGlvbnMgPSBTeW1ib2woJ3NlcnZpY2VHZW5lcmF0aW9ucycpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0Nvbm5lY3Rpb25Db3VudGVyID0gU3ltYm9sKCdjb25uZWN0aW9uQ291bnRlcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0NhbmNlbGxhdGlvblRva2VuID0gU3ltYm9sKCdjYW5jZWxsYXRpb25Ub2tlbicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1dhaXRRdWV1ZSA9IFN5bWJvbCgnd2FpdFF1ZXVlJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrQ2FuY2VsbGVkID0gU3ltYm9sKCdjYW5jZWxsZWQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtNZXRyaWNzID0gU3ltYm9sKCdtZXRyaWNzJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrUHJvY2Vzc2luZ1dhaXRRdWV1ZSA9IFN5bWJvbCgncHJvY2Vzc2luZ1dhaXRRdWV1ZScpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1Bvb2xTdGF0ZSA9IFN5bWJvbCgncG9vbFN0YXRlJyk7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLlBvb2xTdGF0ZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIHBhdXNlZDogJ3BhdXNlZCcsXG4gICAgcmVhZHk6ICdyZWFkeScsXG4gICAgY2xvc2VkOiAnY2xvc2VkJ1xufSk7XG4vKipcbiAqIEEgcG9vbCBvZiBjb25uZWN0aW9ucyB3aGljaCBkeW5hbWljYWxseSByZXNpemVzLCBhbmQgZW1pdCBldmVudHMgcmVsYXRlZCB0byBwb29sIGFjdGl2aXR5XG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQ29ubmVjdGlvblBvb2wgZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgICAgICBjb25uZWN0aW9uVHlwZTogY29ubmVjdGlvbl8xLkNvbm5lY3Rpb24sXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgbWF4UG9vbFNpemU6IG9wdGlvbnMubWF4UG9vbFNpemUgPz8gMTAwLFxuICAgICAgICAgICAgbWluUG9vbFNpemU6IG9wdGlvbnMubWluUG9vbFNpemUgPz8gMCxcbiAgICAgICAgICAgIG1heENvbm5lY3Rpbmc6IG9wdGlvbnMubWF4Q29ubmVjdGluZyA/PyAyLFxuICAgICAgICAgICAgbWF4SWRsZVRpbWVNUzogb3B0aW9ucy5tYXhJZGxlVGltZU1TID8/IDAsXG4gICAgICAgICAgICB3YWl0UXVldWVUaW1lb3V0TVM6IG9wdGlvbnMud2FpdFF1ZXVlVGltZW91dE1TID8/IDAsXG4gICAgICAgICAgICBtaW5Qb29sU2l6ZUNoZWNrRnJlcXVlbmN5TVM6IG9wdGlvbnMubWluUG9vbFNpemVDaGVja0ZyZXF1ZW5jeU1TID8/IDEwMCxcbiAgICAgICAgICAgIGF1dG9FbmNyeXB0ZXI6IG9wdGlvbnMuYXV0b0VuY3J5cHRlclxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5taW5Qb29sU2l6ZSA+IHRoaXMub3B0aW9ucy5tYXhQb29sU2l6ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQ29ubmVjdGlvbiBwb29sIG1pbmltdW0gc2l6ZSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gbWF4aW11bSBwb29sIHNpemUnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tQb29sU3RhdGVdID0gZXhwb3J0cy5Qb29sU3RhdGUucGF1c2VkO1xuICAgICAgICB0aGlzW2tTZXJ2ZXJdID0gc2VydmVyO1xuICAgICAgICB0aGlzW2tDb25uZWN0aW9uc10gPSBuZXcgdXRpbHNfMS5MaXN0KCk7XG4gICAgICAgIHRoaXNba1BlbmRpbmddID0gMDtcbiAgICAgICAgdGhpc1trQ2hlY2tlZE91dF0gPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXNba01pblBvb2xTaXplVGltZXJdID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzW2tHZW5lcmF0aW9uXSA9IDA7XG4gICAgICAgIHRoaXNba1NlcnZpY2VHZW5lcmF0aW9uc10gPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXNba0Nvbm5lY3Rpb25Db3VudGVyXSA9ICgwLCB1dGlsc18xLm1ha2VDb3VudGVyKSgxKTtcbiAgICAgICAgdGhpc1trQ2FuY2VsbGF0aW9uVG9rZW5dID0gbmV3IG1vbmdvX3R5cGVzXzEuQ2FuY2VsbGF0aW9uVG9rZW4oKTtcbiAgICAgICAgdGhpc1trQ2FuY2VsbGF0aW9uVG9rZW5dLnNldE1heExpc3RlbmVycyhJbmZpbml0eSk7XG4gICAgICAgIHRoaXNba1dhaXRRdWV1ZV0gPSBuZXcgdXRpbHNfMS5MaXN0KCk7XG4gICAgICAgIHRoaXNba01ldHJpY3NdID0gbmV3IG1ldHJpY3NfMS5Db25uZWN0aW9uUG9vbE1ldHJpY3MoKTtcbiAgICAgICAgdGhpc1trUHJvY2Vzc2luZ1dhaXRRdWV1ZV0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tb25nb0xvZ2dlciA9IHRoaXNba1NlcnZlcl0udG9wb2xvZ3kuY2xpZW50Py5tb25nb0xvZ2dlcjtcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSAnY29ubmVjdGlvbic7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0QW5kTG9nKENvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fUE9PTF9DUkVBVEVELCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25Qb29sQ3JlYXRlZEV2ZW50KHRoaXMpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKiBUaGUgYWRkcmVzcyBvZiB0aGUgZW5kcG9pbnQgdGhlIHBvb2wgaXMgY29ubmVjdGVkIHRvICovXG4gICAgZ2V0IGFkZHJlc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaG9zdEFkZHJlc3MudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIHBvb2wgaGFzIGJlZW4gY2xvc2VkXG4gICAgICpcbiAgICAgKiBUT0RPKE5PREUtMzI2Myk6IFdlIGNhbiByZW1vdmUgdGhpcyBwcm9wZXJ0eSBvbmNlIHNoZWxsIG5vIGxvbmdlciBuZWVkcyBpdFxuICAgICAqL1xuICAgIGdldCBjbG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tQb29sU3RhdGVdID09PSBleHBvcnRzLlBvb2xTdGF0ZS5jbG9zZWQ7XG4gICAgfVxuICAgIC8qKiBBbiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgU0RBTSBnZW5lcmF0aW9uIG9mIHRoZSBwb29sICovXG4gICAgZ2V0IGdlbmVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tHZW5lcmF0aW9uXTtcbiAgICB9XG4gICAgLyoqIEFuIGludGVnZXIgZXhwcmVzc2luZyBob3cgbWFueSB0b3RhbCBjb25uZWN0aW9ucyAoYXZhaWxhYmxlICsgcGVuZGluZyArIGluIHVzZSkgdGhlIHBvb2wgY3VycmVudGx5IGhhcyAqL1xuICAgIGdldCB0b3RhbENvbm5lY3Rpb25Db3VudCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmF2YWlsYWJsZUNvbm5lY3Rpb25Db3VudCArIHRoaXMucGVuZGluZ0Nvbm5lY3Rpb25Db3VudCArIHRoaXMuY3VycmVudENoZWNrZWRPdXRDb3VudCk7XG4gICAgfVxuICAgIC8qKiBBbiBpbnRlZ2VyIGV4cHJlc3NpbmcgaG93IG1hbnkgY29ubmVjdGlvbnMgYXJlIGN1cnJlbnRseSBhdmFpbGFibGUgaW4gdGhlIHBvb2wuICovXG4gICAgZ2V0IGF2YWlsYWJsZUNvbm5lY3Rpb25Db3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0Nvbm5lY3Rpb25zXS5sZW5ndGg7XG4gICAgfVxuICAgIGdldCBwZW5kaW5nQ29ubmVjdGlvbkNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpc1trUGVuZGluZ107XG4gICAgfVxuICAgIGdldCBjdXJyZW50Q2hlY2tlZE91dENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpc1trQ2hlY2tlZE91dF0uc2l6ZTtcbiAgICB9XG4gICAgZ2V0IHdhaXRRdWV1ZVNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tXYWl0UXVldWVdLmxlbmd0aDtcbiAgICB9XG4gICAgZ2V0IGxvYWRCYWxhbmNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5sb2FkQmFsYW5jZWQ7XG4gICAgfVxuICAgIGdldCBzZXJ2aWNlR2VuZXJhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXJ2aWNlR2VuZXJhdGlvbnNdO1xuICAgIH1cbiAgICBnZXQgc2VydmVyRXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXJ2ZXJdLmRlc2NyaXB0aW9uLmVycm9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGV4cG9zZWQgT05MWSBmb3IgdXNlIGluIG1vbmdvc2gsIHRvIGVuYWJsZVxuICAgICAqIGtpbGxpbmcgYWxsIGNvbm5lY3Rpb25zIGlmIGEgdXNlciBxdWl0cyB0aGUgc2hlbGwgd2l0aFxuICAgICAqIG9wZXJhdGlvbnMgaW4gcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBUaGlzIHByb3BlcnR5IG1heSBiZSByZW1vdmVkIGFzIGEgcGFydCBvZiBOT0RFLTMyNjMuXG4gICAgICovXG4gICAgZ2V0IGNoZWNrZWRPdXRDb25uZWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0NoZWNrZWRPdXRdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1ldHJpY3MgaW5mb3JtYXRpb24gZm9yIHRoZSBwb29sIHdoZW4gYSB3YWl0IHF1ZXVlIHRpbWVvdXQgb2NjdXJzLlxuICAgICAqL1xuICAgIHdhaXRRdWV1ZUVycm9yTWV0cmljcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba01ldHJpY3NdLmluZm8odGhpcy5vcHRpb25zLm1heFBvb2xTaXplKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBwb29sIHN0YXRlIHRvIFwicmVhZHlcIlxuICAgICAqL1xuICAgIHJlYWR5KCkge1xuICAgICAgICBpZiAodGhpc1trUG9vbFN0YXRlXSAhPT0gZXhwb3J0cy5Qb29sU3RhdGUucGF1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trUG9vbFN0YXRlXSA9IGV4cG9ydHMuUG9vbFN0YXRlLnJlYWR5O1xuICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9QT09MX1JFQURZLCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25Qb29sUmVhZHlFdmVudCh0aGlzKSk7XG4gICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXNba01pblBvb2xTaXplVGltZXJdKTtcbiAgICAgICAgdGhpcy5lbnN1cmVNaW5Qb29sU2l6ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBhIGNvbm5lY3Rpb24gb3V0IG9mIHRoaXMgcG9vbC4gVGhlIGNvbm5lY3Rpb24gd2lsbCBjb250aW51ZSB0byBiZSB0cmFja2VkLCBidXQgbm8gcmVmZXJlbmNlIHRvIGl0XG4gICAgICogd2lsbCBiZSBoZWxkIGJ5IHRoZSBwb29sLiBUaGlzIG1lYW5zIHRoYXQgaWYgYSBjb25uZWN0aW9uIGlzIGNoZWNrZWQgb3V0IGl0IE1VU1QgYmUgY2hlY2tlZCBiYWNrIGluIG9yXG4gICAgICogZXhwbGljaXRseSBkZXN0cm95ZWQgYnkgdGhlIG5ldyBvd25lci5cbiAgICAgKi9cbiAgICBhc3luYyBjaGVja091dCgpIHtcbiAgICAgICAgdGhpcy5lbWl0QW5kTG9nKENvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX1NUQVJURUQsIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNoZWNrT3V0U3RhcnRlZEV2ZW50KHRoaXMpKTtcbiAgICAgICAgY29uc3Qgd2FpdFF1ZXVlVGltZW91dE1TID0gdGhpcy5vcHRpb25zLndhaXRRdWV1ZVRpbWVvdXRNUztcbiAgICAgICAgY29uc3QgeyBwcm9taXNlLCByZXNvbHZlLCByZWplY3QgfSA9ICgwLCB1dGlsc18xLnByb21pc2VXaXRoUmVzb2x2ZXJzKSgpO1xuICAgICAgICBjb25zdCB3YWl0UXVldWVNZW1iZXIgPSB7XG4gICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgcmVqZWN0LFxuICAgICAgICAgICAgdGltZW91dENvbnRyb2xsZXI6IG5ldyB1dGlsc18xLlRpbWVvdXRDb250cm9sbGVyKHdhaXRRdWV1ZVRpbWVvdXRNUylcbiAgICAgICAgfTtcbiAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLnRpbWVvdXRDb250cm9sbGVyLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHtcbiAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlcltrQ2FuY2VsbGVkXSA9IHRydWU7XG4gICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIudGltZW91dENvbnRyb2xsZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQsIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkRXZlbnQodGhpcywgJ3RpbWVvdXQnKSk7XG4gICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIucmVqZWN0KG5ldyBlcnJvcnNfMS5XYWl0UXVldWVUaW1lb3V0RXJyb3IodGhpcy5sb2FkQmFsYW5jZWRcbiAgICAgICAgICAgICAgICA/IHRoaXMud2FpdFF1ZXVlRXJyb3JNZXRyaWNzKClcbiAgICAgICAgICAgICAgICA6ICdUaW1lZCBvdXQgd2hpbGUgY2hlY2tpbmcgb3V0IGEgY29ubmVjdGlvbiBmcm9tIGNvbm5lY3Rpb24gcG9vbCcsIHRoaXMuYWRkcmVzcykpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpc1trV2FpdFF1ZXVlXS5wdXNoKHdhaXRRdWV1ZU1lbWJlcik7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4gdGhpcy5wcm9jZXNzV2FpdFF1ZXVlKCkpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgYSBjb25uZWN0aW9uIGludG8gdGhlIHBvb2wuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29ubmVjdGlvbiAtIFRoZSBjb25uZWN0aW9uIHRvIGNoZWNrIGluXG4gICAgICovXG4gICAgY2hlY2tJbihjb25uZWN0aW9uKSB7XG4gICAgICAgIGlmICghdGhpc1trQ2hlY2tlZE91dF0uaGFzKGNvbm5lY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9vbENsb3NlZCA9IHRoaXMuY2xvc2VkO1xuICAgICAgICBjb25zdCBzdGFsZSA9IHRoaXMuY29ubmVjdGlvbklzU3RhbGUoY29ubmVjdGlvbik7XG4gICAgICAgIGNvbnN0IHdpbGxEZXN0cm95ID0gISEocG9vbENsb3NlZCB8fCBzdGFsZSB8fCBjb25uZWN0aW9uLmNsb3NlZCk7XG4gICAgICAgIGlmICghd2lsbERlc3Ryb3kpIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24ubWFya0F2YWlsYWJsZSgpO1xuICAgICAgICAgICAgdGhpc1trQ29ubmVjdGlvbnNdLnVuc2hpZnQoY29ubmVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trQ2hlY2tlZE91dF0uZGVsZXRlKGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DSEVDS0VEX0lOLCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DaGVja2VkSW5FdmVudCh0aGlzLCBjb25uZWN0aW9uKSk7XG4gICAgICAgIGlmICh3aWxsRGVzdHJveSkge1xuICAgICAgICAgICAgY29uc3QgcmVhc29uID0gY29ubmVjdGlvbi5jbG9zZWQgPyAnZXJyb3InIDogcG9vbENsb3NlZCA/ICdwb29sQ2xvc2VkJyA6ICdzdGFsZSc7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lDb25uZWN0aW9uKGNvbm5lY3Rpb24sIHJlYXNvbik7XG4gICAgICAgIH1cbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiB0aGlzLnByb2Nlc3NXYWl0UXVldWUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFyIHRoZSBwb29sXG4gICAgICpcbiAgICAgKiBQb29sIHJlc2V0IGlzIGhhbmRsZWQgYnkgaW5jcmVtZW50aW5nIHRoZSBwb29sJ3MgZ2VuZXJhdGlvbiBjb3VudC4gQW55IGV4aXN0aW5nIGNvbm5lY3Rpb24gb2YgYVxuICAgICAqIHByZXZpb3VzIGdlbmVyYXRpb24gd2lsbCBldmVudHVhbGx5IGJlIHBydW5lZCBkdXJpbmcgc3Vic2VxdWVudCBjaGVja291dHMuXG4gICAgICovXG4gICAgY2xlYXIob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGhhbmRsZSBsb2FkIGJhbGFuY2VkIGNhc2VcbiAgICAgICAgaWYgKHRoaXMubG9hZEJhbGFuY2VkKSB7XG4gICAgICAgICAgICBjb25zdCB7IHNlcnZpY2VJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIGlmICghc2VydmljZUlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0Nvbm5lY3Rpb25Qb29sLmNsZWFyKCkgY2FsbGVkIGluIGxvYWQgYmFsYW5jZWQgbW9kZSB3aXRoIG5vIHNlcnZpY2VJZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNpZCA9IHNlcnZpY2VJZC50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbiA9IHRoaXMuc2VydmljZUdlbmVyYXRpb25zLmdldChzaWQpO1xuICAgICAgICAgICAgLy8gT25seSBuZWVkIHRvIHdvcnJ5IGlmIHRoZSBnZW5lcmF0aW9uIGV4aXN0cywgc2luY2UgaXQgc2hvdWxkXG4gICAgICAgICAgICAvLyBhbHdheXMgYmUgdGhlcmUgYnV0IHR5cGVzY3JpcHQgbmVlZHMgdGhlIGNoZWNrLlxuICAgICAgICAgICAgaWYgKGdlbmVyYXRpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdTZXJ2aWNlIGdlbmVyYXRpb25zIGFyZSByZXF1aXJlZCBpbiBsb2FkIGJhbGFuY2VyIG1vZGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJbmNyZW1lbnQgdGhlIGdlbmVyYXRpb24gZm9yIHRoZSBzZXJ2aWNlIGlkLlxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZUdlbmVyYXRpb25zLnNldChzaWQsIGdlbmVyYXRpb24gKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1BPT0xfQ0xFQVJFRCwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCh0aGlzLCB7IHNlcnZpY2VJZCB9KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaGFuZGxlIG5vbiBsb2FkLWJhbGFuY2VkIGNhc2VcbiAgICAgICAgY29uc3QgaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyA9IG9wdGlvbnMuaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyA/PyBmYWxzZTtcbiAgICAgICAgY29uc3Qgb2xkR2VuZXJhdGlvbiA9IHRoaXNba0dlbmVyYXRpb25dO1xuICAgICAgICB0aGlzW2tHZW5lcmF0aW9uXSArPSAxO1xuICAgICAgICBjb25zdCBhbHJlYWR5UGF1c2VkID0gdGhpc1trUG9vbFN0YXRlXSA9PT0gZXhwb3J0cy5Qb29sU3RhdGUucGF1c2VkO1xuICAgICAgICB0aGlzW2tQb29sU3RhdGVdID0gZXhwb3J0cy5Qb29sU3RhdGUucGF1c2VkO1xuICAgICAgICB0aGlzLmNsZWFyTWluUG9vbFNpemVUaW1lcigpO1xuICAgICAgICBpZiAoIWFscmVhZHlQYXVzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1BPT0xfQ0xFQVJFRCwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCh0aGlzLCB7XG4gICAgICAgICAgICAgICAgaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9uc1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlcnJ1cHRJblVzZUNvbm5lY3Rpb25zKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHRoaXMuaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyhvbGRHZW5lcmF0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9jZXNzV2FpdFF1ZXVlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyBhbGwgc3RhbGUgaW4tdXNlIGNvbm5lY3Rpb25zIGluIHRoZSBwb29sIHdpdGggYSByZXN1bWFibGUgUG9vbENsZWFyZWRPbk5ldHdvcmtFcnJvci5cbiAgICAgKlxuICAgICAqIE9ubHkgY29ubmVjdGlvbnMgd2hlcmUgYGNvbm5lY3Rpb24uZ2VuZXJhdGlvbiA8PSBtaW5HZW5lcmF0aW9uYCBhcmUga2lsbGVkLlxuICAgICAqL1xuICAgIGludGVycnVwdEluVXNlQ29ubmVjdGlvbnMobWluR2VuZXJhdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IGNvbm5lY3Rpb24gb2YgdGhpc1trQ2hlY2tlZE91dF0pIHtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLmdlbmVyYXRpb24gPD0gbWluR2VuZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ub25FcnJvcihuZXcgZXJyb3JzXzEuUG9vbENsZWFyZWRPbk5ldHdvcmtFcnJvcih0aGlzKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0luKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBDbG9zZSB0aGUgcG9vbCAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbW1lZGlhdGVseSBjYW5jZWwgYW55IGluLWZsaWdodCBjb25uZWN0aW9uc1xuICAgICAgICB0aGlzW2tDYW5jZWxsYXRpb25Ub2tlbl0uZW1pdCgnY2FuY2VsJyk7XG4gICAgICAgIC8vIGVuZCB0aGUgY29ubmVjdGlvbiBjb3VudGVyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpc1trQ29ubmVjdGlvbkNvdW50ZXJdLnJldHVybiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpc1trQ29ubmVjdGlvbkNvdW50ZXJdLnJldHVybih1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba1Bvb2xTdGF0ZV0gPSBleHBvcnRzLlBvb2xTdGF0ZS5jbG9zZWQ7XG4gICAgICAgIHRoaXMuY2xlYXJNaW5Qb29sU2l6ZVRpbWVyKCk7XG4gICAgICAgIHRoaXMucHJvY2Vzc1dhaXRRdWV1ZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbm4gb2YgdGhpc1trQ29ubmVjdGlvbnNdKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DTE9TRUQsIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNsb3NlZEV2ZW50KHRoaXMsIGNvbm4sICdwb29sQ2xvc2VkJykpO1xuICAgICAgICAgICAgY29ubi5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trQ29ubmVjdGlvbnNdLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1BPT0xfQ0xPU0VELCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25Qb29sQ2xvc2VkRXZlbnQodGhpcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBSZWF1dGhlbnRpY2F0ZSBhIGNvbm5lY3Rpb25cbiAgICAgKi9cbiAgICBhc3luYyByZWF1dGhlbnRpY2F0ZShjb25uZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGF1dGhDb250ZXh0ID0gY29ubmVjdGlvbi5hdXRoQ29udGV4dDtcbiAgICAgICAgaWYgKCFhdXRoQ29udGV4dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ05vIGF1dGggY29udGV4dCBmb3VuZCBvbiBjb25uZWN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXV0aENvbnRleHQuY3JlZGVudGlhbHM7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IoJ0Nvbm5lY3Rpb24gaXMgbWlzc2luZyBjcmVkZW50aWFscyB3aGVuIGFza2VkIHRvIHJlYXV0aGVudGljYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzb2x2ZWRDcmVkZW50aWFscyA9IGNyZWRlbnRpYWxzLnJlc29sdmVBdXRoTWVjaGFuaXNtKGNvbm5lY3Rpb24uaGVsbG8pO1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXNba1NlcnZlcl0udG9wb2xvZ3kuY2xpZW50LnMuYXV0aFByb3ZpZGVycy5nZXRPckNyZWF0ZVByb3ZpZGVyKHJlc29sdmVkQ3JlZGVudGlhbHMubWVjaGFuaXNtKTtcbiAgICAgICAgaWYgKCFwcm92aWRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcihgUmVhdXRoZW50aWNhdGUgZmFpbGVkIGR1ZSB0byBubyBhdXRoIHByb3ZpZGVyIGZvciAke2NyZWRlbnRpYWxzLm1lY2hhbmlzbX1gKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBwcm92aWRlci5yZWF1dGgoYXV0aENvbnRleHQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKiBDbGVhciB0aGUgbWluIHBvb2wgc2l6ZSB0aW1lciAqL1xuICAgIGNsZWFyTWluUG9vbFNpemVUaW1lcigpIHtcbiAgICAgICAgY29uc3QgbWluUG9vbFNpemVUaW1lciA9IHRoaXNba01pblBvb2xTaXplVGltZXJdO1xuICAgICAgICBpZiAobWluUG9vbFNpemVUaW1lcikge1xuICAgICAgICAgICAgKDAsIHRpbWVyc18xLmNsZWFyVGltZW91dCkobWluUG9vbFNpemVUaW1lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveUNvbm5lY3Rpb24oY29ubmVjdGlvbiwgcmVhc29uKSB7XG4gICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NMT1NFRCwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ2xvc2VkRXZlbnQodGhpcywgY29ubmVjdGlvbiwgcmVhc29uKSk7XG4gICAgICAgIC8vIGRlc3Ryb3kgdGhlIGNvbm5lY3Rpb25cbiAgICAgICAgY29ubmVjdGlvbi5kZXN0cm95KCk7XG4gICAgfVxuICAgIGNvbm5lY3Rpb25Jc1N0YWxlKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29uc3Qgc2VydmljZUlkID0gY29ubmVjdGlvbi5zZXJ2aWNlSWQ7XG4gICAgICAgIGlmICh0aGlzLmxvYWRCYWxhbmNlZCAmJiBzZXJ2aWNlSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpZCA9IHNlcnZpY2VJZC50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbiA9IHRoaXMuc2VydmljZUdlbmVyYXRpb25zLmdldChzaWQpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uZ2VuZXJhdGlvbiAhPT0gZ2VuZXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5nZW5lcmF0aW9uICE9PSB0aGlzW2tHZW5lcmF0aW9uXTtcbiAgICB9XG4gICAgY29ubmVjdGlvbklzSWRsZShjb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLm9wdGlvbnMubWF4SWRsZVRpbWVNUyAmJiBjb25uZWN0aW9uLmlkbGVUaW1lID4gdGhpcy5vcHRpb25zLm1heElkbGVUaW1lTVMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyBhIGNvbm5lY3Rpb24gaWYgdGhlIGNvbm5lY3Rpb24gaXMgcGVyaXNoZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGNvbm5lY3Rpb24gd2FzIGRlc3Ryb3llZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZGVzdHJveUNvbm5lY3Rpb25JZlBlcmlzaGVkKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29uc3QgaXNTdGFsZSA9IHRoaXMuY29ubmVjdGlvbklzU3RhbGUoY29ubmVjdGlvbik7XG4gICAgICAgIGNvbnN0IGlzSWRsZSA9IHRoaXMuY29ubmVjdGlvbklzSWRsZShjb25uZWN0aW9uKTtcbiAgICAgICAgaWYgKCFpc1N0YWxlICYmICFpc0lkbGUgJiYgIWNvbm5lY3Rpb24uY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVhc29uID0gY29ubmVjdGlvbi5jbG9zZWQgPyAnZXJyb3InIDogaXNTdGFsZSA/ICdzdGFsZScgOiAnaWRsZSc7XG4gICAgICAgIHRoaXMuZGVzdHJveUNvbm5lY3Rpb24oY29ubmVjdGlvbiwgcmVhc29uKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNyZWF0ZUNvbm5lY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY29ubmVjdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICBpZDogdGhpc1trQ29ubmVjdGlvbkNvdW50ZXJdLm5leHQoKS52YWx1ZSxcbiAgICAgICAgICAgIGdlbmVyYXRpb246IHRoaXNba0dlbmVyYXRpb25dLFxuICAgICAgICAgICAgY2FuY2VsbGF0aW9uVG9rZW46IHRoaXNba0NhbmNlbGxhdGlvblRva2VuXSxcbiAgICAgICAgICAgIG1vbmdvTG9nZ2VyOiB0aGlzLm1vbmdvTG9nZ2VyLFxuICAgICAgICAgICAgYXV0aFByb3ZpZGVyczogdGhpc1trU2VydmVyXS50b3BvbG9neS5jbGllbnQucy5hdXRoUHJvdmlkZXJzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXNba1BlbmRpbmddKys7XG4gICAgICAgIC8vIFRoaXMgaXMgb3VyIHZlcnNpb24gb2YgYSBcInZpcnR1YWxcIiBuby1JL08gY29ubmVjdGlvbiBhcyB0aGUgc3BlYyByZXF1aXJlc1xuICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DUkVBVEVELCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DcmVhdGVkRXZlbnQodGhpcywgeyBpZDogY29ubmVjdE9wdGlvbnMuaWQgfSkpO1xuICAgICAgICAoMCwgY29ubmVjdF8xLmNvbm5lY3QpKGNvbm5lY3RPcHRpb25zKS50aGVuKGNvbm5lY3Rpb24gPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHBvb2wgbWlnaHQgaGF2ZSBjbG9zZWQgc2luY2Ugd2Ugc3RhcnRlZCB0cnlpbmcgdG8gY3JlYXRlIGEgY29ubmVjdGlvblxuICAgICAgICAgICAgaWYgKHRoaXNba1Bvb2xTdGF0ZV0gIT09IGV4cG9ydHMuUG9vbFN0YXRlLnJlYWR5KSB7XG4gICAgICAgICAgICAgICAgdGhpc1trUGVuZGluZ10tLTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLmNsb3NlZCA/IG5ldyBlcnJvcnNfMS5Qb29sQ2xvc2VkRXJyb3IodGhpcykgOiBuZXcgZXJyb3JzXzEuUG9vbENsZWFyZWRFcnJvcih0aGlzKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZm9yd2FyZCBhbGwgZXZlbnRzIGZyb20gdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHBvb2xcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgWy4uLmNvbnN0YW50c18xLkFQTV9FVkVOVFMsIGNvbm5lY3Rpb25fMS5Db25uZWN0aW9uLkNMVVNURVJfVElNRV9SRUNFSVZFRF0pIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm9uKGV2ZW50LCAoZSkgPT4gdGhpcy5lbWl0KGV2ZW50LCBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm9uKGNvbm5lY3Rpb25fMS5Db25uZWN0aW9uLlBJTk5FRCwgcGluVHlwZSA9PiB0aGlzW2tNZXRyaWNzXS5tYXJrUGlubmVkKHBpblR5cGUpKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm9uKGNvbm5lY3Rpb25fMS5Db25uZWN0aW9uLlVOUElOTkVELCBwaW5UeXBlID0+IHRoaXNba01ldHJpY3NdLm1hcmtVbnBpbm5lZChwaW5UeXBlKSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZUlkID0gY29ubmVjdGlvbi5zZXJ2aWNlSWQ7XG4gICAgICAgICAgICAgICAgaWYgKHNlcnZpY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lkID0gc2VydmljZUlkLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZ2VuZXJhdGlvbiA9IHRoaXMuc2VydmljZUdlbmVyYXRpb25zLmdldChzaWQpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5nZW5lcmF0aW9uID0gZ2VuZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZUdlbmVyYXRpb25zLnNldChzaWQsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5nZW5lcmF0aW9uID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbm5lY3Rpb24ubWFya0F2YWlsYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5lbWl0QW5kTG9nKENvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fUkVBRFksIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvblJlYWR5RXZlbnQodGhpcywgY29ubmVjdGlvbikpO1xuICAgICAgICAgICAgdGhpc1trUGVuZGluZ10tLTtcbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgY29ubmVjdGlvbik7XG4gICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgIHRoaXNba1BlbmRpbmddLS07XG4gICAgICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DTE9TRUQsIG5ldyBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNsb3NlZEV2ZW50KHRoaXMsIHsgaWQ6IGNvbm5lY3RPcHRpb25zLmlkLCBzZXJ2aWNlSWQ6IHVuZGVmaW5lZCB9LCAnZXJyb3InLCBcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS01MTkyKTogUmVtb3ZlIHRoaXMgY2FzdFxuICAgICAgICAgICAgZXJyb3IpKTtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29OZXR3b3JrRXJyb3IgfHwgZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBlcnJvci5jb25uZWN0aW9uR2VuZXJhdGlvbiA9IGNvbm5lY3RPcHRpb25zLmdlbmVyYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayhlcnJvciA/PyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignQ29ubmVjdGlvbiBjcmVhdGlvbiBmYWlsZWQgd2l0aG91dCBlcnJvcicpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVuc3VyZU1pblBvb2xTaXplKCkge1xuICAgICAgICBjb25zdCBtaW5Qb29sU2l6ZSA9IHRoaXMub3B0aW9ucy5taW5Qb29sU2l6ZTtcbiAgICAgICAgaWYgKHRoaXNba1Bvb2xTdGF0ZV0gIT09IGV4cG9ydHMuUG9vbFN0YXRlLnJlYWR5IHx8IG1pblBvb2xTaXplID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trQ29ubmVjdGlvbnNdLnBydW5lKGNvbm5lY3Rpb24gPT4gdGhpcy5kZXN0cm95Q29ubmVjdGlvbklmUGVyaXNoZWQoY29ubmVjdGlvbikpO1xuICAgICAgICBpZiAodGhpcy50b3RhbENvbm5lY3Rpb25Db3VudCA8IG1pblBvb2xTaXplICYmXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdDb25uZWN0aW9uQ291bnQgPCB0aGlzLm9wdGlvbnMubWF4Q29ubmVjdGluZykge1xuICAgICAgICAgICAgLy8gTk9URTogZW5zdXJlTWluUG9vbFNpemUgc2hvdWxkIG5vdCB0cnkgdG8gZ2V0IGFsbCB0aGUgcGVuZGluZ1xuICAgICAgICAgICAgLy8gY29ubmVjdGlvbiBwZXJtaXRzIGJlY2F1c2UgdGhhdCBwb3RlbnRpYWxseSBkZWxheXMgdGhlIGF2YWlsYWJpbGl0eSBvZlxuICAgICAgICAgICAgLy8gdGhlIGNvbm5lY3Rpb24gdG8gYSBjaGVja291dCByZXF1ZXN0XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNvbm5lY3Rpb24oKGVyciwgY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trU2VydmVyXS5oYW5kbGVFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWVyciAmJiBjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNba0Nvbm5lY3Rpb25zXS5wdXNoKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHRoaXMucHJvY2Vzc1dhaXRRdWV1ZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNba1Bvb2xTdGF0ZV0gPT09IGV4cG9ydHMuUG9vbFN0YXRlLnJlYWR5KSB7XG4gICAgICAgICAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXNba01pblBvb2xTaXplVGltZXJdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trTWluUG9vbFNpemVUaW1lcl0gPSAoMCwgdGltZXJzXzEuc2V0VGltZW91dCkoKCkgPT4gdGhpcy5lbnN1cmVNaW5Qb29sU2l6ZSgpLCB0aGlzLm9wdGlvbnMubWluUG9vbFNpemVDaGVja0ZyZXF1ZW5jeU1TKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXNba01pblBvb2xTaXplVGltZXJdKTtcbiAgICAgICAgICAgIHRoaXNba01pblBvb2xTaXplVGltZXJdID0gKDAsIHRpbWVyc18xLnNldFRpbWVvdXQpKCgpID0+IHRoaXMuZW5zdXJlTWluUG9vbFNpemUoKSwgdGhpcy5vcHRpb25zLm1pblBvb2xTaXplQ2hlY2tGcmVxdWVuY3lNUyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc1dhaXRRdWV1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXNba1Byb2Nlc3NpbmdXYWl0UXVldWVdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trUHJvY2Vzc2luZ1dhaXRRdWV1ZV0gPSB0cnVlO1xuICAgICAgICB3aGlsZSAodGhpcy53YWl0UXVldWVTaXplKSB7XG4gICAgICAgICAgICBjb25zdCB3YWl0UXVldWVNZW1iZXIgPSB0aGlzW2tXYWl0UXVldWVdLmZpcnN0KCk7XG4gICAgICAgICAgICBpZiAoIXdhaXRRdWV1ZU1lbWJlcikge1xuICAgICAgICAgICAgICAgIHRoaXNba1dhaXRRdWV1ZV0uc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3YWl0UXVldWVNZW1iZXJba0NhbmNlbGxlZF0pIHtcbiAgICAgICAgICAgICAgICB0aGlzW2tXYWl0UXVldWVdLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpc1trUG9vbFN0YXRlXSAhPT0gZXhwb3J0cy5Qb29sU3RhdGUucmVhZHkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFzb24gPSB0aGlzLmNsb3NlZCA/ICdwb29sQ2xvc2VkJyA6ICdjb25uZWN0aW9uRXJyb3InO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5jbG9zZWQgPyBuZXcgZXJyb3JzXzEuUG9vbENsb3NlZEVycm9yKHRoaXMpIDogbmV3IGVycm9yc18xLlBvb2xDbGVhcmVkRXJyb3IodGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0QW5kTG9nKENvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX0ZBSUxFRCwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ2hlY2tPdXRGYWlsZWRFdmVudCh0aGlzLCByZWFzb24sIGVycm9yKSk7XG4gICAgICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLnRpbWVvdXRDb250cm9sbGVyLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgdGhpc1trV2FpdFF1ZXVlXS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlci5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmF2YWlsYWJsZUNvbm5lY3Rpb25Db3VudCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXNba0Nvbm5lY3Rpb25zXS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGVzdHJveUNvbm5lY3Rpb25JZlBlcmlzaGVkKGNvbm5lY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trQ2hlY2tlZE91dF0uYWRkKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NIRUNLRURfT1VULCBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQodGhpcywgY29ubmVjdGlvbikpO1xuICAgICAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlci50aW1lb3V0Q29udHJvbGxlci5jbGVhcigpO1xuICAgICAgICAgICAgICAgIHRoaXNba1dhaXRRdWV1ZV0uc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIucmVzb2x2ZShjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG1heFBvb2xTaXplLCBtYXhDb25uZWN0aW5nIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIHdoaWxlICh0aGlzLndhaXRRdWV1ZVNpemUgPiAwICYmXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdDb25uZWN0aW9uQ291bnQgPCBtYXhDb25uZWN0aW5nICYmXG4gICAgICAgICAgICAobWF4UG9vbFNpemUgPT09IDAgfHwgdGhpcy50b3RhbENvbm5lY3Rpb25Db3VudCA8IG1heFBvb2xTaXplKSkge1xuICAgICAgICAgICAgY29uc3Qgd2FpdFF1ZXVlTWVtYmVyID0gdGhpc1trV2FpdFF1ZXVlXS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCF3YWl0UXVldWVNZW1iZXIgfHwgd2FpdFF1ZXVlTWVtYmVyW2tDYW5jZWxsZWRdKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNvbm5lY3Rpb24oKGVyciwgY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh3YWl0UXVldWVNZW1iZXJba0NhbmNlbGxlZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnIgJiYgY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trQ29ubmVjdGlvbnNdLnB1c2goY29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhDb25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTUxOTIpOiBSZW1vdmUgdGhpcyBjYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25DaGVja091dEZhaWxlZEV2ZW50KHRoaXMsICdjb25uZWN0aW9uRXJyb3InLCBlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlci5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2tDaGVja2VkT3V0XS5hZGQoY29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRBbmRMb2coQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DSEVDS0VEX09VVCwgbmV3IGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ2hlY2tlZE91dEV2ZW50KHRoaXMsIGNvbm5lY3Rpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlci5yZXNvbHZlKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlci50aW1lb3V0Q29udHJvbGxlci5jbGVhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHRoaXMucHJvY2Vzc1dhaXRRdWV1ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba1Byb2Nlc3NpbmdXYWl0UXVldWVdID0gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBFbWl0dGVkIHdoZW4gdGhlIGNvbm5lY3Rpb24gcG9vbCBpcyBjcmVhdGVkLlxuICogQGV2ZW50XG4gKi9cbkNvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fUE9PTF9DUkVBVEVEID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9QT09MX0NSRUFURUQ7XG4vKipcbiAqIEVtaXR0ZWQgb25jZSB3aGVuIHRoZSBjb25uZWN0aW9uIHBvb2wgaXMgY2xvc2VkXG4gKiBAZXZlbnRcbiAqL1xuQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9QT09MX0NMT1NFRCA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUE9PTF9DTE9TRUQ7XG4vKipcbiAqIEVtaXR0ZWQgZWFjaCB0aW1lIHRoZSBjb25uZWN0aW9uIHBvb2wgaXMgY2xlYXJlZCBhbmQgaXQncyBnZW5lcmF0aW9uIGluY3JlbWVudGVkXG4gKiBAZXZlbnRcbiAqL1xuQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9QT09MX0NMRUFSRUQgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1BPT0xfQ0xFQVJFRDtcbi8qKlxuICogRW1pdHRlZCBlYWNoIHRpbWUgdGhlIGNvbm5lY3Rpb24gcG9vbCBpcyBtYXJrZWQgcmVhZHlcbiAqIEBldmVudFxuICovXG5Db25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX1BPT0xfUkVBRFkgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1BPT0xfUkVBRFk7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiBhIGNvbm5lY3Rpb24gaXMgY3JlYXRlZC5cbiAqIEBldmVudFxuICovXG5Db25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NSRUFURUQgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NSRUFURUQ7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiBhIGNvbm5lY3Rpb24gYmVjb21lcyBlc3RhYmxpc2hlZCwgYW5kIGlzIHJlYWR5IHRvIHVzZVxuICogQGV2ZW50XG4gKi9cbkNvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fUkVBRFkgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1JFQURZO1xuLyoqXG4gKiBFbWl0dGVkIHdoZW4gYSBjb25uZWN0aW9uIGlzIGNsb3NlZFxuICogQGV2ZW50XG4gKi9cbkNvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fQ0xPU0VEID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DTE9TRUQ7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiBhbiBhdHRlbXB0IHRvIGNoZWNrIG91dCBhIGNvbm5lY3Rpb24gYmVnaW5zXG4gKiBAZXZlbnRcbiAqL1xuQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DSEVDS19PVVRfU1RBUlRFRCA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX1NUQVJURUQ7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiBhbiBhdHRlbXB0IHRvIGNoZWNrIG91dCBhIGNvbm5lY3Rpb24gZmFpbHNcbiAqIEBldmVudFxuICovXG5Db25uZWN0aW9uUG9vbC5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQ7XG4vKipcbiAqIEVtaXR0ZWQgZWFjaCB0aW1lIGEgY29ubmVjdGlvbiBpcyBzdWNjZXNzZnVsbHkgY2hlY2tlZCBvdXQgb2YgdGhlIGNvbm5lY3Rpb24gcG9vbFxuICogQGV2ZW50XG4gKi9cbkNvbm5lY3Rpb25Qb29sLkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NIRUNLRURfT1VUO1xuLyoqXG4gKiBFbWl0dGVkIGVhY2ggdGltZSBhIGNvbm5lY3Rpb24gaXMgc3VjY2Vzc2Z1bGx5IGNoZWNrZWQgaW50byB0aGUgY29ubmVjdGlvbiBwb29sXG4gKiBAZXZlbnRcbiAqL1xuQ29ubmVjdGlvblBvb2wuQ09OTkVDVElPTl9DSEVDS0VEX0lOID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DSEVDS0VEX0lOO1xuZXhwb3J0cy5Db25uZWN0aW9uUG9vbCA9IENvbm5lY3Rpb25Qb29sO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29ubmVjdGlvbl9wb29sLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNvbm5lY3Rpb25Qb29sIiwiUG9vbFN0YXRlIiwidGltZXJzXzEiLCJyZXF1aXJlIiwiY29uc3RhbnRzXzEiLCJlcnJvcl8xIiwibW9uZ29fdHlwZXNfMSIsInV0aWxzXzEiLCJjb25uZWN0XzEiLCJjb25uZWN0aW9uXzEiLCJjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEiLCJlcnJvcnNfMSIsIm1ldHJpY3NfMSIsImtTZXJ2ZXIiLCJTeW1ib2wiLCJrQ29ubmVjdGlvbnMiLCJrUGVuZGluZyIsImtDaGVja2VkT3V0Iiwia01pblBvb2xTaXplVGltZXIiLCJrR2VuZXJhdGlvbiIsImtTZXJ2aWNlR2VuZXJhdGlvbnMiLCJrQ29ubmVjdGlvbkNvdW50ZXIiLCJrQ2FuY2VsbGF0aW9uVG9rZW4iLCJrV2FpdFF1ZXVlIiwia0NhbmNlbGxlZCIsImtNZXRyaWNzIiwia1Byb2Nlc3NpbmdXYWl0UXVldWUiLCJrUG9vbFN0YXRlIiwiZnJlZXplIiwicGF1c2VkIiwicmVhZHkiLCJjbG9zZWQiLCJUeXBlZEV2ZW50RW1pdHRlciIsImNvbnN0cnVjdG9yIiwic2VydmVyIiwib3B0aW9ucyIsImNvbm5lY3Rpb25UeXBlIiwiQ29ubmVjdGlvbiIsIm1heFBvb2xTaXplIiwibWluUG9vbFNpemUiLCJtYXhDb25uZWN0aW5nIiwibWF4SWRsZVRpbWVNUyIsIndhaXRRdWV1ZVRpbWVvdXRNUyIsIm1pblBvb2xTaXplQ2hlY2tGcmVxdWVuY3lNUyIsImF1dG9FbmNyeXB0ZXIiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiTGlzdCIsIlNldCIsInVuZGVmaW5lZCIsIk1hcCIsIm1ha2VDb3VudGVyIiwiQ2FuY2VsbGF0aW9uVG9rZW4iLCJzZXRNYXhMaXN0ZW5lcnMiLCJJbmZpbml0eSIsIkNvbm5lY3Rpb25Qb29sTWV0cmljcyIsIm1vbmdvTG9nZ2VyIiwidG9wb2xvZ3kiLCJjbGllbnQiLCJjb21wb25lbnQiLCJwcm9jZXNzIiwibmV4dFRpY2siLCJlbWl0QW5kTG9nIiwiQ09OTkVDVElPTl9QT09MX0NSRUFURUQiLCJDb25uZWN0aW9uUG9vbENyZWF0ZWRFdmVudCIsImFkZHJlc3MiLCJob3N0QWRkcmVzcyIsInRvU3RyaW5nIiwiZ2VuZXJhdGlvbiIsInRvdGFsQ29ubmVjdGlvbkNvdW50IiwiYXZhaWxhYmxlQ29ubmVjdGlvbkNvdW50IiwicGVuZGluZ0Nvbm5lY3Rpb25Db3VudCIsImN1cnJlbnRDaGVja2VkT3V0Q291bnQiLCJsZW5ndGgiLCJzaXplIiwid2FpdFF1ZXVlU2l6ZSIsImxvYWRCYWxhbmNlZCIsInNlcnZpY2VHZW5lcmF0aW9ucyIsInNlcnZlckVycm9yIiwiZGVzY3JpcHRpb24iLCJlcnJvciIsImNoZWNrZWRPdXRDb25uZWN0aW9ucyIsIndhaXRRdWV1ZUVycm9yTWV0cmljcyIsImluZm8iLCJDT05ORUNUSU9OX1BPT0xfUkVBRFkiLCJDb25uZWN0aW9uUG9vbFJlYWR5RXZlbnQiLCJjbGVhclRpbWVvdXQiLCJlbnN1cmVNaW5Qb29sU2l6ZSIsImNoZWNrT3V0IiwiQ09OTkVDVElPTl9DSEVDS19PVVRfU1RBUlRFRCIsIkNvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWRFdmVudCIsInByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHJvbWlzZVdpdGhSZXNvbHZlcnMiLCJ3YWl0UXVldWVNZW1iZXIiLCJ0aW1lb3V0Q29udHJvbGxlciIsIlRpbWVvdXRDb250cm9sbGVyIiwic2lnbmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsZWFyIiwiQ09OTkVDVElPTl9DSEVDS19PVVRfRkFJTEVEIiwiQ29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkRXZlbnQiLCJXYWl0UXVldWVUaW1lb3V0RXJyb3IiLCJwdXNoIiwicHJvY2Vzc1dhaXRRdWV1ZSIsImNoZWNrSW4iLCJjb25uZWN0aW9uIiwiaGFzIiwicG9vbENsb3NlZCIsInN0YWxlIiwiY29ubmVjdGlvbklzU3RhbGUiLCJ3aWxsRGVzdHJveSIsIm1hcmtBdmFpbGFibGUiLCJ1bnNoaWZ0IiwiZGVsZXRlIiwiQ09OTkVDVElPTl9DSEVDS0VEX0lOIiwiQ29ubmVjdGlvbkNoZWNrZWRJbkV2ZW50IiwicmVhc29uIiwiZGVzdHJveUNvbm5lY3Rpb24iLCJzZXJ2aWNlSWQiLCJNb25nb1J1bnRpbWVFcnJvciIsInNpZCIsInRvSGV4U3RyaW5nIiwiZ2V0Iiwic2V0IiwiQ09OTkVDVElPTl9QT09MX0NMRUFSRUQiLCJDb25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCIsImludGVycnVwdEluVXNlQ29ubmVjdGlvbnMiLCJvbGRHZW5lcmF0aW9uIiwiYWxyZWFkeVBhdXNlZCIsImNsZWFyTWluUG9vbFNpemVUaW1lciIsIm1pbkdlbmVyYXRpb24iLCJvbkVycm9yIiwiUG9vbENsZWFyZWRPbk5ldHdvcmtFcnJvciIsImNsb3NlIiwiZW1pdCIsInJldHVybiIsImNvbm4iLCJDT05ORUNUSU9OX0NMT1NFRCIsIkNvbm5lY3Rpb25DbG9zZWRFdmVudCIsImRlc3Ryb3kiLCJDT05ORUNUSU9OX1BPT0xfQ0xPU0VEIiwiQ29ubmVjdGlvblBvb2xDbG9zZWRFdmVudCIsInJlYXV0aGVudGljYXRlIiwiYXV0aENvbnRleHQiLCJjcmVkZW50aWFscyIsIk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IiLCJyZXNvbHZlZENyZWRlbnRpYWxzIiwicmVzb2x2ZUF1dGhNZWNoYW5pc20iLCJoZWxsbyIsInByb3ZpZGVyIiwicyIsImF1dGhQcm92aWRlcnMiLCJnZXRPckNyZWF0ZVByb3ZpZGVyIiwibWVjaGFuaXNtIiwicmVhdXRoIiwibWluUG9vbFNpemVUaW1lciIsImNvbm5lY3Rpb25Jc0lkbGUiLCJpZGxlVGltZSIsImRlc3Ryb3lDb25uZWN0aW9uSWZQZXJpc2hlZCIsImlzU3RhbGUiLCJpc0lkbGUiLCJjcmVhdGVDb25uZWN0aW9uIiwiY2FsbGJhY2siLCJjb25uZWN0T3B0aW9ucyIsImlkIiwibmV4dCIsImNhbmNlbGxhdGlvblRva2VuIiwiQ09OTkVDVElPTl9DUkVBVEVEIiwiQ29ubmVjdGlvbkNyZWF0ZWRFdmVudCIsImNvbm5lY3QiLCJ0aGVuIiwiUG9vbENsb3NlZEVycm9yIiwiUG9vbENsZWFyZWRFcnJvciIsImV2ZW50IiwiQVBNX0VWRU5UUyIsIkNMVVNURVJfVElNRV9SRUNFSVZFRCIsIm9uIiwiZSIsIlBJTk5FRCIsInBpblR5cGUiLCJtYXJrUGlubmVkIiwiVU5QSU5ORUQiLCJtYXJrVW5waW5uZWQiLCJDT05ORUNUSU9OX1JFQURZIiwiQ29ubmVjdGlvblJlYWR5RXZlbnQiLCJNb25nb05ldHdvcmtFcnJvciIsIk1vbmdvU2VydmVyRXJyb3IiLCJjb25uZWN0aW9uR2VuZXJhdGlvbiIsInBydW5lIiwiZXJyIiwiaGFuZGxlRXJyb3IiLCJzZXRUaW1lb3V0IiwiZmlyc3QiLCJzaGlmdCIsImFkZCIsIkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQiLCJDb25uZWN0aW9uQ2hlY2tlZE91dEV2ZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/connection_pool.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/connection_pool_events.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/connection_pool_events.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ConnectionPoolClearedEvent = exports.ConnectionCheckedInEvent = exports.ConnectionCheckedOutEvent = exports.ConnectionCheckOutFailedEvent = exports.ConnectionCheckOutStartedEvent = exports.ConnectionClosedEvent = exports.ConnectionReadyEvent = exports.ConnectionCreatedEvent = exports.ConnectionPoolClosedEvent = exports.ConnectionPoolReadyEvent = exports.ConnectionPoolCreatedEvent = exports.ConnectionPoolMonitoringEvent = void 0;\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\n/**\n * The base export class for all monitoring events published from the connection pool\n * @public\n * @category Event\n */ class ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        this.time = new Date();\n        this.address = pool.address;\n    }\n}\nexports.ConnectionPoolMonitoringEvent = ConnectionPoolMonitoringEvent;\n/**\n * An event published when a connection pool is created\n * @public\n * @category Event\n */ class ConnectionPoolCreatedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_POOL_CREATED;\n        const { maxConnecting, maxPoolSize, minPoolSize, maxIdleTimeMS, waitQueueTimeoutMS } = pool.options;\n        this.options = {\n            maxConnecting,\n            maxPoolSize,\n            minPoolSize,\n            maxIdleTimeMS,\n            waitQueueTimeoutMS\n        };\n    }\n}\nexports.ConnectionPoolCreatedEvent = ConnectionPoolCreatedEvent;\n/**\n * An event published when a connection pool is ready\n * @public\n * @category Event\n */ class ConnectionPoolReadyEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_POOL_READY;\n    }\n}\nexports.ConnectionPoolReadyEvent = ConnectionPoolReadyEvent;\n/**\n * An event published when a connection pool is closed\n * @public\n * @category Event\n */ class ConnectionPoolClosedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_POOL_CLOSED;\n    }\n}\nexports.ConnectionPoolClosedEvent = ConnectionPoolClosedEvent;\n/**\n * An event published when a connection pool creates a new connection\n * @public\n * @category Event\n */ class ConnectionCreatedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CREATED;\n        this.connectionId = connection.id;\n    }\n}\nexports.ConnectionCreatedEvent = ConnectionCreatedEvent;\n/**\n * An event published when a connection is ready for use\n * @public\n * @category Event\n */ class ConnectionReadyEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_READY;\n        this.connectionId = connection.id;\n    }\n}\nexports.ConnectionReadyEvent = ConnectionReadyEvent;\n/**\n * An event published when a connection is closed\n * @public\n * @category Event\n */ class ConnectionClosedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection, reason, error){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CLOSED;\n        this.connectionId = connection.id;\n        this.reason = reason;\n        this.serviceId = connection.serviceId;\n        this.error = error ?? null;\n    }\n}\nexports.ConnectionClosedEvent = ConnectionClosedEvent;\n/**\n * An event published when a request to check a connection out begins\n * @public\n * @category Event\n */ class ConnectionCheckOutStartedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CHECK_OUT_STARTED;\n    }\n}\nexports.ConnectionCheckOutStartedEvent = ConnectionCheckOutStartedEvent;\n/**\n * An event published when a request to check a connection out fails\n * @public\n * @category Event\n */ class ConnectionCheckOutFailedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, reason, error){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CHECK_OUT_FAILED;\n        this.reason = reason;\n        this.error = error;\n    }\n}\nexports.ConnectionCheckOutFailedEvent = ConnectionCheckOutFailedEvent;\n/**\n * An event published when a connection is checked out of the connection pool\n * @public\n * @category Event\n */ class ConnectionCheckedOutEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CHECKED_OUT;\n        this.connectionId = connection.id;\n    }\n}\nexports.ConnectionCheckedOutEvent = ConnectionCheckedOutEvent;\n/**\n * An event published when a connection is checked into the connection pool\n * @public\n * @category Event\n */ class ConnectionCheckedInEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, connection){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_CHECKED_IN;\n        this.connectionId = connection.id;\n    }\n}\nexports.ConnectionCheckedInEvent = ConnectionCheckedInEvent;\n/**\n * An event published when a connection pool is cleared\n * @public\n * @category Event\n */ class ConnectionPoolClearedEvent extends ConnectionPoolMonitoringEvent {\n    /** @internal */ constructor(pool, options = {}){\n        super(pool);\n        /** @internal */ this.name = constants_1.CONNECTION_POOL_CLEARED;\n        this.serviceId = options.serviceId;\n        this.interruptInUseConnections = options.interruptInUseConnections;\n    }\n}\nexports.ConnectionPoolClearedEvent = ConnectionPoolClearedEvent; //# sourceMappingURL=connection_pool_events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9jb25uZWN0aW9uX3Bvb2xfZXZlbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQ0FBa0MsR0FBR0EsZ0NBQWdDLEdBQUdBLGlDQUFpQyxHQUFHQSxxQ0FBcUMsR0FBR0Esc0NBQXNDLEdBQUdBLDZCQUE2QixHQUFHQSw0QkFBNEIsR0FBR0EsOEJBQThCLEdBQUdBLGlDQUFpQyxHQUFHQSxnQ0FBZ0MsR0FBR0Esa0NBQWtDLEdBQUdBLHFDQUFxQyxHQUFHLEtBQUs7QUFDdGIsTUFBTWMsY0FBY0MsbUJBQU9BLENBQUMsbUVBQWM7QUFDMUM7Ozs7Q0FJQyxHQUNELE1BQU1GO0lBQ0YsY0FBYyxHQUNkRyxZQUFZQyxJQUFJLENBQUU7UUFDZCxJQUFJLENBQUNDLElBQUksR0FBRyxJQUFJQztRQUNoQixJQUFJLENBQUNDLE9BQU8sR0FBR0gsS0FBS0csT0FBTztJQUMvQjtBQUNKO0FBQ0FwQixxQ0FBcUMsR0FBR2E7QUFDeEM7Ozs7Q0FJQyxHQUNELE1BQU1ELG1DQUFtQ0M7SUFDckMsY0FBYyxHQUNkRyxZQUFZQyxJQUFJLENBQUU7UUFDZCxLQUFLLENBQUNBO1FBQ04sY0FBYyxHQUNkLElBQUksQ0FBQ0ksSUFBSSxHQUFHUCxZQUFZUSx1QkFBdUI7UUFDL0MsTUFBTSxFQUFFQyxhQUFhLEVBQUVDLFdBQVcsRUFBRUMsV0FBVyxFQUFFQyxhQUFhLEVBQUVDLGtCQUFrQixFQUFFLEdBQUdWLEtBQUtXLE9BQU87UUFDbkcsSUFBSSxDQUFDQSxPQUFPLEdBQUc7WUFBRUw7WUFBZUM7WUFBYUM7WUFBYUM7WUFBZUM7UUFBbUI7SUFDaEc7QUFDSjtBQUNBM0Isa0NBQWtDLEdBQUdZO0FBQ3JDOzs7O0NBSUMsR0FDRCxNQUFNRCxpQ0FBaUNFO0lBQ25DLGNBQWMsR0FDZEcsWUFBWUMsSUFBSSxDQUFFO1FBQ2QsS0FBSyxDQUFD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QUFZLEdBQUdGLFdBQVdHLEVBQUU7SUFDckM7QUFDSjtBQUNBbEMsZ0NBQWdDLEdBQUdHO0FBQ25DOzs7O0NBSUMsR0FDRCxNQUFNRCxtQ0FBbUNXO0lBQ3JDLGNBQWMsR0FDZEcsWUFBWUMsSUFBSSxFQUFFVyxVQUFVLENBQUMsQ0FBQyxDQUFFO1FBQzVCLEtBQUssQ0FBQ1g7UUFDTixjQUFjLEdBQ2QsSUFBSSxDQUFDSSxJQUFJLEdBQUdQLFlBQVk4Qix1QkFBdUI7UUFDL0MsSUFBSSxDQUFDTCxTQUFTLEdBQUdYLFFBQVFXLFNBQVM7UUFDbEMsSUFBSSxDQUFDTSx5QkFBeUIsR0FBR2pCLFFBQVFpQix5QkFBeUI7SUFDdEU7QUFDSjtBQUNBN0Msa0NBQWtDLEdBQUdFLDRCQUNyQyxrREFBa0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvY29ubmVjdGlvbl9wb29sX2V2ZW50cy5qcz8xOWMxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Db25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvbkNoZWNrZWRJbkV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uQ2hlY2tlZE91dEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uQ2hlY2tPdXRGYWlsZWRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvbkNoZWNrT3V0U3RhcnRlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uQ2xvc2VkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25SZWFkeUV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uQ3JlYXRlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uUG9vbENsb3NlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uUG9vbFJlYWR5RXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25Qb29sQ3JlYXRlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCA9IHZvaWQgMDtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbi8qKlxuICogVGhlIGJhc2UgZXhwb3J0IGNsYXNzIGZvciBhbGwgbW9uaXRvcmluZyBldmVudHMgcHVibGlzaGVkIGZyb20gdGhlIGNvbm5lY3Rpb24gcG9vbFxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIENvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IocG9vbCkge1xuICAgICAgICB0aGlzLnRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBwb29sLmFkZHJlc3M7XG4gICAgfVxufVxuZXhwb3J0cy5Db25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCA9IENvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBwdWJsaXNoZWQgd2hlbiBhIGNvbm5lY3Rpb24gcG9vbCBpcyBjcmVhdGVkXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgQ29ubmVjdGlvblBvb2xDcmVhdGVkRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wpIHtcbiAgICAgICAgc3VwZXIocG9vbCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9QT09MX0NSRUFURUQ7XG4gICAgICAgIGNvbnN0IHsgbWF4Q29ubmVjdGluZywgbWF4UG9vbFNpemUsIG1pblBvb2xTaXplLCBtYXhJZGxlVGltZU1TLCB3YWl0UXVldWVUaW1lb3V0TVMgfSA9IHBvb2wub3B0aW9ucztcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyBtYXhDb25uZWN0aW5nLCBtYXhQb29sU2l6ZSwgbWluUG9vbFNpemUsIG1heElkbGVUaW1lTVMsIHdhaXRRdWV1ZVRpbWVvdXRNUyB9O1xuICAgIH1cbn1cbmV4cG9ydHMuQ29ubmVjdGlvblBvb2xDcmVhdGVkRXZlbnQgPSBDb25uZWN0aW9uUG9vbENyZWF0ZWRFdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gYSBjb25uZWN0aW9uIHBvb2wgaXMgcmVhZHlcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uUG9vbFJlYWR5RXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wpIHtcbiAgICAgICAgc3VwZXIocG9vbCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9QT09MX1JFQURZO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29ubmVjdGlvblBvb2xSZWFkeUV2ZW50ID0gQ29ubmVjdGlvblBvb2xSZWFkeUV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBwdWJsaXNoZWQgd2hlbiBhIGNvbm5lY3Rpb24gcG9vbCBpcyBjbG9zZWRcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uUG9vbENsb3NlZEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb29sKSB7XG4gICAgICAgIHN1cGVyKHBvb2wpO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUE9PTF9DTE9TRUQ7XG4gICAgfVxufVxuZXhwb3J0cy5Db25uZWN0aW9uUG9vbENsb3NlZEV2ZW50ID0gQ29ubmVjdGlvblBvb2xDbG9zZWRFdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gYSBjb25uZWN0aW9uIHBvb2wgY3JlYXRlcyBhIG5ldyBjb25uZWN0aW9uXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgQ29ubmVjdGlvbkNyZWF0ZWRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IocG9vbCwgY29ubmVjdGlvbikge1xuICAgICAgICBzdXBlcihwb29sKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NSRUFURUQ7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbklkID0gY29ubmVjdGlvbi5pZDtcbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25DcmVhdGVkRXZlbnQgPSBDb25uZWN0aW9uQ3JlYXRlZEV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBwdWJsaXNoZWQgd2hlbiBhIGNvbm5lY3Rpb24gaXMgcmVhZHkgZm9yIHVzZVxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIENvbm5lY3Rpb25SZWFkeUV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb29sLCBjb25uZWN0aW9uKSB7XG4gICAgICAgIHN1cGVyKHBvb2wpO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUkVBRFk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbklkID0gY29ubmVjdGlvbi5pZDtcbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25SZWFkeUV2ZW50ID0gQ29ubmVjdGlvblJlYWR5RXZlbnQ7XG4vKipcbiAqIEFuIGV2ZW50IHB1Ymxpc2hlZCB3aGVuIGEgY29ubmVjdGlvbiBpcyBjbG9zZWRcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uQ2xvc2VkRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wsIGNvbm5lY3Rpb24sIHJlYXNvbiwgZXJyb3IpIHtcbiAgICAgICAgc3VwZXIocG9vbCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DTE9TRUQ7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbklkID0gY29ubmVjdGlvbi5pZDtcbiAgICAgICAgdGhpcy5yZWFzb24gPSByZWFzb247XG4gICAgICAgIHRoaXMuc2VydmljZUlkID0gY29ubmVjdGlvbi5zZXJ2aWNlSWQ7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvciA/PyBudWxsO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29ubmVjdGlvbkNsb3NlZEV2ZW50ID0gQ29ubmVjdGlvbkNsb3NlZEV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBwdWJsaXNoZWQgd2hlbiBhIHJlcXVlc3QgdG8gY2hlY2sgYSBjb25uZWN0aW9uIG91dCBiZWdpbnNcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uQ2hlY2tPdXRTdGFydGVkRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wpIHtcbiAgICAgICAgc3VwZXIocG9vbCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DSEVDS19PVVRfU1RBUlRFRDtcbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWRFdmVudCA9IENvbm5lY3Rpb25DaGVja091dFN0YXJ0ZWRFdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gYSByZXF1ZXN0IHRvIGNoZWNrIGEgY29ubmVjdGlvbiBvdXQgZmFpbHNcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBDb25uZWN0aW9uQ2hlY2tPdXRGYWlsZWRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IocG9vbCwgcmVhc29uLCBlcnJvcikge1xuICAgICAgICBzdXBlcihwb29sKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQ7XG4gICAgICAgIHRoaXMucmVhc29uID0gcmVhc29uO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgfVxufVxuZXhwb3J0cy5Db25uZWN0aW9uQ2hlY2tPdXRGYWlsZWRFdmVudCA9IENvbm5lY3Rpb25DaGVja091dEZhaWxlZEV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBwdWJsaXNoZWQgd2hlbiBhIGNvbm5lY3Rpb24gaXMgY2hlY2tlZCBvdXQgb2YgdGhlIGNvbm5lY3Rpb24gcG9vbFxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIENvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wsIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgc3VwZXIocG9vbCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DSEVDS0VEX09VVDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uSWQgPSBjb25uZWN0aW9uLmlkO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29ubmVjdGlvbkNoZWNrZWRPdXRFdmVudCA9IENvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQ7XG4vKipcbiAqIEFuIGV2ZW50IHB1Ymxpc2hlZCB3aGVuIGEgY29ubmVjdGlvbiBpcyBjaGVja2VkIGludG8gdGhlIGNvbm5lY3Rpb24gcG9vbFxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIENvbm5lY3Rpb25DaGVja2VkSW5FdmVudCBleHRlbmRzIENvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IocG9vbCwgY29ubmVjdGlvbikge1xuICAgICAgICBzdXBlcihwb29sKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NIRUNLRURfSU47XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbklkID0gY29ubmVjdGlvbi5pZDtcbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25DaGVja2VkSW5FdmVudCA9IENvbm5lY3Rpb25DaGVja2VkSW5FdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gYSBjb25uZWN0aW9uIHBvb2wgaXMgY2xlYXJlZFxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIENvbm5lY3Rpb25Qb29sQ2xlYXJlZEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb29sLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIocG9vbCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuQ09OTkVDVElPTl9QT09MX0NMRUFSRUQ7XG4gICAgICAgIHRoaXMuc2VydmljZUlkID0gb3B0aW9ucy5zZXJ2aWNlSWQ7XG4gICAgICAgIHRoaXMuaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyA9IG9wdGlvbnMuaW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucztcbiAgICB9XG59XG5leHBvcnRzLkNvbm5lY3Rpb25Qb29sQ2xlYXJlZEV2ZW50ID0gQ29ubmVjdGlvblBvb2xDbGVhcmVkRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25uZWN0aW9uX3Bvb2xfZXZlbnRzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNvbm5lY3Rpb25Qb29sQ2xlYXJlZEV2ZW50IiwiQ29ubmVjdGlvbkNoZWNrZWRJbkV2ZW50IiwiQ29ubmVjdGlvbkNoZWNrZWRPdXRFdmVudCIsIkNvbm5lY3Rpb25DaGVja091dEZhaWxlZEV2ZW50IiwiQ29ubmVjdGlvbkNoZWNrT3V0U3RhcnRlZEV2ZW50IiwiQ29ubmVjdGlvbkNsb3NlZEV2ZW50IiwiQ29ubmVjdGlvblJlYWR5RXZlbnQiLCJDb25uZWN0aW9uQ3JlYXRlZEV2ZW50IiwiQ29ubmVjdGlvblBvb2xDbG9zZWRFdmVudCIsIkNvbm5lY3Rpb25Qb29sUmVhZHlFdmVudCIsIkNvbm5lY3Rpb25Qb29sQ3JlYXRlZEV2ZW50IiwiQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQiLCJjb25zdGFudHNfMSIsInJlcXVpcmUiLCJjb25zdHJ1Y3RvciIsInBvb2wiLCJ0aW1lIiwiRGF0ZSIsImFkZHJlc3MiLCJuYW1lIiwiQ09OTkVDVElPTl9QT09MX0NSRUFURUQiLCJtYXhDb25uZWN0aW5nIiwibWF4UG9vbFNpemUiLCJtaW5Qb29sU2l6ZSIsIm1heElkbGVUaW1lTVMiLCJ3YWl0UXVldWVUaW1lb3V0TVMiLCJvcHRpb25zIiwiQ09OTkVDVElPTl9QT09MX1JFQURZIiwiQ09OTkVDVElPTl9QT09MX0NMT1NFRCIsImNvbm5lY3Rpb24iLCJDT05ORUNUSU9OX0NSRUFURUQiLCJjb25uZWN0aW9uSWQiLCJpZCIsIkNPTk5FQ1RJT05fUkVBRFkiLCJyZWFzb24iLCJlcnJvciIsIkNPTk5FQ1RJT05fQ0xPU0VEIiwic2VydmljZUlkIiwiQ09OTkVDVElPTl9DSEVDS19PVVRfU1RBUlRFRCIsIkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX0ZBSUxFRCIsIkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQiLCJDT05ORUNUSU9OX0NIRUNLRURfSU4iLCJDT05ORUNUSU9OX1BPT0xfQ0xFQVJFRCIsImludGVycnVwdEluVXNlQ29ubmVjdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/connection_pool_events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/errors.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/errors.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WaitQueueTimeoutError = exports.PoolClearedOnNetworkError = exports.PoolClearedError = exports.PoolClosedError = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/**\n * An error indicating a connection pool is closed\n * @category Error\n */ class PoolClosedError extends error_1.MongoDriverError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(pool){\n        super(\"Attempted to check out a connection from closed connection pool\");\n        this.address = pool.address;\n    }\n    get name() {\n        return \"MongoPoolClosedError\";\n    }\n}\nexports.PoolClosedError = PoolClosedError;\n/**\n * An error indicating a connection pool is currently paused\n * @category Error\n */ class PoolClearedError extends error_1.MongoNetworkError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(pool, message){\n        const errorMessage = message ? message : `Connection pool for ${pool.address} was cleared because another operation failed with: \"${pool.serverError?.message}\"`;\n        super(errorMessage, pool.serverError ? {\n            cause: pool.serverError\n        } : undefined);\n        this.address = pool.address;\n        this.addErrorLabel(error_1.MongoErrorLabel.PoolRequstedRetry);\n    }\n    get name() {\n        return \"MongoPoolClearedError\";\n    }\n}\nexports.PoolClearedError = PoolClearedError;\n/**\n * An error indicating that a connection pool has been cleared after the monitor for that server timed out.\n * @category Error\n */ class PoolClearedOnNetworkError extends PoolClearedError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(pool){\n        super(pool, `Connection to ${pool.address} interrupted due to server monitor timeout`);\n    }\n    get name() {\n        return \"PoolClearedOnNetworkError\";\n    }\n}\nexports.PoolClearedOnNetworkError = PoolClearedOnNetworkError;\n/**\n * An error thrown when a request to check out a connection times out\n * @category Error\n */ class WaitQueueTimeoutError extends error_1.MongoDriverError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, address){\n        super(message);\n        this.address = address;\n    }\n    get name() {\n        return \"MongoWaitQueueTimeoutError\";\n    }\n}\nexports.WaitQueueTimeoutError = WaitQueueTimeoutError; //# sourceMappingURL=errors.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9lcnJvcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDZCQUE2QixHQUFHQSxpQ0FBaUMsR0FBR0Esd0JBQXdCLEdBQUdBLHVCQUF1QixHQUFHLEtBQUs7QUFDOUgsTUFBTU0sVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEM7OztDQUdDLEdBQ0QsTUFBTUYsd0JBQXdCQyxRQUFRRSxnQkFBZ0I7SUFDbEQ7Ozs7Ozs7Ozs7TUFVRSxHQUNGQyxZQUFZQyxJQUFJLENBQUU7UUFDZCxLQUFLLENBQUM7UUFDTixJQUFJLENBQUNDLE9BQU8sR0FBR0QsS0FBS0MsT0FBTztJQUMvQjtJQUNBLElBQUlDLE9BQU87UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBWix1QkFBdUIsR0FBR0s7QUFDMUI7OztDQUdDLEdBQ0QsTUFBTUQseUJBQXlCRSxRQUFRTyxpQkFBaUI7SUFDcEQ7Ozs7Ozs7Ozs7TUFVRSxHQUNGSixZQUFZQyxJQUFJLEVBQUVJLE9BQU8sQ0FBRTtRQUN2QixNQUFNQyxlQUFlRCxVQUNmQSxVQUNBLENBQUMsb0JBQW9CLEVBQUVKLEtBQUtDLE9BQU8sQ0FBQyxxREFBcUQsRUFBRUQsS0FBS00sV0FBVyxFQUFFRixRQUFRLENBQUMsQ0FBQztRQUM3SCxLQUFLLENBQUNDLGNBQWNMLEtBQUtNLFdBQVcsR0FBRztZQUFFQyxPQUFPUCxLQUFLTSxXQUFXO1FBQUMsSUFBSUU7UUFDckUsSUFBSSxDQUFDUCxPQUFPLEdBQUdELEtBQUtDLE9BQU87UUFDM0IsSUFBSSxDQUFDUSxhQUFhLENBQUNiLFFBQVFjLGVBQWUsQ0FBQ0MsaUJBQWlCO0lBQ2hFO0lBQ0EsSUFBSVQsT0FBTztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0FaLHdCQUF3QixHQUFHSTtBQUMzQjs7O0NBR0MsR0FDRCxNQUFNRCxrQ0FBa0NDO0lBQ3BDOzs7Ozs7Ozs7O01BVUUsR0FDRkssWUFBWUMsSUFBSSxDQUFFO1FBQ2QsS0FBSyxDQUFDQSxNQUFNLENBQUMsY0FBYyxFQUFFQSxLQUFLQyxPQUFPLENBQUMsMENBQTBDLENBQUM7SUFDekY7SUFDQSxJQUFJQyxPQUFPO1FBQ1AsT0FBTztJQUNYO0FBQ0o7QUFDQVosaUNBQWlDLEdBQUdHO0FBQ3BDOzs7Q0FHQyxHQUNELE1BQU1ELDhCQUE4QkksUUFBUUUsZ0JBQWdCO0lBQ3hEOzs7Ozs7Ozs7O01BVUUsR0FDRkMsWUFBWUssT0FBTyxFQUFFSCxPQUFPLENBQUU7UUFDMUIsS0FBSyxDQUFDRztRQUNOLElBQUksQ0FBQ0gsT0FBTyxHQUFHQTtJQUNuQjtJQUNBLElBQUlDLE9BQU87UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBWiw2QkFBNkIsR0FBR0UsdUJBQ2hDLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9lcnJvcnMuanM/NWRjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV2FpdFF1ZXVlVGltZW91dEVycm9yID0gZXhwb3J0cy5Qb29sQ2xlYXJlZE9uTmV0d29ya0Vycm9yID0gZXhwb3J0cy5Qb29sQ2xlYXJlZEVycm9yID0gZXhwb3J0cy5Qb29sQ2xvc2VkRXJyb3IgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuLyoqXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIGEgY29ubmVjdGlvbiBwb29sIGlzIGNsb3NlZFxuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIFBvb2xDbG9zZWRFcnJvciBleHRlbmRzIGVycm9yXzEuTW9uZ29Ecml2ZXJFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wpIHtcbiAgICAgICAgc3VwZXIoJ0F0dGVtcHRlZCB0byBjaGVjayBvdXQgYSBjb25uZWN0aW9uIGZyb20gY2xvc2VkIGNvbm5lY3Rpb24gcG9vbCcpO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBwb29sLmFkZHJlc3M7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvUG9vbENsb3NlZEVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLlBvb2xDbG9zZWRFcnJvciA9IFBvb2xDbG9zZWRFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgaW5kaWNhdGluZyBhIGNvbm5lY3Rpb24gcG9vbCBpcyBjdXJyZW50bHkgcGF1c2VkXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgUG9vbENsZWFyZWRFcnJvciBleHRlbmRzIGVycm9yXzEuTW9uZ29OZXR3b3JrRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3Rvcihwb29sLCBtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IG1lc3NhZ2VcbiAgICAgICAgICAgID8gbWVzc2FnZVxuICAgICAgICAgICAgOiBgQ29ubmVjdGlvbiBwb29sIGZvciAke3Bvb2wuYWRkcmVzc30gd2FzIGNsZWFyZWQgYmVjYXVzZSBhbm90aGVyIG9wZXJhdGlvbiBmYWlsZWQgd2l0aDogXCIke3Bvb2wuc2VydmVyRXJyb3I/Lm1lc3NhZ2V9XCJgO1xuICAgICAgICBzdXBlcihlcnJvck1lc3NhZ2UsIHBvb2wuc2VydmVyRXJyb3IgPyB7IGNhdXNlOiBwb29sLnNlcnZlckVycm9yIH0gOiB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBwb29sLmFkZHJlc3M7XG4gICAgICAgIHRoaXMuYWRkRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5Qb29sUmVxdXN0ZWRSZXRyeSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvUG9vbENsZWFyZWRFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Qb29sQ2xlYXJlZEVycm9yID0gUG9vbENsZWFyZWRFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgaW5kaWNhdGluZyB0aGF0IGEgY29ubmVjdGlvbiBwb29sIGhhcyBiZWVuIGNsZWFyZWQgYWZ0ZXIgdGhlIG1vbml0b3IgZm9yIHRoYXQgc2VydmVyIHRpbWVkIG91dC5cbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBQb29sQ2xlYXJlZE9uTmV0d29ya0Vycm9yIGV4dGVuZHMgUG9vbENsZWFyZWRFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHBvb2wpIHtcbiAgICAgICAgc3VwZXIocG9vbCwgYENvbm5lY3Rpb24gdG8gJHtwb29sLmFkZHJlc3N9IGludGVycnVwdGVkIGR1ZSB0byBzZXJ2ZXIgbW9uaXRvciB0aW1lb3V0YCk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ1Bvb2xDbGVhcmVkT25OZXR3b3JrRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuUG9vbENsZWFyZWRPbk5ldHdvcmtFcnJvciA9IFBvb2xDbGVhcmVkT25OZXR3b3JrRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIGEgcmVxdWVzdCB0byBjaGVjayBvdXQgYSBjb25uZWN0aW9uIHRpbWVzIG91dFxuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIFdhaXRRdWV1ZVRpbWVvdXRFcnJvciBleHRlbmRzIGVycm9yXzEuTW9uZ29Ecml2ZXJFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGFkZHJlc3MpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvV2FpdFF1ZXVlVGltZW91dEVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLldhaXRRdWV1ZVRpbWVvdXRFcnJvciA9IFdhaXRRdWV1ZVRpbWVvdXRFcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJXYWl0UXVldWVUaW1lb3V0RXJyb3IiLCJQb29sQ2xlYXJlZE9uTmV0d29ya0Vycm9yIiwiUG9vbENsZWFyZWRFcnJvciIsIlBvb2xDbG9zZWRFcnJvciIsImVycm9yXzEiLCJyZXF1aXJlIiwiTW9uZ29Ecml2ZXJFcnJvciIsImNvbnN0cnVjdG9yIiwicG9vbCIsImFkZHJlc3MiLCJuYW1lIiwiTW9uZ29OZXR3b3JrRXJyb3IiLCJtZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwic2VydmVyRXJyb3IiLCJjYXVzZSIsInVuZGVmaW5lZCIsImFkZEVycm9yTGFiZWwiLCJNb25nb0Vycm9yTGFiZWwiLCJQb29sUmVxdXN0ZWRSZXRyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/handshake/client_metadata.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/handshake/client_metadata.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getFAASEnv = exports.addContainerMetadata = exports.makeClientMetadata = exports.LimitedSizeDocument = void 0;\nconst fs_1 = __webpack_require__(/*! fs */ \"fs\");\nconst os = __webpack_require__(/*! os */ \"os\");\nconst process = __webpack_require__(/*! process */ \"process\");\nconst bson_1 = __webpack_require__(/*! ../../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst NODE_DRIVER_VERSION = (__webpack_require__(/*! ../../../package.json */ \"(ssr)/./node_modules/mongodb/package.json\").version);\n/** @internal */ class LimitedSizeDocument {\n    constructor(maxSize){\n        this.maxSize = maxSize;\n        this.document = new Map();\n        /** BSON overhead: Int32 + Null byte */ this.documentSize = 5;\n    }\n    /** Only adds key/value if the bsonByteLength is less than MAX_SIZE */ ifItFitsItSits(key, value) {\n        // The BSON byteLength of the new element is the same as serializing it to its own document\n        // subtracting the document size int32 and the null terminator.\n        const newElementSize = bson_1.BSON.serialize(new Map().set(key, value)).byteLength - 5;\n        if (newElementSize + this.documentSize > this.maxSize) {\n            return false;\n        }\n        this.documentSize += newElementSize;\n        this.document.set(key, value);\n        return true;\n    }\n    toObject() {\n        return bson_1.BSON.deserialize(bson_1.BSON.serialize(this.document), {\n            promoteLongs: false,\n            promoteBuffers: false,\n            promoteValues: false,\n            useBigInt64: false\n        });\n    }\n}\nexports.LimitedSizeDocument = LimitedSizeDocument;\n/**\n * From the specs:\n * Implementors SHOULD cumulatively update fields in the following order until the document is under the size limit:\n * 1. Omit fields from `env` except `env.name`.\n * 2. Omit fields from `os` except `os.type`.\n * 3. Omit the `env` document entirely.\n * 4. Truncate `platform`. -- special we do not truncate this field\n */ function makeClientMetadata(options) {\n    const metadataDocument = new LimitedSizeDocument(512);\n    const { appName = \"\" } = options;\n    // Add app name first, it must be sent\n    if (appName.length > 0) {\n        const name = Buffer.byteLength(appName, \"utf8\") <= 128 ? options.appName : Buffer.from(appName, \"utf8\").subarray(0, 128).toString(\"utf8\");\n        metadataDocument.ifItFitsItSits(\"application\", {\n            name\n        });\n    }\n    const { name = \"\", version = \"\", platform = \"\" } = options.driverInfo;\n    const driverInfo = {\n        name: name.length > 0 ? `nodejs|${name}` : \"nodejs\",\n        version: version.length > 0 ? `${NODE_DRIVER_VERSION}|${version}` : NODE_DRIVER_VERSION\n    };\n    if (!metadataDocument.ifItFitsItSits(\"driver\", driverInfo)) {\n        throw new error_1.MongoInvalidArgumentError(\"Unable to include driverInfo name and version, metadata cannot exceed 512 bytes\");\n    }\n    let runtimeInfo = getRuntimeInfo();\n    if (platform.length > 0) {\n        runtimeInfo = `${runtimeInfo}|${platform}`;\n    }\n    if (!metadataDocument.ifItFitsItSits(\"platform\", runtimeInfo)) {\n        throw new error_1.MongoInvalidArgumentError(\"Unable to include driverInfo platform, metadata cannot exceed 512 bytes\");\n    }\n    // Note: order matters, os.type is last so it will be removed last if we're at maxSize\n    const osInfo = new Map().set(\"name\", process.platform).set(\"architecture\", process.arch).set(\"version\", os.release()).set(\"type\", os.type());\n    if (!metadataDocument.ifItFitsItSits(\"os\", osInfo)) {\n        for (const key of osInfo.keys()){\n            osInfo.delete(key);\n            if (osInfo.size === 0) break;\n            if (metadataDocument.ifItFitsItSits(\"os\", osInfo)) break;\n        }\n    }\n    const faasEnv = getFAASEnv();\n    if (faasEnv != null) {\n        if (!metadataDocument.ifItFitsItSits(\"env\", faasEnv)) {\n            for (const key of faasEnv.keys()){\n                faasEnv.delete(key);\n                if (faasEnv.size === 0) break;\n                if (metadataDocument.ifItFitsItSits(\"env\", faasEnv)) break;\n            }\n        }\n    }\n    return metadataDocument.toObject();\n}\nexports.makeClientMetadata = makeClientMetadata;\nlet dockerPromise;\n/** @internal */ async function getContainerMetadata() {\n    const containerMetadata = {};\n    dockerPromise ??= fs_1.promises.access(\"/.dockerenv\").then(()=>true, ()=>false);\n    const isDocker = await dockerPromise;\n    const { KUBERNETES_SERVICE_HOST = \"\" } = process.env;\n    const isKubernetes = KUBERNETES_SERVICE_HOST.length > 0 ? true : false;\n    if (isDocker) containerMetadata.runtime = \"docker\";\n    if (isKubernetes) containerMetadata.orchestrator = \"kubernetes\";\n    return containerMetadata;\n}\n/**\n * @internal\n * Re-add each metadata value.\n * Attempt to add new env container metadata, but keep old data if it does not fit.\n */ async function addContainerMetadata(originalMetadata) {\n    const containerMetadata = await getContainerMetadata();\n    if (Object.keys(containerMetadata).length === 0) return originalMetadata;\n    const extendedMetadata = new LimitedSizeDocument(512);\n    const extendedEnvMetadata = {\n        ...originalMetadata?.env,\n        container: containerMetadata\n    };\n    for (const [key, val] of Object.entries(originalMetadata)){\n        if (key !== \"env\") {\n            extendedMetadata.ifItFitsItSits(key, val);\n        } else {\n            if (!extendedMetadata.ifItFitsItSits(\"env\", extendedEnvMetadata)) {\n                // add in old data if newer / extended metadata does not fit\n                extendedMetadata.ifItFitsItSits(\"env\", val);\n            }\n        }\n    }\n    if (!(\"env\" in originalMetadata)) {\n        extendedMetadata.ifItFitsItSits(\"env\", extendedEnvMetadata);\n    }\n    return extendedMetadata.toObject();\n}\nexports.addContainerMetadata = addContainerMetadata;\n/**\n * Collects FaaS metadata.\n * - `name` MUST be the last key in the Map returned.\n */ function getFAASEnv() {\n    const { AWS_EXECUTION_ENV = \"\", AWS_LAMBDA_RUNTIME_API = \"\", FUNCTIONS_WORKER_RUNTIME = \"\", K_SERVICE = \"\", FUNCTION_NAME = \"\", VERCEL = \"\", AWS_LAMBDA_FUNCTION_MEMORY_SIZE = \"\", AWS_REGION = \"\", FUNCTION_MEMORY_MB = \"\", FUNCTION_REGION = \"\", FUNCTION_TIMEOUT_SEC = \"\", VERCEL_REGION = \"\" } = process.env;\n    const isAWSFaaS = AWS_EXECUTION_ENV.startsWith(\"AWS_Lambda_\") || AWS_LAMBDA_RUNTIME_API.length > 0;\n    const isAzureFaaS = FUNCTIONS_WORKER_RUNTIME.length > 0;\n    const isGCPFaaS = K_SERVICE.length > 0 || FUNCTION_NAME.length > 0;\n    const isVercelFaaS = VERCEL.length > 0;\n    // Note: order matters, name must always be the last key\n    const faasEnv = new Map();\n    // When isVercelFaaS is true so is isAWSFaaS; Vercel inherits the AWS env\n    if (isVercelFaaS && !(isAzureFaaS || isGCPFaaS)) {\n        if (VERCEL_REGION.length > 0) {\n            faasEnv.set(\"region\", VERCEL_REGION);\n        }\n        faasEnv.set(\"name\", \"vercel\");\n        return faasEnv;\n    }\n    if (isAWSFaaS && !(isAzureFaaS || isGCPFaaS || isVercelFaaS)) {\n        if (AWS_REGION.length > 0) {\n            faasEnv.set(\"region\", AWS_REGION);\n        }\n        if (AWS_LAMBDA_FUNCTION_MEMORY_SIZE.length > 0 && Number.isInteger(+AWS_LAMBDA_FUNCTION_MEMORY_SIZE)) {\n            faasEnv.set(\"memory_mb\", new bson_1.Int32(AWS_LAMBDA_FUNCTION_MEMORY_SIZE));\n        }\n        faasEnv.set(\"name\", \"aws.lambda\");\n        return faasEnv;\n    }\n    if (isAzureFaaS && !(isGCPFaaS || isAWSFaaS || isVercelFaaS)) {\n        faasEnv.set(\"name\", \"azure.func\");\n        return faasEnv;\n    }\n    if (isGCPFaaS && !(isAzureFaaS || isAWSFaaS || isVercelFaaS)) {\n        if (FUNCTION_REGION.length > 0) {\n            faasEnv.set(\"region\", FUNCTION_REGION);\n        }\n        if (FUNCTION_MEMORY_MB.length > 0 && Number.isInteger(+FUNCTION_MEMORY_MB)) {\n            faasEnv.set(\"memory_mb\", new bson_1.Int32(FUNCTION_MEMORY_MB));\n        }\n        if (FUNCTION_TIMEOUT_SEC.length > 0 && Number.isInteger(+FUNCTION_TIMEOUT_SEC)) {\n            faasEnv.set(\"timeout_sec\", new bson_1.Int32(FUNCTION_TIMEOUT_SEC));\n        }\n        faasEnv.set(\"name\", \"gcp.func\");\n        return faasEnv;\n    }\n    return null;\n}\nexports.getFAASEnv = getFAASEnv;\n/**\n * @internal\n * Get current JavaScript runtime platform\n *\n * NOTE: The version information fetching is intentionally written defensively\n * to avoid having a released driver version that becomes incompatible\n * with a future change to these global objects.\n */ function getRuntimeInfo() {\n    if (\"Deno\" in globalThis) {\n        const version = typeof Deno?.version?.deno === \"string\" ? Deno?.version?.deno : \"0.0.0-unknown\";\n        return `Deno v${version}, ${os.endianness()}`;\n    }\n    if (\"Bun\" in globalThis) {\n        const version = typeof Bun?.version === \"string\" ? Bun?.version : \"0.0.0-unknown\";\n        return `Bun v${version}, ${os.endianness()}`;\n    }\n    return `Node.js ${process.version}, ${os.endianness()}`;\n} //# sourceMappingURL=client_metadata.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9oYW5kc2hha2UvY2xpZW50X21ldGFkYXRhLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBR0EsNEJBQTRCLEdBQUdBLDBCQUEwQixHQUFHQSwyQkFBMkIsR0FBRyxLQUFLO0FBQ3BILE1BQU1NLE9BQU9DLG1CQUFPQSxDQUFDLGNBQUk7QUFDekIsTUFBTUMsS0FBS0QsbUJBQU9BLENBQUMsY0FBSTtBQUN2QixNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQyx3QkFBUztBQUNqQyxNQUFNRyxTQUFTSCxtQkFBT0EsQ0FBQyw0REFBWTtBQUNuQyxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQyw4REFBYTtBQUNyQyw4REFBOEQ7QUFDOUQsTUFBTUssc0JBQXNCTCx1R0FBd0M7QUFDcEUsY0FBYyxHQUNkLE1BQU1GO0lBQ0ZTLFlBQVlDLE9BQU8sQ0FBRTtRQUNqQixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLFFBQVEsR0FBRyxJQUFJQztRQUNwQixxQ0FBcUMsR0FDckMsSUFBSSxDQUFDQyxZQUFZLEdBQUc7SUFDeEI7SUFDQSxvRUFBb0UsR0FDcEVDLGVBQWVDLEdBQUcsRUFBRW5CLEtBQUssRUFBRTtRQUN2QiwyRkFBMkY7UUFDM0YsK0RBQStEO1FBQy9ELE1BQU1vQixpQkFBaUJYLE9BQU9ZLElBQUksQ0FBQ0MsU0FBUyxDQUFDLElBQUlOLE1BQU1PLEdBQUcsQ0FBQ0osS0FBS25CLFFBQVF3QixVQUFVLEdBQUc7UUFDckYsSUFBSUosaUJBQWlCLElBQUksQ0FBQ0gsWUFBWSxHQUFHLElBQUksQ0FBQ0gsT0FBTyxFQUFFO1lBQ25ELE9BQU87UUFDWDtRQUNBLElBQUksQ0FBQ0csWUFBWSxJQUFJRztRQUNyQixJQUFJLENBQUNMLFFBQVEsQ0FBQ1EsR0FBRyxDQUFDSixLQUFLbkI7UUFDdkIs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bEUsT0FBTyxDQUFDLEtBQUssRUFBRUEsUUFBUSxFQUFFLEVBQUVMLEdBQUd1RixVQUFVLEdBQUcsQ0FBQztJQUNoRDtJQUNBLE9BQU8sQ0FBQyxRQUFRLEVBQUV0RixRQUFRSSxPQUFPLENBQUMsRUFBRSxFQUFFTCxHQUFHdUYsVUFBVSxHQUFHLENBQUM7QUFDM0QsRUFDQSwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvaGFuZHNoYWtlL2NsaWVudF9tZXRhZGF0YS5qcz85M2YwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRGQUFTRW52ID0gZXhwb3J0cy5hZGRDb250YWluZXJNZXRhZGF0YSA9IGV4cG9ydHMubWFrZUNsaWVudE1ldGFkYXRhID0gZXhwb3J0cy5MaW1pdGVkU2l6ZURvY3VtZW50ID0gdm9pZCAwO1xuY29uc3QgZnNfMSA9IHJlcXVpcmUoXCJmc1wiKTtcbmNvbnN0IG9zID0gcmVxdWlyZShcIm9zXCIpO1xuY29uc3QgcHJvY2VzcyA9IHJlcXVpcmUoXCJwcm9jZXNzXCIpO1xuY29uc3QgYnNvbl8xID0gcmVxdWlyZShcIi4uLy4uL2Jzb25cIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uL2Vycm9yXCIpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXNcbmNvbnN0IE5PREVfRFJJVkVSX1ZFUlNJT04gPSByZXF1aXJlKCcuLi8uLi8uLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgTGltaXRlZFNpemVEb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IobWF4U2l6ZSkge1xuICAgICAgICB0aGlzLm1heFNpemUgPSBtYXhTaXplO1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gbmV3IE1hcCgpO1xuICAgICAgICAvKiogQlNPTiBvdmVyaGVhZDogSW50MzIgKyBOdWxsIGJ5dGUgKi9cbiAgICAgICAgdGhpcy5kb2N1bWVudFNpemUgPSA1O1xuICAgIH1cbiAgICAvKiogT25seSBhZGRzIGtleS92YWx1ZSBpZiB0aGUgYnNvbkJ5dGVMZW5ndGggaXMgbGVzcyB0aGFuIE1BWF9TSVpFICovXG4gICAgaWZJdEZpdHNJdFNpdHMoa2V5LCB2YWx1ZSkge1xuICAgICAgICAvLyBUaGUgQlNPTiBieXRlTGVuZ3RoIG9mIHRoZSBuZXcgZWxlbWVudCBpcyB0aGUgc2FtZSBhcyBzZXJpYWxpemluZyBpdCB0byBpdHMgb3duIGRvY3VtZW50XG4gICAgICAgIC8vIHN1YnRyYWN0aW5nIHRoZSBkb2N1bWVudCBzaXplIGludDMyIGFuZCB0aGUgbnVsbCB0ZXJtaW5hdG9yLlxuICAgICAgICBjb25zdCBuZXdFbGVtZW50U2l6ZSA9IGJzb25fMS5CU09OLnNlcmlhbGl6ZShuZXcgTWFwKCkuc2V0KGtleSwgdmFsdWUpKS5ieXRlTGVuZ3RoIC0gNTtcbiAgICAgICAgaWYgKG5ld0VsZW1lbnRTaXplICsgdGhpcy5kb2N1bWVudFNpemUgPiB0aGlzLm1heFNpemUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRvY3VtZW50U2l6ZSArPSBuZXdFbGVtZW50U2l6ZTtcbiAgICAgICAgdGhpcy5kb2N1bWVudC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0b09iamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIGJzb25fMS5CU09OLmRlc2VyaWFsaXplKGJzb25fMS5CU09OLnNlcmlhbGl6ZSh0aGlzLmRvY3VtZW50KSwge1xuICAgICAgICAgICAgcHJvbW90ZUxvbmdzOiBmYWxzZSxcbiAgICAgICAgICAgIHByb21vdGVCdWZmZXJzOiBmYWxzZSxcbiAgICAgICAgICAgIHByb21vdGVWYWx1ZXM6IGZhbHNlLFxuICAgICAgICAgICAgdXNlQmlnSW50NjQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuTGltaXRlZFNpemVEb2N1bWVudCA9IExpbWl0ZWRTaXplRG9jdW1lbnQ7XG4vKipcbiAqIEZyb20gdGhlIHNwZWNzOlxuICogSW1wbGVtZW50b3JzIFNIT1VMRCBjdW11bGF0aXZlbHkgdXBkYXRlIGZpZWxkcyBpbiB0aGUgZm9sbG93aW5nIG9yZGVyIHVudGlsIHRoZSBkb2N1bWVudCBpcyB1bmRlciB0aGUgc2l6ZSBsaW1pdDpcbiAqIDEuIE9taXQgZmllbGRzIGZyb20gYGVudmAgZXhjZXB0IGBlbnYubmFtZWAuXG4gKiAyLiBPbWl0IGZpZWxkcyBmcm9tIGBvc2AgZXhjZXB0IGBvcy50eXBlYC5cbiAqIDMuIE9taXQgdGhlIGBlbnZgIGRvY3VtZW50IGVudGlyZWx5LlxuICogNC4gVHJ1bmNhdGUgYHBsYXRmb3JtYC4gLS0gc3BlY2lhbCB3ZSBkbyBub3QgdHJ1bmNhdGUgdGhpcyBmaWVsZFxuICovXG5mdW5jdGlvbiBtYWtlQ2xpZW50TWV0YWRhdGEob3B0aW9ucykge1xuICAgIGNvbnN0IG1ldGFkYXRhRG9jdW1lbnQgPSBuZXcgTGltaXRlZFNpemVEb2N1bWVudCg1MTIpO1xuICAgIGNvbnN0IHsgYXBwTmFtZSA9ICcnIH0gPSBvcHRpb25zO1xuICAgIC8vIEFkZCBhcHAgbmFtZSBmaXJzdCwgaXQgbXVzdCBiZSBzZW50XG4gICAgaWYgKGFwcE5hbWUubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBuYW1lID0gQnVmZmVyLmJ5dGVMZW5ndGgoYXBwTmFtZSwgJ3V0ZjgnKSA8PSAxMjhcbiAgICAgICAgICAgID8gb3B0aW9ucy5hcHBOYW1lXG4gICAgICAgICAgICA6IEJ1ZmZlci5mcm9tKGFwcE5hbWUsICd1dGY4Jykuc3ViYXJyYXkoMCwgMTI4KS50b1N0cmluZygndXRmOCcpO1xuICAgICAgICBtZXRhZGF0YURvY3VtZW50LmlmSXRGaXRzSXRTaXRzKCdhcHBsaWNhdGlvbicsIHsgbmFtZSB9KTtcbiAgICB9XG4gICAgY29uc3QgeyBuYW1lID0gJycsIHZlcnNpb24gPSAnJywgcGxhdGZvcm0gPSAnJyB9ID0gb3B0aW9ucy5kcml2ZXJJbmZvO1xuICAgIGNvbnN0IGRyaXZlckluZm8gPSB7XG4gICAgICAgIG5hbWU6IG5hbWUubGVuZ3RoID4gMCA/IGBub2RlanN8JHtuYW1lfWAgOiAnbm9kZWpzJyxcbiAgICAgICAgdmVyc2lvbjogdmVyc2lvbi5sZW5ndGggPiAwID8gYCR7Tk9ERV9EUklWRVJfVkVSU0lPTn18JHt2ZXJzaW9ufWAgOiBOT0RFX0RSSVZFUl9WRVJTSU9OXG4gICAgfTtcbiAgICBpZiAoIW1ldGFkYXRhRG9jdW1lbnQuaWZJdEZpdHNJdFNpdHMoJ2RyaXZlcicsIGRyaXZlckluZm8pKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1VuYWJsZSB0byBpbmNsdWRlIGRyaXZlckluZm8gbmFtZSBhbmQgdmVyc2lvbiwgbWV0YWRhdGEgY2Fubm90IGV4Y2VlZCA1MTIgYnl0ZXMnKTtcbiAgICB9XG4gICAgbGV0IHJ1bnRpbWVJbmZvID0gZ2V0UnVudGltZUluZm8oKTtcbiAgICBpZiAocGxhdGZvcm0ubGVuZ3RoID4gMCkge1xuICAgICAgICBydW50aW1lSW5mbyA9IGAke3J1bnRpbWVJbmZvfXwke3BsYXRmb3JtfWA7XG4gICAgfVxuICAgIGlmICghbWV0YWRhdGFEb2N1bWVudC5pZkl0Rml0c0l0U2l0cygncGxhdGZvcm0nLCBydW50aW1lSW5mbykpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignVW5hYmxlIHRvIGluY2x1ZGUgZHJpdmVySW5mbyBwbGF0Zm9ybSwgbWV0YWRhdGEgY2Fubm90IGV4Y2VlZCA1MTIgYnl0ZXMnKTtcbiAgICB9XG4gICAgLy8gTm90ZTogb3JkZXIgbWF0dGVycywgb3MudHlwZSBpcyBsYXN0IHNvIGl0IHdpbGwgYmUgcmVtb3ZlZCBsYXN0IGlmIHdlJ3JlIGF0IG1heFNpemVcbiAgICBjb25zdCBvc0luZm8gPSBuZXcgTWFwKClcbiAgICAgICAgLnNldCgnbmFtZScsIHByb2Nlc3MucGxhdGZvcm0pXG4gICAgICAgIC5zZXQoJ2FyY2hpdGVjdHVyZScsIHByb2Nlc3MuYXJjaClcbiAgICAgICAgLnNldCgndmVyc2lvbicsIG9zLnJlbGVhc2UoKSlcbiAgICAgICAgLnNldCgndHlwZScsIG9zLnR5cGUoKSk7XG4gICAgaWYgKCFtZXRhZGF0YURvY3VtZW50LmlmSXRGaXRzSXRTaXRzKCdvcycsIG9zSW5mbykpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygb3NJbmZvLmtleXMoKSkge1xuICAgICAgICAgICAgb3NJbmZvLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgaWYgKG9zSW5mby5zaXplID09PSAwKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhRG9jdW1lbnQuaWZJdEZpdHNJdFNpdHMoJ29zJywgb3NJbmZvKSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBmYWFzRW52ID0gZ2V0RkFBU0VudigpO1xuICAgIGlmIChmYWFzRW52ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKCFtZXRhZGF0YURvY3VtZW50LmlmSXRGaXRzSXRTaXRzKCdlbnYnLCBmYWFzRW52KSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZmFhc0Vudi5rZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBmYWFzRW52LmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIGlmIChmYWFzRW52LnNpemUgPT09IDApXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YURvY3VtZW50LmlmSXRGaXRzSXRTaXRzKCdlbnYnLCBmYWFzRW52KSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1ldGFkYXRhRG9jdW1lbnQudG9PYmplY3QoKTtcbn1cbmV4cG9ydHMubWFrZUNsaWVudE1ldGFkYXRhID0gbWFrZUNsaWVudE1ldGFkYXRhO1xubGV0IGRvY2tlclByb21pc2U7XG4vKiogQGludGVybmFsICovXG5hc3luYyBmdW5jdGlvbiBnZXRDb250YWluZXJNZXRhZGF0YSgpIHtcbiAgICBjb25zdCBjb250YWluZXJNZXRhZGF0YSA9IHt9O1xuICAgIGRvY2tlclByb21pc2UgPz89IGZzXzEucHJvbWlzZXMuYWNjZXNzKCcvLmRvY2tlcmVudicpLnRoZW4oKCkgPT4gdHJ1ZSwgKCkgPT4gZmFsc2UpO1xuICAgIGNvbnN0IGlzRG9ja2VyID0gYXdhaXQgZG9ja2VyUHJvbWlzZTtcbiAgICBjb25zdCB7IEtVQkVSTkVURVNfU0VSVklDRV9IT1NUID0gJycgfSA9IHByb2Nlc3MuZW52O1xuICAgIGNvbnN0IGlzS3ViZXJuZXRlcyA9IEtVQkVSTkVURVNfU0VSVklDRV9IT1NULmxlbmd0aCA+IDAgPyB0cnVlIDogZmFsc2U7XG4gICAgaWYgKGlzRG9ja2VyKVxuICAgICAgICBjb250YWluZXJNZXRhZGF0YS5ydW50aW1lID0gJ2RvY2tlcic7XG4gICAgaWYgKGlzS3ViZXJuZXRlcylcbiAgICAgICAgY29udGFpbmVyTWV0YWRhdGEub3JjaGVzdHJhdG9yID0gJ2t1YmVybmV0ZXMnO1xuICAgIHJldHVybiBjb250YWluZXJNZXRhZGF0YTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBSZS1hZGQgZWFjaCBtZXRhZGF0YSB2YWx1ZS5cbiAqIEF0dGVtcHQgdG8gYWRkIG5ldyBlbnYgY29udGFpbmVyIG1ldGFkYXRhLCBidXQga2VlcCBvbGQgZGF0YSBpZiBpdCBkb2VzIG5vdCBmaXQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGFkZENvbnRhaW5lck1ldGFkYXRhKG9yaWdpbmFsTWV0YWRhdGEpIHtcbiAgICBjb25zdCBjb250YWluZXJNZXRhZGF0YSA9IGF3YWl0IGdldENvbnRhaW5lck1ldGFkYXRhKCk7XG4gICAgaWYgKE9iamVjdC5rZXlzKGNvbnRhaW5lck1ldGFkYXRhKS5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBvcmlnaW5hbE1ldGFkYXRhO1xuICAgIGNvbnN0IGV4dGVuZGVkTWV0YWRhdGEgPSBuZXcgTGltaXRlZFNpemVEb2N1bWVudCg1MTIpO1xuICAgIGNvbnN0IGV4dGVuZGVkRW52TWV0YWRhdGEgPSB7IC4uLm9yaWdpbmFsTWV0YWRhdGE/LmVudiwgY29udGFpbmVyOiBjb250YWluZXJNZXRhZGF0YSB9O1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhvcmlnaW5hbE1ldGFkYXRhKSkge1xuICAgICAgICBpZiAoa2V5ICE9PSAnZW52Jykge1xuICAgICAgICAgICAgZXh0ZW5kZWRNZXRhZGF0YS5pZkl0Rml0c0l0U2l0cyhrZXksIHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWV4dGVuZGVkTWV0YWRhdGEuaWZJdEZpdHNJdFNpdHMoJ2VudicsIGV4dGVuZGVkRW52TWV0YWRhdGEpKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkIGluIG9sZCBkYXRhIGlmIG5ld2VyIC8gZXh0ZW5kZWQgbWV0YWRhdGEgZG9lcyBub3QgZml0XG4gICAgICAgICAgICAgICAgZXh0ZW5kZWRNZXRhZGF0YS5pZkl0Rml0c0l0U2l0cygnZW52JywgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoISgnZW52JyBpbiBvcmlnaW5hbE1ldGFkYXRhKSkge1xuICAgICAgICBleHRlbmRlZE1ldGFkYXRhLmlmSXRGaXRzSXRTaXRzKCdlbnYnLCBleHRlbmRlZEVudk1ldGFkYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVuZGVkTWV0YWRhdGEudG9PYmplY3QoKTtcbn1cbmV4cG9ydHMuYWRkQ29udGFpbmVyTWV0YWRhdGEgPSBhZGRDb250YWluZXJNZXRhZGF0YTtcbi8qKlxuICogQ29sbGVjdHMgRmFhUyBtZXRhZGF0YS5cbiAqIC0gYG5hbWVgIE1VU1QgYmUgdGhlIGxhc3Qga2V5IGluIHRoZSBNYXAgcmV0dXJuZWQuXG4gKi9cbmZ1bmN0aW9uIGdldEZBQVNFbnYoKSB7XG4gICAgY29uc3QgeyBBV1NfRVhFQ1VUSU9OX0VOViA9ICcnLCBBV1NfTEFNQkRBX1JVTlRJTUVfQVBJID0gJycsIEZVTkNUSU9OU19XT1JLRVJfUlVOVElNRSA9ICcnLCBLX1NFUlZJQ0UgPSAnJywgRlVOQ1RJT05fTkFNRSA9ICcnLCBWRVJDRUwgPSAnJywgQVdTX0xBTUJEQV9GVU5DVElPTl9NRU1PUllfU0laRSA9ICcnLCBBV1NfUkVHSU9OID0gJycsIEZVTkNUSU9OX01FTU9SWV9NQiA9ICcnLCBGVU5DVElPTl9SRUdJT04gPSAnJywgRlVOQ1RJT05fVElNRU9VVF9TRUMgPSAnJywgVkVSQ0VMX1JFR0lPTiA9ICcnIH0gPSBwcm9jZXNzLmVudjtcbiAgICBjb25zdCBpc0FXU0ZhYVMgPSBBV1NfRVhFQ1VUSU9OX0VOVi5zdGFydHNXaXRoKCdBV1NfTGFtYmRhXycpIHx8IEFXU19MQU1CREFfUlVOVElNRV9BUEkubGVuZ3RoID4gMDtcbiAgICBjb25zdCBpc0F6dXJlRmFhUyA9IEZVTkNUSU9OU19XT1JLRVJfUlVOVElNRS5sZW5ndGggPiAwO1xuICAgIGNvbnN0IGlzR0NQRmFhUyA9IEtfU0VSVklDRS5sZW5ndGggPiAwIHx8IEZVTkNUSU9OX05BTUUubGVuZ3RoID4gMDtcbiAgICBjb25zdCBpc1ZlcmNlbEZhYVMgPSBWRVJDRUwubGVuZ3RoID4gMDtcbiAgICAvLyBOb3RlOiBvcmRlciBtYXR0ZXJzLCBuYW1lIG11c3QgYWx3YXlzIGJlIHRoZSBsYXN0IGtleVxuICAgIGNvbnN0IGZhYXNFbnYgPSBuZXcgTWFwKCk7XG4gICAgLy8gV2hlbiBpc1ZlcmNlbEZhYVMgaXMgdHJ1ZSBzbyBpcyBpc0FXU0ZhYVM7IFZlcmNlbCBpbmhlcml0cyB0aGUgQVdTIGVudlxuICAgIGlmIChpc1ZlcmNlbEZhYVMgJiYgIShpc0F6dXJlRmFhUyB8fCBpc0dDUEZhYVMpKSB7XG4gICAgICAgIGlmIChWRVJDRUxfUkVHSU9OLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZhYXNFbnYuc2V0KCdyZWdpb24nLCBWRVJDRUxfUkVHSU9OKTtcbiAgICAgICAgfVxuICAgICAgICBmYWFzRW52LnNldCgnbmFtZScsICd2ZXJjZWwnKTtcbiAgICAgICAgcmV0dXJuIGZhYXNFbnY7XG4gICAgfVxuICAgIGlmIChpc0FXU0ZhYVMgJiYgIShpc0F6dXJlRmFhUyB8fCBpc0dDUEZhYVMgfHwgaXNWZXJjZWxGYWFTKSkge1xuICAgICAgICBpZiAoQVdTX1JFR0lPTi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmYWFzRW52LnNldCgncmVnaW9uJywgQVdTX1JFR0lPTik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFXU19MQU1CREFfRlVOQ1RJT05fTUVNT1JZX1NJWkUubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgTnVtYmVyLmlzSW50ZWdlcigrQVdTX0xBTUJEQV9GVU5DVElPTl9NRU1PUllfU0laRSkpIHtcbiAgICAgICAgICAgIGZhYXNFbnYuc2V0KCdtZW1vcnlfbWInLCBuZXcgYnNvbl8xLkludDMyKEFXU19MQU1CREFfRlVOQ1RJT05fTUVNT1JZX1NJWkUpKTtcbiAgICAgICAgfVxuICAgICAgICBmYWFzRW52LnNldCgnbmFtZScsICdhd3MubGFtYmRhJyk7XG4gICAgICAgIHJldHVybiBmYWFzRW52O1xuICAgIH1cbiAgICBpZiAoaXNBenVyZUZhYVMgJiYgIShpc0dDUEZhYVMgfHwgaXNBV1NGYWFTIHx8IGlzVmVyY2VsRmFhUykpIHtcbiAgICAgICAgZmFhc0Vudi5zZXQoJ25hbWUnLCAnYXp1cmUuZnVuYycpO1xuICAgICAgICByZXR1cm4gZmFhc0VudjtcbiAgICB9XG4gICAgaWYgKGlzR0NQRmFhUyAmJiAhKGlzQXp1cmVGYWFTIHx8IGlzQVdTRmFhUyB8fCBpc1ZlcmNlbEZhYVMpKSB7XG4gICAgICAgIGlmIChGVU5DVElPTl9SRUdJT04ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZmFhc0Vudi5zZXQoJ3JlZ2lvbicsIEZVTkNUSU9OX1JFR0lPTik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEZVTkNUSU9OX01FTU9SWV9NQi5sZW5ndGggPiAwICYmIE51bWJlci5pc0ludGVnZXIoK0ZVTkNUSU9OX01FTU9SWV9NQikpIHtcbiAgICAgICAgICAgIGZhYXNFbnYuc2V0KCdtZW1vcnlfbWInLCBuZXcgYnNvbl8xLkludDMyKEZVTkNUSU9OX01FTU9SWV9NQikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChGVU5DVElPTl9USU1FT1VUX1NFQy5sZW5ndGggPiAwICYmIE51bWJlci5pc0ludGVnZXIoK0ZVTkNUSU9OX1RJTUVPVVRfU0VDKSkge1xuICAgICAgICAgICAgZmFhc0Vudi5zZXQoJ3RpbWVvdXRfc2VjJywgbmV3IGJzb25fMS5JbnQzMihGVU5DVElPTl9USU1FT1VUX1NFQykpO1xuICAgICAgICB9XG4gICAgICAgIGZhYXNFbnYuc2V0KCduYW1lJywgJ2djcC5mdW5jJyk7XG4gICAgICAgIHJldHVybiBmYWFzRW52O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmV4cG9ydHMuZ2V0RkFBU0VudiA9IGdldEZBQVNFbnY7XG4vKipcbiAqIEBpbnRlcm5hbFxuICogR2V0IGN1cnJlbnQgSmF2YVNjcmlwdCBydW50aW1lIHBsYXRmb3JtXG4gKlxuICogTk9URTogVGhlIHZlcnNpb24gaW5mb3JtYXRpb24gZmV0Y2hpbmcgaXMgaW50ZW50aW9uYWxseSB3cml0dGVuIGRlZmVuc2l2ZWx5XG4gKiB0byBhdm9pZCBoYXZpbmcgYSByZWxlYXNlZCBkcml2ZXIgdmVyc2lvbiB0aGF0IGJlY29tZXMgaW5jb21wYXRpYmxlXG4gKiB3aXRoIGEgZnV0dXJlIGNoYW5nZSB0byB0aGVzZSBnbG9iYWwgb2JqZWN0cy5cbiAqL1xuZnVuY3Rpb24gZ2V0UnVudGltZUluZm8oKSB7XG4gICAgaWYgKCdEZW5vJyBpbiBnbG9iYWxUaGlzKSB7XG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSB0eXBlb2YgRGVubz8udmVyc2lvbj8uZGVubyA9PT0gJ3N0cmluZycgPyBEZW5vPy52ZXJzaW9uPy5kZW5vIDogJzAuMC4wLXVua25vd24nO1xuICAgICAgICByZXR1cm4gYERlbm8gdiR7dmVyc2lvbn0sICR7b3MuZW5kaWFubmVzcygpfWA7XG4gICAgfVxuICAgIGlmICgnQnVuJyBpbiBnbG9iYWxUaGlzKSB7XG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSB0eXBlb2YgQnVuPy52ZXJzaW9uID09PSAnc3RyaW5nJyA/IEJ1bj8udmVyc2lvbiA6ICcwLjAuMC11bmtub3duJztcbiAgICAgICAgcmV0dXJuIGBCdW4gdiR7dmVyc2lvbn0sICR7b3MuZW5kaWFubmVzcygpfWA7XG4gICAgfVxuICAgIHJldHVybiBgTm9kZS5qcyAke3Byb2Nlc3MudmVyc2lvbn0sICR7b3MuZW5kaWFubmVzcygpfWA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnRfbWV0YWRhdGEuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZ2V0RkFBU0VudiIsImFkZENvbnRhaW5lck1ldGFkYXRhIiwibWFrZUNsaWVudE1ldGFkYXRhIiwiTGltaXRlZFNpemVEb2N1bWVudCIsImZzXzEiLCJyZXF1aXJlIiwib3MiLCJwcm9jZXNzIiwiYnNvbl8xIiwiZXJyb3JfMSIsIk5PREVfRFJJVkVSX1ZFUlNJT04iLCJ2ZXJzaW9uIiwiY29uc3RydWN0b3IiLCJtYXhTaXplIiwiZG9jdW1lbnQiLCJNYXAiLCJkb2N1bWVudFNpemUiLCJpZkl0Rml0c0l0U2l0cyIsImtleSIsIm5ld0VsZW1lbnRTaXplIiwiQlNPTiIsInNlcmlhbGl6ZSIsInNldCIsImJ5dGVMZW5ndGgiLCJ0b09iamVjdCIsImRlc2VyaWFsaXplIiwicHJvbW90ZUxvbmdzIiwicHJvbW90ZUJ1ZmZlcnMiLCJwcm9tb3RlVmFsdWVzIiwidXNlQmlnSW50NjQiLCJvcHRpb25zIiwibWV0YWRhdGFEb2N1bWVudCIsImFwcE5hbWUiLCJsZW5ndGgiLCJuYW1lIiwiQnVmZmVyIiwiZnJvbSIsInN1YmFycmF5IiwidG9TdHJpbmciLCJwbGF0Zm9ybSIsImRyaXZlckluZm8iLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwicnVudGltZUluZm8iLCJnZXRSdW50aW1lSW5mbyIsIm9zSW5mbyIsImFyY2giLCJyZWxlYXNlIiwidHlwZSIsImtleXMiLCJkZWxldGUiLCJzaXplIiwiZmFhc0VudiIsImRvY2tlclByb21pc2UiLCJnZXRDb250YWluZXJNZXRhZGF0YSIsImNvbnRhaW5lck1ldGFkYXRhIiwicHJvbWlzZXMiLCJhY2Nlc3MiLCJ0aGVuIiwiaXNEb2NrZXIiLCJLVUJFUk5FVEVTX1NFUlZJQ0VfSE9TVCIsImVudiIsImlzS3ViZXJuZXRlcyIsInJ1bnRpbWUiLCJvcmNoZXN0cmF0b3IiLCJvcmlnaW5hbE1ldGFkYXRhIiwiZXh0ZW5kZWRNZXRhZGF0YSIsImV4dGVuZGVkRW52TWV0YWRhdGEiLCJjb250YWluZXIiLCJ2YWwiLCJlbnRyaWVzIiwiQVdTX0VYRUNVVElPTl9FTlYiLCJBV1NfTEFNQkRBX1JVTlRJTUVfQVBJIiwiRlVOQ1RJT05TX1dPUktFUl9SVU5USU1FIiwiS19TRVJWSUNFIiwiRlVOQ1RJT05fTkFNRSIsIlZFUkNFTCIsIkFXU19MQU1CREFfRlVOQ1RJT05fTUVNT1JZX1NJWkUiLCJBV1NfUkVHSU9OIiwiRlVOQ1RJT05fTUVNT1JZX01CIiwiRlVOQ1RJT05fUkVHSU9OIiwiRlVOQ1RJT05fVElNRU9VVF9TRUMiLCJWRVJDRUxfUkVHSU9OIiwiaXNBV1NGYWFTIiwic3RhcnRzV2l0aCIsImlzQXp1cmVGYWFTIiwiaXNHQ1BGYWFTIiwiaXNWZXJjZWxGYWFTIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiSW50MzIiLCJnbG9iYWxUaGlzIiwiRGVubyIsImRlbm8iLCJlbmRpYW5uZXNzIiwiQnVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/handshake/client_metadata.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/metrics.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/metrics.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ConnectionPoolMetrics = void 0;\n/** @internal */ class ConnectionPoolMetrics {\n    constructor(){\n        this.txnConnections = 0;\n        this.cursorConnections = 0;\n        this.otherConnections = 0;\n    }\n    /**\n     * Mark a connection as pinned for a specific operation.\n     */ markPinned(pinType) {\n        if (pinType === ConnectionPoolMetrics.TXN) {\n            this.txnConnections += 1;\n        } else if (pinType === ConnectionPoolMetrics.CURSOR) {\n            this.cursorConnections += 1;\n        } else {\n            this.otherConnections += 1;\n        }\n    }\n    /**\n     * Unmark a connection as pinned for an operation.\n     */ markUnpinned(pinType) {\n        if (pinType === ConnectionPoolMetrics.TXN) {\n            this.txnConnections -= 1;\n        } else if (pinType === ConnectionPoolMetrics.CURSOR) {\n            this.cursorConnections -= 1;\n        } else {\n            this.otherConnections -= 1;\n        }\n    }\n    /**\n     * Return information about the cmap metrics as a string.\n     */ info(maxPoolSize) {\n        return \"Timed out while checking out a connection from connection pool: \" + `maxPoolSize: ${maxPoolSize}, ` + `connections in use by cursors: ${this.cursorConnections}, ` + `connections in use by transactions: ${this.txnConnections}, ` + `connections in use by other operations: ${this.otherConnections}`;\n    }\n    /**\n     * Reset the metrics to the initial values.\n     */ reset() {\n        this.txnConnections = 0;\n        this.cursorConnections = 0;\n        this.otherConnections = 0;\n    }\n}\nConnectionPoolMetrics.TXN = \"txn\";\nConnectionPoolMetrics.CURSOR = \"cursor\";\nConnectionPoolMetrics.OTHER = \"other\";\nexports.ConnectionPoolMetrics = ConnectionPoolMetrics; //# sourceMappingURL=metrics.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9tZXRyaWNzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw2QkFBNkIsR0FBRyxLQUFLO0FBQ3JDLGNBQWMsR0FDZCxNQUFNRTtJQUNGQyxhQUFjO1FBQ1YsSUFBSSxDQUFDQyxjQUFjLEdBQUc7UUFDdEIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRztRQUN6QixJQUFJLENBQUNDLGdCQUFnQixHQUFHO0lBQzVCO0lBQ0E7O0tBRUMsR0FDREMsV0FBV0MsT0FBTyxFQUFFO1FBQ2hCLElBQUlBLFlBQVlOLHNCQUFzQk8sR0FBRyxFQUFFO1lBQ3ZDLElBQUksQ0FBQ0wsY0FBYyxJQUFJO1FBQzNCLE9BQ0ssSUFBSUksWUFBWU4sc0JBQXNCUSxNQUFNLEVBQUU7WUFDL0MsSUFBSSxDQUFDTCxpQkFBaUIsSUFBSTtRQUM5QixPQUNLO1lBQ0QsSUFBSSxDQUFDQyxnQkFBZ0IsSUFBSTtRQUM3QjtJQUNKO0lBQ0E7O0tBRUMsR0FDREssYUFBYUgsT0FBTyxFQUFFO1FBQ2xCLElBQUlBLFlBQVlOLHNCQUFzQk8sR0FBRyxFQUFFO1lBQ3ZDLElBQUksQ0FBQ0wsY0FBYyxJQUFJO1FBQzNCLE9BQ0ssSUFBSUksWUFBWU4sc0JBQXNCUSxNQUFNLEVBQUU7WUFDL0MsSUFBSSxDQUFDTCxpQkFBaUIsSUFBSTtRQUM5QixPQUNLO1lBQ0QsSUFBSSxDQUFDQyxnQkFBZ0IsSUFBSTtRQUM3QjtJQUNKO0lBQ0E7O0tBRUMsR0FDRE0sS0FBS0MsV0FBVyxFQUFFO1FBQ2QsT0FBUSxxRUFDSixDQUFDLGFBQWEsRUFBRUEsWUFBWSxFQUFFLENBQUMsR0FDL0IsQ0FBQywrQkFBK0IsRUFBRSxJQUFJLENBQUNSLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxHQUM1RCxDQUFDLG9DQUFvQyxFQUFFLElBQUksQ0FBQ0QsY0FBYyxDQUFDLEVBQUUsQ0FBQyxHQUM5RCxDQUFDLHdDQUF3QyxFQUFFLElBQUksQ0FBQ0UsZ0JBQWdCLENBQUMsQ0FBQztJQUMxRTtJQUNBOztLQUVDLEdBQ0RRLFFBQVE7UUFDSixJQUFJLENBQUNWLGNBQWMsR0FBRztRQUN0QixJQUFJLENBQUNDLGlCQUFpQixHQUFHO1FBQ3pCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUc7SUFDNUI7QUFDSjtBQUNBSixzQkFBc0JPLEdBQUcsR0FBRztBQUM1QlAsc0JBQXNCUSxNQUFNLEdBQUc7QUFDL0JSLHNCQUFzQmEsS0FBSyxHQUFHO0FBQzlCZiw2QkFBNkIsR0FBR0UsdUJBQ2hDLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9tZXRyaWNzLmpzP2ExNDUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbm5lY3Rpb25Qb29sTWV0cmljcyA9IHZvaWQgMDtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENvbm5lY3Rpb25Qb29sTWV0cmljcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudHhuQ29ubmVjdGlvbnMgPSAwO1xuICAgICAgICB0aGlzLmN1cnNvckNvbm5lY3Rpb25zID0gMDtcbiAgICAgICAgdGhpcy5vdGhlckNvbm5lY3Rpb25zID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFyayBhIGNvbm5lY3Rpb24gYXMgcGlubmVkIGZvciBhIHNwZWNpZmljIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBtYXJrUGlubmVkKHBpblR5cGUpIHtcbiAgICAgICAgaWYgKHBpblR5cGUgPT09IENvbm5lY3Rpb25Qb29sTWV0cmljcy5UWE4pIHtcbiAgICAgICAgICAgIHRoaXMudHhuQ29ubmVjdGlvbnMgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwaW5UeXBlID09PSBDb25uZWN0aW9uUG9vbE1ldHJpY3MuQ1VSU09SKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnNvckNvbm5lY3Rpb25zICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm90aGVyQ29ubmVjdGlvbnMgKz0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbm1hcmsgYSBjb25uZWN0aW9uIGFzIHBpbm5lZCBmb3IgYW4gb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIG1hcmtVbnBpbm5lZChwaW5UeXBlKSB7XG4gICAgICAgIGlmIChwaW5UeXBlID09PSBDb25uZWN0aW9uUG9vbE1ldHJpY3MuVFhOKSB7XG4gICAgICAgICAgICB0aGlzLnR4bkNvbm5lY3Rpb25zIC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGluVHlwZSA9PT0gQ29ubmVjdGlvblBvb2xNZXRyaWNzLkNVUlNPUikge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3JDb25uZWN0aW9ucyAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vdGhlckNvbm5lY3Rpb25zIC09IDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjbWFwIG1ldHJpY3MgYXMgYSBzdHJpbmcuXG4gICAgICovXG4gICAgaW5mbyhtYXhQb29sU2l6ZSkge1xuICAgICAgICByZXR1cm4gKCdUaW1lZCBvdXQgd2hpbGUgY2hlY2tpbmcgb3V0IGEgY29ubmVjdGlvbiBmcm9tIGNvbm5lY3Rpb24gcG9vbDogJyArXG4gICAgICAgICAgICBgbWF4UG9vbFNpemU6ICR7bWF4UG9vbFNpemV9LCBgICtcbiAgICAgICAgICAgIGBjb25uZWN0aW9ucyBpbiB1c2UgYnkgY3Vyc29yczogJHt0aGlzLmN1cnNvckNvbm5lY3Rpb25zfSwgYCArXG4gICAgICAgICAgICBgY29ubmVjdGlvbnMgaW4gdXNlIGJ5IHRyYW5zYWN0aW9uczogJHt0aGlzLnR4bkNvbm5lY3Rpb25zfSwgYCArXG4gICAgICAgICAgICBgY29ubmVjdGlvbnMgaW4gdXNlIGJ5IG90aGVyIG9wZXJhdGlvbnM6ICR7dGhpcy5vdGhlckNvbm5lY3Rpb25zfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgbWV0cmljcyB0byB0aGUgaW5pdGlhbCB2YWx1ZXMuXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMudHhuQ29ubmVjdGlvbnMgPSAwO1xuICAgICAgICB0aGlzLmN1cnNvckNvbm5lY3Rpb25zID0gMDtcbiAgICAgICAgdGhpcy5vdGhlckNvbm5lY3Rpb25zID0gMDtcbiAgICB9XG59XG5Db25uZWN0aW9uUG9vbE1ldHJpY3MuVFhOID0gJ3R4bic7XG5Db25uZWN0aW9uUG9vbE1ldHJpY3MuQ1VSU09SID0gJ2N1cnNvcic7XG5Db25uZWN0aW9uUG9vbE1ldHJpY3MuT1RIRVIgPSAnb3RoZXInO1xuZXhwb3J0cy5Db25uZWN0aW9uUG9vbE1ldHJpY3MgPSBDb25uZWN0aW9uUG9vbE1ldHJpY3M7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRyaWNzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNvbm5lY3Rpb25Qb29sTWV0cmljcyIsImNvbnN0cnVjdG9yIiwidHhuQ29ubmVjdGlvbnMiLCJjdXJzb3JDb25uZWN0aW9ucyIsIm90aGVyQ29ubmVjdGlvbnMiLCJtYXJrUGlubmVkIiwicGluVHlwZSIsIlRYTiIsIkNVUlNPUiIsIm1hcmtVbnBpbm5lZCIsImluZm8iLCJtYXhQb29sU2l6ZSIsInJlc2V0IiwiT1RIRVIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/metrics.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/stream_description.js":
/*!*************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/stream_description.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.StreamDescription = void 0;\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst common_1 = __webpack_require__(/*! ../sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst server_description_1 = __webpack_require__(/*! ../sdam/server_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\");\nconst RESPONSE_FIELDS = [\n    \"minWireVersion\",\n    \"maxWireVersion\",\n    \"maxBsonObjectSize\",\n    \"maxMessageSizeBytes\",\n    \"maxWriteBatchSize\",\n    \"logicalSessionTimeoutMinutes\"\n];\n/** @public */ class StreamDescription {\n    constructor(address, options){\n        this.hello = null;\n        this.address = address;\n        this.type = common_1.ServerType.Unknown;\n        this.minWireVersion = undefined;\n        this.maxWireVersion = undefined;\n        this.maxBsonObjectSize = 16777216;\n        this.maxMessageSizeBytes = 48000000;\n        this.maxWriteBatchSize = 100000;\n        this.logicalSessionTimeoutMinutes = options?.logicalSessionTimeoutMinutes;\n        this.loadBalanced = !!options?.loadBalanced;\n        this.compressors = options && options.compressors && Array.isArray(options.compressors) ? options.compressors : [];\n        this.serverConnectionId = null;\n    }\n    receiveResponse(response) {\n        if (response == null) {\n            return;\n        }\n        this.hello = response;\n        this.type = (0, server_description_1.parseServerType)(response);\n        if (\"connectionId\" in response) {\n            this.serverConnectionId = this.parseServerConnectionID(response.connectionId);\n        } else {\n            this.serverConnectionId = null;\n        }\n        for (const field of RESPONSE_FIELDS){\n            if (response[field] != null) {\n                this[field] = response[field];\n            }\n            // testing case\n            if (\"__nodejs_mock_server__\" in response) {\n                this.__nodejs_mock_server__ = response[\"__nodejs_mock_server__\"];\n            }\n        }\n        if (response.compression) {\n            this.compressor = this.compressors.filter((c)=>response.compression?.includes(c))[0];\n        }\n    }\n    /* @internal */ parseServerConnectionID(serverConnectionId) {\n        // Connection ids are always integral, so it's safe to coerce doubles as well as\n        // any integral type.\n        return bson_1.Long.isLong(serverConnectionId) ? serverConnectionId.toBigInt() : BigInt(serverConnectionId);\n    }\n}\nexports.StreamDescription = StreamDescription; //# sourceMappingURL=stream_description.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC9zdHJlYW1fZGVzY3JpcHRpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHLEtBQUs7QUFDakMsTUFBTUcsU0FBU0MsbUJBQU9BLENBQUMseURBQVM7QUFDaEMsTUFBTUMsV0FBV0QsbUJBQU9BLENBQUMsdUVBQWdCO0FBQ3pDLE1BQU1FLHVCQUF1QkYsbUJBQU9BLENBQUMsK0ZBQTRCO0FBQ2pFLE1BQU1HLGtCQUFrQjtJQUNwQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDSDtBQUNELFlBQVksR0FDWixNQUFNTDtJQUNGTSxZQUFZQyxPQUFPLEVBQUVDLE9BQU8sQ0FBRTtRQUMxQixJQUFJLENBQUNDLEtBQUssR0FBRztRQUNiLElBQUksQ0FBQ0YsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0csSUFBSSxHQUFHUCxTQUFTUSxVQUFVLENBQUNDLE9BQU87UUFDdkMsSUFBSSxDQUFDQyxjQUFjLEdBQUdDO1FBQ3RCLElBQUksQ0FBQ0MsY0FBYyxHQUFHRDtRQUN0QixJQUFJLENBQUNFLGlCQUFpQixHQUFHO1FBQ3pCLElBQUksQ0FBQ0MsbUJBQW1CLEdBQUc7UUFDM0IsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRztRQUN6QixJQUFJLENBQUNDLDRCQUE0QixHQUFHWCxTQUFTVztRQUM3QyxJQUFJLENBQUNDLFlBQVksR0FBRyxDQUFDLENBQUNaLFNBQVNZO1FBQy9CLElBQUksQ0FBQ0MsV0FBVyxHQUNaYixXQUFXQSxRQUFRYSxXQUFXLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ2YsUUFBUWEsV0FBVyxJQUM3RGIsUUFBUWEsV0FBVyxHQUNuQixFQUFFO1FBQ1osSUFBSSxDQUFDRyxrQkFBa0IsR0FBRztJQUM5QjtJQUNBQyxnQkFBZ0JDLFFBQVEsRUFBRTtRQUN0QixJQUFJQSxZQUFZLE1BQU07WUFDbEI7UUFDSjtRQUNBLElBQUksQ0FBQ2pCLEtBQUssR0FBR2lCO1FBQ2IsSUFBSSxDQUFDaEIsSUFBSSxHQUFHLENBQUMsR0FBR04scUJBQXFCdUIsZUFBZSxFQUFFRDtRQUN0RCxJQUFJLGtCQUFrQkEsVUFBVTtZQUM1QixJQUFJLENBQUNGLGtCQUFrQixHQUFHLElBQUksQ0FBQ0ksdUJBQXVCLENBQUNGLFNBQVNHLFlBQVk7UUFDaEYsT0FDSztZQUNELElBQUksQ0FBQ0wsa0JBQWtCLEdBQUc7UUFDOUI7UUFDQSxLQUFLLE1BQU1NLFNBQVN6QixnQkFBaUI7WUFDakMsSUFBSXFCLFFBQVEsQ0FBQ0ksTUFBTSxJQUFJLE1BQU07Z0JBQ3pCLElBQUksQ0FBQ0EsTUFBTSxHQUFHSixRQUFRLENBQUNJLE1BQU07WUFDakM7WUFDQSxlQUFlO1lBQ2YsSUFBSSw0QkFBNEJKLFVBQVU7Z0JBQ3RDLElBQUksQ0FBQ0ssc0JBQXNCLEdBQUdMLFFBQVEsQ0FBQyx5QkFBeUI7WUFDcEU7UUFDSjtRQUNBLElBQUlBLFNBQVNNLFdBQVcsRUFBRTtZQUN0QixJQUFJLENBQUNDLFVBQVUsR0FBRyxJQUFJLENBQUNaLFdBQVcsQ0FBQ2EsTUFBTSxDQUFDQyxDQUFBQSxJQUFLVCxTQUFTTSxXQUFXLEVBQUVJLFNBQVNELEdBQUcsQ0FBQyxFQUFFO1FBQ3hGO0lBQ0o7SUFDQSxhQUFhLEdBQ2JQLHdCQUF3Qkosa0JBQWtCLEVBQUU7UUFDeEMsZ0ZBQWdGO1FBQ2hGLHFCQUFxQjtRQUNyQixPQUFPdkIsT0FBT29DLElBQUksQ0FBQ0MsTUFBTSxDQUFDZCxzQkFDcEJBLG1CQUFtQmUsUUFBUSxLQUV6QkMsT0FBT2hCO0lBQ25CO0FBQ0o7QUFDQTFCLHlCQUF5QixHQUFHRSxtQkFDNUIsOENBQThDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL3N0cmVhbV9kZXNjcmlwdGlvbi5qcz9iMjFjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TdHJlYW1EZXNjcmlwdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuLi9ic29uXCIpO1xuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi4vc2RhbS9jb21tb25cIik7XG5jb25zdCBzZXJ2ZXJfZGVzY3JpcHRpb25fMSA9IHJlcXVpcmUoXCIuLi9zZGFtL3NlcnZlcl9kZXNjcmlwdGlvblwiKTtcbmNvbnN0IFJFU1BPTlNFX0ZJRUxEUyA9IFtcbiAgICAnbWluV2lyZVZlcnNpb24nLFxuICAgICdtYXhXaXJlVmVyc2lvbicsXG4gICAgJ21heEJzb25PYmplY3RTaXplJyxcbiAgICAnbWF4TWVzc2FnZVNpemVCeXRlcycsXG4gICAgJ21heFdyaXRlQmF0Y2hTaXplJyxcbiAgICAnbG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcydcbl07XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgU3RyZWFtRGVzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGFkZHJlc3MsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5oZWxsbyA9IG51bGw7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMudHlwZSA9IGNvbW1vbl8xLlNlcnZlclR5cGUuVW5rbm93bjtcbiAgICAgICAgdGhpcy5taW5XaXJlVmVyc2lvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5tYXhXaXJlVmVyc2lvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5tYXhCc29uT2JqZWN0U2l6ZSA9IDE2Nzc3MjE2O1xuICAgICAgICB0aGlzLm1heE1lc3NhZ2VTaXplQnl0ZXMgPSA0ODAwMDAwMDtcbiAgICAgICAgdGhpcy5tYXhXcml0ZUJhdGNoU2l6ZSA9IDEwMDAwMDtcbiAgICAgICAgdGhpcy5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzID0gb3B0aW9ucz8ubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcztcbiAgICAgICAgdGhpcy5sb2FkQmFsYW5jZWQgPSAhIW9wdGlvbnM/LmxvYWRCYWxhbmNlZDtcbiAgICAgICAgdGhpcy5jb21wcmVzc29ycyA9XG4gICAgICAgICAgICBvcHRpb25zICYmIG9wdGlvbnMuY29tcHJlc3NvcnMgJiYgQXJyYXkuaXNBcnJheShvcHRpb25zLmNvbXByZXNzb3JzKVxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb21wcmVzc29yc1xuICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgIHRoaXMuc2VydmVyQ29ubmVjdGlvbklkID0gbnVsbDtcbiAgICB9XG4gICAgcmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oZWxsbyA9IHJlc3BvbnNlO1xuICAgICAgICB0aGlzLnR5cGUgPSAoMCwgc2VydmVyX2Rlc2NyaXB0aW9uXzEucGFyc2VTZXJ2ZXJUeXBlKShyZXNwb25zZSk7XG4gICAgICAgIGlmICgnY29ubmVjdGlvbklkJyBpbiByZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZXJ2ZXJDb25uZWN0aW9uSWQgPSB0aGlzLnBhcnNlU2VydmVyQ29ubmVjdGlvbklEKHJlc3BvbnNlLmNvbm5lY3Rpb25JZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZlckNvbm5lY3Rpb25JZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBSRVNQT05TRV9GSUVMRFMpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZVtmaWVsZF0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXNbZmllbGRdID0gcmVzcG9uc2VbZmllbGRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGVzdGluZyBjYXNlXG4gICAgICAgICAgICBpZiAoJ19fbm9kZWpzX21vY2tfc2VydmVyX18nIGluIHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX25vZGVqc19tb2NrX3NlcnZlcl9fID0gcmVzcG9uc2VbJ19fbm9kZWpzX21vY2tfc2VydmVyX18nXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzcG9uc2UuY29tcHJlc3Npb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHJlc3NvciA9IHRoaXMuY29tcHJlc3NvcnMuZmlsdGVyKGMgPT4gcmVzcG9uc2UuY29tcHJlc3Npb24/LmluY2x1ZGVzKGMpKVswXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBAaW50ZXJuYWwgKi9cbiAgICBwYXJzZVNlcnZlckNvbm5lY3Rpb25JRChzZXJ2ZXJDb25uZWN0aW9uSWQpIHtcbiAgICAgICAgLy8gQ29ubmVjdGlvbiBpZHMgYXJlIGFsd2F5cyBpbnRlZ3JhbCwgc28gaXQncyBzYWZlIHRvIGNvZXJjZSBkb3VibGVzIGFzIHdlbGwgYXNcbiAgICAgICAgLy8gYW55IGludGVncmFsIHR5cGUuXG4gICAgICAgIHJldHVybiBic29uXzEuTG9uZy5pc0xvbmcoc2VydmVyQ29ubmVjdGlvbklkKVxuICAgICAgICAgICAgPyBzZXJ2ZXJDb25uZWN0aW9uSWQudG9CaWdJbnQoKVxuICAgICAgICAgICAgOiAvLyBAdHMtZXhwZWN0LWVycm9yOiBEb3VibGVzIGFyZSBjb2VyY2libGUgdG8gbnVtYmVyXG4gICAgICAgICAgICAgICAgQmlnSW50KHNlcnZlckNvbm5lY3Rpb25JZCk7XG4gICAgfVxufVxuZXhwb3J0cy5TdHJlYW1EZXNjcmlwdGlvbiA9IFN0cmVhbURlc2NyaXB0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyZWFtX2Rlc2NyaXB0aW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlN0cmVhbURlc2NyaXB0aW9uIiwiYnNvbl8xIiwicmVxdWlyZSIsImNvbW1vbl8xIiwic2VydmVyX2Rlc2NyaXB0aW9uXzEiLCJSRVNQT05TRV9GSUVMRFMiLCJjb25zdHJ1Y3RvciIsImFkZHJlc3MiLCJvcHRpb25zIiwiaGVsbG8iLCJ0eXBlIiwiU2VydmVyVHlwZSIsIlVua25vd24iLCJtaW5XaXJlVmVyc2lvbiIsInVuZGVmaW5lZCIsIm1heFdpcmVWZXJzaW9uIiwibWF4QnNvbk9iamVjdFNpemUiLCJtYXhNZXNzYWdlU2l6ZUJ5dGVzIiwibWF4V3JpdGVCYXRjaFNpemUiLCJsb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzIiwibG9hZEJhbGFuY2VkIiwiY29tcHJlc3NvcnMiLCJBcnJheSIsImlzQXJyYXkiLCJzZXJ2ZXJDb25uZWN0aW9uSWQiLCJyZWNlaXZlUmVzcG9uc2UiLCJyZXNwb25zZSIsInBhcnNlU2VydmVyVHlwZSIsInBhcnNlU2VydmVyQ29ubmVjdGlvbklEIiwiY29ubmVjdGlvbklkIiwiZmllbGQiLCJfX25vZGVqc19tb2NrX3NlcnZlcl9fIiwiY29tcHJlc3Npb24iLCJjb21wcmVzc29yIiwiZmlsdGVyIiwiYyIsImluY2x1ZGVzIiwiTG9uZyIsImlzTG9uZyIsInRvQmlnSW50IiwiQmlnSW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/stream_description.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/wire_protocol/compression.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.decompressResponse = exports.compressCommand = exports.decompress = exports.compress = exports.uncompressibleCommands = exports.Compressor = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst zlib = __webpack_require__(/*! zlib */ \"zlib\");\nconst constants_1 = __webpack_require__(/*! ../../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst deps_1 = __webpack_require__(/*! ../../deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst commands_1 = __webpack_require__(/*! ../commands */ \"(ssr)/./node_modules/mongodb/lib/cmap/commands.js\");\nconst constants_2 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\n/** @public */ exports.Compressor = Object.freeze({\n    none: 0,\n    snappy: 1,\n    zlib: 2,\n    zstd: 3\n});\nexports.uncompressibleCommands = new Set([\n    constants_1.LEGACY_HELLO_COMMAND,\n    \"saslStart\",\n    \"saslContinue\",\n    \"getnonce\",\n    \"authenticate\",\n    \"createUser\",\n    \"updateUser\",\n    \"copydbSaslStart\",\n    \"copydbgetnonce\",\n    \"copydb\"\n]);\nconst ZSTD_COMPRESSION_LEVEL = 3;\nconst zlibInflate = (0, util_1.promisify)(zlib.inflate.bind(zlib));\nconst zlibDeflate = (0, util_1.promisify)(zlib.deflate.bind(zlib));\nlet zstd;\nlet Snappy = null;\nfunction loadSnappy() {\n    if (Snappy == null) {\n        const snappyImport = (0, deps_1.getSnappy)();\n        if (\"kModuleError\" in snappyImport) {\n            throw snappyImport.kModuleError;\n        }\n        Snappy = snappyImport;\n    }\n    return Snappy;\n}\n// Facilitate compressing a message using an agreed compressor\nasync function compress(options, dataToBeCompressed) {\n    const zlibOptions = {};\n    switch(options.agreedCompressor){\n        case \"snappy\":\n            {\n                Snappy ??= loadSnappy();\n                return Snappy.compress(dataToBeCompressed);\n            }\n        case \"zstd\":\n            {\n                loadZstd();\n                if (\"kModuleError\" in zstd) {\n                    throw zstd[\"kModuleError\"];\n                }\n                return zstd.compress(dataToBeCompressed, ZSTD_COMPRESSION_LEVEL);\n            }\n        case \"zlib\":\n            {\n                if (options.zlibCompressionLevel) {\n                    zlibOptions.level = options.zlibCompressionLevel;\n                }\n                return zlibDeflate(dataToBeCompressed, zlibOptions);\n            }\n        default:\n            {\n                throw new error_1.MongoInvalidArgumentError(`Unknown compressor ${options.agreedCompressor} failed to compress`);\n            }\n    }\n}\nexports.compress = compress;\n// Decompress a message using the given compressor\nasync function decompress(compressorID, compressedData) {\n    if (compressorID !== exports.Compressor.snappy && compressorID !== exports.Compressor.zstd && compressorID !== exports.Compressor.zlib && compressorID !== exports.Compressor.none) {\n        throw new error_1.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${compressorID})`);\n    }\n    switch(compressorID){\n        case exports.Compressor.snappy:\n            {\n                Snappy ??= loadSnappy();\n                return Snappy.uncompress(compressedData, {\n                    asBuffer: true\n                });\n            }\n        case exports.Compressor.zstd:\n            {\n                loadZstd();\n                if (\"kModuleError\" in zstd) {\n                    throw zstd[\"kModuleError\"];\n                }\n                return zstd.decompress(compressedData);\n            }\n        case exports.Compressor.zlib:\n            {\n                return zlibInflate(compressedData);\n            }\n        default:\n            {\n                return compressedData;\n            }\n    }\n}\nexports.decompress = decompress;\n/**\n * Load ZStandard if it is not already set.\n */ function loadZstd() {\n    if (!zstd) {\n        zstd = (0, deps_1.getZstdLibrary)();\n    }\n}\nconst MESSAGE_HEADER_SIZE = 16;\n/**\n * @internal\n *\n * Compresses an OP_MSG or OP_QUERY message, if compression is configured.  This method\n * also serializes the command to BSON.\n */ async function compressCommand(command, description) {\n    const finalCommand = description.agreedCompressor === \"none\" || !commands_1.OpCompressedRequest.canCompress(command) ? command : new commands_1.OpCompressedRequest(command, {\n        agreedCompressor: description.agreedCompressor ?? \"none\",\n        zlibCompressionLevel: description.zlibCompressionLevel ?? 0\n    });\n    const data = await finalCommand.toBin();\n    return Buffer.concat(data);\n}\nexports.compressCommand = compressCommand;\n/**\n * @internal\n *\n * Decompresses an OP_MSG or OP_QUERY response from the server, if compression is configured.\n *\n * This method does not parse the response's BSON.\n */ async function decompressResponse(message) {\n    const messageHeader = {\n        length: message.readInt32LE(0),\n        requestId: message.readInt32LE(4),\n        responseTo: message.readInt32LE(8),\n        opCode: message.readInt32LE(12)\n    };\n    if (messageHeader.opCode !== constants_2.OP_COMPRESSED) {\n        const ResponseType = messageHeader.opCode === constants_2.OP_MSG ? commands_1.OpMsgResponse : commands_1.OpQueryResponse;\n        const messageBody = message.subarray(MESSAGE_HEADER_SIZE);\n        return new ResponseType(message, messageHeader, messageBody);\n    }\n    const header = {\n        ...messageHeader,\n        fromCompressed: true,\n        opCode: message.readInt32LE(MESSAGE_HEADER_SIZE),\n        length: message.readInt32LE(MESSAGE_HEADER_SIZE + 4)\n    };\n    const compressorID = message[MESSAGE_HEADER_SIZE + 8];\n    const compressedBuffer = message.slice(MESSAGE_HEADER_SIZE + 9);\n    // recalculate based on wrapped opcode\n    const ResponseType = header.opCode === constants_2.OP_MSG ? commands_1.OpMsgResponse : commands_1.OpQueryResponse;\n    const messageBody = await decompress(compressorID, compressedBuffer);\n    if (messageBody.length !== header.length) {\n        throw new error_1.MongoDecompressionError(\"Message body and message header must be the same length\");\n    }\n    return new ResponseType(message, header, messageBody);\n}\nexports.decompressResponse = decompressResponse; //# sourceMappingURL=compression.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL2NvbXByZXNzaW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBR0EsdUJBQXVCLEdBQUdBLGtCQUFrQixHQUFHQSxnQkFBZ0IsR0FBR0EsOEJBQThCLEdBQUdBLGtCQUFrQixHQUFHLEtBQUs7QUFDMUosTUFBTVEsU0FBU0MsbUJBQU9BLENBQUMsa0JBQU07QUFDN0IsTUFBTUMsT0FBT0QsbUJBQU9BLENBQUMsa0JBQU07QUFDM0IsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsc0VBQWlCO0FBQzdDLE1BQU1HLFNBQVNILG1CQUFPQSxDQUFDLDREQUFZO0FBQ25DLE1BQU1JLFVBQVVKLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1LLGFBQWFMLG1CQUFPQSxDQUFDLHNFQUFhO0FBQ3hDLE1BQU1NLGNBQWNOLG1CQUFPQSxDQUFDLHFGQUFhO0FBQ3pDLFlBQVksR0FDWlQsa0JBQWtCLEdBQUdGLE9BQU9rQixNQUFNLENBQUM7SUFDL0JDLE1BQU07SUFDTkMsUUFBUTtJQUNSUixNQUFNO0lBQ05TLE1BQU07QUFDVjtBQUNBbkIsOEJBQThCLEdBQUcsSUFBSW9CLElBQUk7SUFDckNULFlBQVlVLG9CQUFvQjtJQUNoQztJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDSDtBQUNELE1BQU1DLHlCQUF5QjtBQUMvQixNQUFNQyxjQUFjLENBQUMsR0FBR2YsT0FBT2dCLFNBQVMsRUFBRWQsS0FBS2UsT0FBTyxDQUFDQyxJQUFJLENBQUNoQjtBQUM1RCxNQUFNaUIsY0FBYyxDQUFDLEdBQUduQixPQUFPZ0IsU0FBUyxFQUFFZCxLQUFLa0IsT0FBTyxDQUFDRixJQUFJLENBQUNoQjtBQUM1RCxJQUFJUztBQUNKLElBQUlVLFNBQVM7QUFDYixTQUFTQztJQUNMLElBQUlELFVBQVUsTUFBTTtRQUNoQixNQUFNRSxlQUFlLENBQUMsR0FBR25CLE9BQU9vQixTQUFTO1FBQ3pDLElBQUksa0JBQWtCRCxjQUFjO1lBQ2hDLE1BQU1BLGFBQWFFLFlBQVk7UUFDbkM7UUFDQUosU0FBU0U7SUFDYjtJQUNBLE9BQU9GO0FBQ1g7QUFDQSw4REFBOEQ7QUFDOUQsZUFBZXhCLFNBQVM2QixPQUFPLEVBQUVDLGtCQUFrQjtJQUMvQyxNQUFNQyxjQUFjLENBQUM7SUFDckIsT0FBUUYsUUFBUUcsZ0JBQWdCO1FBQzVCLEtBQUs7WUFBVTtnQkFDWFIsV0FBV0M7Z0JBQ1gsT0FBT0QsT0FBT3hCLFFBQVEsQ0FBQzhCO1lBQzNCO1FBQ0EsS0FBSztZQUFRO2dCQUNURztnQkFDQSxJQUFJLGtCQUFrQm5CLE1BQU07b0JBQ3hCLE1BQU1BLElBQUksQ0FBQyxlQUFlO2dCQUM5QjtnQkFDQSxPQUFPQSxLQUFLZCxRQUFRLENBQUM4QixvQkFBb0JiO1lBQzdDO1FBQ0EsS0FBSztZQUFRO2dCQUNULElBQUlZLFFBQVFLLG9CQUFvQixFQUFFO29CQUM5QkgsWUFBWUksS0FBSyxHQUFHTixRQUFRSyxvQkFBb0I7Z0JBQ3BEO2dCQUNBLE9BQU9aLFlBQVlRLG9CQUFvQkM7WUFDM0M7UUFDQTtZQUFTO2dCQUNMLE1BQU0sSUFBSXZCLFFBQVE0Qix5QkFBeUIsQ0FBQyxDQUFDLG1CQUFtQixFQUFFUCxRQUFRRyxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQztZQUNuSDtJQUNKO0FBQ0o7QUFDQXJDLGdCQUFnQixHQUFHSztBQUNuQixrREFBa0Q7QUFDbEQsZUFBZUQsV0FBV3NDLFlBQVksRUFBRUMsY0FBYztJQUNsRCxJQUFJRCxpQkFBaUIxQyxRQUFRTyxVQUFVLENBQUNXLE1BQU0sSUFDMUN3QixpQkFBaUIxQyxRQUFRTyxVQUFVLENBQUNZLElBQUksSUFDeEN1QixpQkFBaUIxQyxRQUFRTyxVQUFVLENBQUNHLElBQUksSUFDeENnQyxpQkFBaUIxQyxRQUFRTyxVQUFVLENBQUNVLElBQUksRUFBRTtRQUMxQyxNQUFNLElBQUlKLFFBQVErQix1QkFBdUIsQ0FBQyxDQUFDLHdGQUF3RixFQUFFRixhQUFhLENBQUMsQ0FBQztJQUN4SjtJQUNBLE9BQVFBO1FBQ0osS0FBSzFDLFFBQVFPLFVBQVUsQ0FBQ1csTUFBTTtZQUFFO2dCQUM1QlcsV0FBV0M7Z0JBQ1gsT0FBT0QsT0FBT2dCLFVBQVUsQ0FBQ0YsZ0JBQWdCO29CQUFFRyxVQUFVO2dCQUFLO1lBQzlEO1FBQ0EsS0FBSzlDLFFBQVFPLFVBQVUsQ0FBQ1ksSUFBSTtZQUFFO2dCQUMxQm1CO2dCQUNBLElBQUksa0JBQWtCbkIsTUFBTTtvQkFDeEIsTUFBTUEsSUFBSSxDQUFDLGVBQWU7Z0JBQzlCO2dCQUNBLE9BQU9BLEtBQUtmLFVBQVUsQ0FBQ3VDO1lBQzNCO1FBQ0EsS0FBSzNDLFFBQVFPLFVBQVUsQ0FBQ0csSUFBSTtZQUFFO2dCQUMxQixPQUFPYSxZQUFZb0I7WUFDdkI7UUFDQTtZQUFTO2dCQUNMLE9BQU9BO1lBQ1g7SUFDSjtBQUNKO0FBQ0EzQyxrQkFBa0IsR0FBR0k7QUFDckI7O0NBRUMsR0FDRCxTQUFTa0M7SUFDTCxJQUFJLENBQUNuQixNQUFNO1FBQ1BBLE9BQU8sQ0FBQyxHQUFHUCxPQUFPbUMsY0FBYztJQUNwQztBQUNKO0FBQ0EsTUFBTUMsc0JBQXNCO0FBQzVCOzs7OztDQUtDLEdBQ0QsZUFBZTdDLGdCQUFnQjhDLE9BQU8sRUFBRUMsV0FBVztJQUMvQyxNQUFNQyxlQUFlRCxZQUFZYixnQkFBZ0IsS0FBSyxVQUFVLENBQUN2QixXQUFXc0MsbUJBQW1CLENBQUNDLFdBQVcsQ0FBQ0osV0FDdEdBLFVBQ0EsSUFBSW5DLFdBQVdzQyxtQkFBbUIsQ0FBQ0gsU0FBUztRQUMxQ1osa0JBQWtCYSxZQUFZYixnQkFBZ0IsSUFBSTtRQUNsREUsc0JBQXNCVyxZQUFZWCxvQkFBb0IsSUFBSTtJQUM5RDtJQUNKLE1BQU1lLE9BQU8sTUFBTUgsYUFBYUksS0FBSztJQUNyQyxPQUFPQyxPQUFPQyxNQUFNLENBQUNIO0FBQ3pCO0FBQ0F0RCx1QkFBdUIsR0FBR0c7QUFDMUI7Ozs7OztDQU1DLEdBQ0QsZUFBZUQsbUJBQW1Cd0QsT0FBTztJQUNyQyxNQUFNQyxnQkFBZ0I7UUFDbEJDLFFBQVFGLFFBQVFHLFdBQVcsQ0FBQztRQUM1QkMsV0FBV0osUUFBUUcsV0FBVyxDQUFDO1FBQy9CRSxZQUFZTCxRQUFRRyxXQUFXLENBQUM7UUFDaENHLFFBQVFOLFFBQVFHLFdBQVcsQ0FBQztJQUNoQztJQUNBLElBQUlGLGNBQWNLLE1BQU0sS0FBS2pELFlBQVlrRCxhQUFhLEVBQUU7UUFDcEQsTUFBTUMsZUFBZVAsY0FBY0ssTUFBTSxLQUFLakQsWUFBWW9ELE1BQU0sR0FBR3JELFdBQVdzRCxhQUFhLEdBQUd0RCxXQUFXdUQsZUFBZTtRQUN4SCxNQUFNQyxjQUFjWixRQUFRYSxRQUFRLENBQUN2QjtRQUNyQyxPQUFPLElBQUlrQixhQUFhUixTQUFTQyxlQUFlVztJQUNwRDtJQUNBLE1BQU1FLFNBQVM7UUFDWCxHQUFHYixhQUFhO1FBQ2hCYyxnQkFBZ0I7UUFDaEJULFFBQVFOLFFBQVFHLFdBQVcsQ0FBQ2I7UUFDNUJZLFFBQVFGLFFBQVFHLFdBQVcsQ0FBQ2Isc0JBQXNCO0lBQ3REO0lBQ0EsTUFBTU4sZUFBZWdCLE9BQU8sQ0FBQ1Ysc0JBQXNCLEVBQUU7SUFDckQsTUFBTTBCLG1CQUFtQmhCLFFBQVFpQixLQUFLLENBQUMzQixzQkFBc0I7SUFDN0Qsc0NBQXNDO0lBQ3RDLE1BQU1rQixlQUFlTSxPQUFPUixNQUFNLEtBQUtqRCxZQUFZb0QsTUFBTSxHQUFHckQsV0FBV3NELGFBQWEsR0FBR3RELFdBQVd1RCxlQUFlO0lBQ2pILE1BQU1DLGNBQWMsTUFBTWxFLFdBQVdzQyxjQUFjZ0M7SUFDbkQsSUFBSUosWUFBWVYsTUFBTSxLQUFLWSxPQUFPWixNQUFNLEVBQUU7UUFDdEMsTUFBTSxJQUFJL0MsUUFBUStCLHVCQUF1QixDQUFDO0lBQzlDO0lBQ0EsT0FBTyxJQUFJc0IsYUFBYVIsU0FBU2MsUUFBUUY7QUFDN0M7QUFDQXRFLDBCQUEwQixHQUFHRSxvQkFDN0IsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jbWFwL3dpcmVfcHJvdG9jb2wvY29tcHJlc3Npb24uanM/OWJjNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVjb21wcmVzc1Jlc3BvbnNlID0gZXhwb3J0cy5jb21wcmVzc0NvbW1hbmQgPSBleHBvcnRzLmRlY29tcHJlc3MgPSBleHBvcnRzLmNvbXByZXNzID0gZXhwb3J0cy51bmNvbXByZXNzaWJsZUNvbW1hbmRzID0gZXhwb3J0cy5Db21wcmVzc29yID0gdm9pZCAwO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCB6bGliID0gcmVxdWlyZShcInpsaWJcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jb25zdGFudHNcIik7XG5jb25zdCBkZXBzXzEgPSByZXF1aXJlKFwiLi4vLi4vZGVwc1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vLi4vZXJyb3JcIik7XG5jb25zdCBjb21tYW5kc18xID0gcmVxdWlyZShcIi4uL2NvbW1hbmRzXCIpO1xuY29uc3QgY29uc3RhbnRzXzIgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5Db21wcmVzc29yID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbm9uZTogMCxcbiAgICBzbmFwcHk6IDEsXG4gICAgemxpYjogMixcbiAgICB6c3RkOiAzXG59KTtcbmV4cG9ydHMudW5jb21wcmVzc2libGVDb21tYW5kcyA9IG5ldyBTZXQoW1xuICAgIGNvbnN0YW50c18xLkxFR0FDWV9IRUxMT19DT01NQU5ELFxuICAgICdzYXNsU3RhcnQnLFxuICAgICdzYXNsQ29udGludWUnLFxuICAgICdnZXRub25jZScsXG4gICAgJ2F1dGhlbnRpY2F0ZScsXG4gICAgJ2NyZWF0ZVVzZXInLFxuICAgICd1cGRhdGVVc2VyJyxcbiAgICAnY29weWRiU2FzbFN0YXJ0JyxcbiAgICAnY29weWRiZ2V0bm9uY2UnLFxuICAgICdjb3B5ZGInXG5dKTtcbmNvbnN0IFpTVERfQ09NUFJFU1NJT05fTEVWRUwgPSAzO1xuY29uc3QgemxpYkluZmxhdGUgPSAoMCwgdXRpbF8xLnByb21pc2lmeSkoemxpYi5pbmZsYXRlLmJpbmQoemxpYikpO1xuY29uc3QgemxpYkRlZmxhdGUgPSAoMCwgdXRpbF8xLnByb21pc2lmeSkoemxpYi5kZWZsYXRlLmJpbmQoemxpYikpO1xubGV0IHpzdGQ7XG5sZXQgU25hcHB5ID0gbnVsbDtcbmZ1bmN0aW9uIGxvYWRTbmFwcHkoKSB7XG4gICAgaWYgKFNuYXBweSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHNuYXBweUltcG9ydCA9ICgwLCBkZXBzXzEuZ2V0U25hcHB5KSgpO1xuICAgICAgICBpZiAoJ2tNb2R1bGVFcnJvcicgaW4gc25hcHB5SW1wb3J0KSB7XG4gICAgICAgICAgICB0aHJvdyBzbmFwcHlJbXBvcnQua01vZHVsZUVycm9yO1xuICAgICAgICB9XG4gICAgICAgIFNuYXBweSA9IHNuYXBweUltcG9ydDtcbiAgICB9XG4gICAgcmV0dXJuIFNuYXBweTtcbn1cbi8vIEZhY2lsaXRhdGUgY29tcHJlc3NpbmcgYSBtZXNzYWdlIHVzaW5nIGFuIGFncmVlZCBjb21wcmVzc29yXG5hc3luYyBmdW5jdGlvbiBjb21wcmVzcyhvcHRpb25zLCBkYXRhVG9CZUNvbXByZXNzZWQpIHtcbiAgICBjb25zdCB6bGliT3B0aW9ucyA9IHt9O1xuICAgIHN3aXRjaCAob3B0aW9ucy5hZ3JlZWRDb21wcmVzc29yKSB7XG4gICAgICAgIGNhc2UgJ3NuYXBweSc6IHtcbiAgICAgICAgICAgIFNuYXBweSA/Pz0gbG9hZFNuYXBweSgpO1xuICAgICAgICAgICAgcmV0dXJuIFNuYXBweS5jb21wcmVzcyhkYXRhVG9CZUNvbXByZXNzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3pzdGQnOiB7XG4gICAgICAgICAgICBsb2FkWnN0ZCgpO1xuICAgICAgICAgICAgaWYgKCdrTW9kdWxlRXJyb3InIGluIHpzdGQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyB6c3RkWydrTW9kdWxlRXJyb3InXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB6c3RkLmNvbXByZXNzKGRhdGFUb0JlQ29tcHJlc3NlZCwgWlNURF9DT01QUkVTU0lPTl9MRVZFTCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnemxpYic6IHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnpsaWJDb21wcmVzc2lvbkxldmVsKSB7XG4gICAgICAgICAgICAgICAgemxpYk9wdGlvbnMubGV2ZWwgPSBvcHRpb25zLnpsaWJDb21wcmVzc2lvbkxldmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHpsaWJEZWZsYXRlKGRhdGFUb0JlQ29tcHJlc3NlZCwgemxpYk9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYFVua25vd24gY29tcHJlc3NvciAke29wdGlvbnMuYWdyZWVkQ29tcHJlc3Nvcn0gZmFpbGVkIHRvIGNvbXByZXNzYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLmNvbXByZXNzID0gY29tcHJlc3M7XG4vLyBEZWNvbXByZXNzIGEgbWVzc2FnZSB1c2luZyB0aGUgZ2l2ZW4gY29tcHJlc3NvclxuYXN5bmMgZnVuY3Rpb24gZGVjb21wcmVzcyhjb21wcmVzc29ySUQsIGNvbXByZXNzZWREYXRhKSB7XG4gICAgaWYgKGNvbXByZXNzb3JJRCAhPT0gZXhwb3J0cy5Db21wcmVzc29yLnNuYXBweSAmJlxuICAgICAgICBjb21wcmVzc29ySUQgIT09IGV4cG9ydHMuQ29tcHJlc3Nvci56c3RkICYmXG4gICAgICAgIGNvbXByZXNzb3JJRCAhPT0gZXhwb3J0cy5Db21wcmVzc29yLnpsaWIgJiZcbiAgICAgICAgY29tcHJlc3NvcklEICE9PSBleHBvcnRzLkNvbXByZXNzb3Iubm9uZSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0RlY29tcHJlc3Npb25FcnJvcihgU2VydmVyIHNlbnQgbWVzc2FnZSBjb21wcmVzc2VkIHVzaW5nIGFuIHVuc3VwcG9ydGVkIGNvbXByZXNzb3IuIChSZWNlaXZlZCBjb21wcmVzc29yIElEICR7Y29tcHJlc3NvcklEfSlgKTtcbiAgICB9XG4gICAgc3dpdGNoIChjb21wcmVzc29ySUQpIHtcbiAgICAgICAgY2FzZSBleHBvcnRzLkNvbXByZXNzb3Iuc25hcHB5OiB7XG4gICAgICAgICAgICBTbmFwcHkgPz89IGxvYWRTbmFwcHkoKTtcbiAgICAgICAgICAgIHJldHVybiBTbmFwcHkudW5jb21wcmVzcyhjb21wcmVzc2VkRGF0YSwgeyBhc0J1ZmZlcjogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIGV4cG9ydHMuQ29tcHJlc3Nvci56c3RkOiB7XG4gICAgICAgICAgICBsb2FkWnN0ZCgpO1xuICAgICAgICAgICAgaWYgKCdrTW9kdWxlRXJyb3InIGluIHpzdGQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyB6c3RkWydrTW9kdWxlRXJyb3InXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB6c3RkLmRlY29tcHJlc3MoY29tcHJlc3NlZERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgZXhwb3J0cy5Db21wcmVzc29yLnpsaWI6IHtcbiAgICAgICAgICAgIHJldHVybiB6bGliSW5mbGF0ZShjb21wcmVzc2VkRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXByZXNzZWREYXRhO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5kZWNvbXByZXNzID0gZGVjb21wcmVzcztcbi8qKlxuICogTG9hZCBaU3RhbmRhcmQgaWYgaXQgaXMgbm90IGFscmVhZHkgc2V0LlxuICovXG5mdW5jdGlvbiBsb2FkWnN0ZCgpIHtcbiAgICBpZiAoIXpzdGQpIHtcbiAgICAgICAgenN0ZCA9ICgwLCBkZXBzXzEuZ2V0WnN0ZExpYnJhcnkpKCk7XG4gICAgfVxufVxuY29uc3QgTUVTU0FHRV9IRUFERVJfU0laRSA9IDE2O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBDb21wcmVzc2VzIGFuIE9QX01TRyBvciBPUF9RVUVSWSBtZXNzYWdlLCBpZiBjb21wcmVzc2lvbiBpcyBjb25maWd1cmVkLiAgVGhpcyBtZXRob2RcbiAqIGFsc28gc2VyaWFsaXplcyB0aGUgY29tbWFuZCB0byBCU09OLlxuICovXG5hc3luYyBmdW5jdGlvbiBjb21wcmVzc0NvbW1hbmQoY29tbWFuZCwgZGVzY3JpcHRpb24pIHtcbiAgICBjb25zdCBmaW5hbENvbW1hbmQgPSBkZXNjcmlwdGlvbi5hZ3JlZWRDb21wcmVzc29yID09PSAnbm9uZScgfHwgIWNvbW1hbmRzXzEuT3BDb21wcmVzc2VkUmVxdWVzdC5jYW5Db21wcmVzcyhjb21tYW5kKVxuICAgICAgICA/IGNvbW1hbmRcbiAgICAgICAgOiBuZXcgY29tbWFuZHNfMS5PcENvbXByZXNzZWRSZXF1ZXN0KGNvbW1hbmQsIHtcbiAgICAgICAgICAgIGFncmVlZENvbXByZXNzb3I6IGRlc2NyaXB0aW9uLmFncmVlZENvbXByZXNzb3IgPz8gJ25vbmUnLFxuICAgICAgICAgICAgemxpYkNvbXByZXNzaW9uTGV2ZWw6IGRlc2NyaXB0aW9uLnpsaWJDb21wcmVzc2lvbkxldmVsID8/IDBcbiAgICAgICAgfSk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGZpbmFsQ29tbWFuZC50b0JpbigpO1xuICAgIHJldHVybiBCdWZmZXIuY29uY2F0KGRhdGEpO1xufVxuZXhwb3J0cy5jb21wcmVzc0NvbW1hbmQgPSBjb21wcmVzc0NvbW1hbmQ7XG4vKipcbiAqIEBpbnRlcm5hbFxuICpcbiAqIERlY29tcHJlc3NlcyBhbiBPUF9NU0cgb3IgT1BfUVVFUlkgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyLCBpZiBjb21wcmVzc2lvbiBpcyBjb25maWd1cmVkLlxuICpcbiAqIFRoaXMgbWV0aG9kIGRvZXMgbm90IHBhcnNlIHRoZSByZXNwb25zZSdzIEJTT04uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRlY29tcHJlc3NSZXNwb25zZShtZXNzYWdlKSB7XG4gICAgY29uc3QgbWVzc2FnZUhlYWRlciA9IHtcbiAgICAgICAgbGVuZ3RoOiBtZXNzYWdlLnJlYWRJbnQzMkxFKDApLFxuICAgICAgICByZXF1ZXN0SWQ6IG1lc3NhZ2UucmVhZEludDMyTEUoNCksXG4gICAgICAgIHJlc3BvbnNlVG86IG1lc3NhZ2UucmVhZEludDMyTEUoOCksXG4gICAgICAgIG9wQ29kZTogbWVzc2FnZS5yZWFkSW50MzJMRSgxMilcbiAgICB9O1xuICAgIGlmIChtZXNzYWdlSGVhZGVyLm9wQ29kZSAhPT0gY29uc3RhbnRzXzIuT1BfQ09NUFJFU1NFRCkge1xuICAgICAgICBjb25zdCBSZXNwb25zZVR5cGUgPSBtZXNzYWdlSGVhZGVyLm9wQ29kZSA9PT0gY29uc3RhbnRzXzIuT1BfTVNHID8gY29tbWFuZHNfMS5PcE1zZ1Jlc3BvbnNlIDogY29tbWFuZHNfMS5PcFF1ZXJ5UmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VCb2R5ID0gbWVzc2FnZS5zdWJhcnJheShNRVNTQUdFX0hFQURFUl9TSVpFKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZVR5cGUobWVzc2FnZSwgbWVzc2FnZUhlYWRlciwgbWVzc2FnZUJvZHkpO1xuICAgIH1cbiAgICBjb25zdCBoZWFkZXIgPSB7XG4gICAgICAgIC4uLm1lc3NhZ2VIZWFkZXIsXG4gICAgICAgIGZyb21Db21wcmVzc2VkOiB0cnVlLFxuICAgICAgICBvcENvZGU6IG1lc3NhZ2UucmVhZEludDMyTEUoTUVTU0FHRV9IRUFERVJfU0laRSksXG4gICAgICAgIGxlbmd0aDogbWVzc2FnZS5yZWFkSW50MzJMRShNRVNTQUdFX0hFQURFUl9TSVpFICsgNClcbiAgICB9O1xuICAgIGNvbnN0IGNvbXByZXNzb3JJRCA9IG1lc3NhZ2VbTUVTU0FHRV9IRUFERVJfU0laRSArIDhdO1xuICAgIGNvbnN0IGNvbXByZXNzZWRCdWZmZXIgPSBtZXNzYWdlLnNsaWNlKE1FU1NBR0VfSEVBREVSX1NJWkUgKyA5KTtcbiAgICAvLyByZWNhbGN1bGF0ZSBiYXNlZCBvbiB3cmFwcGVkIG9wY29kZVxuICAgIGNvbnN0IFJlc3BvbnNlVHlwZSA9IGhlYWRlci5vcENvZGUgPT09IGNvbnN0YW50c18yLk9QX01TRyA/IGNvbW1hbmRzXzEuT3BNc2dSZXNwb25zZSA6IGNvbW1hbmRzXzEuT3BRdWVyeVJlc3BvbnNlO1xuICAgIGNvbnN0IG1lc3NhZ2VCb2R5ID0gYXdhaXQgZGVjb21wcmVzcyhjb21wcmVzc29ySUQsIGNvbXByZXNzZWRCdWZmZXIpO1xuICAgIGlmIChtZXNzYWdlQm9keS5sZW5ndGggIT09IGhlYWRlci5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29EZWNvbXByZXNzaW9uRXJyb3IoJ01lc3NhZ2UgYm9keSBhbmQgbWVzc2FnZSBoZWFkZXIgbXVzdCBiZSB0aGUgc2FtZSBsZW5ndGgnKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZVR5cGUobWVzc2FnZSwgaGVhZGVyLCBtZXNzYWdlQm9keSk7XG59XG5leHBvcnRzLmRlY29tcHJlc3NSZXNwb25zZSA9IGRlY29tcHJlc3NSZXNwb25zZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbXByZXNzaW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlY29tcHJlc3NSZXNwb25zZSIsImNvbXByZXNzQ29tbWFuZCIsImRlY29tcHJlc3MiLCJjb21wcmVzcyIsInVuY29tcHJlc3NpYmxlQ29tbWFuZHMiLCJDb21wcmVzc29yIiwidXRpbF8xIiwicmVxdWlyZSIsInpsaWIiLCJjb25zdGFudHNfMSIsImRlcHNfMSIsImVycm9yXzEiLCJjb21tYW5kc18xIiwiY29uc3RhbnRzXzIiLCJmcmVlemUiLCJub25lIiwic25hcHB5IiwienN0ZCIsIlNldCIsIkxFR0FDWV9IRUxMT19DT01NQU5EIiwiWlNURF9DT01QUkVTU0lPTl9MRVZFTCIsInpsaWJJbmZsYXRlIiwicHJvbWlzaWZ5IiwiaW5mbGF0ZSIsImJpbmQiLCJ6bGliRGVmbGF0ZSIsImRlZmxhdGUiLCJTbmFwcHkiLCJsb2FkU25hcHB5Iiwic25hcHB5SW1wb3J0IiwiZ2V0U25hcHB5Iiwia01vZHVsZUVycm9yIiwib3B0aW9ucyIsImRhdGFUb0JlQ29tcHJlc3NlZCIsInpsaWJPcHRpb25zIiwiYWdyZWVkQ29tcHJlc3NvciIsImxvYWRac3RkIiwiemxpYkNvbXByZXNzaW9uTGV2ZWwiLCJsZXZlbCIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJjb21wcmVzc29ySUQiLCJjb21wcmVzc2VkRGF0YSIsIk1vbmdvRGVjb21wcmVzc2lvbkVycm9yIiwidW5jb21wcmVzcyIsImFzQnVmZmVyIiwiZ2V0WnN0ZExpYnJhcnkiLCJNRVNTQUdFX0hFQURFUl9TSVpFIiwiY29tbWFuZCIsImRlc2NyaXB0aW9uIiwiZmluYWxDb21tYW5kIiwiT3BDb21wcmVzc2VkUmVxdWVzdCIsImNhbkNvbXByZXNzIiwiZGF0YSIsInRvQmluIiwiQnVmZmVyIiwiY29uY2F0IiwibWVzc2FnZSIsIm1lc3NhZ2VIZWFkZXIiLCJsZW5ndGgiLCJyZWFkSW50MzJMRSIsInJlcXVlc3RJZCIsInJlc3BvbnNlVG8iLCJvcENvZGUiLCJPUF9DT01QUkVTU0VEIiwiUmVzcG9uc2VUeXBlIiwiT1BfTVNHIiwiT3BNc2dSZXNwb25zZSIsIk9wUXVlcnlSZXNwb25zZSIsIm1lc3NhZ2VCb2R5Iiwic3ViYXJyYXkiLCJoZWFkZXIiLCJmcm9tQ29tcHJlc3NlZCIsImNvbXByZXNzZWRCdWZmZXIiLCJzbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/wire_protocol/constants.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.OP_MSG = exports.OP_COMPRESSED = exports.OP_DELETE = exports.OP_QUERY = exports.OP_INSERT = exports.OP_UPDATE = exports.OP_REPLY = exports.MIN_SUPPORTED_QE_SERVER_VERSION = exports.MIN_SUPPORTED_QE_WIRE_VERSION = exports.MAX_SUPPORTED_WIRE_VERSION = exports.MIN_SUPPORTED_WIRE_VERSION = exports.MAX_SUPPORTED_SERVER_VERSION = exports.MIN_SUPPORTED_SERVER_VERSION = void 0;\nexports.MIN_SUPPORTED_SERVER_VERSION = \"3.6\";\nexports.MAX_SUPPORTED_SERVER_VERSION = \"7.0\";\nexports.MIN_SUPPORTED_WIRE_VERSION = 6;\nexports.MAX_SUPPORTED_WIRE_VERSION = 21;\nexports.MIN_SUPPORTED_QE_WIRE_VERSION = 21;\nexports.MIN_SUPPORTED_QE_SERVER_VERSION = \"7.0\";\nexports.OP_REPLY = 1;\nexports.OP_UPDATE = 2001;\nexports.OP_INSERT = 2002;\nexports.OP_QUERY = 2004;\nexports.OP_DELETE = 2006;\nexports.OP_COMPRESSED = 2012;\nexports.OP_MSG = 2013; //# sourceMappingURL=constants.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsY0FBYyxHQUFHQSxxQkFBcUIsR0FBR0EsaUJBQWlCLEdBQUdBLGdCQUFnQixHQUFHQSxpQkFBaUIsR0FBR0EsaUJBQWlCLEdBQUdBLGdCQUFnQixHQUFHQSx1Q0FBdUMsR0FBR0EscUNBQXFDLEdBQUdBLGtDQUFrQyxHQUFHQSxrQ0FBa0MsR0FBR0Esb0NBQW9DLEdBQUdBLG9DQUFvQyxHQUFHLEtBQUs7QUFDMVhBLG9DQUFvQyxHQUFHO0FBQ3ZDQSxvQ0FBb0MsR0FBRztBQUN2Q0Esa0NBQWtDLEdBQUc7QUFDckNBLGtDQUFrQyxHQUFHO0FBQ3JDQSxxQ0FBcUMsR0FBRztBQUN4Q0EsdUNBQXVDLEdBQUc7QUFDMUNBLGdCQUFnQixHQUFHO0FBQ25CQSxpQkFBaUIsR0FBRztBQUNwQkEsaUJBQWlCLEdBQUc7QUFDcEJBLGdCQUFnQixHQUFHO0FBQ25CQSxpQkFBaUIsR0FBRztBQUNwQkEscUJBQXFCLEdBQUc7QUFDeEJBLGNBQWMsR0FBRyxNQUNqQixxQ0FBcUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NtYXAvd2lyZV9wcm90b2NvbC9jb25zdGFudHMuanM/Yjg5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuT1BfTVNHID0gZXhwb3J0cy5PUF9DT01QUkVTU0VEID0gZXhwb3J0cy5PUF9ERUxFVEUgPSBleHBvcnRzLk9QX1FVRVJZID0gZXhwb3J0cy5PUF9JTlNFUlQgPSBleHBvcnRzLk9QX1VQREFURSA9IGV4cG9ydHMuT1BfUkVQTFkgPSBleHBvcnRzLk1JTl9TVVBQT1JURURfUUVfU0VSVkVSX1ZFUlNJT04gPSBleHBvcnRzLk1JTl9TVVBQT1JURURfUUVfV0lSRV9WRVJTSU9OID0gZXhwb3J0cy5NQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTiA9IGV4cG9ydHMuTUlOX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04gPSBleHBvcnRzLk1BWF9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04gPSBleHBvcnRzLk1JTl9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04gPSB2b2lkIDA7XG5leHBvcnRzLk1JTl9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04gPSAnMy42JztcbmV4cG9ydHMuTUFYX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTiA9ICc3LjAnO1xuZXhwb3J0cy5NSU5fU1VQUE9SVEVEX1dJUkVfVkVSU0lPTiA9IDY7XG5leHBvcnRzLk1BWF9TVVBQT1JURURfV0lSRV9WRVJTSU9OID0gMjE7XG5leHBvcnRzLk1JTl9TVVBQT1JURURfUUVfV0lSRV9WRVJTSU9OID0gMjE7XG5leHBvcnRzLk1JTl9TVVBQT1JURURfUUVfU0VSVkVSX1ZFUlNJT04gPSAnNy4wJztcbmV4cG9ydHMuT1BfUkVQTFkgPSAxO1xuZXhwb3J0cy5PUF9VUERBVEUgPSAyMDAxO1xuZXhwb3J0cy5PUF9JTlNFUlQgPSAyMDAyO1xuZXhwb3J0cy5PUF9RVUVSWSA9IDIwMDQ7XG5leHBvcnRzLk9QX0RFTEVURSA9IDIwMDY7XG5leHBvcnRzLk9QX0NPTVBSRVNTRUQgPSAyMDEyO1xuZXhwb3J0cy5PUF9NU0cgPSAyMDEzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk9QX01TRyIsIk9QX0NPTVBSRVNTRUQiLCJPUF9ERUxFVEUiLCJPUF9RVUVSWSIsIk9QX0lOU0VSVCIsIk9QX1VQREFURSIsIk9QX1JFUExZIiwiTUlOX1NVUFBPUlRFRF9RRV9TRVJWRVJfVkVSU0lPTiIsIk1JTl9TVVBQT1JURURfUUVfV0lSRV9WRVJTSU9OIiwiTUFYX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04iLCJNSU5fU1VQUE9SVEVEX1dJUkVfVkVSU0lPTiIsIk1BWF9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04iLCJNSU5fU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/on_data.js":
/*!****************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/wire_protocol/on_data.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.onData = void 0;\nconst utils_1 = __webpack_require__(/*! ../../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/**\n * onData is adapted from Node.js' events.on helper\n * https://nodejs.org/api/events.html#eventsonemitter-eventname-options\n *\n * Returns an AsyncIterator that iterates each 'data' event emitted from emitter.\n * It will reject upon an error event.\n */ function onData(emitter) {\n    // Setup pending events and pending promise lists\n    /**\n     * When the caller has not yet called .next(), we store the\n     * value from the event in this list. Next time they call .next()\n     * we pull the first value out of this list and resolve a promise with it.\n     */ const unconsumedEvents = new utils_1.List();\n    /**\n     * When there has not yet been an event, a new promise will be created\n     * and implicitly stored in this list. When an event occurs we take the first\n     * promise in this list and resolve it.\n     */ const unconsumedPromises = new utils_1.List();\n    /**\n     * Stored an error created by an error event.\n     * This error will turn into a rejection for the subsequent .next() call\n     */ let error = null;\n    /** Set to true only after event listeners have been removed. */ let finished = false;\n    const iterator = {\n        next () {\n            // First, we consume all unread events\n            const value = unconsumedEvents.shift();\n            if (value != null) {\n                return Promise.resolve({\n                    value,\n                    done: false\n                });\n            }\n            // Then we error, if an error happened\n            // This happens one time if at all, because after 'error'\n            // we stop listening\n            if (error != null) {\n                const p = Promise.reject(error);\n                // Only the first element errors\n                error = null;\n                return p;\n            }\n            // If the iterator is finished, resolve to done\n            if (finished) return closeHandler();\n            // Wait until an event happens\n            const { promise, resolve, reject } = (0, utils_1.promiseWithResolvers)();\n            unconsumedPromises.push({\n                resolve,\n                reject\n            });\n            return promise;\n        },\n        return () {\n            return closeHandler();\n        },\n        throw (err) {\n            errorHandler(err);\n            return Promise.resolve({\n                value: undefined,\n                done: true\n            });\n        },\n        [Symbol.asyncIterator] () {\n            return this;\n        }\n    };\n    // Adding event handlers\n    emitter.on(\"data\", eventHandler);\n    emitter.on(\"error\", errorHandler);\n    return iterator;\n    function eventHandler(value) {\n        const promise = unconsumedPromises.shift();\n        if (promise != null) promise.resolve({\n            value,\n            done: false\n        });\n        else unconsumedEvents.push(value);\n    }\n    function errorHandler(err) {\n        const promise = unconsumedPromises.shift();\n        if (promise != null) promise.reject(err);\n        else error = err;\n        void closeHandler();\n    }\n    function closeHandler() {\n        // Adding event handlers\n        emitter.off(\"data\", eventHandler);\n        emitter.off(\"error\", errorHandler);\n        finished = true;\n        const doneResult = {\n            value: undefined,\n            done: finished\n        };\n        for (const promise of unconsumedPromises){\n            promise.resolve(doneResult);\n        }\n        return Promise.resolve(doneResult);\n    }\n}\nexports.onData = onData; //# sourceMappingURL=on_data.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL29uX2RhdGEuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGNBQWMsR0FBRyxLQUFLO0FBQ3RCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDOzs7Ozs7Q0FNQyxHQUNELFNBQVNGLE9BQU9HLE9BQU87SUFDbkIsaURBQWlEO0lBQ2pEOzs7O0tBSUMsR0FDRCxNQUFNQyxtQkFBbUIsSUFBSUgsUUFBUUksSUFBSTtJQUN6Qzs7OztLQUlDLEdBQ0QsTUFBTUMscUJBQXFCLElBQUlMLFFBQVFJLElBQUk7SUFDM0M7OztLQUdDLEdBQ0QsSUFBSUUsUUFBUTtJQUNaLDhEQUE4RCxHQUM5RCxJQUFJQyxXQUFXO0lBQ2YsTUFBTUMsV0FBVztRQUNiQztZQUNJLHNDQUFzQztZQUN0QyxNQUFNWCxRQUFRSyxpQkFBaUJPLEtBQUs7WUFDcEMsSUFBSVosU0FBUyxNQUFNO2dCQUNmLE9BQU9hLFFBQVFDLE9BQU8sQ0FBQztvQkFBRWQ7b0JBQU9lLE1BQU07Z0JBQU07WUFDaEQ7WUFDQSxzQ0FBc0M7WUFDdEMseURBQXlEO1lBQ3pELG9CQUFvQjtZQUNwQixJQUFJUCxTQUFTLE1BQU07Z0JBQ2YsTUFBTVEsSUFBSUgsUUFBUUksTUFBTSxDQUFDVDtnQkFDekIsZ0NBQWdDO2dCQUNoQ0EsUUFBUTtnQkFDUixPQUFPUTtZQUNYO1lBQ0EsK0NBQStDO1lBQy9DLElBQUlQLFVBQ0EsT0FBT1M7WUFDWCw4QkFBOEI7WUFDOUIsTUFBTSxFQUFFQyxPQUFPLEVBQUVMLE9BQU8sRUFBRUcsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHZixRQUFRa0Isb0JBQW9CO1lBQ3JFYixtQkFBbUJjLElBQUksQ0FBQztnQkFBRVA7Z0JBQVNHO1lBQU87WUFDMUMsT0FBT0U7UUFDWDtRQUNBRztZQUNJLE9BQU9KO1FBQ1g7UUFDQUssT0FBTUMsR0FBRztZQUNMQyxhQUFhRDtZQUNiLE9BQU9YLFFBQVFDLE9BQU8sQ0FBQztnQkFBRWQsT0FBTzBCO2dCQUFXWCxNQUFNO1lBQUs7UUFDMUQ7UUFDQSxDQUFDWSxPQUFPQyxhQUFhLENBQUM7WUFDbEIsT0FBTyxJQUFJO1FBQ2Y7SUFDSjtJQUNBLHdCQUF3QjtJQUN4QnhCLFFBQVF5QixFQUFFLENBQUMsUUFBUUM7SUFDbkIxQixRQUFReUIsRUFBRSxDQUFDLFNBQVNKO0lBQ3BCLE9BQU9mO0lBQ1AsU0FBU29CLGFBQWE5QixLQUFLO1FBQ3ZCLE1BQU1tQixVQUFVWixtQkFBbUJLLEtBQUs7UUFDeEMsSUFBSU8sV0FBVyxNQUNYQSxRQUFRTCxPQUFPLENBQUM7WUFBRWQ7WUFBT2UsTUFBTTtRQUFNO2FBRXJDVixpQkFBaUJnQixJQUFJLENBQUNyQjtJQUM5QjtJQUNBLFNBQVN5QixhQUFhRCxHQUFHO1FBQ3JCLE1BQU1MLFVBQVVaLG1CQUFtQkssS0FBSztRQUN4QyxJQUFJTyxXQUFXLE1BQ1hBLFFBQVFGLE1BQU0sQ0FBQ087YUFFZmhCLFFBQVFnQjtRQUNaLEtBQUtOO0lBQ1Q7SUFDQSxTQUFTQTtRQUNMLHdCQUF3QjtRQUN4QmQsUUFBUTJCLEdBQUcsQ0FBQyxRQUFRRDtRQUNwQjFCLFFBQVEyQixHQUFHLENBQUMsU0FBU047UUFDckJoQixXQUFXO1FBQ1gsTUFBTXVCLGFBQWE7WUFBRWhDLE9BQU8wQjtZQUFXWCxNQUFNTjtRQUFTO1FBQ3RELEtBQUssTUFBTVUsV0FBV1osbUJBQW9CO1lBQ3RDWSxRQUFRTCxPQUFPLENBQUNrQjtRQUNwQjtRQUNBLE9BQU9uQixRQUFRQyxPQUFPLENBQUNrQjtJQUMzQjtBQUNKO0FBQ0FqQyxjQUFjLEdBQUdFLFFBQ2pCLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL29uX2RhdGEuanM/OWI0MiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMub25EYXRhID0gdm9pZCAwO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlsc1wiKTtcbi8qKlxuICogb25EYXRhIGlzIGFkYXB0ZWQgZnJvbSBOb2RlLmpzJyBldmVudHMub24gaGVscGVyXG4gKiBodHRwczovL25vZGVqcy5vcmcvYXBpL2V2ZW50cy5odG1sI2V2ZW50c29uZW1pdHRlci1ldmVudG5hbWUtb3B0aW9uc1xuICpcbiAqIFJldHVybnMgYW4gQXN5bmNJdGVyYXRvciB0aGF0IGl0ZXJhdGVzIGVhY2ggJ2RhdGEnIGV2ZW50IGVtaXR0ZWQgZnJvbSBlbWl0dGVyLlxuICogSXQgd2lsbCByZWplY3QgdXBvbiBhbiBlcnJvciBldmVudC5cbiAqL1xuZnVuY3Rpb24gb25EYXRhKGVtaXR0ZXIpIHtcbiAgICAvLyBTZXR1cCBwZW5kaW5nIGV2ZW50cyBhbmQgcGVuZGluZyBwcm9taXNlIGxpc3RzXG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgY2FsbGVyIGhhcyBub3QgeWV0IGNhbGxlZCAubmV4dCgpLCB3ZSBzdG9yZSB0aGVcbiAgICAgKiB2YWx1ZSBmcm9tIHRoZSBldmVudCBpbiB0aGlzIGxpc3QuIE5leHQgdGltZSB0aGV5IGNhbGwgLm5leHQoKVxuICAgICAqIHdlIHB1bGwgdGhlIGZpcnN0IHZhbHVlIG91dCBvZiB0aGlzIGxpc3QgYW5kIHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXQuXG4gICAgICovXG4gICAgY29uc3QgdW5jb25zdW1lZEV2ZW50cyA9IG5ldyB1dGlsc18xLkxpc3QoKTtcbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZXJlIGhhcyBub3QgeWV0IGJlZW4gYW4gZXZlbnQsIGEgbmV3IHByb21pc2Ugd2lsbCBiZSBjcmVhdGVkXG4gICAgICogYW5kIGltcGxpY2l0bHkgc3RvcmVkIGluIHRoaXMgbGlzdC4gV2hlbiBhbiBldmVudCBvY2N1cnMgd2UgdGFrZSB0aGUgZmlyc3RcbiAgICAgKiBwcm9taXNlIGluIHRoaXMgbGlzdCBhbmQgcmVzb2x2ZSBpdC5cbiAgICAgKi9cbiAgICBjb25zdCB1bmNvbnN1bWVkUHJvbWlzZXMgPSBuZXcgdXRpbHNfMS5MaXN0KCk7XG4gICAgLyoqXG4gICAgICogU3RvcmVkIGFuIGVycm9yIGNyZWF0ZWQgYnkgYW4gZXJyb3IgZXZlbnQuXG4gICAgICogVGhpcyBlcnJvciB3aWxsIHR1cm4gaW50byBhIHJlamVjdGlvbiBmb3IgdGhlIHN1YnNlcXVlbnQgLm5leHQoKSBjYWxsXG4gICAgICovXG4gICAgbGV0IGVycm9yID0gbnVsbDtcbiAgICAvKiogU2V0IHRvIHRydWUgb25seSBhZnRlciBldmVudCBsaXN0ZW5lcnMgaGF2ZSBiZWVuIHJlbW92ZWQuICovXG4gICAgbGV0IGZpbmlzaGVkID0gZmFsc2U7XG4gICAgY29uc3QgaXRlcmF0b3IgPSB7XG4gICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICAvLyBGaXJzdCwgd2UgY29uc3VtZSBhbGwgdW5yZWFkIGV2ZW50c1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB1bmNvbnN1bWVkRXZlbnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeyB2YWx1ZSwgZG9uZTogZmFsc2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGVuIHdlIGVycm9yLCBpZiBhbiBlcnJvciBoYXBwZW5lZFxuICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIG9uZSB0aW1lIGlmIGF0IGFsbCwgYmVjYXVzZSBhZnRlciAnZXJyb3InXG4gICAgICAgICAgICAvLyB3ZSBzdG9wIGxpc3RlbmluZ1xuICAgICAgICAgICAgaWYgKGVycm9yICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGVsZW1lbnQgZXJyb3JzXG4gICAgICAgICAgICAgICAgZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCByZXNvbHZlIHRvIGRvbmVcbiAgICAgICAgICAgIGlmIChmaW5pc2hlZClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xvc2VIYW5kbGVyKCk7XG4gICAgICAgICAgICAvLyBXYWl0IHVudGlsIGFuIGV2ZW50IGhhcHBlbnNcbiAgICAgICAgICAgIGNvbnN0IHsgcHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0IH0gPSAoMCwgdXRpbHNfMS5wcm9taXNlV2l0aFJlc29sdmVycykoKTtcbiAgICAgICAgICAgIHVuY29uc3VtZWRQcm9taXNlcy5wdXNoKHsgcmVzb2x2ZSwgcmVqZWN0IH0pO1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH0sXG4gICAgICAgIHJldHVybigpIHtcbiAgICAgICAgICAgIHJldHVybiBjbG9zZUhhbmRsZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGhyb3coZXJyKSB7XG4gICAgICAgICAgICBlcnJvckhhbmRsZXIoZXJyKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIEFkZGluZyBldmVudCBoYW5kbGVyc1xuICAgIGVtaXR0ZXIub24oJ2RhdGEnLCBldmVudEhhbmRsZXIpO1xuICAgIGVtaXR0ZXIub24oJ2Vycm9yJywgZXJyb3JIYW5kbGVyKTtcbiAgICByZXR1cm4gaXRlcmF0b3I7XG4gICAgZnVuY3Rpb24gZXZlbnRIYW5kbGVyKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB1bmNvbnN1bWVkUHJvbWlzZXMuc2hpZnQoKTtcbiAgICAgICAgaWYgKHByb21pc2UgIT0gbnVsbClcbiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZSh7IHZhbHVlLCBkb25lOiBmYWxzZSB9KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdW5jb25zdW1lZEV2ZW50cy5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycikge1xuICAgICAgICBjb25zdCBwcm9taXNlID0gdW5jb25zdW1lZFByb21pc2VzLnNoaWZ0KCk7XG4gICAgICAgIGlmIChwcm9taXNlICE9IG51bGwpXG4gICAgICAgICAgICBwcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBlcnJvciA9IGVycjtcbiAgICAgICAgdm9pZCBjbG9zZUhhbmRsZXIoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xvc2VIYW5kbGVyKCkge1xuICAgICAgICAvLyBBZGRpbmcgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgZW1pdHRlci5vZmYoJ2RhdGEnLCBldmVudEhhbmRsZXIpO1xuICAgICAgICBlbWl0dGVyLm9mZignZXJyb3InLCBlcnJvckhhbmRsZXIpO1xuICAgICAgICBmaW5pc2hlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGRvbmVSZXN1bHQgPSB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IGZpbmlzaGVkIH07XG4gICAgICAgIGZvciAoY29uc3QgcHJvbWlzZSBvZiB1bmNvbnN1bWVkUHJvbWlzZXMpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZShkb25lUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRvbmVSZXN1bHQpO1xuICAgIH1cbn1cbmV4cG9ydHMub25EYXRhID0gb25EYXRhO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b25fZGF0YS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJvbkRhdGEiLCJ1dGlsc18xIiwicmVxdWlyZSIsImVtaXR0ZXIiLCJ1bmNvbnN1bWVkRXZlbnRzIiwiTGlzdCIsInVuY29uc3VtZWRQcm9taXNlcyIsImVycm9yIiwiZmluaXNoZWQiLCJpdGVyYXRvciIsIm5leHQiLCJzaGlmdCIsIlByb21pc2UiLCJyZXNvbHZlIiwiZG9uZSIsInAiLCJyZWplY3QiLCJjbG9zZUhhbmRsZXIiLCJwcm9taXNlIiwicHJvbWlzZVdpdGhSZXNvbHZlcnMiLCJwdXNoIiwicmV0dXJuIiwidGhyb3ciLCJlcnIiLCJlcnJvckhhbmRsZXIiLCJ1bmRlZmluZWQiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwib24iLCJldmVudEhhbmRsZXIiLCJvZmYiLCJkb25lUmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/on_data.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/shared.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/cmap/wire_protocol/shared.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isSharded = exports.getReadPreference = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst common_1 = __webpack_require__(/*! ../../sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst topology_description_1 = __webpack_require__(/*! ../../sdam/topology_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/topology_description.js\");\nfunction getReadPreference(options) {\n    // Default to command version of the readPreference.\n    let readPreference = options?.readPreference ?? read_preference_1.ReadPreference.primary;\n    if (typeof readPreference === \"string\") {\n        readPreference = read_preference_1.ReadPreference.fromString(readPreference);\n    }\n    if (!(readPreference instanceof read_preference_1.ReadPreference)) {\n        throw new error_1.MongoInvalidArgumentError('Option \"readPreference\" must be a ReadPreference instance');\n    }\n    return readPreference;\n}\nexports.getReadPreference = getReadPreference;\nfunction isSharded(topologyOrServer) {\n    if (topologyOrServer == null) {\n        return false;\n    }\n    if (topologyOrServer.description && topologyOrServer.description.type === common_1.ServerType.Mongos) {\n        return true;\n    }\n    // NOTE: This is incredibly inefficient, and should be removed once command construction\n    // happens based on `Server` not `Topology`.\n    if (topologyOrServer.description && topologyOrServer.description instanceof topology_description_1.TopologyDescription) {\n        const servers = Array.from(topologyOrServer.description.servers.values());\n        return servers.some((server)=>server.type === common_1.ServerType.Mongos);\n    }\n    return false;\n}\nexports.isSharded = isSharded; //# sourceMappingURL=shared.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL3NoYXJlZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUJBQWlCLEdBQUdBLHlCQUF5QixHQUFHLEtBQUs7QUFDckQsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsOERBQWE7QUFDckMsTUFBTUMsb0JBQW9CRCxtQkFBT0EsQ0FBQyxrRkFBdUI7QUFDekQsTUFBTUUsV0FBV0YsbUJBQU9BLENBQUMsMEVBQW1CO0FBQzVDLE1BQU1HLHlCQUF5QkgsbUJBQU9BLENBQUMsc0dBQWlDO0FBQ3hFLFNBQVNGLGtCQUFrQk0sT0FBTztJQUM5QixvREFBb0Q7SUFDcEQsSUFBSUMsaUJBQWlCRCxTQUFTQyxrQkFBa0JKLGtCQUFrQkssY0FBYyxDQUFDQyxPQUFPO0lBQ3hGLElBQUksT0FBT0YsbUJBQW1CLFVBQVU7UUFDcENBLGlCQUFpQkosa0JBQWtCSyxjQUFjLENBQUNFLFVBQVUsQ0FBQ0g7SUFDakU7SUFDQSxJQUFJLENBQUVBLENBQUFBLDBCQUEwQkosa0JBQWtCSyxjQUFjLEdBQUc7UUFDL0QsTUFBTSxJQUFJUCxRQUFRVSx5QkFBeUIsQ0FBQztJQUNoRDtJQUNBLE9BQU9KO0FBQ1g7QUFDQVYseUJBQXlCLEdBQUdHO0FBQzVCLFNBQVNELFVBQVVhLGdCQUFnQjtJQUMvQixJQUFJQSxvQkFBb0IsTUFBTTtRQUMxQixPQUFPO0lBQ1g7SUFDQSxJQUFJQSxpQkFBaUJDLFdBQVcsSUFBSUQsaUJBQWlCQyxXQUFXLENBQUNDLElBQUksS0FBS1YsU0FBU1csVUFBVSxDQUFDQyxNQUFNLEVBQUU7UUFDbEcsT0FBTztJQUNYO0lBQ0Esd0ZBQXdGO0lBQ3hGLDRDQUE0QztJQUM1QyxJQUFJSixpQkFBaUJDLFdBQVcsSUFBSUQsaUJBQWlCQyxXQUFXLFlBQVlSLHVCQUF1QlksbUJBQW1CLEVBQUU7UUFDcEgsTUFBTUMsVUFBVUMsTUFBTUMsSUFBSSxDQUFDUixpQkFBaUJDLFdBQVcsQ0FBQ0ssT0FBTyxDQUFDRyxNQUFNO1FBQ3RFLE9BQU9ILFFBQVFJLElBQUksQ0FBQyxDQUFDQyxTQUFXQSxPQUFPVCxJQUFJLEtBQUtWLFNBQVNXLFVBQVUsQ0FBQ0MsTUFBTTtJQUM5RTtJQUNBLE9BQU87QUFDWDtBQUNBbkIsaUJBQWlCLEdBQUdFLFdBQ3BCLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY21hcC93aXJlX3Byb3RvY29sL3NoYXJlZC5qcz9mYjg1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc1NoYXJkZWQgPSBleHBvcnRzLmdldFJlYWRQcmVmZXJlbmNlID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi8uLi9lcnJvclwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4uLy4uL3JlYWRfcHJlZmVyZW5jZVwiKTtcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4uLy4uL3NkYW0vY29tbW9uXCIpO1xuY29uc3QgdG9wb2xvZ3lfZGVzY3JpcHRpb25fMSA9IHJlcXVpcmUoXCIuLi8uLi9zZGFtL3RvcG9sb2d5X2Rlc2NyaXB0aW9uXCIpO1xuZnVuY3Rpb24gZ2V0UmVhZFByZWZlcmVuY2Uob3B0aW9ucykge1xuICAgIC8vIERlZmF1bHQgdG8gY29tbWFuZCB2ZXJzaW9uIG9mIHRoZSByZWFkUHJlZmVyZW5jZS5cbiAgICBsZXQgcmVhZFByZWZlcmVuY2UgPSBvcHRpb25zPy5yZWFkUHJlZmVyZW5jZSA/PyByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5O1xuICAgIGlmICh0eXBlb2YgcmVhZFByZWZlcmVuY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJlYWRQcmVmZXJlbmNlID0gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuZnJvbVN0cmluZyhyZWFkUHJlZmVyZW5jZSk7XG4gICAgfVxuICAgIGlmICghKHJlYWRQcmVmZXJlbmNlIGluc3RhbmNlb2YgcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ09wdGlvbiBcInJlYWRQcmVmZXJlbmNlXCIgbXVzdCBiZSBhIFJlYWRQcmVmZXJlbmNlIGluc3RhbmNlJyk7XG4gICAgfVxuICAgIHJldHVybiByZWFkUHJlZmVyZW5jZTtcbn1cbmV4cG9ydHMuZ2V0UmVhZFByZWZlcmVuY2UgPSBnZXRSZWFkUHJlZmVyZW5jZTtcbmZ1bmN0aW9uIGlzU2hhcmRlZCh0b3BvbG9neU9yU2VydmVyKSB7XG4gICAgaWYgKHRvcG9sb2d5T3JTZXJ2ZXIgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0b3BvbG9neU9yU2VydmVyLmRlc2NyaXB0aW9uICYmIHRvcG9sb2d5T3JTZXJ2ZXIuZGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5Nb25nb3MpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIE5PVEU6IFRoaXMgaXMgaW5jcmVkaWJseSBpbmVmZmljaWVudCwgYW5kIHNob3VsZCBiZSByZW1vdmVkIG9uY2UgY29tbWFuZCBjb25zdHJ1Y3Rpb25cbiAgICAvLyBoYXBwZW5zIGJhc2VkIG9uIGBTZXJ2ZXJgIG5vdCBgVG9wb2xvZ3lgLlxuICAgIGlmICh0b3BvbG9neU9yU2VydmVyLmRlc2NyaXB0aW9uICYmIHRvcG9sb2d5T3JTZXJ2ZXIuZGVzY3JpcHRpb24gaW5zdGFuY2VvZiB0b3BvbG9neV9kZXNjcmlwdGlvbl8xLlRvcG9sb2d5RGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3Qgc2VydmVycyA9IEFycmF5LmZyb20odG9wb2xvZ3lPclNlcnZlci5kZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKTtcbiAgICAgICAgcmV0dXJuIHNlcnZlcnMuc29tZSgoc2VydmVyKSA9PiBzZXJ2ZXIudHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5Nb25nb3MpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLmlzU2hhcmRlZCA9IGlzU2hhcmRlZDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYXJlZC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJpc1NoYXJkZWQiLCJnZXRSZWFkUHJlZmVyZW5jZSIsImVycm9yXzEiLCJyZXF1aXJlIiwicmVhZF9wcmVmZXJlbmNlXzEiLCJjb21tb25fMSIsInRvcG9sb2d5X2Rlc2NyaXB0aW9uXzEiLCJvcHRpb25zIiwicmVhZFByZWZlcmVuY2UiLCJSZWFkUHJlZmVyZW5jZSIsInByaW1hcnkiLCJmcm9tU3RyaW5nIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsInRvcG9sb2d5T3JTZXJ2ZXIiLCJkZXNjcmlwdGlvbiIsInR5cGUiLCJTZXJ2ZXJUeXBlIiwiTW9uZ29zIiwiVG9wb2xvZ3lEZXNjcmlwdGlvbiIsInNlcnZlcnMiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJzb21lIiwic2VydmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/shared.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/collection.js":
/*!************************************************!*\
  !*** ./node_modules/mongodb/lib/collection.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Collection = void 0;\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst ordered_1 = __webpack_require__(/*! ./bulk/ordered */ \"(ssr)/./node_modules/mongodb/lib/bulk/ordered.js\");\nconst unordered_1 = __webpack_require__(/*! ./bulk/unordered */ \"(ssr)/./node_modules/mongodb/lib/bulk/unordered.js\");\nconst change_stream_1 = __webpack_require__(/*! ./change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nconst aggregation_cursor_1 = __webpack_require__(/*! ./cursor/aggregation_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\");\nconst find_cursor_1 = __webpack_require__(/*! ./cursor/find_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/find_cursor.js\");\nconst list_indexes_cursor_1 = __webpack_require__(/*! ./cursor/list_indexes_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_indexes_cursor.js\");\nconst list_search_indexes_cursor_1 = __webpack_require__(/*! ./cursor/list_search_indexes_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_search_indexes_cursor.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst bulk_write_1 = __webpack_require__(/*! ./operations/bulk_write */ \"(ssr)/./node_modules/mongodb/lib/operations/bulk_write.js\");\nconst count_1 = __webpack_require__(/*! ./operations/count */ \"(ssr)/./node_modules/mongodb/lib/operations/count.js\");\nconst count_documents_1 = __webpack_require__(/*! ./operations/count_documents */ \"(ssr)/./node_modules/mongodb/lib/operations/count_documents.js\");\nconst delete_1 = __webpack_require__(/*! ./operations/delete */ \"(ssr)/./node_modules/mongodb/lib/operations/delete.js\");\nconst distinct_1 = __webpack_require__(/*! ./operations/distinct */ \"(ssr)/./node_modules/mongodb/lib/operations/distinct.js\");\nconst drop_1 = __webpack_require__(/*! ./operations/drop */ \"(ssr)/./node_modules/mongodb/lib/operations/drop.js\");\nconst estimated_document_count_1 = __webpack_require__(/*! ./operations/estimated_document_count */ \"(ssr)/./node_modules/mongodb/lib/operations/estimated_document_count.js\");\nconst execute_operation_1 = __webpack_require__(/*! ./operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst find_and_modify_1 = __webpack_require__(/*! ./operations/find_and_modify */ \"(ssr)/./node_modules/mongodb/lib/operations/find_and_modify.js\");\nconst indexes_1 = __webpack_require__(/*! ./operations/indexes */ \"(ssr)/./node_modules/mongodb/lib/operations/indexes.js\");\nconst insert_1 = __webpack_require__(/*! ./operations/insert */ \"(ssr)/./node_modules/mongodb/lib/operations/insert.js\");\nconst is_capped_1 = __webpack_require__(/*! ./operations/is_capped */ \"(ssr)/./node_modules/mongodb/lib/operations/is_capped.js\");\nconst options_operation_1 = __webpack_require__(/*! ./operations/options_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/options_operation.js\");\nconst rename_1 = __webpack_require__(/*! ./operations/rename */ \"(ssr)/./node_modules/mongodb/lib/operations/rename.js\");\nconst create_1 = __webpack_require__(/*! ./operations/search_indexes/create */ \"(ssr)/./node_modules/mongodb/lib/operations/search_indexes/create.js\");\nconst drop_2 = __webpack_require__(/*! ./operations/search_indexes/drop */ \"(ssr)/./node_modules/mongodb/lib/operations/search_indexes/drop.js\");\nconst update_1 = __webpack_require__(/*! ./operations/search_indexes/update */ \"(ssr)/./node_modules/mongodb/lib/operations/search_indexes/update.js\");\nconst update_2 = __webpack_require__(/*! ./operations/update */ \"(ssr)/./node_modules/mongodb/lib/operations/update.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n/**\n * The **Collection** class is an internal class that embodies a MongoDB collection\n * allowing for insert/find/update/delete and other command operation on that MongoDB collection.\n *\n * **COLLECTION Cannot directly be instantiated**\n * @public\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * interface Pet {\n *   name: string;\n *   kind: 'dog' | 'cat' | 'fish';\n * }\n *\n * const client = new MongoClient('mongodb://localhost:27017');\n * const pets = client.db().collection<Pet>('pets');\n *\n * const petCursor = pets.find();\n *\n * for await (const pet of petCursor) {\n *   console.log(`${pet.name} is a ${pet.kind}!`);\n * }\n * ```\n */ class Collection {\n    /**\n     * Create a new Collection instance\n     * @internal\n     */ constructor(db, name, options){\n        // Internal state\n        this.s = {\n            db,\n            options,\n            namespace: new utils_1.MongoDBCollectionNamespace(db.databaseName, name),\n            pkFactory: db.options?.pkFactory ?? utils_1.DEFAULT_PK_FACTORY,\n            readPreference: read_preference_1.ReadPreference.fromOptions(options),\n            bsonOptions: (0, bson_1.resolveBSONOptions)(options, db),\n            readConcern: read_concern_1.ReadConcern.fromOptions(options),\n            writeConcern: write_concern_1.WriteConcern.fromOptions(options)\n        };\n        this.client = db.client;\n    }\n    /**\n     * The name of the database this collection belongs to\n     */ get dbName() {\n        return this.s.namespace.db;\n    }\n    /**\n     * The name of this collection\n     */ get collectionName() {\n        return this.s.namespace.collection;\n    }\n    /**\n     * The namespace of this collection, in the format `${this.dbName}.${this.collectionName}`\n     */ get namespace() {\n        return this.fullNamespace.toString();\n    }\n    /**\n     *  @internal\n     *\n     * The `MongoDBNamespace` for the collection.\n     */ get fullNamespace() {\n        return this.s.namespace;\n    }\n    /**\n     * The current readConcern of the collection. If not explicitly defined for\n     * this collection, will be inherited from the parent DB\n     */ get readConcern() {\n        if (this.s.readConcern == null) {\n            return this.s.db.readConcern;\n        }\n        return this.s.readConcern;\n    }\n    /**\n     * The current readPreference of the collection. If not explicitly defined for\n     * this collection, will be inherited from the parent DB\n     */ get readPreference() {\n        if (this.s.readPreference == null) {\n            return this.s.db.readPreference;\n        }\n        return this.s.readPreference;\n    }\n    get bsonOptions() {\n        return this.s.bsonOptions;\n    }\n    /**\n     * The current writeConcern of the collection. If not explicitly defined for\n     * this collection, will be inherited from the parent DB\n     */ get writeConcern() {\n        if (this.s.writeConcern == null) {\n            return this.s.db.writeConcern;\n        }\n        return this.s.writeConcern;\n    }\n    /** The current index hint for the collection */ get hint() {\n        return this.s.collectionHint;\n    }\n    set hint(v) {\n        this.s.collectionHint = (0, utils_1.normalizeHintField)(v);\n    }\n    /**\n     * Inserts a single document into MongoDB. If documents passed in do not contain the **_id** field,\n     * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n     * can be overridden by setting the **forceServerObjectId** flag.\n     *\n     * @param doc - The document to insert\n     * @param options - Optional settings for the command\n     */ async insertOne(doc, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new insert_1.InsertOneOperation(this, doc, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Inserts an array of documents into MongoDB. If documents passed in do not contain the **_id** field,\n     * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n     * can be overridden by setting the **forceServerObjectId** flag.\n     *\n     * @param docs - The documents to insert\n     * @param options - Optional settings for the command\n     */ async insertMany(docs, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new insert_1.InsertManyOperation(this, docs, (0, utils_1.resolveOptions)(this, options ?? {\n            ordered: true\n        })));\n    }\n    /**\n     * Perform a bulkWrite operation without a fluent API\n     *\n     * Legal operation types are\n     * - `insertOne`\n     * - `replaceOne`\n     * - `updateOne`\n     * - `updateMany`\n     * - `deleteOne`\n     * - `deleteMany`\n     *\n     * If documents passed in do not contain the **_id** field,\n     * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n     * can be overridden by setting the **forceServerObjectId** flag.\n     *\n     * @param operations - Bulk operations to perform\n     * @param options - Optional settings for the command\n     * @throws MongoDriverError if operations is not an array\n     */ async bulkWrite(operations, options) {\n        if (!Array.isArray(operations)) {\n            throw new error_1.MongoInvalidArgumentError('Argument \"operations\" must be an array of documents');\n        }\n        return (0, execute_operation_1.executeOperation)(this.client, new bulk_write_1.BulkWriteOperation(this, operations, (0, utils_1.resolveOptions)(this, options ?? {\n            ordered: true\n        })));\n    }\n    /**\n     * Update a single document in a collection\n     *\n     * The value of `update` can be either:\n     * - UpdateFilter<TSchema> - A document that contains update operator expressions,\n     * - Document[] - an aggregation pipeline.\n     *\n     * @param filter - The filter used to select the document to update\n     * @param update - The modifications to apply\n     * @param options - Optional settings for the command\n     */ async updateOne(filter, update, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new update_2.UpdateOneOperation(this, filter, update, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Replace a document in a collection with another document\n     *\n     * @param filter - The filter used to select the document to replace\n     * @param replacement - The Document that replaces the matching document\n     * @param options - Optional settings for the command\n     */ async replaceOne(filter, replacement, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new update_2.ReplaceOneOperation(this, filter, replacement, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Update multiple documents in a collection\n     *\n     * The value of `update` can be either:\n     * - UpdateFilter<TSchema> - A document that contains update operator expressions,\n     * - Document[] - an aggregation pipeline.\n     *\n     * @param filter - The filter used to select the document to update\n     * @param update - The modifications to apply\n     * @param options - Optional settings for the command\n     */ async updateMany(filter, update, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new update_2.UpdateManyOperation(this, filter, update, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Delete a document from a collection\n     *\n     * @param filter - The filter used to select the document to remove\n     * @param options - Optional settings for the command\n     */ async deleteOne(filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new delete_1.DeleteOneOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Delete multiple documents from a collection\n     *\n     * @param filter - The filter used to select the documents to remove\n     * @param options - Optional settings for the command\n     */ async deleteMany(filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new delete_1.DeleteManyOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Rename the collection.\n     *\n     * @remarks\n     * This operation does not inherit options from the Db or MongoClient.\n     *\n     * @param newName - New name of of the collection.\n     * @param options - Optional settings for the command\n     */ async rename(newName, options) {\n        // Intentionally, we do not inherit options from parent for this operation.\n        return (0, execute_operation_1.executeOperation)(this.client, new rename_1.RenameOperation(this, newName, {\n            ...options,\n            readPreference: read_preference_1.ReadPreference.PRIMARY\n        }));\n    }\n    /**\n     * Drop the collection from the database, removing it permanently. New accesses will create a new collection.\n     *\n     * @param options - Optional settings for the command\n     */ async drop(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new drop_1.DropCollectionOperation(this.s.db, this.collectionName, options));\n    }\n    async findOne(filter = {}, options = {}) {\n        const cursor = this.find(filter, options).limit(-1).batchSize(1);\n        const res = await cursor.next();\n        await cursor.close();\n        return res;\n    }\n    find(filter = {}, options = {}) {\n        return new find_cursor_1.FindCursor(this.client, this.s.namespace, filter, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Returns the options of the collection.\n     *\n     * @param options - Optional settings for the command\n     */ async options(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new options_operation_1.OptionsOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Returns if the collection is a capped collection\n     *\n     * @param options - Optional settings for the command\n     */ async isCapped(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new is_capped_1.IsCappedOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Creates an index on the db and collection collection.\n     *\n     * @param indexSpec - The field name or index specification to create an index for\n     * @param options - Optional settings for the command\n     *\n     * @example\n     * ```ts\n     * const collection = client.db('foo').collection('bar');\n     *\n     * await collection.createIndex({ a: 1, b: -1 });\n     *\n     * // Alternate syntax for { c: 1, d: -1 } that ensures order of indexes\n     * await collection.createIndex([ [c, 1], [d, -1] ]);\n     *\n     * // Equivalent to { e: 1 }\n     * await collection.createIndex('e');\n     *\n     * // Equivalent to { f: 1, g: 1 }\n     * await collection.createIndex(['f', 'g'])\n     *\n     * // Equivalent to { h: 1, i: -1 }\n     * await collection.createIndex([ { h: 1 }, { i: -1 } ]);\n     *\n     * // Equivalent to { j: 1, k: -1, l: 2d }\n     * await collection.createIndex(['j', ['k', -1], { l: '2d' }])\n     * ```\n     */ async createIndex(indexSpec, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.CreateIndexOperation(this, this.collectionName, indexSpec, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Creates multiple indexes in the collection, this method is only supported for\n     * MongoDB 2.6 or higher. Earlier version of MongoDB will throw a command not supported\n     * error.\n     *\n     * **Note**: Unlike {@link Collection#createIndex| createIndex}, this function takes in raw index specifications.\n     * Index specifications are defined {@link https://www.mongodb.com/docs/manual/reference/command/createIndexes/| here}.\n     *\n     * @param indexSpecs - An array of index specifications to be created\n     * @param options - Optional settings for the command\n     *\n     * @example\n     * ```ts\n     * const collection = client.db('foo').collection('bar');\n     * await collection.createIndexes([\n     *   // Simple index on field fizz\n     *   {\n     *     key: { fizz: 1 },\n     *   }\n     *   // wildcard index\n     *   {\n     *     key: { '$**': 1 }\n     *   },\n     *   // named index on darmok and jalad\n     *   {\n     *     key: { darmok: 1, jalad: -1 }\n     *     name: 'tanagra'\n     *   }\n     * ]);\n     * ```\n     */ async createIndexes(indexSpecs, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.CreateIndexesOperation(this, this.collectionName, indexSpecs, (0, utils_1.resolveOptions)(this, {\n            ...options,\n            maxTimeMS: undefined\n        })));\n    }\n    /**\n     * Drops an index from this collection.\n     *\n     * @param indexName - Name of the index to drop.\n     * @param options - Optional settings for the command\n     */ async dropIndex(indexName, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.DropIndexOperation(this, indexName, {\n            ...(0, utils_1.resolveOptions)(this, options),\n            readPreference: read_preference_1.ReadPreference.primary\n        }));\n    }\n    /**\n     * Drops all indexes from this collection.\n     *\n     * @param options - Optional settings for the command\n     */ async dropIndexes(options) {\n        try {\n            await (0, execute_operation_1.executeOperation)(this.client, new indexes_1.DropIndexOperation(this, \"*\", (0, utils_1.resolveOptions)(this, options)));\n            return true;\n        } catch  {\n            return false;\n        }\n    }\n    /**\n     * Get the list of all indexes information for the collection.\n     *\n     * @param options - Optional settings for the command\n     */ listIndexes(options) {\n        return new list_indexes_cursor_1.ListIndexesCursor(this, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Checks if one or more indexes exist on the collection, fails on first non-existing index\n     *\n     * @param indexes - One or more index names to check.\n     * @param options - Optional settings for the command\n     */ async indexExists(indexes, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexExistsOperation(this, indexes, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param options - Optional settings for the command\n     */ async indexInformation(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexInformationOperation(this.s.db, this.collectionName, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Gets an estimate of the count of documents in a collection using collection metadata.\n     * This will always run a count command on all server versions.\n     *\n     * due to an oversight in versions 5.0.0-5.0.8 of MongoDB, the count command,\n     * which estimatedDocumentCount uses in its implementation, was not included in v1 of\n     * the Stable API, and so users of the Stable API with estimatedDocumentCount are\n     * recommended to upgrade their server version to 5.0.9+ or set apiStrict: false to avoid\n     * encountering errors.\n     *\n     * @see {@link https://www.mongodb.com/docs/manual/reference/command/count/#behavior|Count: Behavior}\n     * @param options - Optional settings for the command\n     */ async estimatedDocumentCount(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new estimated_document_count_1.EstimatedDocumentCountOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Gets the number of documents matching the filter.\n     * For a fast count of the total documents in a collection see {@link Collection#estimatedDocumentCount| estimatedDocumentCount}.\n     * **Note**: When migrating from {@link Collection#count| count} to {@link Collection#countDocuments| countDocuments}\n     * the following query operators must be replaced:\n     *\n     * | Operator | Replacement |\n     * | -------- | ----------- |\n     * | `$where`   | [`$expr`][1] |\n     * | `$near`    | [`$geoWithin`][2] with [`$center`][3] |\n     * | `$nearSphere` | [`$geoWithin`][2] with [`$centerSphere`][4] |\n     *\n     * [1]: https://www.mongodb.com/docs/manual/reference/operator/query/expr/\n     * [2]: https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/\n     * [3]: https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center\n     * [4]: https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere\n     *\n     * @param filter - The filter for the count\n     * @param options - Optional settings for the command\n     *\n     * @see https://www.mongodb.com/docs/manual/reference/operator/query/expr/\n     * @see https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/\n     * @see https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center\n     * @see https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere\n     */ async countDocuments(filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new count_documents_1.CountDocumentsOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    async distinct(key, filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new distinct_1.DistinctOperation(this, key, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Retrieve all the indexes on the collection.\n     *\n     * @param options - Optional settings for the command\n     */ async indexes(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexesOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    async findOneAndDelete(filter, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new find_and_modify_1.FindOneAndDeleteOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    async findOneAndReplace(filter, replacement, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new find_and_modify_1.FindOneAndReplaceOperation(this, filter, replacement, (0, utils_1.resolveOptions)(this, options)));\n    }\n    async findOneAndUpdate(filter, update, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new find_and_modify_1.FindOneAndUpdateOperation(this, filter, update, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Execute an aggregation framework pipeline against the collection, needs MongoDB \\>= 2.2\n     *\n     * @param pipeline - An array of aggregation pipelines to execute\n     * @param options - Optional settings for the command\n     */ aggregate(pipeline = [], options) {\n        if (!Array.isArray(pipeline)) {\n            throw new error_1.MongoInvalidArgumentError('Argument \"pipeline\" must be an array of aggregation stages');\n        }\n        return new aggregation_cursor_1.AggregationCursor(this.client, this.s.namespace, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Create a new Change Stream, watching for new changes (insertions, updates, replacements, deletions, and invalidations) in this collection.\n     *\n     * @remarks\n     * watch() accepts two generic arguments for distinct use cases:\n     * - The first is to override the schema that may be defined for this specific collection\n     * - The second is to override the shape of the change stream document entirely, if it is not provided the type will default to ChangeStreamDocument of the first argument\n     * @example\n     * By just providing the first argument I can type the change to be `ChangeStreamDocument<{ _id: number }>`\n     * ```ts\n     * collection.watch<{ _id: number }>()\n     *   .on('change', change => console.log(change._id.toFixed(4)));\n     * ```\n     *\n     * @example\n     * Passing a second argument provides a way to reflect the type changes caused by an advanced pipeline.\n     * Here, we are using a pipeline to have MongoDB filter for insert changes only and add a comment.\n     * No need start from scratch on the ChangeStreamInsertDocument type!\n     * By using an intersection we can save time and ensure defaults remain the same type!\n     * ```ts\n     * collection\n     *   .watch<Schema, ChangeStreamInsertDocument<Schema> & { comment: string }>([\n     *     { $addFields: { comment: 'big changes' } },\n     *     { $match: { operationType: 'insert' } }\n     *   ])\n     *   .on('change', change => {\n     *     change.comment.startsWith('big');\n     *     change.operationType === 'insert';\n     *     // No need to narrow in code because the generics did that for us!\n     *     expectType<Schema>(change.fullDocument);\n     *   });\n     * ```\n     *\n     * @param pipeline - An array of {@link https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/|aggregation pipeline stages} through which to pass change stream documents. This allows for filtering (using $match) and manipulating the change stream documents.\n     * @param options - Optional settings for the command\n     * @typeParam TLocal - Type of the data being detected by the change stream\n     * @typeParam TChange - Type of the whole change stream document emitted\n     */ watch(pipeline = [], options = {}) {\n        // Allow optionally not specifying a pipeline\n        if (!Array.isArray(pipeline)) {\n            options = pipeline;\n            pipeline = [];\n        }\n        return new change_stream_1.ChangeStream(this, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Initiate an Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n     *\n     * @throws MongoNotConnectedError\n     * @remarks\n     * **NOTE:** MongoClient must be connected prior to calling this method due to a known limitation in this legacy implementation.\n     * However, `collection.bulkWrite()` provides an equivalent API that does not require prior connecting.\n     */ initializeUnorderedBulkOp(options) {\n        return new unordered_1.UnorderedBulkOperation(this, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Initiate an In order bulk write operation. Operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n     *\n     * @throws MongoNotConnectedError\n     * @remarks\n     * **NOTE:** MongoClient must be connected prior to calling this method due to a known limitation in this legacy implementation.\n     * However, `collection.bulkWrite()` provides an equivalent API that does not require prior connecting.\n     */ initializeOrderedBulkOp(options) {\n        return new ordered_1.OrderedBulkOperation(this, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * An estimated count of matching documents in the db to a filter.\n     *\n     * **NOTE:** This method has been deprecated, since it does not provide an accurate count of the documents\n     * in a collection. To obtain an accurate count of documents in the collection, use {@link Collection#countDocuments| countDocuments}.\n     * To obtain an estimated count of all documents in the collection, use {@link Collection#estimatedDocumentCount| estimatedDocumentCount}.\n     *\n     * @deprecated use {@link Collection#countDocuments| countDocuments} or {@link Collection#estimatedDocumentCount| estimatedDocumentCount} instead\n     *\n     * @param filter - The filter for the count.\n     * @param options - Optional settings for the command\n     */ async count(filter = {}, options = {}) {\n        return (0, execute_operation_1.executeOperation)(this.client, new count_1.CountOperation(this.fullNamespace, filter, (0, utils_1.resolveOptions)(this, options)));\n    }\n    listSearchIndexes(indexNameOrOptions, options) {\n        options = typeof indexNameOrOptions === \"object\" ? indexNameOrOptions : options == null ? {} : options;\n        const indexName = indexNameOrOptions == null ? null : typeof indexNameOrOptions === \"object\" ? null : indexNameOrOptions;\n        return new list_search_indexes_cursor_1.ListSearchIndexesCursor(this, indexName, options);\n    }\n    /**\n     * Creates a single search index for the collection.\n     *\n     * @param description - The index description for the new search index.\n     * @returns A promise that resolves to the name of the new search index.\n     *\n     * @remarks Only available when used against a 7.0+ Atlas cluster.\n     */ async createSearchIndex(description) {\n        const [index] = await this.createSearchIndexes([\n            description\n        ]);\n        return index;\n    }\n    /**\n     * Creates multiple search indexes for the current collection.\n     *\n     * @param descriptions - An array of `SearchIndexDescription`s for the new search indexes.\n     * @returns A promise that resolves to an array of the newly created search index names.\n     *\n     * @remarks Only available when used against a 7.0+ Atlas cluster.\n     * @returns\n     */ async createSearchIndexes(descriptions) {\n        return (0, execute_operation_1.executeOperation)(this.client, new create_1.CreateSearchIndexesOperation(this, descriptions));\n    }\n    /**\n     * Deletes a search index by index name.\n     *\n     * @param name - The name of the search index to be deleted.\n     *\n     * @remarks Only available when used against a 7.0+ Atlas cluster.\n     */ async dropSearchIndex(name) {\n        return (0, execute_operation_1.executeOperation)(this.client, new drop_2.DropSearchIndexOperation(this, name));\n    }\n    /**\n     * Updates a search index by replacing the existing index definition with the provided definition.\n     *\n     * @param name - The name of the search index to update.\n     * @param definition - The new search index definition.\n     *\n     * @remarks Only available when used against a 7.0+ Atlas cluster.\n     */ async updateSearchIndex(name, definition) {\n        return (0, execute_operation_1.executeOperation)(this.client, new update_1.UpdateSearchIndexOperation(this, name, definition));\n    }\n}\nexports.Collection = Collection; //# sourceMappingURL=collection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY29sbGVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0JBQWtCLEdBQUcsS0FBSztBQUMxQixNQUFNRyxTQUFTQyxtQkFBT0EsQ0FBQyx3REFBUTtBQUMvQixNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyx3RUFBZ0I7QUFDMUMsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsNEVBQWtCO0FBQzlDLE1BQU1HLGtCQUFrQkgsbUJBQU9BLENBQUMsMEVBQWlCO0FBQ2pELE1BQU1JLHVCQUF1QkosbUJBQU9BLENBQUMsa0dBQTZCO0FBQ2xFLE1BQU1LLGdCQUFnQkwsbUJBQU9BLENBQUMsb0ZBQXNCO0FBQ3BELE1BQU1NLHdCQUF3Qk4sbUJBQU9BLENBQUMsb0dBQThCO0FBQ3BFLE1BQU1PLCtCQUErQlAsbUJBQU9BLENBQUMsa0hBQXFDO0FBQ2xGLE1BQU1RLFVBQVVSLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLE1BQU1TLGVBQWVULG1CQUFPQSxDQUFDLDBGQUF5QjtBQUN0RCxNQUFNVSxVQUFVVixtQkFBT0EsQ0FBQyxnRkFBb0I7QUFDNUMsTUFBTVcsb0JBQW9CWCxtQkFBT0EsQ0FBQyxvR0FBOEI7QUFDaEUsTUFBTVksV0FBV1osbUJBQU9BLENBQUMsa0ZBQXFCO0FBQzlDLE1BQU1hLGFBQWFiLG1CQUFPQSxDQUFDLHNGQUF1QjtBQUNsRCxNQUFNYyxTQUFTZCxtQkFBT0EsQ0FBQyw4RUFBbUI7QUFDMUMsTUFBTWUsNkJBQTZCZixtQkFBT0EsQ0FBQyxzSEFBdUM7QUFDbEYsTUFBTWdCLHNCQUFzQmhCLG1CQUFPQSxDQUFDLHdHQUFnQztBQUNwRSxNQUFNaUIsb0JBQW9CakIsbUJBQU9BLENBQUMsb0dBQThCO0FBQ2hFLE1BQU1rQixZQUFZbEIsbUJBQU9BLENBQUMsb0ZBQXNCO0FBQ2hELE1BQU1tQixXQUFXbkIsbUJBQU9B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RDtJQUNsSDtJQUNBOzs7Ozs7S0FNQyxHQUNELE1BQU1FLGdCQUFnQi9ILElBQUksRUFBRTtRQUN4QixPQUFPLENBQUMsR0FBR2pCLG9CQUFvQjhDLGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUkxQixPQUFPeUksd0JBQXdCLENBQUMsSUFBSSxFQUFFaEk7SUFDNUc7SUFDQTs7Ozs7OztLQU9DLEdBQ0QsTUFBTWlJLGtCQUFrQmpJLElBQUksRUFBRWtJLFVBQVUsRUFBRTtRQUN0QyxPQUFPLENBQUMsR0FBR25KLG9CQUFvQjhDLGdCQUFnQixFQUFFLElBQUksQ0FBQ1osTUFBTSxFQUFFLElBQUl6QixTQUFTMkksMEJBQTBCLENBQUMsSUFBSSxFQUFFbkksTUFBTWtJO0lBQ3RIO0FBQ0o7QUFDQXZLLGtCQUFrQixHQUFHRSxZQUNyQixzQ0FBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2NvbGxlY3Rpb24uanM/NjM1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29sbGVjdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuL2Jzb25cIik7XG5jb25zdCBvcmRlcmVkXzEgPSByZXF1aXJlKFwiLi9idWxrL29yZGVyZWRcIik7XG5jb25zdCB1bm9yZGVyZWRfMSA9IHJlcXVpcmUoXCIuL2J1bGsvdW5vcmRlcmVkXCIpO1xuY29uc3QgY2hhbmdlX3N0cmVhbV8xID0gcmVxdWlyZShcIi4vY2hhbmdlX3N0cmVhbVwiKTtcbmNvbnN0IGFnZ3JlZ2F0aW9uX2N1cnNvcl8xID0gcmVxdWlyZShcIi4vY3Vyc29yL2FnZ3JlZ2F0aW9uX2N1cnNvclwiKTtcbmNvbnN0IGZpbmRfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9jdXJzb3IvZmluZF9jdXJzb3JcIik7XG5jb25zdCBsaXN0X2luZGV4ZXNfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9jdXJzb3IvbGlzdF9pbmRleGVzX2N1cnNvclwiKTtcbmNvbnN0IGxpc3Rfc2VhcmNoX2luZGV4ZXNfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9jdXJzb3IvbGlzdF9zZWFyY2hfaW5kZXhlc19jdXJzb3JcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5jb25zdCBidWxrX3dyaXRlXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2J1bGtfd3JpdGVcIik7XG5jb25zdCBjb3VudF8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9jb3VudFwiKTtcbmNvbnN0IGNvdW50X2RvY3VtZW50c18xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9jb3VudF9kb2N1bWVudHNcIik7XG5jb25zdCBkZWxldGVfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZGVsZXRlXCIpO1xuY29uc3QgZGlzdGluY3RfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZGlzdGluY3RcIik7XG5jb25zdCBkcm9wXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2Ryb3BcIik7XG5jb25zdCBlc3RpbWF0ZWRfZG9jdW1lbnRfY291bnRfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZXN0aW1hdGVkX2RvY3VtZW50X2NvdW50XCIpO1xuY29uc3QgZXhlY3V0ZV9vcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCBmaW5kX2FuZF9tb2RpZnlfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZmluZF9hbmRfbW9kaWZ5XCIpO1xuY29uc3QgaW5kZXhlc18xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9pbmRleGVzXCIpO1xuY29uc3QgaW5zZXJ0XzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2luc2VydFwiKTtcbmNvbnN0IGlzX2NhcHBlZF8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9pc19jYXBwZWRcIik7XG5jb25zdCBvcHRpb25zX29wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9vcHRpb25zX29wZXJhdGlvblwiKTtcbmNvbnN0IHJlbmFtZV8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9yZW5hbWVcIik7XG5jb25zdCBjcmVhdGVfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvc2VhcmNoX2luZGV4ZXMvY3JlYXRlXCIpO1xuY29uc3QgZHJvcF8yID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9zZWFyY2hfaW5kZXhlcy9kcm9wXCIpO1xuY29uc3QgdXBkYXRlXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3NlYXJjaF9pbmRleGVzL3VwZGF0ZVwiKTtcbmNvbnN0IHVwZGF0ZV8yID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy91cGRhdGVcIik7XG5jb25zdCByZWFkX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3JlYWRfY29uY2VyblwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vd3JpdGVfY29uY2VyblwiKTtcbi8qKlxuICogVGhlICoqQ29sbGVjdGlvbioqIGNsYXNzIGlzIGFuIGludGVybmFsIGNsYXNzIHRoYXQgZW1ib2RpZXMgYSBNb25nb0RCIGNvbGxlY3Rpb25cbiAqIGFsbG93aW5nIGZvciBpbnNlcnQvZmluZC91cGRhdGUvZGVsZXRlIGFuZCBvdGhlciBjb21tYW5kIG9wZXJhdGlvbiBvbiB0aGF0IE1vbmdvREIgY29sbGVjdGlvbi5cbiAqXG4gKiAqKkNPTExFQ1RJT04gQ2Fubm90IGRpcmVjdGx5IGJlIGluc3RhbnRpYXRlZCoqXG4gKiBAcHVibGljXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gJ21vbmdvZGInO1xuICpcbiAqIGludGVyZmFjZSBQZXQge1xuICogICBuYW1lOiBzdHJpbmc7XG4gKiAgIGtpbmQ6ICdkb2cnIHwgJ2NhdCcgfCAnZmlzaCc7XG4gKiB9XG4gKlxuICogY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3Jyk7XG4gKiBjb25zdCBwZXRzID0gY2xpZW50LmRiKCkuY29sbGVjdGlvbjxQZXQ+KCdwZXRzJyk7XG4gKlxuICogY29uc3QgcGV0Q3Vyc29yID0gcGV0cy5maW5kKCk7XG4gKlxuICogZm9yIGF3YWl0IChjb25zdCBwZXQgb2YgcGV0Q3Vyc29yKSB7XG4gKiAgIGNvbnNvbGUubG9nKGAke3BldC5uYW1lfSBpcyBhICR7cGV0LmtpbmR9IWApO1xuICogfVxuICogYGBgXG4gKi9cbmNsYXNzIENvbGxlY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBDb2xsZWN0aW9uIGluc3RhbmNlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGIsIG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gSW50ZXJuYWwgc3RhdGVcbiAgICAgICAgdGhpcy5zID0ge1xuICAgICAgICAgICAgZGIsXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbmFtZXNwYWNlOiBuZXcgdXRpbHNfMS5Nb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZShkYi5kYXRhYmFzZU5hbWUsIG5hbWUpLFxuICAgICAgICAgICAgcGtGYWN0b3J5OiBkYi5vcHRpb25zPy5wa0ZhY3RvcnkgPz8gdXRpbHNfMS5ERUZBVUxUX1BLX0ZBQ1RPUlksXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuZnJvbU9wdGlvbnMob3B0aW9ucyksXG4gICAgICAgICAgICBic29uT3B0aW9uczogKDAsIGJzb25fMS5yZXNvbHZlQlNPTk9wdGlvbnMpKG9wdGlvbnMsIGRiKSxcbiAgICAgICAgICAgIHJlYWRDb25jZXJuOiByZWFkX2NvbmNlcm5fMS5SZWFkQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKSxcbiAgICAgICAgICAgIHdyaXRlQ29uY2Vybjogd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNsaWVudCA9IGRiLmNsaWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGRhdGFiYXNlIHRoaXMgY29sbGVjdGlvbiBiZWxvbmdzIHRvXG4gICAgICovXG4gICAgZ2V0IGRiTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5uYW1lc3BhY2UuZGI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgY29sbGVjdGlvblxuICAgICAqL1xuICAgIGdldCBjb2xsZWN0aW9uTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5uYW1lc3BhY2UuY29sbGVjdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWVzcGFjZSBvZiB0aGlzIGNvbGxlY3Rpb24sIGluIHRoZSBmb3JtYXQgYCR7dGhpcy5kYk5hbWV9LiR7dGhpcy5jb2xsZWN0aW9uTmFtZX1gXG4gICAgICovXG4gICAgZ2V0IG5hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnVsbE5hbWVzcGFjZS50b1N0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiAgQGludGVybmFsXG4gICAgICpcbiAgICAgKiBUaGUgYE1vbmdvREJOYW1lc3BhY2VgIGZvciB0aGUgY29sbGVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgZnVsbE5hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5uYW1lc3BhY2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHJlYWRDb25jZXJuIG9mIHRoZSBjb2xsZWN0aW9uLiBJZiBub3QgZXhwbGljaXRseSBkZWZpbmVkIGZvclxuICAgICAqIHRoaXMgY29sbGVjdGlvbiwgd2lsbCBiZSBpbmhlcml0ZWQgZnJvbSB0aGUgcGFyZW50IERCXG4gICAgICovXG4gICAgZ2V0IHJlYWRDb25jZXJuKCkge1xuICAgICAgICBpZiAodGhpcy5zLnJlYWRDb25jZXJuID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnMuZGIucmVhZENvbmNlcm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucy5yZWFkQ29uY2VybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgcmVhZFByZWZlcmVuY2Ugb2YgdGhlIGNvbGxlY3Rpb24uIElmIG5vdCBleHBsaWNpdGx5IGRlZmluZWQgZm9yXG4gICAgICogdGhpcyBjb2xsZWN0aW9uLCB3aWxsIGJlIGluaGVyaXRlZCBmcm9tIHRoZSBwYXJlbnQgREJcbiAgICAgKi9cbiAgICBnZXQgcmVhZFByZWZlcmVuY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnMucmVhZFByZWZlcmVuY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucy5kYi5yZWFkUHJlZmVyZW5jZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zLnJlYWRQcmVmZXJlbmNlO1xuICAgIH1cbiAgICBnZXQgYnNvbk9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuYnNvbk9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHdyaXRlQ29uY2VybiBvZiB0aGUgY29sbGVjdGlvbi4gSWYgbm90IGV4cGxpY2l0bHkgZGVmaW5lZCBmb3JcbiAgICAgKiB0aGlzIGNvbGxlY3Rpb24sIHdpbGwgYmUgaW5oZXJpdGVkIGZyb20gdGhlIHBhcmVudCBEQlxuICAgICAqL1xuICAgIGdldCB3cml0ZUNvbmNlcm4oKSB7XG4gICAgICAgIGlmICh0aGlzLnMud3JpdGVDb25jZXJuID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnMuZGIud3JpdGVDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnMud3JpdGVDb25jZXJuO1xuICAgIH1cbiAgICAvKiogVGhlIGN1cnJlbnQgaW5kZXggaGludCBmb3IgdGhlIGNvbGxlY3Rpb24gKi9cbiAgICBnZXQgaGludCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5jb2xsZWN0aW9uSGludDtcbiAgICB9XG4gICAgc2V0IGhpbnQodikge1xuICAgICAgICB0aGlzLnMuY29sbGVjdGlvbkhpbnQgPSAoMCwgdXRpbHNfMS5ub3JtYWxpemVIaW50RmllbGQpKHYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIGEgc2luZ2xlIGRvY3VtZW50IGludG8gTW9uZ29EQi4gSWYgZG9jdW1lbnRzIHBhc3NlZCBpbiBkbyBub3QgY29udGFpbiB0aGUgKipfaWQqKiBmaWVsZCxcbiAgICAgKiBvbmUgd2lsbCBiZSBhZGRlZCB0byBlYWNoIG9mIHRoZSBkb2N1bWVudHMgbWlzc2luZyBpdCBieSB0aGUgZHJpdmVyLCBtdXRhdGluZyB0aGUgZG9jdW1lbnQuIFRoaXMgYmVoYXZpb3JcbiAgICAgKiBjYW4gYmUgb3ZlcnJpZGRlbiBieSBzZXR0aW5nIHRoZSAqKmZvcmNlU2VydmVyT2JqZWN0SWQqKiBmbGFnLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvYyAtIFRoZSBkb2N1bWVudCB0byBpbnNlcnRcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGluc2VydE9uZShkb2MsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgaW5zZXJ0XzEuSW5zZXJ0T25lT3BlcmF0aW9uKHRoaXMsIGRvYywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc2VydHMgYW4gYXJyYXkgb2YgZG9jdW1lbnRzIGludG8gTW9uZ29EQi4gSWYgZG9jdW1lbnRzIHBhc3NlZCBpbiBkbyBub3QgY29udGFpbiB0aGUgKipfaWQqKiBmaWVsZCxcbiAgICAgKiBvbmUgd2lsbCBiZSBhZGRlZCB0byBlYWNoIG9mIHRoZSBkb2N1bWVudHMgbWlzc2luZyBpdCBieSB0aGUgZHJpdmVyLCBtdXRhdGluZyB0aGUgZG9jdW1lbnQuIFRoaXMgYmVoYXZpb3JcbiAgICAgKiBjYW4gYmUgb3ZlcnJpZGRlbiBieSBzZXR0aW5nIHRoZSAqKmZvcmNlU2VydmVyT2JqZWN0SWQqKiBmbGFnLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3MgLSBUaGUgZG9jdW1lbnRzIHRvIGluc2VydFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgaW5zZXJ0TWFueShkb2NzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluc2VydF8xLkluc2VydE1hbnlPcGVyYXRpb24odGhpcywgZG9jcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMgPz8geyBvcmRlcmVkOiB0cnVlIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYSBidWxrV3JpdGUgb3BlcmF0aW9uIHdpdGhvdXQgYSBmbHVlbnQgQVBJXG4gICAgICpcbiAgICAgKiBMZWdhbCBvcGVyYXRpb24gdHlwZXMgYXJlXG4gICAgICogLSBgaW5zZXJ0T25lYFxuICAgICAqIC0gYHJlcGxhY2VPbmVgXG4gICAgICogLSBgdXBkYXRlT25lYFxuICAgICAqIC0gYHVwZGF0ZU1hbnlgXG4gICAgICogLSBgZGVsZXRlT25lYFxuICAgICAqIC0gYGRlbGV0ZU1hbnlgXG4gICAgICpcbiAgICAgKiBJZiBkb2N1bWVudHMgcGFzc2VkIGluIGRvIG5vdCBjb250YWluIHRoZSAqKl9pZCoqIGZpZWxkLFxuICAgICAqIG9uZSB3aWxsIGJlIGFkZGVkIHRvIGVhY2ggb2YgdGhlIGRvY3VtZW50cyBtaXNzaW5nIGl0IGJ5IHRoZSBkcml2ZXIsIG11dGF0aW5nIHRoZSBkb2N1bWVudC4gVGhpcyBiZWhhdmlvclxuICAgICAqIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHNldHRpbmcgdGhlICoqZm9yY2VTZXJ2ZXJPYmplY3RJZCoqIGZsYWcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3BlcmF0aW9ucyAtIEJ1bGsgb3BlcmF0aW9ucyB0byBwZXJmb3JtXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKiBAdGhyb3dzIE1vbmdvRHJpdmVyRXJyb3IgaWYgb3BlcmF0aW9ucyBpcyBub3QgYW4gYXJyYXlcbiAgICAgKi9cbiAgICBhc3luYyBidWxrV3JpdGUob3BlcmF0aW9ucywgb3B0aW9ucykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob3BlcmF0aW9ucykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IFwib3BlcmF0aW9uc1wiIG11c3QgYmUgYW4gYXJyYXkgb2YgZG9jdW1lbnRzJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgYnVsa193cml0ZV8xLkJ1bGtXcml0ZU9wZXJhdGlvbih0aGlzLCBvcGVyYXRpb25zLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucyA/PyB7IG9yZGVyZWQ6IHRydWUgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGEgc2luZ2xlIGRvY3VtZW50IGluIGEgY29sbGVjdGlvblxuICAgICAqXG4gICAgICogVGhlIHZhbHVlIG9mIGB1cGRhdGVgIGNhbiBiZSBlaXRoZXI6XG4gICAgICogLSBVcGRhdGVGaWx0ZXI8VFNjaGVtYT4gLSBBIGRvY3VtZW50IHRoYXQgY29udGFpbnMgdXBkYXRlIG9wZXJhdG9yIGV4cHJlc3Npb25zLFxuICAgICAqIC0gRG9jdW1lbnRbXSAtIGFuIGFnZ3JlZ2F0aW9uIHBpcGVsaW5lLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbHRlciAtIFRoZSBmaWx0ZXIgdXNlZCB0byBzZWxlY3QgdGhlIGRvY3VtZW50IHRvIHVwZGF0ZVxuICAgICAqIEBwYXJhbSB1cGRhdGUgLSBUaGUgbW9kaWZpY2F0aW9ucyB0byBhcHBseVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlT25lKGZpbHRlciwgdXBkYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IHVwZGF0ZV8yLlVwZGF0ZU9uZU9wZXJhdGlvbih0aGlzLCBmaWx0ZXIsIHVwZGF0ZSwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGxhY2UgYSBkb2N1bWVudCBpbiBhIGNvbGxlY3Rpb24gd2l0aCBhbm90aGVyIGRvY3VtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsdGVyIC0gVGhlIGZpbHRlciB1c2VkIHRvIHNlbGVjdCB0aGUgZG9jdW1lbnQgdG8gcmVwbGFjZVxuICAgICAqIEBwYXJhbSByZXBsYWNlbWVudCAtIFRoZSBEb2N1bWVudCB0aGF0IHJlcGxhY2VzIHRoZSBtYXRjaGluZyBkb2N1bWVudFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgcmVwbGFjZU9uZShmaWx0ZXIsIHJlcGxhY2VtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IHVwZGF0ZV8yLlJlcGxhY2VPbmVPcGVyYXRpb24odGhpcywgZmlsdGVyLCByZXBsYWNlbWVudCwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBtdWx0aXBsZSBkb2N1bWVudHMgaW4gYSBjb2xsZWN0aW9uXG4gICAgICpcbiAgICAgKiBUaGUgdmFsdWUgb2YgYHVwZGF0ZWAgY2FuIGJlIGVpdGhlcjpcbiAgICAgKiAtIFVwZGF0ZUZpbHRlcjxUU2NoZW1hPiAtIEEgZG9jdW1lbnQgdGhhdCBjb250YWlucyB1cGRhdGUgb3BlcmF0b3IgZXhwcmVzc2lvbnMsXG4gICAgICogLSBEb2N1bWVudFtdIC0gYW4gYWdncmVnYXRpb24gcGlwZWxpbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsdGVyIC0gVGhlIGZpbHRlciB1c2VkIHRvIHNlbGVjdCB0aGUgZG9jdW1lbnQgdG8gdXBkYXRlXG4gICAgICogQHBhcmFtIHVwZGF0ZSAtIFRoZSBtb2RpZmljYXRpb25zIHRvIGFwcGx5XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVNYW55KGZpbHRlciwgdXBkYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IHVwZGF0ZV8yLlVwZGF0ZU1hbnlPcGVyYXRpb24odGhpcywgZmlsdGVyLCB1cGRhdGUsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBkb2N1bWVudCBmcm9tIGEgY29sbGVjdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbHRlciAtIFRoZSBmaWx0ZXIgdXNlZCB0byBzZWxlY3QgdGhlIGRvY3VtZW50IHRvIHJlbW92ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgZGVsZXRlT25lKGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgZGVsZXRlXzEuRGVsZXRlT25lT3BlcmF0aW9uKHRoaXMsIGZpbHRlciwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBtdWx0aXBsZSBkb2N1bWVudHMgZnJvbSBhIGNvbGxlY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWx0ZXIgLSBUaGUgZmlsdGVyIHVzZWQgdG8gc2VsZWN0IHRoZSBkb2N1bWVudHMgdG8gcmVtb3ZlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBkZWxldGVNYW55KGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgZGVsZXRlXzEuRGVsZXRlTWFueU9wZXJhdGlvbih0aGlzLCBmaWx0ZXIsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW5hbWUgdGhlIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgb3BlcmF0aW9uIGRvZXMgbm90IGluaGVyaXQgb3B0aW9ucyBmcm9tIHRoZSBEYiBvciBNb25nb0NsaWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuZXdOYW1lIC0gTmV3IG5hbWUgb2Ygb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyByZW5hbWUobmV3TmFtZSwgb3B0aW9ucykge1xuICAgICAgICAvLyBJbnRlbnRpb25hbGx5LCB3ZSBkbyBub3QgaW5oZXJpdCBvcHRpb25zIGZyb20gcGFyZW50IGZvciB0aGlzIG9wZXJhdGlvbi5cbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgcmVuYW1lXzEuUmVuYW1lT3BlcmF0aW9uKHRoaXMsIG5ld05hbWUsIHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuUFJJTUFSWVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3AgdGhlIGNvbGxlY3Rpb24gZnJvbSB0aGUgZGF0YWJhc2UsIHJlbW92aW5nIGl0IHBlcm1hbmVudGx5LiBOZXcgYWNjZXNzZXMgd2lsbCBjcmVhdGUgYSBuZXcgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgZHJvcChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGRyb3BfMS5Ecm9wQ29sbGVjdGlvbk9wZXJhdGlvbih0aGlzLnMuZGIsIHRoaXMuY29sbGVjdGlvbk5hbWUsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgYXN5bmMgZmluZE9uZShmaWx0ZXIgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IHRoaXMuZmluZChmaWx0ZXIsIG9wdGlvbnMpLmxpbWl0KC0xKS5iYXRjaFNpemUoMSk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGN1cnNvci5uZXh0KCk7XG4gICAgICAgIGF3YWl0IGN1cnNvci5jbG9zZSgpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmaW5kKGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBmaW5kX2N1cnNvcl8xLkZpbmRDdXJzb3IodGhpcy5jbGllbnQsIHRoaXMucy5uYW1lc3BhY2UsIGZpbHRlciwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgb3B0aW9ucyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgb3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IG9wdGlvbnNfb3BlcmF0aW9uXzEuT3B0aW9uc09wZXJhdGlvbih0aGlzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBpZiB0aGUgY29sbGVjdGlvbiBpcyBhIGNhcHBlZCBjb2xsZWN0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGlzQ2FwcGVkKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgaXNfY2FwcGVkXzEuSXNDYXBwZWRPcGVyYXRpb24odGhpcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5kZXggb24gdGhlIGRiIGFuZCBjb2xsZWN0aW9uIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXhTcGVjIC0gVGhlIGZpZWxkIG5hbWUgb3IgaW5kZXggc3BlY2lmaWNhdGlvbiB0byBjcmVhdGUgYW4gaW5kZXggZm9yXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBjb2xsZWN0aW9uID0gY2xpZW50LmRiKCdmb28nKS5jb2xsZWN0aW9uKCdiYXInKTtcbiAgICAgKlxuICAgICAqIGF3YWl0IGNvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBhOiAxLCBiOiAtMSB9KTtcbiAgICAgKlxuICAgICAqIC8vIEFsdGVybmF0ZSBzeW50YXggZm9yIHsgYzogMSwgZDogLTEgfSB0aGF0IGVuc3VyZXMgb3JkZXIgb2YgaW5kZXhlc1xuICAgICAqIGF3YWl0IGNvbGxlY3Rpb24uY3JlYXRlSW5kZXgoWyBbYywgMV0sIFtkLCAtMV0gXSk7XG4gICAgICpcbiAgICAgKiAvLyBFcXVpdmFsZW50IHRvIHsgZTogMSB9XG4gICAgICogYXdhaXQgY29sbGVjdGlvbi5jcmVhdGVJbmRleCgnZScpO1xuICAgICAqXG4gICAgICogLy8gRXF1aXZhbGVudCB0byB7IGY6IDEsIGc6IDEgfVxuICAgICAqIGF3YWl0IGNvbGxlY3Rpb24uY3JlYXRlSW5kZXgoWydmJywgJ2cnXSlcbiAgICAgKlxuICAgICAqIC8vIEVxdWl2YWxlbnQgdG8geyBoOiAxLCBpOiAtMSB9XG4gICAgICogYXdhaXQgY29sbGVjdGlvbi5jcmVhdGVJbmRleChbIHsgaDogMSB9LCB7IGk6IC0xIH0gXSk7XG4gICAgICpcbiAgICAgKiAvLyBFcXVpdmFsZW50IHRvIHsgajogMSwgazogLTEsIGw6IDJkIH1cbiAgICAgKiBhd2FpdCBjb2xsZWN0aW9uLmNyZWF0ZUluZGV4KFsnaicsIFsnaycsIC0xXSwgeyBsOiAnMmQnIH1dKVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZUluZGV4KGluZGV4U3BlYywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBpbmRleGVzXzEuQ3JlYXRlSW5kZXhPcGVyYXRpb24odGhpcywgdGhpcy5jb2xsZWN0aW9uTmFtZSwgaW5kZXhTcGVjLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBtdWx0aXBsZSBpbmRleGVzIGluIHRoZSBjb2xsZWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IHN1cHBvcnRlZCBmb3JcbiAgICAgKiBNb25nb0RCIDIuNiBvciBoaWdoZXIuIEVhcmxpZXIgdmVyc2lvbiBvZiBNb25nb0RCIHdpbGwgdGhyb3cgYSBjb21tYW5kIG5vdCBzdXBwb3J0ZWRcbiAgICAgKiBlcnJvci5cbiAgICAgKlxuICAgICAqICoqTm90ZSoqOiBVbmxpa2Uge0BsaW5rIENvbGxlY3Rpb24jY3JlYXRlSW5kZXh8IGNyZWF0ZUluZGV4fSwgdGhpcyBmdW5jdGlvbiB0YWtlcyBpbiByYXcgaW5kZXggc3BlY2lmaWNhdGlvbnMuXG4gICAgICogSW5kZXggc3BlY2lmaWNhdGlvbnMgYXJlIGRlZmluZWQge0BsaW5rIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9jb21tYW5kL2NyZWF0ZUluZGV4ZXMvfCBoZXJlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleFNwZWNzIC0gQW4gYXJyYXkgb2YgaW5kZXggc3BlY2lmaWNhdGlvbnMgdG8gYmUgY3JlYXRlZFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgY29sbGVjdGlvbiA9IGNsaWVudC5kYignZm9vJykuY29sbGVjdGlvbignYmFyJyk7XG4gICAgICogYXdhaXQgY29sbGVjdGlvbi5jcmVhdGVJbmRleGVzKFtcbiAgICAgKiAgIC8vIFNpbXBsZSBpbmRleCBvbiBmaWVsZCBmaXp6XG4gICAgICogICB7XG4gICAgICogICAgIGtleTogeyBmaXp6OiAxIH0sXG4gICAgICogICB9XG4gICAgICogICAvLyB3aWxkY2FyZCBpbmRleFxuICAgICAqICAge1xuICAgICAqICAgICBrZXk6IHsgJyQqKic6IDEgfVxuICAgICAqICAgfSxcbiAgICAgKiAgIC8vIG5hbWVkIGluZGV4IG9uIGRhcm1vayBhbmQgamFsYWRcbiAgICAgKiAgIHtcbiAgICAgKiAgICAga2V5OiB7IGRhcm1vazogMSwgamFsYWQ6IC0xIH1cbiAgICAgKiAgICAgbmFtZTogJ3RhbmFncmEnXG4gICAgICogICB9XG4gICAgICogXSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlSW5kZXhlcyhpbmRleFNwZWNzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluZGV4ZXNfMS5DcmVhdGVJbmRleGVzT3BlcmF0aW9uKHRoaXMsIHRoaXMuY29sbGVjdGlvbk5hbWUsIGluZGV4U3BlY3MsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCB7IC4uLm9wdGlvbnMsIG1heFRpbWVNUzogdW5kZWZpbmVkIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFuIGluZGV4IGZyb20gdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGluZGV4TmFtZSAtIE5hbWUgb2YgdGhlIGluZGV4IHRvIGRyb3AuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBkcm9wSW5kZXgoaW5kZXhOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluZGV4ZXNfMS5Ecm9wSW5kZXhPcGVyYXRpb24odGhpcywgaW5kZXhOYW1lLCB7XG4gICAgICAgICAgICAuLi4oMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucyksXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFsbCBpbmRleGVzIGZyb20gdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBkcm9wSW5kZXhlcyhvcHRpb25zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluZGV4ZXNfMS5Ecm9wSW5kZXhPcGVyYXRpb24odGhpcywgJyonLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgYWxsIGluZGV4ZXMgaW5mb3JtYXRpb24gZm9yIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBsaXN0SW5kZXhlcyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgbGlzdF9pbmRleGVzX2N1cnNvcl8xLkxpc3RJbmRleGVzQ3Vyc29yKHRoaXMsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBvbmUgb3IgbW9yZSBpbmRleGVzIGV4aXN0IG9uIHRoZSBjb2xsZWN0aW9uLCBmYWlscyBvbiBmaXJzdCBub24tZXhpc3RpbmcgaW5kZXhcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleGVzIC0gT25lIG9yIG1vcmUgaW5kZXggbmFtZXMgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBpbmRleEV4aXN0cyhpbmRleGVzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluZGV4ZXNfMS5JbmRleEV4aXN0c09wZXJhdGlvbih0aGlzLCBpbmRleGVzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoaXMgY29sbGVjdGlvbnMgaW5kZXggaW5mby5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgaW5kZXhJbmZvcm1hdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGluZGV4ZXNfMS5JbmRleEluZm9ybWF0aW9uT3BlcmF0aW9uKHRoaXMucy5kYiwgdGhpcy5jb2xsZWN0aW9uTmFtZSwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gZXN0aW1hdGUgb2YgdGhlIGNvdW50IG9mIGRvY3VtZW50cyBpbiBhIGNvbGxlY3Rpb24gdXNpbmcgY29sbGVjdGlvbiBtZXRhZGF0YS5cbiAgICAgKiBUaGlzIHdpbGwgYWx3YXlzIHJ1biBhIGNvdW50IGNvbW1hbmQgb24gYWxsIHNlcnZlciB2ZXJzaW9ucy5cbiAgICAgKlxuICAgICAqIGR1ZSB0byBhbiBvdmVyc2lnaHQgaW4gdmVyc2lvbnMgNS4wLjAtNS4wLjggb2YgTW9uZ29EQiwgdGhlIGNvdW50IGNvbW1hbmQsXG4gICAgICogd2hpY2ggZXN0aW1hdGVkRG9jdW1lbnRDb3VudCB1c2VzIGluIGl0cyBpbXBsZW1lbnRhdGlvbiwgd2FzIG5vdCBpbmNsdWRlZCBpbiB2MSBvZlxuICAgICAqIHRoZSBTdGFibGUgQVBJLCBhbmQgc28gdXNlcnMgb2YgdGhlIFN0YWJsZSBBUEkgd2l0aCBlc3RpbWF0ZWREb2N1bWVudENvdW50IGFyZVxuICAgICAqIHJlY29tbWVuZGVkIHRvIHVwZ3JhZGUgdGhlaXIgc2VydmVyIHZlcnNpb24gdG8gNS4wLjkrIG9yIHNldCBhcGlTdHJpY3Q6IGZhbHNlIHRvIGF2b2lkXG4gICAgICogZW5jb3VudGVyaW5nIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9jb21tYW5kL2NvdW50LyNiZWhhdmlvcnxDb3VudDogQmVoYXZpb3J9XG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBlc3RpbWF0ZWREb2N1bWVudENvdW50KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgZXN0aW1hdGVkX2RvY3VtZW50X2NvdW50XzEuRXN0aW1hdGVkRG9jdW1lbnRDb3VudE9wZXJhdGlvbih0aGlzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgZmlsdGVyLlxuICAgICAqIEZvciBhIGZhc3QgY291bnQgb2YgdGhlIHRvdGFsIGRvY3VtZW50cyBpbiBhIGNvbGxlY3Rpb24gc2VlIHtAbGluayBDb2xsZWN0aW9uI2VzdGltYXRlZERvY3VtZW50Q291bnR8IGVzdGltYXRlZERvY3VtZW50Q291bnR9LlxuICAgICAqICoqTm90ZSoqOiBXaGVuIG1pZ3JhdGluZyBmcm9tIHtAbGluayBDb2xsZWN0aW9uI2NvdW50fCBjb3VudH0gdG8ge0BsaW5rIENvbGxlY3Rpb24jY291bnREb2N1bWVudHN8IGNvdW50RG9jdW1lbnRzfVxuICAgICAqIHRoZSBmb2xsb3dpbmcgcXVlcnkgb3BlcmF0b3JzIG11c3QgYmUgcmVwbGFjZWQ6XG4gICAgICpcbiAgICAgKiB8IE9wZXJhdG9yIHwgUmVwbGFjZW1lbnQgfFxuICAgICAqIHwgLS0tLS0tLS0gfCAtLS0tLS0tLS0tLSB8XG4gICAgICogfCBgJHdoZXJlYCAgIHwgW2AkZXhwcmBdWzFdIHxcbiAgICAgKiB8IGAkbmVhcmAgICAgfCBbYCRnZW9XaXRoaW5gXVsyXSB3aXRoIFtgJGNlbnRlcmBdWzNdIHxcbiAgICAgKiB8IGAkbmVhclNwaGVyZWAgfCBbYCRnZW9XaXRoaW5gXVsyXSB3aXRoIFtgJGNlbnRlclNwaGVyZWBdWzRdIHxcbiAgICAgKlxuICAgICAqIFsxXTogaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL3F1ZXJ5L2V4cHIvXG4gICAgICogWzJdOiBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2Uvb3BlcmF0b3IvcXVlcnkvZ2VvV2l0aGluL1xuICAgICAqIFszXTogaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL3F1ZXJ5L2NlbnRlci8jb3AuX1NfY2VudGVyXG4gICAgICogWzRdOiBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2Uvb3BlcmF0b3IvcXVlcnkvY2VudGVyU3BoZXJlLyNvcC5fU19jZW50ZXJTcGhlcmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWx0ZXIgLSBUaGUgZmlsdGVyIGZvciB0aGUgY291bnRcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqXG4gICAgICogQHNlZSBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2Uvb3BlcmF0b3IvcXVlcnkvZXhwci9cbiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9vcGVyYXRvci9xdWVyeS9nZW9XaXRoaW4vXG4gICAgICogQHNlZSBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2Uvb3BlcmF0b3IvcXVlcnkvY2VudGVyLyNvcC5fU19jZW50ZXJcbiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9vcGVyYXRvci9xdWVyeS9jZW50ZXJTcGhlcmUvI29wLl9TX2NlbnRlclNwaGVyZVxuICAgICAqL1xuICAgIGFzeW5jIGNvdW50RG9jdW1lbnRzKGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgY291bnRfZG9jdW1lbnRzXzEuQ291bnREb2N1bWVudHNPcGVyYXRpb24odGhpcywgZmlsdGVyLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgYXN5bmMgZGlzdGluY3Qoa2V5LCBmaWx0ZXIgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGRpc3RpbmN0XzEuRGlzdGluY3RPcGVyYXRpb24odGhpcywga2V5LCBmaWx0ZXIsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhbGwgdGhlIGluZGV4ZXMgb24gdGhlIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGluZGV4ZXMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBpbmRleGVzXzEuSW5kZXhlc09wZXJhdGlvbih0aGlzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgYXN5bmMgZmluZE9uZUFuZERlbGV0ZShmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgZmluZF9hbmRfbW9kaWZ5XzEuRmluZE9uZUFuZERlbGV0ZU9wZXJhdGlvbih0aGlzLCBmaWx0ZXIsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICBhc3luYyBmaW5kT25lQW5kUmVwbGFjZShmaWx0ZXIsIHJlcGxhY2VtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGZpbmRfYW5kX21vZGlmeV8xLkZpbmRPbmVBbmRSZXBsYWNlT3BlcmF0aW9uKHRoaXMsIGZpbHRlciwgcmVwbGFjZW1lbnQsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICBhc3luYyBmaW5kT25lQW5kVXBkYXRlKGZpbHRlciwgdXBkYXRlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGZpbmRfYW5kX21vZGlmeV8xLkZpbmRPbmVBbmRVcGRhdGVPcGVyYXRpb24odGhpcywgZmlsdGVyLCB1cGRhdGUsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIGFuIGFnZ3JlZ2F0aW9uIGZyYW1ld29yayBwaXBlbGluZSBhZ2FpbnN0IHRoZSBjb2xsZWN0aW9uLCBuZWVkcyBNb25nb0RCIFxcPj0gMi4yXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGlwZWxpbmUgLSBBbiBhcnJheSBvZiBhZ2dyZWdhdGlvbiBwaXBlbGluZXMgdG8gZXhlY3V0ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYWdncmVnYXRlKHBpcGVsaW5lID0gW10sIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBpcGVsaW5lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQXJndW1lbnQgXCJwaXBlbGluZVwiIG11c3QgYmUgYW4gYXJyYXkgb2YgYWdncmVnYXRpb24gc3RhZ2VzJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBhZ2dyZWdhdGlvbl9jdXJzb3JfMS5BZ2dyZWdhdGlvbkN1cnNvcih0aGlzLmNsaWVudCwgdGhpcy5zLm5hbWVzcGFjZSwgcGlwZWxpbmUsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBDaGFuZ2UgU3RyZWFtLCB3YXRjaGluZyBmb3IgbmV3IGNoYW5nZXMgKGluc2VydGlvbnMsIHVwZGF0ZXMsIHJlcGxhY2VtZW50cywgZGVsZXRpb25zLCBhbmQgaW52YWxpZGF0aW9ucykgaW4gdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiB3YXRjaCgpIGFjY2VwdHMgdHdvIGdlbmVyaWMgYXJndW1lbnRzIGZvciBkaXN0aW5jdCB1c2UgY2FzZXM6XG4gICAgICogLSBUaGUgZmlyc3QgaXMgdG8gb3ZlcnJpZGUgdGhlIHNjaGVtYSB0aGF0IG1heSBiZSBkZWZpbmVkIGZvciB0aGlzIHNwZWNpZmljIGNvbGxlY3Rpb25cbiAgICAgKiAtIFRoZSBzZWNvbmQgaXMgdG8gb3ZlcnJpZGUgdGhlIHNoYXBlIG9mIHRoZSBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50IGVudGlyZWx5LCBpZiBpdCBpcyBub3QgcHJvdmlkZWQgdGhlIHR5cGUgd2lsbCBkZWZhdWx0IHRvIENoYW5nZVN0cmVhbURvY3VtZW50IG9mIHRoZSBmaXJzdCBhcmd1bWVudFxuICAgICAqIEBleGFtcGxlXG4gICAgICogQnkganVzdCBwcm92aWRpbmcgdGhlIGZpcnN0IGFyZ3VtZW50IEkgY2FuIHR5cGUgdGhlIGNoYW5nZSB0byBiZSBgQ2hhbmdlU3RyZWFtRG9jdW1lbnQ8eyBfaWQ6IG51bWJlciB9PmBcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbGxlY3Rpb24ud2F0Y2g8eyBfaWQ6IG51bWJlciB9PigpXG4gICAgICogICAub24oJ2NoYW5nZScsIGNoYW5nZSA9PiBjb25zb2xlLmxvZyhjaGFuZ2UuX2lkLnRvRml4ZWQoNCkpKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogUGFzc2luZyBhIHNlY29uZCBhcmd1bWVudCBwcm92aWRlcyBhIHdheSB0byByZWZsZWN0IHRoZSB0eXBlIGNoYW5nZXMgY2F1c2VkIGJ5IGFuIGFkdmFuY2VkIHBpcGVsaW5lLlxuICAgICAqIEhlcmUsIHdlIGFyZSB1c2luZyBhIHBpcGVsaW5lIHRvIGhhdmUgTW9uZ29EQiBmaWx0ZXIgZm9yIGluc2VydCBjaGFuZ2VzIG9ubHkgYW5kIGFkZCBhIGNvbW1lbnQuXG4gICAgICogTm8gbmVlZCBzdGFydCBmcm9tIHNjcmF0Y2ggb24gdGhlIENoYW5nZVN0cmVhbUluc2VydERvY3VtZW50IHR5cGUhXG4gICAgICogQnkgdXNpbmcgYW4gaW50ZXJzZWN0aW9uIHdlIGNhbiBzYXZlIHRpbWUgYW5kIGVuc3VyZSBkZWZhdWx0cyByZW1haW4gdGhlIHNhbWUgdHlwZSFcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbGxlY3Rpb25cbiAgICAgKiAgIC53YXRjaDxTY2hlbWEsIENoYW5nZVN0cmVhbUluc2VydERvY3VtZW50PFNjaGVtYT4gJiB7IGNvbW1lbnQ6IHN0cmluZyB9PihbXG4gICAgICogICAgIHsgJGFkZEZpZWxkczogeyBjb21tZW50OiAnYmlnIGNoYW5nZXMnIH0gfSxcbiAgICAgKiAgICAgeyAkbWF0Y2g6IHsgb3BlcmF0aW9uVHlwZTogJ2luc2VydCcgfSB9XG4gICAgICogICBdKVxuICAgICAqICAgLm9uKCdjaGFuZ2UnLCBjaGFuZ2UgPT4ge1xuICAgICAqICAgICBjaGFuZ2UuY29tbWVudC5zdGFydHNXaXRoKCdiaWcnKTtcbiAgICAgKiAgICAgY2hhbmdlLm9wZXJhdGlvblR5cGUgPT09ICdpbnNlcnQnO1xuICAgICAqICAgICAvLyBObyBuZWVkIHRvIG5hcnJvdyBpbiBjb2RlIGJlY2F1c2UgdGhlIGdlbmVyaWNzIGRpZCB0aGF0IGZvciB1cyFcbiAgICAgKiAgICAgZXhwZWN0VHlwZTxTY2hlbWE+KGNoYW5nZS5mdWxsRG9jdW1lbnQpO1xuICAgICAqICAgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGlwZWxpbmUgLSBBbiBhcnJheSBvZiB7QGxpbmsgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL2FnZ3JlZ2F0aW9uLXBpcGVsaW5lL3xhZ2dyZWdhdGlvbiBwaXBlbGluZSBzdGFnZXN9IHRocm91Z2ggd2hpY2ggdG8gcGFzcyBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50cy4gVGhpcyBhbGxvd3MgZm9yIGZpbHRlcmluZyAodXNpbmcgJG1hdGNoKSBhbmQgbWFuaXB1bGF0aW5nIHRoZSBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqIEB0eXBlUGFyYW0gVExvY2FsIC0gVHlwZSBvZiB0aGUgZGF0YSBiZWluZyBkZXRlY3RlZCBieSB0aGUgY2hhbmdlIHN0cmVhbVxuICAgICAqIEB0eXBlUGFyYW0gVENoYW5nZSAtIFR5cGUgb2YgdGhlIHdob2xlIGNoYW5nZSBzdHJlYW0gZG9jdW1lbnQgZW1pdHRlZFxuICAgICAqL1xuICAgIHdhdGNoKHBpcGVsaW5lID0gW10sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvLyBBbGxvdyBvcHRpb25hbGx5IG5vdCBzcGVjaWZ5aW5nIGEgcGlwZWxpbmVcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBpcGVsaW5lKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHBpcGVsaW5lO1xuICAgICAgICAgICAgcGlwZWxpbmUgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGNoYW5nZV9zdHJlYW1fMS5DaGFuZ2VTdHJlYW0odGhpcywgcGlwZWxpbmUsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXRpYXRlIGFuIE91dCBvZiBvcmRlciBiYXRjaCB3cml0ZSBvcGVyYXRpb24uIEFsbCBvcGVyYXRpb25zIHdpbGwgYmUgYnVmZmVyZWQgaW50byBpbnNlcnQvdXBkYXRlL3JlbW92ZSBjb21tYW5kcyBleGVjdXRlZCBvdXQgb2Ygb3JkZXIuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIE1vbmdvTm90Q29ubmVjdGVkRXJyb3JcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqICoqTk9URToqKiBNb25nb0NsaWVudCBtdXN0IGJlIGNvbm5lY3RlZCBwcmlvciB0byBjYWxsaW5nIHRoaXMgbWV0aG9kIGR1ZSB0byBhIGtub3duIGxpbWl0YXRpb24gaW4gdGhpcyBsZWdhY3kgaW1wbGVtZW50YXRpb24uXG4gICAgICogSG93ZXZlciwgYGNvbGxlY3Rpb24uYnVsa1dyaXRlKClgIHByb3ZpZGVzIGFuIGVxdWl2YWxlbnQgQVBJIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBwcmlvciBjb25uZWN0aW5nLlxuICAgICAqL1xuICAgIGluaXRpYWxpemVVbm9yZGVyZWRCdWxrT3Aob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IHVub3JkZXJlZF8xLlVub3JkZXJlZEJ1bGtPcGVyYXRpb24odGhpcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhdGUgYW4gSW4gb3JkZXIgYnVsayB3cml0ZSBvcGVyYXRpb24uIE9wZXJhdGlvbnMgd2lsbCBiZSBzZXJpYWxseSBleGVjdXRlZCBpbiB0aGUgb3JkZXIgdGhleSBhcmUgYWRkZWQsIGNyZWF0aW5nIGEgbmV3IG9wZXJhdGlvbiBmb3IgZWFjaCBzd2l0Y2ggaW4gdHlwZXMuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIE1vbmdvTm90Q29ubmVjdGVkRXJyb3JcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqICoqTk9URToqKiBNb25nb0NsaWVudCBtdXN0IGJlIGNvbm5lY3RlZCBwcmlvciB0byBjYWxsaW5nIHRoaXMgbWV0aG9kIGR1ZSB0byBhIGtub3duIGxpbWl0YXRpb24gaW4gdGhpcyBsZWdhY3kgaW1wbGVtZW50YXRpb24uXG4gICAgICogSG93ZXZlciwgYGNvbGxlY3Rpb24uYnVsa1dyaXRlKClgIHByb3ZpZGVzIGFuIGVxdWl2YWxlbnQgQVBJIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBwcmlvciBjb25uZWN0aW5nLlxuICAgICAqL1xuICAgIGluaXRpYWxpemVPcmRlcmVkQnVsa09wKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBvcmRlcmVkXzEuT3JkZXJlZEJ1bGtPcGVyYXRpb24odGhpcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW4gZXN0aW1hdGVkIGNvdW50IG9mIG1hdGNoaW5nIGRvY3VtZW50cyBpbiB0aGUgZGIgdG8gYSBmaWx0ZXIuXG4gICAgICpcbiAgICAgKiAqKk5PVEU6KiogVGhpcyBtZXRob2QgaGFzIGJlZW4gZGVwcmVjYXRlZCwgc2luY2UgaXQgZG9lcyBub3QgcHJvdmlkZSBhbiBhY2N1cmF0ZSBjb3VudCBvZiB0aGUgZG9jdW1lbnRzXG4gICAgICogaW4gYSBjb2xsZWN0aW9uLiBUbyBvYnRhaW4gYW4gYWNjdXJhdGUgY291bnQgb2YgZG9jdW1lbnRzIGluIHRoZSBjb2xsZWN0aW9uLCB1c2Uge0BsaW5rIENvbGxlY3Rpb24jY291bnREb2N1bWVudHN8IGNvdW50RG9jdW1lbnRzfS5cbiAgICAgKiBUbyBvYnRhaW4gYW4gZXN0aW1hdGVkIGNvdW50IG9mIGFsbCBkb2N1bWVudHMgaW4gdGhlIGNvbGxlY3Rpb24sIHVzZSB7QGxpbmsgQ29sbGVjdGlvbiNlc3RpbWF0ZWREb2N1bWVudENvdW50fCBlc3RpbWF0ZWREb2N1bWVudENvdW50fS5cbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIHVzZSB7QGxpbmsgQ29sbGVjdGlvbiNjb3VudERvY3VtZW50c3wgY291bnREb2N1bWVudHN9IG9yIHtAbGluayBDb2xsZWN0aW9uI2VzdGltYXRlZERvY3VtZW50Q291bnR8IGVzdGltYXRlZERvY3VtZW50Q291bnR9IGluc3RlYWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWx0ZXIgLSBUaGUgZmlsdGVyIGZvciB0aGUgY291bnQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBjb3VudChmaWx0ZXIgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGNvdW50XzEuQ291bnRPcGVyYXRpb24odGhpcy5mdWxsTmFtZXNwYWNlLCBmaWx0ZXIsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICBsaXN0U2VhcmNoSW5kZXhlcyhpbmRleE5hbWVPck9wdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9XG4gICAgICAgICAgICB0eXBlb2YgaW5kZXhOYW1lT3JPcHRpb25zID09PSAnb2JqZWN0JyA/IGluZGV4TmFtZU9yT3B0aW9ucyA6IG9wdGlvbnMgPT0gbnVsbCA/IHt9IDogb3B0aW9ucztcbiAgICAgICAgY29uc3QgaW5kZXhOYW1lID0gaW5kZXhOYW1lT3JPcHRpb25zID09IG51bGxcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiB0eXBlb2YgaW5kZXhOYW1lT3JPcHRpb25zID09PSAnb2JqZWN0J1xuICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgIDogaW5kZXhOYW1lT3JPcHRpb25zO1xuICAgICAgICByZXR1cm4gbmV3IGxpc3Rfc2VhcmNoX2luZGV4ZXNfY3Vyc29yXzEuTGlzdFNlYXJjaEluZGV4ZXNDdXJzb3IodGhpcywgaW5kZXhOYW1lLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNpbmdsZSBzZWFyY2ggaW5kZXggZm9yIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlc2NyaXB0aW9uIC0gVGhlIGluZGV4IGRlc2NyaXB0aW9uIGZvciB0aGUgbmV3IHNlYXJjaCBpbmRleC5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgbmFtZSBvZiB0aGUgbmV3IHNlYXJjaCBpbmRleC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzIE9ubHkgYXZhaWxhYmxlIHdoZW4gdXNlZCBhZ2FpbnN0IGEgNy4wKyBBdGxhcyBjbHVzdGVyLlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZVNlYXJjaEluZGV4KGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFtpbmRleF0gPSBhd2FpdCB0aGlzLmNyZWF0ZVNlYXJjaEluZGV4ZXMoW2Rlc2NyaXB0aW9uXSk7XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBtdWx0aXBsZSBzZWFyY2ggaW5kZXhlcyBmb3IgdGhlIGN1cnJlbnQgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZXNjcmlwdGlvbnMgLSBBbiBhcnJheSBvZiBgU2VhcmNoSW5kZXhEZXNjcmlwdGlvbmBzIGZvciB0aGUgbmV3IHNlYXJjaCBpbmRleGVzLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIHRoZSBuZXdseSBjcmVhdGVkIHNlYXJjaCBpbmRleCBuYW1lcy5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzIE9ubHkgYXZhaWxhYmxlIHdoZW4gdXNlZCBhZ2FpbnN0IGEgNy4wKyBBdGxhcyBjbHVzdGVyLlxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlU2VhcmNoSW5kZXhlcyhkZXNjcmlwdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgY3JlYXRlXzEuQ3JlYXRlU2VhcmNoSW5kZXhlc09wZXJhdGlvbih0aGlzLCBkZXNjcmlwdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhIHNlYXJjaCBpbmRleCBieSBpbmRleCBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgc2VhcmNoIGluZGV4IHRvIGJlIGRlbGV0ZWQuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrcyBPbmx5IGF2YWlsYWJsZSB3aGVuIHVzZWQgYWdhaW5zdCBhIDcuMCsgQXRsYXMgY2x1c3Rlci5cbiAgICAgKi9cbiAgICBhc3luYyBkcm9wU2VhcmNoSW5kZXgobmFtZSkge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBkcm9wXzIuRHJvcFNlYXJjaEluZGV4T3BlcmF0aW9uKHRoaXMsIG5hbWUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIHNlYXJjaCBpbmRleCBieSByZXBsYWNpbmcgdGhlIGV4aXN0aW5nIGluZGV4IGRlZmluaXRpb24gd2l0aCB0aGUgcHJvdmlkZWQgZGVmaW5pdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHNlYXJjaCBpbmRleCB0byB1cGRhdGUuXG4gICAgICogQHBhcmFtIGRlZmluaXRpb24gLSBUaGUgbmV3IHNlYXJjaCBpbmRleCBkZWZpbml0aW9uLlxuICAgICAqXG4gICAgICogQHJlbWFya3MgT25seSBhdmFpbGFibGUgd2hlbiB1c2VkIGFnYWluc3QgYSA3LjArIEF0bGFzIGNsdXN0ZXIuXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlU2VhcmNoSW5kZXgobmFtZSwgZGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyB1cGRhdGVfMS5VcGRhdGVTZWFyY2hJbmRleE9wZXJhdGlvbih0aGlzLCBuYW1lLCBkZWZpbml0aW9uKSk7XG4gICAgfVxufVxuZXhwb3J0cy5Db2xsZWN0aW9uID0gQ29sbGVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbGxlY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ29sbGVjdGlvbiIsImJzb25fMSIsInJlcXVpcmUiLCJvcmRlcmVkXzEiLCJ1bm9yZGVyZWRfMSIsImNoYW5nZV9zdHJlYW1fMSIsImFnZ3JlZ2F0aW9uX2N1cnNvcl8xIiwiZmluZF9jdXJzb3JfMSIsImxpc3RfaW5kZXhlc19jdXJzb3JfMSIsImxpc3Rfc2VhcmNoX2luZGV4ZXNfY3Vyc29yXzEiLCJlcnJvcl8xIiwiYnVsa193cml0ZV8xIiwiY291bnRfMSIsImNvdW50X2RvY3VtZW50c18xIiwiZGVsZXRlXzEiLCJkaXN0aW5jdF8xIiwiZHJvcF8xIiwiZXN0aW1hdGVkX2RvY3VtZW50X2NvdW50XzEiLCJleGVjdXRlX29wZXJhdGlvbl8xIiwiZmluZF9hbmRfbW9kaWZ5XzEiLCJpbmRleGVzXzEiLCJpbnNlcnRfMSIsImlzX2NhcHBlZF8xIiwib3B0aW9uc19vcGVyYXRpb25fMSIsInJlbmFtZV8xIiwiY3JlYXRlXzEiLCJkcm9wXzIiLCJ1cGRhdGVfMSIsInVwZGF0ZV8yIiwicmVhZF9jb25jZXJuXzEiLCJyZWFkX3ByZWZlcmVuY2VfMSIsInV0aWxzXzEiLCJ3cml0ZV9jb25jZXJuXzEiLCJjb25zdHJ1Y3RvciIsImRiIiwibmFtZSIsIm9wdGlvbnMiLCJzIiwibmFtZXNwYWNlIiwiTW9uZ29EQkNvbGxlY3Rpb25OYW1lc3BhY2UiLCJkYXRhYmFzZU5hbWUiLCJwa0ZhY3RvcnkiLCJERUZBVUxUX1BLX0ZBQ1RPUlkiLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwiZnJvbU9wdGlvbnMiLCJic29uT3B0aW9ucyIsInJlc29sdmVCU09OT3B0aW9ucyIsInJlYWRDb25jZXJuIiwiUmVhZENvbmNlcm4iLCJ3cml0ZUNvbmNlcm4iLCJXcml0ZUNvbmNlcm4iLCJjbGllbnQiLCJkYk5hbWUiLCJjb2xsZWN0aW9uTmFtZSIsImNvbGxlY3Rpb24iLCJmdWxsTmFtZXNwYWNlIiwidG9TdHJpbmciLCJoaW50IiwiY29sbGVjdGlvbkhpbnQiLCJ2Iiwibm9ybWFsaXplSGludEZpZWxkIiwiaW5zZXJ0T25lIiwiZG9jIiwiZXhlY3V0ZU9wZXJhdGlvbiIsIkluc2VydE9uZU9wZXJhdGlvbiIsInJlc29sdmVPcHRpb25zIiwiaW5zZXJ0TWFueSIsImRvY3MiLCJJbnNlcnRNYW55T3BlcmF0aW9uIiwib3JkZXJlZCIsImJ1bGtXcml0ZSIsIm9wZXJhdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiQnVsa1dyaXRlT3BlcmF0aW9uIiwidXBkYXRlT25lIiwiZmlsdGVyIiwidXBkYXRlIiwiVXBkYXRlT25lT3BlcmF0aW9uIiwicmVwbGFjZU9uZSIsInJlcGxhY2VtZW50IiwiUmVwbGFjZU9uZU9wZXJhdGlvbiIsInVwZGF0ZU1hbnkiLCJVcGRhdGVNYW55T3BlcmF0aW9uIiwiZGVsZXRlT25lIiwiRGVsZXRlT25lT3BlcmF0aW9uIiwiZGVsZXRlTWFueSIsIkRlbGV0ZU1hbnlPcGVyYXRpb24iLCJyZW5hbWUiLCJuZXdOYW1lIiwiUmVuYW1lT3BlcmF0aW9uIiwiUFJJTUFSWSIsImRyb3AiLCJEcm9wQ29sbGVjdGlvbk9wZXJhdGlvbiIsImZpbmRPbmUiLCJjdXJzb3IiLCJmaW5kIiwibGltaXQiLCJiYXRjaFNpemUiLCJyZXMiLCJuZXh0IiwiY2xvc2UiLCJGaW5kQ3Vyc29yIiwiT3B0aW9uc09wZXJhdGlvbiIsImlzQ2FwcGVkIiwiSXNDYXBwZWRPcGVyYXRpb24iLCJjcmVhdGVJbmRleCIsImluZGV4U3BlYyIsIkNyZWF0ZUluZGV4T3BlcmF0aW9uIiwiY3JlYXRlSW5kZXhlcyIsImluZGV4U3BlY3MiLCJDcmVhdGVJbmRleGVzT3BlcmF0aW9uIiwibWF4VGltZU1TIiwidW5kZWZpbmVkIiwiZHJvcEluZGV4IiwiaW5kZXhOYW1lIiwiRHJvcEluZGV4T3BlcmF0aW9uIiwicHJpbWFyeSIsImRyb3BJbmRleGVzIiwibGlzdEluZGV4ZXMiLCJMaXN0SW5kZXhlc0N1cnNvciIsImluZGV4RXhpc3RzIiwiaW5kZXhlcyIsIkluZGV4RXhpc3RzT3BlcmF0aW9uIiwiaW5kZXhJbmZvcm1hdGlvbiIsIkluZGV4SW5mb3JtYXRpb25PcGVyYXRpb24iLCJlc3RpbWF0ZWREb2N1bWVudENvdW50IiwiRXN0aW1hdGVkRG9jdW1lbnRDb3VudE9wZXJhdGlvbiIsImNvdW50RG9jdW1lbnRzIiwiQ291bnREb2N1bWVudHNPcGVyYXRpb24iLCJkaXN0aW5jdCIsImtleSIsIkRpc3RpbmN0T3BlcmF0aW9uIiwiSW5kZXhlc09wZXJhdGlvbiIsImZpbmRPbmVBbmREZWxldGUiLCJGaW5kT25lQW5kRGVsZXRlT3BlcmF0aW9uIiwiZmluZE9uZUFuZFJlcGxhY2UiLCJGaW5kT25lQW5kUmVwbGFjZU9wZXJhdGlvbiIsImZpbmRPbmVBbmRVcGRhdGUiLCJGaW5kT25lQW5kVXBkYXRlT3BlcmF0aW9uIiwiYWdncmVnYXRlIiwicGlwZWxpbmUiLCJBZ2dyZWdhdGlvbkN1cnNvciIsIndhdGNoIiwiQ2hhbmdlU3RyZWFtIiwiaW5pdGlhbGl6ZVVub3JkZXJlZEJ1bGtPcCIsIlVub3JkZXJlZEJ1bGtPcGVyYXRpb24iLCJpbml0aWFsaXplT3JkZXJlZEJ1bGtPcCIsIk9yZGVyZWRCdWxrT3BlcmF0aW9uIiwiY291bnQiLCJDb3VudE9wZXJhdGlvbiIsImxpc3RTZWFyY2hJbmRleGVzIiwiaW5kZXhOYW1lT3JPcHRpb25zIiwiTGlzdFNlYXJjaEluZGV4ZXNDdXJzb3IiLCJjcmVhdGVTZWFyY2hJbmRleCIsImRlc2NyaXB0aW9uIiwiaW5kZXgiLCJjcmVhdGVTZWFyY2hJbmRleGVzIiwiZGVzY3JpcHRpb25zIiwiQ3JlYXRlU2VhcmNoSW5kZXhlc09wZXJhdGlvbiIsImRyb3BTZWFyY2hJbmRleCIsIkRyb3BTZWFyY2hJbmRleE9wZXJhdGlvbiIsInVwZGF0ZVNlYXJjaEluZGV4IiwiZGVmaW5pdGlvbiIsIlVwZGF0ZVNlYXJjaEluZGV4T3BlcmF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/collection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/connection_string.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/connection_string.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FEATURE_FLAGS = exports.DEFAULT_OPTIONS = exports.OPTIONS = exports.parseOptions = exports.resolveSRVRecord = void 0;\nconst dns = __webpack_require__(/*! dns */ \"dns\");\nconst mongodb_connection_string_url_1 = __webpack_require__(/*! mongodb-connection-string-url */ \"(ssr)/./node_modules/mongodb-connection-string-url/lib/index.js\");\nconst url_1 = __webpack_require__(/*! url */ \"url\");\nconst mongo_credentials_1 = __webpack_require__(/*! ./cmap/auth/mongo_credentials */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js\");\nconst providers_1 = __webpack_require__(/*! ./cmap/auth/providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst client_metadata_1 = __webpack_require__(/*! ./cmap/handshake/client_metadata */ \"(ssr)/./node_modules/mongodb/lib/cmap/handshake/client_metadata.js\");\nconst compression_1 = __webpack_require__(/*! ./cmap/wire_protocol/compression */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js\");\nconst encrypter_1 = __webpack_require__(/*! ./encrypter */ \"(ssr)/./node_modules/mongodb/lib/encrypter.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_client_1 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nconst mongo_logger_1 = __webpack_require__(/*! ./mongo_logger */ \"(ssr)/./node_modules/mongodb/lib/mongo_logger.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst monitor_1 = __webpack_require__(/*! ./sdam/monitor */ \"(ssr)/./node_modules/mongodb/lib/sdam/monitor.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst VALID_TXT_RECORDS = [\n    \"authSource\",\n    \"replicaSet\",\n    \"loadBalanced\"\n];\nconst LB_SINGLE_HOST_ERROR = \"loadBalanced option only supported with a single host in the URI\";\nconst LB_REPLICA_SET_ERROR = \"loadBalanced option not supported with a replicaSet option\";\nconst LB_DIRECT_CONNECTION_ERROR = \"loadBalanced option not supported when directConnection is provided\";\n/**\n * Lookup a `mongodb+srv` connection string, combine the parts and reparse it as a normal\n * connection string.\n *\n * @param uri - The connection string to parse\n * @param options - Optional user provided connection string options\n */ async function resolveSRVRecord(options) {\n    if (typeof options.srvHost !== \"string\") {\n        throw new error_1.MongoAPIError('Option \"srvHost\" must not be empty');\n    }\n    if (options.srvHost.split(\".\").length < 3) {\n        // TODO(NODE-3484): Replace with MongoConnectionStringError\n        throw new error_1.MongoAPIError(\"URI must include hostname, domain name, and tld\");\n    }\n    // Asynchronously start TXT resolution so that we do not have to wait until\n    // the SRV record is resolved before starting a second DNS query.\n    const lookupAddress = options.srvHost;\n    const txtResolutionPromise = dns.promises.resolveTxt(lookupAddress);\n    txtResolutionPromise.catch(()=>{\n    /* rejections will be handled later */ });\n    // Resolve the SRV record and use the result as the list of hosts to connect to.\n    const addresses = await dns.promises.resolveSrv(`_${options.srvServiceName}._tcp.${lookupAddress}`);\n    if (addresses.length === 0) {\n        throw new error_1.MongoAPIError(\"No addresses found at host\");\n    }\n    for (const { name } of addresses){\n        if (!(0, utils_1.matchesParentDomain)(name, lookupAddress)) {\n            throw new error_1.MongoAPIError(\"Server record does not share hostname with parent URI\");\n        }\n    }\n    const hostAddresses = addresses.map((r)=>utils_1.HostAddress.fromString(`${r.name}:${r.port ?? 27017}`));\n    validateLoadBalancedOptions(hostAddresses, options, true);\n    // Use the result of resolving the TXT record and add options from there if they exist.\n    let record;\n    try {\n        record = await txtResolutionPromise;\n    } catch (error) {\n        if (error.code !== \"ENODATA\" && error.code !== \"ENOTFOUND\") {\n            throw error;\n        }\n        return hostAddresses;\n    }\n    if (record.length > 1) {\n        throw new error_1.MongoParseError(\"Multiple text records not allowed\");\n    }\n    const txtRecordOptions = new url_1.URLSearchParams(record[0].join(\"\"));\n    const txtRecordOptionKeys = [\n        ...txtRecordOptions.keys()\n    ];\n    if (txtRecordOptionKeys.some((key)=>!VALID_TXT_RECORDS.includes(key))) {\n        throw new error_1.MongoParseError(`Text record may only set any of: ${VALID_TXT_RECORDS.join(\", \")}`);\n    }\n    if (VALID_TXT_RECORDS.some((option)=>txtRecordOptions.get(option) === \"\")) {\n        throw new error_1.MongoParseError(\"Cannot have empty URI params in DNS TXT Record\");\n    }\n    const source = txtRecordOptions.get(\"authSource\") ?? undefined;\n    const replicaSet = txtRecordOptions.get(\"replicaSet\") ?? undefined;\n    const loadBalanced = txtRecordOptions.get(\"loadBalanced\") ?? undefined;\n    if (!options.userSpecifiedAuthSource && source && options.credentials && !providers_1.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(options.credentials.mechanism)) {\n        options.credentials = mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n            source\n        });\n    }\n    if (!options.userSpecifiedReplicaSet && replicaSet) {\n        options.replicaSet = replicaSet;\n    }\n    if (loadBalanced === \"true\") {\n        options.loadBalanced = true;\n    }\n    if (options.replicaSet && options.srvMaxHosts > 0) {\n        throw new error_1.MongoParseError(\"Cannot combine replicaSet option with srvMaxHosts\");\n    }\n    validateLoadBalancedOptions(hostAddresses, options, true);\n    return hostAddresses;\n}\nexports.resolveSRVRecord = resolveSRVRecord;\n/**\n * Checks if TLS options are valid\n *\n * @param allOptions - All options provided by user or included in default options map\n * @throws MongoAPIError if TLS options are invalid\n */ function checkTLSOptions(allOptions) {\n    if (!allOptions) return;\n    const check = (a, b)=>{\n        if (allOptions.has(a) && allOptions.has(b)) {\n            throw new error_1.MongoAPIError(`The '${a}' option cannot be used with the '${b}' option`);\n        }\n    };\n    check(\"tlsInsecure\", \"tlsAllowInvalidCertificates\");\n    check(\"tlsInsecure\", \"tlsAllowInvalidHostnames\");\n    check(\"tlsInsecure\", \"tlsDisableCertificateRevocationCheck\");\n    check(\"tlsInsecure\", \"tlsDisableOCSPEndpointCheck\");\n    check(\"tlsAllowInvalidCertificates\", \"tlsDisableCertificateRevocationCheck\");\n    check(\"tlsAllowInvalidCertificates\", \"tlsDisableOCSPEndpointCheck\");\n    check(\"tlsDisableCertificateRevocationCheck\", \"tlsDisableOCSPEndpointCheck\");\n}\nfunction getBoolean(name, value) {\n    if (typeof value === \"boolean\") return value;\n    switch(value){\n        case \"true\":\n            return true;\n        case \"false\":\n            return false;\n        default:\n            throw new error_1.MongoParseError(`${name} must be either \"true\" or \"false\"`);\n    }\n}\nfunction getIntFromOptions(name, value) {\n    const parsedInt = (0, utils_1.parseInteger)(value);\n    if (parsedInt != null) {\n        return parsedInt;\n    }\n    throw new error_1.MongoParseError(`Expected ${name} to be stringified int value, got: ${value}`);\n}\nfunction getUIntFromOptions(name, value) {\n    const parsedValue = getIntFromOptions(name, value);\n    if (parsedValue < 0) {\n        throw new error_1.MongoParseError(`${name} can only be a positive int value, got: ${value}`);\n    }\n    return parsedValue;\n}\nfunction* entriesFromString(value) {\n    if (value === \"\") {\n        return;\n    }\n    const keyValuePairs = value.split(\",\");\n    for (const keyValue of keyValuePairs){\n        const [key, value] = keyValue.split(/:(.*)/);\n        if (value == null) {\n            throw new error_1.MongoParseError(\"Cannot have undefined values in key value pairs\");\n        }\n        yield [\n            key,\n            value\n        ];\n    }\n}\nclass CaseInsensitiveMap extends Map {\n    constructor(entries = []){\n        super(entries.map(([k, v])=>[\n                k.toLowerCase(),\n                v\n            ]));\n    }\n    has(k) {\n        return super.has(k.toLowerCase());\n    }\n    get(k) {\n        return super.get(k.toLowerCase());\n    }\n    set(k, v) {\n        return super.set(k.toLowerCase(), v);\n    }\n    delete(k) {\n        return super.delete(k.toLowerCase());\n    }\n}\nfunction parseOptions(uri, mongoClient = undefined, options = {}) {\n    if (mongoClient != null && !(mongoClient instanceof mongo_client_1.MongoClient)) {\n        options = mongoClient;\n        mongoClient = undefined;\n    }\n    // validate BSONOptions\n    if (options.useBigInt64 && typeof options.promoteLongs === \"boolean\" && !options.promoteLongs) {\n        throw new error_1.MongoAPIError(\"Must request either bigint or Long for int64 deserialization\");\n    }\n    if (options.useBigInt64 && typeof options.promoteValues === \"boolean\" && !options.promoteValues) {\n        throw new error_1.MongoAPIError(\"Must request either bigint or Long for int64 deserialization\");\n    }\n    const url = new mongodb_connection_string_url_1.default(uri);\n    const { hosts, isSRV } = url;\n    const mongoOptions = Object.create(null);\n    // Feature flags\n    for (const flag of Object.getOwnPropertySymbols(options)){\n        if (exports.FEATURE_FLAGS.has(flag)) {\n            mongoOptions[flag] = options[flag];\n        }\n    }\n    mongoOptions.hosts = isSRV ? [] : hosts.map(utils_1.HostAddress.fromString);\n    const urlOptions = new CaseInsensitiveMap();\n    if (url.pathname !== \"/\" && url.pathname !== \"\") {\n        const dbName = decodeURIComponent(url.pathname[0] === \"/\" ? url.pathname.slice(1) : url.pathname);\n        if (dbName) {\n            urlOptions.set(\"dbName\", [\n                dbName\n            ]);\n        }\n    }\n    if (url.username !== \"\") {\n        const auth = {\n            username: decodeURIComponent(url.username)\n        };\n        if (typeof url.password === \"string\") {\n            auth.password = decodeURIComponent(url.password);\n        }\n        urlOptions.set(\"auth\", [\n            auth\n        ]);\n    }\n    for (const key of url.searchParams.keys()){\n        const values = url.searchParams.getAll(key);\n        const isReadPreferenceTags = /readPreferenceTags/i.test(key);\n        if (!isReadPreferenceTags && values.length > 1) {\n            throw new error_1.MongoInvalidArgumentError(`URI option \"${key}\" cannot appear more than once in the connection string`);\n        }\n        if (!isReadPreferenceTags && values.includes(\"\")) {\n            throw new error_1.MongoAPIError(`URI option \"${key}\" cannot be specified with no value`);\n        }\n        if (!urlOptions.has(key)) {\n            urlOptions.set(key, values);\n        }\n    }\n    const objectOptions = new CaseInsensitiveMap(Object.entries(options).filter(([, v])=>v != null));\n    // Validate options that can only be provided by one of uri or object\n    if (urlOptions.has(\"serverApi\")) {\n        throw new error_1.MongoParseError(\"URI cannot contain `serverApi`, it can only be passed to the client\");\n    }\n    const uriMechanismProperties = urlOptions.get(\"authMechanismProperties\");\n    if (uriMechanismProperties) {\n        for (const property of uriMechanismProperties){\n            if (/(^|,)ALLOWED_HOSTS:/.test(property)) {\n                throw new error_1.MongoParseError(\"Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.\");\n            }\n        }\n    }\n    if (objectOptions.has(\"loadBalanced\")) {\n        throw new error_1.MongoParseError(\"loadBalanced is only a valid option in the URI\");\n    }\n    // All option collection\n    const allProvidedOptions = new CaseInsensitiveMap();\n    const allProvidedKeys = new Set([\n        ...urlOptions.keys(),\n        ...objectOptions.keys()\n    ]);\n    for (const key of allProvidedKeys){\n        const values = [];\n        const objectOptionValue = objectOptions.get(key);\n        if (objectOptionValue != null) {\n            values.push(objectOptionValue);\n        }\n        const urlValues = urlOptions.get(key) ?? [];\n        values.push(...urlValues);\n        allProvidedOptions.set(key, values);\n    }\n    if (allProvidedOptions.has(\"tls\") || allProvidedOptions.has(\"ssl\")) {\n        const tlsAndSslOpts = (allProvidedOptions.get(\"tls\") || []).concat(allProvidedOptions.get(\"ssl\") || []).map(getBoolean.bind(null, \"tls/ssl\"));\n        if (new Set(tlsAndSslOpts).size !== 1) {\n            throw new error_1.MongoParseError(\"All values of tls/ssl must be the same.\");\n        }\n    }\n    checkTLSOptions(allProvidedOptions);\n    const unsupportedOptions = (0, utils_1.setDifference)(allProvidedKeys, Array.from(Object.keys(exports.OPTIONS)).map((s)=>s.toLowerCase()));\n    if (unsupportedOptions.size !== 0) {\n        const optionWord = unsupportedOptions.size > 1 ? \"options\" : \"option\";\n        const isOrAre = unsupportedOptions.size > 1 ? \"are\" : \"is\";\n        throw new error_1.MongoParseError(`${optionWord} ${Array.from(unsupportedOptions).join(\", \")} ${isOrAre} not supported`);\n    }\n    // Option parsing and setting\n    for (const [key, descriptor] of Object.entries(exports.OPTIONS)){\n        const values = allProvidedOptions.get(key);\n        if (!values || values.length === 0) {\n            if (exports.DEFAULT_OPTIONS.has(key)) {\n                setOption(mongoOptions, key, descriptor, [\n                    exports.DEFAULT_OPTIONS.get(key)\n                ]);\n            }\n        } else {\n            const { deprecated } = descriptor;\n            if (deprecated) {\n                const deprecatedMsg = typeof deprecated === \"string\" ? `: ${deprecated}` : \"\";\n                (0, utils_1.emitWarning)(`${key} is a deprecated option${deprecatedMsg}`);\n            }\n            setOption(mongoOptions, key, descriptor, values);\n        }\n    }\n    if (mongoOptions.credentials) {\n        const isGssapi = mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_GSSAPI;\n        const isX509 = mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_X509;\n        const isAws = mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_AWS;\n        const isOidc = mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_OIDC;\n        if ((isGssapi || isX509) && allProvidedOptions.has(\"authSource\") && mongoOptions.credentials.source !== \"$external\") {\n            // If authSource was explicitly given and its incorrect, we error\n            throw new error_1.MongoParseError(`authMechanism ${mongoOptions.credentials.mechanism} requires an authSource of '$external'`);\n        }\n        if (!(isGssapi || isX509 || isAws || isOidc) && mongoOptions.dbName && !allProvidedOptions.has(\"authSource\")) {\n            // inherit the dbName unless GSSAPI or X509, then silently ignore dbName\n            // and there was no specific authSource given\n            mongoOptions.credentials = mongo_credentials_1.MongoCredentials.merge(mongoOptions.credentials, {\n                source: mongoOptions.dbName\n            });\n        }\n        if (isAws && mongoOptions.credentials.username && !mongoOptions.credentials.password) {\n            throw new error_1.MongoMissingCredentialsError(`When using ${mongoOptions.credentials.mechanism} password must be set when a username is specified`);\n        }\n        mongoOptions.credentials.validate();\n        // Check if the only auth related option provided was authSource, if so we can remove credentials\n        if (mongoOptions.credentials.password === \"\" && mongoOptions.credentials.username === \"\" && mongoOptions.credentials.mechanism === providers_1.AuthMechanism.MONGODB_DEFAULT && Object.keys(mongoOptions.credentials.mechanismProperties).length === 0) {\n            delete mongoOptions.credentials;\n        }\n    }\n    if (!mongoOptions.dbName) {\n        // dbName default is applied here because of the credential validation above\n        mongoOptions.dbName = \"test\";\n    }\n    validateLoadBalancedOptions(hosts, mongoOptions, isSRV);\n    if (mongoClient && mongoOptions.autoEncryption) {\n        encrypter_1.Encrypter.checkForMongoCrypt();\n        mongoOptions.encrypter = new encrypter_1.Encrypter(mongoClient, uri, options);\n        mongoOptions.autoEncrypter = mongoOptions.encrypter.autoEncrypter;\n    }\n    // Potential SRV Overrides and SRV connection string validations\n    mongoOptions.userSpecifiedAuthSource = objectOptions.has(\"authSource\") || urlOptions.has(\"authSource\");\n    mongoOptions.userSpecifiedReplicaSet = objectOptions.has(\"replicaSet\") || urlOptions.has(\"replicaSet\");\n    if (isSRV) {\n        // SRV Record is resolved upon connecting\n        mongoOptions.srvHost = hosts[0];\n        if (mongoOptions.directConnection) {\n            throw new error_1.MongoAPIError(\"SRV URI does not support directConnection\");\n        }\n        if (mongoOptions.srvMaxHosts > 0 && typeof mongoOptions.replicaSet === \"string\") {\n            throw new error_1.MongoParseError(\"Cannot use srvMaxHosts option with replicaSet\");\n        }\n        // SRV turns on TLS by default, but users can override and turn it off\n        const noUserSpecifiedTLS = !objectOptions.has(\"tls\") && !urlOptions.has(\"tls\");\n        const noUserSpecifiedSSL = !objectOptions.has(\"ssl\") && !urlOptions.has(\"ssl\");\n        if (noUserSpecifiedTLS && noUserSpecifiedSSL) {\n            mongoOptions.tls = true;\n        }\n    } else {\n        const userSpecifiedSrvOptions = urlOptions.has(\"srvMaxHosts\") || objectOptions.has(\"srvMaxHosts\") || urlOptions.has(\"srvServiceName\") || objectOptions.has(\"srvServiceName\");\n        if (userSpecifiedSrvOptions) {\n            throw new error_1.MongoParseError(\"Cannot use srvMaxHosts or srvServiceName with a non-srv connection string\");\n        }\n    }\n    if (mongoOptions.directConnection && mongoOptions.hosts.length !== 1) {\n        throw new error_1.MongoParseError(\"directConnection option requires exactly one host\");\n    }\n    if (!mongoOptions.proxyHost && (mongoOptions.proxyPort || mongoOptions.proxyUsername || mongoOptions.proxyPassword)) {\n        throw new error_1.MongoParseError(\"Must specify proxyHost if other proxy options are passed\");\n    }\n    if (mongoOptions.proxyUsername && !mongoOptions.proxyPassword || !mongoOptions.proxyUsername && mongoOptions.proxyPassword) {\n        throw new error_1.MongoParseError(\"Can only specify both of proxy username/password or neither\");\n    }\n    const proxyOptions = [\n        \"proxyHost\",\n        \"proxyPort\",\n        \"proxyUsername\",\n        \"proxyPassword\"\n    ].map((key)=>urlOptions.get(key) ?? []);\n    if (proxyOptions.some((options)=>options.length > 1)) {\n        throw new error_1.MongoParseError(\"Proxy options cannot be specified multiple times in the connection string\");\n    }\n    const loggerFeatureFlag = Symbol.for(\"@@mdb.enableMongoLogger\");\n    mongoOptions[loggerFeatureFlag] = mongoOptions[loggerFeatureFlag] ?? false;\n    let loggerEnvOptions = {};\n    let loggerClientOptions = {};\n    if (mongoOptions[loggerFeatureFlag]) {\n        loggerEnvOptions = {\n            MONGODB_LOG_COMMAND: process.env.MONGODB_LOG_COMMAND,\n            MONGODB_LOG_TOPOLOGY: process.env.MONGODB_LOG_TOPOLOGY,\n            MONGODB_LOG_SERVER_SELECTION: process.env.MONGODB_LOG_SERVER_SELECTION,\n            MONGODB_LOG_CONNECTION: process.env.MONGODB_LOG_CONNECTION,\n            MONGODB_LOG_CLIENT: process.env.MONGODB_LOG_CLIENT,\n            MONGODB_LOG_ALL: process.env.MONGODB_LOG_ALL,\n            MONGODB_LOG_MAX_DOCUMENT_LENGTH: process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,\n            MONGODB_LOG_PATH: process.env.MONGODB_LOG_PATH,\n            ...mongoOptions[Symbol.for(\"@@mdb.internalLoggerConfig\")]\n        };\n        loggerClientOptions = {\n            mongodbLogPath: mongoOptions.mongodbLogPath,\n            mongodbLogComponentSeverities: mongoOptions.mongodbLogComponentSeverities,\n            mongodbLogMaxDocumentLength: mongoOptions.mongodbLogMaxDocumentLength\n        };\n    }\n    mongoOptions.mongoLoggerOptions = mongo_logger_1.MongoLogger.resolveOptions(loggerEnvOptions, loggerClientOptions);\n    mongoOptions.metadata = (0, client_metadata_1.makeClientMetadata)(mongoOptions);\n    mongoOptions.extendedMetadata = (0, client_metadata_1.addContainerMetadata)(mongoOptions.metadata).catch(()=>{\n    /* rejections will be handled later */ });\n    return mongoOptions;\n}\nexports.parseOptions = parseOptions;\n/**\n * #### Throws if LB mode is true:\n * - hosts contains more than one host\n * - there is a replicaSet name set\n * - directConnection is set\n * - if srvMaxHosts is used when an srv connection string is passed in\n *\n * @throws MongoParseError\n */ function validateLoadBalancedOptions(hosts, mongoOptions, isSrv) {\n    if (mongoOptions.loadBalanced) {\n        if (hosts.length > 1) {\n            throw new error_1.MongoParseError(LB_SINGLE_HOST_ERROR);\n        }\n        if (mongoOptions.replicaSet) {\n            throw new error_1.MongoParseError(LB_REPLICA_SET_ERROR);\n        }\n        if (mongoOptions.directConnection) {\n            throw new error_1.MongoParseError(LB_DIRECT_CONNECTION_ERROR);\n        }\n        if (isSrv && mongoOptions.srvMaxHosts > 0) {\n            throw new error_1.MongoParseError(\"Cannot limit srv hosts with loadBalanced enabled\");\n        }\n    }\n    return;\n}\nfunction setOption(mongoOptions, key, descriptor, values) {\n    const { target, type, transform } = descriptor;\n    const name = target ?? key;\n    switch(type){\n        case \"boolean\":\n            mongoOptions[name] = getBoolean(name, values[0]);\n            break;\n        case \"int\":\n            mongoOptions[name] = getIntFromOptions(name, values[0]);\n            break;\n        case \"uint\":\n            mongoOptions[name] = getUIntFromOptions(name, values[0]);\n            break;\n        case \"string\":\n            if (values[0] == null) {\n                break;\n            }\n            mongoOptions[name] = String(values[0]);\n            break;\n        case \"record\":\n            if (!(0, utils_1.isRecord)(values[0])) {\n                throw new error_1.MongoParseError(`${name} must be an object`);\n            }\n            mongoOptions[name] = values[0];\n            break;\n        case \"any\":\n            mongoOptions[name] = values[0];\n            break;\n        default:\n            {\n                if (!transform) {\n                    throw new error_1.MongoParseError(\"Descriptors missing a type must define a transform\");\n                }\n                const transformValue = transform({\n                    name,\n                    options: mongoOptions,\n                    values\n                });\n                mongoOptions[name] = transformValue;\n                break;\n            }\n    }\n}\nexports.OPTIONS = {\n    appName: {\n        type: \"string\"\n    },\n    auth: {\n        target: \"credentials\",\n        transform ({ name, options, values: [value] }) {\n            if (!(0, utils_1.isRecord)(value, [\n                \"username\",\n                \"password\"\n            ])) {\n                throw new error_1.MongoParseError(`${name} must be an object with 'username' and 'password' properties`);\n            }\n            return mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n                username: value.username,\n                password: value.password\n            });\n        }\n    },\n    authMechanism: {\n        target: \"credentials\",\n        transform ({ options, values: [value] }) {\n            const mechanisms = Object.values(providers_1.AuthMechanism);\n            const [mechanism] = mechanisms.filter((m)=>m.match(RegExp(String.raw`\\b${value}\\b`, \"i\")));\n            if (!mechanism) {\n                throw new error_1.MongoParseError(`authMechanism one of ${mechanisms}, got ${value}`);\n            }\n            let source = options.credentials?.source;\n            if (mechanism === providers_1.AuthMechanism.MONGODB_PLAIN || providers_1.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(mechanism)) {\n                // some mechanisms have '$external' as the Auth Source\n                source = \"$external\";\n            }\n            let password = options.credentials?.password;\n            if (mechanism === providers_1.AuthMechanism.MONGODB_X509 && password === \"\") {\n                password = undefined;\n            }\n            return mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n                mechanism,\n                source,\n                password\n            });\n        }\n    },\n    authMechanismProperties: {\n        target: \"credentials\",\n        transform ({ options, values }) {\n            // We can have a combination of options passed in the URI and options passed\n            // as an object to the MongoClient. So we must transform the string options\n            // as well as merge them together with a potentially provided object.\n            let mechanismProperties = Object.create(null);\n            for (const optionValue of values){\n                if (typeof optionValue === \"string\") {\n                    for (const [key, value] of entriesFromString(optionValue)){\n                        try {\n                            mechanismProperties[key] = getBoolean(key, value);\n                        } catch  {\n                            mechanismProperties[key] = value;\n                        }\n                    }\n                } else {\n                    if (!(0, utils_1.isRecord)(optionValue)) {\n                        throw new error_1.MongoParseError(\"AuthMechanismProperties must be an object\");\n                    }\n                    mechanismProperties = {\n                        ...optionValue\n                    };\n                }\n            }\n            return mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n                mechanismProperties\n            });\n        }\n    },\n    authSource: {\n        target: \"credentials\",\n        transform ({ options, values: [value] }) {\n            const source = String(value);\n            return mongo_credentials_1.MongoCredentials.merge(options.credentials, {\n                source\n            });\n        }\n    },\n    autoEncryption: {\n        type: \"record\"\n    },\n    bsonRegExp: {\n        type: \"boolean\"\n    },\n    serverApi: {\n        target: \"serverApi\",\n        transform ({ values: [version] }) {\n            const serverApiToValidate = typeof version === \"string\" ? {\n                version\n            } : version;\n            const versionToValidate = serverApiToValidate && serverApiToValidate.version;\n            if (!versionToValidate) {\n                throw new error_1.MongoParseError(`Invalid \\`serverApi\\` property; must specify a version from the following enum: [\"${Object.values(mongo_client_1.ServerApiVersion).join('\", \"')}\"]`);\n            }\n            if (!Object.values(mongo_client_1.ServerApiVersion).some((v)=>v === versionToValidate)) {\n                throw new error_1.MongoParseError(`Invalid server API version=${versionToValidate}; must be in the following enum: [\"${Object.values(mongo_client_1.ServerApiVersion).join('\", \"')}\"]`);\n            }\n            return serverApiToValidate;\n        }\n    },\n    checkKeys: {\n        type: \"boolean\"\n    },\n    compressors: {\n        default: \"none\",\n        target: \"compressors\",\n        transform ({ values }) {\n            const compressionList = new Set();\n            for (const compVal of values){\n                const compValArray = typeof compVal === \"string\" ? compVal.split(\",\") : compVal;\n                if (!Array.isArray(compValArray)) {\n                    throw new error_1.MongoInvalidArgumentError(\"compressors must be an array or a comma-delimited list of strings\");\n                }\n                for (const c of compValArray){\n                    if (Object.keys(compression_1.Compressor).includes(String(c))) {\n                        compressionList.add(String(c));\n                    } else {\n                        throw new error_1.MongoInvalidArgumentError(`${c} is not a valid compression mechanism. Must be one of: ${Object.keys(compression_1.Compressor)}.`);\n                    }\n                }\n            }\n            return [\n                ...compressionList\n            ];\n        }\n    },\n    connectTimeoutMS: {\n        default: 30000,\n        type: \"uint\"\n    },\n    dbName: {\n        type: \"string\"\n    },\n    directConnection: {\n        default: false,\n        type: \"boolean\"\n    },\n    driverInfo: {\n        default: {},\n        type: \"record\"\n    },\n    enableUtf8Validation: {\n        type: \"boolean\",\n        default: true\n    },\n    family: {\n        transform ({ name, values: [value] }) {\n            const transformValue = getIntFromOptions(name, value);\n            if (transformValue === 4 || transformValue === 6) {\n                return transformValue;\n            }\n            throw new error_1.MongoParseError(`Option 'family' must be 4 or 6 got ${transformValue}.`);\n        }\n    },\n    fieldsAsRaw: {\n        type: \"record\"\n    },\n    forceServerObjectId: {\n        default: false,\n        type: \"boolean\"\n    },\n    fsync: {\n        deprecated: \"Please use journal instead\",\n        target: \"writeConcern\",\n        transform ({ name, options, values: [value] }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    fsync: getBoolean(name, value)\n                }\n            });\n            if (!wc) throw new error_1.MongoParseError(`Unable to make a writeConcern from fsync=${value}`);\n            return wc;\n        }\n    },\n    heartbeatFrequencyMS: {\n        default: 10000,\n        type: \"uint\"\n    },\n    ignoreUndefined: {\n        type: \"boolean\"\n    },\n    j: {\n        deprecated: \"Please use journal instead\",\n        target: \"writeConcern\",\n        transform ({ name, options, values: [value] }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    journal: getBoolean(name, value)\n                }\n            });\n            if (!wc) throw new error_1.MongoParseError(`Unable to make a writeConcern from journal=${value}`);\n            return wc;\n        }\n    },\n    journal: {\n        target: \"writeConcern\",\n        transform ({ name, options, values: [value] }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    journal: getBoolean(name, value)\n                }\n            });\n            if (!wc) throw new error_1.MongoParseError(`Unable to make a writeConcern from journal=${value}`);\n            return wc;\n        }\n    },\n    loadBalanced: {\n        default: false,\n        type: \"boolean\"\n    },\n    localThresholdMS: {\n        default: 15,\n        type: \"uint\"\n    },\n    maxConnecting: {\n        default: 2,\n        transform ({ name, values: [value] }) {\n            const maxConnecting = getUIntFromOptions(name, value);\n            if (maxConnecting === 0) {\n                throw new error_1.MongoInvalidArgumentError(\"maxConnecting must be > 0 if specified\");\n            }\n            return maxConnecting;\n        }\n    },\n    maxIdleTimeMS: {\n        default: 0,\n        type: \"uint\"\n    },\n    maxPoolSize: {\n        default: 100,\n        type: \"uint\"\n    },\n    maxStalenessSeconds: {\n        target: \"readPreference\",\n        transform ({ name, options, values: [value] }) {\n            const maxStalenessSeconds = getUIntFromOptions(name, value);\n            if (options.readPreference) {\n                return read_preference_1.ReadPreference.fromOptions({\n                    readPreference: {\n                        ...options.readPreference,\n                        maxStalenessSeconds\n                    }\n                });\n            } else {\n                return new read_preference_1.ReadPreference(\"secondary\", undefined, {\n                    maxStalenessSeconds\n                });\n            }\n        }\n    },\n    minInternalBufferSize: {\n        type: \"uint\"\n    },\n    minPoolSize: {\n        default: 0,\n        type: \"uint\"\n    },\n    minHeartbeatFrequencyMS: {\n        default: 500,\n        type: \"uint\"\n    },\n    monitorCommands: {\n        default: false,\n        type: \"boolean\"\n    },\n    name: {\n        target: \"driverInfo\",\n        transform ({ values: [value], options }) {\n            return {\n                ...options.driverInfo,\n                name: String(value)\n            };\n        }\n    },\n    noDelay: {\n        default: true,\n        type: \"boolean\"\n    },\n    pkFactory: {\n        default: utils_1.DEFAULT_PK_FACTORY,\n        transform ({ values: [value] }) {\n            if ((0, utils_1.isRecord)(value, [\n                \"createPk\"\n            ]) && typeof value.createPk === \"function\") {\n                return value;\n            }\n            throw new error_1.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${value}`);\n        }\n    },\n    promoteBuffers: {\n        type: \"boolean\"\n    },\n    promoteLongs: {\n        type: \"boolean\"\n    },\n    promoteValues: {\n        type: \"boolean\"\n    },\n    useBigInt64: {\n        type: \"boolean\"\n    },\n    proxyHost: {\n        type: \"string\"\n    },\n    proxyPassword: {\n        type: \"string\"\n    },\n    proxyPort: {\n        type: \"uint\"\n    },\n    proxyUsername: {\n        type: \"string\"\n    },\n    raw: {\n        default: false,\n        type: \"boolean\"\n    },\n    readConcern: {\n        transform ({ values: [value], options }) {\n            if (value instanceof read_concern_1.ReadConcern || (0, utils_1.isRecord)(value, [\n                \"level\"\n            ])) {\n                return read_concern_1.ReadConcern.fromOptions({\n                    ...options.readConcern,\n                    ...value\n                });\n            }\n            throw new error_1.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(value)}`);\n        }\n    },\n    readConcernLevel: {\n        target: \"readConcern\",\n        transform ({ values: [level], options }) {\n            return read_concern_1.ReadConcern.fromOptions({\n                ...options.readConcern,\n                level: level\n            });\n        }\n    },\n    readPreference: {\n        default: read_preference_1.ReadPreference.primary,\n        transform ({ values: [value], options }) {\n            if (value instanceof read_preference_1.ReadPreference) {\n                return read_preference_1.ReadPreference.fromOptions({\n                    readPreference: {\n                        ...options.readPreference,\n                        ...value\n                    },\n                    ...value\n                });\n            }\n            if ((0, utils_1.isRecord)(value, [\n                \"mode\"\n            ])) {\n                const rp = read_preference_1.ReadPreference.fromOptions({\n                    readPreference: {\n                        ...options.readPreference,\n                        ...value\n                    },\n                    ...value\n                });\n                if (rp) return rp;\n                else throw new error_1.MongoParseError(`Cannot make read preference from ${JSON.stringify(value)}`);\n            }\n            if (typeof value === \"string\") {\n                const rpOpts = {\n                    hedge: options.readPreference?.hedge,\n                    maxStalenessSeconds: options.readPreference?.maxStalenessSeconds\n                };\n                return new read_preference_1.ReadPreference(value, options.readPreference?.tags, rpOpts);\n            }\n            throw new error_1.MongoParseError(`Unknown ReadPreference value: ${value}`);\n        }\n    },\n    readPreferenceTags: {\n        target: \"readPreference\",\n        transform ({ values, options }) {\n            const tags = Array.isArray(values[0]) ? values[0] : values;\n            const readPreferenceTags = [];\n            for (const tag of tags){\n                const readPreferenceTag = Object.create(null);\n                if (typeof tag === \"string\") {\n                    for (const [k, v] of entriesFromString(tag)){\n                        readPreferenceTag[k] = v;\n                    }\n                }\n                if ((0, utils_1.isRecord)(tag)) {\n                    for (const [k, v] of Object.entries(tag)){\n                        readPreferenceTag[k] = v;\n                    }\n                }\n                readPreferenceTags.push(readPreferenceTag);\n            }\n            return read_preference_1.ReadPreference.fromOptions({\n                readPreference: options.readPreference,\n                readPreferenceTags\n            });\n        }\n    },\n    replicaSet: {\n        type: \"string\"\n    },\n    retryReads: {\n        default: true,\n        type: \"boolean\"\n    },\n    retryWrites: {\n        default: true,\n        type: \"boolean\"\n    },\n    serializeFunctions: {\n        type: \"boolean\"\n    },\n    serverMonitoringMode: {\n        default: \"auto\",\n        transform ({ values: [value] }) {\n            if (!Object.values(monitor_1.ServerMonitoringMode).includes(value)) {\n                throw new error_1.MongoParseError(\"serverMonitoringMode must be one of `auto`, `poll`, or `stream`\");\n            }\n            return value;\n        }\n    },\n    serverSelectionTimeoutMS: {\n        default: 30000,\n        type: \"uint\"\n    },\n    servername: {\n        type: \"string\"\n    },\n    socketTimeoutMS: {\n        default: 0,\n        type: \"uint\"\n    },\n    srvMaxHosts: {\n        type: \"uint\",\n        default: 0\n    },\n    srvServiceName: {\n        type: \"string\",\n        default: \"mongodb\"\n    },\n    ssl: {\n        target: \"tls\",\n        type: \"boolean\"\n    },\n    timeoutMS: {\n        type: \"uint\"\n    },\n    tls: {\n        type: \"boolean\"\n    },\n    tlsAllowInvalidCertificates: {\n        target: \"rejectUnauthorized\",\n        transform ({ name, values: [value] }) {\n            // allowInvalidCertificates is the inverse of rejectUnauthorized\n            return !getBoolean(name, value);\n        }\n    },\n    tlsAllowInvalidHostnames: {\n        target: \"checkServerIdentity\",\n        transform ({ name, values: [value] }) {\n            // tlsAllowInvalidHostnames means setting the checkServerIdentity function to a noop\n            return getBoolean(name, value) ? ()=>undefined : undefined;\n        }\n    },\n    tlsCAFile: {\n        type: \"string\"\n    },\n    tlsCRLFile: {\n        type: \"string\"\n    },\n    tlsCertificateKeyFile: {\n        type: \"string\"\n    },\n    tlsCertificateKeyFilePassword: {\n        target: \"passphrase\",\n        type: \"any\"\n    },\n    tlsInsecure: {\n        transform ({ name, options, values: [value] }) {\n            const tlsInsecure = getBoolean(name, value);\n            if (tlsInsecure) {\n                options.checkServerIdentity = ()=>undefined;\n                options.rejectUnauthorized = false;\n            } else {\n                options.checkServerIdentity = options.tlsAllowInvalidHostnames ? ()=>undefined : undefined;\n                options.rejectUnauthorized = options.tlsAllowInvalidCertificates ? false : true;\n            }\n            return tlsInsecure;\n        }\n    },\n    w: {\n        target: \"writeConcern\",\n        transform ({ values: [value], options }) {\n            return write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    w: value\n                }\n            });\n        }\n    },\n    waitQueueTimeoutMS: {\n        default: 0,\n        type: \"uint\"\n    },\n    writeConcern: {\n        target: \"writeConcern\",\n        transform ({ values: [value], options }) {\n            if ((0, utils_1.isRecord)(value) || value instanceof write_concern_1.WriteConcern) {\n                return write_concern_1.WriteConcern.fromOptions({\n                    writeConcern: {\n                        ...options.writeConcern,\n                        ...value\n                    }\n                });\n            } else if (value === \"majority\" || typeof value === \"number\") {\n                return write_concern_1.WriteConcern.fromOptions({\n                    writeConcern: {\n                        ...options.writeConcern,\n                        w: value\n                    }\n                });\n            }\n            throw new error_1.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(value)}`);\n        }\n    },\n    wtimeout: {\n        deprecated: \"Please use wtimeoutMS instead\",\n        target: \"writeConcern\",\n        transform ({ values: [value], options }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    wtimeout: getUIntFromOptions(\"wtimeout\", value)\n                }\n            });\n            if (wc) return wc;\n            throw new error_1.MongoParseError(`Cannot make WriteConcern from wtimeout`);\n        }\n    },\n    wtimeoutMS: {\n        target: \"writeConcern\",\n        transform ({ values: [value], options }) {\n            const wc = write_concern_1.WriteConcern.fromOptions({\n                writeConcern: {\n                    ...options.writeConcern,\n                    wtimeoutMS: getUIntFromOptions(\"wtimeoutMS\", value)\n                }\n            });\n            if (wc) return wc;\n            throw new error_1.MongoParseError(`Cannot make WriteConcern from wtimeout`);\n        }\n    },\n    zlibCompressionLevel: {\n        default: 0,\n        type: \"int\"\n    },\n    // Custom types for modifying core behavior\n    connectionType: {\n        type: \"any\"\n    },\n    srvPoller: {\n        type: \"any\"\n    },\n    // Accepted NodeJS Options\n    minDHSize: {\n        type: \"any\"\n    },\n    pskCallback: {\n        type: \"any\"\n    },\n    secureContext: {\n        type: \"any\"\n    },\n    enableTrace: {\n        type: \"any\"\n    },\n    requestCert: {\n        type: \"any\"\n    },\n    rejectUnauthorized: {\n        type: \"any\"\n    },\n    checkServerIdentity: {\n        type: \"any\"\n    },\n    ALPNProtocols: {\n        type: \"any\"\n    },\n    SNICallback: {\n        type: \"any\"\n    },\n    session: {\n        type: \"any\"\n    },\n    requestOCSP: {\n        type: \"any\"\n    },\n    localAddress: {\n        type: \"any\"\n    },\n    localPort: {\n        type: \"any\"\n    },\n    hints: {\n        type: \"any\"\n    },\n    lookup: {\n        type: \"any\"\n    },\n    ca: {\n        type: \"any\"\n    },\n    cert: {\n        type: \"any\"\n    },\n    ciphers: {\n        type: \"any\"\n    },\n    crl: {\n        type: \"any\"\n    },\n    ecdhCurve: {\n        type: \"any\"\n    },\n    key: {\n        type: \"any\"\n    },\n    passphrase: {\n        type: \"any\"\n    },\n    pfx: {\n        type: \"any\"\n    },\n    secureProtocol: {\n        type: \"any\"\n    },\n    index: {\n        type: \"any\"\n    },\n    // Legacy options from v3 era\n    useNewUrlParser: {\n        type: \"boolean\",\n        deprecated: \"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version\"\n    },\n    useUnifiedTopology: {\n        type: \"boolean\",\n        deprecated: \"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version\"\n    },\n    // MongoLogger\n    /**\n     * @internal\n     * TODO: NODE-5671 - remove internal flag\n     */ mongodbLogPath: {\n        transform ({ values: [value] }) {\n            if (!(typeof value === \"string\" && [\n                \"stderr\",\n                \"stdout\"\n            ].includes(value) || value && typeof value === \"object\" && \"write\" in value && typeof value.write === \"function\")) {\n                throw new error_1.MongoAPIError(`Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable`);\n            }\n            return value;\n        }\n    },\n    /**\n     * @internal\n     * TODO: NODE-5671 - remove internal flag\n     */ mongodbLogComponentSeverities: {\n        transform ({ values: [value] }) {\n            if (typeof value !== \"object\" || !value) {\n                throw new error_1.MongoAPIError(`Option 'mongodbLogComponentSeverities' must be a non-null object`);\n            }\n            for (const [k, v] of Object.entries(value)){\n                if (typeof v !== \"string\" || typeof k !== \"string\") {\n                    throw new error_1.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value`);\n                }\n                if (!Object.values(mongo_logger_1.MongoLoggableComponent).some((val)=>val === k) && k !== \"default\") {\n                    throw new error_1.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${k}`);\n                }\n                if (!Object.values(mongo_logger_1.SeverityLevel).some((val)=>val === v)) {\n                    throw new error_1.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${v} as a value for ${k}`);\n                }\n            }\n            return value;\n        }\n    },\n    /**\n     * @internal\n     * TODO: NODE-5671 - remove internal flag\n     */ mongodbLogMaxDocumentLength: {\n        type: \"uint\"\n    }\n};\nexports.DEFAULT_OPTIONS = new CaseInsensitiveMap(Object.entries(exports.OPTIONS).filter(([, descriptor])=>descriptor.default != null).map(([k, d])=>[\n        k,\n        d.default\n    ]));\n/**\n * Set of permitted feature flags\n * @internal\n */ exports.FEATURE_FLAGS = new Set([\n    Symbol.for(\"@@mdb.skipPingOnConnect\"),\n    Symbol.for(\"@@mdb.enableMongoLogger\"),\n    Symbol.for(\"@@mdb.internalLoggerConfig\")\n]); //# sourceMappingURL=connection_string.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY29ubmVjdGlvbl9zdHJpbmcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHFCQUFxQixHQUFHQSx1QkFBdUIsR0FBR0EsZUFBZSxHQUFHQSxvQkFBb0IsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUMzSCxNQUFNTyxNQUFNQyxtQkFBT0EsQ0FBQyxnQkFBSztBQUN6QixNQUFNQyxrQ0FBa0NELG1CQUFPQSxDQUFDLHNHQUErQjtBQUMvRSxNQUFNRSxRQUFRRixtQkFBT0EsQ0FBQyxnQkFBSztBQUMzQixNQUFNRyxzQkFBc0JILG1CQUFPQSxDQUFDLHNHQUErQjtBQUNuRSxNQUFNSSxjQUFjSixtQkFBT0EsQ0FBQyxzRkFBdUI7QUFDbkQsTUFBTUssb0JBQW9CTCxtQkFBT0EsQ0FBQyw0R0FBa0M7QUFDcEUsTUFBTU0sZ0JBQWdCTixtQkFBT0EsQ0FBQyw0R0FBa0M7QUFDaEUsTUFBTU8sY0FBY1AsbUJBQU9BLENBQUMsa0VBQWE7QUFDekMsTUFBTVEsVUFBVVIsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsTUFBTVMsaUJBQWlCVCxtQkFBT0EsQ0FBQyx3RUFBZ0I7QUFDL0MsTUFBTVUsaUJBQWlCVixtQkFBT0EsQ0FBQyx3RUFBZ0I7QUFDL0MsTUFBTVcsaUJBQWlCWCxtQkFBT0EsQ0FBQyx3RUFBZ0I7QUFDL0MsTUFBTVksb0JBQW9CWixtQkFBT0EsQ0FBQyw4RUFBbUI7QUFDckQsTUFBTWEsWUFBWWIsbUJBQU9BLENBQUMsd0VBQWdCO0FBQzFDLE1BQU1jLFVBQVVkLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLE1BQU1lLGtCQUFrQmYsbUJBQU9BLENBQUMsMEVBQWlCO0FBQ2pELE1BQU1nQixvQkFBb0I7SUFBQztJQUFjO0lBQWM7Q0FBZTtBQUN0RSxNQUFNQyx1QkFBdUI7QUFDN0IsTUFBTUMsdUJBQXVCO0FBQzdCLE1BQU1D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QUNBLE9BQU85RjtRQUNYO0lBQ0o7SUFDQTs7O0tBR0MsR0FDRHNNLDZCQUE2QjtRQUFFVSxNQUFNO0lBQU87QUFDaEQ7QUFDQWpOLHVCQUF1QixHQUFHLElBQUkyRixtQkFBbUI3RixPQUFPZ0csT0FBTyxDQUFDOUYsUUFBUUksT0FBTyxFQUMxRTZILE1BQU0sQ0FBQyxDQUFDLEdBQUdvQixXQUFXLEdBQUtBLFdBQVcxQyxPQUFPLElBQUksTUFDakQvRCxHQUFHLENBQUMsQ0FBQyxDQUFDbUQsR0FBR29QLEVBQUUsR0FBSztRQUFDcFA7UUFBR29QLEVBQUV4TyxPQUFPO0tBQUM7QUFDbkM7OztDQUdDLEdBQ0QzRyxxQkFBcUIsR0FBRyxJQUFJc0ksSUFBSTtJQUM1QmlELE9BQU9DLEdBQUcsQ0FBQztJQUNYRCxPQUFPQyxHQUFHLENBQUM7SUFDWEQsT0FBT0MsR0FBRyxDQUFDO0NBQ2QsR0FDRCw2Q0FBNkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2Nvbm5lY3Rpb25fc3RyaW5nLmpzPzQ4NTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZFQVRVUkVfRkxBR1MgPSBleHBvcnRzLkRFRkFVTFRfT1BUSU9OUyA9IGV4cG9ydHMuT1BUSU9OUyA9IGV4cG9ydHMucGFyc2VPcHRpb25zID0gZXhwb3J0cy5yZXNvbHZlU1JWUmVjb3JkID0gdm9pZCAwO1xuY29uc3QgZG5zID0gcmVxdWlyZShcImRuc1wiKTtcbmNvbnN0IG1vbmdvZGJfY29ubmVjdGlvbl9zdHJpbmdfdXJsXzEgPSByZXF1aXJlKFwibW9uZ29kYi1jb25uZWN0aW9uLXN0cmluZy11cmxcIik7XG5jb25zdCB1cmxfMSA9IHJlcXVpcmUoXCJ1cmxcIik7XG5jb25zdCBtb25nb19jcmVkZW50aWFsc18xID0gcmVxdWlyZShcIi4vY21hcC9hdXRoL21vbmdvX2NyZWRlbnRpYWxzXCIpO1xuY29uc3QgcHJvdmlkZXJzXzEgPSByZXF1aXJlKFwiLi9jbWFwL2F1dGgvcHJvdmlkZXJzXCIpO1xuY29uc3QgY2xpZW50X21ldGFkYXRhXzEgPSByZXF1aXJlKFwiLi9jbWFwL2hhbmRzaGFrZS9jbGllbnRfbWV0YWRhdGFcIik7XG5jb25zdCBjb21wcmVzc2lvbl8xID0gcmVxdWlyZShcIi4vY21hcC93aXJlX3Byb3RvY29sL2NvbXByZXNzaW9uXCIpO1xuY29uc3QgZW5jcnlwdGVyXzEgPSByZXF1aXJlKFwiLi9lbmNyeXB0ZXJcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5jb25zdCBtb25nb19jbGllbnRfMSA9IHJlcXVpcmUoXCIuL21vbmdvX2NsaWVudFwiKTtcbmNvbnN0IG1vbmdvX2xvZ2dlcl8xID0gcmVxdWlyZShcIi4vbW9uZ29fbG9nZ2VyXCIpO1xuY29uc3QgcmVhZF9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi9yZWFkX2NvbmNlcm5cIik7XG5jb25zdCByZWFkX3ByZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuL3JlYWRfcHJlZmVyZW5jZVwiKTtcbmNvbnN0IG1vbml0b3JfMSA9IHJlcXVpcmUoXCIuL3NkYW0vbW9uaXRvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbmNvbnN0IHdyaXRlX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3dyaXRlX2NvbmNlcm5cIik7XG5jb25zdCBWQUxJRF9UWFRfUkVDT1JEUyA9IFsnYXV0aFNvdXJjZScsICdyZXBsaWNhU2V0JywgJ2xvYWRCYWxhbmNlZCddO1xuY29uc3QgTEJfU0lOR0xFX0hPU1RfRVJST1IgPSAnbG9hZEJhbGFuY2VkIG9wdGlvbiBvbmx5IHN1cHBvcnRlZCB3aXRoIGEgc2luZ2xlIGhvc3QgaW4gdGhlIFVSSSc7XG5jb25zdCBMQl9SRVBMSUNBX1NFVF9FUlJPUiA9ICdsb2FkQmFsYW5jZWQgb3B0aW9uIG5vdCBzdXBwb3J0ZWQgd2l0aCBhIHJlcGxpY2FTZXQgb3B0aW9uJztcbmNvbnN0IExCX0RJUkVDVF9DT05ORUNUSU9OX0VSUk9SID0gJ2xvYWRCYWxhbmNlZCBvcHRpb24gbm90IHN1cHBvcnRlZCB3aGVuIGRpcmVjdENvbm5lY3Rpb24gaXMgcHJvdmlkZWQnO1xuLyoqXG4gKiBMb29rdXAgYSBgbW9uZ29kYitzcnZgIGNvbm5lY3Rpb24gc3RyaW5nLCBjb21iaW5lIHRoZSBwYXJ0cyBhbmQgcmVwYXJzZSBpdCBhcyBhIG5vcm1hbFxuICogY29ubmVjdGlvbiBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHVyaSAtIFRoZSBjb25uZWN0aW9uIHN0cmluZyB0byBwYXJzZVxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCB1c2VyIHByb3ZpZGVkIGNvbm5lY3Rpb24gc3RyaW5nIG9wdGlvbnNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVNSVlJlY29yZChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnNydkhvc3QgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ09wdGlvbiBcInNydkhvc3RcIiBtdXN0IG5vdCBiZSBlbXB0eScpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zcnZIb3N0LnNwbGl0KCcuJykubGVuZ3RoIDwgMykge1xuICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NCk6IFJlcGxhY2Ugd2l0aCBNb25nb0Nvbm5lY3Rpb25TdHJpbmdFcnJvclxuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdVUkkgbXVzdCBpbmNsdWRlIGhvc3RuYW1lLCBkb21haW4gbmFtZSwgYW5kIHRsZCcpO1xuICAgIH1cbiAgICAvLyBBc3luY2hyb25vdXNseSBzdGFydCBUWFQgcmVzb2x1dGlvbiBzbyB0aGF0IHdlIGRvIG5vdCBoYXZlIHRvIHdhaXQgdW50aWxcbiAgICAvLyB0aGUgU1JWIHJlY29yZCBpcyByZXNvbHZlZCBiZWZvcmUgc3RhcnRpbmcgYSBzZWNvbmQgRE5TIHF1ZXJ5LlxuICAgIGNvbnN0IGxvb2t1cEFkZHJlc3MgPSBvcHRpb25zLnNydkhvc3Q7XG4gICAgY29uc3QgdHh0UmVzb2x1dGlvblByb21pc2UgPSBkbnMucHJvbWlzZXMucmVzb2x2ZVR4dChsb29rdXBBZGRyZXNzKTtcbiAgICB0eHRSZXNvbHV0aW9uUHJvbWlzZS5jYXRjaCgoKSA9PiB7XG4gICAgICAgIC8qIHJlamVjdGlvbnMgd2lsbCBiZSBoYW5kbGVkIGxhdGVyICovXG4gICAgfSk7XG4gICAgLy8gUmVzb2x2ZSB0aGUgU1JWIHJlY29yZCBhbmQgdXNlIHRoZSByZXN1bHQgYXMgdGhlIGxpc3Qgb2YgaG9zdHMgdG8gY29ubmVjdCB0by5cbiAgICBjb25zdCBhZGRyZXNzZXMgPSBhd2FpdCBkbnMucHJvbWlzZXMucmVzb2x2ZVNydihgXyR7b3B0aW9ucy5zcnZTZXJ2aWNlTmFtZX0uX3RjcC4ke2xvb2t1cEFkZHJlc3N9YCk7XG4gICAgaWYgKGFkZHJlc3Nlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignTm8gYWRkcmVzc2VzIGZvdW5kIGF0IGhvc3QnKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB7IG5hbWUgfSBvZiBhZGRyZXNzZXMpIHtcbiAgICAgICAgaWYgKCEoMCwgdXRpbHNfMS5tYXRjaGVzUGFyZW50RG9tYWluKShuYW1lLCBsb29rdXBBZGRyZXNzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignU2VydmVyIHJlY29yZCBkb2VzIG5vdCBzaGFyZSBob3N0bmFtZSB3aXRoIHBhcmVudCBVUkknKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBob3N0QWRkcmVzc2VzID0gYWRkcmVzc2VzLm1hcChyID0+IHV0aWxzXzEuSG9zdEFkZHJlc3MuZnJvbVN0cmluZyhgJHtyLm5hbWV9OiR7ci5wb3J0ID8/IDI3MDE3fWApKTtcbiAgICB2YWxpZGF0ZUxvYWRCYWxhbmNlZE9wdGlvbnMoaG9zdEFkZHJlc3Nlcywgb3B0aW9ucywgdHJ1ZSk7XG4gICAgLy8gVXNlIHRoZSByZXN1bHQgb2YgcmVzb2x2aW5nIHRoZSBUWFQgcmVjb3JkIGFuZCBhZGQgb3B0aW9ucyBmcm9tIHRoZXJlIGlmIHRoZXkgZXhpc3QuXG4gICAgbGV0IHJlY29yZDtcbiAgICB0cnkge1xuICAgICAgICByZWNvcmQgPSBhd2FpdCB0eHRSZXNvbHV0aW9uUHJvbWlzZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5jb2RlICE9PSAnRU5PREFUQScgJiYgZXJyb3IuY29kZSAhPT0gJ0VOT1RGT1VORCcpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBob3N0QWRkcmVzc2VzO1xuICAgIH1cbiAgICBpZiAocmVjb3JkLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKCdNdWx0aXBsZSB0ZXh0IHJlY29yZHMgbm90IGFsbG93ZWQnKTtcbiAgICB9XG4gICAgY29uc3QgdHh0UmVjb3JkT3B0aW9ucyA9IG5ldyB1cmxfMS5VUkxTZWFyY2hQYXJhbXMocmVjb3JkWzBdLmpvaW4oJycpKTtcbiAgICBjb25zdCB0eHRSZWNvcmRPcHRpb25LZXlzID0gWy4uLnR4dFJlY29yZE9wdGlvbnMua2V5cygpXTtcbiAgICBpZiAodHh0UmVjb3JkT3B0aW9uS2V5cy5zb21lKGtleSA9PiAhVkFMSURfVFhUX1JFQ09SRFMuaW5jbHVkZXMoa2V5KSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBUZXh0IHJlY29yZCBtYXkgb25seSBzZXQgYW55IG9mOiAke1ZBTElEX1RYVF9SRUNPUkRTLmpvaW4oJywgJyl9YCk7XG4gICAgfVxuICAgIGlmIChWQUxJRF9UWFRfUkVDT1JEUy5zb21lKG9wdGlvbiA9PiB0eHRSZWNvcmRPcHRpb25zLmdldChvcHRpb24pID09PSAnJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKCdDYW5ub3QgaGF2ZSBlbXB0eSBVUkkgcGFyYW1zIGluIEROUyBUWFQgUmVjb3JkJyk7XG4gICAgfVxuICAgIGNvbnN0IHNvdXJjZSA9IHR4dFJlY29yZE9wdGlvbnMuZ2V0KCdhdXRoU291cmNlJykgPz8gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHJlcGxpY2FTZXQgPSB0eHRSZWNvcmRPcHRpb25zLmdldCgncmVwbGljYVNldCcpID8/IHVuZGVmaW5lZDtcbiAgICBjb25zdCBsb2FkQmFsYW5jZWQgPSB0eHRSZWNvcmRPcHRpb25zLmdldCgnbG9hZEJhbGFuY2VkJykgPz8gdW5kZWZpbmVkO1xuICAgIGlmICghb3B0aW9ucy51c2VyU3BlY2lmaWVkQXV0aFNvdXJjZSAmJlxuICAgICAgICBzb3VyY2UgJiZcbiAgICAgICAgb3B0aW9ucy5jcmVkZW50aWFscyAmJlxuICAgICAgICAhcHJvdmlkZXJzXzEuQVVUSF9NRUNIU19BVVRIX1NSQ19FWFRFUk5BTC5oYXMob3B0aW9ucy5jcmVkZW50aWFscy5tZWNoYW5pc20pKSB7XG4gICAgICAgIG9wdGlvbnMuY3JlZGVudGlhbHMgPSBtb25nb19jcmVkZW50aWFsc18xLk1vbmdvQ3JlZGVudGlhbHMubWVyZ2Uob3B0aW9ucy5jcmVkZW50aWFscywgeyBzb3VyY2UgfSk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy51c2VyU3BlY2lmaWVkUmVwbGljYVNldCAmJiByZXBsaWNhU2V0KSB7XG4gICAgICAgIG9wdGlvbnMucmVwbGljYVNldCA9IHJlcGxpY2FTZXQ7XG4gICAgfVxuICAgIGlmIChsb2FkQmFsYW5jZWQgPT09ICd0cnVlJykge1xuICAgICAgICBvcHRpb25zLmxvYWRCYWxhbmNlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnJlcGxpY2FTZXQgJiYgb3B0aW9ucy5zcnZNYXhIb3N0cyA+IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKCdDYW5ub3QgY29tYmluZSByZXBsaWNhU2V0IG9wdGlvbiB3aXRoIHNydk1heEhvc3RzJyk7XG4gICAgfVxuICAgIHZhbGlkYXRlTG9hZEJhbGFuY2VkT3B0aW9ucyhob3N0QWRkcmVzc2VzLCBvcHRpb25zLCB0cnVlKTtcbiAgICByZXR1cm4gaG9zdEFkZHJlc3Nlcztcbn1cbmV4cG9ydHMucmVzb2x2ZVNSVlJlY29yZCA9IHJlc29sdmVTUlZSZWNvcmQ7XG4vKipcbiAqIENoZWNrcyBpZiBUTFMgb3B0aW9ucyBhcmUgdmFsaWRcbiAqXG4gKiBAcGFyYW0gYWxsT3B0aW9ucyAtIEFsbCBvcHRpb25zIHByb3ZpZGVkIGJ5IHVzZXIgb3IgaW5jbHVkZWQgaW4gZGVmYXVsdCBvcHRpb25zIG1hcFxuICogQHRocm93cyBNb25nb0FQSUVycm9yIGlmIFRMUyBvcHRpb25zIGFyZSBpbnZhbGlkXG4gKi9cbmZ1bmN0aW9uIGNoZWNrVExTT3B0aW9ucyhhbGxPcHRpb25zKSB7XG4gICAgaWYgKCFhbGxPcHRpb25zKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgY2hlY2sgPSAoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYWxsT3B0aW9ucy5oYXMoYSkgJiYgYWxsT3B0aW9ucy5oYXMoYikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoYFRoZSAnJHthfScgb3B0aW9uIGNhbm5vdCBiZSB1c2VkIHdpdGggdGhlICcke2J9JyBvcHRpb25gKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY2hlY2soJ3Rsc0luc2VjdXJlJywgJ3Rsc0FsbG93SW52YWxpZENlcnRpZmljYXRlcycpO1xuICAgIGNoZWNrKCd0bHNJbnNlY3VyZScsICd0bHNBbGxvd0ludmFsaWRIb3N0bmFtZXMnKTtcbiAgICBjaGVjaygndGxzSW5zZWN1cmUnLCAndGxzRGlzYWJsZUNlcnRpZmljYXRlUmV2b2NhdGlvbkNoZWNrJyk7XG4gICAgY2hlY2soJ3Rsc0luc2VjdXJlJywgJ3Rsc0Rpc2FibGVPQ1NQRW5kcG9pbnRDaGVjaycpO1xuICAgIGNoZWNrKCd0bHNBbGxvd0ludmFsaWRDZXJ0aWZpY2F0ZXMnLCAndGxzRGlzYWJsZUNlcnRpZmljYXRlUmV2b2NhdGlvbkNoZWNrJyk7XG4gICAgY2hlY2soJ3Rsc0FsbG93SW52YWxpZENlcnRpZmljYXRlcycsICd0bHNEaXNhYmxlT0NTUEVuZHBvaW50Q2hlY2snKTtcbiAgICBjaGVjaygndGxzRGlzYWJsZUNlcnRpZmljYXRlUmV2b2NhdGlvbkNoZWNrJywgJ3Rsc0Rpc2FibGVPQ1NQRW5kcG9pbnRDaGVjaycpO1xufVxuZnVuY3Rpb24gZ2V0Qm9vbGVhbihuYW1lLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJylcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgY2FzZSAndHJ1ZSc6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY2FzZSAnZmFsc2UnOlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGAke25hbWV9IG11c3QgYmUgZWl0aGVyIFwidHJ1ZVwiIG9yIFwiZmFsc2VcImApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEludEZyb21PcHRpb25zKG5hbWUsIHZhbHVlKSB7XG4gICAgY29uc3QgcGFyc2VkSW50ID0gKDAsIHV0aWxzXzEucGFyc2VJbnRlZ2VyKSh2YWx1ZSk7XG4gICAgaWYgKHBhcnNlZEludCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBwYXJzZWRJbnQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgRXhwZWN0ZWQgJHtuYW1lfSB0byBiZSBzdHJpbmdpZmllZCBpbnQgdmFsdWUsIGdvdDogJHt2YWx1ZX1gKTtcbn1cbmZ1bmN0aW9uIGdldFVJbnRGcm9tT3B0aW9ucyhuYW1lLCB2YWx1ZSkge1xuICAgIGNvbnN0IHBhcnNlZFZhbHVlID0gZ2V0SW50RnJvbU9wdGlvbnMobmFtZSwgdmFsdWUpO1xuICAgIGlmIChwYXJzZWRWYWx1ZSA8IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGAke25hbWV9IGNhbiBvbmx5IGJlIGEgcG9zaXRpdmUgaW50IHZhbHVlLCBnb3Q6ICR7dmFsdWV9YCk7XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWRWYWx1ZTtcbn1cbmZ1bmN0aW9uKiBlbnRyaWVzRnJvbVN0cmluZyh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBrZXlWYWx1ZVBhaXJzID0gdmFsdWUuc3BsaXQoJywnKTtcbiAgICBmb3IgKGNvbnN0IGtleVZhbHVlIG9mIGtleVZhbHVlUGFpcnMpIHtcbiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0ga2V5VmFsdWUuc3BsaXQoLzooLiopLyk7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ0Nhbm5vdCBoYXZlIHVuZGVmaW5lZCB2YWx1ZXMgaW4ga2V5IHZhbHVlIHBhaXJzJyk7XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQgW2tleSwgdmFsdWVdO1xuICAgIH1cbn1cbmNsYXNzIENhc2VJbnNlbnNpdGl2ZU1hcCBleHRlbmRzIE1hcCB7XG4gICAgY29uc3RydWN0b3IoZW50cmllcyA9IFtdKSB7XG4gICAgICAgIHN1cGVyKGVudHJpZXMubWFwKChbaywgdl0pID0+IFtrLnRvTG93ZXJDYXNlKCksIHZdKSk7XG4gICAgfVxuICAgIGhhcyhrKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5oYXMoay50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG4gICAgZ2V0KGspIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldChrLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cbiAgICBzZXQoaywgdikge1xuICAgICAgICByZXR1cm4gc3VwZXIuc2V0KGsudG9Mb3dlckNhc2UoKSwgdik7XG4gICAgfVxuICAgIGRlbGV0ZShrKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kZWxldGUoay50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwYXJzZU9wdGlvbnModXJpLCBtb25nb0NsaWVudCA9IHVuZGVmaW5lZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKG1vbmdvQ2xpZW50ICE9IG51bGwgJiYgIShtb25nb0NsaWVudCBpbnN0YW5jZW9mIG1vbmdvX2NsaWVudF8xLk1vbmdvQ2xpZW50KSkge1xuICAgICAgICBvcHRpb25zID0gbW9uZ29DbGllbnQ7XG4gICAgICAgIG1vbmdvQ2xpZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyB2YWxpZGF0ZSBCU09OT3B0aW9uc1xuICAgIGlmIChvcHRpb25zLnVzZUJpZ0ludDY0ICYmIHR5cGVvZiBvcHRpb25zLnByb21vdGVMb25ncyA9PT0gJ2Jvb2xlYW4nICYmICFvcHRpb25zLnByb21vdGVMb25ncykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdNdXN0IHJlcXVlc3QgZWl0aGVyIGJpZ2ludCBvciBMb25nIGZvciBpbnQ2NCBkZXNlcmlhbGl6YXRpb24nKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudXNlQmlnSW50NjQgJiYgdHlwZW9mIG9wdGlvbnMucHJvbW90ZVZhbHVlcyA9PT0gJ2Jvb2xlYW4nICYmICFvcHRpb25zLnByb21vdGVWYWx1ZXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignTXVzdCByZXF1ZXN0IGVpdGhlciBiaWdpbnQgb3IgTG9uZyBmb3IgaW50NjQgZGVzZXJpYWxpemF0aW9uJyk7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IG5ldyBtb25nb2RiX2Nvbm5lY3Rpb25fc3RyaW5nX3VybF8xLmRlZmF1bHQodXJpKTtcbiAgICBjb25zdCB7IGhvc3RzLCBpc1NSViB9ID0gdXJsO1xuICAgIGNvbnN0IG1vbmdvT3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgLy8gRmVhdHVyZSBmbGFnc1xuICAgIGZvciAoY29uc3QgZmxhZyBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9wdGlvbnMpKSB7XG4gICAgICAgIGlmIChleHBvcnRzLkZFQVRVUkVfRkxBR1MuaGFzKGZsYWcpKSB7XG4gICAgICAgICAgICBtb25nb09wdGlvbnNbZmxhZ10gPSBvcHRpb25zW2ZsYWddO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1vbmdvT3B0aW9ucy5ob3N0cyA9IGlzU1JWID8gW10gOiBob3N0cy5tYXAodXRpbHNfMS5Ib3N0QWRkcmVzcy5mcm9tU3RyaW5nKTtcbiAgICBjb25zdCB1cmxPcHRpb25zID0gbmV3IENhc2VJbnNlbnNpdGl2ZU1hcCgpO1xuICAgIGlmICh1cmwucGF0aG5hbWUgIT09ICcvJyAmJiB1cmwucGF0aG5hbWUgIT09ICcnKSB7XG4gICAgICAgIGNvbnN0IGRiTmFtZSA9IGRlY29kZVVSSUNvbXBvbmVudCh1cmwucGF0aG5hbWVbMF0gPT09ICcvJyA/IHVybC5wYXRobmFtZS5zbGljZSgxKSA6IHVybC5wYXRobmFtZSk7XG4gICAgICAgIGlmIChkYk5hbWUpIHtcbiAgICAgICAgICAgIHVybE9wdGlvbnMuc2V0KCdkYk5hbWUnLCBbZGJOYW1lXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHVybC51c2VybmFtZSAhPT0gJycpIHtcbiAgICAgICAgY29uc3QgYXV0aCA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBkZWNvZGVVUklDb21wb25lbnQodXJsLnVzZXJuYW1lKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHVybC5wYXNzd29yZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGF1dGgucGFzc3dvcmQgPSBkZWNvZGVVUklDb21wb25lbnQodXJsLnBhc3N3b3JkKTtcbiAgICAgICAgfVxuICAgICAgICB1cmxPcHRpb25zLnNldCgnYXV0aCcsIFthdXRoXSk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIHVybC5zZWFyY2hQYXJhbXMua2V5cygpKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0QWxsKGtleSk7XG4gICAgICAgIGNvbnN0IGlzUmVhZFByZWZlcmVuY2VUYWdzID0gL3JlYWRQcmVmZXJlbmNlVGFncy9pLnRlc3Qoa2V5KTtcbiAgICAgICAgaWYgKCFpc1JlYWRQcmVmZXJlbmNlVGFncyAmJiB2YWx1ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgVVJJIG9wdGlvbiBcIiR7a2V5fVwiIGNhbm5vdCBhcHBlYXIgbW9yZSB0aGFuIG9uY2UgaW4gdGhlIGNvbm5lY3Rpb24gc3RyaW5nYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1JlYWRQcmVmZXJlbmNlVGFncyAmJiB2YWx1ZXMuaW5jbHVkZXMoJycpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKGBVUkkgb3B0aW9uIFwiJHtrZXl9XCIgY2Fubm90IGJlIHNwZWNpZmllZCB3aXRoIG5vIHZhbHVlYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF1cmxPcHRpb25zLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB1cmxPcHRpb25zLnNldChrZXksIHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgb2JqZWN0T3B0aW9ucyA9IG5ldyBDYXNlSW5zZW5zaXRpdmVNYXAoT2JqZWN0LmVudHJpZXMob3B0aW9ucykuZmlsdGVyKChbLCB2XSkgPT4gdiAhPSBudWxsKSk7XG4gICAgLy8gVmFsaWRhdGUgb3B0aW9ucyB0aGF0IGNhbiBvbmx5IGJlIHByb3ZpZGVkIGJ5IG9uZSBvZiB1cmkgb3Igb2JqZWN0XG4gICAgaWYgKHVybE9wdGlvbnMuaGFzKCdzZXJ2ZXJBcGknKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ1VSSSBjYW5ub3QgY29udGFpbiBgc2VydmVyQXBpYCwgaXQgY2FuIG9ubHkgYmUgcGFzc2VkIHRvIHRoZSBjbGllbnQnKTtcbiAgICB9XG4gICAgY29uc3QgdXJpTWVjaGFuaXNtUHJvcGVydGllcyA9IHVybE9wdGlvbnMuZ2V0KCdhdXRoTWVjaGFuaXNtUHJvcGVydGllcycpO1xuICAgIGlmICh1cmlNZWNoYW5pc21Qcm9wZXJ0aWVzKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvcGVydHkgb2YgdXJpTWVjaGFuaXNtUHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKC8oXnwsKUFMTE9XRURfSE9TVFM6Ly50ZXN0KHByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcignQXV0aCBtZWNoYW5pc20gcHJvcGVydHkgQUxMT1dFRF9IT1NUUyBpcyBub3QgYWxsb3dlZCBpbiB0aGUgY29ubmVjdGlvbiBzdHJpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9iamVjdE9wdGlvbnMuaGFzKCdsb2FkQmFsYW5jZWQnKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ2xvYWRCYWxhbmNlZCBpcyBvbmx5IGEgdmFsaWQgb3B0aW9uIGluIHRoZSBVUkknKTtcbiAgICB9XG4gICAgLy8gQWxsIG9wdGlvbiBjb2xsZWN0aW9uXG4gICAgY29uc3QgYWxsUHJvdmlkZWRPcHRpb25zID0gbmV3IENhc2VJbnNlbnNpdGl2ZU1hcCgpO1xuICAgIGNvbnN0IGFsbFByb3ZpZGVkS2V5cyA9IG5ldyBTZXQoWy4uLnVybE9wdGlvbnMua2V5cygpLCAuLi5vYmplY3RPcHRpb25zLmtleXMoKV0pO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIGFsbFByb3ZpZGVkS2V5cykge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgY29uc3Qgb2JqZWN0T3B0aW9uVmFsdWUgPSBvYmplY3RPcHRpb25zLmdldChrZXkpO1xuICAgICAgICBpZiAob2JqZWN0T3B0aW9uVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2gob2JqZWN0T3B0aW9uVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVybFZhbHVlcyA9IHVybE9wdGlvbnMuZ2V0KGtleSkgPz8gW107XG4gICAgICAgIHZhbHVlcy5wdXNoKC4uLnVybFZhbHVlcyk7XG4gICAgICAgIGFsbFByb3ZpZGVkT3B0aW9ucy5zZXQoa2V5LCB2YWx1ZXMpO1xuICAgIH1cbiAgICBpZiAoYWxsUHJvdmlkZWRPcHRpb25zLmhhcygndGxzJykgfHwgYWxsUHJvdmlkZWRPcHRpb25zLmhhcygnc3NsJykpIHtcbiAgICAgICAgY29uc3QgdGxzQW5kU3NsT3B0cyA9IChhbGxQcm92aWRlZE9wdGlvbnMuZ2V0KCd0bHMnKSB8fCBbXSlcbiAgICAgICAgICAgIC5jb25jYXQoYWxsUHJvdmlkZWRPcHRpb25zLmdldCgnc3NsJykgfHwgW10pXG4gICAgICAgICAgICAubWFwKGdldEJvb2xlYW4uYmluZChudWxsLCAndGxzL3NzbCcpKTtcbiAgICAgICAgaWYgKG5ldyBTZXQodGxzQW5kU3NsT3B0cykuc2l6ZSAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKCdBbGwgdmFsdWVzIG9mIHRscy9zc2wgbXVzdCBiZSB0aGUgc2FtZS4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGVja1RMU09wdGlvbnMoYWxsUHJvdmlkZWRPcHRpb25zKTtcbiAgICBjb25zdCB1bnN1cHBvcnRlZE9wdGlvbnMgPSAoMCwgdXRpbHNfMS5zZXREaWZmZXJlbmNlKShhbGxQcm92aWRlZEtleXMsIEFycmF5LmZyb20oT2JqZWN0LmtleXMoZXhwb3J0cy5PUFRJT05TKSkubWFwKHMgPT4gcy50b0xvd2VyQ2FzZSgpKSk7XG4gICAgaWYgKHVuc3VwcG9ydGVkT3B0aW9ucy5zaXplICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbldvcmQgPSB1bnN1cHBvcnRlZE9wdGlvbnMuc2l6ZSA+IDEgPyAnb3B0aW9ucycgOiAnb3B0aW9uJztcbiAgICAgICAgY29uc3QgaXNPckFyZSA9IHVuc3VwcG9ydGVkT3B0aW9ucy5zaXplID4gMSA/ICdhcmUnIDogJ2lzJztcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGAke29wdGlvbldvcmR9ICR7QXJyYXkuZnJvbSh1bnN1cHBvcnRlZE9wdGlvbnMpLmpvaW4oJywgJyl9ICR7aXNPckFyZX0gbm90IHN1cHBvcnRlZGApO1xuICAgIH1cbiAgICAvLyBPcHRpb24gcGFyc2luZyBhbmQgc2V0dGluZ1xuICAgIGZvciAoY29uc3QgW2tleSwgZGVzY3JpcHRvcl0gb2YgT2JqZWN0LmVudHJpZXMoZXhwb3J0cy5PUFRJT05TKSkge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBhbGxQcm92aWRlZE9wdGlvbnMuZ2V0KGtleSk7XG4gICAgICAgIGlmICghdmFsdWVzIHx8IHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmIChleHBvcnRzLkRFRkFVTFRfT1BUSU9OUy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIHNldE9wdGlvbihtb25nb09wdGlvbnMsIGtleSwgZGVzY3JpcHRvciwgW2V4cG9ydHMuREVGQVVMVF9PUFRJT05TLmdldChrZXkpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7IGRlcHJlY2F0ZWQgfSA9IGRlc2NyaXB0b3I7XG4gICAgICAgICAgICBpZiAoZGVwcmVjYXRlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcHJlY2F0ZWRNc2cgPSB0eXBlb2YgZGVwcmVjYXRlZCA9PT0gJ3N0cmluZycgPyBgOiAke2RlcHJlY2F0ZWR9YCA6ICcnO1xuICAgICAgICAgICAgICAgICgwLCB1dGlsc18xLmVtaXRXYXJuaW5nKShgJHtrZXl9IGlzIGEgZGVwcmVjYXRlZCBvcHRpb24ke2RlcHJlY2F0ZWRNc2d9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRPcHRpb24obW9uZ29PcHRpb25zLCBrZXksIGRlc2NyaXB0b3IsIHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscykge1xuICAgICAgICBjb25zdCBpc0dzc2FwaSA9IG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9HU1NBUEk7XG4gICAgICAgIGNvbnN0IGlzWDUwOSA9IG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9YNTA5O1xuICAgICAgICBjb25zdCBpc0F3cyA9IG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9BV1M7XG4gICAgICAgIGNvbnN0IGlzT2lkYyA9IG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9PSURDO1xuICAgICAgICBpZiAoKGlzR3NzYXBpIHx8IGlzWDUwOSkgJiZcbiAgICAgICAgICAgIGFsbFByb3ZpZGVkT3B0aW9ucy5oYXMoJ2F1dGhTb3VyY2UnKSAmJlxuICAgICAgICAgICAgbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLnNvdXJjZSAhPT0gJyRleHRlcm5hbCcpIHtcbiAgICAgICAgICAgIC8vIElmIGF1dGhTb3VyY2Ugd2FzIGV4cGxpY2l0bHkgZ2l2ZW4gYW5kIGl0cyBpbmNvcnJlY3QsIHdlIGVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYGF1dGhNZWNoYW5pc20gJHttb25nb09wdGlvbnMuY3JlZGVudGlhbHMubWVjaGFuaXNtfSByZXF1aXJlcyBhbiBhdXRoU291cmNlIG9mICckZXh0ZXJuYWwnYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoaXNHc3NhcGkgfHwgaXNYNTA5IHx8IGlzQXdzIHx8IGlzT2lkYykgJiZcbiAgICAgICAgICAgIG1vbmdvT3B0aW9ucy5kYk5hbWUgJiZcbiAgICAgICAgICAgICFhbGxQcm92aWRlZE9wdGlvbnMuaGFzKCdhdXRoU291cmNlJykpIHtcbiAgICAgICAgICAgIC8vIGluaGVyaXQgdGhlIGRiTmFtZSB1bmxlc3MgR1NTQVBJIG9yIFg1MDksIHRoZW4gc2lsZW50bHkgaWdub3JlIGRiTmFtZVxuICAgICAgICAgICAgLy8gYW5kIHRoZXJlIHdhcyBubyBzcGVjaWZpYyBhdXRoU291cmNlIGdpdmVuXG4gICAgICAgICAgICBtb25nb09wdGlvbnMuY3JlZGVudGlhbHMgPSBtb25nb19jcmVkZW50aWFsc18xLk1vbmdvQ3JlZGVudGlhbHMubWVyZ2UobW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLCB7XG4gICAgICAgICAgICAgICAgc291cmNlOiBtb25nb09wdGlvbnMuZGJOYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBd3MgJiYgbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLnVzZXJuYW1lICYmICFtb25nb09wdGlvbnMuY3JlZGVudGlhbHMucGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IoYFdoZW4gdXNpbmcgJHttb25nb09wdGlvbnMuY3JlZGVudGlhbHMubWVjaGFuaXNtfSBwYXNzd29yZCBtdXN0IGJlIHNldCB3aGVuIGEgdXNlcm5hbWUgaXMgc3BlY2lmaWVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzLnZhbGlkYXRlKCk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBvbmx5IGF1dGggcmVsYXRlZCBvcHRpb24gcHJvdmlkZWQgd2FzIGF1dGhTb3VyY2UsIGlmIHNvIHdlIGNhbiByZW1vdmUgY3JlZGVudGlhbHNcbiAgICAgICAgaWYgKG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5wYXNzd29yZCA9PT0gJycgJiZcbiAgICAgICAgICAgIG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscy51c2VybmFtZSA9PT0gJycgJiZcbiAgICAgICAgICAgIG1vbmdvT3B0aW9ucy5jcmVkZW50aWFscy5tZWNoYW5pc20gPT09IHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9ERUZBVUxUICYmXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhtb25nb09wdGlvbnMuY3JlZGVudGlhbHMubWVjaGFuaXNtUHJvcGVydGllcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBkZWxldGUgbW9uZ29PcHRpb25zLmNyZWRlbnRpYWxzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghbW9uZ29PcHRpb25zLmRiTmFtZSkge1xuICAgICAgICAvLyBkYk5hbWUgZGVmYXVsdCBpcyBhcHBsaWVkIGhlcmUgYmVjYXVzZSBvZiB0aGUgY3JlZGVudGlhbCB2YWxpZGF0aW9uIGFib3ZlXG4gICAgICAgIG1vbmdvT3B0aW9ucy5kYk5hbWUgPSAndGVzdCc7XG4gICAgfVxuICAgIHZhbGlkYXRlTG9hZEJhbGFuY2VkT3B0aW9ucyhob3N0cywgbW9uZ29PcHRpb25zLCBpc1NSVik7XG4gICAgaWYgKG1vbmdvQ2xpZW50ICYmIG1vbmdvT3B0aW9ucy5hdXRvRW5jcnlwdGlvbikge1xuICAgICAgICBlbmNyeXB0ZXJfMS5FbmNyeXB0ZXIuY2hlY2tGb3JNb25nb0NyeXB0KCk7XG4gICAgICAgIG1vbmdvT3B0aW9ucy5lbmNyeXB0ZXIgPSBuZXcgZW5jcnlwdGVyXzEuRW5jcnlwdGVyKG1vbmdvQ2xpZW50LCB1cmksIG9wdGlvbnMpO1xuICAgICAgICBtb25nb09wdGlvbnMuYXV0b0VuY3J5cHRlciA9IG1vbmdvT3B0aW9ucy5lbmNyeXB0ZXIuYXV0b0VuY3J5cHRlcjtcbiAgICB9XG4gICAgLy8gUG90ZW50aWFsIFNSViBPdmVycmlkZXMgYW5kIFNSViBjb25uZWN0aW9uIHN0cmluZyB2YWxpZGF0aW9uc1xuICAgIG1vbmdvT3B0aW9ucy51c2VyU3BlY2lmaWVkQXV0aFNvdXJjZSA9XG4gICAgICAgIG9iamVjdE9wdGlvbnMuaGFzKCdhdXRoU291cmNlJykgfHwgdXJsT3B0aW9ucy5oYXMoJ2F1dGhTb3VyY2UnKTtcbiAgICBtb25nb09wdGlvbnMudXNlclNwZWNpZmllZFJlcGxpY2FTZXQgPVxuICAgICAgICBvYmplY3RPcHRpb25zLmhhcygncmVwbGljYVNldCcpIHx8IHVybE9wdGlvbnMuaGFzKCdyZXBsaWNhU2V0Jyk7XG4gICAgaWYgKGlzU1JWKSB7XG4gICAgICAgIC8vIFNSViBSZWNvcmQgaXMgcmVzb2x2ZWQgdXBvbiBjb25uZWN0aW5nXG4gICAgICAgIG1vbmdvT3B0aW9ucy5zcnZIb3N0ID0gaG9zdHNbMF07XG4gICAgICAgIGlmIChtb25nb09wdGlvbnMuZGlyZWN0Q29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignU1JWIFVSSSBkb2VzIG5vdCBzdXBwb3J0IGRpcmVjdENvbm5lY3Rpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW9uZ29PcHRpb25zLnNydk1heEhvc3RzID4gMCAmJiB0eXBlb2YgbW9uZ29PcHRpb25zLnJlcGxpY2FTZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ0Nhbm5vdCB1c2Ugc3J2TWF4SG9zdHMgb3B0aW9uIHdpdGggcmVwbGljYVNldCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNSViB0dXJucyBvbiBUTFMgYnkgZGVmYXVsdCwgYnV0IHVzZXJzIGNhbiBvdmVycmlkZSBhbmQgdHVybiBpdCBvZmZcbiAgICAgICAgY29uc3Qgbm9Vc2VyU3BlY2lmaWVkVExTID0gIW9iamVjdE9wdGlvbnMuaGFzKCd0bHMnKSAmJiAhdXJsT3B0aW9ucy5oYXMoJ3RscycpO1xuICAgICAgICBjb25zdCBub1VzZXJTcGVjaWZpZWRTU0wgPSAhb2JqZWN0T3B0aW9ucy5oYXMoJ3NzbCcpICYmICF1cmxPcHRpb25zLmhhcygnc3NsJyk7XG4gICAgICAgIGlmIChub1VzZXJTcGVjaWZpZWRUTFMgJiYgbm9Vc2VyU3BlY2lmaWVkU1NMKSB7XG4gICAgICAgICAgICBtb25nb09wdGlvbnMudGxzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgdXNlclNwZWNpZmllZFNydk9wdGlvbnMgPSB1cmxPcHRpb25zLmhhcygnc3J2TWF4SG9zdHMnKSB8fFxuICAgICAgICAgICAgb2JqZWN0T3B0aW9ucy5oYXMoJ3Nydk1heEhvc3RzJykgfHxcbiAgICAgICAgICAgIHVybE9wdGlvbnMuaGFzKCdzcnZTZXJ2aWNlTmFtZScpIHx8XG4gICAgICAgICAgICBvYmplY3RPcHRpb25zLmhhcygnc3J2U2VydmljZU5hbWUnKTtcbiAgICAgICAgaWYgKHVzZXJTcGVjaWZpZWRTcnZPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ0Nhbm5vdCB1c2Ugc3J2TWF4SG9zdHMgb3Igc3J2U2VydmljZU5hbWUgd2l0aCBhIG5vbi1zcnYgY29ubmVjdGlvbiBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobW9uZ29PcHRpb25zLmRpcmVjdENvbm5lY3Rpb24gJiYgbW9uZ29PcHRpb25zLmhvc3RzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ2RpcmVjdENvbm5lY3Rpb24gb3B0aW9uIHJlcXVpcmVzIGV4YWN0bHkgb25lIGhvc3QnKTtcbiAgICB9XG4gICAgaWYgKCFtb25nb09wdGlvbnMucHJveHlIb3N0ICYmXG4gICAgICAgIChtb25nb09wdGlvbnMucHJveHlQb3J0IHx8IG1vbmdvT3B0aW9ucy5wcm94eVVzZXJuYW1lIHx8IG1vbmdvT3B0aW9ucy5wcm94eVBhc3N3b3JkKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ011c3Qgc3BlY2lmeSBwcm94eUhvc3QgaWYgb3RoZXIgcHJveHkgb3B0aW9ucyBhcmUgcGFzc2VkJyk7XG4gICAgfVxuICAgIGlmICgobW9uZ29PcHRpb25zLnByb3h5VXNlcm5hbWUgJiYgIW1vbmdvT3B0aW9ucy5wcm94eVBhc3N3b3JkKSB8fFxuICAgICAgICAoIW1vbmdvT3B0aW9ucy5wcm94eVVzZXJuYW1lICYmIG1vbmdvT3B0aW9ucy5wcm94eVBhc3N3b3JkKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ0NhbiBvbmx5IHNwZWNpZnkgYm90aCBvZiBwcm94eSB1c2VybmFtZS9wYXNzd29yZCBvciBuZWl0aGVyJyk7XG4gICAgfVxuICAgIGNvbnN0IHByb3h5T3B0aW9ucyA9IFsncHJveHlIb3N0JywgJ3Byb3h5UG9ydCcsICdwcm94eVVzZXJuYW1lJywgJ3Byb3h5UGFzc3dvcmQnXS5tYXAoa2V5ID0+IHVybE9wdGlvbnMuZ2V0KGtleSkgPz8gW10pO1xuICAgIGlmIChwcm94eU9wdGlvbnMuc29tZShvcHRpb25zID0+IG9wdGlvbnMubGVuZ3RoID4gMSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKCdQcm94eSBvcHRpb25zIGNhbm5vdCBiZSBzcGVjaWZpZWQgbXVsdGlwbGUgdGltZXMgaW4gdGhlIGNvbm5lY3Rpb24gc3RyaW5nJyk7XG4gICAgfVxuICAgIGNvbnN0IGxvZ2dlckZlYXR1cmVGbGFnID0gU3ltYm9sLmZvcignQEBtZGIuZW5hYmxlTW9uZ29Mb2dnZXInKTtcbiAgICBtb25nb09wdGlvbnNbbG9nZ2VyRmVhdHVyZUZsYWddID0gbW9uZ29PcHRpb25zW2xvZ2dlckZlYXR1cmVGbGFnXSA/PyBmYWxzZTtcbiAgICBsZXQgbG9nZ2VyRW52T3B0aW9ucyA9IHt9O1xuICAgIGxldCBsb2dnZXJDbGllbnRPcHRpb25zID0ge307XG4gICAgaWYgKG1vbmdvT3B0aW9uc1tsb2dnZXJGZWF0dXJlRmxhZ10pIHtcbiAgICAgICAgbG9nZ2VyRW52T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIE1PTkdPREJfTE9HX0NPTU1BTkQ6IHByb2Nlc3MuZW52Lk1PTkdPREJfTE9HX0NPTU1BTkQsXG4gICAgICAgICAgICBNT05HT0RCX0xPR19UT1BPTE9HWTogcHJvY2Vzcy5lbnYuTU9OR09EQl9MT0dfVE9QT0xPR1ksXG4gICAgICAgICAgICBNT05HT0RCX0xPR19TRVJWRVJfU0VMRUNUSU9OOiBwcm9jZXNzLmVudi5NT05HT0RCX0xPR19TRVJWRVJfU0VMRUNUSU9OLFxuICAgICAgICAgICAgTU9OR09EQl9MT0dfQ09OTkVDVElPTjogcHJvY2Vzcy5lbnYuTU9OR09EQl9MT0dfQ09OTkVDVElPTixcbiAgICAgICAgICAgIE1PTkdPREJfTE9HX0NMSUVOVDogcHJvY2Vzcy5lbnYuTU9OR09EQl9MT0dfQ0xJRU5ULFxuICAgICAgICAgICAgTU9OR09EQl9MT0dfQUxMOiBwcm9jZXNzLmVudi5NT05HT0RCX0xPR19BTEwsXG4gICAgICAgICAgICBNT05HT0RCX0xPR19NQVhfRE9DVU1FTlRfTEVOR1RIOiBwcm9jZXNzLmVudi5NT05HT0RCX0xPR19NQVhfRE9DVU1FTlRfTEVOR1RILFxuICAgICAgICAgICAgTU9OR09EQl9MT0dfUEFUSDogcHJvY2Vzcy5lbnYuTU9OR09EQl9MT0dfUEFUSCxcbiAgICAgICAgICAgIC4uLm1vbmdvT3B0aW9uc1tTeW1ib2wuZm9yKCdAQG1kYi5pbnRlcm5hbExvZ2dlckNvbmZpZycpXVxuICAgICAgICB9O1xuICAgICAgICBsb2dnZXJDbGllbnRPcHRpb25zID0ge1xuICAgICAgICAgICAgbW9uZ29kYkxvZ1BhdGg6IG1vbmdvT3B0aW9ucy5tb25nb2RiTG9nUGF0aCxcbiAgICAgICAgICAgIG1vbmdvZGJMb2dDb21wb25lbnRTZXZlcml0aWVzOiBtb25nb09wdGlvbnMubW9uZ29kYkxvZ0NvbXBvbmVudFNldmVyaXRpZXMsXG4gICAgICAgICAgICBtb25nb2RiTG9nTWF4RG9jdW1lbnRMZW5ndGg6IG1vbmdvT3B0aW9ucy5tb25nb2RiTG9nTWF4RG9jdW1lbnRMZW5ndGhcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbW9uZ29PcHRpb25zLm1vbmdvTG9nZ2VyT3B0aW9ucyA9IG1vbmdvX2xvZ2dlcl8xLk1vbmdvTG9nZ2VyLnJlc29sdmVPcHRpb25zKGxvZ2dlckVudk9wdGlvbnMsIGxvZ2dlckNsaWVudE9wdGlvbnMpO1xuICAgIG1vbmdvT3B0aW9ucy5tZXRhZGF0YSA9ICgwLCBjbGllbnRfbWV0YWRhdGFfMS5tYWtlQ2xpZW50TWV0YWRhdGEpKG1vbmdvT3B0aW9ucyk7XG4gICAgbW9uZ29PcHRpb25zLmV4dGVuZGVkTWV0YWRhdGEgPSAoMCwgY2xpZW50X21ldGFkYXRhXzEuYWRkQ29udGFpbmVyTWV0YWRhdGEpKG1vbmdvT3B0aW9ucy5tZXRhZGF0YSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAvKiByZWplY3Rpb25zIHdpbGwgYmUgaGFuZGxlZCBsYXRlciAqL1xuICAgIH0pO1xuICAgIHJldHVybiBtb25nb09wdGlvbnM7XG59XG5leHBvcnRzLnBhcnNlT3B0aW9ucyA9IHBhcnNlT3B0aW9ucztcbi8qKlxuICogIyMjIyBUaHJvd3MgaWYgTEIgbW9kZSBpcyB0cnVlOlxuICogLSBob3N0cyBjb250YWlucyBtb3JlIHRoYW4gb25lIGhvc3RcbiAqIC0gdGhlcmUgaXMgYSByZXBsaWNhU2V0IG5hbWUgc2V0XG4gKiAtIGRpcmVjdENvbm5lY3Rpb24gaXMgc2V0XG4gKiAtIGlmIHNydk1heEhvc3RzIGlzIHVzZWQgd2hlbiBhbiBzcnYgY29ubmVjdGlvbiBzdHJpbmcgaXMgcGFzc2VkIGluXG4gKlxuICogQHRocm93cyBNb25nb1BhcnNlRXJyb3JcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVMb2FkQmFsYW5jZWRPcHRpb25zKGhvc3RzLCBtb25nb09wdGlvbnMsIGlzU3J2KSB7XG4gICAgaWYgKG1vbmdvT3B0aW9ucy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgaWYgKGhvc3RzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihMQl9TSU5HTEVfSE9TVF9FUlJPUik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vbmdvT3B0aW9ucy5yZXBsaWNhU2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoTEJfUkVQTElDQV9TRVRfRVJST1IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb25nb09wdGlvbnMuZGlyZWN0Q29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKExCX0RJUkVDVF9DT05ORUNUSU9OX0VSUk9SKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNTcnYgJiYgbW9uZ29PcHRpb25zLnNydk1heEhvc3RzID4gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKCdDYW5ub3QgbGltaXQgc3J2IGhvc3RzIHdpdGggbG9hZEJhbGFuY2VkIGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG59XG5mdW5jdGlvbiBzZXRPcHRpb24obW9uZ29PcHRpb25zLCBrZXksIGRlc2NyaXB0b3IsIHZhbHVlcykge1xuICAgIGNvbnN0IHsgdGFyZ2V0LCB0eXBlLCB0cmFuc2Zvcm0gfSA9IGRlc2NyaXB0b3I7XG4gICAgY29uc3QgbmFtZSA9IHRhcmdldCA/PyBrZXk7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgbW9uZ29PcHRpb25zW25hbWVdID0gZ2V0Qm9vbGVhbihuYW1lLCB2YWx1ZXNbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICBtb25nb09wdGlvbnNbbmFtZV0gPSBnZXRJbnRGcm9tT3B0aW9ucyhuYW1lLCB2YWx1ZXNbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3VpbnQnOlxuICAgICAgICAgICAgbW9uZ29PcHRpb25zW25hbWVdID0gZ2V0VUludEZyb21PcHRpb25zKG5hbWUsIHZhbHVlc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbMF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9uZ29PcHRpb25zW25hbWVdID0gU3RyaW5nKHZhbHVlc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmVjb3JkJzpcbiAgICAgICAgICAgIGlmICghKDAsIHV0aWxzXzEuaXNSZWNvcmQpKHZhbHVlc1swXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhbiBvYmplY3RgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vbmdvT3B0aW9uc1tuYW1lXSA9IHZhbHVlc1swXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdhbnknOlxuICAgICAgICAgICAgbW9uZ29PcHRpb25zW25hbWVdID0gdmFsdWVzWzBdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGlmICghdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKCdEZXNjcmlwdG9ycyBtaXNzaW5nIGEgdHlwZSBtdXN0IGRlZmluZSBhIHRyYW5zZm9ybScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtVmFsdWUgPSB0cmFuc2Zvcm0oeyBuYW1lLCBvcHRpb25zOiBtb25nb09wdGlvbnMsIHZhbHVlcyB9KTtcbiAgICAgICAgICAgIG1vbmdvT3B0aW9uc1tuYW1lXSA9IHRyYW5zZm9ybVZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLk9QVElPTlMgPSB7XG4gICAgYXBwTmFtZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgYXV0aDoge1xuICAgICAgICB0YXJnZXQ6ICdjcmVkZW50aWFscycsXG4gICAgICAgIHRyYW5zZm9ybSh7IG5hbWUsIG9wdGlvbnMsIHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBpZiAoISgwLCB1dGlsc18xLmlzUmVjb3JkKSh2YWx1ZSwgWyd1c2VybmFtZScsICdwYXNzd29yZCddKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoICd1c2VybmFtZScgYW5kICdwYXNzd29yZCcgcHJvcGVydGllc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vbmdvX2NyZWRlbnRpYWxzXzEuTW9uZ29DcmVkZW50aWFscy5tZXJnZShvcHRpb25zLmNyZWRlbnRpYWxzLCB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHZhbHVlLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB2YWx1ZS5wYXNzd29yZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGF1dGhNZWNoYW5pc206IHtcbiAgICAgICAgdGFyZ2V0OiAnY3JlZGVudGlhbHMnLFxuICAgICAgICB0cmFuc2Zvcm0oeyBvcHRpb25zLCB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgY29uc3QgbWVjaGFuaXNtcyA9IE9iamVjdC52YWx1ZXMocHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbSk7XG4gICAgICAgICAgICBjb25zdCBbbWVjaGFuaXNtXSA9IG1lY2hhbmlzbXMuZmlsdGVyKG0gPT4gbS5tYXRjaChSZWdFeHAoU3RyaW5nLnJhdyBgXFxiJHt2YWx1ZX1cXGJgLCAnaScpKSk7XG4gICAgICAgICAgICBpZiAoIW1lY2hhbmlzbSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgYXV0aE1lY2hhbmlzbSBvbmUgb2YgJHttZWNoYW5pc21zfSwgZ290ICR7dmFsdWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc291cmNlID0gb3B0aW9ucy5jcmVkZW50aWFscz8uc291cmNlO1xuICAgICAgICAgICAgaWYgKG1lY2hhbmlzbSA9PT0gcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1BMQUlOIHx8XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzXzEuQVVUSF9NRUNIU19BVVRIX1NSQ19FWFRFUk5BTC5oYXMobWVjaGFuaXNtKSkge1xuICAgICAgICAgICAgICAgIC8vIHNvbWUgbWVjaGFuaXNtcyBoYXZlICckZXh0ZXJuYWwnIGFzIHRoZSBBdXRoIFNvdXJjZVxuICAgICAgICAgICAgICAgIHNvdXJjZSA9ICckZXh0ZXJuYWwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHBhc3N3b3JkID0gb3B0aW9ucy5jcmVkZW50aWFscz8ucGFzc3dvcmQ7XG4gICAgICAgICAgICBpZiAobWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfWDUwOSAmJiBwYXNzd29yZCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBwYXNzd29yZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb25nb19jcmVkZW50aWFsc18xLk1vbmdvQ3JlZGVudGlhbHMubWVyZ2Uob3B0aW9ucy5jcmVkZW50aWFscywge1xuICAgICAgICAgICAgICAgIG1lY2hhbmlzbSxcbiAgICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBhdXRoTWVjaGFuaXNtUHJvcGVydGllczoge1xuICAgICAgICB0YXJnZXQ6ICdjcmVkZW50aWFscycsXG4gICAgICAgIHRyYW5zZm9ybSh7IG9wdGlvbnMsIHZhbHVlcyB9KSB7XG4gICAgICAgICAgICAvLyBXZSBjYW4gaGF2ZSBhIGNvbWJpbmF0aW9uIG9mIG9wdGlvbnMgcGFzc2VkIGluIHRoZSBVUkkgYW5kIG9wdGlvbnMgcGFzc2VkXG4gICAgICAgICAgICAvLyBhcyBhbiBvYmplY3QgdG8gdGhlIE1vbmdvQ2xpZW50LiBTbyB3ZSBtdXN0IHRyYW5zZm9ybSB0aGUgc3RyaW5nIG9wdGlvbnNcbiAgICAgICAgICAgIC8vIGFzIHdlbGwgYXMgbWVyZ2UgdGhlbSB0b2dldGhlciB3aXRoIGEgcG90ZW50aWFsbHkgcHJvdmlkZWQgb2JqZWN0LlxuICAgICAgICAgICAgbGV0IG1lY2hhbmlzbVByb3BlcnRpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb25WYWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvblZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBlbnRyaWVzRnJvbVN0cmluZyhvcHRpb25WYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVjaGFuaXNtUHJvcGVydGllc1trZXldID0gZ2V0Qm9vbGVhbihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWNoYW5pc21Qcm9wZXJ0aWVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoMCwgdXRpbHNfMS5pc1JlY29yZCkob3B0aW9uVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ0F1dGhNZWNoYW5pc21Qcm9wZXJ0aWVzIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWVjaGFuaXNtUHJvcGVydGllcyA9IHsgLi4ub3B0aW9uVmFsdWUgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbW9uZ29fY3JlZGVudGlhbHNfMS5Nb25nb0NyZWRlbnRpYWxzLm1lcmdlKG9wdGlvbnMuY3JlZGVudGlhbHMsIHtcbiAgICAgICAgICAgICAgICBtZWNoYW5pc21Qcm9wZXJ0aWVzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYXV0aFNvdXJjZToge1xuICAgICAgICB0YXJnZXQ6ICdjcmVkZW50aWFscycsXG4gICAgICAgIHRyYW5zZm9ybSh7IG9wdGlvbnMsIHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG1vbmdvX2NyZWRlbnRpYWxzXzEuTW9uZ29DcmVkZW50aWFscy5tZXJnZShvcHRpb25zLmNyZWRlbnRpYWxzLCB7IHNvdXJjZSB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYXV0b0VuY3J5cHRpb246IHtcbiAgICAgICAgdHlwZTogJ3JlY29yZCdcbiAgICB9LFxuICAgIGJzb25SZWdFeHA6IHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBzZXJ2ZXJBcGk6IHtcbiAgICAgICAgdGFyZ2V0OiAnc2VydmVyQXBpJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzOiBbdmVyc2lvbl0gfSkge1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyQXBpVG9WYWxpZGF0ZSA9IHR5cGVvZiB2ZXJzaW9uID09PSAnc3RyaW5nJyA/IHsgdmVyc2lvbiB9IDogdmVyc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25Ub1ZhbGlkYXRlID0gc2VydmVyQXBpVG9WYWxpZGF0ZSAmJiBzZXJ2ZXJBcGlUb1ZhbGlkYXRlLnZlcnNpb247XG4gICAgICAgICAgICBpZiAoIXZlcnNpb25Ub1ZhbGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBJbnZhbGlkIFxcYHNlcnZlckFwaVxcYCBwcm9wZXJ0eTsgbXVzdCBzcGVjaWZ5IGEgdmVyc2lvbiBmcm9tIHRoZSBmb2xsb3dpbmcgZW51bTogW1wiJHtPYmplY3QudmFsdWVzKG1vbmdvX2NsaWVudF8xLlNlcnZlckFwaVZlcnNpb24pLmpvaW4oJ1wiLCBcIicpfVwiXWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFPYmplY3QudmFsdWVzKG1vbmdvX2NsaWVudF8xLlNlcnZlckFwaVZlcnNpb24pLnNvbWUodiA9PiB2ID09PSB2ZXJzaW9uVG9WYWxpZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYEludmFsaWQgc2VydmVyIEFQSSB2ZXJzaW9uPSR7dmVyc2lvblRvVmFsaWRhdGV9OyBtdXN0IGJlIGluIHRoZSBmb2xsb3dpbmcgZW51bTogW1wiJHtPYmplY3QudmFsdWVzKG1vbmdvX2NsaWVudF8xLlNlcnZlckFwaVZlcnNpb24pLmpvaW4oJ1wiLCBcIicpfVwiXWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlcnZlckFwaVRvVmFsaWRhdGU7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNoZWNrS2V5czoge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIGNvbXByZXNzb3JzOiB7XG4gICAgICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICAgICAgdGFyZ2V0OiAnY29tcHJlc3NvcnMnLFxuICAgICAgICB0cmFuc2Zvcm0oeyB2YWx1ZXMgfSkge1xuICAgICAgICAgICAgY29uc3QgY29tcHJlc3Npb25MaXN0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjb21wVmFsIG9mIHZhbHVlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBWYWxBcnJheSA9IHR5cGVvZiBjb21wVmFsID09PSAnc3RyaW5nJyA/IGNvbXBWYWwuc3BsaXQoJywnKSA6IGNvbXBWYWw7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGNvbXBWYWxBcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignY29tcHJlc3NvcnMgbXVzdCBiZSBhbiBhcnJheSBvciBhIGNvbW1hLWRlbGltaXRlZCBsaXN0IG9mIHN0cmluZ3MnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjIG9mIGNvbXBWYWxBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY29tcHJlc3Npb25fMS5Db21wcmVzc29yKS5pbmNsdWRlcyhTdHJpbmcoYykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzc2lvbkxpc3QuYWRkKFN0cmluZyhjKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGAke2N9IGlzIG5vdCBhIHZhbGlkIGNvbXByZXNzaW9uIG1lY2hhbmlzbS4gTXVzdCBiZSBvbmUgb2Y6ICR7T2JqZWN0LmtleXMoY29tcHJlc3Npb25fMS5Db21wcmVzc29yKX0uYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWy4uLmNvbXByZXNzaW9uTGlzdF07XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbm5lY3RUaW1lb3V0TVM6IHtcbiAgICAgICAgZGVmYXVsdDogMzAwMDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgZGJOYW1lOiB7XG4gICAgICAgIHR5cGU6ICdzdHJpbmcnXG4gICAgfSxcbiAgICBkaXJlY3RDb25uZWN0aW9uOiB7XG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIGRyaXZlckluZm86IHtcbiAgICAgICAgZGVmYXVsdDoge30sXG4gICAgICAgIHR5cGU6ICdyZWNvcmQnXG4gICAgfSxcbiAgICBlbmFibGVVdGY4VmFsaWRhdGlvbjogeyB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6IHRydWUgfSxcbiAgICBmYW1pbHk6IHtcbiAgICAgICAgdHJhbnNmb3JtKHsgbmFtZSwgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybVZhbHVlID0gZ2V0SW50RnJvbU9wdGlvbnMobmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybVZhbHVlID09PSA0IHx8IHRyYW5zZm9ybVZhbHVlID09PSA2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBPcHRpb24gJ2ZhbWlseScgbXVzdCBiZSA0IG9yIDYgZ290ICR7dHJhbnNmb3JtVmFsdWV9LmApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBmaWVsZHNBc1Jhdzoge1xuICAgICAgICB0eXBlOiAncmVjb3JkJ1xuICAgIH0sXG4gICAgZm9yY2VTZXJ2ZXJPYmplY3RJZDoge1xuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBmc3luYzoge1xuICAgICAgICBkZXByZWNhdGVkOiAnUGxlYXNlIHVzZSBqb3VybmFsIGluc3RlYWQnLFxuICAgICAgICB0YXJnZXQ6ICd3cml0ZUNvbmNlcm4nLFxuICAgICAgICB0cmFuc2Zvcm0oeyBuYW1lLCBvcHRpb25zLCB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgY29uc3Qgd2MgPSB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICB3cml0ZUNvbmNlcm46IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy53cml0ZUNvbmNlcm4sXG4gICAgICAgICAgICAgICAgICAgIGZzeW5jOiBnZXRCb29sZWFuKG5hbWUsIHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF3YylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYFVuYWJsZSB0byBtYWtlIGEgd3JpdGVDb25jZXJuIGZyb20gZnN5bmM9JHt2YWx1ZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB3YztcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaGVhcnRiZWF0RnJlcXVlbmN5TVM6IHtcbiAgICAgICAgZGVmYXVsdDogMTAwMDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgaWdub3JlVW5kZWZpbmVkOiB7XG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgajoge1xuICAgICAgICBkZXByZWNhdGVkOiAnUGxlYXNlIHVzZSBqb3VybmFsIGluc3RlYWQnLFxuICAgICAgICB0YXJnZXQ6ICd3cml0ZUNvbmNlcm4nLFxuICAgICAgICB0cmFuc2Zvcm0oeyBuYW1lLCBvcHRpb25zLCB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgY29uc3Qgd2MgPSB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICB3cml0ZUNvbmNlcm46IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy53cml0ZUNvbmNlcm4sXG4gICAgICAgICAgICAgICAgICAgIGpvdXJuYWw6IGdldEJvb2xlYW4obmFtZSwgdmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXdjKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgVW5hYmxlIHRvIG1ha2UgYSB3cml0ZUNvbmNlcm4gZnJvbSBqb3VybmFsPSR7dmFsdWV9YCk7XG4gICAgICAgICAgICByZXR1cm4gd2M7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGpvdXJuYWw6IHtcbiAgICAgICAgdGFyZ2V0OiAnd3JpdGVDb25jZXJuJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgbmFtZSwgb3B0aW9ucywgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHdjID0gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgd3JpdGVDb25jZXJuOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMud3JpdGVDb25jZXJuLFxuICAgICAgICAgICAgICAgICAgICBqb3VybmFsOiBnZXRCb29sZWFuKG5hbWUsIHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCF3YylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYFVuYWJsZSB0byBtYWtlIGEgd3JpdGVDb25jZXJuIGZyb20gam91cm5hbD0ke3ZhbHVlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHdjO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBsb2FkQmFsYW5jZWQ6IHtcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgbG9jYWxUaHJlc2hvbGRNUzoge1xuICAgICAgICBkZWZhdWx0OiAxNSxcbiAgICAgICAgdHlwZTogJ3VpbnQnXG4gICAgfSxcbiAgICBtYXhDb25uZWN0aW5nOiB7XG4gICAgICAgIGRlZmF1bHQ6IDIsXG4gICAgICAgIHRyYW5zZm9ybSh7IG5hbWUsIHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBjb25zdCBtYXhDb25uZWN0aW5nID0gZ2V0VUludEZyb21PcHRpb25zKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChtYXhDb25uZWN0aW5nID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignbWF4Q29ubmVjdGluZyBtdXN0IGJlID4gMCBpZiBzcGVjaWZpZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXhDb25uZWN0aW5nO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtYXhJZGxlVGltZU1TOiB7XG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgbWF4UG9vbFNpemU6IHtcbiAgICAgICAgZGVmYXVsdDogMTAwLFxuICAgICAgICB0eXBlOiAndWludCdcbiAgICB9LFxuICAgIG1heFN0YWxlbmVzc1NlY29uZHM6IHtcbiAgICAgICAgdGFyZ2V0OiAncmVhZFByZWZlcmVuY2UnLFxuICAgICAgICB0cmFuc2Zvcm0oeyBuYW1lLCBvcHRpb25zLCB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgY29uc3QgbWF4U3RhbGVuZXNzU2Vjb25kcyA9IGdldFVJbnRGcm9tT3B0aW9ucyhuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZWFkUHJlZmVyZW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5mcm9tT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlOiB7IC4uLm9wdGlvbnMucmVhZFByZWZlcmVuY2UsIG1heFN0YWxlbmVzc1NlY29uZHMgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZSgnc2Vjb25kYXJ5JywgdW5kZWZpbmVkLCB7IG1heFN0YWxlbmVzc1NlY29uZHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG1pbkludGVybmFsQnVmZmVyU2l6ZToge1xuICAgICAgICB0eXBlOiAndWludCdcbiAgICB9LFxuICAgIG1pblBvb2xTaXplOiB7XG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgbWluSGVhcnRiZWF0RnJlcXVlbmN5TVM6IHtcbiAgICAgICAgZGVmYXVsdDogNTAwLFxuICAgICAgICB0eXBlOiAndWludCdcbiAgICB9LFxuICAgIG1vbml0b3JDb21tYW5kczoge1xuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBuYW1lOiB7XG4gICAgICAgIHRhcmdldDogJ2RyaXZlckluZm8nLFxuICAgICAgICB0cmFuc2Zvcm0oeyB2YWx1ZXM6IFt2YWx1ZV0sIG9wdGlvbnMgfSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4ub3B0aW9ucy5kcml2ZXJJbmZvLCBuYW1lOiBTdHJpbmcodmFsdWUpIH07XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG5vRGVsYXk6IHtcbiAgICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBwa0ZhY3Rvcnk6IHtcbiAgICAgICAgZGVmYXVsdDogdXRpbHNfMS5ERUZBVUxUX1BLX0ZBQ1RPUlksXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBpZiAoKDAsIHV0aWxzXzEuaXNSZWNvcmQpKHZhbHVlLCBbJ2NyZWF0ZVBrJ10pICYmIHR5cGVvZiB2YWx1ZS5jcmVhdGVQayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgT3B0aW9uIHBrRmFjdG9yeSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGEgY3JlYXRlUGsgZnVuY3Rpb24sIGdvdCAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBwcm9tb3RlQnVmZmVyczoge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIHByb21vdGVMb25nczoge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIHByb21vdGVWYWx1ZXM6IHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICB1c2VCaWdJbnQ2NDoge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIHByb3h5SG9zdDoge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgcHJveHlQYXNzd29yZDoge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgcHJveHlQb3J0OiB7XG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgcHJveHlVc2VybmFtZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgcmF3OiB7XG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICB9LFxuICAgIHJlYWRDb25jZXJuOiB7XG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSwgb3B0aW9ucyB9KSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiByZWFkX2NvbmNlcm5fMS5SZWFkQ29uY2VybiB8fCAoMCwgdXRpbHNfMS5pc1JlY29yZCkodmFsdWUsIFsnbGV2ZWwnXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMoeyAuLi5vcHRpb25zLnJlYWRDb25jZXJuLCAuLi52YWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgUmVhZENvbmNlcm4gbXVzdCBiZSBhbiBvYmplY3QsIGdvdCAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVhZENvbmNlcm5MZXZlbDoge1xuICAgICAgICB0YXJnZXQ6ICdyZWFkQ29uY2VybicsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW2xldmVsXSwgb3B0aW9ucyB9KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMoe1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMucmVhZENvbmNlcm4sXG4gICAgICAgICAgICAgICAgbGV2ZWw6IGxldmVsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVhZFByZWZlcmVuY2U6IHtcbiAgICAgICAgZGVmYXVsdDogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeSxcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzOiBbdmFsdWVdLCBvcHRpb25zIH0pIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHsgLi4ub3B0aW9ucy5yZWFkUHJlZmVyZW5jZSwgLi4udmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgLi4udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc1JlY29yZCkodmFsdWUsIFsnbW9kZSddKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJwID0gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuZnJvbU9wdGlvbnMoe1xuICAgICAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogeyAuLi5vcHRpb25zLnJlYWRQcmVmZXJlbmNlLCAuLi52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAuLi52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChycClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJwO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29QYXJzZUVycm9yKGBDYW5ub3QgbWFrZSByZWFkIHByZWZlcmVuY2UgZnJvbSAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnBPcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBoZWRnZTogb3B0aW9ucy5yZWFkUHJlZmVyZW5jZT8uaGVkZ2UsXG4gICAgICAgICAgICAgICAgICAgIG1heFN0YWxlbmVzc1NlY29uZHM6IG9wdGlvbnMucmVhZFByZWZlcmVuY2U/Lm1heFN0YWxlbmVzc1NlY29uZHNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UodmFsdWUsIG9wdGlvbnMucmVhZFByZWZlcmVuY2U/LnRhZ3MsIHJwT3B0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoYFVua25vd24gUmVhZFByZWZlcmVuY2UgdmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlYWRQcmVmZXJlbmNlVGFnczoge1xuICAgICAgICB0YXJnZXQ6ICdyZWFkUHJlZmVyZW5jZScsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlcywgb3B0aW9ucyB9KSB7XG4gICAgICAgICAgICBjb25zdCB0YWdzID0gQXJyYXkuaXNBcnJheSh2YWx1ZXNbMF0pXG4gICAgICAgICAgICAgICAgPyB2YWx1ZXNbMF1cbiAgICAgICAgICAgICAgICA6IHZhbHVlcztcbiAgICAgICAgICAgIGNvbnN0IHJlYWRQcmVmZXJlbmNlVGFncyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRQcmVmZXJlbmNlVGFnID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgZW50cmllc0Zyb21TdHJpbmcodGFnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZFByZWZlcmVuY2VUYWdba10gPSB2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc1JlY29yZCkodGFnKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0YWcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZVRhZ1trXSA9IHY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVhZFByZWZlcmVuY2VUYWdzLnB1c2gocmVhZFByZWZlcmVuY2VUYWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogb3B0aW9ucy5yZWFkUHJlZmVyZW5jZSxcbiAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZVRhZ3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZXBsaWNhU2V0OiB7XG4gICAgICAgIHR5cGU6ICdzdHJpbmcnXG4gICAgfSxcbiAgICByZXRyeVJlYWRzOiB7XG4gICAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgcmV0cnlXcml0ZXM6IHtcbiAgICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBzZXJpYWxpemVGdW5jdGlvbnM6IHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBzZXJ2ZXJNb25pdG9yaW5nTW9kZToge1xuICAgICAgICBkZWZhdWx0OiAnYXV0bycsXG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC52YWx1ZXMobW9uaXRvcl8xLlNlcnZlck1vbml0b3JpbmdNb2RlKS5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ3NlcnZlck1vbml0b3JpbmdNb2RlIG11c3QgYmUgb25lIG9mIGBhdXRvYCwgYHBvbGxgLCBvciBgc3RyZWFtYCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IHtcbiAgICAgICAgZGVmYXVsdDogMzAwMDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgc2VydmVybmFtZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgc29ja2V0VGltZW91dE1TOiB7XG4gICAgICAgIGRlZmF1bHQ6IDAsXG4gICAgICAgIHR5cGU6ICd1aW50J1xuICAgIH0sXG4gICAgc3J2TWF4SG9zdHM6IHtcbiAgICAgICAgdHlwZTogJ3VpbnQnLFxuICAgICAgICBkZWZhdWx0OiAwXG4gICAgfSxcbiAgICBzcnZTZXJ2aWNlTmFtZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgZGVmYXVsdDogJ21vbmdvZGInXG4gICAgfSxcbiAgICBzc2w6IHtcbiAgICAgICAgdGFyZ2V0OiAndGxzJyxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICB0aW1lb3V0TVM6IHtcbiAgICAgICAgdHlwZTogJ3VpbnQnXG4gICAgfSxcbiAgICB0bHM6IHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICB0bHNBbGxvd0ludmFsaWRDZXJ0aWZpY2F0ZXM6IHtcbiAgICAgICAgdGFyZ2V0OiAncmVqZWN0VW5hdXRob3JpemVkJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgbmFtZSwgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIC8vIGFsbG93SW52YWxpZENlcnRpZmljYXRlcyBpcyB0aGUgaW52ZXJzZSBvZiByZWplY3RVbmF1dGhvcml6ZWRcbiAgICAgICAgICAgIHJldHVybiAhZ2V0Qm9vbGVhbihuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHRsc0FsbG93SW52YWxpZEhvc3RuYW1lczoge1xuICAgICAgICB0YXJnZXQ6ICdjaGVja1NlcnZlcklkZW50aXR5JyxcbiAgICAgICAgdHJhbnNmb3JtKHsgbmFtZSwgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIC8vIHRsc0FsbG93SW52YWxpZEhvc3RuYW1lcyBtZWFucyBzZXR0aW5nIHRoZSBjaGVja1NlcnZlcklkZW50aXR5IGZ1bmN0aW9uIHRvIGEgbm9vcFxuICAgICAgICAgICAgcmV0dXJuIGdldEJvb2xlYW4obmFtZSwgdmFsdWUpID8gKCkgPT4gdW5kZWZpbmVkIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB0bHNDQUZpbGU6IHtcbiAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICB9LFxuICAgIHRsc0NSTEZpbGU6IHtcbiAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICB9LFxuICAgIHRsc0NlcnRpZmljYXRlS2V5RmlsZToge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgdGxzQ2VydGlmaWNhdGVLZXlGaWxlUGFzc3dvcmQ6IHtcbiAgICAgICAgdGFyZ2V0OiAncGFzc3BocmFzZScsXG4gICAgICAgIHR5cGU6ICdhbnknXG4gICAgfSxcbiAgICB0bHNJbnNlY3VyZToge1xuICAgICAgICB0cmFuc2Zvcm0oeyBuYW1lLCBvcHRpb25zLCB2YWx1ZXM6IFt2YWx1ZV0gfSkge1xuICAgICAgICAgICAgY29uc3QgdGxzSW5zZWN1cmUgPSBnZXRCb29sZWFuKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0bHNJbnNlY3VyZSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2hlY2tTZXJ2ZXJJZGVudGl0eSA9ICgpID0+IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnJlamVjdFVuYXV0aG9yaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jaGVja1NlcnZlcklkZW50aXR5ID0gb3B0aW9ucy50bHNBbGxvd0ludmFsaWRIb3N0bmFtZXNcbiAgICAgICAgICAgICAgICAgICAgPyAoKSA9PiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5yZWplY3RVbmF1dGhvcml6ZWQgPSBvcHRpb25zLnRsc0FsbG93SW52YWxpZENlcnRpZmljYXRlcyA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0bHNJbnNlY3VyZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdzoge1xuICAgICAgICB0YXJnZXQ6ICd3cml0ZUNvbmNlcm4nLFxuICAgICAgICB0cmFuc2Zvcm0oeyB2YWx1ZXM6IFt2YWx1ZV0sIG9wdGlvbnMgfSkge1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMoeyB3cml0ZUNvbmNlcm46IHsgLi4ub3B0aW9ucy53cml0ZUNvbmNlcm4sIHc6IHZhbHVlIH0gfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHdhaXRRdWV1ZVRpbWVvdXRNUzoge1xuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgICB0eXBlOiAndWludCdcbiAgICB9LFxuICAgIHdyaXRlQ29uY2Vybjoge1xuICAgICAgICB0YXJnZXQ6ICd3cml0ZUNvbmNlcm4nLFxuICAgICAgICB0cmFuc2Zvcm0oeyB2YWx1ZXM6IFt2YWx1ZV0sIG9wdGlvbnMgfSkge1xuICAgICAgICAgICAgaWYgKCgwLCB1dGlsc18xLmlzUmVjb3JkKSh2YWx1ZSkgfHwgdmFsdWUgaW5zdGFuY2VvZiB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMoe1xuICAgICAgICAgICAgICAgICAgICB3cml0ZUNvbmNlcm46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMud3JpdGVDb25jZXJuLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4udmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09ICdtYWpvcml0eScgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVDb25jZXJuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLndyaXRlQ29uY2VybixcbiAgICAgICAgICAgICAgICAgICAgICAgIHc6IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgSW52YWxpZCBXcml0ZUNvbmNlcm4gY2Fubm90IHBhcnNlOiAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgd3RpbWVvdXQ6IHtcbiAgICAgICAgZGVwcmVjYXRlZDogJ1BsZWFzZSB1c2Ugd3RpbWVvdXRNUyBpbnN0ZWFkJyxcbiAgICAgICAgdGFyZ2V0OiAnd3JpdGVDb25jZXJuJyxcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzOiBbdmFsdWVdLCBvcHRpb25zIH0pIHtcbiAgICAgICAgICAgIGNvbnN0IHdjID0gd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgd3JpdGVDb25jZXJuOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMud3JpdGVDb25jZXJuLFxuICAgICAgICAgICAgICAgICAgICB3dGltZW91dDogZ2V0VUludEZyb21PcHRpb25zKCd3dGltZW91dCcsIHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHdjKVxuICAgICAgICAgICAgICAgIHJldHVybiB3YztcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgQ2Fubm90IG1ha2UgV3JpdGVDb25jZXJuIGZyb20gd3RpbWVvdXRgKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgd3RpbWVvdXRNUzoge1xuICAgICAgICB0YXJnZXQ6ICd3cml0ZUNvbmNlcm4nLFxuICAgICAgICB0cmFuc2Zvcm0oeyB2YWx1ZXM6IFt2YWx1ZV0sIG9wdGlvbnMgfSkge1xuICAgICAgICAgICAgY29uc3Qgd2MgPSB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmZyb21PcHRpb25zKHtcbiAgICAgICAgICAgICAgICB3cml0ZUNvbmNlcm46IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy53cml0ZUNvbmNlcm4sXG4gICAgICAgICAgICAgICAgICAgIHd0aW1lb3V0TVM6IGdldFVJbnRGcm9tT3B0aW9ucygnd3RpbWVvdXRNUycsIHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHdjKVxuICAgICAgICAgICAgICAgIHJldHVybiB3YztcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUGFyc2VFcnJvcihgQ2Fubm90IG1ha2UgV3JpdGVDb25jZXJuIGZyb20gd3RpbWVvdXRgKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgemxpYkNvbXByZXNzaW9uTGV2ZWw6IHtcbiAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgICAgdHlwZTogJ2ludCdcbiAgICB9LFxuICAgIC8vIEN1c3RvbSB0eXBlcyBmb3IgbW9kaWZ5aW5nIGNvcmUgYmVoYXZpb3JcbiAgICBjb25uZWN0aW9uVHlwZTogeyB0eXBlOiAnYW55JyB9LFxuICAgIHNydlBvbGxlcjogeyB0eXBlOiAnYW55JyB9LFxuICAgIC8vIEFjY2VwdGVkIE5vZGVKUyBPcHRpb25zXG4gICAgbWluREhTaXplOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgcHNrQ2FsbGJhY2s6IHsgdHlwZTogJ2FueScgfSxcbiAgICBzZWN1cmVDb250ZXh0OiB7IHR5cGU6ICdhbnknIH0sXG4gICAgZW5hYmxlVHJhY2U6IHsgdHlwZTogJ2FueScgfSxcbiAgICByZXF1ZXN0Q2VydDogeyB0eXBlOiAnYW55JyB9LFxuICAgIHJlamVjdFVuYXV0aG9yaXplZDogeyB0eXBlOiAnYW55JyB9LFxuICAgIGNoZWNrU2VydmVySWRlbnRpdHk6IHsgdHlwZTogJ2FueScgfSxcbiAgICBBTFBOUHJvdG9jb2xzOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgU05JQ2FsbGJhY2s6IHsgdHlwZTogJ2FueScgfSxcbiAgICBzZXNzaW9uOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgcmVxdWVzdE9DU1A6IHsgdHlwZTogJ2FueScgfSxcbiAgICBsb2NhbEFkZHJlc3M6IHsgdHlwZTogJ2FueScgfSxcbiAgICBsb2NhbFBvcnQ6IHsgdHlwZTogJ2FueScgfSxcbiAgICBoaW50czogeyB0eXBlOiAnYW55JyB9LFxuICAgIGxvb2t1cDogeyB0eXBlOiAnYW55JyB9LFxuICAgIGNhOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgY2VydDogeyB0eXBlOiAnYW55JyB9LFxuICAgIGNpcGhlcnM6IHsgdHlwZTogJ2FueScgfSxcbiAgICBjcmw6IHsgdHlwZTogJ2FueScgfSxcbiAgICBlY2RoQ3VydmU6IHsgdHlwZTogJ2FueScgfSxcbiAgICBrZXk6IHsgdHlwZTogJ2FueScgfSxcbiAgICBwYXNzcGhyYXNlOiB7IHR5cGU6ICdhbnknIH0sXG4gICAgcGZ4OiB7IHR5cGU6ICdhbnknIH0sXG4gICAgc2VjdXJlUHJvdG9jb2w6IHsgdHlwZTogJ2FueScgfSxcbiAgICBpbmRleDogeyB0eXBlOiAnYW55JyB9LFxuICAgIC8vIExlZ2FjeSBvcHRpb25zIGZyb20gdjMgZXJhXG4gICAgdXNlTmV3VXJsUGFyc2VyOiB7XG4gICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgZGVwcmVjYXRlZDogJ3VzZU5ld1VybFBhcnNlciBoYXMgbm8gZWZmZWN0IHNpbmNlIE5vZGUuanMgRHJpdmVyIHZlcnNpb24gNC4wLjAgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uJ1xuICAgIH0sXG4gICAgdXNlVW5pZmllZFRvcG9sb2d5OiB7XG4gICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgZGVwcmVjYXRlZDogJ3VzZVVuaWZpZWRUb3BvbG9neSBoYXMgbm8gZWZmZWN0IHNpbmNlIE5vZGUuanMgRHJpdmVyIHZlcnNpb24gNC4wLjAgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uJ1xuICAgIH0sXG4gICAgLy8gTW9uZ29Mb2dnZXJcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBUT0RPOiBOT0RFLTU2NzEgLSByZW1vdmUgaW50ZXJuYWwgZmxhZ1xuICAgICAqL1xuICAgIG1vbmdvZGJMb2dQYXRoOiB7XG4gICAgICAgIHRyYW5zZm9ybSh7IHZhbHVlczogW3ZhbHVlXSB9KSB7XG4gICAgICAgICAgICBpZiAoISgodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiBbJ3N0ZGVycicsICdzdGRvdXQnXS5pbmNsdWRlcyh2YWx1ZSkpIHx8XG4gICAgICAgICAgICAgICAgKHZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICAgICAgJ3dyaXRlJyBpbiB2YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdmFsdWUud3JpdGUgPT09ICdmdW5jdGlvbicpKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoYE9wdGlvbiAnbW9uZ29kYkxvZ1BhdGgnIG11c3QgYmUgb2YgdHlwZSAnc3RkZXJyJyB8ICdzdGRvdXQnIHwgTW9uZ29EQkxvZ1dyaXRhYmxlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFRPRE86IE5PREUtNTY3MSAtIHJlbW92ZSBpbnRlcm5hbCBmbGFnXG4gICAgICovXG4gICAgbW9uZ29kYkxvZ0NvbXBvbmVudFNldmVyaXRpZXM6IHtcbiAgICAgICAgdHJhbnNmb3JtKHsgdmFsdWVzOiBbdmFsdWVdIH0pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8ICF2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoYE9wdGlvbiAnbW9uZ29kYkxvZ0NvbXBvbmVudFNldmVyaXRpZXMnIG11c3QgYmUgYSBub24tbnVsbCBvYmplY3RgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGsgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoYFVzZXIgaW5wdXQgZm9yIG9wdGlvbiAnbW9uZ29kYkxvZ0NvbXBvbmVudFNldmVyaXRpZXMnIG9iamVjdCBjYW5ub3QgaW5jbHVkZSBhIG5vbi1zdHJpbmcga2V5IG9yIHZhbHVlYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghT2JqZWN0LnZhbHVlcyhtb25nb19sb2dnZXJfMS5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50KS5zb21lKHZhbCA9PiB2YWwgPT09IGspICYmIGsgIT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKGBVc2VyIGlucHV0IGZvciBvcHRpb24gJ21vbmdvZGJMb2dDb21wb25lbnRTZXZlcml0aWVzJyBjb250YWlucyBpbnZhbGlkIGtleTogJHtrfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC52YWx1ZXMobW9uZ29fbG9nZ2VyXzEuU2V2ZXJpdHlMZXZlbCkuc29tZSh2YWwgPT4gdmFsID09PSB2KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKGBPcHRpb24gJ21vbmdvZGJMb2dDb21wb25lbnRTZXZlcml0aWVzJyBkb2VzIG5vdCBzdXBwb3J0ICR7dn0gYXMgYSB2YWx1ZSBmb3IgJHtrfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogVE9ETzogTk9ERS01NjcxIC0gcmVtb3ZlIGludGVybmFsIGZsYWdcbiAgICAgKi9cbiAgICBtb25nb2RiTG9nTWF4RG9jdW1lbnRMZW5ndGg6IHsgdHlwZTogJ3VpbnQnIH1cbn07XG5leHBvcnRzLkRFRkFVTFRfT1BUSU9OUyA9IG5ldyBDYXNlSW5zZW5zaXRpdmVNYXAoT2JqZWN0LmVudHJpZXMoZXhwb3J0cy5PUFRJT05TKVxuICAgIC5maWx0ZXIoKFssIGRlc2NyaXB0b3JdKSA9PiBkZXNjcmlwdG9yLmRlZmF1bHQgIT0gbnVsbClcbiAgICAubWFwKChbaywgZF0pID0+IFtrLCBkLmRlZmF1bHRdKSk7XG4vKipcbiAqIFNldCBvZiBwZXJtaXR0ZWQgZmVhdHVyZSBmbGFnc1xuICogQGludGVybmFsXG4gKi9cbmV4cG9ydHMuRkVBVFVSRV9GTEFHUyA9IG5ldyBTZXQoW1xuICAgIFN5bWJvbC5mb3IoJ0BAbWRiLnNraXBQaW5nT25Db25uZWN0JyksXG4gICAgU3ltYm9sLmZvcignQEBtZGIuZW5hYmxlTW9uZ29Mb2dnZXInKSxcbiAgICBTeW1ib2wuZm9yKCdAQG1kYi5pbnRlcm5hbExvZ2dlckNvbmZpZycpXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbm5lY3Rpb25fc3RyaW5nLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkZFQVRVUkVfRkxBR1MiLCJERUZBVUxUX09QVElPTlMiLCJPUFRJT05TIiwicGFyc2VPcHRpb25zIiwicmVzb2x2ZVNSVlJlY29yZCIsImRucyIsInJlcXVpcmUiLCJtb25nb2RiX2Nvbm5lY3Rpb25fc3RyaW5nX3VybF8xIiwidXJsXzEiLCJtb25nb19jcmVkZW50aWFsc18xIiwicHJvdmlkZXJzXzEiLCJjbGllbnRfbWV0YWRhdGFfMSIsImNvbXByZXNzaW9uXzEiLCJlbmNyeXB0ZXJfMSIsImVycm9yXzEiLCJtb25nb19jbGllbnRfMSIsIm1vbmdvX2xvZ2dlcl8xIiwicmVhZF9jb25jZXJuXzEiLCJyZWFkX3ByZWZlcmVuY2VfMSIsIm1vbml0b3JfMSIsInV0aWxzXzEiLCJ3cml0ZV9jb25jZXJuXzEiLCJWQUxJRF9UWFRfUkVDT1JEUyIsIkxCX1NJTkdMRV9IT1NUX0VSUk9SIiwiTEJfUkVQTElDQV9TRVRfRVJST1IiLCJMQl9ESVJFQ1RfQ09OTkVDVElPTl9FUlJPUiIsIm9wdGlvbnMiLCJzcnZIb3N0IiwiTW9uZ29BUElFcnJvciIsInNwbGl0IiwibGVuZ3RoIiwibG9va3VwQWRkcmVzcyIsInR4dFJlc29sdXRpb25Qcm9taXNlIiwicHJvbWlzZXMiLCJyZXNvbHZlVHh0IiwiY2F0Y2giLCJhZGRyZXNzZXMiLCJyZXNvbHZlU3J2Iiwic3J2U2VydmljZU5hbWUiLCJuYW1lIiwibWF0Y2hlc1BhcmVudERvbWFpbiIsImhvc3RBZGRyZXNzZXMiLCJtYXAiLCJyIiwiSG9zdEFkZHJlc3MiLCJmcm9tU3RyaW5nIiwicG9ydCIsInZhbGlkYXRlTG9hZEJhbGFuY2VkT3B0aW9ucyIsInJlY29yZCIsImVycm9yIiwiY29kZSIsIk1vbmdvUGFyc2VFcnJvciIsInR4dFJlY29yZE9wdGlvbnMiLCJVUkxTZWFyY2hQYXJhbXMiLCJqb2luIiwidHh0UmVjb3JkT3B0aW9uS2V5cyIsImtleXMiLCJzb21lIiwia2V5IiwiaW5jbHVkZXMiLCJvcHRpb24iLCJnZXQiLCJzb3VyY2UiLCJ1bmRlZmluZWQiLCJyZXBsaWNhU2V0IiwibG9hZEJhbGFuY2VkIiwidXNlclNwZWNpZmllZEF1dGhTb3VyY2UiLCJjcmVkZW50aWFscyIsIkFVVEhfTUVDSFNfQVVUSF9TUkNfRVhURVJOQUwiLCJoYXMiLCJtZWNoYW5pc20iLCJNb25nb0NyZWRlbnRpYWxzIiwibWVyZ2UiLCJ1c2VyU3BlY2lmaWVkUmVwbGljYVNldCIsInNydk1heEhvc3RzIiwiY2hlY2tUTFNPcHRpb25zIiwiYWxsT3B0aW9ucyIsImNoZWNrIiwiYSIsImIiLCJnZXRCb29sZWFuIiwiZ2V0SW50RnJvbU9wdGlvbnMiLCJwYXJzZWRJbnQiLCJwYXJzZUludGVnZXIiLCJnZXRVSW50RnJvbU9wdGlvbnMiLCJwYXJzZWRWYWx1ZSIsImVudHJpZXNGcm9tU3RyaW5nIiwia2V5VmFsdWVQYWlycyIsImtleVZhbHVlIiwiQ2FzZUluc2Vuc2l0aXZlTWFwIiwiTWFwIiwiY29uc3RydWN0b3IiLCJlbnRyaWVzIiwiayIsInYiLCJ0b0xvd2VyQ2FzZSIsInNldCIsImRlbGV0ZSIsInVyaSIsIm1vbmdvQ2xpZW50IiwiTW9uZ29DbGllbnQiLCJ1c2VCaWdJbnQ2NCIsInByb21vdGVMb25ncyIsInByb21vdGVWYWx1ZXMiLCJ1cmwiLCJkZWZhdWx0IiwiaG9zdHMiLCJpc1NSViIsIm1vbmdvT3B0aW9ucyIsImNyZWF0ZSIsImZsYWciLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJ1cmxPcHRpb25zIiwicGF0aG5hbWUiLCJkYk5hbWUiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzbGljZSIsInVzZXJuYW1lIiwiYXV0aCIsInBhc3N3b3JkIiwic2VhcmNoUGFyYW1zIiwidmFsdWVzIiwiZ2V0QWxsIiwiaXNSZWFkUHJlZmVyZW5jZVRhZ3MiLCJ0ZXN0IiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsIm9iamVjdE9wdGlvbnMiLCJmaWx0ZXIiLCJ1cmlNZWNoYW5pc21Qcm9wZXJ0aWVzIiwicHJvcGVydHkiLCJhbGxQcm92aWRlZE9wdGlvbnMiLCJhbGxQcm92aWRlZEtleXMiLCJTZXQiLCJvYmplY3RPcHRpb25WYWx1ZSIsInB1c2giLCJ1cmxWYWx1ZXMiLCJ0bHNBbmRTc2xPcHRzIiwiY29uY2F0IiwiYmluZCIsInNpemUiLCJ1bnN1cHBvcnRlZE9wdGlvbnMiLCJzZXREaWZmZXJlbmNlIiwiQXJyYXkiLCJmcm9tIiwicyIsIm9wdGlvbldvcmQiLCJpc09yQXJlIiwiZGVzY3JpcHRvciIsInNldE9wdGlvbiIsImRlcHJlY2F0ZWQiLCJkZXByZWNhdGVkTXNnIiwiZW1pdFdhcm5pbmciLCJpc0dzc2FwaSIsIkF1dGhNZWNoYW5pc20iLCJNT05HT0RCX0dTU0FQSSIsImlzWDUwOSIsIk1PTkdPREJfWDUwOSIsImlzQXdzIiwiTU9OR09EQl9BV1MiLCJpc09pZGMiLCJNT05HT0RCX09JREMiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwidmFsaWRhdGUiLCJNT05HT0RCX0RFRkFVTFQiLCJtZWNoYW5pc21Qcm9wZXJ0aWVzIiwiYXV0b0VuY3J5cHRpb24iLCJFbmNyeXB0ZXIiLCJjaGVja0Zvck1vbmdvQ3J5cHQiLCJlbmNyeXB0ZXIiLCJhdXRvRW5jcnlwdGVyIiwiZGlyZWN0Q29ubmVjdGlvbiIsIm5vVXNlclNwZWNpZmllZFRMUyIsIm5vVXNlclNwZWNpZmllZFNTTCIsInRscyIsInVzZXJTcGVjaWZpZWRTcnZPcHRpb25zIiwicHJveHlIb3N0IiwicHJveHlQb3J0IiwicHJveHlVc2VybmFtZSIsInByb3h5UGFzc3dvcmQiLCJwcm94eU9wdGlvbnMiLCJsb2dnZXJGZWF0dXJlRmxhZyIsIlN5bWJvbCIsImZvciIsImxvZ2dlckVudk9wdGlvbnMiLCJsb2dnZXJDbGllbnRPcHRpb25zIiwiTU9OR09EQl9MT0dfQ09NTUFORCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX0xPR19UT1BPTE9HWSIsIk1PTkdPREJfTE9HX1NFUlZFUl9TRUxFQ1RJT04iLCJNT05HT0RCX0xPR19DT05ORUNUSU9OIiwiTU9OR09EQl9MT0dfQ0xJRU5UIiwiTU9OR09EQl9MT0dfQUxMIiwiTU9OR09EQl9MT0dfTUFYX0RPQ1VNRU5UX0xFTkdUSCIsIk1PTkdPREJfTE9HX1BBVEgiLCJtb25nb2RiTG9nUGF0aCIsIm1vbmdvZGJMb2dDb21wb25lbnRTZXZlcml0aWVzIiwibW9uZ29kYkxvZ01heERvY3VtZW50TGVuZ3RoIiwibW9uZ29Mb2dnZXJPcHRpb25zIiwiTW9uZ29Mb2dnZXIiLCJyZXNvbHZlT3B0aW9ucyIsIm1ldGFkYXRhIiwibWFrZUNsaWVudE1ldGFkYXRhIiwiZXh0ZW5kZWRNZXRhZGF0YSIsImFkZENvbnRhaW5lck1ldGFkYXRhIiwiaXNTcnYiLCJ0YXJnZXQiLCJ0eXBlIiwidHJhbnNmb3JtIiwiU3RyaW5nIiwiaXNSZWNvcmQiLCJ0cmFuc2Zvcm1WYWx1ZSIsImFwcE5hbWUiLCJhdXRoTWVjaGFuaXNtIiwibWVjaGFuaXNtcyIsIm0iLCJtYXRjaCIsIlJlZ0V4cCIsInJhdyIsIk1PTkdPREJfUExBSU4iLCJhdXRoTWVjaGFuaXNtUHJvcGVydGllcyIsIm9wdGlvblZhbHVlIiwiYXV0aFNvdXJjZSIsImJzb25SZWdFeHAiLCJzZXJ2ZXJBcGkiLCJ2ZXJzaW9uIiwic2VydmVyQXBpVG9WYWxpZGF0ZSIsInZlcnNpb25Ub1ZhbGlkYXRlIiwiU2VydmVyQXBpVmVyc2lvbiIsImNoZWNrS2V5cyIsImNvbXByZXNzb3JzIiwiY29tcHJlc3Npb25MaXN0IiwiY29tcFZhbCIsImNvbXBWYWxBcnJheSIsImlzQXJyYXkiLCJjIiwiQ29tcHJlc3NvciIsImFkZCIsImNvbm5lY3RUaW1lb3V0TVMiLCJkcml2ZXJJbmZvIiwiZW5hYmxlVXRmOFZhbGlkYXRpb24iLCJmYW1pbHkiLCJmaWVsZHNBc1JhdyIsImZvcmNlU2VydmVyT2JqZWN0SWQiLCJmc3luYyIsIndjIiwiV3JpdGVDb25jZXJuIiwiZnJvbU9wdGlvbnMiLCJ3cml0ZUNvbmNlcm4iLCJoZWFydGJlYXRGcmVxdWVuY3lNUyIsImlnbm9yZVVuZGVmaW5lZCIsImoiLCJqb3VybmFsIiwibG9jYWxUaHJlc2hvbGRNUyIsIm1heENvbm5lY3RpbmciLCJtYXhJZGxlVGltZU1TIiwibWF4UG9vbFNpemUiLCJtYXhTdGFsZW5lc3NTZWNvbmRzIiwicmVhZFByZWZlcmVuY2UiLCJSZWFkUHJlZmVyZW5jZSIsIm1pbkludGVybmFsQnVmZmVyU2l6ZSIsIm1pblBvb2xTaXplIiwibWluSGVhcnRiZWF0RnJlcXVlbmN5TVMiLCJtb25pdG9yQ29tbWFuZHMiLCJub0RlbGF5IiwicGtGYWN0b3J5IiwiREVGQVVMVF9QS19GQUNUT1JZIiwiY3JlYXRlUGsiLCJwcm9tb3RlQnVmZmVycyIsInJlYWRDb25jZXJuIiwiUmVhZENvbmNlcm4iLCJKU09OIiwic3RyaW5naWZ5IiwicmVhZENvbmNlcm5MZXZlbCIsImxldmVsIiwicHJpbWFyeSIsInJwIiwicnBPcHRzIiwiaGVkZ2UiLCJ0YWdzIiwicmVhZFByZWZlcmVuY2VUYWdzIiwidGFnIiwicmVhZFByZWZlcmVuY2VUYWciLCJyZXRyeVJlYWRzIiwicmV0cnlXcml0ZXMiLCJzZXJpYWxpemVGdW5jdGlvbnMiLCJzZXJ2ZXJNb25pdG9yaW5nTW9kZSIsIlNlcnZlck1vbml0b3JpbmdNb2RlIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwic2VydmVybmFtZSIsInNvY2tldFRpbWVvdXRNUyIsInNzbCIsInRpbWVvdXRNUyIsInRsc0FsbG93SW52YWxpZENlcnRpZmljYXRlcyIsInRsc0FsbG93SW52YWxpZEhvc3RuYW1lcyIsInRsc0NBRmlsZSIsInRsc0NSTEZpbGUiLCJ0bHNDZXJ0aWZpY2F0ZUtleUZpbGUiLCJ0bHNDZXJ0aWZpY2F0ZUtleUZpbGVQYXNzd29yZCIsInRsc0luc2VjdXJlIiwiY2hlY2tTZXJ2ZXJJZGVudGl0eSIsInJlamVjdFVuYXV0aG9yaXplZCIsInciLCJ3YWl0UXVldWVUaW1lb3V0TVMiLCJ3dGltZW91dCIsInd0aW1lb3V0TVMiLCJ6bGliQ29tcHJlc3Npb25MZXZlbCIsImNvbm5lY3Rpb25UeXBlIiwic3J2UG9sbGVyIiwibWluREhTaXplIiwicHNrQ2FsbGJhY2siLCJzZWN1cmVDb250ZXh0IiwiZW5hYmxlVHJhY2UiLCJyZXF1ZXN0Q2VydCIsIkFMUE5Qcm90b2NvbHMiLCJTTklDYWxsYmFjayIsInNlc3Npb24iLCJyZXF1ZXN0T0NTUCIsImxvY2FsQWRkcmVzcyIsImxvY2FsUG9ydCIsImhpbnRzIiwibG9va3VwIiwiY2EiLCJjZXJ0IiwiY2lwaGVycyIsImNybCIsImVjZGhDdXJ2ZSIsInBhc3NwaHJhc2UiLCJwZngiLCJzZWN1cmVQcm90b2NvbCIsImluZGV4IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5Iiwid3JpdGUiLCJNb25nb0xvZ2dhYmxlQ29tcG9uZW50IiwidmFsIiwiU2V2ZXJpdHlMZXZlbCIsImQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/connection_string.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/constants.js":
/*!***********************************************!*\
  !*** ./node_modules/mongodb/lib/constants.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.END = exports.CHANGE = exports.INIT = exports.MORE = exports.RESPONSE = exports.SERVER_HEARTBEAT_FAILED = exports.SERVER_HEARTBEAT_SUCCEEDED = exports.SERVER_HEARTBEAT_STARTED = exports.COMMAND_FAILED = exports.COMMAND_SUCCEEDED = exports.COMMAND_STARTED = exports.CLUSTER_TIME_RECEIVED = exports.CONNECTION_CHECKED_IN = exports.CONNECTION_CHECKED_OUT = exports.CONNECTION_CHECK_OUT_FAILED = exports.CONNECTION_CHECK_OUT_STARTED = exports.CONNECTION_CLOSED = exports.CONNECTION_READY = exports.CONNECTION_CREATED = exports.CONNECTION_POOL_READY = exports.CONNECTION_POOL_CLEARED = exports.CONNECTION_POOL_CLOSED = exports.CONNECTION_POOL_CREATED = exports.WAITING_FOR_SUITABLE_SERVER = exports.SERVER_SELECTION_SUCCEEDED = exports.SERVER_SELECTION_FAILED = exports.SERVER_SELECTION_STARTED = exports.TOPOLOGY_DESCRIPTION_CHANGED = exports.TOPOLOGY_CLOSED = exports.TOPOLOGY_OPENING = exports.SERVER_DESCRIPTION_CHANGED = exports.SERVER_CLOSED = exports.SERVER_OPENING = exports.DESCRIPTION_RECEIVED = exports.UNPINNED = exports.PINNED = exports.MESSAGE = exports.ENDED = exports.CLOSED = exports.CONNECT = exports.OPEN = exports.CLOSE = exports.TIMEOUT = exports.ERROR = exports.SYSTEM_JS_COLLECTION = exports.SYSTEM_COMMAND_COLLECTION = exports.SYSTEM_USER_COLLECTION = exports.SYSTEM_PROFILE_COLLECTION = exports.SYSTEM_INDEX_COLLECTION = exports.SYSTEM_NAMESPACE_COLLECTION = void 0;\nexports.LEGACY_HELLO_COMMAND_CAMEL_CASE = exports.LEGACY_HELLO_COMMAND = exports.MONGO_CLIENT_EVENTS = exports.LOCAL_SERVER_EVENTS = exports.SERVER_RELAY_EVENTS = exports.APM_EVENTS = exports.TOPOLOGY_EVENTS = exports.CMAP_EVENTS = exports.HEARTBEAT_EVENTS = exports.RESUME_TOKEN_CHANGED = void 0;\nexports.SYSTEM_NAMESPACE_COLLECTION = \"system.namespaces\";\nexports.SYSTEM_INDEX_COLLECTION = \"system.indexes\";\nexports.SYSTEM_PROFILE_COLLECTION = \"system.profile\";\nexports.SYSTEM_USER_COLLECTION = \"system.users\";\nexports.SYSTEM_COMMAND_COLLECTION = \"$cmd\";\nexports.SYSTEM_JS_COLLECTION = \"system.js\";\n// events\nexports.ERROR = \"error\";\nexports.TIMEOUT = \"timeout\";\nexports.CLOSE = \"close\";\nexports.OPEN = \"open\";\nexports.CONNECT = \"connect\";\nexports.CLOSED = \"closed\";\nexports.ENDED = \"ended\";\nexports.MESSAGE = \"message\";\nexports.PINNED = \"pinned\";\nexports.UNPINNED = \"unpinned\";\nexports.DESCRIPTION_RECEIVED = \"descriptionReceived\";\n/** @internal */ exports.SERVER_OPENING = \"serverOpening\";\n/** @internal */ exports.SERVER_CLOSED = \"serverClosed\";\n/** @internal */ exports.SERVER_DESCRIPTION_CHANGED = \"serverDescriptionChanged\";\n/** @internal */ exports.TOPOLOGY_OPENING = \"topologyOpening\";\n/** @internal */ exports.TOPOLOGY_CLOSED = \"topologyClosed\";\n/** @internal */ exports.TOPOLOGY_DESCRIPTION_CHANGED = \"topologyDescriptionChanged\";\n/** @internal */ exports.SERVER_SELECTION_STARTED = \"serverSelectionStarted\";\n/** @internal */ exports.SERVER_SELECTION_FAILED = \"serverSelectionFailed\";\n/** @internal */ exports.SERVER_SELECTION_SUCCEEDED = \"serverSelectionSucceeded\";\n/** @internal */ exports.WAITING_FOR_SUITABLE_SERVER = \"waitingForSuitableServer\";\n/** @internal */ exports.CONNECTION_POOL_CREATED = \"connectionPoolCreated\";\n/** @internal */ exports.CONNECTION_POOL_CLOSED = \"connectionPoolClosed\";\n/** @internal */ exports.CONNECTION_POOL_CLEARED = \"connectionPoolCleared\";\n/** @internal */ exports.CONNECTION_POOL_READY = \"connectionPoolReady\";\n/** @internal */ exports.CONNECTION_CREATED = \"connectionCreated\";\n/** @internal */ exports.CONNECTION_READY = \"connectionReady\";\n/** @internal */ exports.CONNECTION_CLOSED = \"connectionClosed\";\n/** @internal */ exports.CONNECTION_CHECK_OUT_STARTED = \"connectionCheckOutStarted\";\n/** @internal */ exports.CONNECTION_CHECK_OUT_FAILED = \"connectionCheckOutFailed\";\n/** @internal */ exports.CONNECTION_CHECKED_OUT = \"connectionCheckedOut\";\n/** @internal */ exports.CONNECTION_CHECKED_IN = \"connectionCheckedIn\";\nexports.CLUSTER_TIME_RECEIVED = \"clusterTimeReceived\";\n/** @internal */ exports.COMMAND_STARTED = \"commandStarted\";\n/** @internal */ exports.COMMAND_SUCCEEDED = \"commandSucceeded\";\n/** @internal */ exports.COMMAND_FAILED = \"commandFailed\";\n/** @internal */ exports.SERVER_HEARTBEAT_STARTED = \"serverHeartbeatStarted\";\n/** @internal */ exports.SERVER_HEARTBEAT_SUCCEEDED = \"serverHeartbeatSucceeded\";\n/** @internal */ exports.SERVER_HEARTBEAT_FAILED = \"serverHeartbeatFailed\";\nexports.RESPONSE = \"response\";\nexports.MORE = \"more\";\nexports.INIT = \"init\";\nexports.CHANGE = \"change\";\nexports.END = \"end\";\nexports.RESUME_TOKEN_CHANGED = \"resumeTokenChanged\";\n/** @public */ exports.HEARTBEAT_EVENTS = Object.freeze([\n    exports.SERVER_HEARTBEAT_STARTED,\n    exports.SERVER_HEARTBEAT_SUCCEEDED,\n    exports.SERVER_HEARTBEAT_FAILED\n]);\n/** @public */ exports.CMAP_EVENTS = Object.freeze([\n    exports.CONNECTION_POOL_CREATED,\n    exports.CONNECTION_POOL_READY,\n    exports.CONNECTION_POOL_CLEARED,\n    exports.CONNECTION_POOL_CLOSED,\n    exports.CONNECTION_CREATED,\n    exports.CONNECTION_READY,\n    exports.CONNECTION_CLOSED,\n    exports.CONNECTION_CHECK_OUT_STARTED,\n    exports.CONNECTION_CHECK_OUT_FAILED,\n    exports.CONNECTION_CHECKED_OUT,\n    exports.CONNECTION_CHECKED_IN\n]);\n/** @public */ exports.TOPOLOGY_EVENTS = Object.freeze([\n    exports.SERVER_OPENING,\n    exports.SERVER_CLOSED,\n    exports.SERVER_DESCRIPTION_CHANGED,\n    exports.TOPOLOGY_OPENING,\n    exports.TOPOLOGY_CLOSED,\n    exports.TOPOLOGY_DESCRIPTION_CHANGED,\n    exports.ERROR,\n    exports.TIMEOUT,\n    exports.CLOSE\n]);\n/** @public */ exports.APM_EVENTS = Object.freeze([\n    exports.COMMAND_STARTED,\n    exports.COMMAND_SUCCEEDED,\n    exports.COMMAND_FAILED\n]);\n/**\n * All events that we relay to the `Topology`\n * @internal\n */ exports.SERVER_RELAY_EVENTS = Object.freeze([\n    exports.SERVER_HEARTBEAT_STARTED,\n    exports.SERVER_HEARTBEAT_SUCCEEDED,\n    exports.SERVER_HEARTBEAT_FAILED,\n    exports.COMMAND_STARTED,\n    exports.COMMAND_SUCCEEDED,\n    exports.COMMAND_FAILED,\n    ...exports.CMAP_EVENTS\n]);\n/**\n * All events we listen to from `Server` instances, but do not forward to the client\n * @internal\n */ exports.LOCAL_SERVER_EVENTS = Object.freeze([\n    exports.CONNECT,\n    exports.DESCRIPTION_RECEIVED,\n    exports.CLOSED,\n    exports.ENDED\n]);\n/** @public */ exports.MONGO_CLIENT_EVENTS = Object.freeze([\n    ...exports.CMAP_EVENTS,\n    ...exports.APM_EVENTS,\n    ...exports.TOPOLOGY_EVENTS,\n    ...exports.HEARTBEAT_EVENTS\n]);\n/**\n * @internal\n * The legacy hello command that was deprecated in MongoDB 5.0.\n */ exports.LEGACY_HELLO_COMMAND = \"ismaster\";\n/**\n * @internal\n * The legacy hello command that was deprecated in MongoDB 5.0.\n */ exports.LEGACY_HELLO_COMMAND_CAMEL_CASE = \"isMaster\"; //# sourceMappingURL=constants.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY29uc3RhbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxXQUFXLEdBQUdBLGNBQWMsR0FBR0EsWUFBWSxHQUFHQSxZQUFZLEdBQUdBLGdCQUFnQixHQUFHQSwrQkFBK0IsR0FBR0Esa0NBQWtDLEdBQUdBLGdDQUFnQyxHQUFHQSxzQkFBc0IsR0FBR0EseUJBQXlCLEdBQUdBLHVCQUF1QixHQUFHQSw2QkFBNkIsR0FBR0EsNkJBQTZCLEdBQUdBLDhCQUE4QixHQUFHQSxtQ0FBbUMsR0FBR0Esb0NBQW9DLEdBQUdBLHlCQUF5QixHQUFHQSx3QkFBd0IsR0FBR0EsMEJBQTBCLEdBQUdBLDZCQUE2QixHQUFHQSwrQkFBK0IsR0FBR0EsOEJBQThCLEdBQUdBLCtCQUErQixHQUFHQSxtQ0FBbUMsR0FBR0Esa0NBQWtDLEdBQUdBLCtCQUErQixHQUFHQSxnQ0FBZ0MsR0FBR0Esb0NBQW9DLEdBQUdBLHVCQUF1QixHQUFHQSx3QkFBd0IsR0FBR0Esa0NBQWtDLEdBQUdBLHFCQUFxQixHQUFHQSxzQkFBc0IsR0FBR0EsNEJBQTRCLEdBQUdBLGdCQUFnQixHQUFHQSxjQUFjLEdBQUdBLGVBQWUsR0FBR0EsYUFBYSxHQUFHQSxjQUFjLEdBQUdBLGVBQWUsR0FBR0EsWUFBWSxHQUFHQSxhQUFhLEdBQUdBLGVBQWUsR0FBR0EsYUFBYSxHQUFHQSw0QkFBNEIsR0FBR0EsaUNBQWlDLEdBQUdBLDhCQUE4QixHQUFHQSxpQ0FBaUMsR0FBR0EsK0JBQStCLEdBQUdBLG1DQUFtQyxHQUFHLEtBQUs7QUFDaDNDQSx1Q0FBdUMsR0FBR0EsNEJBQTRCLEdBQUdBLDJCQUEyQixHQUFHQSwyQkFBMkIsR0FBR0EsMkJBQTJCLEdBQUdBLGtCQUFrQixHQUFHQSx1QkFBdUIsR0FBR0EsbUJBQW1CLEdBQUdBLHdCQUF3QixHQUFHQSw0QkFBNEIsR0FBRyxLQUFL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cEM3QixRQUFRNkMsS0FBSztJQUNiN0MsUUFBUTRDLE9BQU87SUFDZjVDLFFBQVEyQyxLQUFLO0NBQ2hCO0FBQ0QsWUFBWSxHQUNaM0Msa0JBQWtCLEdBQUdGLE9BQU9nRSxNQUFNLENBQUM7SUFDL0I5RCxRQUFRWSxlQUFlO0lBQ3ZCWixRQUFRVyxpQkFBaUI7SUFDekJYLFFBQVFVLGNBQWM7Q0FDekI7QUFDRDs7O0NBR0MsR0FDRFYsMkJBQTJCLEdBQUdGLE9BQU9nRSxNQUFNLENBQUM7SUFDeEM5RCxRQUFRUyx3QkFBd0I7SUFDaENULFFBQVFRLDBCQUEwQjtJQUNsQ1IsUUFBUU8sdUJBQXVCO0lBQy9CUCxRQUFRWSxlQUFlO0lBQ3ZCWixRQUFRVyxpQkFBaUI7SUFDekJYLFFBQVFVLGNBQWM7T0FDbkJWLFFBQVEyRCxXQUFXO0NBQ3pCO0FBQ0Q7OztDQUdDLEdBQ0QzRCwyQkFBMkIsR0FBR0YsT0FBT2dFLE1BQU0sQ0FBQztJQUN4QzlELFFBQVF5QyxPQUFPO0lBQ2Z6QyxRQUFRbUMsb0JBQW9CO0lBQzVCbkMsUUFBUXdDLE1BQU07SUFDZHhDLFFBQVF1QyxLQUFLO0NBQ2hCO0FBQ0QsWUFBWSxHQUNadkMsMkJBQTJCLEdBQUdGLE9BQU9nRSxNQUFNLENBQUM7T0FDckM5RCxRQUFRMkQsV0FBVztPQUNuQjNELFFBQVF5RCxVQUFVO09BQ2xCekQsUUFBUTBELGVBQWU7T0FDdkIxRCxRQUFRNEQsZ0JBQWdCO0NBQzlCO0FBQ0Q7OztDQUdDLEdBQ0Q1RCw0QkFBNEIsR0FBRztBQUMvQjs7O0NBR0MsR0FDREEsdUNBQXVDLEdBQUcsWUFDMUMscUNBQXFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jb25zdGFudHMuanM/ZmZlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRU5EID0gZXhwb3J0cy5DSEFOR0UgPSBleHBvcnRzLklOSVQgPSBleHBvcnRzLk1PUkUgPSBleHBvcnRzLlJFU1BPTlNFID0gZXhwb3J0cy5TRVJWRVJfSEVBUlRCRUFUX0ZBSUxFRCA9IGV4cG9ydHMuU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQgPSBleHBvcnRzLlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCA9IGV4cG9ydHMuQ09NTUFORF9GQUlMRUQgPSBleHBvcnRzLkNPTU1BTkRfU1VDQ0VFREVEID0gZXhwb3J0cy5DT01NQU5EX1NUQVJURUQgPSBleHBvcnRzLkNMVVNURVJfVElNRV9SRUNFSVZFRCA9IGV4cG9ydHMuQ09OTkVDVElPTl9DSEVDS0VEX0lOID0gZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLRURfT1VUID0gZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLX09VVF9GQUlMRUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX1NUQVJURUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fQ0xPU0VEID0gZXhwb3J0cy5DT05ORUNUSU9OX1JFQURZID0gZXhwb3J0cy5DT05ORUNUSU9OX0NSRUFURUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9SRUFEWSA9IGV4cG9ydHMuQ09OTkVDVElPTl9QT09MX0NMRUFSRUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9DTE9TRUQgPSBleHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9DUkVBVEVEID0gZXhwb3J0cy5XQUlUSU5HX0ZPUl9TVUlUQUJMRV9TRVJWRVIgPSBleHBvcnRzLlNFUlZFUl9TRUxFQ1RJT05fU1VDQ0VFREVEID0gZXhwb3J0cy5TRVJWRVJfU0VMRUNUSU9OX0ZBSUxFRCA9IGV4cG9ydHMuU0VSVkVSX1NFTEVDVElPTl9TVEFSVEVEID0gZXhwb3J0cy5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VEID0gZXhwb3J0cy5UT1BPTE9HWV9DTE9TRUQgPSBleHBvcnRzLlRPUE9MT0dZX09QRU5JTkcgPSBleHBvcnRzLlNFUlZFUl9ERVNDUklQVElPTl9DSEFOR0VEID0gZXhwb3J0cy5TRVJWRVJfQ0xPU0VEID0gZXhwb3J0cy5TRVJWRVJfT1BFTklORyA9IGV4cG9ydHMuREVTQ1JJUFRJT05fUkVDRUlWRUQgPSBleHBvcnRzLlVOUElOTkVEID0gZXhwb3J0cy5QSU5ORUQgPSBleHBvcnRzLk1FU1NBR0UgPSBleHBvcnRzLkVOREVEID0gZXhwb3J0cy5DTE9TRUQgPSBleHBvcnRzLkNPTk5FQ1QgPSBleHBvcnRzLk9QRU4gPSBleHBvcnRzLkNMT1NFID0gZXhwb3J0cy5USU1FT1VUID0gZXhwb3J0cy5FUlJPUiA9IGV4cG9ydHMuU1lTVEVNX0pTX0NPTExFQ1RJT04gPSBleHBvcnRzLlNZU1RFTV9DT01NQU5EX0NPTExFQ1RJT04gPSBleHBvcnRzLlNZU1RFTV9VU0VSX0NPTExFQ1RJT04gPSBleHBvcnRzLlNZU1RFTV9QUk9GSUxFX0NPTExFQ1RJT04gPSBleHBvcnRzLlNZU1RFTV9JTkRFWF9DT0xMRUNUSU9OID0gZXhwb3J0cy5TWVNURU1fTkFNRVNQQUNFX0NPTExFQ1RJT04gPSB2b2lkIDA7XG5leHBvcnRzLkxFR0FDWV9IRUxMT19DT01NQU5EX0NBTUVMX0NBU0UgPSBleHBvcnRzLkxFR0FDWV9IRUxMT19DT01NQU5EID0gZXhwb3J0cy5NT05HT19DTElFTlRfRVZFTlRTID0gZXhwb3J0cy5MT0NBTF9TRVJWRVJfRVZFTlRTID0gZXhwb3J0cy5TRVJWRVJfUkVMQVlfRVZFTlRTID0gZXhwb3J0cy5BUE1fRVZFTlRTID0gZXhwb3J0cy5UT1BPTE9HWV9FVkVOVFMgPSBleHBvcnRzLkNNQVBfRVZFTlRTID0gZXhwb3J0cy5IRUFSVEJFQVRfRVZFTlRTID0gZXhwb3J0cy5SRVNVTUVfVE9LRU5fQ0hBTkdFRCA9IHZvaWQgMDtcbmV4cG9ydHMuU1lTVEVNX05BTUVTUEFDRV9DT0xMRUNUSU9OID0gJ3N5c3RlbS5uYW1lc3BhY2VzJztcbmV4cG9ydHMuU1lTVEVNX0lOREVYX0NPTExFQ1RJT04gPSAnc3lzdGVtLmluZGV4ZXMnO1xuZXhwb3J0cy5TWVNURU1fUFJPRklMRV9DT0xMRUNUSU9OID0gJ3N5c3RlbS5wcm9maWxlJztcbmV4cG9ydHMuU1lTVEVNX1VTRVJfQ09MTEVDVElPTiA9ICdzeXN0ZW0udXNlcnMnO1xuZXhwb3J0cy5TWVNURU1fQ09NTUFORF9DT0xMRUNUSU9OID0gJyRjbWQnO1xuZXhwb3J0cy5TWVNURU1fSlNfQ09MTEVDVElPTiA9ICdzeXN0ZW0uanMnO1xuLy8gZXZlbnRzXG5leHBvcnRzLkVSUk9SID0gJ2Vycm9yJztcbmV4cG9ydHMuVElNRU9VVCA9ICd0aW1lb3V0JztcbmV4cG9ydHMuQ0xPU0UgPSAnY2xvc2UnO1xuZXhwb3J0cy5PUEVOID0gJ29wZW4nO1xuZXhwb3J0cy5DT05ORUNUID0gJ2Nvbm5lY3QnO1xuZXhwb3J0cy5DTE9TRUQgPSAnY2xvc2VkJztcbmV4cG9ydHMuRU5ERUQgPSAnZW5kZWQnO1xuZXhwb3J0cy5NRVNTQUdFID0gJ21lc3NhZ2UnO1xuZXhwb3J0cy5QSU5ORUQgPSAncGlubmVkJztcbmV4cG9ydHMuVU5QSU5ORUQgPSAndW5waW5uZWQnO1xuZXhwb3J0cy5ERVNDUklQVElPTl9SRUNFSVZFRCA9ICdkZXNjcmlwdGlvblJlY2VpdmVkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuU0VSVkVSX09QRU5JTkcgPSAnc2VydmVyT3BlbmluZyc7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLlNFUlZFUl9DTE9TRUQgPSAnc2VydmVyQ2xvc2VkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuU0VSVkVSX0RFU0NSSVBUSU9OX0NIQU5HRUQgPSAnc2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuVE9QT0xPR1lfT1BFTklORyA9ICd0b3BvbG9neU9wZW5pbmcnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5UT1BPTE9HWV9DTE9TRUQgPSAndG9wb2xvZ3lDbG9zZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VEID0gJ3RvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuU0VSVkVSX1NFTEVDVElPTl9TVEFSVEVEID0gJ3NlcnZlclNlbGVjdGlvblN0YXJ0ZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5TRVJWRVJfU0VMRUNUSU9OX0ZBSUxFRCA9ICdzZXJ2ZXJTZWxlY3Rpb25GYWlsZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5TRVJWRVJfU0VMRUNUSU9OX1NVQ0NFRURFRCA9ICdzZXJ2ZXJTZWxlY3Rpb25TdWNjZWVkZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5XQUlUSU5HX0ZPUl9TVUlUQUJMRV9TRVJWRVIgPSAnd2FpdGluZ0ZvclN1aXRhYmxlU2VydmVyJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09OTkVDVElPTl9QT09MX0NSRUFURUQgPSAnY29ubmVjdGlvblBvb2xDcmVhdGVkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09OTkVDVElPTl9QT09MX0NMT1NFRCA9ICdjb25uZWN0aW9uUG9vbENsb3NlZCc7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9DTEVBUkVEID0gJ2Nvbm5lY3Rpb25Qb29sQ2xlYXJlZCc7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9SRUFEWSA9ICdjb25uZWN0aW9uUG9vbFJlYWR5Jztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09OTkVDVElPTl9DUkVBVEVEID0gJ2Nvbm5lY3Rpb25DcmVhdGVkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09OTkVDVElPTl9SRUFEWSA9ICdjb25uZWN0aW9uUmVhZHknO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5DT05ORUNUSU9OX0NMT1NFRCA9ICdjb25uZWN0aW9uQ2xvc2VkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09OTkVDVElPTl9DSEVDS19PVVRfU1RBUlRFRCA9ICdjb25uZWN0aW9uQ2hlY2tPdXRTdGFydGVkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09OTkVDVElPTl9DSEVDS19PVVRfRkFJTEVEID0gJ2Nvbm5lY3Rpb25DaGVja091dEZhaWxlZCc7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkNPTk5FQ1RJT05fQ0hFQ0tFRF9PVVQgPSAnY29ubmVjdGlvbkNoZWNrZWRPdXQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLRURfSU4gPSAnY29ubmVjdGlvbkNoZWNrZWRJbic7XG5leHBvcnRzLkNMVVNURVJfVElNRV9SRUNFSVZFRCA9ICdjbHVzdGVyVGltZVJlY2VpdmVkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09NTUFORF9TVEFSVEVEID0gJ2NvbW1hbmRTdGFydGVkJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuQ09NTUFORF9TVUNDRUVERUQgPSAnY29tbWFuZFN1Y2NlZWRlZCc7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkNPTU1BTkRfRkFJTEVEID0gJ2NvbW1hbmRGYWlsZWQnO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5TRVJWRVJfSEVBUlRCRUFUX1NUQVJURUQgPSAnc2VydmVySGVhcnRiZWF0U3RhcnRlZCc7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVEID0gJ3NlcnZlckhlYXJ0YmVhdFN1Y2NlZWRlZCc7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLlNFUlZFUl9IRUFSVEJFQVRfRkFJTEVEID0gJ3NlcnZlckhlYXJ0YmVhdEZhaWxlZCc7XG5leHBvcnRzLlJFU1BPTlNFID0gJ3Jlc3BvbnNlJztcbmV4cG9ydHMuTU9SRSA9ICdtb3JlJztcbmV4cG9ydHMuSU5JVCA9ICdpbml0JztcbmV4cG9ydHMuQ0hBTkdFID0gJ2NoYW5nZSc7XG5leHBvcnRzLkVORCA9ICdlbmQnO1xuZXhwb3J0cy5SRVNVTUVfVE9LRU5fQ0hBTkdFRCA9ICdyZXN1bWVUb2tlbkNoYW5nZWQnO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuSEVBUlRCRUFUX0VWRU5UUyA9IE9iamVjdC5mcmVlemUoW1xuICAgIGV4cG9ydHMuU0VSVkVSX0hFQVJUQkVBVF9TVEFSVEVELFxuICAgIGV4cG9ydHMuU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQsXG4gICAgZXhwb3J0cy5TRVJWRVJfSEVBUlRCRUFUX0ZBSUxFRFxuXSk7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5DTUFQX0VWRU5UUyA9IE9iamVjdC5mcmVlemUoW1xuICAgIGV4cG9ydHMuQ09OTkVDVElPTl9QT09MX0NSRUFURUQsXG4gICAgZXhwb3J0cy5DT05ORUNUSU9OX1BPT0xfUkVBRFksXG4gICAgZXhwb3J0cy5DT05ORUNUSU9OX1BPT0xfQ0xFQVJFRCxcbiAgICBleHBvcnRzLkNPTk5FQ1RJT05fUE9PTF9DTE9TRUQsXG4gICAgZXhwb3J0cy5DT05ORUNUSU9OX0NSRUFURUQsXG4gICAgZXhwb3J0cy5DT05ORUNUSU9OX1JFQURZLFxuICAgIGV4cG9ydHMuQ09OTkVDVElPTl9DTE9TRUQsXG4gICAgZXhwb3J0cy5DT05ORUNUSU9OX0NIRUNLX09VVF9TVEFSVEVELFxuICAgIGV4cG9ydHMuQ09OTkVDVElPTl9DSEVDS19PVVRfRkFJTEVELFxuICAgIGV4cG9ydHMuQ09OTkVDVElPTl9DSEVDS0VEX09VVCxcbiAgICBleHBvcnRzLkNPTk5FQ1RJT05fQ0hFQ0tFRF9JTlxuXSk7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5UT1BPTE9HWV9FVkVOVFMgPSBPYmplY3QuZnJlZXplKFtcbiAgICBleHBvcnRzLlNFUlZFUl9PUEVOSU5HLFxuICAgIGV4cG9ydHMuU0VSVkVSX0NMT1NFRCxcbiAgICBleHBvcnRzLlNFUlZFUl9ERVNDUklQVElPTl9DSEFOR0VELFxuICAgIGV4cG9ydHMuVE9QT0xPR1lfT1BFTklORyxcbiAgICBleHBvcnRzLlRPUE9MT0dZX0NMT1NFRCxcbiAgICBleHBvcnRzLlRPUE9MT0dZX0RFU0NSSVBUSU9OX0NIQU5HRUQsXG4gICAgZXhwb3J0cy5FUlJPUixcbiAgICBleHBvcnRzLlRJTUVPVVQsXG4gICAgZXhwb3J0cy5DTE9TRVxuXSk7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5BUE1fRVZFTlRTID0gT2JqZWN0LmZyZWV6ZShbXG4gICAgZXhwb3J0cy5DT01NQU5EX1NUQVJURUQsXG4gICAgZXhwb3J0cy5DT01NQU5EX1NVQ0NFRURFRCxcbiAgICBleHBvcnRzLkNPTU1BTkRfRkFJTEVEXG5dKTtcbi8qKlxuICogQWxsIGV2ZW50cyB0aGF0IHdlIHJlbGF5IHRvIHRoZSBgVG9wb2xvZ3lgXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0cy5TRVJWRVJfUkVMQVlfRVZFTlRTID0gT2JqZWN0LmZyZWV6ZShbXG4gICAgZXhwb3J0cy5TRVJWRVJfSEVBUlRCRUFUX1NUQVJURUQsXG4gICAgZXhwb3J0cy5TRVJWRVJfSEVBUlRCRUFUX1NVQ0NFRURFRCxcbiAgICBleHBvcnRzLlNFUlZFUl9IRUFSVEJFQVRfRkFJTEVELFxuICAgIGV4cG9ydHMuQ09NTUFORF9TVEFSVEVELFxuICAgIGV4cG9ydHMuQ09NTUFORF9TVUNDRUVERUQsXG4gICAgZXhwb3J0cy5DT01NQU5EX0ZBSUxFRCxcbiAgICAuLi5leHBvcnRzLkNNQVBfRVZFTlRTXG5dKTtcbi8qKlxuICogQWxsIGV2ZW50cyB3ZSBsaXN0ZW4gdG8gZnJvbSBgU2VydmVyYCBpbnN0YW5jZXMsIGJ1dCBkbyBub3QgZm9yd2FyZCB0byB0aGUgY2xpZW50XG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0cy5MT0NBTF9TRVJWRVJfRVZFTlRTID0gT2JqZWN0LmZyZWV6ZShbXG4gICAgZXhwb3J0cy5DT05ORUNULFxuICAgIGV4cG9ydHMuREVTQ1JJUFRJT05fUkVDRUlWRUQsXG4gICAgZXhwb3J0cy5DTE9TRUQsXG4gICAgZXhwb3J0cy5FTkRFRFxuXSk7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5NT05HT19DTElFTlRfRVZFTlRTID0gT2JqZWN0LmZyZWV6ZShbXG4gICAgLi4uZXhwb3J0cy5DTUFQX0VWRU5UUyxcbiAgICAuLi5leHBvcnRzLkFQTV9FVkVOVFMsXG4gICAgLi4uZXhwb3J0cy5UT1BPTE9HWV9FVkVOVFMsXG4gICAgLi4uZXhwb3J0cy5IRUFSVEJFQVRfRVZFTlRTXG5dKTtcbi8qKlxuICogQGludGVybmFsXG4gKiBUaGUgbGVnYWN5IGhlbGxvIGNvbW1hbmQgdGhhdCB3YXMgZGVwcmVjYXRlZCBpbiBNb25nb0RCIDUuMC5cbiAqL1xuZXhwb3J0cy5MRUdBQ1lfSEVMTE9fQ09NTUFORCA9ICdpc21hc3Rlcic7XG4vKipcbiAqIEBpbnRlcm5hbFxuICogVGhlIGxlZ2FjeSBoZWxsbyBjb21tYW5kIHRoYXQgd2FzIGRlcHJlY2F0ZWQgaW4gTW9uZ29EQiA1LjAuXG4gKi9cbmV4cG9ydHMuTEVHQUNZX0hFTExPX0NPTU1BTkRfQ0FNRUxfQ0FTRSA9ICdpc01hc3Rlcic7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRU5EIiwiQ0hBTkdFIiwiSU5JVCIsIk1PUkUiLCJSRVNQT05TRSIsIlNFUlZFUl9IRUFSVEJFQVRfRkFJTEVEIiwiU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQiLCJTRVJWRVJfSEVBUlRCRUFUX1NUQVJURUQiLCJDT01NQU5EX0ZBSUxFRCIsIkNPTU1BTkRfU1VDQ0VFREVEIiwiQ09NTUFORF9TVEFSVEVEIiwiQ0xVU1RFUl9USU1FX1JFQ0VJVkVEIiwiQ09OTkVDVElPTl9DSEVDS0VEX0lOIiwiQ09OTkVDVElPTl9DSEVDS0VEX09VVCIsIkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX0ZBSUxFRCIsIkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX1NUQVJURUQiLCJDT05ORUNUSU9OX0NMT1NFRCIsIkNPTk5FQ1RJT05fUkVBRFkiLCJDT05ORUNUSU9OX0NSRUFURUQiLCJDT05ORUNUSU9OX1BPT0xfUkVBRFkiLCJDT05ORUNUSU9OX1BPT0xfQ0xFQVJFRCIsIkNPTk5FQ1RJT05fUE9PTF9DTE9TRUQiLCJDT05ORUNUSU9OX1BPT0xfQ1JFQVRFRCIsIldBSVRJTkdfRk9SX1NVSVRBQkxFX1NFUlZFUiIsIlNFUlZFUl9TRUxFQ1RJT05fU1VDQ0VFREVEIiwiU0VSVkVSX1NFTEVDVElPTl9GQUlMRUQiLCJTRVJWRVJfU0VMRUNUSU9OX1NUQVJURUQiLCJUT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VEIiwiVE9QT0xPR1lfQ0xPU0VEIiwiVE9QT0xPR1lfT1BFTklORyIsIlNFUlZFUl9ERVNDUklQVElPTl9DSEFOR0VEIiwiU0VSVkVSX0NMT1NFRCIsIlNFUlZFUl9PUEVOSU5HIiwiREVTQ1JJUFRJT05fUkVDRUlWRUQiLCJVTlBJTk5FRCIsIlBJTk5FRCIsIk1FU1NBR0UiLCJFTkRFRCIsIkNMT1NFRCIsIkNPTk5FQ1QiLCJPUEVOIiwiQ0xPU0UiLCJUSU1FT1VUIiwiRVJST1IiLCJTWVNURU1fSlNfQ09MTEVDVElPTiIsIlNZU1RFTV9DT01NQU5EX0NPTExFQ1RJT04iLCJTWVNURU1fVVNFUl9DT0xMRUNUSU9OIiwiU1lTVEVNX1BST0ZJTEVfQ09MTEVDVElPTiIsIlNZU1RFTV9JTkRFWF9DT0xMRUNUSU9OIiwiU1lTVEVNX05BTUVTUEFDRV9DT0xMRUNUSU9OIiwiTEVHQUNZX0hFTExPX0NPTU1BTkRfQ0FNRUxfQ0FTRSIsIkxFR0FDWV9IRUxMT19DT01NQU5EIiwiTU9OR09fQ0xJRU5UX0VWRU5UUyIsIkxPQ0FMX1NFUlZFUl9FVkVOVFMiLCJTRVJWRVJfUkVMQVlfRVZFTlRTIiwiQVBNX0VWRU5UUyIsIlRPUE9MT0dZX0VWRU5UUyIsIkNNQVBfRVZFTlRTIiwiSEVBUlRCRUFUX0VWRU5UUyIsIlJFU1VNRV9UT0tFTl9DSEFOR0VEIiwiZnJlZXplIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/abstract_cursor.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.assertUninitialized = exports.AbstractCursor = exports.CURSOR_FLAGS = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst get_more_1 = __webpack_require__(/*! ../operations/get_more */ \"(ssr)/./node_modules/mongodb/lib/operations/get_more.js\");\nconst kill_cursors_1 = __webpack_require__(/*! ../operations/kill_cursors */ \"(ssr)/./node_modules/mongodb/lib/operations/kill_cursors.js\");\nconst read_concern_1 = __webpack_require__(/*! ../read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst sessions_1 = __webpack_require__(/*! ../sessions */ \"(ssr)/./node_modules/mongodb/lib/sessions.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/** @internal */ const kId = Symbol(\"id\");\n/** @internal */ const kDocuments = Symbol(\"documents\");\n/** @internal */ const kServer = Symbol(\"server\");\n/** @internal */ const kNamespace = Symbol(\"namespace\");\n/** @internal */ const kClient = Symbol(\"client\");\n/** @internal */ const kSession = Symbol(\"session\");\n/** @internal */ const kOptions = Symbol(\"options\");\n/** @internal */ const kTransform = Symbol(\"transform\");\n/** @internal */ const kInitialized = Symbol(\"initialized\");\n/** @internal */ const kClosed = Symbol(\"closed\");\n/** @internal */ const kKilled = Symbol(\"killed\");\n/** @internal */ const kInit = Symbol(\"kInit\");\n/** @public */ exports.CURSOR_FLAGS = [\n    \"tailable\",\n    \"oplogReplay\",\n    \"noCursorTimeout\",\n    \"awaitData\",\n    \"exhaust\",\n    \"partial\"\n];\n/** @public */ class AbstractCursor extends mongo_types_1.TypedEventEmitter {\n    /** @internal */ constructor(client, namespace, options = {}){\n        super();\n        if (!client.s.isMongoClient) {\n            throw new error_1.MongoRuntimeError(\"Cursor must be constructed with MongoClient\");\n        }\n        this[kClient] = client;\n        this[kNamespace] = namespace;\n        this[kId] = null;\n        this[kDocuments] = new utils_1.List();\n        this[kInitialized] = false;\n        this[kClosed] = false;\n        this[kKilled] = false;\n        this[kOptions] = {\n            readPreference: options.readPreference && options.readPreference instanceof read_preference_1.ReadPreference ? options.readPreference : read_preference_1.ReadPreference.primary,\n            ...(0, bson_1.pluckBSONSerializeOptions)(options)\n        };\n        const readConcern = read_concern_1.ReadConcern.fromOptions(options);\n        if (readConcern) {\n            this[kOptions].readConcern = readConcern;\n        }\n        if (typeof options.batchSize === \"number\") {\n            this[kOptions].batchSize = options.batchSize;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            this[kOptions].comment = options.comment;\n        }\n        if (typeof options.maxTimeMS === \"number\") {\n            this[kOptions].maxTimeMS = options.maxTimeMS;\n        }\n        if (typeof options.maxAwaitTimeMS === \"number\") {\n            this[kOptions].maxAwaitTimeMS = options.maxAwaitTimeMS;\n        }\n        if (options.session instanceof sessions_1.ClientSession) {\n            this[kSession] = options.session;\n        } else {\n            this[kSession] = this[kClient].startSession({\n                owner: this,\n                explicit: false\n            });\n        }\n    }\n    get id() {\n        return this[kId] ?? undefined;\n    }\n    /** @internal */ get isDead() {\n        return (this[kId]?.isZero() ?? false) || this[kClosed] || this[kKilled];\n    }\n    /** @internal */ get client() {\n        return this[kClient];\n    }\n    /** @internal */ get server() {\n        return this[kServer];\n    }\n    get namespace() {\n        return this[kNamespace];\n    }\n    get readPreference() {\n        return this[kOptions].readPreference;\n    }\n    get readConcern() {\n        return this[kOptions].readConcern;\n    }\n    /** @internal */ get session() {\n        return this[kSession];\n    }\n    set session(clientSession) {\n        this[kSession] = clientSession;\n    }\n    /** @internal */ get cursorOptions() {\n        return this[kOptions];\n    }\n    get closed() {\n        return this[kClosed];\n    }\n    get killed() {\n        return this[kKilled];\n    }\n    get loadBalanced() {\n        return !!this[kClient].topology?.loadBalanced;\n    }\n    /** Returns current buffered documents length */ bufferedCount() {\n        return this[kDocuments].length;\n    }\n    /** Returns current buffered documents */ readBufferedDocuments(number) {\n        const bufferedDocs = [];\n        const documentsToRead = Math.min(number ?? this[kDocuments].length, this[kDocuments].length);\n        for(let count = 0; count < documentsToRead; count++){\n            const document = this[kDocuments].shift();\n            if (document != null) {\n                bufferedDocs.push(document);\n            }\n        }\n        return bufferedDocs;\n    }\n    async *[Symbol.asyncIterator]() {\n        if (this.closed) {\n            return;\n        }\n        try {\n            while(true){\n                const document = await this.next();\n                // Intentional strict null check, because users can map cursors to falsey values.\n                // We allow mapping to all values except for null.\n                // eslint-disable-next-line no-restricted-syntax\n                if (document === null) {\n                    if (!this.closed) {\n                        const message = \"Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.\";\n                        await cleanupCursor(this, {\n                            needsToEmitClosed: true\n                        }).catch(()=>null);\n                        throw new error_1.MongoAPIError(message);\n                    }\n                    break;\n                }\n                yield document;\n                if (this[kId] === bson_1.Long.ZERO) {\n                    break;\n                }\n            }\n        } finally{\n            // Only close the cursor if it has not already been closed. This finally clause handles\n            // the case when a user would break out of a for await of loop early.\n            if (!this.closed) {\n                await this.close().catch(()=>null);\n            }\n        }\n    }\n    stream(options) {\n        if (options?.transform) {\n            const transform = options.transform;\n            const readable = new ReadableCursorStream(this);\n            const transformedStream = readable.pipe(new stream_1.Transform({\n                objectMode: true,\n                highWaterMark: 1,\n                transform (chunk, _, callback) {\n                    try {\n                        const transformed = transform(chunk);\n                        callback(undefined, transformed);\n                    } catch (err) {\n                        callback(err);\n                    }\n                }\n            }));\n            // Bubble errors to transformed stream, because otherwise no way\n            // to handle this error.\n            readable.on(\"error\", (err)=>transformedStream.emit(\"error\", err));\n            return transformedStream;\n        }\n        return new ReadableCursorStream(this);\n    }\n    async hasNext() {\n        if (this[kId] === bson_1.Long.ZERO) {\n            return false;\n        }\n        if (this[kDocuments].length !== 0) {\n            return true;\n        }\n        const doc = await next(this, {\n            blocking: true,\n            transform: false\n        });\n        if (doc) {\n            this[kDocuments].unshift(doc);\n            return true;\n        }\n        return false;\n    }\n    /** Get the next available document from the cursor, returns null if no more documents are available. */ async next() {\n        if (this[kId] === bson_1.Long.ZERO) {\n            throw new error_1.MongoCursorExhaustedError();\n        }\n        return next(this, {\n            blocking: true,\n            transform: true\n        });\n    }\n    /**\n     * Try to get the next available document from the cursor or `null` if an empty batch is returned\n     */ async tryNext() {\n        if (this[kId] === bson_1.Long.ZERO) {\n            throw new error_1.MongoCursorExhaustedError();\n        }\n        return next(this, {\n            blocking: false,\n            transform: true\n        });\n    }\n    /**\n     * Iterates over all the documents for this cursor using the iterator, callback pattern.\n     *\n     * If the iterator returns `false`, iteration will stop.\n     *\n     * @param iterator - The iteration callback.\n     * @deprecated - Will be removed in a future release. Use for await...of instead.\n     */ async forEach(iterator) {\n        if (typeof iterator !== \"function\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"iterator\" must be a function');\n        }\n        for await (const document of this){\n            const result = iterator(document);\n            if (result === false) {\n                break;\n            }\n        }\n    }\n    async close() {\n        const needsToEmitClosed = !this[kClosed];\n        this[kClosed] = true;\n        await cleanupCursor(this, {\n            needsToEmitClosed\n        });\n    }\n    /**\n     * Returns an array of documents. The caller is responsible for making sure that there\n     * is enough memory to store the results. Note that the array only contains partial\n     * results when this cursor had been previously accessed. In that case,\n     * cursor.rewind() can be used to reset the cursor.\n     */ async toArray() {\n        const array = [];\n        for await (const document of this){\n            array.push(document);\n        }\n        return array;\n    }\n    /**\n     * Add a cursor flag to the cursor\n     *\n     * @param flag - The flag to set, must be one of following ['tailable', 'oplogReplay', 'noCursorTimeout', 'awaitData', 'partial' -.\n     * @param value - The flag boolean value.\n     */ addCursorFlag(flag, value) {\n        assertUninitialized(this);\n        if (!exports.CURSOR_FLAGS.includes(flag)) {\n            throw new error_1.MongoInvalidArgumentError(`Flag ${flag} is not one of ${exports.CURSOR_FLAGS}`);\n        }\n        if (typeof value !== \"boolean\") {\n            throw new error_1.MongoInvalidArgumentError(`Flag ${flag} must be a boolean value`);\n        }\n        this[kOptions][flag] = value;\n        return this;\n    }\n    /**\n     * Map all documents using the provided function\n     * If there is a transform set on the cursor, that will be called first and the result passed to\n     * this function's transform.\n     *\n     * @remarks\n     *\n     * **Note** Cursors use `null` internally to indicate that there are no more documents in the cursor. Providing a mapping\n     * function that maps values to `null` will result in the cursor closing itself before it has finished iterating\n     * all documents.  This will **not** result in a memory leak, just surprising behavior.  For example:\n     *\n     * ```typescript\n     * const cursor = collection.find({});\n     * cursor.map(() => null);\n     *\n     * const documents = await cursor.toArray();\n     * // documents is always [], regardless of how many documents are in the collection.\n     * ```\n     *\n     * Other falsey values are allowed:\n     *\n     * ```typescript\n     * const cursor = collection.find({});\n     * cursor.map(() => '');\n     *\n     * const documents = await cursor.toArray();\n     * // documents is now an array of empty strings\n     * ```\n     *\n     * **Note for Typescript Users:** adding a transform changes the return type of the iteration of this cursor,\n     * it **does not** return a new instance of a cursor. This means when calling map,\n     * you should always assign the result to a new variable in order to get a correctly typed cursor variable.\n     * Take note of the following example:\n     *\n     * @example\n     * ```typescript\n     * const cursor: FindCursor<Document> = coll.find();\n     * const mappedCursor: FindCursor<number> = cursor.map(doc => Object.keys(doc).length);\n     * const keyCounts: number[] = await mappedCursor.toArray(); // cursor.toArray() still returns Document[]\n     * ```\n     * @param transform - The mapping transformation method.\n     */ map(transform) {\n        assertUninitialized(this);\n        const oldTransform = this[kTransform]; // TODO(NODE-3283): Improve transform typing\n        if (oldTransform) {\n            this[kTransform] = (doc)=>{\n                return transform(oldTransform(doc));\n            };\n        } else {\n            this[kTransform] = transform;\n        }\n        return this;\n    }\n    /**\n     * Set the ReadPreference for the cursor.\n     *\n     * @param readPreference - The new read preference for the cursor.\n     */ withReadPreference(readPreference) {\n        assertUninitialized(this);\n        if (readPreference instanceof read_preference_1.ReadPreference) {\n            this[kOptions].readPreference = readPreference;\n        } else if (typeof readPreference === \"string\") {\n            this[kOptions].readPreference = read_preference_1.ReadPreference.fromString(readPreference);\n        } else {\n            throw new error_1.MongoInvalidArgumentError(`Invalid read preference: ${readPreference}`);\n        }\n        return this;\n    }\n    /**\n     * Set the ReadPreference for the cursor.\n     *\n     * @param readPreference - The new read preference for the cursor.\n     */ withReadConcern(readConcern) {\n        assertUninitialized(this);\n        const resolvedReadConcern = read_concern_1.ReadConcern.fromOptions({\n            readConcern\n        });\n        if (resolvedReadConcern) {\n            this[kOptions].readConcern = resolvedReadConcern;\n        }\n        return this;\n    }\n    /**\n     * Set a maxTimeMS on the cursor query, allowing for hard timeout limits on queries (Only supported on MongoDB 2.6 or higher)\n     *\n     * @param value - Number of milliseconds to wait before aborting the query.\n     */ maxTimeMS(value) {\n        assertUninitialized(this);\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError(\"Argument for maxTimeMS must be a number\");\n        }\n        this[kOptions].maxTimeMS = value;\n        return this;\n    }\n    /**\n     * Set the batch size for the cursor.\n     *\n     * @param value - The number of documents to return per batch. See {@link https://www.mongodb.com/docs/manual/reference/command/find/|find command documentation}.\n     */ batchSize(value) {\n        assertUninitialized(this);\n        if (this[kOptions].tailable) {\n            throw new error_1.MongoTailableCursorError(\"Tailable cursor does not support batchSize\");\n        }\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError('Operation \"batchSize\" requires an integer');\n        }\n        this[kOptions].batchSize = value;\n        return this;\n    }\n    /**\n     * Rewind this cursor to its uninitialized state. Any options that are present on the cursor will\n     * remain in effect. Iterating this cursor will cause new queries to be sent to the server, even\n     * if the resultant data has already been retrieved by this cursor.\n     */ rewind() {\n        if (!this[kInitialized]) {\n            return;\n        }\n        this[kId] = null;\n        this[kDocuments].clear();\n        this[kClosed] = false;\n        this[kKilled] = false;\n        this[kInitialized] = false;\n        const session = this[kSession];\n        if (session) {\n            // We only want to end this session if we created it, and it hasn't ended yet\n            if (session.explicit === false) {\n                if (!session.hasEnded) {\n                    session.endSession().catch(()=>null);\n                }\n                this[kSession] = this.client.startSession({\n                    owner: this,\n                    explicit: false\n                });\n            }\n        }\n    }\n    /** @internal */ async getMore(batchSize) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const getMoreOperation = new get_more_1.GetMoreOperation(this[kNamespace], this[kId], this[kServer], {\n            ...this[kOptions],\n            session: this[kSession],\n            batchSize\n        });\n        return (0, execute_operation_1.executeOperation)(this[kClient], getMoreOperation);\n    }\n    /**\n     * @internal\n     *\n     * This function is exposed for the unified test runner's createChangeStream\n     * operation.  We cannot refactor to use the abstract _initialize method without\n     * a significant refactor.\n     */ async [kInit]() {\n        try {\n            const state = await this._initialize(this[kSession]);\n            const response = state.response;\n            this[kServer] = state.server;\n            if (response.cursor) {\n                // TODO(NODE-2674): Preserve int64 sent from MongoDB\n                this[kId] = typeof response.cursor.id === \"number\" ? bson_1.Long.fromNumber(response.cursor.id) : typeof response.cursor.id === \"bigint\" ? bson_1.Long.fromBigInt(response.cursor.id) : response.cursor.id;\n                if (response.cursor.ns) {\n                    this[kNamespace] = (0, utils_1.ns)(response.cursor.ns);\n                }\n                this[kDocuments].pushMany(response.cursor.firstBatch);\n            }\n            // When server responses return without a cursor document, we close this cursor\n            // and return the raw server response. This is often the case for explain commands\n            // for example\n            if (this[kId] == null) {\n                this[kId] = bson_1.Long.ZERO;\n                // TODO(NODE-3286): ExecutionResult needs to accept a generic parameter\n                this[kDocuments].push(state.response);\n            }\n            // the cursor is now initialized, even if it is dead\n            this[kInitialized] = true;\n        } catch (error) {\n            // the cursor is now initialized, even if an error occurred\n            this[kInitialized] = true;\n            await cleanupCursor(this, {\n                error\n            });\n            throw error;\n        }\n        if (this.isDead) {\n            await cleanupCursor(this, undefined);\n        }\n        return;\n    }\n}\n/** @event */ AbstractCursor.CLOSE = \"close\";\nexports.AbstractCursor = AbstractCursor;\n/**\n * @param cursor - the cursor on which to call `next`\n * @param blocking - a boolean indicating whether or not the cursor should `block` until data\n *     is available.  Generally, this flag is set to `false` because if the getMore returns no documents,\n *     the cursor has been exhausted.  In certain scenarios (ChangeStreams, tailable await cursors and\n *     `tryNext`, for example) blocking is necessary because a getMore returning no documents does\n *     not indicate the end of the cursor.\n * @param transform - if true, the cursor's transform function is applied to the result document (if the transform exists)\n * @returns the next document in the cursor, or `null`.  When `blocking` is `true`, a `null` document means\n * the cursor has been exhausted.  Otherwise, it means that there is no document available in the cursor's buffer.\n */ async function next(cursor, { blocking, transform }) {\n    if (cursor.closed) {\n        return null;\n    }\n    do {\n        if (cursor[kId] == null) {\n            // All cursors must operate within a session, one must be made implicitly if not explicitly provided\n            await cursor[kInit]();\n        }\n        if (cursor[kDocuments].length !== 0) {\n            const doc = cursor[kDocuments].shift();\n            if (doc != null && transform && cursor[kTransform]) {\n                try {\n                    return cursor[kTransform](doc);\n                } catch (error) {\n                    // `cleanupCursorAsync` should never throw, but if it does we want to throw the original\n                    // error instead.\n                    await cleanupCursor(cursor, {\n                        error,\n                        needsToEmitClosed: true\n                    }).catch(()=>null);\n                    throw error;\n                }\n            }\n            return doc;\n        }\n        if (cursor.isDead) {\n            // if the cursor is dead, we clean it up\n            // cleanupCursorAsync should never throw, but if it does it indicates a bug in the driver\n            // and we should surface the error\n            await cleanupCursor(cursor, {});\n            return null;\n        }\n        // otherwise need to call getMore\n        const batchSize = cursor[kOptions].batchSize || 1000;\n        try {\n            const response = await cursor.getMore(batchSize);\n            if (response) {\n                const cursorId = typeof response.cursor.id === \"number\" ? bson_1.Long.fromNumber(response.cursor.id) : typeof response.cursor.id === \"bigint\" ? bson_1.Long.fromBigInt(response.cursor.id) : response.cursor.id;\n                cursor[kDocuments].pushMany(response.cursor.nextBatch);\n                cursor[kId] = cursorId;\n            }\n        } catch (error) {\n            // `cleanupCursorAsync` should never throw, but if it does we want to throw the original\n            // error instead.\n            await cleanupCursor(cursor, {\n                error\n            }).catch(()=>null);\n            throw error;\n        }\n        if (cursor.isDead) {\n            // If we successfully received a response from a cursor BUT the cursor indicates that it is exhausted,\n            // we intentionally clean up the cursor to release its session back into the pool before the cursor\n            // is iterated.  This prevents a cursor that is exhausted on the server from holding\n            // onto a session indefinitely until the AbstractCursor is iterated.\n            //\n            // cleanupCursorAsync should never throw, but if it does it indicates a bug in the driver\n            // and we should surface the error\n            await cleanupCursor(cursor, {});\n        }\n        if (cursor[kDocuments].length === 0 && blocking === false) {\n            return null;\n        }\n    }while (!cursor.isDead || cursor[kDocuments].length !== 0);\n    return null;\n}\nasync function cleanupCursor(cursor, options) {\n    const cursorId = cursor[kId];\n    const cursorNs = cursor[kNamespace];\n    const server = cursor[kServer];\n    const session = cursor[kSession];\n    const error = options?.error;\n    // Cursors only emit closed events once the client-side cursor has been exhausted fully or there\n    // was an error.  Notably, when the server returns a cursor id of 0 and a non-empty batch, we\n    // cleanup the cursor but don't emit a `close` event.\n    const needsToEmitClosed = options?.needsToEmitClosed ?? cursor[kDocuments].length === 0;\n    if (error) {\n        if (cursor.loadBalanced && error instanceof error_1.MongoNetworkError) {\n            return completeCleanup();\n        }\n    }\n    if (cursorId == null || server == null || cursorId.isZero() || cursorNs == null) {\n        if (needsToEmitClosed) {\n            cursor[kClosed] = true;\n            cursor[kId] = bson_1.Long.ZERO;\n            cursor.emit(AbstractCursor.CLOSE);\n        }\n        if (session) {\n            if (session.owner === cursor) {\n                await session.endSession({\n                    error\n                });\n                return;\n            }\n            if (!session.inTransaction()) {\n                (0, sessions_1.maybeClearPinnedConnection)(session, {\n                    error\n                });\n            }\n        }\n        return;\n    }\n    async function completeCleanup() {\n        if (session) {\n            if (session.owner === cursor) {\n                try {\n                    await session.endSession({\n                        error\n                    });\n                } finally{\n                    cursor.emit(AbstractCursor.CLOSE);\n                }\n                return;\n            }\n            if (!session.inTransaction()) {\n                (0, sessions_1.maybeClearPinnedConnection)(session, {\n                    error\n                });\n            }\n        }\n        cursor.emit(AbstractCursor.CLOSE);\n        return;\n    }\n    cursor[kKilled] = true;\n    if (session.hasEnded) {\n        return completeCleanup();\n    }\n    try {\n        await (0, execute_operation_1.executeOperation)(cursor[kClient], new kill_cursors_1.KillCursorsOperation(cursorId, cursorNs, server, {\n            session\n        })).catch(()=>null);\n    } finally{\n        await completeCleanup();\n    }\n}\n/** @internal */ function assertUninitialized(cursor) {\n    if (cursor[kInitialized]) {\n        throw new error_1.MongoCursorInUseError();\n    }\n}\nexports.assertUninitialized = assertUninitialized;\nclass ReadableCursorStream extends stream_1.Readable {\n    constructor(cursor){\n        super({\n            objectMode: true,\n            autoDestroy: false,\n            highWaterMark: 1\n        });\n        this._readInProgress = false;\n        this._cursor = cursor;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _read(size) {\n        if (!this._readInProgress) {\n            this._readInProgress = true;\n            this._readNext();\n        }\n    }\n    _destroy(error, callback) {\n        this._cursor.close().then(()=>callback(error), (closeError)=>callback(closeError));\n    }\n    _readNext() {\n        next(this._cursor, {\n            blocking: true,\n            transform: true\n        }).then((result)=>{\n            if (result == null) {\n                this.push(null);\n            } else if (this.destroyed) {\n                this._cursor.close().catch(()=>null);\n            } else {\n                if (this.push(result)) {\n                    return this._readNext();\n                }\n                this._readInProgress = false;\n            }\n        }, (err)=>{\n            // NOTE: This is questionable, but we have a test backing the behavior. It seems the\n            //       desired behavior is that a stream ends cleanly when a user explicitly closes\n            //       a client during iteration. Alternatively, we could do the \"right\" thing and\n            //       propagate the error message by removing this special case.\n            if (err.message.match(/server is closed/)) {\n                this._cursor.close().catch(()=>null);\n                return this.push(null);\n            }\n            // NOTE: This is also perhaps questionable. The rationale here is that these errors tend\n            //       to be \"operation was interrupted\", where a cursor has been closed but there is an\n            //       active getMore in-flight. This used to check if the cursor was killed but once\n            //       that changed to happen in cleanup legitimate errors would not destroy the\n            //       stream. There are change streams test specifically test these cases.\n            if (err.message.match(/operation was interrupted/)) {\n                return this.push(null);\n            }\n            // NOTE: The two above checks on the message of the error will cause a null to be pushed\n            //       to the stream, thus closing the stream before the destroy call happens. This means\n            //       that either of those error messages on a change stream will not get a proper\n            //       'error' event to be emitted (the error passed to destroy). Change stream resumability\n            //       relies on that error event to be emitted to create its new cursor and thus was not\n            //       working on 4.4 servers because the error emitted on failover was \"interrupted at\n            //       shutdown\" while on 5.0+ it is \"The server is in quiesce mode and will shut down\".\n            //       See NODE-4475.\n            return this.destroy(err);\n        });\n    }\n} //# sourceMappingURL=abstract_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2Fic3RyYWN0X2N1cnNvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkJBQTJCLEdBQUdBLHNCQUFzQixHQUFHQSxvQkFBb0IsR0FBRyxLQUFLO0FBQ25GLE1BQU1LLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1FLFVBQVVGLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1HLGdCQUFnQkgsbUJBQU9BLENBQUMsdUVBQWdCO0FBQzlDLE1BQU1JLHNCQUFzQkosbUJBQU9BLENBQUMseUdBQWlDO0FBQ3JFLE1BQU1LLGFBQWFMLG1CQUFPQSxDQUFDLHVGQUF3QjtBQUNuRCxNQUFNTSxpQkFBaUJOLG1CQUFPQSxDQUFDLCtGQUE0QjtBQUMzRCxNQUFNTyxpQkFBaUJQLG1CQUFPQSxDQUFDLHlFQUFpQjtBQUNoRCxNQUFNUSxvQkFBb0JSLG1CQUFPQSxDQUFDLCtFQUFvQjtBQUN0RCxNQUFNUyxhQUFhVCxtQkFBT0EsQ0FBQyxpRUFBYTtBQUN4QyxNQUFNVSxVQUFVVixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxjQUFjLEdBQ2QsTUFBTVcsTUFBTUMsT0FBTztBQUNuQixjQUFjLEdBQ2QsTUFBTUMsYUFBYUQsT0FBTztBQUMxQixjQUFjLEdBQ2QsTUFBTUUsVUFBVUYsT0FBTztBQUN2QixjQUFjLEdBQ2QsTUFBTUcsYUFBYUgsT0FBTztBQUMxQixjQUFjLEdBQ2QsTUFBTUksVUFBVUosT0FBTztBQUN2QixjQUFjLEdBQ2QsTUFBTUssV0FBV0wsT0FBTztBQUN4QixjQUFjLEdBQ2QsTUFBTU0sV0FBV04sT0FBTztBQUN4QixjQUFjLEdBQ2QsTUFBTU8sYUFBYVAsT0FBTztBQUMxQixjQUFjLEdBQ2QsTUFBTVEsZUFBZVIsT0FBTztBQUM1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QUFJLElBQUksQ0FBQ04sSUFBSSxDQUFDb0MsU0FBUztvQkFDbkIsT0FBTyxJQUFJLENBQUNnRCxTQUFTO2dCQUN6QjtnQkFDQSxJQUFJLENBQUNKLGVBQWUsR0FBRztZQUMzQjtRQUNKLEdBQUd4RCxDQUFBQTtZQUNDLG9GQUFvRjtZQUNwRixxRkFBcUY7WUFDckYsb0ZBQW9GO1lBQ3BGLG1FQUFtRTtZQUNuRSxJQUFJQSxJQUFJckIsT0FBTyxDQUFDc0YsS0FBSyxDQUFDLHFCQUFxQjtnQkFDdkMsSUFBSSxDQUFDUixPQUFPLENBQUN2RSxLQUFLLEdBQUdKLEtBQUssQ0FBQyxJQUFNO2dCQUNqQyxPQUFPLElBQUksQ0FBQ04sSUFBSSxDQUFDO1lBQ3JCO1lBQ0Esd0ZBQXdGO1lBQ3hGLDBGQUEwRjtZQUMxRix1RkFBdUY7WUFDdkYsa0ZBQWtGO1lBQ2xGLDZFQUE2RTtZQUM3RSxJQUFJd0IsSUFBSXJCLE9BQU8sQ0FBQ3NGLEtBQUssQ0FBQyw4QkFBOEI7Z0JBQ2hELE9BQU8sSUFBSSxDQUFDekYsSUFBSSxDQUFDO1lBQ3JCO1lBQ0Esd0ZBQXdGO1lBQ3hGLDJGQUEyRjtZQUMzRixxRkFBcUY7WUFDckYsOEZBQThGO1lBQzlGLDJGQUEyRjtZQUMzRix5RkFBeUY7WUFDekYsMEZBQTBGO1lBQzFGLHVCQUF1QjtZQUN2QixPQUFPLElBQUksQ0FBQzBGLE9BQU8sQ0FBQ2xFO1FBQ3hCO0lBQ0o7QUFDSixFQUNBLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2Fic3RyYWN0X2N1cnNvci5qcz9jNzc3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5hc3NlcnRVbmluaXRpYWxpemVkID0gZXhwb3J0cy5BYnN0cmFjdEN1cnNvciA9IGV4cG9ydHMuQ1VSU09SX0ZMQUdTID0gdm9pZCAwO1xuY29uc3Qgc3RyZWFtXzEgPSByZXF1aXJlKFwic3RyZWFtXCIpO1xuY29uc3QgYnNvbl8xID0gcmVxdWlyZShcIi4uL2Jzb25cIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgbW9uZ29fdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9tb25nb190eXBlc1wiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvblwiKTtcbmNvbnN0IGdldF9tb3JlXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9nZXRfbW9yZVwiKTtcbmNvbnN0IGtpbGxfY3Vyc29yc18xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMva2lsbF9jdXJzb3JzXCIpO1xuY29uc3QgcmVhZF9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9jb25jZXJuXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3Qgc2Vzc2lvbnNfMSA9IHJlcXVpcmUoXCIuLi9zZXNzaW9uc1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrSWQgPSBTeW1ib2woJ2lkJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrRG9jdW1lbnRzID0gU3ltYm9sKCdkb2N1bWVudHMnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXJ2ZXIgPSBTeW1ib2woJ3NlcnZlcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga05hbWVzcGFjZSA9IFN5bWJvbCgnbmFtZXNwYWNlJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrQ2xpZW50ID0gU3ltYm9sKCdjbGllbnQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXNzaW9uID0gU3ltYm9sKCdzZXNzaW9uJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrT3B0aW9ucyA9IFN5bWJvbCgnb3B0aW9ucycpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1RyYW5zZm9ybSA9IFN5bWJvbCgndHJhbnNmb3JtJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrSW5pdGlhbGl6ZWQgPSBTeW1ib2woJ2luaXRpYWxpemVkJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrQ2xvc2VkID0gU3ltYm9sKCdjbG9zZWQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtLaWxsZWQgPSBTeW1ib2woJ2tpbGxlZCcpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0luaXQgPSBTeW1ib2woJ2tJbml0Jyk7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5DVVJTT1JfRkxBR1MgPSBbXG4gICAgJ3RhaWxhYmxlJyxcbiAgICAnb3Bsb2dSZXBsYXknLFxuICAgICdub0N1cnNvclRpbWVvdXQnLFxuICAgICdhd2FpdERhdGEnLFxuICAgICdleGhhdXN0JyxcbiAgICAncGFydGlhbCdcbl07XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgQWJzdHJhY3RDdXJzb3IgZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoY2xpZW50LCBuYW1lc3BhY2UsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoIWNsaWVudC5zLmlzTW9uZ29DbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdDdXJzb3IgbXVzdCBiZSBjb25zdHJ1Y3RlZCB3aXRoIE1vbmdvQ2xpZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trQ2xpZW50XSA9IGNsaWVudDtcbiAgICAgICAgdGhpc1trTmFtZXNwYWNlXSA9IG5hbWVzcGFjZTtcbiAgICAgICAgdGhpc1trSWRdID0gbnVsbDtcbiAgICAgICAgdGhpc1trRG9jdW1lbnRzXSA9IG5ldyB1dGlsc18xLkxpc3QoKTtcbiAgICAgICAgdGhpc1trSW5pdGlhbGl6ZWRdID0gZmFsc2U7XG4gICAgICAgIHRoaXNba0Nsb3NlZF0gPSBmYWxzZTtcbiAgICAgICAgdGhpc1trS2lsbGVkXSA9IGZhbHNlO1xuICAgICAgICB0aGlzW2tPcHRpb25zXSA9IHtcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlOiBvcHRpb25zLnJlYWRQcmVmZXJlbmNlICYmIG9wdGlvbnMucmVhZFByZWZlcmVuY2UgaW5zdGFuY2VvZiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5yZWFkUHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgIDogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeSxcbiAgICAgICAgICAgIC4uLigwLCBic29uXzEucGx1Y2tCU09OU2VyaWFsaXplT3B0aW9ucykob3B0aW9ucylcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVhZENvbmNlcm4gPSByZWFkX2NvbmNlcm5fMS5SZWFkQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgaWYgKHJlYWRDb25jZXJuKSB7XG4gICAgICAgICAgICB0aGlzW2tPcHRpb25zXS5yZWFkQ29uY2VybiA9IHJlYWRDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5iYXRjaFNpemUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzW2tPcHRpb25zXS5iYXRjaFNpemUgPSBvcHRpb25zLmJhdGNoU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSBjaGVjayBmb3IgdW5kZWZpbmVkIHNwZWNpZmljYWxseSBoZXJlIHRvIGFsbG93IGZhbHN5IHZhbHVlc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzW2tPcHRpb25zXS5jb21tZW50ID0gb3B0aW9ucy5jb21tZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5tYXhUaW1lTVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzW2tPcHRpb25zXS5tYXhUaW1lTVMgPSBvcHRpb25zLm1heFRpbWVNUztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubWF4QXdhaXRUaW1lTVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzW2tPcHRpb25zXS5tYXhBd2FpdFRpbWVNUyA9IG9wdGlvbnMubWF4QXdhaXRUaW1lTVM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc2Vzc2lvbiBpbnN0YW5jZW9mIHNlc3Npb25zXzEuQ2xpZW50U2Vzc2lvbikge1xuICAgICAgICAgICAgdGhpc1trU2Vzc2lvbl0gPSBvcHRpb25zLnNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzW2tTZXNzaW9uXSA9IHRoaXNba0NsaWVudF0uc3RhcnRTZXNzaW9uKHsgb3duZXI6IHRoaXMsIGV4cGxpY2l0OiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tJZF0gPz8gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZ2V0IGlzRGVhZCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzW2tJZF0/LmlzWmVybygpID8/IGZhbHNlKSB8fCB0aGlzW2tDbG9zZWRdIHx8IHRoaXNba0tpbGxlZF07XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBnZXQgY2xpZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpc1trQ2xpZW50XTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGdldCBzZXJ2ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXJ2ZXJdO1xuICAgIH1cbiAgICBnZXQgbmFtZXNwYWNlKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trTmFtZXNwYWNlXTtcbiAgICB9XG4gICAgZ2V0IHJlYWRQcmVmZXJlbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trT3B0aW9uc10ucmVhZFByZWZlcmVuY2U7XG4gICAgfVxuICAgIGdldCByZWFkQ29uY2VybigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba09wdGlvbnNdLnJlYWRDb25jZXJuO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZ2V0IHNlc3Npb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tTZXNzaW9uXTtcbiAgICB9XG4gICAgc2V0IHNlc3Npb24oY2xpZW50U2Vzc2lvbikge1xuICAgICAgICB0aGlzW2tTZXNzaW9uXSA9IGNsaWVudFNlc3Npb247XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBnZXQgY3Vyc29yT3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba09wdGlvbnNdO1xuICAgIH1cbiAgICBnZXQgY2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trQ2xvc2VkXTtcbiAgICB9XG4gICAgZ2V0IGtpbGxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0tpbGxlZF07XG4gICAgfVxuICAgIGdldCBsb2FkQmFsYW5jZWQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXNba0NsaWVudF0udG9wb2xvZ3k/LmxvYWRCYWxhbmNlZDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgY3VycmVudCBidWZmZXJlZCBkb2N1bWVudHMgbGVuZ3RoICovXG4gICAgYnVmZmVyZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba0RvY3VtZW50c10ubGVuZ3RoO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBjdXJyZW50IGJ1ZmZlcmVkIGRvY3VtZW50cyAqL1xuICAgIHJlYWRCdWZmZXJlZERvY3VtZW50cyhudW1iZXIpIHtcbiAgICAgICAgY29uc3QgYnVmZmVyZWREb2NzID0gW107XG4gICAgICAgIGNvbnN0IGRvY3VtZW50c1RvUmVhZCA9IE1hdGgubWluKG51bWJlciA/PyB0aGlzW2tEb2N1bWVudHNdLmxlbmd0aCwgdGhpc1trRG9jdW1lbnRzXS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBjb3VudCA9IDA7IGNvdW50IDwgZG9jdW1lbnRzVG9SZWFkOyBjb3VudCsrKSB7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IHRoaXNba0RvY3VtZW50c10uc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyZWREb2NzLnB1c2goZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmZXJlZERvY3M7XG4gICAgfVxuICAgIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGF3YWl0IHRoaXMubmV4dCgpO1xuICAgICAgICAgICAgICAgIC8vIEludGVudGlvbmFsIHN0cmljdCBudWxsIGNoZWNrLCBiZWNhdXNlIHVzZXJzIGNhbiBtYXAgY3Vyc29ycyB0byBmYWxzZXkgdmFsdWVzLlxuICAgICAgICAgICAgICAgIC8vIFdlIGFsbG93IG1hcHBpbmcgdG8gYWxsIHZhbHVlcyBleGNlcHQgZm9yIG51bGwuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnQ3Vyc29yIHJldHVybmVkIGEgYG51bGxgIGRvY3VtZW50LCBidXQgdGhlIGN1cnNvciBpcyBub3QgZXhoYXVzdGVkLiAgTWFwcGluZyBkb2N1bWVudHMgdG8gYG51bGxgIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIGN1cnNvciB0cmFuc2Zvcm0uJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXBDdXJzb3IodGhpcywgeyBuZWVkc1RvRW1pdENsb3NlZDogdHJ1ZSB9KS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIGRvY3VtZW50O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzW2tJZF0gPT09IGJzb25fMS5Mb25nLlpFUk8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3Vyc29yIGV4aGF1c3RlZFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAvLyBPbmx5IGNsb3NlIHRoZSBjdXJzb3IgaWYgaXQgaGFzIG5vdCBhbHJlYWR5IGJlZW4gY2xvc2VkLiBUaGlzIGZpbmFsbHkgY2xhdXNlIGhhbmRsZXNcbiAgICAgICAgICAgIC8vIHRoZSBjYXNlIHdoZW4gYSB1c2VyIHdvdWxkIGJyZWFrIG91dCBvZiBhIGZvciBhd2FpdCBvZiBsb29wIGVhcmx5LlxuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xvc2UoKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHJlYW0ob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucz8udHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBvcHRpb25zLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRhYmxlID0gbmV3IFJlYWRhYmxlQ3Vyc29yU3RyZWFtKHRoaXMpO1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZWRTdHJlYW0gPSByZWFkYWJsZS5waXBlKG5ldyBzdHJlYW1fMS5UcmFuc2Zvcm0oe1xuICAgICAgICAgICAgICAgIG9iamVjdE1vZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaGlnaFdhdGVyTWFyazogMSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIF8sIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHRyYW5zZm9ybShjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHRyYW5zZm9ybWVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgLy8gQnViYmxlIGVycm9ycyB0byB0cmFuc2Zvcm1lZCBzdHJlYW0sIGJlY2F1c2Ugb3RoZXJ3aXNlIG5vIHdheVxuICAgICAgICAgICAgLy8gdG8gaGFuZGxlIHRoaXMgZXJyb3IuXG4gICAgICAgICAgICByZWFkYWJsZS5vbignZXJyb3InLCBlcnIgPT4gdHJhbnNmb3JtZWRTdHJlYW0uZW1pdCgnZXJyb3InLCBlcnIpKTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZFN0cmVhbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJlYWRhYmxlQ3Vyc29yU3RyZWFtKHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBoYXNOZXh0KCkge1xuICAgICAgICBpZiAodGhpc1trSWRdID09PSBic29uXzEuTG9uZy5aRVJPKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXNba0RvY3VtZW50c10ubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkb2MgPSBhd2FpdCBuZXh0KHRoaXMsIHsgYmxvY2tpbmc6IHRydWUsIHRyYW5zZm9ybTogZmFsc2UgfSk7XG4gICAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgICAgIHRoaXNba0RvY3VtZW50c10udW5zaGlmdChkb2MpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKiogR2V0IHRoZSBuZXh0IGF2YWlsYWJsZSBkb2N1bWVudCBmcm9tIHRoZSBjdXJzb3IsIHJldHVybnMgbnVsbCBpZiBubyBtb3JlIGRvY3VtZW50cyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIGFzeW5jIG5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzW2tJZF0gPT09IGJzb25fMS5Mb25nLlpFUk8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ3Vyc29yRXhoYXVzdGVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dCh0aGlzLCB7IGJsb2NraW5nOiB0cnVlLCB0cmFuc2Zvcm06IHRydWUgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyeSB0byBnZXQgdGhlIG5leHQgYXZhaWxhYmxlIGRvY3VtZW50IGZyb20gdGhlIGN1cnNvciBvciBgbnVsbGAgaWYgYW4gZW1wdHkgYmF0Y2ggaXMgcmV0dXJuZWRcbiAgICAgKi9cbiAgICBhc3luYyB0cnlOZXh0KCkge1xuICAgICAgICBpZiAodGhpc1trSWRdID09PSBic29uXzEuTG9uZy5aRVJPKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0N1cnNvckV4aGF1c3RlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHQodGhpcywgeyBibG9ja2luZzogZmFsc2UsIHRyYW5zZm9ybTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGhlIGRvY3VtZW50cyBmb3IgdGhpcyBjdXJzb3IgdXNpbmcgdGhlIGl0ZXJhdG9yLCBjYWxsYmFjayBwYXR0ZXJuLlxuICAgICAqXG4gICAgICogSWYgdGhlIGl0ZXJhdG9yIHJldHVybnMgYGZhbHNlYCwgaXRlcmF0aW9uIHdpbGwgc3RvcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpdGVyYXRvciAtIFRoZSBpdGVyYXRpb24gY2FsbGJhY2suXG4gICAgICogQGRlcHJlY2F0ZWQgLSBXaWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS4gVXNlIGZvciBhd2FpdC4uLm9mIGluc3RlYWQuXG4gICAgICovXG4gICAgYXN5bmMgZm9yRWFjaChpdGVyYXRvcikge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBcmd1bWVudCBcIml0ZXJhdG9yXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBkb2N1bWVudCBvZiB0aGlzKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBpdGVyYXRvcihkb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICBjb25zdCBuZWVkc1RvRW1pdENsb3NlZCA9ICF0aGlzW2tDbG9zZWRdO1xuICAgICAgICB0aGlzW2tDbG9zZWRdID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgY2xlYW51cEN1cnNvcih0aGlzLCB7IG5lZWRzVG9FbWl0Q2xvc2VkIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGRvY3VtZW50cy4gVGhlIGNhbGxlciBpcyByZXNwb25zaWJsZSBmb3IgbWFraW5nIHN1cmUgdGhhdCB0aGVyZVxuICAgICAqIGlzIGVub3VnaCBtZW1vcnkgdG8gc3RvcmUgdGhlIHJlc3VsdHMuIE5vdGUgdGhhdCB0aGUgYXJyYXkgb25seSBjb250YWlucyBwYXJ0aWFsXG4gICAgICogcmVzdWx0cyB3aGVuIHRoaXMgY3Vyc29yIGhhZCBiZWVuIHByZXZpb3VzbHkgYWNjZXNzZWQuIEluIHRoYXQgY2FzZSxcbiAgICAgKiBjdXJzb3IucmV3aW5kKCkgY2FuIGJlIHVzZWQgdG8gcmVzZXQgdGhlIGN1cnNvci5cbiAgICAgKi9cbiAgICBhc3luYyB0b0FycmF5KCkge1xuICAgICAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGRvY3VtZW50IG9mIHRoaXMpIHtcbiAgICAgICAgICAgIGFycmF5LnB1c2goZG9jdW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgY3Vyc29yIGZsYWcgdG8gdGhlIGN1cnNvclxuICAgICAqXG4gICAgICogQHBhcmFtIGZsYWcgLSBUaGUgZmxhZyB0byBzZXQsIG11c3QgYmUgb25lIG9mIGZvbGxvd2luZyBbJ3RhaWxhYmxlJywgJ29wbG9nUmVwbGF5JywgJ25vQ3Vyc29yVGltZW91dCcsICdhd2FpdERhdGEnLCAncGFydGlhbCcgLS5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgZmxhZyBib29sZWFuIHZhbHVlLlxuICAgICAqL1xuICAgIGFkZEN1cnNvckZsYWcoZmxhZywgdmFsdWUpIHtcbiAgICAgICAgYXNzZXJ0VW5pbml0aWFsaXplZCh0aGlzKTtcbiAgICAgICAgaWYgKCFleHBvcnRzLkNVUlNPUl9GTEFHUy5pbmNsdWRlcyhmbGFnKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgRmxhZyAke2ZsYWd9IGlzIG5vdCBvbmUgb2YgJHtleHBvcnRzLkNVUlNPUl9GTEFHU31gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYEZsYWcgJHtmbGFnfSBtdXN0IGJlIGEgYm9vbGVhbiB2YWx1ZWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba09wdGlvbnNdW2ZsYWddID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXAgYWxsIGRvY3VtZW50cyB1c2luZyB0aGUgcHJvdmlkZWQgZnVuY3Rpb25cbiAgICAgKiBJZiB0aGVyZSBpcyBhIHRyYW5zZm9ybSBzZXQgb24gdGhlIGN1cnNvciwgdGhhdCB3aWxsIGJlIGNhbGxlZCBmaXJzdCBhbmQgdGhlIHJlc3VsdCBwYXNzZWQgdG9cbiAgICAgKiB0aGlzIGZ1bmN0aW9uJ3MgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKlxuICAgICAqICoqTm90ZSoqIEN1cnNvcnMgdXNlIGBudWxsYCBpbnRlcm5hbGx5IHRvIGluZGljYXRlIHRoYXQgdGhlcmUgYXJlIG5vIG1vcmUgZG9jdW1lbnRzIGluIHRoZSBjdXJzb3IuIFByb3ZpZGluZyBhIG1hcHBpbmdcbiAgICAgKiBmdW5jdGlvbiB0aGF0IG1hcHMgdmFsdWVzIHRvIGBudWxsYCB3aWxsIHJlc3VsdCBpbiB0aGUgY3Vyc29yIGNsb3NpbmcgaXRzZWxmIGJlZm9yZSBpdCBoYXMgZmluaXNoZWQgaXRlcmF0aW5nXG4gICAgICogYWxsIGRvY3VtZW50cy4gIFRoaXMgd2lsbCAqKm5vdCoqIHJlc3VsdCBpbiBhIG1lbW9yeSBsZWFrLCBqdXN0IHN1cnByaXNpbmcgYmVoYXZpb3IuICBGb3IgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBjb25zdCBjdXJzb3IgPSBjb2xsZWN0aW9uLmZpbmQoe30pO1xuICAgICAqIGN1cnNvci5tYXAoKCkgPT4gbnVsbCk7XG4gICAgICpcbiAgICAgKiBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBjdXJzb3IudG9BcnJheSgpO1xuICAgICAqIC8vIGRvY3VtZW50cyBpcyBhbHdheXMgW10sIHJlZ2FyZGxlc3Mgb2YgaG93IG1hbnkgZG9jdW1lbnRzIGFyZSBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIE90aGVyIGZhbHNleSB2YWx1ZXMgYXJlIGFsbG93ZWQ6XG4gICAgICpcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogY29uc3QgY3Vyc29yID0gY29sbGVjdGlvbi5maW5kKHt9KTtcbiAgICAgKiBjdXJzb3IubWFwKCgpID0+ICcnKTtcbiAgICAgKlxuICAgICAqIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XG4gICAgICogLy8gZG9jdW1lbnRzIGlzIG5vdyBhbiBhcnJheSBvZiBlbXB0eSBzdHJpbmdzXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAqKk5vdGUgZm9yIFR5cGVzY3JpcHQgVXNlcnM6KiogYWRkaW5nIGEgdHJhbnNmb3JtIGNoYW5nZXMgdGhlIHJldHVybiB0eXBlIG9mIHRoZSBpdGVyYXRpb24gb2YgdGhpcyBjdXJzb3IsXG4gICAgICogaXQgKipkb2VzIG5vdCoqIHJldHVybiBhIG5ldyBpbnN0YW5jZSBvZiBhIGN1cnNvci4gVGhpcyBtZWFucyB3aGVuIGNhbGxpbmcgbWFwLFxuICAgICAqIHlvdSBzaG91bGQgYWx3YXlzIGFzc2lnbiB0aGUgcmVzdWx0IHRvIGEgbmV3IHZhcmlhYmxlIGluIG9yZGVyIHRvIGdldCBhIGNvcnJlY3RseSB0eXBlZCBjdXJzb3IgdmFyaWFibGUuXG4gICAgICogVGFrZSBub3RlIG9mIHRoZSBmb2xsb3dpbmcgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIGNvbnN0IGN1cnNvcjogRmluZEN1cnNvcjxEb2N1bWVudD4gPSBjb2xsLmZpbmQoKTtcbiAgICAgKiBjb25zdCBtYXBwZWRDdXJzb3I6IEZpbmRDdXJzb3I8bnVtYmVyPiA9IGN1cnNvci5tYXAoZG9jID0+IE9iamVjdC5rZXlzKGRvYykubGVuZ3RoKTtcbiAgICAgKiBjb25zdCBrZXlDb3VudHM6IG51bWJlcltdID0gYXdhaXQgbWFwcGVkQ3Vyc29yLnRvQXJyYXkoKTsgLy8gY3Vyc29yLnRvQXJyYXkoKSBzdGlsbCByZXR1cm5zIERvY3VtZW50W11cbiAgICAgKiBgYGBcbiAgICAgKiBAcGFyYW0gdHJhbnNmb3JtIC0gVGhlIG1hcHBpbmcgdHJhbnNmb3JtYXRpb24gbWV0aG9kLlxuICAgICAqL1xuICAgIG1hcCh0cmFuc2Zvcm0pIHtcbiAgICAgICAgYXNzZXJ0VW5pbml0aWFsaXplZCh0aGlzKTtcbiAgICAgICAgY29uc3Qgb2xkVHJhbnNmb3JtID0gdGhpc1trVHJhbnNmb3JtXTsgLy8gVE9ETyhOT0RFLTMyODMpOiBJbXByb3ZlIHRyYW5zZm9ybSB0eXBpbmdcbiAgICAgICAgaWYgKG9sZFRyYW5zZm9ybSkge1xuICAgICAgICAgICAgdGhpc1trVHJhbnNmb3JtXSA9IGRvYyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybShvbGRUcmFuc2Zvcm0oZG9jKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpc1trVHJhbnNmb3JtXSA9IHRyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBSZWFkUHJlZmVyZW5jZSBmb3IgdGhlIGN1cnNvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWFkUHJlZmVyZW5jZSAtIFRoZSBuZXcgcmVhZCBwcmVmZXJlbmNlIGZvciB0aGUgY3Vyc29yLlxuICAgICAqL1xuICAgIHdpdGhSZWFkUHJlZmVyZW5jZShyZWFkUHJlZmVyZW5jZSkge1xuICAgICAgICBhc3NlcnRVbmluaXRpYWxpemVkKHRoaXMpO1xuICAgICAgICBpZiAocmVhZFByZWZlcmVuY2UgaW5zdGFuY2VvZiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZSkge1xuICAgICAgICAgICAgdGhpc1trT3B0aW9uc10ucmVhZFByZWZlcmVuY2UgPSByZWFkUHJlZmVyZW5jZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgcmVhZFByZWZlcmVuY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzW2tPcHRpb25zXS5yZWFkUHJlZmVyZW5jZSA9IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21TdHJpbmcocmVhZFByZWZlcmVuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgSW52YWxpZCByZWFkIHByZWZlcmVuY2U6ICR7cmVhZFByZWZlcmVuY2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgUmVhZFByZWZlcmVuY2UgZm9yIHRoZSBjdXJzb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVhZFByZWZlcmVuY2UgLSBUaGUgbmV3IHJlYWQgcHJlZmVyZW5jZSBmb3IgdGhlIGN1cnNvci5cbiAgICAgKi9cbiAgICB3aXRoUmVhZENvbmNlcm4ocmVhZENvbmNlcm4pIHtcbiAgICAgICAgYXNzZXJ0VW5pbml0aWFsaXplZCh0aGlzKTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRSZWFkQ29uY2VybiA9IHJlYWRfY29uY2Vybl8xLlJlYWRDb25jZXJuLmZyb21PcHRpb25zKHsgcmVhZENvbmNlcm4gfSk7XG4gICAgICAgIGlmIChyZXNvbHZlZFJlYWRDb25jZXJuKSB7XG4gICAgICAgICAgICB0aGlzW2tPcHRpb25zXS5yZWFkQ29uY2VybiA9IHJlc29sdmVkUmVhZENvbmNlcm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCBhIG1heFRpbWVNUyBvbiB0aGUgY3Vyc29yIHF1ZXJ5LCBhbGxvd2luZyBmb3IgaGFyZCB0aW1lb3V0IGxpbWl0cyBvbiBxdWVyaWVzIChPbmx5IHN1cHBvcnRlZCBvbiBNb25nb0RCIDIuNiBvciBoaWdoZXIpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGFib3J0aW5nIHRoZSBxdWVyeS5cbiAgICAgKi9cbiAgICBtYXhUaW1lTVModmFsdWUpIHtcbiAgICAgICAgYXNzZXJ0VW5pbml0aWFsaXplZCh0aGlzKTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IGZvciBtYXhUaW1lTVMgbXVzdCBiZSBhIG51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba09wdGlvbnNdLm1heFRpbWVNUyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBiYXRjaCBzaXplIGZvciB0aGUgY3Vyc29yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG51bWJlciBvZiBkb2N1bWVudHMgdG8gcmV0dXJuIHBlciBiYXRjaC4gU2VlIHtAbGluayBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2UvY29tbWFuZC9maW5kL3xmaW5kIGNvbW1hbmQgZG9jdW1lbnRhdGlvbn0uXG4gICAgICovXG4gICAgYmF0Y2hTaXplKHZhbHVlKSB7XG4gICAgICAgIGFzc2VydFVuaW5pdGlhbGl6ZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzW2tPcHRpb25zXS50YWlsYWJsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29UYWlsYWJsZUN1cnNvckVycm9yKCdUYWlsYWJsZSBjdXJzb3IgZG9lcyBub3Qgc3VwcG9ydCBiYXRjaFNpemUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3BlcmF0aW9uIFwiYmF0Y2hTaXplXCIgcmVxdWlyZXMgYW4gaW50ZWdlcicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba09wdGlvbnNdLmJhdGNoU2l6ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV3aW5kIHRoaXMgY3Vyc29yIHRvIGl0cyB1bmluaXRpYWxpemVkIHN0YXRlLiBBbnkgb3B0aW9ucyB0aGF0IGFyZSBwcmVzZW50IG9uIHRoZSBjdXJzb3Igd2lsbFxuICAgICAqIHJlbWFpbiBpbiBlZmZlY3QuIEl0ZXJhdGluZyB0aGlzIGN1cnNvciB3aWxsIGNhdXNlIG5ldyBxdWVyaWVzIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlciwgZXZlblxuICAgICAqIGlmIHRoZSByZXN1bHRhbnQgZGF0YSBoYXMgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCBieSB0aGlzIGN1cnNvci5cbiAgICAgKi9cbiAgICByZXdpbmQoKSB7XG4gICAgICAgIGlmICghdGhpc1trSW5pdGlhbGl6ZWRdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trSWRdID0gbnVsbDtcbiAgICAgICAgdGhpc1trRG9jdW1lbnRzXS5jbGVhcigpO1xuICAgICAgICB0aGlzW2tDbG9zZWRdID0gZmFsc2U7XG4gICAgICAgIHRoaXNba0tpbGxlZF0gPSBmYWxzZTtcbiAgICAgICAgdGhpc1trSW5pdGlhbGl6ZWRdID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzW2tTZXNzaW9uXTtcbiAgICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byBlbmQgdGhpcyBzZXNzaW9uIGlmIHdlIGNyZWF0ZWQgaXQsIGFuZCBpdCBoYXNuJ3QgZW5kZWQgeWV0XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5leHBsaWNpdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNlc3Npb24uaGFzRW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5lbmRTZXNzaW9uKCkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXNba1Nlc3Npb25dID0gdGhpcy5jbGllbnQuc3RhcnRTZXNzaW9uKHsgb3duZXI6IHRoaXMsIGV4cGxpY2l0OiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgYXN5bmMgZ2V0TW9yZShiYXRjaFNpemUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgY29uc3QgZ2V0TW9yZU9wZXJhdGlvbiA9IG5ldyBnZXRfbW9yZV8xLkdldE1vcmVPcGVyYXRpb24odGhpc1trTmFtZXNwYWNlXSwgdGhpc1trSWRdLCB0aGlzW2tTZXJ2ZXJdLCB7XG4gICAgICAgICAgICAuLi50aGlzW2tPcHRpb25zXSxcbiAgICAgICAgICAgIHNlc3Npb246IHRoaXNba1Nlc3Npb25dLFxuICAgICAgICAgICAgYmF0Y2hTaXplXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpc1trQ2xpZW50XSwgZ2V0TW9yZU9wZXJhdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBleHBvc2VkIGZvciB0aGUgdW5pZmllZCB0ZXN0IHJ1bm5lcidzIGNyZWF0ZUNoYW5nZVN0cmVhbVxuICAgICAqIG9wZXJhdGlvbi4gIFdlIGNhbm5vdCByZWZhY3RvciB0byB1c2UgdGhlIGFic3RyYWN0IF9pbml0aWFsaXplIG1ldGhvZCB3aXRob3V0XG4gICAgICogYSBzaWduaWZpY2FudCByZWZhY3Rvci5cbiAgICAgKi9cbiAgICBhc3luYyBba0luaXRdKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCB0aGlzLl9pbml0aWFsaXplKHRoaXNba1Nlc3Npb25dKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gc3RhdGUucmVzcG9uc2U7XG4gICAgICAgICAgICB0aGlzW2tTZXJ2ZXJdID0gc3RhdGUuc2VydmVyO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmN1cnNvcikge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0yNjc0KTogUHJlc2VydmUgaW50NjQgc2VudCBmcm9tIE1vbmdvREJcbiAgICAgICAgICAgICAgICB0aGlzW2tJZF0gPVxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcmVzcG9uc2UuY3Vyc29yLmlkID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBic29uXzEuTG9uZy5mcm9tTnVtYmVyKHJlc3BvbnNlLmN1cnNvci5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIHJlc3BvbnNlLmN1cnNvci5pZCA9PT0gJ2JpZ2ludCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJzb25fMS5Mb25nLmZyb21CaWdJbnQocmVzcG9uc2UuY3Vyc29yLmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzcG9uc2UuY3Vyc29yLmlkO1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jdXJzb3IubnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1trTmFtZXNwYWNlXSA9ICgwLCB1dGlsc18xLm5zKShyZXNwb25zZS5jdXJzb3IubnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzW2tEb2N1bWVudHNdLnB1c2hNYW55KHJlc3BvbnNlLmN1cnNvci5maXJzdEJhdGNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdoZW4gc2VydmVyIHJlc3BvbnNlcyByZXR1cm4gd2l0aG91dCBhIGN1cnNvciBkb2N1bWVudCwgd2UgY2xvc2UgdGhpcyBjdXJzb3JcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJhdyBzZXJ2ZXIgcmVzcG9uc2UuIFRoaXMgaXMgb2Z0ZW4gdGhlIGNhc2UgZm9yIGV4cGxhaW4gY29tbWFuZHNcbiAgICAgICAgICAgIC8vIGZvciBleGFtcGxlXG4gICAgICAgICAgICBpZiAodGhpc1trSWRdID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzW2tJZF0gPSBic29uXzEuTG9uZy5aRVJPO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zMjg2KTogRXhlY3V0aW9uUmVzdWx0IG5lZWRzIHRvIGFjY2VwdCBhIGdlbmVyaWMgcGFyYW1ldGVyXG4gICAgICAgICAgICAgICAgdGhpc1trRG9jdW1lbnRzXS5wdXNoKHN0YXRlLnJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoZSBjdXJzb3IgaXMgbm93IGluaXRpYWxpemVkLCBldmVuIGlmIGl0IGlzIGRlYWRcbiAgICAgICAgICAgIHRoaXNba0luaXRpYWxpemVkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyB0aGUgY3Vyc29yIGlzIG5vdyBpbml0aWFsaXplZCwgZXZlbiBpZiBhbiBlcnJvciBvY2N1cnJlZFxuICAgICAgICAgICAgdGhpc1trSW5pdGlhbGl6ZWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIGF3YWl0IGNsZWFudXBDdXJzb3IodGhpcywgeyBlcnJvciB9KTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzRGVhZCkge1xuICAgICAgICAgICAgYXdhaXQgY2xlYW51cEN1cnNvcih0aGlzLCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG4vKiogQGV2ZW50ICovXG5BYnN0cmFjdEN1cnNvci5DTE9TRSA9ICdjbG9zZSc7XG5leHBvcnRzLkFic3RyYWN0Q3Vyc29yID0gQWJzdHJhY3RDdXJzb3I7XG4vKipcbiAqIEBwYXJhbSBjdXJzb3IgLSB0aGUgY3Vyc29yIG9uIHdoaWNoIHRvIGNhbGwgYG5leHRgXG4gKiBAcGFyYW0gYmxvY2tpbmcgLSBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgY3Vyc29yIHNob3VsZCBgYmxvY2tgIHVudGlsIGRhdGFcbiAqICAgICBpcyBhdmFpbGFibGUuICBHZW5lcmFsbHksIHRoaXMgZmxhZyBpcyBzZXQgdG8gYGZhbHNlYCBiZWNhdXNlIGlmIHRoZSBnZXRNb3JlIHJldHVybnMgbm8gZG9jdW1lbnRzLFxuICogICAgIHRoZSBjdXJzb3IgaGFzIGJlZW4gZXhoYXVzdGVkLiAgSW4gY2VydGFpbiBzY2VuYXJpb3MgKENoYW5nZVN0cmVhbXMsIHRhaWxhYmxlIGF3YWl0IGN1cnNvcnMgYW5kXG4gKiAgICAgYHRyeU5leHRgLCBmb3IgZXhhbXBsZSkgYmxvY2tpbmcgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBnZXRNb3JlIHJldHVybmluZyBubyBkb2N1bWVudHMgZG9lc1xuICogICAgIG5vdCBpbmRpY2F0ZSB0aGUgZW5kIG9mIHRoZSBjdXJzb3IuXG4gKiBAcGFyYW0gdHJhbnNmb3JtIC0gaWYgdHJ1ZSwgdGhlIGN1cnNvcidzIHRyYW5zZm9ybSBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSByZXN1bHQgZG9jdW1lbnQgKGlmIHRoZSB0cmFuc2Zvcm0gZXhpc3RzKVxuICogQHJldHVybnMgdGhlIG5leHQgZG9jdW1lbnQgaW4gdGhlIGN1cnNvciwgb3IgYG51bGxgLiAgV2hlbiBgYmxvY2tpbmdgIGlzIGB0cnVlYCwgYSBgbnVsbGAgZG9jdW1lbnQgbWVhbnNcbiAqIHRoZSBjdXJzb3IgaGFzIGJlZW4gZXhoYXVzdGVkLiAgT3RoZXJ3aXNlLCBpdCBtZWFucyB0aGF0IHRoZXJlIGlzIG5vIGRvY3VtZW50IGF2YWlsYWJsZSBpbiB0aGUgY3Vyc29yJ3MgYnVmZmVyLlxuICovXG5hc3luYyBmdW5jdGlvbiBuZXh0KGN1cnNvciwgeyBibG9ja2luZywgdHJhbnNmb3JtIH0pIHtcbiAgICBpZiAoY3Vyc29yLmNsb3NlZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZG8ge1xuICAgICAgICBpZiAoY3Vyc29yW2tJZF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gQWxsIGN1cnNvcnMgbXVzdCBvcGVyYXRlIHdpdGhpbiBhIHNlc3Npb24sIG9uZSBtdXN0IGJlIG1hZGUgaW1wbGljaXRseSBpZiBub3QgZXhwbGljaXRseSBwcm92aWRlZFxuICAgICAgICAgICAgYXdhaXQgY3Vyc29yW2tJbml0XSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJzb3Jba0RvY3VtZW50c10ubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBkb2MgPSBjdXJzb3Jba0RvY3VtZW50c10uc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChkb2MgIT0gbnVsbCAmJiB0cmFuc2Zvcm0gJiYgY3Vyc29yW2tUcmFuc2Zvcm1dKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvcltrVHJhbnNmb3JtXShkb2MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYGNsZWFudXBDdXJzb3JBc3luY2Agc2hvdWxkIG5ldmVyIHRocm93LCBidXQgaWYgaXQgZG9lcyB3ZSB3YW50IHRvIHRocm93IHRoZSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwQ3Vyc29yKGN1cnNvciwgeyBlcnJvciwgbmVlZHNUb0VtaXRDbG9zZWQ6IHRydWUgfSkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb2M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnNvci5pc0RlYWQpIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBjdXJzb3IgaXMgZGVhZCwgd2UgY2xlYW4gaXQgdXBcbiAgICAgICAgICAgIC8vIGNsZWFudXBDdXJzb3JBc3luYyBzaG91bGQgbmV2ZXIgdGhyb3csIGJ1dCBpZiBpdCBkb2VzIGl0IGluZGljYXRlcyBhIGJ1ZyBpbiB0aGUgZHJpdmVyXG4gICAgICAgICAgICAvLyBhbmQgd2Ugc2hvdWxkIHN1cmZhY2UgdGhlIGVycm9yXG4gICAgICAgICAgICBhd2FpdCBjbGVhbnVwQ3Vyc29yKGN1cnNvciwge30pO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gb3RoZXJ3aXNlIG5lZWQgdG8gY2FsbCBnZXRNb3JlXG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IGN1cnNvcltrT3B0aW9uc10uYmF0Y2hTaXplIHx8IDEwMDA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGN1cnNvci5nZXRNb3JlKGJhdGNoU2l6ZSk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3JJZCA9IHR5cGVvZiByZXNwb25zZS5jdXJzb3IuaWQgPT09ICdudW1iZXInXG4gICAgICAgICAgICAgICAgICAgID8gYnNvbl8xLkxvbmcuZnJvbU51bWJlcihyZXNwb25zZS5jdXJzb3IuaWQpXG4gICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIHJlc3BvbnNlLmN1cnNvci5pZCA9PT0gJ2JpZ2ludCdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYnNvbl8xLkxvbmcuZnJvbUJpZ0ludChyZXNwb25zZS5jdXJzb3IuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLmN1cnNvci5pZDtcbiAgICAgICAgICAgICAgICBjdXJzb3Jba0RvY3VtZW50c10ucHVzaE1hbnkocmVzcG9uc2UuY3Vyc29yLm5leHRCYXRjaCk7XG4gICAgICAgICAgICAgICAgY3Vyc29yW2tJZF0gPSBjdXJzb3JJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIGBjbGVhbnVwQ3Vyc29yQXN5bmNgIHNob3VsZCBuZXZlciB0aHJvdywgYnV0IGlmIGl0IGRvZXMgd2Ugd2FudCB0byB0aHJvdyB0aGUgb3JpZ2luYWxcbiAgICAgICAgICAgIC8vIGVycm9yIGluc3RlYWQuXG4gICAgICAgICAgICBhd2FpdCBjbGVhbnVwQ3Vyc29yKGN1cnNvciwgeyBlcnJvciB9KS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJzb3IuaXNEZWFkKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBzdWNjZXNzZnVsbHkgcmVjZWl2ZWQgYSByZXNwb25zZSBmcm9tIGEgY3Vyc29yIEJVVCB0aGUgY3Vyc29yIGluZGljYXRlcyB0aGF0IGl0IGlzIGV4aGF1c3RlZCxcbiAgICAgICAgICAgIC8vIHdlIGludGVudGlvbmFsbHkgY2xlYW4gdXAgdGhlIGN1cnNvciB0byByZWxlYXNlIGl0cyBzZXNzaW9uIGJhY2sgaW50byB0aGUgcG9vbCBiZWZvcmUgdGhlIGN1cnNvclxuICAgICAgICAgICAgLy8gaXMgaXRlcmF0ZWQuICBUaGlzIHByZXZlbnRzIGEgY3Vyc29yIHRoYXQgaXMgZXhoYXVzdGVkIG9uIHRoZSBzZXJ2ZXIgZnJvbSBob2xkaW5nXG4gICAgICAgICAgICAvLyBvbnRvIGEgc2Vzc2lvbiBpbmRlZmluaXRlbHkgdW50aWwgdGhlIEFic3RyYWN0Q3Vyc29yIGlzIGl0ZXJhdGVkLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIGNsZWFudXBDdXJzb3JBc3luYyBzaG91bGQgbmV2ZXIgdGhyb3csIGJ1dCBpZiBpdCBkb2VzIGl0IGluZGljYXRlcyBhIGJ1ZyBpbiB0aGUgZHJpdmVyXG4gICAgICAgICAgICAvLyBhbmQgd2Ugc2hvdWxkIHN1cmZhY2UgdGhlIGVycm9yXG4gICAgICAgICAgICBhd2FpdCBjbGVhbnVwQ3Vyc29yKGN1cnNvciwge30pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJzb3Jba0RvY3VtZW50c10ubGVuZ3RoID09PSAwICYmIGJsb2NraW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9IHdoaWxlICghY3Vyc29yLmlzRGVhZCB8fCBjdXJzb3Jba0RvY3VtZW50c10ubGVuZ3RoICE9PSAwKTtcbiAgICByZXR1cm4gbnVsbDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNsZWFudXBDdXJzb3IoY3Vyc29yLCBvcHRpb25zKSB7XG4gICAgY29uc3QgY3Vyc29ySWQgPSBjdXJzb3Jba0lkXTtcbiAgICBjb25zdCBjdXJzb3JOcyA9IGN1cnNvcltrTmFtZXNwYWNlXTtcbiAgICBjb25zdCBzZXJ2ZXIgPSBjdXJzb3Jba1NlcnZlcl07XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGN1cnNvcltrU2Vzc2lvbl07XG4gICAgY29uc3QgZXJyb3IgPSBvcHRpb25zPy5lcnJvcjtcbiAgICAvLyBDdXJzb3JzIG9ubHkgZW1pdCBjbG9zZWQgZXZlbnRzIG9uY2UgdGhlIGNsaWVudC1zaWRlIGN1cnNvciBoYXMgYmVlbiBleGhhdXN0ZWQgZnVsbHkgb3IgdGhlcmVcbiAgICAvLyB3YXMgYW4gZXJyb3IuICBOb3RhYmx5LCB3aGVuIHRoZSBzZXJ2ZXIgcmV0dXJucyBhIGN1cnNvciBpZCBvZiAwIGFuZCBhIG5vbi1lbXB0eSBiYXRjaCwgd2VcbiAgICAvLyBjbGVhbnVwIHRoZSBjdXJzb3IgYnV0IGRvbid0IGVtaXQgYSBgY2xvc2VgIGV2ZW50LlxuICAgIGNvbnN0IG5lZWRzVG9FbWl0Q2xvc2VkID0gb3B0aW9ucz8ubmVlZHNUb0VtaXRDbG9zZWQgPz8gY3Vyc29yW2tEb2N1bWVudHNdLmxlbmd0aCA9PT0gMDtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGN1cnNvci5sb2FkQmFsYW5jZWQgJiYgZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcGxldGVDbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGN1cnNvcklkID09IG51bGwgfHwgc2VydmVyID09IG51bGwgfHwgY3Vyc29ySWQuaXNaZXJvKCkgfHwgY3Vyc29yTnMgPT0gbnVsbCkge1xuICAgICAgICBpZiAobmVlZHNUb0VtaXRDbG9zZWQpIHtcbiAgICAgICAgICAgIGN1cnNvcltrQ2xvc2VkXSA9IHRydWU7XG4gICAgICAgICAgICBjdXJzb3Jba0lkXSA9IGJzb25fMS5Mb25nLlpFUk87XG4gICAgICAgICAgICBjdXJzb3IuZW1pdChBYnN0cmFjdEN1cnNvci5DTE9TRSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uLm93bmVyID09PSBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZXNzaW9uLmVuZFNlc3Npb24oeyBlcnJvciB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNlc3Npb24uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgKDAsIHNlc3Npb25zXzEubWF5YmVDbGVhclBpbm5lZENvbm5lY3Rpb24pKHNlc3Npb24sIHsgZXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBjb21wbGV0ZUNsZWFudXAoKSB7XG4gICAgICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5vd25lciA9PT0gY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2Vzc2lvbi5lbmRTZXNzaW9uKHsgZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3IuZW1pdChBYnN0cmFjdEN1cnNvci5DTE9TRSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc2Vzc2lvbi5pblRyYW5zYWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICAoMCwgc2Vzc2lvbnNfMS5tYXliZUNsZWFyUGlubmVkQ29ubmVjdGlvbikoc2Vzc2lvbiwgeyBlcnJvciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJzb3IuZW1pdChBYnN0cmFjdEN1cnNvci5DTE9TRSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY3Vyc29yW2tLaWxsZWRdID0gdHJ1ZTtcbiAgICBpZiAoc2Vzc2lvbi5oYXNFbmRlZCkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVDbGVhbnVwKCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0ICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKGN1cnNvcltrQ2xpZW50XSwgbmV3IGtpbGxfY3Vyc29yc18xLktpbGxDdXJzb3JzT3BlcmF0aW9uKGN1cnNvcklkLCBjdXJzb3JOcywgc2VydmVyLCB7IHNlc3Npb24gfSkpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgYXdhaXQgY29tcGxldGVDbGVhbnVwKCk7XG4gICAgfVxufVxuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gYXNzZXJ0VW5pbml0aWFsaXplZChjdXJzb3IpIHtcbiAgICBpZiAoY3Vyc29yW2tJbml0aWFsaXplZF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29DdXJzb3JJblVzZUVycm9yKCk7XG4gICAgfVxufVxuZXhwb3J0cy5hc3NlcnRVbmluaXRpYWxpemVkID0gYXNzZXJ0VW5pbml0aWFsaXplZDtcbmNsYXNzIFJlYWRhYmxlQ3Vyc29yU3RyZWFtIGV4dGVuZHMgc3RyZWFtXzEuUmVhZGFibGUge1xuICAgIGNvbnN0cnVjdG9yKGN1cnNvcikge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBvYmplY3RNb2RlOiB0cnVlLFxuICAgICAgICAgICAgYXV0b0Rlc3Ryb3k6IGZhbHNlLFxuICAgICAgICAgICAgaGlnaFdhdGVyTWFyazogMVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcmVhZEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY3Vyc29yID0gY3Vyc29yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgX3JlYWQoc2l6ZSkge1xuICAgICAgICBpZiAoIXRoaXMuX3JlYWRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWFkSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9yZWFkTmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9kZXN0cm95KGVycm9yLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9jdXJzb3IuY2xvc2UoKS50aGVuKCgpID0+IGNhbGxiYWNrKGVycm9yKSwgY2xvc2VFcnJvciA9PiBjYWxsYmFjayhjbG9zZUVycm9yKSk7XG4gICAgfVxuICAgIF9yZWFkTmV4dCgpIHtcbiAgICAgICAgbmV4dCh0aGlzLl9jdXJzb3IsIHsgYmxvY2tpbmc6IHRydWUsIHRyYW5zZm9ybTogdHJ1ZSB9KS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2gobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnNvci5jbG9zZSgpLmNhdGNoKCgpID0+IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHVzaChyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkTmV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9yZWFkSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBlcnIgPT4ge1xuICAgICAgICAgICAgLy8gTk9URTogVGhpcyBpcyBxdWVzdGlvbmFibGUsIGJ1dCB3ZSBoYXZlIGEgdGVzdCBiYWNraW5nIHRoZSBiZWhhdmlvci4gSXQgc2VlbXMgdGhlXG4gICAgICAgICAgICAvLyAgICAgICBkZXNpcmVkIGJlaGF2aW9yIGlzIHRoYXQgYSBzdHJlYW0gZW5kcyBjbGVhbmx5IHdoZW4gYSB1c2VyIGV4cGxpY2l0bHkgY2xvc2VzXG4gICAgICAgICAgICAvLyAgICAgICBhIGNsaWVudCBkdXJpbmcgaXRlcmF0aW9uLiBBbHRlcm5hdGl2ZWx5LCB3ZSBjb3VsZCBkbyB0aGUgXCJyaWdodFwiIHRoaW5nIGFuZFxuICAgICAgICAgICAgLy8gICAgICAgcHJvcGFnYXRlIHRoZSBlcnJvciBtZXNzYWdlIGJ5IHJlbW92aW5nIHRoaXMgc3BlY2lhbCBjYXNlLlxuICAgICAgICAgICAgaWYgKGVyci5tZXNzYWdlLm1hdGNoKC9zZXJ2ZXIgaXMgY2xvc2VkLykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJzb3IuY2xvc2UoKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTk9URTogVGhpcyBpcyBhbHNvIHBlcmhhcHMgcXVlc3Rpb25hYmxlLiBUaGUgcmF0aW9uYWxlIGhlcmUgaXMgdGhhdCB0aGVzZSBlcnJvcnMgdGVuZFxuICAgICAgICAgICAgLy8gICAgICAgdG8gYmUgXCJvcGVyYXRpb24gd2FzIGludGVycnVwdGVkXCIsIHdoZXJlIGEgY3Vyc29yIGhhcyBiZWVuIGNsb3NlZCBidXQgdGhlcmUgaXMgYW5cbiAgICAgICAgICAgIC8vICAgICAgIGFjdGl2ZSBnZXRNb3JlIGluLWZsaWdodC4gVGhpcyB1c2VkIHRvIGNoZWNrIGlmIHRoZSBjdXJzb3Igd2FzIGtpbGxlZCBidXQgb25jZVxuICAgICAgICAgICAgLy8gICAgICAgdGhhdCBjaGFuZ2VkIHRvIGhhcHBlbiBpbiBjbGVhbnVwIGxlZ2l0aW1hdGUgZXJyb3JzIHdvdWxkIG5vdCBkZXN0cm95IHRoZVxuICAgICAgICAgICAgLy8gICAgICAgc3RyZWFtLiBUaGVyZSBhcmUgY2hhbmdlIHN0cmVhbXMgdGVzdCBzcGVjaWZpY2FsbHkgdGVzdCB0aGVzZSBjYXNlcy5cbiAgICAgICAgICAgIGlmIChlcnIubWVzc2FnZS5tYXRjaCgvb3BlcmF0aW9uIHdhcyBpbnRlcnJ1cHRlZC8pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5PVEU6IFRoZSB0d28gYWJvdmUgY2hlY2tzIG9uIHRoZSBtZXNzYWdlIG9mIHRoZSBlcnJvciB3aWxsIGNhdXNlIGEgbnVsbCB0byBiZSBwdXNoZWRcbiAgICAgICAgICAgIC8vICAgICAgIHRvIHRoZSBzdHJlYW0sIHRodXMgY2xvc2luZyB0aGUgc3RyZWFtIGJlZm9yZSB0aGUgZGVzdHJveSBjYWxsIGhhcHBlbnMuIFRoaXMgbWVhbnNcbiAgICAgICAgICAgIC8vICAgICAgIHRoYXQgZWl0aGVyIG9mIHRob3NlIGVycm9yIG1lc3NhZ2VzIG9uIGEgY2hhbmdlIHN0cmVhbSB3aWxsIG5vdCBnZXQgYSBwcm9wZXJcbiAgICAgICAgICAgIC8vICAgICAgICdlcnJvcicgZXZlbnQgdG8gYmUgZW1pdHRlZCAodGhlIGVycm9yIHBhc3NlZCB0byBkZXN0cm95KS4gQ2hhbmdlIHN0cmVhbSByZXN1bWFiaWxpdHlcbiAgICAgICAgICAgIC8vICAgICAgIHJlbGllcyBvbiB0aGF0IGVycm9yIGV2ZW50IHRvIGJlIGVtaXR0ZWQgdG8gY3JlYXRlIGl0cyBuZXcgY3Vyc29yIGFuZCB0aHVzIHdhcyBub3RcbiAgICAgICAgICAgIC8vICAgICAgIHdvcmtpbmcgb24gNC40IHNlcnZlcnMgYmVjYXVzZSB0aGUgZXJyb3IgZW1pdHRlZCBvbiBmYWlsb3ZlciB3YXMgXCJpbnRlcnJ1cHRlZCBhdFxuICAgICAgICAgICAgLy8gICAgICAgc2h1dGRvd25cIiB3aGlsZSBvbiA1LjArIGl0IGlzIFwiVGhlIHNlcnZlciBpcyBpbiBxdWllc2NlIG1vZGUgYW5kIHdpbGwgc2h1dCBkb3duXCIuXG4gICAgICAgICAgICAvLyAgICAgICBTZWUgTk9ERS00NDc1LlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveShlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hYnN0cmFjdF9jdXJzb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiYXNzZXJ0VW5pbml0aWFsaXplZCIsIkFic3RyYWN0Q3Vyc29yIiwiQ1VSU09SX0ZMQUdTIiwic3RyZWFtXzEiLCJyZXF1aXJlIiwiYnNvbl8xIiwiZXJyb3JfMSIsIm1vbmdvX3R5cGVzXzEiLCJleGVjdXRlX29wZXJhdGlvbl8xIiwiZ2V0X21vcmVfMSIsImtpbGxfY3Vyc29yc18xIiwicmVhZF9jb25jZXJuXzEiLCJyZWFkX3ByZWZlcmVuY2VfMSIsInNlc3Npb25zXzEiLCJ1dGlsc18xIiwia0lkIiwiU3ltYm9sIiwia0RvY3VtZW50cyIsImtTZXJ2ZXIiLCJrTmFtZXNwYWNlIiwia0NsaWVudCIsImtTZXNzaW9uIiwia09wdGlvbnMiLCJrVHJhbnNmb3JtIiwia0luaXRpYWxpemVkIiwia0Nsb3NlZCIsImtLaWxsZWQiLCJrSW5pdCIsIlR5cGVkRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJuYW1lc3BhY2UiLCJvcHRpb25zIiwicyIsImlzTW9uZ29DbGllbnQiLCJNb25nb1J1bnRpbWVFcnJvciIsIkxpc3QiLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsInBsdWNrQlNPTlNlcmlhbGl6ZU9wdGlvbnMiLCJyZWFkQ29uY2VybiIsIlJlYWRDb25jZXJuIiwiZnJvbU9wdGlvbnMiLCJiYXRjaFNpemUiLCJjb21tZW50IiwidW5kZWZpbmVkIiwibWF4VGltZU1TIiwibWF4QXdhaXRUaW1lTVMiLCJzZXNzaW9uIiwiQ2xpZW50U2Vzc2lvbiIsInN0YXJ0U2Vzc2lvbiIsIm93bmVyIiwiZXhwbGljaXQiLCJpZCIsImlzRGVhZCIsImlzWmVybyIsInNlcnZlciIsImNsaWVudFNlc3Npb24iLCJjdXJzb3JPcHRpb25zIiwiY2xvc2VkIiwia2lsbGVkIiwibG9hZEJhbGFuY2VkIiwidG9wb2xvZ3kiLCJidWZmZXJlZENvdW50IiwibGVuZ3RoIiwicmVhZEJ1ZmZlcmVkRG9jdW1lbnRzIiwibnVtYmVyIiwiYnVmZmVyZWREb2NzIiwiZG9jdW1lbnRzVG9SZWFkIiwiTWF0aCIsIm1pbiIsImNvdW50IiwiZG9jdW1lbnQiLCJzaGlmdCIsInB1c2giLCJhc3luY0l0ZXJhdG9yIiwibmV4dCIsIm1lc3NhZ2UiLCJjbGVhbnVwQ3Vyc29yIiwibmVlZHNUb0VtaXRDbG9zZWQiLCJjYXRjaCIsIk1vbmdvQVBJRXJyb3IiLCJMb25nIiwiWkVSTyIsImNsb3NlIiwic3RyZWFtIiwidHJhbnNmb3JtIiwicmVhZGFibGUiLCJSZWFkYWJsZUN1cnNvclN0cmVhbSIsInRyYW5zZm9ybWVkU3RyZWFtIiwicGlwZSIsIlRyYW5zZm9ybSIsIm9iamVjdE1vZGUiLCJoaWdoV2F0ZXJNYXJrIiwiY2h1bmsiLCJfIiwiY2FsbGJhY2siLCJ0cmFuc2Zvcm1lZCIsImVyciIsIm9uIiwiZW1pdCIsImhhc05leHQiLCJkb2MiLCJibG9ja2luZyIsInVuc2hpZnQiLCJNb25nb0N1cnNvckV4aGF1c3RlZEVycm9yIiwidHJ5TmV4dCIsImZvckVhY2giLCJpdGVyYXRvciIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJyZXN1bHQiLCJ0b0FycmF5IiwiYXJyYXkiLCJhZGRDdXJzb3JGbGFnIiwiZmxhZyIsImluY2x1ZGVzIiwibWFwIiwib2xkVHJhbnNmb3JtIiwid2l0aFJlYWRQcmVmZXJlbmNlIiwiZnJvbVN0cmluZyIsIndpdGhSZWFkQ29uY2VybiIsInJlc29sdmVkUmVhZENvbmNlcm4iLCJ0YWlsYWJsZSIsIk1vbmdvVGFpbGFibGVDdXJzb3JFcnJvciIsInJld2luZCIsImNsZWFyIiwiaGFzRW5kZWQiLCJlbmRTZXNzaW9uIiwiZ2V0TW9yZSIsImdldE1vcmVPcGVyYXRpb24iLCJHZXRNb3JlT3BlcmF0aW9uIiwiZXhlY3V0ZU9wZXJhdGlvbiIsInN0YXRlIiwiX2luaXRpYWxpemUiLCJyZXNwb25zZSIsImN1cnNvciIsImZyb21OdW1iZXIiLCJmcm9tQmlnSW50IiwibnMiLCJwdXNoTWFueSIsImZpcnN0QmF0Y2giLCJlcnJvciIsIkNMT1NFIiwiY3Vyc29ySWQiLCJuZXh0QmF0Y2giLCJjdXJzb3JOcyIsIk1vbmdvTmV0d29ya0Vycm9yIiwiY29tcGxldGVDbGVhbnVwIiwiaW5UcmFuc2FjdGlvbiIsIm1heWJlQ2xlYXJQaW5uZWRDb25uZWN0aW9uIiwiS2lsbEN1cnNvcnNPcGVyYXRpb24iLCJNb25nb0N1cnNvckluVXNlRXJyb3IiLCJSZWFkYWJsZSIsImF1dG9EZXN0cm95IiwiX3JlYWRJblByb2dyZXNzIiwiX2N1cnNvciIsIl9yZWFkIiwic2l6ZSIsIl9yZWFkTmV4dCIsIl9kZXN0cm95IiwidGhlbiIsImNsb3NlRXJyb3IiLCJkZXN0cm95ZWQiLCJtYXRjaCIsImRlc3Ryb3kiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/aggregation_cursor.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AggregationCursor = void 0;\nconst aggregate_1 = __webpack_require__(/*! ../operations/aggregate */ \"(ssr)/./node_modules/mongodb/lib/operations/aggregate.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @internal */ const kPipeline = Symbol(\"pipeline\");\n/** @internal */ const kOptions = Symbol(\"options\");\n/**\n * The **AggregationCursor** class is an internal class that embodies an aggregation cursor on MongoDB\n * allowing for iteration over the results returned from the underlying query. It supports\n * one by one document iteration, conversion to an array or can be iterated as a Node 4.X\n * or higher stream\n * @public\n */ class AggregationCursor extends abstract_cursor_1.AbstractCursor {\n    /** @internal */ constructor(client, namespace, pipeline = [], options = {}){\n        super(client, namespace, options);\n        this[kPipeline] = pipeline;\n        this[kOptions] = options;\n    }\n    get pipeline() {\n        return this[kPipeline];\n    }\n    clone() {\n        const clonedOptions = (0, utils_1.mergeOptions)({}, this[kOptions]);\n        delete clonedOptions.session;\n        return new AggregationCursor(this.client, this.namespace, this[kPipeline], {\n            ...clonedOptions\n        });\n    }\n    map(transform) {\n        return super.map(transform);\n    }\n    /** @internal */ async _initialize(session) {\n        const aggregateOperation = new aggregate_1.AggregateOperation(this.namespace, this[kPipeline], {\n            ...this[kOptions],\n            ...this.cursorOptions,\n            session\n        });\n        const response = await (0, execute_operation_1.executeOperation)(this.client, aggregateOperation);\n        // TODO: NODE-2882\n        return {\n            server: aggregateOperation.server,\n            session,\n            response\n        };\n    }\n    /** Execute the explain for the cursor */ async explain(verbosity) {\n        return (0, execute_operation_1.executeOperation)(this.client, new aggregate_1.AggregateOperation(this.namespace, this[kPipeline], {\n            ...this[kOptions],\n            ...this.cursorOptions,\n            explain: verbosity ?? true\n        }));\n    }\n    group($group) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $group\n        });\n        return this;\n    }\n    /** Add a limit stage to the aggregation pipeline */ limit($limit) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $limit\n        });\n        return this;\n    }\n    /** Add a match stage to the aggregation pipeline */ match($match) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $match\n        });\n        return this;\n    }\n    /** Add an out stage to the aggregation pipeline */ out($out) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $out\n        });\n        return this;\n    }\n    /**\n     * Add a project stage to the aggregation pipeline\n     *\n     * @remarks\n     * In order to strictly type this function you must provide an interface\n     * that represents the effect of your projection on the result documents.\n     *\n     * By default chaining a projection to your cursor changes the returned type to the generic {@link Document} type.\n     * You should specify a parameterized type to have assertions on your final results.\n     *\n     * @example\n     * ```typescript\n     * // Best way\n     * const docs: AggregationCursor<{ a: number }> = cursor.project<{ a: number }>({ _id: 0, a: true });\n     * // Flexible way\n     * const docs: AggregationCursor<Document> = cursor.project({ _id: 0, a: true });\n     * ```\n     *\n     * @remarks\n     * In order to strictly type this function you must provide an interface\n     * that represents the effect of your projection on the result documents.\n     *\n     * **Note for Typescript Users:** adding a transform changes the return type of the iteration of this cursor,\n     * it **does not** return a new instance of a cursor. This means when calling project,\n     * you should always assign the result to a new variable in order to get a correctly typed cursor variable.\n     * Take note of the following example:\n     *\n     * @example\n     * ```typescript\n     * const cursor: AggregationCursor<{ a: number; b: string }> = coll.aggregate([]);\n     * const projectCursor = cursor.project<{ a: number }>({ _id: 0, a: true });\n     * const aPropOnlyArray: {a: number}[] = await projectCursor.toArray();\n     *\n     * // or always use chaining and save the final cursor\n     *\n     * const cursor = coll.aggregate().project<{ a: string }>({\n     *   _id: 0,\n     *   a: { $convert: { input: '$a', to: 'string' }\n     * }});\n     * ```\n     */ project($project) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $project\n        });\n        return this;\n    }\n    /** Add a lookup stage to the aggregation pipeline */ lookup($lookup) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $lookup\n        });\n        return this;\n    }\n    /** Add a redact stage to the aggregation pipeline */ redact($redact) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $redact\n        });\n        return this;\n    }\n    /** Add a skip stage to the aggregation pipeline */ skip($skip) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $skip\n        });\n        return this;\n    }\n    /** Add a sort stage to the aggregation pipeline */ sort($sort) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $sort\n        });\n        return this;\n    }\n    /** Add a unwind stage to the aggregation pipeline */ unwind($unwind) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $unwind\n        });\n        return this;\n    }\n    /** Add a geoNear stage to the aggregation pipeline */ geoNear($geoNear) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kPipeline].push({\n            $geoNear\n        });\n        return this;\n    }\n}\nexports.AggregationCursor = AggregationCursor; //# sourceMappingURL=aggregation_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2FnZ3JlZ2F0aW9uX2N1cnNvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQseUJBQXlCLEdBQUcsS0FBSztBQUNqQyxNQUFNRyxjQUFjQyxtQkFBT0EsQ0FBQyx5RkFBeUI7QUFDckQsTUFBTUMsc0JBQXNCRCxtQkFBT0EsQ0FBQyx5R0FBaUM7QUFDckUsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUcsb0JBQW9CSCxtQkFBT0EsQ0FBQyxxRkFBbUI7QUFDckQsY0FBYyxHQUNkLE1BQU1JLFlBQVlDLE9BQU87QUFDekIsY0FBYyxHQUNkLE1BQU1DLFdBQVdELE9BQU87QUFDeEI7Ozs7OztDQU1DLEdBQ0QsTUFBTVAsMEJBQTBCSyxrQkFBa0JJLGNBQWM7SUFDNUQsY0FBYyxHQUNkQyxZQUFZQyxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsV0FBVyxFQUFFLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDeEQsS0FBSyxDQUFDSCxRQUFRQyxXQUFXRTtRQUN6QixJQUFJLENBQUNSLFVBQVUsR0FBR087UUFDbEIsSUFBSSxDQUFDTCxTQUFTLEdBQUdNO0lBQ3JCO0lBQ0EsSUFBSUQsV0FBVztRQUNYLE9BQU8sSUFBSSxDQUFDUCxVQUFVO0lBQzFCO0lBQ0FTLFFBQVE7UUFDSixNQUFNQyxnQkFBZ0IsQ0FBQyxHQUFHWixRQUFRYSxZQUFZLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQ1QsU0FBUztRQUNsRSxPQUFPUSxjQUFjRSxPQUFPO1FBQzVCLE9BQU8sSUFBSWxCLGtCQUFrQixJQUFJLENBQUNXLE1BQU0sRUFBRSxJQUFJLENBQUNDLFNBQVMsRUFBRSxJQUFJLENBQUNOLFVBQVUsRUFBRTtZQUN2RSxHQUFHVSxhQUFhO1FBQ3BCO0lBQ0o7SUFDQUcsSUFBSUMsU0FBUyxFQUFFO1FBQ1gsT0FB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QUNmO0lBQ0EsaURBQWlELEdBQ2pEQyxLQUFLQyxLQUFLLEVBQUU7UUFDUCxJQUFHNUMsa0JBQWtCMkIsbUJBQW1CLEVBQUUsSUFBSTtRQUMvQyxJQUFJLENBQUMxQixVQUFVLENBQUMyQixJQUFJLENBQUM7WUFBRWdCO1FBQU07UUFDN0IsT0FBTyxJQUFJO0lBQ2Y7SUFDQSxtREFBbUQsR0FDbkRDLE9BQU9DLE9BQU8sRUFBRTtRQUNYLElBQUc5QyxrQkFBa0IyQixtQkFBbUIsRUFBRSxJQUFJO1FBQy9DLElBQUksQ0FBQzFCLFVBQVUsQ0FBQzJCLElBQUksQ0FBQztZQUFFa0I7UUFBUTtRQUMvQixPQUFPLElBQUk7SUFDZjtJQUNBLG9EQUFvRCxHQUNwREMsUUFBUUMsUUFBUSxFQUFFO1FBQ2IsSUFBR2hELGtCQUFrQjJCLG1CQUFtQixFQUFFLElBQUk7UUFDL0MsSUFBSSxDQUFDMUIsVUFBVSxDQUFDMkIsSUFBSSxDQUFDO1lBQUVvQjtRQUFTO1FBQ2hDLE9BQU8sSUFBSTtJQUNmO0FBQ0o7QUFDQXZELHlCQUF5QixHQUFHRSxtQkFDNUIsOENBQThDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jdXJzb3IvYWdncmVnYXRpb25fY3Vyc29yLmpzPzhjMGQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFnZ3JlZ2F0aW9uQ3Vyc29yID0gdm9pZCAwO1xuY29uc3QgYWdncmVnYXRlXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9hZ2dyZWdhdGVcIik7XG5jb25zdCBleGVjdXRlX29wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgYWJzdHJhY3RfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9hYnN0cmFjdF9jdXJzb3JcIik7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrUGlwZWxpbmUgPSBTeW1ib2woJ3BpcGVsaW5lJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrT3B0aW9ucyA9IFN5bWJvbCgnb3B0aW9ucycpO1xuLyoqXG4gKiBUaGUgKipBZ2dyZWdhdGlvbkN1cnNvcioqIGNsYXNzIGlzIGFuIGludGVybmFsIGNsYXNzIHRoYXQgZW1ib2RpZXMgYW4gYWdncmVnYXRpb24gY3Vyc29yIG9uIE1vbmdvREJcbiAqIGFsbG93aW5nIGZvciBpdGVyYXRpb24gb3ZlciB0aGUgcmVzdWx0cyByZXR1cm5lZCBmcm9tIHRoZSB1bmRlcmx5aW5nIHF1ZXJ5LiBJdCBzdXBwb3J0c1xuICogb25lIGJ5IG9uZSBkb2N1bWVudCBpdGVyYXRpb24sIGNvbnZlcnNpb24gdG8gYW4gYXJyYXkgb3IgY2FuIGJlIGl0ZXJhdGVkIGFzIGEgTm9kZSA0LlhcbiAqIG9yIGhpZ2hlciBzdHJlYW1cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgQWdncmVnYXRpb25DdXJzb3IgZXh0ZW5kcyBhYnN0cmFjdF9jdXJzb3JfMS5BYnN0cmFjdEN1cnNvciB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKGNsaWVudCwgbmFtZXNwYWNlLCBwaXBlbGluZSA9IFtdLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoY2xpZW50LCBuYW1lc3BhY2UsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0gPSBwaXBlbGluZTtcbiAgICAgICAgdGhpc1trT3B0aW9uc10gPSBvcHRpb25zO1xuICAgIH1cbiAgICBnZXQgcGlwZWxpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tQaXBlbGluZV07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICBjb25zdCBjbG9uZWRPcHRpb25zID0gKDAsIHV0aWxzXzEubWVyZ2VPcHRpb25zKSh7fSwgdGhpc1trT3B0aW9uc10pO1xuICAgICAgICBkZWxldGUgY2xvbmVkT3B0aW9ucy5zZXNzaW9uO1xuICAgICAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0aW9uQ3Vyc29yKHRoaXMuY2xpZW50LCB0aGlzLm5hbWVzcGFjZSwgdGhpc1trUGlwZWxpbmVdLCB7XG4gICAgICAgICAgICAuLi5jbG9uZWRPcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXAodHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5tYXAodHJhbnNmb3JtKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIF9pbml0aWFsaXplKHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgYWdncmVnYXRlT3BlcmF0aW9uID0gbmV3IGFnZ3JlZ2F0ZV8xLkFnZ3JlZ2F0ZU9wZXJhdGlvbih0aGlzLm5hbWVzcGFjZSwgdGhpc1trUGlwZWxpbmVdLCB7XG4gICAgICAgICAgICAuLi50aGlzW2tPcHRpb25zXSxcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIGFnZ3JlZ2F0ZU9wZXJhdGlvbik7XG4gICAgICAgIC8vIFRPRE86IE5PREUtMjg4MlxuICAgICAgICByZXR1cm4geyBzZXJ2ZXI6IGFnZ3JlZ2F0ZU9wZXJhdGlvbi5zZXJ2ZXIsIHNlc3Npb24sIHJlc3BvbnNlIH07XG4gICAgfVxuICAgIC8qKiBFeGVjdXRlIHRoZSBleHBsYWluIGZvciB0aGUgY3Vyc29yICovXG4gICAgYXN5bmMgZXhwbGFpbih2ZXJib3NpdHkpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgYWdncmVnYXRlXzEuQWdncmVnYXRlT3BlcmF0aW9uKHRoaXMubmFtZXNwYWNlLCB0aGlzW2tQaXBlbGluZV0sIHtcbiAgICAgICAgICAgIC4uLnRoaXNba09wdGlvbnNdLFxuICAgICAgICAgICAgLi4udGhpcy5jdXJzb3JPcHRpb25zLFxuICAgICAgICAgICAgZXhwbGFpbjogdmVyYm9zaXR5ID8/IHRydWVcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBncm91cCgkZ3JvdXApIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0ucHVzaCh7ICRncm91cCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBBZGQgYSBsaW1pdCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmUgKi9cbiAgICBsaW1pdCgkbGltaXQpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0ucHVzaCh7ICRsaW1pdCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBBZGQgYSBtYXRjaCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmUgKi9cbiAgICBtYXRjaCgkbWF0Y2gpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0ucHVzaCh7ICRtYXRjaCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBBZGQgYW4gb3V0IHN0YWdlIHRvIHRoZSBhZ2dyZWdhdGlvbiBwaXBlbGluZSAqL1xuICAgIG91dCgkb3V0KSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdLnB1c2goeyAkb3V0IH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvamVjdCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmVcbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogSW4gb3JkZXIgdG8gc3RyaWN0bHkgdHlwZSB0aGlzIGZ1bmN0aW9uIHlvdSBtdXN0IHByb3ZpZGUgYW4gaW50ZXJmYWNlXG4gICAgICogdGhhdCByZXByZXNlbnRzIHRoZSBlZmZlY3Qgb2YgeW91ciBwcm9qZWN0aW9uIG9uIHRoZSByZXN1bHQgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBjaGFpbmluZyBhIHByb2plY3Rpb24gdG8geW91ciBjdXJzb3IgY2hhbmdlcyB0aGUgcmV0dXJuZWQgdHlwZSB0byB0aGUgZ2VuZXJpYyB7QGxpbmsgRG9jdW1lbnR9IHR5cGUuXG4gICAgICogWW91IHNob3VsZCBzcGVjaWZ5IGEgcGFyYW1ldGVyaXplZCB0eXBlIHRvIGhhdmUgYXNzZXJ0aW9ucyBvbiB5b3VyIGZpbmFsIHJlc3VsdHMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiAvLyBCZXN0IHdheVxuICAgICAqIGNvbnN0IGRvY3M6IEFnZ3JlZ2F0aW9uQ3Vyc29yPHsgYTogbnVtYmVyIH0+ID0gY3Vyc29yLnByb2plY3Q8eyBhOiBudW1iZXIgfT4oeyBfaWQ6IDAsIGE6IHRydWUgfSk7XG4gICAgICogLy8gRmxleGlibGUgd2F5XG4gICAgICogY29uc3QgZG9jczogQWdncmVnYXRpb25DdXJzb3I8RG9jdW1lbnQ+ID0gY3Vyc29yLnByb2plY3QoeyBfaWQ6IDAsIGE6IHRydWUgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIEluIG9yZGVyIHRvIHN0cmljdGx5IHR5cGUgdGhpcyBmdW5jdGlvbiB5b3UgbXVzdCBwcm92aWRlIGFuIGludGVyZmFjZVxuICAgICAqIHRoYXQgcmVwcmVzZW50cyB0aGUgZWZmZWN0IG9mIHlvdXIgcHJvamVjdGlvbiBvbiB0aGUgcmVzdWx0IGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqICoqTm90ZSBmb3IgVHlwZXNjcmlwdCBVc2VyczoqKiBhZGRpbmcgYSB0cmFuc2Zvcm0gY2hhbmdlcyB0aGUgcmV0dXJuIHR5cGUgb2YgdGhlIGl0ZXJhdGlvbiBvZiB0aGlzIGN1cnNvcixcbiAgICAgKiBpdCAqKmRvZXMgbm90KiogcmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGEgY3Vyc29yLiBUaGlzIG1lYW5zIHdoZW4gY2FsbGluZyBwcm9qZWN0LFxuICAgICAqIHlvdSBzaG91bGQgYWx3YXlzIGFzc2lnbiB0aGUgcmVzdWx0IHRvIGEgbmV3IHZhcmlhYmxlIGluIG9yZGVyIHRvIGdldCBhIGNvcnJlY3RseSB0eXBlZCBjdXJzb3IgdmFyaWFibGUuXG4gICAgICogVGFrZSBub3RlIG9mIHRoZSBmb2xsb3dpbmcgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIGNvbnN0IGN1cnNvcjogQWdncmVnYXRpb25DdXJzb3I8eyBhOiBudW1iZXI7IGI6IHN0cmluZyB9PiA9IGNvbGwuYWdncmVnYXRlKFtdKTtcbiAgICAgKiBjb25zdCBwcm9qZWN0Q3Vyc29yID0gY3Vyc29yLnByb2plY3Q8eyBhOiBudW1iZXIgfT4oeyBfaWQ6IDAsIGE6IHRydWUgfSk7XG4gICAgICogY29uc3QgYVByb3BPbmx5QXJyYXk6IHthOiBudW1iZXJ9W10gPSBhd2FpdCBwcm9qZWN0Q3Vyc29yLnRvQXJyYXkoKTtcbiAgICAgKlxuICAgICAqIC8vIG9yIGFsd2F5cyB1c2UgY2hhaW5pbmcgYW5kIHNhdmUgdGhlIGZpbmFsIGN1cnNvclxuICAgICAqXG4gICAgICogY29uc3QgY3Vyc29yID0gY29sbC5hZ2dyZWdhdGUoKS5wcm9qZWN0PHsgYTogc3RyaW5nIH0+KHtcbiAgICAgKiAgIF9pZDogMCxcbiAgICAgKiAgIGE6IHsgJGNvbnZlcnQ6IHsgaW5wdXQ6ICckYScsIHRvOiAnc3RyaW5nJyB9XG4gICAgICogfX0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHByb2plY3QoJHByb2plY3QpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0ucHVzaCh7ICRwcm9qZWN0IH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEFkZCBhIGxvb2t1cCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmUgKi9cbiAgICBsb29rdXAoJGxvb2t1cCkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba1BpcGVsaW5lXS5wdXNoKHsgJGxvb2t1cCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBBZGQgYSByZWRhY3Qgc3RhZ2UgdG8gdGhlIGFnZ3JlZ2F0aW9uIHBpcGVsaW5lICovXG4gICAgcmVkYWN0KCRyZWRhY3QpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0ucHVzaCh7ICRyZWRhY3QgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKiogQWRkIGEgc2tpcCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmUgKi9cbiAgICBza2lwKCRza2lwKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trUGlwZWxpbmVdLnB1c2goeyAkc2tpcCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBBZGQgYSBzb3J0IHN0YWdlIHRvIHRoZSBhZ2dyZWdhdGlvbiBwaXBlbGluZSAqL1xuICAgIHNvcnQoJHNvcnQpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0ucHVzaCh7ICRzb3J0IH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIEFkZCBhIHVud2luZCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmUgKi9cbiAgICB1bndpbmQoJHVud2luZCkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba1BpcGVsaW5lXS5wdXNoKHsgJHVud2luZCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKiBBZGQgYSBnZW9OZWFyIHN0YWdlIHRvIHRoZSBhZ2dyZWdhdGlvbiBwaXBlbGluZSAqL1xuICAgIGdlb05lYXIoJGdlb05lYXIpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tQaXBlbGluZV0ucHVzaCh7ICRnZW9OZWFyIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnRzLkFnZ3JlZ2F0aW9uQ3Vyc29yID0gQWdncmVnYXRpb25DdXJzb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZ2dyZWdhdGlvbl9jdXJzb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQWdncmVnYXRpb25DdXJzb3IiLCJhZ2dyZWdhdGVfMSIsInJlcXVpcmUiLCJleGVjdXRlX29wZXJhdGlvbl8xIiwidXRpbHNfMSIsImFic3RyYWN0X2N1cnNvcl8xIiwia1BpcGVsaW5lIiwiU3ltYm9sIiwia09wdGlvbnMiLCJBYnN0cmFjdEN1cnNvciIsImNvbnN0cnVjdG9yIiwiY2xpZW50IiwibmFtZXNwYWNlIiwicGlwZWxpbmUiLCJvcHRpb25zIiwiY2xvbmUiLCJjbG9uZWRPcHRpb25zIiwibWVyZ2VPcHRpb25zIiwic2Vzc2lvbiIsIm1hcCIsInRyYW5zZm9ybSIsIl9pbml0aWFsaXplIiwiYWdncmVnYXRlT3BlcmF0aW9uIiwiQWdncmVnYXRlT3BlcmF0aW9uIiwiY3Vyc29yT3B0aW9ucyIsInJlc3BvbnNlIiwiZXhlY3V0ZU9wZXJhdGlvbiIsInNlcnZlciIsImV4cGxhaW4iLCJ2ZXJib3NpdHkiLCJncm91cCIsIiRncm91cCIsImFzc2VydFVuaW5pdGlhbGl6ZWQiLCJwdXNoIiwibGltaXQiLCIkbGltaXQiLCJtYXRjaCIsIiRtYXRjaCIsIm91dCIsIiRvdXQiLCJwcm9qZWN0IiwiJHByb2plY3QiLCJsb29rdXAiLCIkbG9va3VwIiwicmVkYWN0IiwiJHJlZGFjdCIsInNraXAiLCIkc2tpcCIsInNvcnQiLCIkc29ydCIsInVud2luZCIsIiR1bndpbmQiLCJnZW9OZWFyIiwiJGdlb05lYXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/change_stream_cursor.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/change_stream_cursor.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ChangeStreamCursor = void 0;\nconst change_stream_1 = __webpack_require__(/*! ../change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst aggregate_1 = __webpack_require__(/*! ../operations/aggregate */ \"(ssr)/./node_modules/mongodb/lib/operations/aggregate.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @internal */ class ChangeStreamCursor extends abstract_cursor_1.AbstractCursor {\n    constructor(client, namespace, pipeline = [], options = {}){\n        super(client, namespace, options);\n        this.pipeline = pipeline;\n        this.options = options;\n        this._resumeToken = null;\n        this.startAtOperationTime = options.startAtOperationTime;\n        if (options.startAfter) {\n            this.resumeToken = options.startAfter;\n        } else if (options.resumeAfter) {\n            this.resumeToken = options.resumeAfter;\n        }\n    }\n    set resumeToken(token) {\n        this._resumeToken = token;\n        this.emit(change_stream_1.ChangeStream.RESUME_TOKEN_CHANGED, token);\n    }\n    get resumeToken() {\n        return this._resumeToken;\n    }\n    get resumeOptions() {\n        const options = {\n            ...this.options\n        };\n        for (const key of [\n            \"resumeAfter\",\n            \"startAfter\",\n            \"startAtOperationTime\"\n        ]){\n            delete options[key];\n        }\n        if (this.resumeToken != null) {\n            if (this.options.startAfter && !this.hasReceived) {\n                options.startAfter = this.resumeToken;\n            } else {\n                options.resumeAfter = this.resumeToken;\n            }\n        } else if (this.startAtOperationTime != null && (0, utils_1.maxWireVersion)(this.server) >= 7) {\n            options.startAtOperationTime = this.startAtOperationTime;\n        }\n        return options;\n    }\n    cacheResumeToken(resumeToken) {\n        if (this.bufferedCount() === 0 && this.postBatchResumeToken) {\n            this.resumeToken = this.postBatchResumeToken;\n        } else {\n            this.resumeToken = resumeToken;\n        }\n        this.hasReceived = true;\n    }\n    _processBatch(response) {\n        const cursor = response.cursor;\n        if (cursor.postBatchResumeToken) {\n            this.postBatchResumeToken = response.cursor.postBatchResumeToken;\n            const batch = \"firstBatch\" in response.cursor ? response.cursor.firstBatch : response.cursor.nextBatch;\n            if (batch.length === 0) {\n                this.resumeToken = cursor.postBatchResumeToken;\n            }\n        }\n    }\n    clone() {\n        return new ChangeStreamCursor(this.client, this.namespace, this.pipeline, {\n            ...this.cursorOptions\n        });\n    }\n    async _initialize(session) {\n        const aggregateOperation = new aggregate_1.AggregateOperation(this.namespace, this.pipeline, {\n            ...this.cursorOptions,\n            ...this.options,\n            session\n        });\n        const response = await (0, execute_operation_1.executeOperation)(session.client, aggregateOperation);\n        const server = aggregateOperation.server;\n        this.maxWireVersion = (0, utils_1.maxWireVersion)(server);\n        if (this.startAtOperationTime == null && this.resumeAfter == null && this.startAfter == null && this.maxWireVersion >= 7) {\n            this.startAtOperationTime = response.operationTime;\n        }\n        this._processBatch(response);\n        this.emit(constants_1.INIT, response);\n        this.emit(constants_1.RESPONSE);\n        // TODO: NODE-2882\n        return {\n            server,\n            session,\n            response\n        };\n    }\n    async getMore(batchSize) {\n        const response = await super.getMore(batchSize);\n        this.maxWireVersion = (0, utils_1.maxWireVersion)(this.server);\n        this._processBatch(response);\n        this.emit(change_stream_1.ChangeStream.MORE, response);\n        this.emit(change_stream_1.ChangeStream.RESPONSE);\n        return response;\n    }\n}\nexports.ChangeStreamCursor = ChangeStreamCursor; //# sourceMappingURL=change_stream_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2NoYW5nZV9zdHJlYW1fY3Vyc29yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xDLE1BQU1HLGtCQUFrQkMsbUJBQU9BLENBQUMsMkVBQWtCO0FBQ2xELE1BQU1DLGNBQWNELG1CQUFPQSxDQUFDLG1FQUFjO0FBQzFDLE1BQU1FLGNBQWNGLG1CQUFPQSxDQUFDLHlGQUF5QjtBQUNyRCxNQUFNRyxzQkFBc0JILG1CQUFPQSxDQUFDLHlHQUFpQztBQUNyRSxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNSyxvQkFBb0JMLG1CQUFPQSxDQUFDLHFGQUFtQjtBQUNyRCxjQUFjLEdBQ2QsTUFBTUYsMkJBQTJCTyxrQkFBa0JDLGNBQWM7SUFDN0RDLFlBQVlDLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxXQUFXLEVBQUUsRUFBRUMsVUFBVSxDQUFDLENBQUMsQ0FBRTtRQUN4RCxLQUFLLENBQUNILFFBQVFDLFdBQVdFO1FBQ3pCLElBQUksQ0FBQ0QsUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNDLG9CQUFvQixHQUFHRixRQUFRRSxvQkFBb0I7UUFDeEQsSUFBSUYsUUFBUUcsVUFBVSxFQUFFO1lBQ3BCLElBQUksQ0FBQ0MsV0FBVyxHQUFHSixRQUFRRyxVQUFVO1FBQ3pDLE9BQ0ssSUFBSUgsUUFBUUssV0FBVyxFQUFFO1lBQzFCLElBQUksQ0FBQ0QsV0FBVyxHQUFHSixRQUFRSyxXQUFXO1FBQzFDO0lBQ0o7SUFDQSxJQUFJRCxZQUFZRSxLQUFLLEVBQUU7UUFDbkIsSUFBSSxDQUFDTCxZQUFZLEdBQUdLO1FBQ3BCLElBQUksQ0FBQ0MsSUFBSSxDQUFDbkIsZ0JBQWdC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SUFBSSxDQUFDWixJQUFJLENBQUNqQixZQUFZMkMsSUFBSSxFQUFFZDtRQUM1QixJQUFJLENBQUNaLElBQUksQ0FBQ2pCLFlBQVk0QyxRQUFRO1FBQzlCLGtCQUFrQjtRQUNsQixPQUFPO1lBQUVwQjtZQUFRYztZQUFTVDtRQUFTO0lBQ3ZDO0lBQ0EsTUFBTWdCLFFBQVFDLFNBQVMsRUFBRTtRQUNyQixNQUFNakIsV0FBVyxNQUFNLEtBQUssQ0FBQ2dCLFFBQVFDO1FBQ3JDLElBQUksQ0FBQ3ZCLGNBQWMsR0FBRyxDQUFDLEdBQUdwQixRQUFRb0IsY0FBYyxFQUFFLElBQUksQ0FBQ0MsTUFBTTtRQUM3RCxJQUFJLENBQUNJLGFBQWEsQ0FBQ0M7UUFDbkIsSUFBSSxDQUFDWixJQUFJLENBQUNuQixnQkFBZ0JvQixZQUFZLENBQUM2QixJQUFJLEVBQUVsQjtRQUM3QyxJQUFJLENBQUNaLElBQUksQ0FBQ25CLGdCQUFnQm9CLFlBQVksQ0FBQzBCLFFBQVE7UUFDL0MsT0FBT2Y7SUFDWDtBQUNKO0FBQ0FsQywwQkFBMEIsR0FBR0Usb0JBQzdCLGdEQUFnRCIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2NoYW5nZV9zdHJlYW1fY3Vyc29yLmpzP2UyMTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNoYW5nZVN0cmVhbUN1cnNvciA9IHZvaWQgMDtcbmNvbnN0IGNoYW5nZV9zdHJlYW1fMSA9IHJlcXVpcmUoXCIuLi9jaGFuZ2Vfc3RyZWFtXCIpO1xuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xuY29uc3QgYWdncmVnYXRlXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9hZ2dyZWdhdGVcIik7XG5jb25zdCBleGVjdXRlX29wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgYWJzdHJhY3RfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9hYnN0cmFjdF9jdXJzb3JcIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBDaGFuZ2VTdHJlYW1DdXJzb3IgZXh0ZW5kcyBhYnN0cmFjdF9jdXJzb3JfMS5BYnN0cmFjdEN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoY2xpZW50LCBuYW1lc3BhY2UsIHBpcGVsaW5lID0gW10sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihjbGllbnQsIG5hbWVzcGFjZSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMucGlwZWxpbmUgPSBwaXBlbGluZTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5fcmVzdW1lVG9rZW4gPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXJ0QXRPcGVyYXRpb25UaW1lID0gb3B0aW9ucy5zdGFydEF0T3BlcmF0aW9uVGltZTtcbiAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRBZnRlcikge1xuICAgICAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IG9wdGlvbnMuc3RhcnRBZnRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnJlc3VtZUFmdGVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gb3B0aW9ucy5yZXN1bWVBZnRlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXQgcmVzdW1lVG9rZW4odG9rZW4pIHtcbiAgICAgICAgdGhpcy5fcmVzdW1lVG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5lbWl0KGNoYW5nZV9zdHJlYW1fMS5DaGFuZ2VTdHJlYW0uUkVTVU1FX1RPS0VOX0NIQU5HRUQsIHRva2VuKTtcbiAgICB9XG4gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzdW1lVG9rZW47XG4gICAgfVxuICAgIGdldCByZXN1bWVPcHRpb25zKCkge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFsncmVzdW1lQWZ0ZXInLCAnc3RhcnRBZnRlcicsICdzdGFydEF0T3BlcmF0aW9uVGltZSddKSB7XG4gICAgICAgICAgICBkZWxldGUgb3B0aW9uc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlc3VtZVRva2VuICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3RhcnRBZnRlciAmJiAhdGhpcy5oYXNSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RhcnRBZnRlciA9IHRoaXMucmVzdW1lVG9rZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnJlc3VtZUFmdGVyID0gdGhpcy5yZXN1bWVUb2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXJ0QXRPcGVyYXRpb25UaW1lICE9IG51bGwgJiYgKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHRoaXMuc2VydmVyKSA+PSA3KSB7XG4gICAgICAgICAgICBvcHRpb25zLnN0YXJ0QXRPcGVyYXRpb25UaW1lID0gdGhpcy5zdGFydEF0T3BlcmF0aW9uVGltZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG4gICAgY2FjaGVSZXN1bWVUb2tlbihyZXN1bWVUb2tlbikge1xuICAgICAgICBpZiAodGhpcy5idWZmZXJlZENvdW50KCkgPT09IDAgJiYgdGhpcy5wb3N0QmF0Y2hSZXN1bWVUb2tlbikge1xuICAgICAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHRoaXMucG9zdEJhdGNoUmVzdW1lVG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gcmVzdW1lVG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYXNSZWNlaXZlZCA9IHRydWU7XG4gICAgfVxuICAgIF9wcm9jZXNzQmF0Y2gocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gcmVzcG9uc2UuY3Vyc29yO1xuICAgICAgICBpZiAoY3Vyc29yLnBvc3RCYXRjaFJlc3VtZVRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLnBvc3RCYXRjaFJlc3VtZVRva2VuID0gcmVzcG9uc2UuY3Vyc29yLnBvc3RCYXRjaFJlc3VtZVRva2VuO1xuICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSAnZmlyc3RCYXRjaCcgaW4gcmVzcG9uc2UuY3Vyc29yID8gcmVzcG9uc2UuY3Vyc29yLmZpcnN0QmF0Y2ggOiByZXNwb25zZS5jdXJzb3IubmV4dEJhdGNoO1xuICAgICAgICAgICAgaWYgKGJhdGNoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSBjdXJzb3IucG9zdEJhdGNoUmVzdW1lVG9rZW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhbmdlU3RyZWFtQ3Vyc29yKHRoaXMuY2xpZW50LCB0aGlzLm5hbWVzcGFjZSwgdGhpcy5waXBlbGluZSwge1xuICAgICAgICAgICAgLi4udGhpcy5jdXJzb3JPcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW5pdGlhbGl6ZShzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IGFnZ3JlZ2F0ZU9wZXJhdGlvbiA9IG5ldyBhZ2dyZWdhdGVfMS5BZ2dyZWdhdGVPcGVyYXRpb24odGhpcy5uYW1lc3BhY2UsIHRoaXMucGlwZWxpbmUsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikoc2Vzc2lvbi5jbGllbnQsIGFnZ3JlZ2F0ZU9wZXJhdGlvbik7XG4gICAgICAgIGNvbnN0IHNlcnZlciA9IGFnZ3JlZ2F0ZU9wZXJhdGlvbi5zZXJ2ZXI7XG4gICAgICAgIHRoaXMubWF4V2lyZVZlcnNpb24gPSAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikoc2VydmVyKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRBdE9wZXJhdGlvblRpbWUgPT0gbnVsbCAmJlxuICAgICAgICAgICAgdGhpcy5yZXN1bWVBZnRlciA9PSBudWxsICYmXG4gICAgICAgICAgICB0aGlzLnN0YXJ0QWZ0ZXIgPT0gbnVsbCAmJlxuICAgICAgICAgICAgdGhpcy5tYXhXaXJlVmVyc2lvbiA+PSA3KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0QXRPcGVyYXRpb25UaW1lID0gcmVzcG9uc2Uub3BlcmF0aW9uVGltZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcm9jZXNzQmF0Y2gocmVzcG9uc2UpO1xuICAgICAgICB0aGlzLmVtaXQoY29uc3RhbnRzXzEuSU5JVCwgcmVzcG9uc2UpO1xuICAgICAgICB0aGlzLmVtaXQoY29uc3RhbnRzXzEuUkVTUE9OU0UpO1xuICAgICAgICAvLyBUT0RPOiBOT0RFLTI4ODJcbiAgICAgICAgcmV0dXJuIHsgc2VydmVyLCBzZXNzaW9uLCByZXNwb25zZSB9O1xuICAgIH1cbiAgICBhc3luYyBnZXRNb3JlKGJhdGNoU2l6ZSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVyLmdldE1vcmUoYmF0Y2hTaXplKTtcbiAgICAgICAgdGhpcy5tYXhXaXJlVmVyc2lvbiA9ICgwLCB1dGlsc18xLm1heFdpcmVWZXJzaW9uKSh0aGlzLnNlcnZlcik7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NCYXRjaChyZXNwb25zZSk7XG4gICAgICAgIHRoaXMuZW1pdChjaGFuZ2Vfc3RyZWFtXzEuQ2hhbmdlU3RyZWFtLk1PUkUsIHJlc3BvbnNlKTtcbiAgICAgICAgdGhpcy5lbWl0KGNoYW5nZV9zdHJlYW1fMS5DaGFuZ2VTdHJlYW0uUkVTUE9OU0UpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxufVxuZXhwb3J0cy5DaGFuZ2VTdHJlYW1DdXJzb3IgPSBDaGFuZ2VTdHJlYW1DdXJzb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGFuZ2Vfc3RyZWFtX2N1cnNvci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDaGFuZ2VTdHJlYW1DdXJzb3IiLCJjaGFuZ2Vfc3RyZWFtXzEiLCJyZXF1aXJlIiwiY29uc3RhbnRzXzEiLCJhZ2dyZWdhdGVfMSIsImV4ZWN1dGVfb3BlcmF0aW9uXzEiLCJ1dGlsc18xIiwiYWJzdHJhY3RfY3Vyc29yXzEiLCJBYnN0cmFjdEN1cnNvciIsImNvbnN0cnVjdG9yIiwiY2xpZW50IiwibmFtZXNwYWNlIiwicGlwZWxpbmUiLCJvcHRpb25zIiwiX3Jlc3VtZVRva2VuIiwic3RhcnRBdE9wZXJhdGlvblRpbWUiLCJzdGFydEFmdGVyIiwicmVzdW1lVG9rZW4iLCJyZXN1bWVBZnRlciIsInRva2VuIiwiZW1pdCIsIkNoYW5nZVN0cmVhbSIsIlJFU1VNRV9UT0tFTl9DSEFOR0VEIiwicmVzdW1lT3B0aW9ucyIsImtleSIsImhhc1JlY2VpdmVkIiwibWF4V2lyZVZlcnNpb24iLCJzZXJ2ZXIiLCJjYWNoZVJlc3VtZVRva2VuIiwiYnVmZmVyZWRDb3VudCIsInBvc3RCYXRjaFJlc3VtZVRva2VuIiwiX3Byb2Nlc3NCYXRjaCIsInJlc3BvbnNlIiwiY3Vyc29yIiwiYmF0Y2giLCJmaXJzdEJhdGNoIiwibmV4dEJhdGNoIiwibGVuZ3RoIiwiY2xvbmUiLCJjdXJzb3JPcHRpb25zIiwiX2luaXRpYWxpemUiLCJzZXNzaW9uIiwiYWdncmVnYXRlT3BlcmF0aW9uIiwiQWdncmVnYXRlT3BlcmF0aW9uIiwiZXhlY3V0ZU9wZXJhdGlvbiIsIm9wZXJhdGlvblRpbWUiLCJJTklUIiwiUkVTUE9OU0UiLCJnZXRNb3JlIiwiYmF0Y2hTaXplIiwiTU9SRSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/change_stream_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/find_cursor.js":
/*!********************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/find_cursor.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FindCursor = exports.FLAGS = void 0;\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst count_1 = __webpack_require__(/*! ../operations/count */ \"(ssr)/./node_modules/mongodb/lib/operations/count.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst find_1 = __webpack_require__(/*! ../operations/find */ \"(ssr)/./node_modules/mongodb/lib/operations/find.js\");\nconst sort_1 = __webpack_require__(/*! ../sort */ \"(ssr)/./node_modules/mongodb/lib/sort.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @internal */ const kFilter = Symbol(\"filter\");\n/** @internal */ const kNumReturned = Symbol(\"numReturned\");\n/** @internal */ const kBuiltOptions = Symbol(\"builtOptions\");\n/** @public Flags allowed for cursor */ exports.FLAGS = [\n    \"tailable\",\n    \"oplogReplay\",\n    \"noCursorTimeout\",\n    \"awaitData\",\n    \"exhaust\",\n    \"partial\"\n];\n/** @public */ class FindCursor extends abstract_cursor_1.AbstractCursor {\n    /** @internal */ constructor(client, namespace, filter = {}, options = {}){\n        super(client, namespace, options);\n        this[kFilter] = filter;\n        this[kBuiltOptions] = options;\n        if (options.sort != null) {\n            this[kBuiltOptions].sort = (0, sort_1.formatSort)(options.sort);\n        }\n    }\n    clone() {\n        const clonedOptions = (0, utils_1.mergeOptions)({}, this[kBuiltOptions]);\n        delete clonedOptions.session;\n        return new FindCursor(this.client, this.namespace, this[kFilter], {\n            ...clonedOptions\n        });\n    }\n    map(transform) {\n        return super.map(transform);\n    }\n    /** @internal */ async _initialize(session) {\n        const findOperation = new find_1.FindOperation(undefined, this.namespace, this[kFilter], {\n            ...this[kBuiltOptions],\n            ...this.cursorOptions,\n            session\n        });\n        const response = await (0, execute_operation_1.executeOperation)(this.client, findOperation);\n        // the response is not a cursor when `explain` is enabled\n        this[kNumReturned] = response.cursor?.firstBatch?.length;\n        // TODO: NODE-2882\n        return {\n            server: findOperation.server,\n            session,\n            response\n        };\n    }\n    /** @internal */ async getMore(batchSize) {\n        const numReturned = this[kNumReturned];\n        if (numReturned) {\n            // TODO(DRIVERS-1448): Remove logic to enforce `limit` in the driver\n            const limit = this[kBuiltOptions].limit;\n            batchSize = limit && limit > 0 && numReturned + batchSize > limit ? limit - numReturned : batchSize;\n            if (batchSize <= 0) {\n                // this is an optimization for the special case of a limit for a find command to avoid an\n                // extra getMore when the limit has been reached and the limit is a multiple of the batchSize.\n                // This is a consequence of the new query engine in 5.0 having no knowledge of the limit as it\n                // produces results for the find command.  Once a batch is filled up, it is returned and only\n                // on the subsequent getMore will the query framework consider the limit, determine the cursor\n                // is exhausted and return a cursorId of zero.\n                // instead, if we determine there are no more documents to request from the server, we preemptively\n                // close the cursor\n                await this.close().catch(()=>null);\n                return {\n                    cursor: {\n                        id: bson_1.Long.ZERO,\n                        nextBatch: []\n                    }\n                };\n            }\n        }\n        const response = await super.getMore(batchSize);\n        // TODO: wrap this in some logic to prevent it from happening if we don't need this support\n        if (response) {\n            this[kNumReturned] = this[kNumReturned] + response.cursor.nextBatch.length;\n        }\n        return response;\n    }\n    /**\n     * Get the count of documents for this cursor\n     * @deprecated Use `collection.estimatedDocumentCount` or `collection.countDocuments` instead\n     */ async count(options) {\n        (0, utils_1.emitWarningOnce)(\"cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead \");\n        if (typeof options === \"boolean\") {\n            throw new error_1.MongoInvalidArgumentError(\"Invalid first parameter to count\");\n        }\n        return (0, execute_operation_1.executeOperation)(this.client, new count_1.CountOperation(this.namespace, this[kFilter], {\n            ...this[kBuiltOptions],\n            ...this.cursorOptions,\n            ...options\n        }));\n    }\n    /** Execute the explain for the cursor */ async explain(verbosity) {\n        return (0, execute_operation_1.executeOperation)(this.client, new find_1.FindOperation(undefined, this.namespace, this[kFilter], {\n            ...this[kBuiltOptions],\n            ...this.cursorOptions,\n            explain: verbosity ?? true\n        }));\n    }\n    /** Set the cursor query */ filter(filter) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kFilter] = filter;\n        return this;\n    }\n    /**\n     * Set the cursor hint\n     *\n     * @param hint - If specified, then the query system will only consider plans using the hinted index.\n     */ hint(hint) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].hint = hint;\n        return this;\n    }\n    /**\n     * Set the cursor min\n     *\n     * @param min - Specify a $min value to specify the inclusive lower bound for a specific index in order to constrain the results of find(). The $min specifies the lower bound for all keys of a specific index in order.\n     */ min(min) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].min = min;\n        return this;\n    }\n    /**\n     * Set the cursor max\n     *\n     * @param max - Specify a $max value to specify the exclusive upper bound for a specific index in order to constrain the results of find(). The $max specifies the upper bound for all keys of a specific index in order.\n     */ max(max) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].max = max;\n        return this;\n    }\n    /**\n     * Set the cursor returnKey.\n     * If set to true, modifies the cursor to only return the index field or fields for the results of the query, rather than documents.\n     * If set to true and the query does not use an index to perform the read operation, the returned documents will not contain any fields.\n     *\n     * @param value - the returnKey value.\n     */ returnKey(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].returnKey = value;\n        return this;\n    }\n    /**\n     * Modifies the output of a query by adding a field $recordId to matching documents. $recordId is the internal key which uniquely identifies a document in a collection.\n     *\n     * @param value - The $showDiskLoc option has now been deprecated and replaced with the showRecordId field. $showDiskLoc will still be accepted for OP_QUERY stye find.\n     */ showRecordId(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].showRecordId = value;\n        return this;\n    }\n    /**\n     * Add a query modifier to the cursor query\n     *\n     * @param name - The query modifier (must start with $, such as $orderby etc)\n     * @param value - The modifier value.\n     */ addQueryModifier(name, value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (name[0] !== \"$\") {\n            throw new error_1.MongoInvalidArgumentError(`${name} is not a valid query modifier`);\n        }\n        // Strip of the $\n        const field = name.substr(1);\n        // NOTE: consider some TS magic for this\n        switch(field){\n            case \"comment\":\n                this[kBuiltOptions].comment = value;\n                break;\n            case \"explain\":\n                this[kBuiltOptions].explain = value;\n                break;\n            case \"hint\":\n                this[kBuiltOptions].hint = value;\n                break;\n            case \"max\":\n                this[kBuiltOptions].max = value;\n                break;\n            case \"maxTimeMS\":\n                this[kBuiltOptions].maxTimeMS = value;\n                break;\n            case \"min\":\n                this[kBuiltOptions].min = value;\n                break;\n            case \"orderby\":\n                this[kBuiltOptions].sort = (0, sort_1.formatSort)(value);\n                break;\n            case \"query\":\n                this[kFilter] = value;\n                break;\n            case \"returnKey\":\n                this[kBuiltOptions].returnKey = value;\n                break;\n            case \"showDiskLoc\":\n                this[kBuiltOptions].showRecordId = value;\n                break;\n            default:\n                throw new error_1.MongoInvalidArgumentError(`Invalid query modifier: ${name}`);\n        }\n        return this;\n    }\n    /**\n     * Add a comment to the cursor query allowing for tracking the comment in the log.\n     *\n     * @param value - The comment attached to this query.\n     */ comment(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].comment = value;\n        return this;\n    }\n    /**\n     * Set a maxAwaitTimeMS on a tailing cursor query to allow to customize the timeout value for the option awaitData (Only supported on MongoDB 3.2 or higher, ignored otherwise)\n     *\n     * @param value - Number of milliseconds to wait before aborting the tailed query.\n     */ maxAwaitTimeMS(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError(\"Argument for maxAwaitTimeMS must be a number\");\n        }\n        this[kBuiltOptions].maxAwaitTimeMS = value;\n        return this;\n    }\n    /**\n     * Set a maxTimeMS on the cursor query, allowing for hard timeout limits on queries (Only supported on MongoDB 2.6 or higher)\n     *\n     * @param value - Number of milliseconds to wait before aborting the query.\n     */ maxTimeMS(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError(\"Argument for maxTimeMS must be a number\");\n        }\n        this[kBuiltOptions].maxTimeMS = value;\n        return this;\n    }\n    /**\n     * Add a project stage to the aggregation pipeline\n     *\n     * @remarks\n     * In order to strictly type this function you must provide an interface\n     * that represents the effect of your projection on the result documents.\n     *\n     * By default chaining a projection to your cursor changes the returned type to the generic\n     * {@link Document} type.\n     * You should specify a parameterized type to have assertions on your final results.\n     *\n     * @example\n     * ```typescript\n     * // Best way\n     * const docs: FindCursor<{ a: number }> = cursor.project<{ a: number }>({ _id: 0, a: true });\n     * // Flexible way\n     * const docs: FindCursor<Document> = cursor.project({ _id: 0, a: true });\n     * ```\n     *\n     * @remarks\n     *\n     * **Note for Typescript Users:** adding a transform changes the return type of the iteration of this cursor,\n     * it **does not** return a new instance of a cursor. This means when calling project,\n     * you should always assign the result to a new variable in order to get a correctly typed cursor variable.\n     * Take note of the following example:\n     *\n     * @example\n     * ```typescript\n     * const cursor: FindCursor<{ a: number; b: string }> = coll.find();\n     * const projectCursor = cursor.project<{ a: number }>({ _id: 0, a: true });\n     * const aPropOnlyArray: {a: number}[] = await projectCursor.toArray();\n     *\n     * // or always use chaining and save the final cursor\n     *\n     * const cursor = coll.find().project<{ a: string }>({\n     *   _id: 0,\n     *   a: { $convert: { input: '$a', to: 'string' }\n     * }});\n     * ```\n     */ project(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].projection = value;\n        return this;\n    }\n    /**\n     * Sets the sort order of the cursor query.\n     *\n     * @param sort - The key or keys set for the sort.\n     * @param direction - The direction of the sorting (1 or -1).\n     */ sort(sort, direction) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (this[kBuiltOptions].tailable) {\n            throw new error_1.MongoTailableCursorError(\"Tailable cursor does not support sorting\");\n        }\n        this[kBuiltOptions].sort = (0, sort_1.formatSort)(sort, direction);\n        return this;\n    }\n    /**\n     * Allows disk use for blocking sort operations exceeding 100MB memory. (MongoDB 3.2 or higher)\n     *\n     * @remarks\n     * {@link https://www.mongodb.com/docs/manual/reference/command/find/#find-cmd-allowdiskuse | find command allowDiskUse documentation}\n     */ allowDiskUse(allow = true) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (!this[kBuiltOptions].sort) {\n            throw new error_1.MongoInvalidArgumentError('Option \"allowDiskUse\" requires a sort specification');\n        }\n        // As of 6.0 the default is true. This allows users to get back to the old behavior.\n        if (!allow) {\n            this[kBuiltOptions].allowDiskUse = false;\n            return this;\n        }\n        this[kBuiltOptions].allowDiskUse = true;\n        return this;\n    }\n    /**\n     * Set the collation options for the cursor.\n     *\n     * @param value - The cursor collation options (MongoDB 3.4 or higher) settings for update operation (see 3.4 documentation for available fields).\n     */ collation(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        this[kBuiltOptions].collation = value;\n        return this;\n    }\n    /**\n     * Set the limit for the cursor.\n     *\n     * @param value - The limit for the cursor query.\n     */ limit(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (this[kBuiltOptions].tailable) {\n            throw new error_1.MongoTailableCursorError(\"Tailable cursor does not support limit\");\n        }\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError('Operation \"limit\" requires an integer');\n        }\n        this[kBuiltOptions].limit = value;\n        return this;\n    }\n    /**\n     * Set the skip for the cursor.\n     *\n     * @param value - The skip for the cursor query.\n     */ skip(value) {\n        (0, abstract_cursor_1.assertUninitialized)(this);\n        if (this[kBuiltOptions].tailable) {\n            throw new error_1.MongoTailableCursorError(\"Tailable cursor does not support skip\");\n        }\n        if (typeof value !== \"number\") {\n            throw new error_1.MongoInvalidArgumentError('Operation \"skip\" requires an integer');\n        }\n        this[kBuiltOptions].skip = value;\n        return this;\n    }\n}\nexports.FindCursor = FindCursor; //# sourceMappingURL=find_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2ZpbmRfY3Vyc29yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBR0EsYUFBYSxHQUFHLEtBQUs7QUFDMUMsTUFBTUksU0FBU0MsbUJBQU9BLENBQUMseURBQVM7QUFDaEMsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsaUZBQXFCO0FBQzdDLE1BQU1HLHNCQUFzQkgsbUJBQU9BLENBQUMseUdBQWlDO0FBQ3JFLE1BQU1JLFNBQVNKLG1CQUFPQSxDQUFDLCtFQUFvQjtBQUMzQyxNQUFNSyxTQUFTTCxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNTSxVQUFVTixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNTyxvQkFBb0JQLG1CQUFPQSxDQUFDLHFGQUFtQjtBQUNyRCxjQUFjLEdBQ2QsTUFBTVEsVUFBVUMsT0FBTztBQUN2QixjQUFjLEdBQ2QsTUFBTUMsZUFBZUQsT0FBTztBQUM1QixjQUFjLEdBQ2QsTUFBTUUsZ0JBQWdCRixPQUFPO0FBQzdCLHFDQUFxQyxHQUNyQ2QsYUFBYSxHQUFHO0lBQ1o7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRCxZQUFZLEdBQ1osTUFBTUUsbUJBQW1CVSxrQkFBa0JLLGNBQWM7SUFDckQsY0FBYyxHQUNkQyxZQUFZQyxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxDQUFDLENBQUMsRUFBRUMsVUFBVSxDQUFDLENBQUMsQ0FBRTtRQUN0RCxLQUFLLENBQUNILFFBQVFDLFdBQVdFO1FBQ3pCLElBQUksQ0FBQ1QsUUFBUSxHQUFHUTtRQUNoQixJQUFJLENBQUNMLGNBQWMsR0FBR007UUFDdEIsSUFBSUEsUUFBUUMsSUFBSSxJQUFJLE1BQU07WUFDdEIsSUFBSSxDQUFDUCxjQUFjLENB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O1FBQy9DO1FBQ0EsSUFBSSxPQUFPMUUsVUFBVSxVQUFVO1lBQzNCLE1BQU0sSUFBSUssUUFBUWdELHlCQUF5QixDQUFDO1FBQ2hEO1FBQ0EsSUFBSSxDQUFDdEMsY0FBYyxDQUFDNkIsS0FBSyxHQUFHNUM7UUFDNUIsT0FBTyxJQUFJO0lBQ2Y7SUFDQTs7OztLQUlDLEdBQ0Q4RSxLQUFLOUUsS0FBSyxFQUFFO1FBQ1AsSUFBR1csa0JBQWtCOEMsbUJBQW1CLEVBQUUsSUFBSTtRQUMvQyxJQUFJLElBQUksQ0FBQzFDLGNBQWMsQ0FBQzBELFFBQVEsRUFBRTtZQUM5QixNQUFNLElBQUlwRSxRQUFRcUUsd0JBQXdCLENBQUM7UUFDL0M7UUFDQSxJQUFJLE9BQU8xRSxVQUFVLFVBQVU7WUFDM0IsTUFBTSxJQUFJSyxRQUFRZ0QseUJBQXlCLENBQUM7UUFDaEQ7UUFDQSxJQUFJLENBQUN0QyxjQUFjLENBQUMrRCxJQUFJLEdBQUc5RTtRQUMzQixPQUFPLElBQUk7SUFDZjtBQUNKO0FBQ0FELGtCQUFrQixHQUFHRSxZQUNyQix1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2N1cnNvci9maW5kX2N1cnNvci5qcz9iY2ZhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GaW5kQ3Vyc29yID0gZXhwb3J0cy5GTEFHUyA9IHZvaWQgMDtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuLi9ic29uXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IGNvdW50XzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9jb3VudFwiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvblwiKTtcbmNvbnN0IGZpbmRfMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2ZpbmRcIik7XG5jb25zdCBzb3J0XzEgPSByZXF1aXJlKFwiLi4vc29ydFwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBhYnN0cmFjdF9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2Fic3RyYWN0X2N1cnNvclwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtGaWx0ZXIgPSBTeW1ib2woJ2ZpbHRlcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga051bVJldHVybmVkID0gU3ltYm9sKCdudW1SZXR1cm5lZCcpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga0J1aWx0T3B0aW9ucyA9IFN5bWJvbCgnYnVpbHRPcHRpb25zJyk7XG4vKiogQHB1YmxpYyBGbGFncyBhbGxvd2VkIGZvciBjdXJzb3IgKi9cbmV4cG9ydHMuRkxBR1MgPSBbXG4gICAgJ3RhaWxhYmxlJyxcbiAgICAnb3Bsb2dSZXBsYXknLFxuICAgICdub0N1cnNvclRpbWVvdXQnLFxuICAgICdhd2FpdERhdGEnLFxuICAgICdleGhhdXN0JyxcbiAgICAncGFydGlhbCdcbl07XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgRmluZEN1cnNvciBleHRlbmRzIGFic3RyYWN0X2N1cnNvcl8xLkFic3RyYWN0Q3Vyc29yIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoY2xpZW50LCBuYW1lc3BhY2UsIGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoY2xpZW50LCBuYW1lc3BhY2UsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzW2tGaWx0ZXJdID0gZmlsdGVyO1xuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdID0gb3B0aW9ucztcbiAgICAgICAgaWYgKG9wdGlvbnMuc29ydCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNvcnQgPSAoMCwgc29ydF8xLmZvcm1hdFNvcnQpKG9wdGlvbnMuc29ydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IGNsb25lZE9wdGlvbnMgPSAoMCwgdXRpbHNfMS5tZXJnZU9wdGlvbnMpKHt9LCB0aGlzW2tCdWlsdE9wdGlvbnNdKTtcbiAgICAgICAgZGVsZXRlIGNsb25lZE9wdGlvbnMuc2Vzc2lvbjtcbiAgICAgICAgcmV0dXJuIG5ldyBGaW5kQ3Vyc29yKHRoaXMuY2xpZW50LCB0aGlzLm5hbWVzcGFjZSwgdGhpc1trRmlsdGVyXSwge1xuICAgICAgICAgICAgLi4uY2xvbmVkT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWFwKHRyYW5zZm9ybSkge1xuICAgICAgICByZXR1cm4gc3VwZXIubWFwKHRyYW5zZm9ybSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBhc3luYyBfaW5pdGlhbGl6ZShzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IGZpbmRPcGVyYXRpb24gPSBuZXcgZmluZF8xLkZpbmRPcGVyYXRpb24odW5kZWZpbmVkLCB0aGlzLm5hbWVzcGFjZSwgdGhpc1trRmlsdGVyXSwge1xuICAgICAgICAgICAgLi4udGhpc1trQnVpbHRPcHRpb25zXSxcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIGZpbmRPcGVyYXRpb24pO1xuICAgICAgICAvLyB0aGUgcmVzcG9uc2UgaXMgbm90IGEgY3Vyc29yIHdoZW4gYGV4cGxhaW5gIGlzIGVuYWJsZWRcbiAgICAgICAgdGhpc1trTnVtUmV0dXJuZWRdID0gcmVzcG9uc2UuY3Vyc29yPy5maXJzdEJhdGNoPy5sZW5ndGg7XG4gICAgICAgIC8vIFRPRE86IE5PREUtMjg4MlxuICAgICAgICByZXR1cm4geyBzZXJ2ZXI6IGZpbmRPcGVyYXRpb24uc2VydmVyLCBzZXNzaW9uLCByZXNwb25zZSB9O1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgYXN5bmMgZ2V0TW9yZShiYXRjaFNpemUpIHtcbiAgICAgICAgY29uc3QgbnVtUmV0dXJuZWQgPSB0aGlzW2tOdW1SZXR1cm5lZF07XG4gICAgICAgIGlmIChudW1SZXR1cm5lZCkge1xuICAgICAgICAgICAgLy8gVE9ETyhEUklWRVJTLTE0NDgpOiBSZW1vdmUgbG9naWMgdG8gZW5mb3JjZSBgbGltaXRgIGluIHRoZSBkcml2ZXJcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0ID0gdGhpc1trQnVpbHRPcHRpb25zXS5saW1pdDtcbiAgICAgICAgICAgIGJhdGNoU2l6ZSA9XG4gICAgICAgICAgICAgICAgbGltaXQgJiYgbGltaXQgPiAwICYmIG51bVJldHVybmVkICsgYmF0Y2hTaXplID4gbGltaXQgPyBsaW1pdCAtIG51bVJldHVybmVkIDogYmF0Y2hTaXplO1xuICAgICAgICAgICAgaWYgKGJhdGNoU2l6ZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhbiBvcHRpbWl6YXRpb24gZm9yIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYSBsaW1pdCBmb3IgYSBmaW5kIGNvbW1hbmQgdG8gYXZvaWQgYW5cbiAgICAgICAgICAgICAgICAvLyBleHRyYSBnZXRNb3JlIHdoZW4gdGhlIGxpbWl0IGhhcyBiZWVuIHJlYWNoZWQgYW5kIHRoZSBsaW1pdCBpcyBhIG11bHRpcGxlIG9mIHRoZSBiYXRjaFNpemUuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGNvbnNlcXVlbmNlIG9mIHRoZSBuZXcgcXVlcnkgZW5naW5lIGluIDUuMCBoYXZpbmcgbm8ga25vd2xlZGdlIG9mIHRoZSBsaW1pdCBhcyBpdFxuICAgICAgICAgICAgICAgIC8vIHByb2R1Y2VzIHJlc3VsdHMgZm9yIHRoZSBmaW5kIGNvbW1hbmQuICBPbmNlIGEgYmF0Y2ggaXMgZmlsbGVkIHVwLCBpdCBpcyByZXR1cm5lZCBhbmQgb25seVxuICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBzdWJzZXF1ZW50IGdldE1vcmUgd2lsbCB0aGUgcXVlcnkgZnJhbWV3b3JrIGNvbnNpZGVyIHRoZSBsaW1pdCwgZGV0ZXJtaW5lIHRoZSBjdXJzb3JcbiAgICAgICAgICAgICAgICAvLyBpcyBleGhhdXN0ZWQgYW5kIHJldHVybiBhIGN1cnNvcklkIG9mIHplcm8uXG4gICAgICAgICAgICAgICAgLy8gaW5zdGVhZCwgaWYgd2UgZGV0ZXJtaW5lIHRoZXJlIGFyZSBubyBtb3JlIGRvY3VtZW50cyB0byByZXF1ZXN0IGZyb20gdGhlIHNlcnZlciwgd2UgcHJlZW1wdGl2ZWx5XG4gICAgICAgICAgICAgICAgLy8gY2xvc2UgdGhlIGN1cnNvclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xvc2UoKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBjdXJzb3I6IHsgaWQ6IGJzb25fMS5Mb25nLlpFUk8sIG5leHRCYXRjaDogW10gfSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXIuZ2V0TW9yZShiYXRjaFNpemUpO1xuICAgICAgICAvLyBUT0RPOiB3cmFwIHRoaXMgaW4gc29tZSBsb2dpYyB0byBwcmV2ZW50IGl0IGZyb20gaGFwcGVuaW5nIGlmIHdlIGRvbid0IG5lZWQgdGhpcyBzdXBwb3J0XG4gICAgICAgIGlmIChyZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpc1trTnVtUmV0dXJuZWRdID0gdGhpc1trTnVtUmV0dXJuZWRdICsgcmVzcG9uc2UuY3Vyc29yLm5leHRCYXRjaC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvdW50IG9mIGRvY3VtZW50cyBmb3IgdGhpcyBjdXJzb3JcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYGNvbGxlY3Rpb24uZXN0aW1hdGVkRG9jdW1lbnRDb3VudGAgb3IgYGNvbGxlY3Rpb24uY291bnREb2N1bWVudHNgIGluc3RlYWRcbiAgICAgKi9cbiAgICBhc3luYyBjb3VudChvcHRpb25zKSB7XG4gICAgICAgICgwLCB1dGlsc18xLmVtaXRXYXJuaW5nT25jZSkoJ2N1cnNvci5jb3VudCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiwgcGxlYXNlIHVzZSBgY29sbGVjdGlvbi5lc3RpbWF0ZWREb2N1bWVudENvdW50YCBvciBgY29sbGVjdGlvbi5jb3VudERvY3VtZW50c2AgaW5zdGVhZCAnKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0ludmFsaWQgZmlyc3QgcGFyYW1ldGVyIHRvIGNvdW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgY291bnRfMS5Db3VudE9wZXJhdGlvbih0aGlzLm5hbWVzcGFjZSwgdGhpc1trRmlsdGVyXSwge1xuICAgICAgICAgICAgLi4udGhpc1trQnVpbHRPcHRpb25zXSxcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKiogRXhlY3V0ZSB0aGUgZXhwbGFpbiBmb3IgdGhlIGN1cnNvciAqL1xuICAgIGFzeW5jIGV4cGxhaW4odmVyYm9zaXR5KSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGZpbmRfMS5GaW5kT3BlcmF0aW9uKHVuZGVmaW5lZCwgdGhpcy5uYW1lc3BhY2UsIHRoaXNba0ZpbHRlcl0sIHtcbiAgICAgICAgICAgIC4uLnRoaXNba0J1aWx0T3B0aW9uc10sXG4gICAgICAgICAgICAuLi50aGlzLmN1cnNvck9wdGlvbnMsXG4gICAgICAgICAgICBleHBsYWluOiB2ZXJib3NpdHkgPz8gdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBTZXQgdGhlIGN1cnNvciBxdWVyeSAqL1xuICAgIGZpbHRlcihmaWx0ZXIpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tGaWx0ZXJdID0gZmlsdGVyO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJzb3IgaGludFxuICAgICAqXG4gICAgICogQHBhcmFtIGhpbnQgLSBJZiBzcGVjaWZpZWQsIHRoZW4gdGhlIHF1ZXJ5IHN5c3RlbSB3aWxsIG9ubHkgY29uc2lkZXIgcGxhbnMgdXNpbmcgdGhlIGhpbnRlZCBpbmRleC5cbiAgICAgKi9cbiAgICBoaW50KGhpbnQpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLmhpbnQgPSBoaW50O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJzb3IgbWluXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWluIC0gU3BlY2lmeSBhICRtaW4gdmFsdWUgdG8gc3BlY2lmeSB0aGUgaW5jbHVzaXZlIGxvd2VyIGJvdW5kIGZvciBhIHNwZWNpZmljIGluZGV4IGluIG9yZGVyIHRvIGNvbnN0cmFpbiB0aGUgcmVzdWx0cyBvZiBmaW5kKCkuIFRoZSAkbWluIHNwZWNpZmllcyB0aGUgbG93ZXIgYm91bmQgZm9yIGFsbCBrZXlzIG9mIGEgc3BlY2lmaWMgaW5kZXggaW4gb3JkZXIuXG4gICAgICovXG4gICAgbWluKG1pbikge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10ubWluID0gbWluO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJzb3IgbWF4XG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWF4IC0gU3BlY2lmeSBhICRtYXggdmFsdWUgdG8gc3BlY2lmeSB0aGUgZXhjbHVzaXZlIHVwcGVyIGJvdW5kIGZvciBhIHNwZWNpZmljIGluZGV4IGluIG9yZGVyIHRvIGNvbnN0cmFpbiB0aGUgcmVzdWx0cyBvZiBmaW5kKCkuIFRoZSAkbWF4IHNwZWNpZmllcyB0aGUgdXBwZXIgYm91bmQgZm9yIGFsbCBrZXlzIG9mIGEgc3BlY2lmaWMgaW5kZXggaW4gb3JkZXIuXG4gICAgICovXG4gICAgbWF4KG1heCkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10ubWF4ID0gbWF4O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJzb3IgcmV0dXJuS2V5LlxuICAgICAqIElmIHNldCB0byB0cnVlLCBtb2RpZmllcyB0aGUgY3Vyc29yIHRvIG9ubHkgcmV0dXJuIHRoZSBpbmRleCBmaWVsZCBvciBmaWVsZHMgZm9yIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeSwgcmF0aGVyIHRoYW4gZG9jdW1lbnRzLlxuICAgICAqIElmIHNldCB0byB0cnVlIGFuZCB0aGUgcXVlcnkgZG9lcyBub3QgdXNlIGFuIGluZGV4IHRvIHBlcmZvcm0gdGhlIHJlYWQgb3BlcmF0aW9uLCB0aGUgcmV0dXJuZWQgZG9jdW1lbnRzIHdpbGwgbm90IGNvbnRhaW4gYW55IGZpZWxkcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIHRoZSByZXR1cm5LZXkgdmFsdWUuXG4gICAgICovXG4gICAgcmV0dXJuS2V5KHZhbHVlKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5yZXR1cm5LZXkgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIHRoZSBvdXRwdXQgb2YgYSBxdWVyeSBieSBhZGRpbmcgYSBmaWVsZCAkcmVjb3JkSWQgdG8gbWF0Y2hpbmcgZG9jdW1lbnRzLiAkcmVjb3JkSWQgaXMgdGhlIGludGVybmFsIGtleSB3aGljaCB1bmlxdWVseSBpZGVudGlmaWVzIGEgZG9jdW1lbnQgaW4gYSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlICRzaG93RGlza0xvYyBvcHRpb24gaGFzIG5vdyBiZWVuIGRlcHJlY2F0ZWQgYW5kIHJlcGxhY2VkIHdpdGggdGhlIHNob3dSZWNvcmRJZCBmaWVsZC4gJHNob3dEaXNrTG9jIHdpbGwgc3RpbGwgYmUgYWNjZXB0ZWQgZm9yIE9QX1FVRVJZIHN0eWUgZmluZC5cbiAgICAgKi9cbiAgICBzaG93UmVjb3JkSWQodmFsdWUpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNob3dSZWNvcmRJZCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcXVlcnkgbW9kaWZpZXIgdG8gdGhlIGN1cnNvciBxdWVyeVxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgLSBUaGUgcXVlcnkgbW9kaWZpZXIgKG11c3Qgc3RhcnQgd2l0aCAkLCBzdWNoIGFzICRvcmRlcmJ5IGV0YylcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgbW9kaWZpZXIgdmFsdWUuXG4gICAgICovXG4gICAgYWRkUXVlcnlNb2RpZmllcihuYW1lLCB2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIGlmIChuYW1lWzBdICE9PSAnJCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYCR7bmFtZX0gaXMgbm90IGEgdmFsaWQgcXVlcnkgbW9kaWZpZXJgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTdHJpcCBvZiB0aGUgJFxuICAgICAgICBjb25zdCBmaWVsZCA9IG5hbWUuc3Vic3RyKDEpO1xuICAgICAgICAvLyBOT1RFOiBjb25zaWRlciBzb21lIFRTIG1hZ2ljIGZvciB0aGlzXG4gICAgICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAgICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uY29tbWVudCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZXhwbGFpbic6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5leHBsYWluID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdoaW50JzpcbiAgICAgICAgICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLmhpbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5tYXggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heFRpbWVNUyc6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5tYXhUaW1lTVMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5taW4gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ29yZGVyYnknOlxuICAgICAgICAgICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uc29ydCA9ICgwLCBzb3J0XzEuZm9ybWF0U29ydCkodmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncXVlcnknOlxuICAgICAgICAgICAgICAgIHRoaXNba0ZpbHRlcl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3JldHVybktleSc6XG4gICAgICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5yZXR1cm5LZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Nob3dEaXNrTG9jJzpcbiAgICAgICAgICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNob3dSZWNvcmRJZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBJbnZhbGlkIHF1ZXJ5IG1vZGlmaWVyOiAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIGNvbW1lbnQgdG8gdGhlIGN1cnNvciBxdWVyeSBhbGxvd2luZyBmb3IgdHJhY2tpbmcgdGhlIGNvbW1lbnQgaW4gdGhlIGxvZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBjb21tZW50IGF0dGFjaGVkIHRvIHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgY29tbWVudCh2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uY29tbWVudCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGEgbWF4QXdhaXRUaW1lTVMgb24gYSB0YWlsaW5nIGN1cnNvciBxdWVyeSB0byBhbGxvdyB0byBjdXN0b21pemUgdGhlIHRpbWVvdXQgdmFsdWUgZm9yIHRoZSBvcHRpb24gYXdhaXREYXRhIChPbmx5IHN1cHBvcnRlZCBvbiBNb25nb0RCIDMuMiBvciBoaWdoZXIsIGlnbm9yZWQgb3RoZXJ3aXNlKVxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBhYm9ydGluZyB0aGUgdGFpbGVkIHF1ZXJ5LlxuICAgICAqL1xuICAgIG1heEF3YWl0VGltZU1TKHZhbHVlKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IGZvciBtYXhBd2FpdFRpbWVNUyBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5tYXhBd2FpdFRpbWVNUyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IGEgbWF4VGltZU1TIG9uIHRoZSBjdXJzb3IgcXVlcnksIGFsbG93aW5nIGZvciBoYXJkIHRpbWVvdXQgbGltaXRzIG9uIHF1ZXJpZXMgKE9ubHkgc3VwcG9ydGVkIG9uIE1vbmdvREIgMi42IG9yIGhpZ2hlcilcbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIE51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgYWJvcnRpbmcgdGhlIHF1ZXJ5LlxuICAgICAqL1xuICAgIG1heFRpbWVNUyh2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBcmd1bWVudCBmb3IgbWF4VGltZU1TIG11c3QgYmUgYSBudW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLm1heFRpbWVNUyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvamVjdCBzdGFnZSB0byB0aGUgYWdncmVnYXRpb24gcGlwZWxpbmVcbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogSW4gb3JkZXIgdG8gc3RyaWN0bHkgdHlwZSB0aGlzIGZ1bmN0aW9uIHlvdSBtdXN0IHByb3ZpZGUgYW4gaW50ZXJmYWNlXG4gICAgICogdGhhdCByZXByZXNlbnRzIHRoZSBlZmZlY3Qgb2YgeW91ciBwcm9qZWN0aW9uIG9uIHRoZSByZXN1bHQgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBjaGFpbmluZyBhIHByb2plY3Rpb24gdG8geW91ciBjdXJzb3IgY2hhbmdlcyB0aGUgcmV0dXJuZWQgdHlwZSB0byB0aGUgZ2VuZXJpY1xuICAgICAqIHtAbGluayBEb2N1bWVudH0gdHlwZS5cbiAgICAgKiBZb3Ugc2hvdWxkIHNwZWNpZnkgYSBwYXJhbWV0ZXJpemVkIHR5cGUgdG8gaGF2ZSBhc3NlcnRpb25zIG9uIHlvdXIgZmluYWwgcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIC8vIEJlc3Qgd2F5XG4gICAgICogY29uc3QgZG9jczogRmluZEN1cnNvcjx7IGE6IG51bWJlciB9PiA9IGN1cnNvci5wcm9qZWN0PHsgYTogbnVtYmVyIH0+KHsgX2lkOiAwLCBhOiB0cnVlIH0pO1xuICAgICAqIC8vIEZsZXhpYmxlIHdheVxuICAgICAqIGNvbnN0IGRvY3M6IEZpbmRDdXJzb3I8RG9jdW1lbnQ+ID0gY3Vyc29yLnByb2plY3QoeyBfaWQ6IDAsIGE6IHRydWUgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqXG4gICAgICogKipOb3RlIGZvciBUeXBlc2NyaXB0IFVzZXJzOioqIGFkZGluZyBhIHRyYW5zZm9ybSBjaGFuZ2VzIHRoZSByZXR1cm4gdHlwZSBvZiB0aGUgaXRlcmF0aW9uIG9mIHRoaXMgY3Vyc29yLFxuICAgICAqIGl0ICoqZG9lcyBub3QqKiByZXR1cm4gYSBuZXcgaW5zdGFuY2Ugb2YgYSBjdXJzb3IuIFRoaXMgbWVhbnMgd2hlbiBjYWxsaW5nIHByb2plY3QsXG4gICAgICogeW91IHNob3VsZCBhbHdheXMgYXNzaWduIHRoZSByZXN1bHQgdG8gYSBuZXcgdmFyaWFibGUgaW4gb3JkZXIgdG8gZ2V0IGEgY29ycmVjdGx5IHR5cGVkIGN1cnNvciB2YXJpYWJsZS5cbiAgICAgKiBUYWtlIG5vdGUgb2YgdGhlIGZvbGxvd2luZyBleGFtcGxlOlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogY29uc3QgY3Vyc29yOiBGaW5kQ3Vyc29yPHsgYTogbnVtYmVyOyBiOiBzdHJpbmcgfT4gPSBjb2xsLmZpbmQoKTtcbiAgICAgKiBjb25zdCBwcm9qZWN0Q3Vyc29yID0gY3Vyc29yLnByb2plY3Q8eyBhOiBudW1iZXIgfT4oeyBfaWQ6IDAsIGE6IHRydWUgfSk7XG4gICAgICogY29uc3QgYVByb3BPbmx5QXJyYXk6IHthOiBudW1iZXJ9W10gPSBhd2FpdCBwcm9qZWN0Q3Vyc29yLnRvQXJyYXkoKTtcbiAgICAgKlxuICAgICAqIC8vIG9yIGFsd2F5cyB1c2UgY2hhaW5pbmcgYW5kIHNhdmUgdGhlIGZpbmFsIGN1cnNvclxuICAgICAqXG4gICAgICogY29uc3QgY3Vyc29yID0gY29sbC5maW5kKCkucHJvamVjdDx7IGE6IHN0cmluZyB9Pih7XG4gICAgICogICBfaWQ6IDAsXG4gICAgICogICBhOiB7ICRjb252ZXJ0OiB7IGlucHV0OiAnJGEnLCB0bzogJ3N0cmluZycgfVxuICAgICAqIH19KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBwcm9qZWN0KHZhbHVlKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5wcm9qZWN0aW9uID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzb3J0IG9yZGVyIG9mIHRoZSBjdXJzb3IgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc29ydCAtIFRoZSBrZXkgb3Iga2V5cyBzZXQgZm9yIHRoZSBzb3J0LlxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24gLSBUaGUgZGlyZWN0aW9uIG9mIHRoZSBzb3J0aW5nICgxIG9yIC0xKS5cbiAgICAgKi9cbiAgICBzb3J0KHNvcnQsIGRpcmVjdGlvbikge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIGlmICh0aGlzW2tCdWlsdE9wdGlvbnNdLnRhaWxhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IoJ1RhaWxhYmxlIGN1cnNvciBkb2VzIG5vdCBzdXBwb3J0IHNvcnRpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNvcnQgPSAoMCwgc29ydF8xLmZvcm1hdFNvcnQpKHNvcnQsIGRpcmVjdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGxvd3MgZGlzayB1c2UgZm9yIGJsb2NraW5nIHNvcnQgb3BlcmF0aW9ucyBleGNlZWRpbmcgMTAwTUIgbWVtb3J5LiAoTW9uZ29EQiAzLjIgb3IgaGlnaGVyKVxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL2NvbW1hbmQvZmluZC8jZmluZC1jbWQtYWxsb3dkaXNrdXNlIHwgZmluZCBjb21tYW5kIGFsbG93RGlza1VzZSBkb2N1bWVudGF0aW9ufVxuICAgICAqL1xuICAgIGFsbG93RGlza1VzZShhbGxvdyA9IHRydWUpIHtcbiAgICAgICAgKDAsIGFic3RyYWN0X2N1cnNvcl8xLmFzc2VydFVuaW5pdGlhbGl6ZWQpKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXNba0J1aWx0T3B0aW9uc10uc29ydCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3B0aW9uIFwiYWxsb3dEaXNrVXNlXCIgcmVxdWlyZXMgYSBzb3J0IHNwZWNpZmljYXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBcyBvZiA2LjAgdGhlIGRlZmF1bHQgaXMgdHJ1ZS4gVGhpcyBhbGxvd3MgdXNlcnMgdG8gZ2V0IGJhY2sgdG8gdGhlIG9sZCBiZWhhdmlvci5cbiAgICAgICAgaWYgKCFhbGxvdykge1xuICAgICAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5hbGxvd0Rpc2tVc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uYWxsb3dEaXNrVXNlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29sbGF0aW9uIG9wdGlvbnMgZm9yIHRoZSBjdXJzb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgY3Vyc29yIGNvbGxhdGlvbiBvcHRpb25zIChNb25nb0RCIDMuNCBvciBoaWdoZXIpIHNldHRpbmdzIGZvciB1cGRhdGUgb3BlcmF0aW9uIChzZWUgMy40IGRvY3VtZW50YXRpb24gZm9yIGF2YWlsYWJsZSBmaWVsZHMpLlxuICAgICAqL1xuICAgIGNvbGxhdGlvbih2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIHRoaXNba0J1aWx0T3B0aW9uc10uY29sbGF0aW9uID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpbWl0IGZvciB0aGUgY3Vyc29yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIGxpbWl0IGZvciB0aGUgY3Vyc29yIHF1ZXJ5LlxuICAgICAqL1xuICAgIGxpbWl0KHZhbHVlKSB7XG4gICAgICAgICgwLCBhYnN0cmFjdF9jdXJzb3JfMS5hc3NlcnRVbmluaXRpYWxpemVkKSh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXNba0J1aWx0T3B0aW9uc10udGFpbGFibGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVGFpbGFibGVDdXJzb3JFcnJvcignVGFpbGFibGUgY3Vyc29yIGRvZXMgbm90IHN1cHBvcnQgbGltaXQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3BlcmF0aW9uIFwibGltaXRcIiByZXF1aXJlcyBhbiBpbnRlZ2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trQnVpbHRPcHRpb25zXS5saW1pdCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBza2lwIGZvciB0aGUgY3Vyc29yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHNraXAgZm9yIHRoZSBjdXJzb3IgcXVlcnkuXG4gICAgICovXG4gICAgc2tpcCh2YWx1ZSkge1xuICAgICAgICAoMCwgYWJzdHJhY3RfY3Vyc29yXzEuYXNzZXJ0VW5pbml0aWFsaXplZCkodGhpcyk7XG4gICAgICAgIGlmICh0aGlzW2tCdWlsdE9wdGlvbnNdLnRhaWxhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IoJ1RhaWxhYmxlIGN1cnNvciBkb2VzIG5vdCBzdXBwb3J0IHNraXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3BlcmF0aW9uIFwic2tpcFwiIHJlcXVpcmVzIGFuIGludGVnZXInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tCdWlsdE9wdGlvbnNdLnNraXAgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0cy5GaW5kQ3Vyc29yID0gRmluZEN1cnNvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmRfY3Vyc29yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkZpbmRDdXJzb3IiLCJGTEFHUyIsImJzb25fMSIsInJlcXVpcmUiLCJlcnJvcl8xIiwiY291bnRfMSIsImV4ZWN1dGVfb3BlcmF0aW9uXzEiLCJmaW5kXzEiLCJzb3J0XzEiLCJ1dGlsc18xIiwiYWJzdHJhY3RfY3Vyc29yXzEiLCJrRmlsdGVyIiwiU3ltYm9sIiwia051bVJldHVybmVkIiwia0J1aWx0T3B0aW9ucyIsIkFic3RyYWN0Q3Vyc29yIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJuYW1lc3BhY2UiLCJmaWx0ZXIiLCJvcHRpb25zIiwic29ydCIsImZvcm1hdFNvcnQiLCJjbG9uZSIsImNsb25lZE9wdGlvbnMiLCJtZXJnZU9wdGlvbnMiLCJzZXNzaW9uIiwibWFwIiwidHJhbnNmb3JtIiwiX2luaXRpYWxpemUiLCJmaW5kT3BlcmF0aW9uIiwiRmluZE9wZXJhdGlvbiIsInVuZGVmaW5lZCIsImN1cnNvck9wdGlvbnMiLCJyZXNwb25zZSIsImV4ZWN1dGVPcGVyYXRpb24iLCJjdXJzb3IiLCJmaXJzdEJhdGNoIiwibGVuZ3RoIiwic2VydmVyIiwiZ2V0TW9yZSIsImJhdGNoU2l6ZSIsIm51bVJldHVybmVkIiwibGltaXQiLCJjbG9zZSIsImNhdGNoIiwiaWQiLCJMb25nIiwiWkVSTyIsIm5leHRCYXRjaCIsImNvdW50IiwiZW1pdFdhcm5pbmdPbmNlIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsIkNvdW50T3BlcmF0aW9uIiwiZXhwbGFpbiIsInZlcmJvc2l0eSIsImFzc2VydFVuaW5pdGlhbGl6ZWQiLCJoaW50IiwibWluIiwibWF4IiwicmV0dXJuS2V5Iiwic2hvd1JlY29yZElkIiwiYWRkUXVlcnlNb2RpZmllciIsIm5hbWUiLCJmaWVsZCIsInN1YnN0ciIsImNvbW1lbnQiLCJtYXhUaW1lTVMiLCJtYXhBd2FpdFRpbWVNUyIsInByb2plY3QiLCJwcm9qZWN0aW9uIiwiZGlyZWN0aW9uIiwidGFpbGFibGUiLCJNb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IiLCJhbGxvd0Rpc2tVc2UiLCJhbGxvdyIsImNvbGxhdGlvbiIsInNraXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/find_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/list_collections_cursor.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/list_collections_cursor.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListCollectionsCursor = void 0;\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst list_collections_1 = __webpack_require__(/*! ../operations/list_collections */ \"(ssr)/./node_modules/mongodb/lib/operations/list_collections.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @public */ class ListCollectionsCursor extends abstract_cursor_1.AbstractCursor {\n    constructor(db, filter, options){\n        super(db.client, db.s.namespace, options);\n        this.parent = db;\n        this.filter = filter;\n        this.options = options;\n    }\n    clone() {\n        return new ListCollectionsCursor(this.parent, this.filter, {\n            ...this.options,\n            ...this.cursorOptions\n        });\n    }\n    /** @internal */ async _initialize(session) {\n        const operation = new list_collections_1.ListCollectionsOperation(this.parent, this.filter, {\n            ...this.cursorOptions,\n            ...this.options,\n            session\n        });\n        const response = await (0, execute_operation_1.executeOperation)(this.parent.client, operation);\n        // TODO: NODE-2882\n        return {\n            server: operation.server,\n            session,\n            response\n        };\n    }\n}\nexports.ListCollectionsCursor = ListCollectionsCursor; //# sourceMappingURL=list_collections_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3RfY29sbGVjdGlvbnNfY3Vyc29yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw2QkFBNkIsR0FBRyxLQUFLO0FBQ3JDLE1BQU1HLHNCQUFzQkMsbUJBQU9BLENBQUMseUdBQWlDO0FBQ3JFLE1BQU1DLHFCQUFxQkQsbUJBQU9BLENBQUMsdUdBQWdDO0FBQ25FLE1BQU1FLG9CQUFvQkYsbUJBQU9BLENBQUMscUZBQW1CO0FBQ3JELFlBQVksR0FDWixNQUFNRiw4QkFBOEJJLGtCQUFrQkMsY0FBYztJQUNoRUMsWUFBWUMsRUFBRSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUM3QixLQUFLLENBQUNGLEdBQUdHLE1BQU0sRUFBRUgsR0FBR0ksQ0FBQyxDQUFDQyxTQUFTLEVBQUVIO1FBQ2pDLElBQUksQ0FBQ0ksTUFBTSxHQUFHTjtRQUNkLElBQUksQ0FBQ0MsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtJQUNuQjtJQUNBSyxRQUFRO1FBQ0osT0FBTyxJQUFJZCxzQkFBc0IsSUFBSSxDQUFDYSxNQUFNLEVBQUUsSUFBSSxDQUFDTCxNQUFNLEVBQUU7WUFDdkQsR0FBRyxJQUFJLENBQUNDLE9BQU87WUFDZixHQUFHLElBQUksQ0FBQ00sYUFBYTtRQUN6QjtJQUNKO0lBQ0EsY0FBYyxHQUNkLE1BQU1DLFlBQVlDLE9BQU8sRUFBRTtRQUN2QixNQUFNQyxZQUFZLElBQUlmLG1CQUFtQmdCLHdCQUF3QixDQUFDLElBQUksQ0FBQ04sTUFBTSxFQUFFLElBQUksQ0FBQ0wsTUFBTSxFQUFFO1lBQ3hGLEdBQUcsSUFBSSxDQUFDTyxhQUFhO1lBQ3JCLEdBQUcsSUFBSSxDQUFDTixPQUFPO1lBQ2ZRO1FBQ0o7UUFDQSxNQUFNRyxXQUFXLE1BQU0sQ0FBQyxHQUFHbkIsb0JBQW9Cb0IsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDUixNQUFNLENBQUNILE1BQU0sRUFBRVE7UUFDckYsa0JBQWtCO1FBQ2xCLE9BQU87WUFBRUksUUFBUUosVUFBVUksTUFBTTtZQUFFTDtZQUFTRztRQUFTO0lBQ3pEO0FBQ0o7QUFDQXRCLDZCQUE2QixHQUFHRSx1QkFDaEMsbURBQW1EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9jdXJzb3IvbGlzdF9jb2xsZWN0aW9uc19jdXJzb3IuanM/MDdhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTGlzdENvbGxlY3Rpb25zQ3Vyc29yID0gdm9pZCAwO1xuY29uc3QgZXhlY3V0ZV9vcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25zL2V4ZWN1dGVfb3BlcmF0aW9uXCIpO1xuY29uc3QgbGlzdF9jb2xsZWN0aW9uc18xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvbGlzdF9jb2xsZWN0aW9uc1wiKTtcbmNvbnN0IGFic3RyYWN0X2N1cnNvcl8xID0gcmVxdWlyZShcIi4vYWJzdHJhY3RfY3Vyc29yXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmNsYXNzIExpc3RDb2xsZWN0aW9uc0N1cnNvciBleHRlbmRzIGFic3RyYWN0X2N1cnNvcl8xLkFic3RyYWN0Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGRiLmNsaWVudCwgZGIucy5uYW1lc3BhY2UsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IGRiO1xuICAgICAgICB0aGlzLmZpbHRlciA9IGZpbHRlcjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGlzdENvbGxlY3Rpb25zQ3Vyc29yKHRoaXMucGFyZW50LCB0aGlzLmZpbHRlciwge1xuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgLi4udGhpcy5jdXJzb3JPcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgYXN5bmMgX2luaXRpYWxpemUoc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBuZXcgbGlzdF9jb2xsZWN0aW9uc18xLkxpc3RDb2xsZWN0aW9uc09wZXJhdGlvbih0aGlzLnBhcmVudCwgdGhpcy5maWx0ZXIsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5wYXJlbnQuY2xpZW50LCBvcGVyYXRpb24pO1xuICAgICAgICAvLyBUT0RPOiBOT0RFLTI4ODJcbiAgICAgICAgcmV0dXJuIHsgc2VydmVyOiBvcGVyYXRpb24uc2VydmVyLCBzZXNzaW9uLCByZXNwb25zZSB9O1xuICAgIH1cbn1cbmV4cG9ydHMuTGlzdENvbGxlY3Rpb25zQ3Vyc29yID0gTGlzdENvbGxlY3Rpb25zQ3Vyc29yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGlzdF9jb2xsZWN0aW9uc19jdXJzb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTGlzdENvbGxlY3Rpb25zQ3Vyc29yIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsInJlcXVpcmUiLCJsaXN0X2NvbGxlY3Rpb25zXzEiLCJhYnN0cmFjdF9jdXJzb3JfMSIsIkFic3RyYWN0Q3Vyc29yIiwiY29uc3RydWN0b3IiLCJkYiIsImZpbHRlciIsIm9wdGlvbnMiLCJjbGllbnQiLCJzIiwibmFtZXNwYWNlIiwicGFyZW50IiwiY2xvbmUiLCJjdXJzb3JPcHRpb25zIiwiX2luaXRpYWxpemUiLCJzZXNzaW9uIiwib3BlcmF0aW9uIiwiTGlzdENvbGxlY3Rpb25zT3BlcmF0aW9uIiwicmVzcG9uc2UiLCJleGVjdXRlT3BlcmF0aW9uIiwic2VydmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/list_collections_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/list_indexes_cursor.js":
/*!****************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/list_indexes_cursor.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListIndexesCursor = void 0;\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst indexes_1 = __webpack_require__(/*! ../operations/indexes */ \"(ssr)/./node_modules/mongodb/lib/operations/indexes.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @public */ class ListIndexesCursor extends abstract_cursor_1.AbstractCursor {\n    constructor(collection, options){\n        super(collection.client, collection.s.namespace, options);\n        this.parent = collection;\n        this.options = options;\n    }\n    clone() {\n        return new ListIndexesCursor(this.parent, {\n            ...this.options,\n            ...this.cursorOptions\n        });\n    }\n    /** @internal */ async _initialize(session) {\n        const operation = new indexes_1.ListIndexesOperation(this.parent, {\n            ...this.cursorOptions,\n            ...this.options,\n            session\n        });\n        const response = await (0, execute_operation_1.executeOperation)(this.parent.client, operation);\n        // TODO: NODE-2882\n        return {\n            server: operation.server,\n            session,\n            response\n        };\n    }\n}\nexports.ListIndexesCursor = ListIndexesCursor; //# sourceMappingURL=list_indexes_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3RfaW5kZXhlc19jdXJzb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHLEtBQUs7QUFDakMsTUFBTUcsc0JBQXNCQyxtQkFBT0EsQ0FBQyx5R0FBaUM7QUFDckUsTUFBTUMsWUFBWUQsbUJBQU9BLENBQUMscUZBQXVCO0FBQ2pELE1BQU1FLG9CQUFvQkYsbUJBQU9BLENBQUMscUZBQW1CO0FBQ3JELFlBQVksR0FDWixNQUFNRiwwQkFBMEJJLGtCQUFrQkMsY0FBYztJQUM1REMsWUFBWUMsVUFBVSxFQUFFQyxPQUFPLENBQUU7UUFDN0IsS0FBSyxDQUFDRCxXQUFXRSxNQUFNLEVBQUVGLFdBQVdHLENBQUMsQ0FBQ0MsU0FBUyxFQUFFSDtRQUNqRCxJQUFJLENBQUNJLE1BQU0sR0FBR0w7UUFDZCxJQUFJLENBQUNDLE9BQU8sR0FBR0E7SUFDbkI7SUFDQUssUUFBUTtRQUNKLE9BQU8sSUFBSWIsa0JBQWtCLElBQUksQ0FBQ1ksTUFBTSxFQUFFO1lBQ3RDLEdBQUcsSUFBSSxDQUFDSixPQUFPO1lBQ2YsR0FBRyxJQUFJLENBQUNNLGFBQWE7UUFDekI7SUFDSjtJQUNBLGNBQWMsR0FDZCxNQUFNQyxZQUFZQyxPQUFPLEVBQUU7UUFDdkIsTUFBTUMsWUFBWSxJQUFJZCxVQUFVZSxvQkFBb0IsQ0FBQyxJQUFJLENBQUNOLE1BQU0sRUFBRTtZQUM5RCxHQUFHLElBQUksQ0FBQ0UsYUFBYTtZQUNyQixHQUFHLElBQUksQ0FBQ04sT0FBTztZQUNmUTtRQUNKO1FBQ0EsTUFBTUcsV0FBVyxNQUFNLENBQUMsR0FBR2xCLG9CQUFvQm1CLGdCQUFnQixFQUFFLElBQUksQ0FBQ1IsTUFBTSxDQUFDSCxNQUFNLEVBQUVRO1FBQ3JGLGtCQUFrQjtRQUNsQixPQUFPO1lBQUVJLFFBQVFKLFVBQVVJLE1BQU07WUFBRUw7WUFBU0c7UUFBUztJQUN6RDtBQUNKO0FBQ0FyQix5QkFBeUIsR0FBR0UsbUJBQzVCLCtDQUErQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3RfaW5kZXhlc19jdXJzb3IuanM/ODk1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTGlzdEluZGV4ZXNDdXJzb3IgPSB2b2lkIDA7XG5jb25zdCBleGVjdXRlX29wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCBpbmRleGVzXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9ucy9pbmRleGVzXCIpO1xuY29uc3QgYWJzdHJhY3RfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9hYnN0cmFjdF9jdXJzb3JcIik7XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgTGlzdEluZGV4ZXNDdXJzb3IgZXh0ZW5kcyBhYnN0cmFjdF9jdXJzb3JfMS5BYnN0cmFjdEN1cnNvciB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLmNsaWVudCwgY29sbGVjdGlvbi5zLm5hbWVzcGFjZSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMucGFyZW50ID0gY29sbGVjdGlvbjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGlzdEluZGV4ZXNDdXJzb3IodGhpcy5wYXJlbnQsIHtcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIF9pbml0aWFsaXplKHNlc3Npb24pIHtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gbmV3IGluZGV4ZXNfMS5MaXN0SW5kZXhlc09wZXJhdGlvbih0aGlzLnBhcmVudCwge1xuICAgICAgICAgICAgLi4udGhpcy5jdXJzb3JPcHRpb25zLFxuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgc2Vzc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLnBhcmVudC5jbGllbnQsIG9wZXJhdGlvbik7XG4gICAgICAgIC8vIFRPRE86IE5PREUtMjg4MlxuICAgICAgICByZXR1cm4geyBzZXJ2ZXI6IG9wZXJhdGlvbi5zZXJ2ZXIsIHNlc3Npb24sIHJlc3BvbnNlIH07XG4gICAgfVxufVxuZXhwb3J0cy5MaXN0SW5kZXhlc0N1cnNvciA9IExpc3RJbmRleGVzQ3Vyc29yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGlzdF9pbmRleGVzX2N1cnNvci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJMaXN0SW5kZXhlc0N1cnNvciIsImV4ZWN1dGVfb3BlcmF0aW9uXzEiLCJyZXF1aXJlIiwiaW5kZXhlc18xIiwiYWJzdHJhY3RfY3Vyc29yXzEiLCJBYnN0cmFjdEN1cnNvciIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsIm9wdGlvbnMiLCJjbGllbnQiLCJzIiwibmFtZXNwYWNlIiwicGFyZW50IiwiY2xvbmUiLCJjdXJzb3JPcHRpb25zIiwiX2luaXRpYWxpemUiLCJzZXNzaW9uIiwib3BlcmF0aW9uIiwiTGlzdEluZGV4ZXNPcGVyYXRpb24iLCJyZXNwb25zZSIsImV4ZWN1dGVPcGVyYXRpb24iLCJzZXJ2ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/list_indexes_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/list_search_indexes_cursor.js":
/*!***********************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/list_search_indexes_cursor.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListSearchIndexesCursor = void 0;\nconst aggregation_cursor_1 = __webpack_require__(/*! ./aggregation_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\");\n/** @public */ class ListSearchIndexesCursor extends aggregation_cursor_1.AggregationCursor {\n    /** @internal */ constructor({ fullNamespace: ns, client }, name, options = {}){\n        const pipeline = name == null ? [\n            {\n                $listSearchIndexes: {}\n            }\n        ] : [\n            {\n                $listSearchIndexes: {\n                    name\n                }\n            }\n        ];\n        super(client, ns, pipeline, options);\n    }\n}\nexports.ListSearchIndexesCursor = ListSearchIndexesCursor; //# sourceMappingURL=list_search_indexes_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3Rfc2VhcmNoX2luZGV4ZXNfY3Vyc29yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwrQkFBK0IsR0FBRyxLQUFLO0FBQ3ZDLE1BQU1HLHVCQUF1QkMsbUJBQU9BLENBQUMsMkZBQXNCO0FBQzNELFlBQVksR0FDWixNQUFNRixnQ0FBZ0NDLHFCQUFxQkUsaUJBQWlCO0lBQ3hFLGNBQWMsR0FDZEMsWUFBWSxFQUFFQyxlQUFlQyxFQUFFLEVBQUVDLE1BQU0sRUFBRSxFQUFFQyxJQUFJLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDM0QsTUFBTUMsV0FBV0YsUUFBUSxPQUFPO1lBQUM7Z0JBQUVHLG9CQUFvQixDQUFDO1lBQUU7U0FBRSxHQUFHO1lBQUM7Z0JBQUVBLG9CQUFvQjtvQkFBRUg7Z0JBQUs7WUFBRTtTQUFFO1FBQ2pHLEtBQUssQ0FBQ0QsUUFBUUQsSUFBSUksVUFBVUQ7SUFDaEM7QUFDSjtBQUNBWCwrQkFBK0IsR0FBR0UseUJBQ2xDLHNEQUFzRCIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL2xpc3Rfc2VhcmNoX2luZGV4ZXNfY3Vyc29yLmpzPzQ4NDkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkxpc3RTZWFyY2hJbmRleGVzQ3Vyc29yID0gdm9pZCAwO1xuY29uc3QgYWdncmVnYXRpb25fY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9hZ2dyZWdhdGlvbl9jdXJzb3JcIik7XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgTGlzdFNlYXJjaEluZGV4ZXNDdXJzb3IgZXh0ZW5kcyBhZ2dyZWdhdGlvbl9jdXJzb3JfMS5BZ2dyZWdhdGlvbkN1cnNvciB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKHsgZnVsbE5hbWVzcGFjZTogbnMsIGNsaWVudCB9LCBuYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgcGlwZWxpbmUgPSBuYW1lID09IG51bGwgPyBbeyAkbGlzdFNlYXJjaEluZGV4ZXM6IHt9IH1dIDogW3sgJGxpc3RTZWFyY2hJbmRleGVzOiB7IG5hbWUgfSB9XTtcbiAgICAgICAgc3VwZXIoY2xpZW50LCBucywgcGlwZWxpbmUsIG9wdGlvbnMpO1xuICAgIH1cbn1cbmV4cG9ydHMuTGlzdFNlYXJjaEluZGV4ZXNDdXJzb3IgPSBMaXN0U2VhcmNoSW5kZXhlc0N1cnNvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpc3Rfc2VhcmNoX2luZGV4ZXNfY3Vyc29yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkxpc3RTZWFyY2hJbmRleGVzQ3Vyc29yIiwiYWdncmVnYXRpb25fY3Vyc29yXzEiLCJyZXF1aXJlIiwiQWdncmVnYXRpb25DdXJzb3IiLCJjb25zdHJ1Y3RvciIsImZ1bGxOYW1lc3BhY2UiLCJucyIsImNsaWVudCIsIm5hbWUiLCJvcHRpb25zIiwicGlwZWxpbmUiLCIkbGlzdFNlYXJjaEluZGV4ZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/list_search_indexes_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/cursor/run_command_cursor.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/cursor/run_command_cursor.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RunCommandCursor = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst execute_operation_1 = __webpack_require__(/*! ../operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst get_more_1 = __webpack_require__(/*! ../operations/get_more */ \"(ssr)/./node_modules/mongodb/lib/operations/get_more.js\");\nconst run_command_1 = __webpack_require__(/*! ../operations/run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst abstract_cursor_1 = __webpack_require__(/*! ./abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\n/** @public */ class RunCommandCursor extends abstract_cursor_1.AbstractCursor {\n    /**\n     * Controls the `getMore.comment` field\n     * @param comment - any BSON value\n     */ setComment(comment) {\n        this.getMoreOptions.comment = comment;\n        return this;\n    }\n    /**\n     * Controls the `getMore.maxTimeMS` field. Only valid when cursor is tailable await\n     * @param maxTimeMS - the number of milliseconds to wait for new data\n     */ setMaxTimeMS(maxTimeMS) {\n        this.getMoreOptions.maxAwaitTimeMS = maxTimeMS;\n        return this;\n    }\n    /**\n     * Controls the `getMore.batchSize` field\n     * @param maxTimeMS - the number documents to return in the `nextBatch`\n     */ setBatchSize(batchSize) {\n        this.getMoreOptions.batchSize = batchSize;\n        return this;\n    }\n    /** Unsupported for RunCommandCursor */ clone() {\n        throw new error_1.MongoAPIError(\"Clone not supported, create a new cursor with db.runCursorCommand\");\n    }\n    /** Unsupported for RunCommandCursor: readConcern must be configured directly on command document */ withReadConcern(_) {\n        throw new error_1.MongoAPIError(\"RunCommandCursor does not support readConcern it must be attached to the command being run\");\n    }\n    /** Unsupported for RunCommandCursor: various cursor flags must be configured directly on command document */ addCursorFlag(_, __) {\n        throw new error_1.MongoAPIError(\"RunCommandCursor does not support cursor flags, they must be attached to the command being run\");\n    }\n    /** Unsupported for RunCommandCursor: maxTimeMS must be configured directly on command document */ maxTimeMS(_) {\n        throw new error_1.MongoAPIError(\"maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()\");\n    }\n    /** Unsupported for RunCommandCursor: batchSize must be configured directly on command document */ batchSize(_) {\n        throw new error_1.MongoAPIError(\"batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()\");\n    }\n    /** @internal */ constructor(db, command, options = {}){\n        super(db.client, (0, utils_1.ns)(db.namespace), options);\n        this.getMoreOptions = {};\n        this.db = db;\n        this.command = Object.freeze({\n            ...command\n        });\n    }\n    /** @internal */ async _initialize(session) {\n        const operation = new run_command_1.RunCommandOperation(this.db, this.command, {\n            ...this.cursorOptions,\n            session: session,\n            readPreference: this.cursorOptions.readPreference\n        });\n        const response = await (0, execute_operation_1.executeOperation)(this.client, operation);\n        if (response.cursor == null) {\n            throw new error_1.MongoUnexpectedServerResponseError(\"Expected server to respond with cursor\");\n        }\n        return {\n            server: operation.server,\n            session,\n            response\n        };\n    }\n    /** @internal */ async getMore(_batchSize) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const getMoreOperation = new get_more_1.GetMoreOperation(this.namespace, this.id, this.server, {\n            ...this.cursorOptions,\n            session: this.session,\n            ...this.getMoreOptions\n        });\n        return (0, execute_operation_1.executeOperation)(this.client, getMoreOperation);\n    }\n}\nexports.RunCommandCursor = RunCommandCursor; //# sourceMappingURL=run_command_cursor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvY3Vyc29yL3J1bl9jb21tYW5kX2N1cnNvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxzQkFBc0JELG1CQUFPQSxDQUFDLHlHQUFpQztBQUNyRSxNQUFNRSxhQUFhRixtQkFBT0EsQ0FBQyx1RkFBd0I7QUFDbkQsTUFBTUcsZ0JBQWdCSCxtQkFBT0EsQ0FBQyw2RkFBMkI7QUFDekQsTUFBTUksVUFBVUosbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUssb0JBQW9CTCxtQkFBT0EsQ0FBQyxxRkFBbUI7QUFDckQsWUFBWSxHQUNaLE1BQU1GLHlCQUF5Qk8sa0JBQWtCQyxjQUFjO0lBQzNEOzs7S0FHQyxHQUNEQyxXQUFXQyxPQUFPLEVBQUU7UUFDaEIsSUFBSSxDQUFDQyxjQUFjLENBQUNELE9BQU8sR0FBR0E7UUFDOUIsT0FBTyxJQUFJO0lBQ2Y7SUFDQTs7O0tBR0MsR0FDREUsYUFBYUMsU0FBUyxFQUFFO1FBQ3BCLElBQUksQ0FBQ0YsY0FBYyxDQUFDRyxjQUFjLEdBQUdEO1FBQ3JDLE9BQU8sSUFBSTtJQUNmO0lBQ0E7OztLQUdDLEdBQ0RFLGFBQWFDLFNBQVMsRUFBRTtRQUNwQixJQUFJLENBQUNMLGNBQWMsQ0FBQ0ssU0FBUyxHQUFHQTtRQUNoQyxPQUFPLElBQUk7SUFDZjtJQUNBLHFDQUFxQyxHQUNyQ0MsUUFBUTtRQUNKLE1BQU0sSUFBSWhCLFFBQVFpQixhQUFhLENBQUM7SUFDcEM7SUFDQSxrR0FBa0csR0FDbEdDLGdCQUFnQkMsQ0FBQyxFQUFFO1FBQ2YsTUFBTSxJQUFJbkIsUUFBUWlCLGFBQWEsQ0FBQztJQUNwQztJQUNBLDJHQUEyRyxHQUMzR0csY0FBY0QsQ0FBQyxFQUFFRSxFQUFFLEVBQUU7UUFDakIsTUFBTSxJQUFJckIsUUFBUWlCLGFBQWEsQ0FBQztJQUNwQztJQUNBLGdHQUFnRyxHQUNoR0wsVUFBVU8sQ0FBQyxFQUFFO1FBQ1QsTUFBTSxJQUFJbkIsUUFBUWlCLGFBQWEsQ0FBQztJQUNwQztJQUNBLGdHQUFnRyxHQUNoR0YsVUFBVUksQ0FBQyxFQUFFO1FBQ1QsTUFBTSxJQUFJbkIsUUFBUWlCLGFBQWEsQ0FBQztJQUNwQztJQUNBLGNBQWMsR0FDZEssWUFBWUMsRUFBRSxFQUFFQyxPQUFPLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDbkMsS0FBSyxDQUFDRixHQUFHRyxNQUFNLEVBQUUsQ0FBQyxHQUFHckIsUUFBUXNCLEVBQUUsRUFBRUosR0FBR0ssU0FBUyxHQUFHSDtRQUNoRCxJQUFJLENBQUNmLGNBQWMsR0FBRyxDQUFDO1FBQ3ZCLElBQUksQ0FBQ2EsRUFBRSxHQUFHQTtRQUNWLElBQUksQ0FBQ0MsT0FBTyxHQUFHN0IsT0FBT2tDLE1BQU0sQ0FBQztZQUFFLEdBQUdMLE9BQU87UUFBQztJQUM5QztJQUNBLGNBQWMsR0FDZCxNQUFNTSxZQUFZQyxPQUFPLEVBQUU7UUFDdkIsTUFBTUMsWUFBWSxJQUFJNUIsY0FBYzZCLG1CQUFtQixDQUFDLElBQUksQ0FBQ1YsRUFBRSxFQUFFLElBQUksQ0FBQ0MsT0FBTyxFQUFFO1lBQzNFLEdBQUcsSUFBSSxDQUFDVSxhQUFhO1lBQ3JCSCxTQUFTQTtZQUNUSSxnQkFBZ0IsSUFBSSxDQUFDRCxhQUFhLENBQUNDLGNBQWM7UUFDckQ7UUFDQSxNQUFNQyxXQUFXLE1BQU0sQ0FBQyxHQUFHbEMsb0JBQW9CbUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDWCxNQUFNLEVBQUVNO1FBQzlFLElBQUlJLFNBQVNFLE1BQU0sSUFBSSxNQUFNO1lBQ3pCLE1BQU0sSUFBSXRDLFFBQVF1QyxrQ0FBa0MsQ0FBQztRQUN6RDtRQUNBLE9BQU87WUFDSEMsUUFBUVIsVUFBVVEsTUFBTTtZQUN4QlQ7WUFDQUs7UUFDSjtJQUNKO0lBQ0EsY0FBYyxHQUNkLE1BQU1LLFFBQVFDLFVBQVUsRUFBRTtRQUN0QixvRUFBb0U7UUFDcEUsTUFBTUMsbUJBQW1CLElBQUl4QyxXQUFXeUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDaEIsU0FBUyxFQUFFLElBQUksQ0FBQ2lCLEVBQUUsRUFBRSxJQUFJLENBQUNMLE1BQU0sRUFBRTtZQUMzRixHQUFHLElBQUksQ0FBQ04sYUFBYTtZQUNyQkgsU0FBUyxJQUFJLENBQUNBLE9BQU87WUFDckIsR0FBRyxJQUFJLENBQUNyQixjQUFjO1FBQzFCO1FBQ0EsT0FBTyxDQUFDLEdBQUdSLG9CQUFvQm1DLGdCQUFnQixFQUFFLElBQUksQ0FBQ1gsTUFBTSxFQUFFaUI7SUFDbEU7QUFDSjtBQUNBOUMsd0JBQXdCLEdBQUdFLGtCQUMzQiw4Q0FBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2N1cnNvci9ydW5fY29tbWFuZF9jdXJzb3IuanM/ZDk3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUnVuQ29tbWFuZEN1cnNvciA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBleGVjdXRlX29wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb25cIik7XG5jb25zdCBnZXRfbW9yZV8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvZ2V0X21vcmVcIik7XG5jb25zdCBydW5fY29tbWFuZF8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbnMvcnVuX2NvbW1hbmRcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgYWJzdHJhY3RfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9hYnN0cmFjdF9jdXJzb3JcIik7XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgUnVuQ29tbWFuZEN1cnNvciBleHRlbmRzIGFic3RyYWN0X2N1cnNvcl8xLkFic3RyYWN0Q3Vyc29yIHtcbiAgICAvKipcbiAgICAgKiBDb250cm9scyB0aGUgYGdldE1vcmUuY29tbWVudGAgZmllbGRcbiAgICAgKiBAcGFyYW0gY29tbWVudCAtIGFueSBCU09OIHZhbHVlXG4gICAgICovXG4gICAgc2V0Q29tbWVudChjb21tZW50KSB7XG4gICAgICAgIHRoaXMuZ2V0TW9yZU9wdGlvbnMuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb250cm9scyB0aGUgYGdldE1vcmUubWF4VGltZU1TYCBmaWVsZC4gT25seSB2YWxpZCB3aGVuIGN1cnNvciBpcyB0YWlsYWJsZSBhd2FpdFxuICAgICAqIEBwYXJhbSBtYXhUaW1lTVMgLSB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGZvciBuZXcgZGF0YVxuICAgICAqL1xuICAgIHNldE1heFRpbWVNUyhtYXhUaW1lTVMpIHtcbiAgICAgICAgdGhpcy5nZXRNb3JlT3B0aW9ucy5tYXhBd2FpdFRpbWVNUyA9IG1heFRpbWVNUztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHRoZSBgZ2V0TW9yZS5iYXRjaFNpemVgIGZpZWxkXG4gICAgICogQHBhcmFtIG1heFRpbWVNUyAtIHRoZSBudW1iZXIgZG9jdW1lbnRzIHRvIHJldHVybiBpbiB0aGUgYG5leHRCYXRjaGBcbiAgICAgKi9cbiAgICBzZXRCYXRjaFNpemUoYmF0Y2hTaXplKSB7XG4gICAgICAgIHRoaXMuZ2V0TW9yZU9wdGlvbnMuYmF0Y2hTaXplID0gYmF0Y2hTaXplO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqIFVuc3VwcG9ydGVkIGZvciBSdW5Db21tYW5kQ3Vyc29yICovXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ0Nsb25lIG5vdCBzdXBwb3J0ZWQsIGNyZWF0ZSBhIG5ldyBjdXJzb3Igd2l0aCBkYi5ydW5DdXJzb3JDb21tYW5kJyk7XG4gICAgfVxuICAgIC8qKiBVbnN1cHBvcnRlZCBmb3IgUnVuQ29tbWFuZEN1cnNvcjogcmVhZENvbmNlcm4gbXVzdCBiZSBjb25maWd1cmVkIGRpcmVjdGx5IG9uIGNvbW1hbmQgZG9jdW1lbnQgKi9cbiAgICB3aXRoUmVhZENvbmNlcm4oXykge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdSdW5Db21tYW5kQ3Vyc29yIGRvZXMgbm90IHN1cHBvcnQgcmVhZENvbmNlcm4gaXQgbXVzdCBiZSBhdHRhY2hlZCB0byB0aGUgY29tbWFuZCBiZWluZyBydW4nKTtcbiAgICB9XG4gICAgLyoqIFVuc3VwcG9ydGVkIGZvciBSdW5Db21tYW5kQ3Vyc29yOiB2YXJpb3VzIGN1cnNvciBmbGFncyBtdXN0IGJlIGNvbmZpZ3VyZWQgZGlyZWN0bHkgb24gY29tbWFuZCBkb2N1bWVudCAqL1xuICAgIGFkZEN1cnNvckZsYWcoXywgX18pIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignUnVuQ29tbWFuZEN1cnNvciBkb2VzIG5vdCBzdXBwb3J0IGN1cnNvciBmbGFncywgdGhleSBtdXN0IGJlIGF0dGFjaGVkIHRvIHRoZSBjb21tYW5kIGJlaW5nIHJ1bicpO1xuICAgIH1cbiAgICAvKiogVW5zdXBwb3J0ZWQgZm9yIFJ1bkNvbW1hbmRDdXJzb3I6IG1heFRpbWVNUyBtdXN0IGJlIGNvbmZpZ3VyZWQgZGlyZWN0bHkgb24gY29tbWFuZCBkb2N1bWVudCAqL1xuICAgIG1heFRpbWVNUyhfKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoJ21heFRpbWVNUyBtdXN0IGJlIGNvbmZpZ3VyZWQgb24gdGhlIGNvbW1hbmQgZG9jdW1lbnQgZGlyZWN0bHksIHRvIGNvbmZpZ3VyZSBnZXRNb3JlLm1heFRpbWVNUyB1c2UgY3Vyc29yLnNldE1heFRpbWVNUygpJyk7XG4gICAgfVxuICAgIC8qKiBVbnN1cHBvcnRlZCBmb3IgUnVuQ29tbWFuZEN1cnNvcjogYmF0Y2hTaXplIG11c3QgYmUgY29uZmlndXJlZCBkaXJlY3RseSBvbiBjb21tYW5kIGRvY3VtZW50ICovXG4gICAgYmF0Y2hTaXplKF8pIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignYmF0Y2hTaXplIG11c3QgYmUgY29uZmlndXJlZCBvbiB0aGUgY29tbWFuZCBkb2N1bWVudCBkaXJlY3RseSwgdG8gY29uZmlndXJlIGdldE1vcmUuYmF0Y2hTaXplIHVzZSBjdXJzb3Iuc2V0QmF0Y2hTaXplKCknKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKGRiLCBjb21tYW5kLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoZGIuY2xpZW50LCAoMCwgdXRpbHNfMS5ucykoZGIubmFtZXNwYWNlKSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZ2V0TW9yZU9wdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICB0aGlzLmNvbW1hbmQgPSBPYmplY3QuZnJlZXplKHsgLi4uY29tbWFuZCB9KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIF9pbml0aWFsaXplKHNlc3Npb24pIHtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gbmV3IHJ1bl9jb21tYW5kXzEuUnVuQ29tbWFuZE9wZXJhdGlvbih0aGlzLmRiLCB0aGlzLmNvbW1hbmQsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuY3Vyc29yT3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb246IHNlc3Npb24sXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogdGhpcy5jdXJzb3JPcHRpb25zLnJlYWRQcmVmZXJlbmNlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0ICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBvcGVyYXRpb24pO1xuICAgICAgICBpZiAocmVzcG9uc2UuY3Vyc29yID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IoJ0V4cGVjdGVkIHNlcnZlciB0byByZXNwb25kIHdpdGggY3Vyc29yJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlcnZlcjogb3BlcmF0aW9uLnNlcnZlcixcbiAgICAgICAgICAgIHNlc3Npb24sXG4gICAgICAgICAgICByZXNwb25zZVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgYXN5bmMgZ2V0TW9yZShfYmF0Y2hTaXplKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIGNvbnN0IGdldE1vcmVPcGVyYXRpb24gPSBuZXcgZ2V0X21vcmVfMS5HZXRNb3JlT3BlcmF0aW9uKHRoaXMubmFtZXNwYWNlLCB0aGlzLmlkLCB0aGlzLnNlcnZlciwge1xuICAgICAgICAgICAgLi4udGhpcy5jdXJzb3JPcHRpb25zLFxuICAgICAgICAgICAgc2Vzc2lvbjogdGhpcy5zZXNzaW9uLFxuICAgICAgICAgICAgLi4udGhpcy5nZXRNb3JlT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBnZXRNb3JlT3BlcmF0aW9uKTtcbiAgICB9XG59XG5leHBvcnRzLlJ1bkNvbW1hbmRDdXJzb3IgPSBSdW5Db21tYW5kQ3Vyc29yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuX2NvbW1hbmRfY3Vyc29yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlJ1bkNvbW1hbmRDdXJzb3IiLCJlcnJvcl8xIiwicmVxdWlyZSIsImV4ZWN1dGVfb3BlcmF0aW9uXzEiLCJnZXRfbW9yZV8xIiwicnVuX2NvbW1hbmRfMSIsInV0aWxzXzEiLCJhYnN0cmFjdF9jdXJzb3JfMSIsIkFic3RyYWN0Q3Vyc29yIiwic2V0Q29tbWVudCIsImNvbW1lbnQiLCJnZXRNb3JlT3B0aW9ucyIsInNldE1heFRpbWVNUyIsIm1heFRpbWVNUyIsIm1heEF3YWl0VGltZU1TIiwic2V0QmF0Y2hTaXplIiwiYmF0Y2hTaXplIiwiY2xvbmUiLCJNb25nb0FQSUVycm9yIiwid2l0aFJlYWRDb25jZXJuIiwiXyIsImFkZEN1cnNvckZsYWciLCJfXyIsImNvbnN0cnVjdG9yIiwiZGIiLCJjb21tYW5kIiwib3B0aW9ucyIsImNsaWVudCIsIm5zIiwibmFtZXNwYWNlIiwiZnJlZXplIiwiX2luaXRpYWxpemUiLCJzZXNzaW9uIiwib3BlcmF0aW9uIiwiUnVuQ29tbWFuZE9wZXJhdGlvbiIsImN1cnNvck9wdGlvbnMiLCJyZWFkUHJlZmVyZW5jZSIsInJlc3BvbnNlIiwiZXhlY3V0ZU9wZXJhdGlvbiIsImN1cnNvciIsIk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IiLCJzZXJ2ZXIiLCJnZXRNb3JlIiwiX2JhdGNoU2l6ZSIsImdldE1vcmVPcGVyYXRpb24iLCJHZXRNb3JlT3BlcmF0aW9uIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/cursor/run_command_cursor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/db.js":
/*!****************************************!*\
  !*** ./node_modules/mongodb/lib/db.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Db = void 0;\nconst admin_1 = __webpack_require__(/*! ./admin */ \"(ssr)/./node_modules/mongodb/lib/admin.js\");\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst change_stream_1 = __webpack_require__(/*! ./change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nconst collection_1 = __webpack_require__(/*! ./collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst CONSTANTS = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst aggregation_cursor_1 = __webpack_require__(/*! ./cursor/aggregation_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\");\nconst list_collections_cursor_1 = __webpack_require__(/*! ./cursor/list_collections_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_collections_cursor.js\");\nconst run_command_cursor_1 = __webpack_require__(/*! ./cursor/run_command_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/run_command_cursor.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst collections_1 = __webpack_require__(/*! ./operations/collections */ \"(ssr)/./node_modules/mongodb/lib/operations/collections.js\");\nconst create_collection_1 = __webpack_require__(/*! ./operations/create_collection */ \"(ssr)/./node_modules/mongodb/lib/operations/create_collection.js\");\nconst drop_1 = __webpack_require__(/*! ./operations/drop */ \"(ssr)/./node_modules/mongodb/lib/operations/drop.js\");\nconst execute_operation_1 = __webpack_require__(/*! ./operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst indexes_1 = __webpack_require__(/*! ./operations/indexes */ \"(ssr)/./node_modules/mongodb/lib/operations/indexes.js\");\nconst profiling_level_1 = __webpack_require__(/*! ./operations/profiling_level */ \"(ssr)/./node_modules/mongodb/lib/operations/profiling_level.js\");\nconst remove_user_1 = __webpack_require__(/*! ./operations/remove_user */ \"(ssr)/./node_modules/mongodb/lib/operations/remove_user.js\");\nconst rename_1 = __webpack_require__(/*! ./operations/rename */ \"(ssr)/./node_modules/mongodb/lib/operations/rename.js\");\nconst run_command_1 = __webpack_require__(/*! ./operations/run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\nconst set_profiling_level_1 = __webpack_require__(/*! ./operations/set_profiling_level */ \"(ssr)/./node_modules/mongodb/lib/operations/set_profiling_level.js\");\nconst stats_1 = __webpack_require__(/*! ./operations/stats */ \"(ssr)/./node_modules/mongodb/lib/operations/stats.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n// Allowed parameters\nconst DB_OPTIONS_ALLOW_LIST = [\n    \"writeConcern\",\n    \"readPreference\",\n    \"readPreferenceTags\",\n    \"native_parser\",\n    \"forceServerObjectId\",\n    \"pkFactory\",\n    \"serializeFunctions\",\n    \"raw\",\n    \"authSource\",\n    \"ignoreUndefined\",\n    \"readConcern\",\n    \"retryMiliSeconds\",\n    \"numberOfRetries\",\n    \"useBigInt64\",\n    \"promoteBuffers\",\n    \"promoteLongs\",\n    \"bsonRegExp\",\n    \"enableUtf8Validation\",\n    \"promoteValues\",\n    \"compression\",\n    \"retryWrites\"\n];\n/**\n * The **Db** class is a class that represents a MongoDB Database.\n * @public\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * interface Pet {\n *   name: string;\n *   kind: 'dog' | 'cat' | 'fish';\n * }\n *\n * const client = new MongoClient('mongodb://localhost:27017');\n * const db = client.db();\n *\n * // Create a collection that validates our union\n * await db.createCollection<Pet>('pets', {\n *   validator: { $expr: { $in: ['$kind', ['dog', 'cat', 'fish']] } }\n * })\n * ```\n */ class Db {\n    /**\n     * Creates a new Db instance.\n     *\n     * Db name cannot contain a dot, the server may apply more restrictions when an operation is run.\n     *\n     * @param client - The MongoClient for the database.\n     * @param databaseName - The name of the database this instance represents.\n     * @param options - Optional settings for Db construction.\n     */ constructor(client, databaseName, options){\n        options = options ?? {};\n        // Filter the options\n        options = (0, utils_1.filterOptions)(options, DB_OPTIONS_ALLOW_LIST);\n        // Ensure there are no dots in database name\n        if (typeof databaseName === \"string\" && databaseName.includes(\".\")) {\n            throw new error_1.MongoInvalidArgumentError(`Database names cannot contain the character '.'`);\n        }\n        // Internal state of the db object\n        this.s = {\n            // Options\n            options,\n            // Unpack read preference\n            readPreference: read_preference_1.ReadPreference.fromOptions(options),\n            // Merge bson options\n            bsonOptions: (0, bson_1.resolveBSONOptions)(options, client),\n            // Set up the primary key factory or fallback to ObjectId\n            pkFactory: options?.pkFactory ?? utils_1.DEFAULT_PK_FACTORY,\n            // ReadConcern\n            readConcern: read_concern_1.ReadConcern.fromOptions(options),\n            writeConcern: write_concern_1.WriteConcern.fromOptions(options),\n            // Namespace\n            namespace: new utils_1.MongoDBNamespace(databaseName)\n        };\n        this.client = client;\n    }\n    get databaseName() {\n        return this.s.namespace.db;\n    }\n    // Options\n    get options() {\n        return this.s.options;\n    }\n    /**\n     * Check if a secondary can be used (because the read preference is *not* set to primary)\n     */ get secondaryOk() {\n        return this.s.readPreference?.preference !== \"primary\" || false;\n    }\n    get readConcern() {\n        return this.s.readConcern;\n    }\n    /**\n     * The current readPreference of the Db. If not explicitly defined for\n     * this Db, will be inherited from the parent MongoClient\n     */ get readPreference() {\n        if (this.s.readPreference == null) {\n            return this.client.readPreference;\n        }\n        return this.s.readPreference;\n    }\n    get bsonOptions() {\n        return this.s.bsonOptions;\n    }\n    // get the write Concern\n    get writeConcern() {\n        return this.s.writeConcern;\n    }\n    get namespace() {\n        return this.s.namespace.toString();\n    }\n    /**\n     * Create a new collection on a server with the specified options. Use this to create capped collections.\n     * More information about command options available at https://www.mongodb.com/docs/manual/reference/command/create/\n     *\n     * Collection namespace validation is performed server-side.\n     *\n     * @param name - The name of the collection to create\n     * @param options - Optional settings for the command\n     */ async createCollection(name, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new create_collection_1.CreateCollectionOperation(this, name, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Execute a command\n     *\n     * @remarks\n     * This command does not inherit options from the MongoClient.\n     *\n     * The driver will ensure the following fields are attached to the command sent to the server:\n     * - `lsid` - sourced from an implicit session or options.session\n     * - `$readPreference` - defaults to primary or can be configured by options.readPreference\n     * - `$db` - sourced from the name of this database\n     *\n     * If the client has a serverApi setting:\n     * - `apiVersion`\n     * - `apiStrict`\n     * - `apiDeprecationErrors`\n     *\n     * When in a transaction:\n     * - `readConcern` - sourced from readConcern set on the TransactionOptions\n     * - `writeConcern` - sourced from writeConcern set on the TransactionOptions\n     *\n     * Attaching any of the above fields to the command will have no effect as the driver will overwrite the value.\n     *\n     * @param command - The command to run\n     * @param options - Optional settings for the command\n     */ async command(command, options) {\n        // Intentionally, we do not inherit options from parent for this operation.\n        return (0, execute_operation_1.executeOperation)(this.client, new run_command_1.RunCommandOperation(this, command, {\n            ...(0, bson_1.resolveBSONOptions)(options),\n            session: options?.session,\n            readPreference: options?.readPreference\n        }));\n    }\n    /**\n     * Execute an aggregation framework pipeline against the database, needs MongoDB \\>= 3.6\n     *\n     * @param pipeline - An array of aggregation stages to be executed\n     * @param options - Optional settings for the command\n     */ aggregate(pipeline = [], options) {\n        return new aggregation_cursor_1.AggregationCursor(this.client, this.s.namespace, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n    /** Return the Admin db instance */ admin() {\n        return new admin_1.Admin(this);\n    }\n    /**\n     * Returns a reference to a MongoDB Collection. If it does not exist it will be created implicitly.\n     *\n     * Collection namespace validation is performed server-side.\n     *\n     * @param name - the collection name we wish to access.\n     * @returns return the new Collection instance\n     */ collection(name, options = {}) {\n        if (typeof options === \"function\") {\n            throw new error_1.MongoInvalidArgumentError(\"The callback form of this helper has been removed.\");\n        }\n        return new collection_1.Collection(this, name, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Get all the db statistics.\n     *\n     * @param options - Optional settings for the command\n     */ async stats(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new stats_1.DbStatsOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    listCollections(filter = {}, options = {}) {\n        return new list_collections_cursor_1.ListCollectionsCursor(this, filter, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * Rename a collection.\n     *\n     * @remarks\n     * This operation does not inherit options from the MongoClient.\n     *\n     * @param fromCollection - Name of current collection to rename\n     * @param toCollection - New name of of the collection\n     * @param options - Optional settings for the command\n     */ async renameCollection(fromCollection, toCollection, options) {\n        // Intentionally, we do not inherit options from parent for this operation.\n        return (0, execute_operation_1.executeOperation)(this.client, new rename_1.RenameOperation(this.collection(fromCollection), toCollection, {\n            ...options,\n            new_collection: true,\n            readPreference: read_preference_1.ReadPreference.primary\n        }));\n    }\n    /**\n     * Drop a collection from the database, removing it permanently. New accesses will create a new collection.\n     *\n     * @param name - Name of collection to drop\n     * @param options - Optional settings for the command\n     */ async dropCollection(name, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new drop_1.DropCollectionOperation(this, name, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Drop a database, removing it permanently from the server.\n     *\n     * @param options - Optional settings for the command\n     */ async dropDatabase(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new drop_1.DropDatabaseOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Fetch all collections for the current db.\n     *\n     * @param options - Optional settings for the command\n     */ async collections(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new collections_1.CollectionsOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Creates an index on the db and collection.\n     *\n     * @param name - Name of the collection to create the index on.\n     * @param indexSpec - Specify the field to index, or an index specification\n     * @param options - Optional settings for the command\n     */ async createIndex(name, indexSpec, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.CreateIndexOperation(this, name, indexSpec, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Remove a user from a database\n     *\n     * @param username - The username to remove\n     * @param options - Optional settings for the command\n     */ async removeUser(username, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new remove_user_1.RemoveUserOperation(this, username, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Set the current profiling level of MongoDB\n     *\n     * @param level - The new profiling level (off, slow_only, all).\n     * @param options - Optional settings for the command\n     */ async setProfilingLevel(level, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new set_profiling_level_1.SetProfilingLevelOperation(this, level, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Retrieve the current profiling Level for MongoDB\n     *\n     * @param options - Optional settings for the command\n     */ async profilingLevel(options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new profiling_level_1.ProfilingLevelOperation(this, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Retrieves this collections index info.\n     *\n     * @param name - The name of the collection.\n     * @param options - Optional settings for the command\n     */ async indexInformation(name, options) {\n        return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexInformationOperation(this, name, (0, utils_1.resolveOptions)(this, options)));\n    }\n    /**\n     * Create a new Change Stream, watching for new changes (insertions, updates,\n     * replacements, deletions, and invalidations) in this database. Will ignore all\n     * changes to system collections.\n     *\n     * @remarks\n     * watch() accepts two generic arguments for distinct use cases:\n     * - The first is to provide the schema that may be defined for all the collections within this database\n     * - The second is to override the shape of the change stream document entirely, if it is not provided the type will default to ChangeStreamDocument of the first argument\n     *\n     * @param pipeline - An array of {@link https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/|aggregation pipeline stages} through which to pass change stream documents. This allows for filtering (using $match) and manipulating the change stream documents.\n     * @param options - Optional settings for the command\n     * @typeParam TSchema - Type of the data being detected by the change stream\n     * @typeParam TChange - Type of the whole change stream document emitted\n     */ watch(pipeline = [], options = {}) {\n        // Allow optionally not specifying a pipeline\n        if (!Array.isArray(pipeline)) {\n            options = pipeline;\n            pipeline = [];\n        }\n        return new change_stream_1.ChangeStream(this, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n    /**\n     * A low level cursor API providing basic driver functionality:\n     * - ClientSession management\n     * - ReadPreference for server selection\n     * - Running getMores automatically when a local batch is exhausted\n     *\n     * @param command - The command that will start a cursor on the server.\n     * @param options - Configurations for running the command, bson options will apply to getMores\n     */ runCursorCommand(command, options) {\n        return new run_command_cursor_1.RunCommandCursor(this, command, options);\n    }\n}\nDb.SYSTEM_NAMESPACE_COLLECTION = CONSTANTS.SYSTEM_NAMESPACE_COLLECTION;\nDb.SYSTEM_INDEX_COLLECTION = CONSTANTS.SYSTEM_INDEX_COLLECTION;\nDb.SYSTEM_PROFILE_COLLECTION = CONSTANTS.SYSTEM_PROFILE_COLLECTION;\nDb.SYSTEM_USER_COLLECTION = CONSTANTS.SYSTEM_USER_COLLECTION;\nDb.SYSTEM_COMMAND_COLLECTION = CONSTANTS.SYSTEM_COMMAND_COLLECTION;\nDb.SYSTEM_JS_COLLECTION = CONSTANTS.SYSTEM_JS_COLLECTION;\nexports.Db = Db; //# sourceMappingURL=db.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZGIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELFVBQVUsR0FBRyxLQUFLO0FBQ2xCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLHdEQUFRO0FBQy9CLE1BQU1FLGtCQUFrQkYsbUJBQU9BLENBQUMsMEVBQWlCO0FBQ2pELE1BQU1HLGVBQWVILG1CQUFPQSxDQUFDLG9FQUFjO0FBQzNDLE1BQU1JLFlBQVlKLG1CQUFPQSxDQUFDLGtFQUFhO0FBQ3ZDLE1BQU1LLHVCQUF1QkwsbUJBQU9BLENBQUMsa0dBQTZCO0FBQ2xFLE1BQU1NLDRCQUE0Qk4sbUJBQU9BLENBQUMsNEdBQWtDO0FBQzVFLE1BQU1PLHVCQUF1QlAsbUJBQU9BLENBQUMsa0dBQTZCO0FBQ2xFLE1BQU1RLFVBQVVSLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLE1BQU1TLGdCQUFnQlQsbUJBQU9BLENBQUMsNEZBQTBCO0FBQ3hELE1BQU1VLHNCQUFzQlYsbUJBQU9BLENBQUMsd0dBQWdDO0FBQ3BFLE1BQU1XLFNBQVNYLG1CQUFPQSxDQUFDLDhFQUFtQjtBQUMxQyxNQUFNWSxzQkFBc0JaLG1CQUFPQSxDQUFDLHdHQUFnQztBQUNwRSxNQUFNYSxZQUFZYixtQkFBT0EsQ0FBQyxvRkFBc0I7QUFDaEQsTUFBTWMsb0JBQW9CZCxtQkFBT0EsQ0FBQyxvR0FBOEI7QUFDaEUsTUFBTWUsZ0JBQWdCZixtQkFBT0EsQ0FBQyw0RkFBMEI7QUFDeEQsTUFBTWdCLFdBQVdoQixtQkFBT0EsQ0FBQyxrRkFBcUI7QUFDOUMsTUFBTWlCLGdCQUFnQmpCLG1CQUFPQSxDQUFDLDRGQUEwQjtBQUN4RCxNQUFNa0Isd0JBQXdCbEIsbUJBQU9BLENBQUMsNEdBQWtDO0FBQ3hFLE1BQU1tQixVQUFVbkIsbUJBQU9BLENBQUMsZ0ZB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VWlHLDJCQUEyQjtBQUN0RXZHLEdBQUd3Ryx1QkFBdUIsR0FBR2xHLFVBQVVrRyx1QkFBdUI7QUFDOUR4RyxHQUFHeUcseUJBQXlCLEdBQUduRyxVQUFVbUcseUJBQXlCO0FBQ2xFekcsR0FBRzBHLHNCQUFzQixHQUFHcEcsVUFBVW9HLHNCQUFzQjtBQUM1RDFHLEdBQUcyRyx5QkFBeUIsR0FBR3JHLFVBQVVxRyx5QkFBeUI7QUFDbEUzRyxHQUFHNEcsb0JBQW9CLEdBQUd0RyxVQUFVc0csb0JBQW9CO0FBQ3hEOUcsVUFBVSxHQUFHRSxJQUNiLDhCQUE4QiIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZGIuanM/MGYyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRGIgPSB2b2lkIDA7XG5jb25zdCBhZG1pbl8xID0gcmVxdWlyZShcIi4vYWRtaW5cIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi9ic29uXCIpO1xuY29uc3QgY2hhbmdlX3N0cmVhbV8xID0gcmVxdWlyZShcIi4vY2hhbmdlX3N0cmVhbVwiKTtcbmNvbnN0IGNvbGxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2NvbGxlY3Rpb25cIik7XG5jb25zdCBDT05TVEFOVFMgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG5jb25zdCBhZ2dyZWdhdGlvbl9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9hZ2dyZWdhdGlvbl9jdXJzb3JcIik7XG5jb25zdCBsaXN0X2NvbGxlY3Rpb25zX2N1cnNvcl8xID0gcmVxdWlyZShcIi4vY3Vyc29yL2xpc3RfY29sbGVjdGlvbnNfY3Vyc29yXCIpO1xuY29uc3QgcnVuX2NvbW1hbmRfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9jdXJzb3IvcnVuX2NvbW1hbmRfY3Vyc29yXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xuY29uc3QgY29sbGVjdGlvbnNfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvY29sbGVjdGlvbnNcIik7XG5jb25zdCBjcmVhdGVfY29sbGVjdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9jcmVhdGVfY29sbGVjdGlvblwiKTtcbmNvbnN0IGRyb3BfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvZHJvcFwiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2V4ZWN1dGVfb3BlcmF0aW9uXCIpO1xuY29uc3QgaW5kZXhlc18xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9pbmRleGVzXCIpO1xuY29uc3QgcHJvZmlsaW5nX2xldmVsXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3Byb2ZpbGluZ19sZXZlbFwiKTtcbmNvbnN0IHJlbW92ZV91c2VyXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3JlbW92ZV91c2VyXCIpO1xuY29uc3QgcmVuYW1lXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3JlbmFtZVwiKTtcbmNvbnN0IHJ1bl9jb21tYW5kXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3J1bl9jb21tYW5kXCIpO1xuY29uc3Qgc2V0X3Byb2ZpbGluZ19sZXZlbF8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9ucy9zZXRfcHJvZmlsaW5nX2xldmVsXCIpO1xuY29uc3Qgc3RhdHNfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvc3RhdHNcIik7XG5jb25zdCByZWFkX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3JlYWRfY29uY2VyblwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vd3JpdGVfY29uY2VyblwiKTtcbi8vIEFsbG93ZWQgcGFyYW1ldGVyc1xuY29uc3QgREJfT1BUSU9OU19BTExPV19MSVNUID0gW1xuICAgICd3cml0ZUNvbmNlcm4nLFxuICAgICdyZWFkUHJlZmVyZW5jZScsXG4gICAgJ3JlYWRQcmVmZXJlbmNlVGFncycsXG4gICAgJ25hdGl2ZV9wYXJzZXInLFxuICAgICdmb3JjZVNlcnZlck9iamVjdElkJyxcbiAgICAncGtGYWN0b3J5JyxcbiAgICAnc2VyaWFsaXplRnVuY3Rpb25zJyxcbiAgICAncmF3JyxcbiAgICAnYXV0aFNvdXJjZScsXG4gICAgJ2lnbm9yZVVuZGVmaW5lZCcsXG4gICAgJ3JlYWRDb25jZXJuJyxcbiAgICAncmV0cnlNaWxpU2Vjb25kcycsXG4gICAgJ251bWJlck9mUmV0cmllcycsXG4gICAgJ3VzZUJpZ0ludDY0JyxcbiAgICAncHJvbW90ZUJ1ZmZlcnMnLFxuICAgICdwcm9tb3RlTG9uZ3MnLFxuICAgICdic29uUmVnRXhwJyxcbiAgICAnZW5hYmxlVXRmOFZhbGlkYXRpb24nLFxuICAgICdwcm9tb3RlVmFsdWVzJyxcbiAgICAnY29tcHJlc3Npb24nLFxuICAgICdyZXRyeVdyaXRlcydcbl07XG4vKipcbiAqIFRoZSAqKkRiKiogY2xhc3MgaXMgYSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBNb25nb0RCIERhdGFiYXNlLlxuICogQHB1YmxpY1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcbiAqXG4gKiBpbnRlcmZhY2UgUGV0IHtcbiAqICAgbmFtZTogc3RyaW5nO1xuICogICBraW5kOiAnZG9nJyB8ICdjYXQnIHwgJ2Zpc2gnO1xuICogfVxuICpcbiAqIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCgnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNycpO1xuICogY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcbiAqXG4gKiAvLyBDcmVhdGUgYSBjb2xsZWN0aW9uIHRoYXQgdmFsaWRhdGVzIG91ciB1bmlvblxuICogYXdhaXQgZGIuY3JlYXRlQ29sbGVjdGlvbjxQZXQ+KCdwZXRzJywge1xuICogICB2YWxpZGF0b3I6IHsgJGV4cHI6IHsgJGluOiBbJyRraW5kJywgWydkb2cnLCAnY2F0JywgJ2Zpc2gnXV0gfSB9XG4gKiB9KVxuICogYGBgXG4gKi9cbmNsYXNzIERiIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IERiIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogRGIgbmFtZSBjYW5ub3QgY29udGFpbiBhIGRvdCwgdGhlIHNlcnZlciBtYXkgYXBwbHkgbW9yZSByZXN0cmljdGlvbnMgd2hlbiBhbiBvcGVyYXRpb24gaXMgcnVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNsaWVudCAtIFRoZSBNb25nb0NsaWVudCBmb3IgdGhlIGRhdGFiYXNlLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZGF0YWJhc2UgdGhpcyBpbnN0YW5jZSByZXByZXNlbnRzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIERiIGNvbnN0cnVjdGlvbi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjbGllbnQsIGRhdGFiYXNlTmFtZSwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgLy8gRmlsdGVyIHRoZSBvcHRpb25zXG4gICAgICAgIG9wdGlvbnMgPSAoMCwgdXRpbHNfMS5maWx0ZXJPcHRpb25zKShvcHRpb25zLCBEQl9PUFRJT05TX0FMTE9XX0xJU1QpO1xuICAgICAgICAvLyBFbnN1cmUgdGhlcmUgYXJlIG5vIGRvdHMgaW4gZGF0YWJhc2UgbmFtZVxuICAgICAgICBpZiAodHlwZW9mIGRhdGFiYXNlTmFtZSA9PT0gJ3N0cmluZycgJiYgZGF0YWJhc2VOYW1lLmluY2x1ZGVzKCcuJykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYERhdGFiYXNlIG5hbWVzIGNhbm5vdCBjb250YWluIHRoZSBjaGFyYWN0ZXIgJy4nYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW50ZXJuYWwgc3RhdGUgb2YgdGhlIGRiIG9iamVjdFxuICAgICAgICB0aGlzLnMgPSB7XG4gICAgICAgICAgICAvLyBPcHRpb25zXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgLy8gVW5wYWNrIHJlYWQgcHJlZmVyZW5jZVxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21PcHRpb25zKG9wdGlvbnMpLFxuICAgICAgICAgICAgLy8gTWVyZ2UgYnNvbiBvcHRpb25zXG4gICAgICAgICAgICBic29uT3B0aW9uczogKDAsIGJzb25fMS5yZXNvbHZlQlNPTk9wdGlvbnMpKG9wdGlvbnMsIGNsaWVudCksXG4gICAgICAgICAgICAvLyBTZXQgdXAgdGhlIHByaW1hcnkga2V5IGZhY3Rvcnkgb3IgZmFsbGJhY2sgdG8gT2JqZWN0SWRcbiAgICAgICAgICAgIHBrRmFjdG9yeTogb3B0aW9ucz8ucGtGYWN0b3J5ID8/IHV0aWxzXzEuREVGQVVMVF9QS19GQUNUT1JZLFxuICAgICAgICAgICAgLy8gUmVhZENvbmNlcm5cbiAgICAgICAgICAgIHJlYWRDb25jZXJuOiByZWFkX2NvbmNlcm5fMS5SZWFkQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKSxcbiAgICAgICAgICAgIHdyaXRlQ29uY2Vybjogd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKSxcbiAgICAgICAgICAgIC8vIE5hbWVzcGFjZVxuICAgICAgICAgICAgbmFtZXNwYWNlOiBuZXcgdXRpbHNfMS5Nb25nb0RCTmFtZXNwYWNlKGRhdGFiYXNlTmFtZSlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgfVxuICAgIGdldCBkYXRhYmFzZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMubmFtZXNwYWNlLmRiO1xuICAgIH1cbiAgICAvLyBPcHRpb25zXG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMub3B0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBzZWNvbmRhcnkgY2FuIGJlIHVzZWQgKGJlY2F1c2UgdGhlIHJlYWQgcHJlZmVyZW5jZSBpcyAqbm90KiBzZXQgdG8gcHJpbWFyeSlcbiAgICAgKi9cbiAgICBnZXQgc2Vjb25kYXJ5T2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMucmVhZFByZWZlcmVuY2U/LnByZWZlcmVuY2UgIT09ICdwcmltYXJ5JyB8fCBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IHJlYWRDb25jZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLnJlYWRDb25jZXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCByZWFkUHJlZmVyZW5jZSBvZiB0aGUgRGIuIElmIG5vdCBleHBsaWNpdGx5IGRlZmluZWQgZm9yXG4gICAgICogdGhpcyBEYiwgd2lsbCBiZSBpbmhlcml0ZWQgZnJvbSB0aGUgcGFyZW50IE1vbmdvQ2xpZW50XG4gICAgICovXG4gICAgZ2V0IHJlYWRQcmVmZXJlbmNlKCkge1xuICAgICAgICBpZiAodGhpcy5zLnJlYWRQcmVmZXJlbmNlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWVudC5yZWFkUHJlZmVyZW5jZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zLnJlYWRQcmVmZXJlbmNlO1xuICAgIH1cbiAgICBnZXQgYnNvbk9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuYnNvbk9wdGlvbnM7XG4gICAgfVxuICAgIC8vIGdldCB0aGUgd3JpdGUgQ29uY2VyblxuICAgIGdldCB3cml0ZUNvbmNlcm4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMud3JpdGVDb25jZXJuO1xuICAgIH1cbiAgICBnZXQgbmFtZXNwYWNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLm5hbWVzcGFjZS50b1N0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY29sbGVjdGlvbiBvbiBhIHNlcnZlciB3aXRoIHRoZSBzcGVjaWZpZWQgb3B0aW9ucy4gVXNlIHRoaXMgdG8gY3JlYXRlIGNhcHBlZCBjb2xsZWN0aW9ucy5cbiAgICAgKiBNb3JlIGluZm9ybWF0aW9uIGFib3V0IGNvbW1hbmQgb3B0aW9ucyBhdmFpbGFibGUgYXQgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL2NvbW1hbmQvY3JlYXRlL1xuICAgICAqXG4gICAgICogQ29sbGVjdGlvbiBuYW1lc3BhY2UgdmFsaWRhdGlvbiBpcyBwZXJmb3JtZWQgc2VydmVyLXNpZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBjb2xsZWN0aW9uIHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlQ29sbGVjdGlvbihuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGNyZWF0ZV9jb2xsZWN0aW9uXzEuQ3JlYXRlQ29sbGVjdGlvbk9wZXJhdGlvbih0aGlzLCBuYW1lLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBhIGNvbW1hbmRcbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjb21tYW5kIGRvZXMgbm90IGluaGVyaXQgb3B0aW9ucyBmcm9tIHRoZSBNb25nb0NsaWVudC5cbiAgICAgKlxuICAgICAqIFRoZSBkcml2ZXIgd2lsbCBlbnN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIGF0dGFjaGVkIHRvIHRoZSBjb21tYW5kIHNlbnQgdG8gdGhlIHNlcnZlcjpcbiAgICAgKiAtIGBsc2lkYCAtIHNvdXJjZWQgZnJvbSBhbiBpbXBsaWNpdCBzZXNzaW9uIG9yIG9wdGlvbnMuc2Vzc2lvblxuICAgICAqIC0gYCRyZWFkUHJlZmVyZW5jZWAgLSBkZWZhdWx0cyB0byBwcmltYXJ5IG9yIGNhbiBiZSBjb25maWd1cmVkIGJ5IG9wdGlvbnMucmVhZFByZWZlcmVuY2VcbiAgICAgKiAtIGAkZGJgIC0gc291cmNlZCBmcm9tIHRoZSBuYW1lIG9mIHRoaXMgZGF0YWJhc2VcbiAgICAgKlxuICAgICAqIElmIHRoZSBjbGllbnQgaGFzIGEgc2VydmVyQXBpIHNldHRpbmc6XG4gICAgICogLSBgYXBpVmVyc2lvbmBcbiAgICAgKiAtIGBhcGlTdHJpY3RgXG4gICAgICogLSBgYXBpRGVwcmVjYXRpb25FcnJvcnNgXG4gICAgICpcbiAgICAgKiBXaGVuIGluIGEgdHJhbnNhY3Rpb246XG4gICAgICogLSBgcmVhZENvbmNlcm5gIC0gc291cmNlZCBmcm9tIHJlYWRDb25jZXJuIHNldCBvbiB0aGUgVHJhbnNhY3Rpb25PcHRpb25zXG4gICAgICogLSBgd3JpdGVDb25jZXJuYCAtIHNvdXJjZWQgZnJvbSB3cml0ZUNvbmNlcm4gc2V0IG9uIHRoZSBUcmFuc2FjdGlvbk9wdGlvbnNcbiAgICAgKlxuICAgICAqIEF0dGFjaGluZyBhbnkgb2YgdGhlIGFib3ZlIGZpZWxkcyB0byB0aGUgY29tbWFuZCB3aWxsIGhhdmUgbm8gZWZmZWN0IGFzIHRoZSBkcml2ZXIgd2lsbCBvdmVyd3JpdGUgdGhlIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbW1hbmQgLSBUaGUgY29tbWFuZCB0byBydW5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGNvbW1hbmQoY29tbWFuZCwgb3B0aW9ucykge1xuICAgICAgICAvLyBJbnRlbnRpb25hbGx5LCB3ZSBkbyBub3QgaW5oZXJpdCBvcHRpb25zIGZyb20gcGFyZW50IGZvciB0aGlzIG9wZXJhdGlvbi5cbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgcnVuX2NvbW1hbmRfMS5SdW5Db21tYW5kT3BlcmF0aW9uKHRoaXMsIGNvbW1hbmQsIHtcbiAgICAgICAgICAgIC4uLigwLCBic29uXzEucmVzb2x2ZUJTT05PcHRpb25zKShvcHRpb25zKSxcbiAgICAgICAgICAgIHNlc3Npb246IG9wdGlvbnM/LnNlc3Npb24sXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogb3B0aW9ucz8ucmVhZFByZWZlcmVuY2VcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIGFuIGFnZ3JlZ2F0aW9uIGZyYW1ld29yayBwaXBlbGluZSBhZ2FpbnN0IHRoZSBkYXRhYmFzZSwgbmVlZHMgTW9uZ29EQiBcXD49IDMuNlxuICAgICAqXG4gICAgICogQHBhcmFtIHBpcGVsaW5lIC0gQW4gYXJyYXkgb2YgYWdncmVnYXRpb24gc3RhZ2VzIHRvIGJlIGV4ZWN1dGVkXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhZ2dyZWdhdGUocGlwZWxpbmUgPSBbXSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IGFnZ3JlZ2F0aW9uX2N1cnNvcl8xLkFnZ3JlZ2F0aW9uQ3Vyc29yKHRoaXMuY2xpZW50LCB0aGlzLnMubmFtZXNwYWNlLCBwaXBlbGluZSwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybiB0aGUgQWRtaW4gZGIgaW5zdGFuY2UgKi9cbiAgICBhZG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhZG1pbl8xLkFkbWluKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGEgTW9uZ29EQiBDb2xsZWN0aW9uLiBJZiBpdCBkb2VzIG5vdCBleGlzdCBpdCB3aWxsIGJlIGNyZWF0ZWQgaW1wbGljaXRseS5cbiAgICAgKlxuICAgICAqIENvbGxlY3Rpb24gbmFtZXNwYWNlIHZhbGlkYXRpb24gaXMgcGVyZm9ybWVkIHNlcnZlci1zaWRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgLSB0aGUgY29sbGVjdGlvbiBuYW1lIHdlIHdpc2ggdG8gYWNjZXNzLlxuICAgICAqIEByZXR1cm5zIHJldHVybiB0aGUgbmV3IENvbGxlY3Rpb24gaW5zdGFuY2VcbiAgICAgKi9cbiAgICBjb2xsZWN0aW9uKG5hbWUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1RoZSBjYWxsYmFjayBmb3JtIG9mIHRoaXMgaGVscGVyIGhhcyBiZWVuIHJlbW92ZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBjb2xsZWN0aW9uXzEuQ29sbGVjdGlvbih0aGlzLCBuYW1lLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIHRoZSBkYiBzdGF0aXN0aWNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBzdGF0cyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IHN0YXRzXzEuRGJTdGF0c09wZXJhdGlvbih0aGlzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgbGlzdENvbGxlY3Rpb25zKGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBsaXN0X2NvbGxlY3Rpb25zX2N1cnNvcl8xLkxpc3RDb2xsZWN0aW9uc0N1cnNvcih0aGlzLCBmaWx0ZXIsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbmFtZSBhIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgb3BlcmF0aW9uIGRvZXMgbm90IGluaGVyaXQgb3B0aW9ucyBmcm9tIHRoZSBNb25nb0NsaWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmcm9tQ29sbGVjdGlvbiAtIE5hbWUgb2YgY3VycmVudCBjb2xsZWN0aW9uIHRvIHJlbmFtZVxuICAgICAqIEBwYXJhbSB0b0NvbGxlY3Rpb24gLSBOZXcgbmFtZSBvZiBvZiB0aGUgY29sbGVjdGlvblxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgcmVuYW1lQ29sbGVjdGlvbihmcm9tQ29sbGVjdGlvbiwgdG9Db2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIEludGVudGlvbmFsbHksIHdlIGRvIG5vdCBpbmhlcml0IG9wdGlvbnMgZnJvbSBwYXJlbnQgZm9yIHRoaXMgb3BlcmF0aW9uLlxuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyByZW5hbWVfMS5SZW5hbWVPcGVyYXRpb24odGhpcy5jb2xsZWN0aW9uKGZyb21Db2xsZWN0aW9uKSwgdG9Db2xsZWN0aW9uLCB7IC4uLm9wdGlvbnMsIG5ld19jb2xsZWN0aW9uOiB0cnVlLCByZWFkUHJlZmVyZW5jZTogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeSB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3AgYSBjb2xsZWN0aW9uIGZyb20gdGhlIGRhdGFiYXNlLCByZW1vdmluZyBpdCBwZXJtYW5lbnRseS4gTmV3IGFjY2Vzc2VzIHdpbGwgY3JlYXRlIGEgbmV3IGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSAtIE5hbWUgb2YgY29sbGVjdGlvbiB0byBkcm9wXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBkcm9wQ29sbGVjdGlvbihuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGRyb3BfMS5Ecm9wQ29sbGVjdGlvbk9wZXJhdGlvbih0aGlzLCBuYW1lLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHJvcCBhIGRhdGFiYXNlLCByZW1vdmluZyBpdCBwZXJtYW5lbnRseSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGRyb3BEYXRhYmFzZShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhlY3V0ZV9vcGVyYXRpb25fMS5leGVjdXRlT3BlcmF0aW9uKSh0aGlzLmNsaWVudCwgbmV3IGRyb3BfMS5Ecm9wRGF0YWJhc2VPcGVyYXRpb24odGhpcywgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoIGFsbCBjb2xsZWN0aW9ucyBmb3IgdGhlIGN1cnJlbnQgZGIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGNvbGxlY3Rpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgY29sbGVjdGlvbnNfMS5Db2xsZWN0aW9uc09wZXJhdGlvbih0aGlzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbmRleCBvbiB0aGUgZGIgYW5kIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSAtIE5hbWUgb2YgdGhlIGNvbGxlY3Rpb24gdG8gY3JlYXRlIHRoZSBpbmRleCBvbi5cbiAgICAgKiBAcGFyYW0gaW5kZXhTcGVjIC0gU3BlY2lmeSB0aGUgZmllbGQgdG8gaW5kZXgsIG9yIGFuIGluZGV4IHNwZWNpZmljYXRpb25cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZUluZGV4KG5hbWUsIGluZGV4U3BlYywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBpbmRleGVzXzEuQ3JlYXRlSW5kZXhPcGVyYXRpb24odGhpcywgbmFtZSwgaW5kZXhTcGVjLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgdXNlciBmcm9tIGEgZGF0YWJhc2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB1c2VybmFtZSAtIFRoZSB1c2VybmFtZSB0byByZW1vdmVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZVVzZXIodXNlcm5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgcmVtb3ZlX3VzZXJfMS5SZW1vdmVVc2VyT3BlcmF0aW9uKHRoaXMsIHVzZXJuYW1lLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjdXJyZW50IHByb2ZpbGluZyBsZXZlbCBvZiBNb25nb0RCXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGV2ZWwgLSBUaGUgbmV3IHByb2ZpbGluZyBsZXZlbCAob2ZmLCBzbG93X29ubHksIGFsbCkuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBzZXRQcm9maWxpbmdMZXZlbChsZXZlbCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBzZXRfcHJvZmlsaW5nX2xldmVsXzEuU2V0UHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24odGhpcywgbGV2ZWwsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBwcm9maWxpbmcgTGV2ZWwgZm9yIE1vbmdvREJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICovXG4gICAgYXN5bmMgcHJvZmlsaW5nTGV2ZWwob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKDAsIGV4ZWN1dGVfb3BlcmF0aW9uXzEuZXhlY3V0ZU9wZXJhdGlvbikodGhpcy5jbGllbnQsIG5ldyBwcm9maWxpbmdfbGV2ZWxfMS5Qcm9maWxpbmdMZXZlbE9wZXJhdGlvbih0aGlzLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoaXMgY29sbGVjdGlvbnMgaW5kZXggaW5mby5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBmb3IgdGhlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBhc3luYyBpbmRleEluZm9ybWF0aW9uKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMuY2xpZW50LCBuZXcgaW5kZXhlc18xLkluZGV4SW5mb3JtYXRpb25PcGVyYXRpb24odGhpcywgbmFtZSwgKDAsIHV0aWxzXzEucmVzb2x2ZU9wdGlvbnMpKHRoaXMsIG9wdGlvbnMpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBDaGFuZ2UgU3RyZWFtLCB3YXRjaGluZyBmb3IgbmV3IGNoYW5nZXMgKGluc2VydGlvbnMsIHVwZGF0ZXMsXG4gICAgICogcmVwbGFjZW1lbnRzLCBkZWxldGlvbnMsIGFuZCBpbnZhbGlkYXRpb25zKSBpbiB0aGlzIGRhdGFiYXNlLiBXaWxsIGlnbm9yZSBhbGxcbiAgICAgKiBjaGFuZ2VzIHRvIHN5c3RlbSBjb2xsZWN0aW9ucy5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogd2F0Y2goKSBhY2NlcHRzIHR3byBnZW5lcmljIGFyZ3VtZW50cyBmb3IgZGlzdGluY3QgdXNlIGNhc2VzOlxuICAgICAqIC0gVGhlIGZpcnN0IGlzIHRvIHByb3ZpZGUgdGhlIHNjaGVtYSB0aGF0IG1heSBiZSBkZWZpbmVkIGZvciBhbGwgdGhlIGNvbGxlY3Rpb25zIHdpdGhpbiB0aGlzIGRhdGFiYXNlXG4gICAgICogLSBUaGUgc2Vjb25kIGlzIHRvIG92ZXJyaWRlIHRoZSBzaGFwZSBvZiB0aGUgY2hhbmdlIHN0cmVhbSBkb2N1bWVudCBlbnRpcmVseSwgaWYgaXQgaXMgbm90IHByb3ZpZGVkIHRoZSB0eXBlIHdpbGwgZGVmYXVsdCB0byBDaGFuZ2VTdHJlYW1Eb2N1bWVudCBvZiB0aGUgZmlyc3QgYXJndW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwaXBlbGluZSAtIEFuIGFycmF5IG9mIHtAbGluayBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2Uvb3BlcmF0b3IvYWdncmVnYXRpb24tcGlwZWxpbmUvfGFnZ3JlZ2F0aW9uIHBpcGVsaW5lIHN0YWdlc30gdGhyb3VnaCB3aGljaCB0byBwYXNzIGNoYW5nZSBzdHJlYW0gZG9jdW1lbnRzLiBUaGlzIGFsbG93cyBmb3IgZmlsdGVyaW5nICh1c2luZyAkbWF0Y2gpIGFuZCBtYW5pcHVsYXRpbmcgdGhlIGNoYW5nZSBzdHJlYW0gZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBjb21tYW5kXG4gICAgICogQHR5cGVQYXJhbSBUU2NoZW1hIC0gVHlwZSBvZiB0aGUgZGF0YSBiZWluZyBkZXRlY3RlZCBieSB0aGUgY2hhbmdlIHN0cmVhbVxuICAgICAqIEB0eXBlUGFyYW0gVENoYW5nZSAtIFR5cGUgb2YgdGhlIHdob2xlIGNoYW5nZSBzdHJlYW0gZG9jdW1lbnQgZW1pdHRlZFxuICAgICAqL1xuICAgIHdhdGNoKHBpcGVsaW5lID0gW10sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvLyBBbGxvdyBvcHRpb25hbGx5IG5vdCBzcGVjaWZ5aW5nIGEgcGlwZWxpbmVcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBpcGVsaW5lKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHBpcGVsaW5lO1xuICAgICAgICAgICAgcGlwZWxpbmUgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGNoYW5nZV9zdHJlYW1fMS5DaGFuZ2VTdHJlYW0odGhpcywgcGlwZWxpbmUsICgwLCB1dGlsc18xLnJlc29sdmVPcHRpb25zKSh0aGlzLCBvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbG93IGxldmVsIGN1cnNvciBBUEkgcHJvdmlkaW5nIGJhc2ljIGRyaXZlciBmdW5jdGlvbmFsaXR5OlxuICAgICAqIC0gQ2xpZW50U2Vzc2lvbiBtYW5hZ2VtZW50XG4gICAgICogLSBSZWFkUHJlZmVyZW5jZSBmb3Igc2VydmVyIHNlbGVjdGlvblxuICAgICAqIC0gUnVubmluZyBnZXRNb3JlcyBhdXRvbWF0aWNhbGx5IHdoZW4gYSBsb2NhbCBiYXRjaCBpcyBleGhhdXN0ZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb21tYW5kIC0gVGhlIGNvbW1hbmQgdGhhdCB3aWxsIHN0YXJ0IGEgY3Vyc29yIG9uIHRoZSBzZXJ2ZXIuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBDb25maWd1cmF0aW9ucyBmb3IgcnVubmluZyB0aGUgY29tbWFuZCwgYnNvbiBvcHRpb25zIHdpbGwgYXBwbHkgdG8gZ2V0TW9yZXNcbiAgICAgKi9cbiAgICBydW5DdXJzb3JDb21tYW5kKGNvbW1hbmQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBydW5fY29tbWFuZF9jdXJzb3JfMS5SdW5Db21tYW5kQ3Vyc29yKHRoaXMsIGNvbW1hbmQsIG9wdGlvbnMpO1xuICAgIH1cbn1cbkRiLlNZU1RFTV9OQU1FU1BBQ0VfQ09MTEVDVElPTiA9IENPTlNUQU5UUy5TWVNURU1fTkFNRVNQQUNFX0NPTExFQ1RJT047XG5EYi5TWVNURU1fSU5ERVhfQ09MTEVDVElPTiA9IENPTlNUQU5UUy5TWVNURU1fSU5ERVhfQ09MTEVDVElPTjtcbkRiLlNZU1RFTV9QUk9GSUxFX0NPTExFQ1RJT04gPSBDT05TVEFOVFMuU1lTVEVNX1BST0ZJTEVfQ09MTEVDVElPTjtcbkRiLlNZU1RFTV9VU0VSX0NPTExFQ1RJT04gPSBDT05TVEFOVFMuU1lTVEVNX1VTRVJfQ09MTEVDVElPTjtcbkRiLlNZU1RFTV9DT01NQU5EX0NPTExFQ1RJT04gPSBDT05TVEFOVFMuU1lTVEVNX0NPTU1BTkRfQ09MTEVDVElPTjtcbkRiLlNZU1RFTV9KU19DT0xMRUNUSU9OID0gQ09OU1RBTlRTLlNZU1RFTV9KU19DT0xMRUNUSU9OO1xuZXhwb3J0cy5EYiA9IERiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRGIiLCJhZG1pbl8xIiwicmVxdWlyZSIsImJzb25fMSIsImNoYW5nZV9zdHJlYW1fMSIsImNvbGxlY3Rpb25fMSIsIkNPTlNUQU5UUyIsImFnZ3JlZ2F0aW9uX2N1cnNvcl8xIiwibGlzdF9jb2xsZWN0aW9uc19jdXJzb3JfMSIsInJ1bl9jb21tYW5kX2N1cnNvcl8xIiwiZXJyb3JfMSIsImNvbGxlY3Rpb25zXzEiLCJjcmVhdGVfY29sbGVjdGlvbl8xIiwiZHJvcF8xIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsImluZGV4ZXNfMSIsInByb2ZpbGluZ19sZXZlbF8xIiwicmVtb3ZlX3VzZXJfMSIsInJlbmFtZV8xIiwicnVuX2NvbW1hbmRfMSIsInNldF9wcm9maWxpbmdfbGV2ZWxfMSIsInN0YXRzXzEiLCJyZWFkX2NvbmNlcm5fMSIsInJlYWRfcHJlZmVyZW5jZV8xIiwidXRpbHNfMSIsIndyaXRlX2NvbmNlcm5fMSIsIkRCX09QVElPTlNfQUxMT1dfTElTVCIsImNvbnN0cnVjdG9yIiwiY2xpZW50IiwiZGF0YWJhc2VOYW1lIiwib3B0aW9ucyIsImZpbHRlck9wdGlvbnMiLCJpbmNsdWRlcyIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJzIiwicmVhZFByZWZlcmVuY2UiLCJSZWFkUHJlZmVyZW5jZSIsImZyb21PcHRpb25zIiwiYnNvbk9wdGlvbnMiLCJyZXNvbHZlQlNPTk9wdGlvbnMiLCJwa0ZhY3RvcnkiLCJERUZBVUxUX1BLX0ZBQ1RPUlkiLCJyZWFkQ29uY2VybiIsIlJlYWRDb25jZXJuIiwid3JpdGVDb25jZXJuIiwiV3JpdGVDb25jZXJuIiwibmFtZXNwYWNlIiwiTW9uZ29EQk5hbWVzcGFjZSIsImRiIiwic2Vjb25kYXJ5T2siLCJwcmVmZXJlbmNlIiwidG9TdHJpbmciLCJjcmVhdGVDb2xsZWN0aW9uIiwibmFtZSIsImV4ZWN1dGVPcGVyYXRpb24iLCJDcmVhdGVDb2xsZWN0aW9uT3BlcmF0aW9uIiwicmVzb2x2ZU9wdGlvbnMiLCJjb21tYW5kIiwiUnVuQ29tbWFuZE9wZXJhdGlvbiIsInNlc3Npb24iLCJhZ2dyZWdhdGUiLCJwaXBlbGluZSIsIkFnZ3JlZ2F0aW9uQ3Vyc29yIiwiYWRtaW4iLCJBZG1pbiIsImNvbGxlY3Rpb24iLCJDb2xsZWN0aW9uIiwic3RhdHMiLCJEYlN0YXRzT3BlcmF0aW9uIiwibGlzdENvbGxlY3Rpb25zIiwiZmlsdGVyIiwiTGlzdENvbGxlY3Rpb25zQ3Vyc29yIiwicmVuYW1lQ29sbGVjdGlvbiIsImZyb21Db2xsZWN0aW9uIiwidG9Db2xsZWN0aW9uIiwiUmVuYW1lT3BlcmF0aW9uIiwibmV3X2NvbGxlY3Rpb24iLCJwcmltYXJ5IiwiZHJvcENvbGxlY3Rpb24iLCJEcm9wQ29sbGVjdGlvbk9wZXJhdGlvbiIsImRyb3BEYXRhYmFzZSIsIkRyb3BEYXRhYmFzZU9wZXJhdGlvbiIsImNvbGxlY3Rpb25zIiwiQ29sbGVjdGlvbnNPcGVyYXRpb24iLCJjcmVhdGVJbmRleCIsImluZGV4U3BlYyIsIkNyZWF0ZUluZGV4T3BlcmF0aW9uIiwicmVtb3ZlVXNlciIsInVzZXJuYW1lIiwiUmVtb3ZlVXNlck9wZXJhdGlvbiIsInNldFByb2ZpbGluZ0xldmVsIiwibGV2ZWwiLCJTZXRQcm9maWxpbmdMZXZlbE9wZXJhdGlvbiIsInByb2ZpbGluZ0xldmVsIiwiUHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24iLCJpbmRleEluZm9ybWF0aW9uIiwiSW5kZXhJbmZvcm1hdGlvbk9wZXJhdGlvbiIsIndhdGNoIiwiQXJyYXkiLCJpc0FycmF5IiwiQ2hhbmdlU3RyZWFtIiwicnVuQ3Vyc29yQ29tbWFuZCIsIlJ1bkNvbW1hbmRDdXJzb3IiLCJTWVNURU1fTkFNRVNQQUNFX0NPTExFQ1RJT04iLCJTWVNURU1fSU5ERVhfQ09MTEVDVElPTiIsIlNZU1RFTV9QUk9GSUxFX0NPTExFQ1RJT04iLCJTWVNURU1fVVNFUl9DT0xMRUNUSU9OIiwiU1lTVEVNX0NPTU1BTkRfQ09MTEVDVElPTiIsIlNZU1RFTV9KU19DT0xMRUNUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/db.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/deps.js":
/*!******************************************!*\
  !*** ./node_modules/mongodb/lib/deps.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getMongoDBClientEncryption = exports.aws4 = exports.getSocks = exports.getSnappy = exports.getGcpMetadata = exports.getAwsCredentialProvider = exports.getZstdLibrary = exports.ZStandard = exports.getKerberos = exports.Kerberos = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nfunction makeErrorModule(error) {\n    const props = error ? {\n        kModuleError: error\n    } : {};\n    return new Proxy(props, {\n        get: (_, key)=>{\n            if (key === \"kModuleError\") {\n                return error;\n            }\n            throw error;\n        },\n        set: ()=>{\n            throw error;\n        }\n    });\n}\nexports.Kerberos = makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `kerberos` not found. Please install it to enable kerberos authentication\"));\nfunction getKerberos() {\n    try {\n        // Ensure you always wrap an optional require in the try block NODE-3199\n        exports.Kerberos = __webpack_require__(/*! kerberos */ \"?07fb\");\n        return exports.Kerberos;\n    } catch  {\n        return exports.Kerberos;\n    }\n}\nexports.getKerberos = getKerberos;\nexports.ZStandard = makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression\"));\nfunction getZstdLibrary() {\n    try {\n        exports.ZStandard = __webpack_require__(/*! @mongodb-js/zstd */ \"?e185\");\n        return exports.ZStandard;\n    } catch  {\n        return exports.ZStandard;\n    }\n}\nexports.getZstdLibrary = getZstdLibrary;\nfunction getAwsCredentialProvider() {\n    try {\n        // Ensure you always wrap an optional require in the try block NODE-3199\n        const credentialProvider = __webpack_require__(/*! @aws-sdk/credential-providers */ \"?4bb6\");\n        return credentialProvider;\n    } catch  {\n        return makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `@aws-sdk/credential-providers` not found.\" + \" Please install it to enable getting aws credentials via the official sdk.\"));\n    }\n}\nexports.getAwsCredentialProvider = getAwsCredentialProvider;\nfunction getGcpMetadata() {\n    try {\n        // Ensure you always wrap an optional require in the try block NODE-3199\n        const credentialProvider = __webpack_require__(/*! gcp-metadata */ \"?a71c\");\n        return credentialProvider;\n    } catch  {\n        return makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `gcp-metadata` not found.\" + \" Please install it to enable getting gcp credentials via the official sdk.\"));\n    }\n}\nexports.getGcpMetadata = getGcpMetadata;\nfunction getSnappy() {\n    try {\n        // Ensure you always wrap an optional require in the try block NODE-3199\n        const value = __webpack_require__(/*! snappy */ \"?aa0a\");\n        return value;\n    } catch (cause) {\n        const kModuleError = new error_1.MongoMissingDependencyError(\"Optional module `snappy` not found. Please install it to enable snappy compression\", {\n            cause\n        });\n        return {\n            kModuleError\n        };\n    }\n}\nexports.getSnappy = getSnappy;\nfunction getSocks() {\n    try {\n        // Ensure you always wrap an optional require in the try block NODE-3199\n        const value = __webpack_require__(/*! socks */ \"?8f6e\");\n        return value;\n    } catch (cause) {\n        const kModuleError = new error_1.MongoMissingDependencyError(\"Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy\", {\n            cause\n        });\n        return {\n            kModuleError\n        };\n    }\n}\nexports.getSocks = getSocks;\nexports.aws4 = makeErrorModule(new error_1.MongoMissingDependencyError(\"Optional module `aws4` not found. Please install it to enable AWS authentication\"));\ntry {\n    // Ensure you always wrap an optional require in the try block NODE-3199\n    exports.aws4 = __webpack_require__(/*! aws4 */ \"(ssr)/./node_modules/aws4/aws4.js\");\n} catch  {} // eslint-disable-line\n/** A utility function to get the instance of mongodb-client-encryption, if it exists. */ function getMongoDBClientEncryption() {\n    let mongodbClientEncryption = null;\n    try {\n        // NOTE(NODE-3199): Ensure you always wrap an optional require literally in the try block\n        // Cannot be moved to helper utility function, bundlers search and replace the actual require call\n        // in a way that makes this line throw at bundle time, not runtime, catching here will make bundling succeed\n        mongodbClientEncryption = __webpack_require__(/*! mongodb-client-encryption */ \"?a5d2\");\n    } catch (cause) {\n        const kModuleError = new error_1.MongoMissingDependencyError(\"Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.\", {\n            cause\n        });\n        return {\n            kModuleError\n        };\n    }\n    return mongodbClientEncryption;\n}\nexports.getMongoDBClientEncryption = getMongoDBClientEncryption; //# sourceMappingURL=deps.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZGVwcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0NBQWtDLEdBQUdBLFlBQVksR0FBR0EsZ0JBQWdCLEdBQUdBLGlCQUFpQixHQUFHQSxzQkFBc0IsR0FBR0EsZ0NBQWdDLEdBQUdBLHNCQUFzQixHQUFHQSxpQkFBaUIsR0FBR0EsbUJBQW1CLEdBQUdBLGdCQUFnQixHQUFHLEtBQUs7QUFDbFAsTUFBTVksVUFBVUMsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsU0FBU0MsZ0JBQWdCQyxLQUFLO0lBQzFCLE1BQU1DLFFBQVFELFFBQVE7UUFBRUUsY0FBY0Y7SUFBTSxJQUFJLENBQUM7SUFDakQsT0FBTyxJQUFJRyxNQUFNRixPQUFPO1FBQ3BCRyxLQUFLLENBQUNDLEdBQUdDO1lBQ0wsSUFBSUEsUUFBUSxnQkFBZ0I7Z0JBQ3hCLE9BQU9OO1lBQ1g7WUFDQSxNQUFNQTtRQUNWO1FBQ0FPLEtBQUs7WUFDRCxNQUFNUDtRQUNWO0lBQ0o7QUFDSjtBQUNBZixnQkFBZ0IsR0FBR2MsZ0JBQWdCLElBQUlGLFFBQVFXLDJCQUEyQixDQUFDO0FBQzNFLFNBQVNiO0lBQ0wsSUFBSTtRQUNBLHdFQUF3RTtRQUN4RVYsK0RBQTJCO1FBQzNCLE9BQU9BLFFBQVFXLFFBQVE7SUFDM0IsRUFDQSxPQUFNO1FBQ0YsT0FBT1gsUUFBUVcsUUFBUTtJQUMzQjtBQUNKO0FBQ0FYLG1CQUFtQixHQUFHVTtBQUN0QlYsaUJBQWlCLEdBQUdjLGdCQUFnQixJQUFJRixRQUFRVywyQkFBMkIsQ0FBQztBQUM1RSxTQUFTZjtJQUNMLElBQUk7UUFDQVIsd0VBQTRCO1FBQzVCLE9BQU9BLFFBQVFTLFNBQVM7SUFDNUIsRUFDQSxPQUFNO1FBQ0YsT0FBT1QsUUFBUVMsU0FBUztJQUM1QjtBQUNKO0FBQ0FULHNCQUFzQixHQUFHUTtBQUN6QixTQUFTRDtJQUNMLElBQUk7UUFDQSx3RUFBd0U7UUFDeEUsTUFBTWlCLHFCQUFxQlgsbUJBQU9BLENBQUM7UUFDbkMsT0FBT1c7SUFDWCxFQUNBLE9BQU07UUFDRixPQUFPVixnQkFBZ0IsSUFBSUYsUUFBUVcsMkJBQTJCLENBQUMsK0RBQzNEO0lBQ1I7QUFDSjtBQUNBdkIsZ0NBQWdDLEdBQUdPO0FBQ25DLFNBQVNEO0lBQ0wsSUFBSTtRQUNBLHdFQUF3RTtRQUN4RSxNQUFNa0IscUJBQXFCWCxtQkFBT0EsQ0FBQztRQUNuQyxPQUFPVztJQUNYLEVBQ0EsT0FBTTtRQUNGLE9BQU9WLGdCQUFnQixJQUFJRixRQUFRVywyQkFBMkIsQ0FBQyw4Q0FDM0Q7SUFDUjtBQUNKO0FBQ0F2QixzQkFBc0IsR0FBR007QUFDekIsU0FBU0Q7SUFDTCxJQUFJO1FBQ0Esd0VBQXdFO1FBQ3hFLE1BQU1KLFFBQVFZLG1CQUFPQSxDQUFDO1FBQ3RCLE9BQU9aO0lBQ1gsRUFDQSxPQUFPd0IsT0FBTztRQUNWLE1BQU1SLGVBQWUsSUFBSUwsUUFBUVcsMkJBQTJCLENBQUMsc0ZBQXNGO1lBQUVFO1FBQU07UUFDM0osT0FBTztZQUFFUjtRQUFhO0lBQzFCO0FBQ0o7QUFDQWpCLGlCQUFpQixHQUFHSztBQUNwQixTQUFTRDtJQUNMLElBQUk7UUFDQSx3RUFBd0U7UUFDeEUsTUFBTUgsUUFBUVksbUJBQU9BLENBQUM7UUFDdEIsT0FBT1o7SUFDWCxFQUNBLE9BQU93QixPQUFPO1FBQ1YsTUFBTVIsZUFBZSxJQUFJTCxRQUFRVywyQkFBMkIsQ0FBQywyRkFBMkY7WUFBRUU7UUFBTTtRQUNoSyxPQUFPO1lBQUVSO1FBQWE7SUFDMUI7QUFDSjtBQUNBakIsZ0JBQWdCLEdBQUdJO0FBQ25CSixZQUFZLEdBQUdjLGdCQUFnQixJQUFJRixRQUFRVywyQkFBMkIsQ0FBQztBQUN2RSxJQUFJO0lBQ0Esd0VBQXdFO0lBQ3hFdkIsbUZBQXVCO0FBQzNCLEVBQ0EsT0FBTSxDQUFFLEVBQUUsc0JBQXNCO0FBQ2hDLHVGQUF1RixHQUN2RixTQUFTRTtJQUNMLElBQUl3QiwwQkFBMEI7SUFDOUIsSUFBSTtRQUNBLHlGQUF5RjtRQUN6RixrR0FBa0c7UUFDbEcsNEdBQTRHO1FBQzVHQSwwQkFBMEJiLG1CQUFPQSxDQUFDO0lBQ3RDLEVBQ0EsT0FBT1ksT0FBTztRQUNWLE1BQU1SLGVBQWUsSUFBSUwsUUFBUVcsMkJBQTJCLENBQUMsd0hBQXdIO1lBQUVFO1FBQU07UUFDN0wsT0FBTztZQUFFUjtRQUFhO0lBQzFCO0lBQ0EsT0FBT1M7QUFDWDtBQUNBMUIsa0NBQWtDLEdBQUdFLDRCQUNyQyxnQ0FBZ0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2RlcHMuanM/OGVlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0TW9uZ29EQkNsaWVudEVuY3J5cHRpb24gPSBleHBvcnRzLmF3czQgPSBleHBvcnRzLmdldFNvY2tzID0gZXhwb3J0cy5nZXRTbmFwcHkgPSBleHBvcnRzLmdldEdjcE1ldGFkYXRhID0gZXhwb3J0cy5nZXRBd3NDcmVkZW50aWFsUHJvdmlkZXIgPSBleHBvcnRzLmdldFpzdGRMaWJyYXJ5ID0gZXhwb3J0cy5aU3RhbmRhcmQgPSBleHBvcnRzLmdldEtlcmJlcm9zID0gZXhwb3J0cy5LZXJiZXJvcyA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbmZ1bmN0aW9uIG1ha2VFcnJvck1vZHVsZShlcnJvcikge1xuICAgIGNvbnN0IHByb3BzID0gZXJyb3IgPyB7IGtNb2R1bGVFcnJvcjogZXJyb3IgfSA6IHt9O1xuICAgIHJldHVybiBuZXcgUHJveHkocHJvcHMsIHtcbiAgICAgICAgZ2V0OiAoXywga2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAna01vZHVsZUVycm9yJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6ICgpID0+IHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5leHBvcnRzLktlcmJlcm9zID0gbWFrZUVycm9yTW9kdWxlKG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvcignT3B0aW9uYWwgbW9kdWxlIGBrZXJiZXJvc2Agbm90IGZvdW5kLiBQbGVhc2UgaW5zdGFsbCBpdCB0byBlbmFibGUga2VyYmVyb3MgYXV0aGVudGljYXRpb24nKSk7XG5mdW5jdGlvbiBnZXRLZXJiZXJvcygpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBFbnN1cmUgeW91IGFsd2F5cyB3cmFwIGFuIG9wdGlvbmFsIHJlcXVpcmUgaW4gdGhlIHRyeSBibG9jayBOT0RFLTMxOTlcbiAgICAgICAgZXhwb3J0cy5LZXJiZXJvcyA9IHJlcXVpcmUoJ2tlcmJlcm9zJyk7XG4gICAgICAgIHJldHVybiBleHBvcnRzLktlcmJlcm9zO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLktlcmJlcm9zO1xuICAgIH1cbn1cbmV4cG9ydHMuZ2V0S2VyYmVyb3MgPSBnZXRLZXJiZXJvcztcbmV4cG9ydHMuWlN0YW5kYXJkID0gbWFrZUVycm9yTW9kdWxlKG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvcignT3B0aW9uYWwgbW9kdWxlIGBAbW9uZ29kYi1qcy96c3RkYCBub3QgZm91bmQuIFBsZWFzZSBpbnN0YWxsIGl0IHRvIGVuYWJsZSB6c3RkIGNvbXByZXNzaW9uJykpO1xuZnVuY3Rpb24gZ2V0WnN0ZExpYnJhcnkoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgZXhwb3J0cy5aU3RhbmRhcmQgPSByZXF1aXJlKCdAbW9uZ29kYi1qcy96c3RkJyk7XG4gICAgICAgIHJldHVybiBleHBvcnRzLlpTdGFuZGFyZDtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5aU3RhbmRhcmQ7XG4gICAgfVxufVxuZXhwb3J0cy5nZXRac3RkTGlicmFyeSA9IGdldFpzdGRMaWJyYXJ5O1xuZnVuY3Rpb24gZ2V0QXdzQ3JlZGVudGlhbFByb3ZpZGVyKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEVuc3VyZSB5b3UgYWx3YXlzIHdyYXAgYW4gb3B0aW9uYWwgcmVxdWlyZSBpbiB0aGUgdHJ5IGJsb2NrIE5PREUtMzE5OVxuICAgICAgICBjb25zdCBjcmVkZW50aWFsUHJvdmlkZXIgPSByZXF1aXJlKCdAYXdzLXNkay9jcmVkZW50aWFsLXByb3ZpZGVycycpO1xuICAgICAgICByZXR1cm4gY3JlZGVudGlhbFByb3ZpZGVyO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBtYWtlRXJyb3JNb2R1bGUobmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yKCdPcHRpb25hbCBtb2R1bGUgYEBhd3Mtc2RrL2NyZWRlbnRpYWwtcHJvdmlkZXJzYCBub3QgZm91bmQuJyArXG4gICAgICAgICAgICAnIFBsZWFzZSBpbnN0YWxsIGl0IHRvIGVuYWJsZSBnZXR0aW5nIGF3cyBjcmVkZW50aWFscyB2aWEgdGhlIG9mZmljaWFsIHNkay4nKSk7XG4gICAgfVxufVxuZXhwb3J0cy5nZXRBd3NDcmVkZW50aWFsUHJvdmlkZXIgPSBnZXRBd3NDcmVkZW50aWFsUHJvdmlkZXI7XG5mdW5jdGlvbiBnZXRHY3BNZXRhZGF0YSgpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBFbnN1cmUgeW91IGFsd2F5cyB3cmFwIGFuIG9wdGlvbmFsIHJlcXVpcmUgaW4gdGhlIHRyeSBibG9jayBOT0RFLTMxOTlcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbFByb3ZpZGVyID0gcmVxdWlyZSgnZ2NwLW1ldGFkYXRhJyk7XG4gICAgICAgIHJldHVybiBjcmVkZW50aWFsUHJvdmlkZXI7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIG1ha2VFcnJvck1vZHVsZShuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IoJ09wdGlvbmFsIG1vZHVsZSBgZ2NwLW1ldGFkYXRhYCBub3QgZm91bmQuJyArXG4gICAgICAgICAgICAnIFBsZWFzZSBpbnN0YWxsIGl0IHRvIGVuYWJsZSBnZXR0aW5nIGdjcCBjcmVkZW50aWFscyB2aWEgdGhlIG9mZmljaWFsIHNkay4nKSk7XG4gICAgfVxufVxuZXhwb3J0cy5nZXRHY3BNZXRhZGF0YSA9IGdldEdjcE1ldGFkYXRhO1xuZnVuY3Rpb24gZ2V0U25hcHB5KCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEVuc3VyZSB5b3UgYWx3YXlzIHdyYXAgYW4gb3B0aW9uYWwgcmVxdWlyZSBpbiB0aGUgdHJ5IGJsb2NrIE5PREUtMzE5OVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHJlcXVpcmUoJ3NuYXBweScpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNhdGNoIChjYXVzZSkge1xuICAgICAgICBjb25zdCBrTW9kdWxlRXJyb3IgPSBuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IoJ09wdGlvbmFsIG1vZHVsZSBgc25hcHB5YCBub3QgZm91bmQuIFBsZWFzZSBpbnN0YWxsIGl0IHRvIGVuYWJsZSBzbmFwcHkgY29tcHJlc3Npb24nLCB7IGNhdXNlIH0pO1xuICAgICAgICByZXR1cm4geyBrTW9kdWxlRXJyb3IgfTtcbiAgICB9XG59XG5leHBvcnRzLmdldFNuYXBweSA9IGdldFNuYXBweTtcbmZ1bmN0aW9uIGdldFNvY2tzKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEVuc3VyZSB5b3UgYWx3YXlzIHdyYXAgYW4gb3B0aW9uYWwgcmVxdWlyZSBpbiB0aGUgdHJ5IGJsb2NrIE5PREUtMzE5OVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHJlcXVpcmUoJ3NvY2tzJyk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgIGNvbnN0IGtNb2R1bGVFcnJvciA9IG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvcignT3B0aW9uYWwgbW9kdWxlIGBzb2Nrc2Agbm90IGZvdW5kLiBQbGVhc2UgaW5zdGFsbCBpdCB0byBjb25uZWN0aW9ucyBvdmVyIGEgU09DS1M1IHByb3h5JywgeyBjYXVzZSB9KTtcbiAgICAgICAgcmV0dXJuIHsga01vZHVsZUVycm9yIH07XG4gICAgfVxufVxuZXhwb3J0cy5nZXRTb2NrcyA9IGdldFNvY2tzO1xuZXhwb3J0cy5hd3M0ID0gbWFrZUVycm9yTW9kdWxlKG5ldyBlcnJvcl8xLk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvcignT3B0aW9uYWwgbW9kdWxlIGBhd3M0YCBub3QgZm91bmQuIFBsZWFzZSBpbnN0YWxsIGl0IHRvIGVuYWJsZSBBV1MgYXV0aGVudGljYXRpb24nKSk7XG50cnkge1xuICAgIC8vIEVuc3VyZSB5b3UgYWx3YXlzIHdyYXAgYW4gb3B0aW9uYWwgcmVxdWlyZSBpbiB0aGUgdHJ5IGJsb2NrIE5PREUtMzE5OVxuICAgIGV4cG9ydHMuYXdzNCA9IHJlcXVpcmUoJ2F3czQnKTtcbn1cbmNhdGNoIHsgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4vKiogQSB1dGlsaXR5IGZ1bmN0aW9uIHRvIGdldCB0aGUgaW5zdGFuY2Ugb2YgbW9uZ29kYi1jbGllbnQtZW5jcnlwdGlvbiwgaWYgaXQgZXhpc3RzLiAqL1xuZnVuY3Rpb24gZ2V0TW9uZ29EQkNsaWVudEVuY3J5cHRpb24oKSB7XG4gICAgbGV0IG1vbmdvZGJDbGllbnRFbmNyeXB0aW9uID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgICAvLyBOT1RFKE5PREUtMzE5OSk6IEVuc3VyZSB5b3UgYWx3YXlzIHdyYXAgYW4gb3B0aW9uYWwgcmVxdWlyZSBsaXRlcmFsbHkgaW4gdGhlIHRyeSBibG9ja1xuICAgICAgICAvLyBDYW5ub3QgYmUgbW92ZWQgdG8gaGVscGVyIHV0aWxpdHkgZnVuY3Rpb24sIGJ1bmRsZXJzIHNlYXJjaCBhbmQgcmVwbGFjZSB0aGUgYWN0dWFsIHJlcXVpcmUgY2FsbFxuICAgICAgICAvLyBpbiBhIHdheSB0aGF0IG1ha2VzIHRoaXMgbGluZSB0aHJvdyBhdCBidW5kbGUgdGltZSwgbm90IHJ1bnRpbWUsIGNhdGNoaW5nIGhlcmUgd2lsbCBtYWtlIGJ1bmRsaW5nIHN1Y2NlZWRcbiAgICAgICAgbW9uZ29kYkNsaWVudEVuY3J5cHRpb24gPSByZXF1aXJlKCdtb25nb2RiLWNsaWVudC1lbmNyeXB0aW9uJyk7XG4gICAgfVxuICAgIGNhdGNoIChjYXVzZSkge1xuICAgICAgICBjb25zdCBrTW9kdWxlRXJyb3IgPSBuZXcgZXJyb3JfMS5Nb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IoJ09wdGlvbmFsIG1vZHVsZSBgbW9uZ29kYi1jbGllbnQtZW5jcnlwdGlvbmAgbm90IGZvdW5kLiBQbGVhc2UgaW5zdGFsbCBpdCB0byB1c2UgYXV0byBlbmNyeXB0aW9uIG9yIENsaWVudEVuY3J5cHRpb24uJywgeyBjYXVzZSB9KTtcbiAgICAgICAgcmV0dXJuIHsga01vZHVsZUVycm9yIH07XG4gICAgfVxuICAgIHJldHVybiBtb25nb2RiQ2xpZW50RW5jcnlwdGlvbjtcbn1cbmV4cG9ydHMuZ2V0TW9uZ29EQkNsaWVudEVuY3J5cHRpb24gPSBnZXRNb25nb0RCQ2xpZW50RW5jcnlwdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlcHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZ2V0TW9uZ29EQkNsaWVudEVuY3J5cHRpb24iLCJhd3M0IiwiZ2V0U29ja3MiLCJnZXRTbmFwcHkiLCJnZXRHY3BNZXRhZGF0YSIsImdldEF3c0NyZWRlbnRpYWxQcm92aWRlciIsImdldFpzdGRMaWJyYXJ5IiwiWlN0YW5kYXJkIiwiZ2V0S2VyYmVyb3MiLCJLZXJiZXJvcyIsImVycm9yXzEiLCJyZXF1aXJlIiwibWFrZUVycm9yTW9kdWxlIiwiZXJyb3IiLCJwcm9wcyIsImtNb2R1bGVFcnJvciIsIlByb3h5IiwiZ2V0IiwiXyIsImtleSIsInNldCIsIk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvciIsImNyZWRlbnRpYWxQcm92aWRlciIsImNhdXNlIiwibW9uZ29kYkNsaWVudEVuY3J5cHRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/deps.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/encrypter.js":
/*!***********************************************!*\
  !*** ./node_modules/mongodb/lib/encrypter.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Encrypter = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst auto_encrypter_1 = __webpack_require__(/*! ./client-side-encryption/auto_encrypter */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/auto_encrypter.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst deps_1 = __webpack_require__(/*! ./deps */ \"(ssr)/./node_modules/mongodb/lib/deps.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_client_1 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\n/** @internal */ const kInternalClient = Symbol(\"internalClient\");\n/** @internal */ class Encrypter {\n    constructor(client, uri, options){\n        if (typeof options.autoEncryption !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Option \"autoEncryption\" must be specified');\n        }\n        // initialize to null, if we call getInternalClient, we may set this it is important to not overwrite those function calls.\n        this[kInternalClient] = null;\n        this.bypassAutoEncryption = !!options.autoEncryption.bypassAutoEncryption;\n        this.needsConnecting = false;\n        if (options.maxPoolSize === 0 && options.autoEncryption.keyVaultClient == null) {\n            options.autoEncryption.keyVaultClient = client;\n        } else if (options.autoEncryption.keyVaultClient == null) {\n            options.autoEncryption.keyVaultClient = this.getInternalClient(client, uri, options);\n        }\n        if (this.bypassAutoEncryption) {\n            options.autoEncryption.metadataClient = undefined;\n        } else if (options.maxPoolSize === 0) {\n            options.autoEncryption.metadataClient = client;\n        } else {\n            options.autoEncryption.metadataClient = this.getInternalClient(client, uri, options);\n        }\n        if (options.proxyHost) {\n            options.autoEncryption.proxyOptions = {\n                proxyHost: options.proxyHost,\n                proxyPort: options.proxyPort,\n                proxyUsername: options.proxyUsername,\n                proxyPassword: options.proxyPassword\n            };\n        }\n        this.autoEncrypter = new auto_encrypter_1.AutoEncrypter(client, options.autoEncryption);\n    }\n    getInternalClient(client, uri, options) {\n        // TODO(NODE-4144): Remove new variable for type narrowing\n        let internalClient = this[kInternalClient];\n        if (internalClient == null) {\n            const clonedOptions = {};\n            for (const key of [\n                ...Object.getOwnPropertyNames(options),\n                ...Object.getOwnPropertySymbols(options)\n            ]){\n                if ([\n                    \"autoEncryption\",\n                    \"minPoolSize\",\n                    \"servers\",\n                    \"caseTranslate\",\n                    \"dbName\"\n                ].includes(key)) continue;\n                Reflect.set(clonedOptions, key, Reflect.get(options, key));\n            }\n            clonedOptions.minPoolSize = 0;\n            internalClient = new mongo_client_1.MongoClient(uri, clonedOptions);\n            this[kInternalClient] = internalClient;\n            for (const eventName of constants_1.MONGO_CLIENT_EVENTS){\n                for (const listener of client.listeners(eventName)){\n                    internalClient.on(eventName, listener);\n                }\n            }\n            client.on(\"newListener\", (eventName, listener)=>{\n                internalClient?.on(eventName, listener);\n            });\n            this.needsConnecting = true;\n        }\n        return internalClient;\n    }\n    async connectInternalClient() {\n        // TODO(NODE-4144): Remove new variable for type narrowing\n        const internalClient = this[kInternalClient];\n        if (this.needsConnecting && internalClient != null) {\n            this.needsConnecting = false;\n            await internalClient.connect();\n        }\n    }\n    closeCallback(client, force, callback) {\n        (0, util_1.callbackify)(this.close.bind(this))(client, force, callback);\n    }\n    async close(client, force) {\n        const maybeError = await this.autoEncrypter.teardown(!!force).catch((e)=>e);\n        const internalClient = this[kInternalClient];\n        if (internalClient != null && client !== internalClient) {\n            return internalClient.close(force);\n        }\n        if (maybeError) {\n            throw maybeError;\n        }\n    }\n    static checkForMongoCrypt() {\n        const mongodbClientEncryption = (0, deps_1.getMongoDBClientEncryption)();\n        if (\"kModuleError\" in mongodbClientEncryption) {\n            throw new error_1.MongoMissingDependencyError(\"Auto-encryption requested, but the module is not installed. \" + \"Please add `mongodb-client-encryption` as a dependency of your project\");\n        }\n    }\n}\nexports.Encrypter = Encrypter; //# sourceMappingURL=encrypter.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZW5jcnlwdGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQkFBaUIsR0FBRyxLQUFLO0FBQ3pCLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1DLG1CQUFtQkQsbUJBQU9BLENBQUMsMEhBQXlDO0FBQzFFLE1BQU1FLGNBQWNGLG1CQUFPQSxDQUFDLGtFQUFhO0FBQ3pDLE1BQU1HLFNBQVNILG1CQUFPQSxDQUFDLHdEQUFRO0FBQy9CLE1BQU1JLFVBQVVKLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLE1BQU1LLGlCQUFpQkwsbUJBQU9BLENBQUMsd0VBQWdCO0FBQy9DLGNBQWMsR0FDZCxNQUFNTSxrQkFBa0JDLE9BQU87QUFDL0IsY0FBYyxHQUNkLE1BQU1UO0lBQ0ZVLFlBQVlDLE1BQU0sRUFBRUMsR0FBRyxFQUFFQyxPQUFPLENBQUU7UUFDOUIsSUFBSSxPQUFPQSxRQUFRQyxjQUFjLEtBQUssVUFBVTtZQUM1QyxNQUFNLElBQUlSLFFBQVFTLHlCQUF5QixDQUFDO1FBQ2hEO1FBQ0EsMkhBQTJIO1FBQzNILElBQUksQ0FBQ1AsZ0JBQWdCLEdBQUc7UUFDeEIsSUFBSSxDQUFDUSxvQkFBb0IsR0FBRyxDQUFDLENBQUNILFFBQVFDLGNBQWMsQ0FBQ0Usb0JBQW9CO1FBQ3pFLElBQUksQ0FBQ0MsZUFBZSxHQUFHO1FBQ3ZCLElBQUlKLFFBQVFLLFdBQVcsS0FBSyxLQUFLTCxRQUFRQyxjQUFjLENBQUNLLGNBQWMsSUFBSSxNQUFNO1lBQzVFTixRQUFRQyxjQUFjLENBQUNLLGNBQWMsR0FBR1I7UUFDNUMsT0FDSyxJQUFJRSxRQUFRQyxjQUFjLENBQUNLLGNBQWMsSUFBSSxNQUFNO1lBQ3BETixRQUFRQyxjQUFjLENBQUNLLGNBQWMsR0FBRyxJQUFJLENBQUNDLGlCQUFpQixDQUFDVCxRQUFRQyxLQUFL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SyxZQUFZO1lBQ1osTUFBTUE7UUFDVjtJQUNKO0lBQ0EsT0FBT0kscUJBQXFCO1FBQ3hCLE1BQU1DLDBCQUEwQixDQUFDLEdBQUd0RCxPQUFPdUQsMEJBQTBCO1FBQ3JFLElBQUksa0JBQWtCRCx5QkFBeUI7WUFDM0MsTUFBTSxJQUFJckQsUUFBUXVELDJCQUEyQixDQUFDLGlFQUMxQztRQUNSO0lBQ0o7QUFDSjtBQUNBL0QsaUJBQWlCLEdBQUdFLFdBQ3BCLHFDQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZW5jcnlwdGVyLmpzPzkxMjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkVuY3J5cHRlciA9IHZvaWQgMDtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xuY29uc3QgYXV0b19lbmNyeXB0ZXJfMSA9IHJlcXVpcmUoXCIuL2NsaWVudC1zaWRlLWVuY3J5cHRpb24vYXV0b19lbmNyeXB0ZXJcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNvbnN0IGRlcHNfMSA9IHJlcXVpcmUoXCIuL2RlcHNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5jb25zdCBtb25nb19jbGllbnRfMSA9IHJlcXVpcmUoXCIuL21vbmdvX2NsaWVudFwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtJbnRlcm5hbENsaWVudCA9IFN5bWJvbCgnaW50ZXJuYWxDbGllbnQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEVuY3J5cHRlciB7XG4gICAgY29uc3RydWN0b3IoY2xpZW50LCB1cmksIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmF1dG9FbmNyeXB0aW9uICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignT3B0aW9uIFwiYXV0b0VuY3J5cHRpb25cIiBtdXN0IGJlIHNwZWNpZmllZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluaXRpYWxpemUgdG8gbnVsbCwgaWYgd2UgY2FsbCBnZXRJbnRlcm5hbENsaWVudCwgd2UgbWF5IHNldCB0aGlzIGl0IGlzIGltcG9ydGFudCB0byBub3Qgb3ZlcndyaXRlIHRob3NlIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAgICB0aGlzW2tJbnRlcm5hbENsaWVudF0gPSBudWxsO1xuICAgICAgICB0aGlzLmJ5cGFzc0F1dG9FbmNyeXB0aW9uID0gISFvcHRpb25zLmF1dG9FbmNyeXB0aW9uLmJ5cGFzc0F1dG9FbmNyeXB0aW9uO1xuICAgICAgICB0aGlzLm5lZWRzQ29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICBpZiAob3B0aW9ucy5tYXhQb29sU2l6ZSA9PT0gMCAmJiBvcHRpb25zLmF1dG9FbmNyeXB0aW9uLmtleVZhdWx0Q2xpZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b0VuY3J5cHRpb24ua2V5VmF1bHRDbGllbnQgPSBjbGllbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5hdXRvRW5jcnlwdGlvbi5rZXlWYXVsdENsaWVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICBvcHRpb25zLmF1dG9FbmNyeXB0aW9uLmtleVZhdWx0Q2xpZW50ID0gdGhpcy5nZXRJbnRlcm5hbENsaWVudChjbGllbnQsIHVyaSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYnlwYXNzQXV0b0VuY3J5cHRpb24pIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b0VuY3J5cHRpb24ubWV0YWRhdGFDbGllbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5tYXhQb29sU2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgb3B0aW9ucy5hdXRvRW5jcnlwdGlvbi5tZXRhZGF0YUNsaWVudCA9IGNsaWVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b0VuY3J5cHRpb24ubWV0YWRhdGFDbGllbnQgPSB0aGlzLmdldEludGVybmFsQ2xpZW50KGNsaWVudCwgdXJpLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5wcm94eUhvc3QpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b0VuY3J5cHRpb24ucHJveHlPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHByb3h5SG9zdDogb3B0aW9ucy5wcm94eUhvc3QsXG4gICAgICAgICAgICAgICAgcHJveHlQb3J0OiBvcHRpb25zLnByb3h5UG9ydCxcbiAgICAgICAgICAgICAgICBwcm94eVVzZXJuYW1lOiBvcHRpb25zLnByb3h5VXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgcHJveHlQYXNzd29yZDogb3B0aW9ucy5wcm94eVBhc3N3b3JkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXV0b0VuY3J5cHRlciA9IG5ldyBhdXRvX2VuY3J5cHRlcl8xLkF1dG9FbmNyeXB0ZXIoY2xpZW50LCBvcHRpb25zLmF1dG9FbmNyeXB0aW9uKTtcbiAgICB9XG4gICAgZ2V0SW50ZXJuYWxDbGllbnQoY2xpZW50LCB1cmksIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTQxNDQpOiBSZW1vdmUgbmV3IHZhcmlhYmxlIGZvciB0eXBlIG5hcnJvd2luZ1xuICAgICAgICBsZXQgaW50ZXJuYWxDbGllbnQgPSB0aGlzW2tJbnRlcm5hbENsaWVudF07XG4gICAgICAgIGlmIChpbnRlcm5hbENsaWVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjbG9uZWRPcHRpb25zID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBbXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob3B0aW9ucyksXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvcHRpb25zKVxuICAgICAgICAgICAgXSkge1xuICAgICAgICAgICAgICAgIGlmIChbJ2F1dG9FbmNyeXB0aW9uJywgJ21pblBvb2xTaXplJywgJ3NlcnZlcnMnLCAnY2FzZVRyYW5zbGF0ZScsICdkYk5hbWUnXS5pbmNsdWRlcyhrZXkpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBSZWZsZWN0LnNldChjbG9uZWRPcHRpb25zLCBrZXksIFJlZmxlY3QuZ2V0KG9wdGlvbnMsIGtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvbmVkT3B0aW9ucy5taW5Qb29sU2l6ZSA9IDA7XG4gICAgICAgICAgICBpbnRlcm5hbENsaWVudCA9IG5ldyBtb25nb19jbGllbnRfMS5Nb25nb0NsaWVudCh1cmksIGNsb25lZE9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpc1trSW50ZXJuYWxDbGllbnRdID0gaW50ZXJuYWxDbGllbnQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBjb25zdGFudHNfMS5NT05HT19DTElFTlRfRVZFTlRTKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBjbGllbnQubGlzdGVuZXJzKGV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxDbGllbnQub24oZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xpZW50Lm9uKCduZXdMaXN0ZW5lcicsIChldmVudE5hbWUsIGxpc3RlbmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaW50ZXJuYWxDbGllbnQ/Lm9uKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm5lZWRzQ29ubmVjdGluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludGVybmFsQ2xpZW50O1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0SW50ZXJuYWxDbGllbnQoKSB7XG4gICAgICAgIC8vIFRPRE8oTk9ERS00MTQ0KTogUmVtb3ZlIG5ldyB2YXJpYWJsZSBmb3IgdHlwZSBuYXJyb3dpbmdcbiAgICAgICAgY29uc3QgaW50ZXJuYWxDbGllbnQgPSB0aGlzW2tJbnRlcm5hbENsaWVudF07XG4gICAgICAgIGlmICh0aGlzLm5lZWRzQ29ubmVjdGluZyAmJiBpbnRlcm5hbENsaWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm5lZWRzQ29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgYXdhaXQgaW50ZXJuYWxDbGllbnQuY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlQ2FsbGJhY2soY2xpZW50LCBmb3JjZSwgY2FsbGJhY2spIHtcbiAgICAgICAgKDAsIHV0aWxfMS5jYWxsYmFja2lmeSkodGhpcy5jbG9zZS5iaW5kKHRoaXMpKShjbGllbnQsIGZvcmNlLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKGNsaWVudCwgZm9yY2UpIHtcbiAgICAgICAgY29uc3QgbWF5YmVFcnJvciA9IGF3YWl0IHRoaXMuYXV0b0VuY3J5cHRlci50ZWFyZG93bighIWZvcmNlKS5jYXRjaChlID0+IGUpO1xuICAgICAgICBjb25zdCBpbnRlcm5hbENsaWVudCA9IHRoaXNba0ludGVybmFsQ2xpZW50XTtcbiAgICAgICAgaWYgKGludGVybmFsQ2xpZW50ICE9IG51bGwgJiYgY2xpZW50ICE9PSBpbnRlcm5hbENsaWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsQ2xpZW50LmNsb3NlKGZvcmNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF5YmVFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbWF5YmVFcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY2hlY2tGb3JNb25nb0NyeXB0KCkge1xuICAgICAgICBjb25zdCBtb25nb2RiQ2xpZW50RW5jcnlwdGlvbiA9ICgwLCBkZXBzXzEuZ2V0TW9uZ29EQkNsaWVudEVuY3J5cHRpb24pKCk7XG4gICAgICAgIGlmICgna01vZHVsZUVycm9yJyBpbiBtb25nb2RiQ2xpZW50RW5jcnlwdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yKCdBdXRvLWVuY3J5cHRpb24gcmVxdWVzdGVkLCBidXQgdGhlIG1vZHVsZSBpcyBub3QgaW5zdGFsbGVkLiAnICtcbiAgICAgICAgICAgICAgICAnUGxlYXNlIGFkZCBgbW9uZ29kYi1jbGllbnQtZW5jcnlwdGlvbmAgYXMgYSBkZXBlbmRlbmN5IG9mIHlvdXIgcHJvamVjdCcpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5FbmNyeXB0ZXIgPSBFbmNyeXB0ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbmNyeXB0ZXIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRW5jcnlwdGVyIiwidXRpbF8xIiwicmVxdWlyZSIsImF1dG9fZW5jcnlwdGVyXzEiLCJjb25zdGFudHNfMSIsImRlcHNfMSIsImVycm9yXzEiLCJtb25nb19jbGllbnRfMSIsImtJbnRlcm5hbENsaWVudCIsIlN5bWJvbCIsImNvbnN0cnVjdG9yIiwiY2xpZW50IiwidXJpIiwib3B0aW9ucyIsImF1dG9FbmNyeXB0aW9uIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImJ5cGFzc0F1dG9FbmNyeXB0aW9uIiwibmVlZHNDb25uZWN0aW5nIiwibWF4UG9vbFNpemUiLCJrZXlWYXVsdENsaWVudCIsImdldEludGVybmFsQ2xpZW50IiwibWV0YWRhdGFDbGllbnQiLCJ1bmRlZmluZWQiLCJwcm94eUhvc3QiLCJwcm94eU9wdGlvbnMiLCJwcm94eVBvcnQiLCJwcm94eVVzZXJuYW1lIiwicHJveHlQYXNzd29yZCIsImF1dG9FbmNyeXB0ZXIiLCJBdXRvRW5jcnlwdGVyIiwiaW50ZXJuYWxDbGllbnQiLCJjbG9uZWRPcHRpb25zIiwia2V5IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImluY2x1ZGVzIiwiUmVmbGVjdCIsInNldCIsImdldCIsIm1pblBvb2xTaXplIiwiTW9uZ29DbGllbnQiLCJldmVudE5hbWUiLCJNT05HT19DTElFTlRfRVZFTlRTIiwibGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJvbiIsImNvbm5lY3RJbnRlcm5hbENsaWVudCIsImNvbm5lY3QiLCJjbG9zZUNhbGxiYWNrIiwiZm9yY2UiLCJjYWxsYmFjayIsImNhbGxiYWNraWZ5IiwiY2xvc2UiLCJiaW5kIiwibWF5YmVFcnJvciIsInRlYXJkb3duIiwiY2F0Y2giLCJlIiwiY2hlY2tGb3JNb25nb0NyeXB0IiwibW9uZ29kYkNsaWVudEVuY3J5cHRpb24iLCJnZXRNb25nb0RCQ2xpZW50RW5jcnlwdGlvbiIsIk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/encrypter.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/error.js":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/lib/error.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isResumableError = exports.isNetworkTimeoutError = exports.isSDAMUnrecoverableError = exports.isNodeShuttingDownError = exports.isRetryableReadError = exports.isRetryableWriteError = exports.needsRetryableWriteLabel = exports.MongoWriteConcernError = exports.MongoServerSelectionError = exports.MongoSystemError = exports.MongoMissingDependencyError = exports.MongoMissingCredentialsError = exports.MongoCompatibilityError = exports.MongoInvalidArgumentError = exports.MongoParseError = exports.MongoNetworkTimeoutError = exports.MongoNetworkError = exports.isNetworkErrorBeforeHandshake = exports.MongoTopologyClosedError = exports.MongoCursorExhaustedError = exports.MongoServerClosedError = exports.MongoCursorInUseError = exports.MongoUnexpectedServerResponseError = exports.MongoGridFSChunkError = exports.MongoGridFSStreamError = exports.MongoTailableCursorError = exports.MongoChangeStreamError = exports.MongoAzureError = exports.MongoAWSError = exports.MongoKerberosError = exports.MongoExpiredSessionError = exports.MongoTransactionError = exports.MongoNotConnectedError = exports.MongoDecompressionError = exports.MongoBatchReExecutionError = exports.MongoRuntimeError = exports.MongoAPIError = exports.MongoDriverError = exports.MongoServerError = exports.MongoError = exports.MongoErrorLabel = exports.GET_MORE_RESUMABLE_CODES = exports.MONGODB_ERROR_CODES = exports.NODE_IS_RECOVERING_ERROR_MESSAGE = exports.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE = exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE = void 0;\n/** @internal */ const kErrorLabels = Symbol(\"errorLabels\");\n/**\n * @internal\n * The legacy error message from the server that indicates the node is not a writable primary\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */ exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE = new RegExp(\"not master\", \"i\");\n/**\n * @internal\n * The legacy error message from the server that indicates the node is not a primary or secondary\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */ exports.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE = new RegExp(\"not master or secondary\", \"i\");\n/**\n * @internal\n * The error message from the server that indicates the node is recovering\n * https://github.com/mongodb/specifications/blob/b07c26dc40d04ac20349f989db531c9845fdd755/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-writable-primary-and-node-is-recovering\n */ exports.NODE_IS_RECOVERING_ERROR_MESSAGE = new RegExp(\"node is recovering\", \"i\");\n/** @internal MongoDB Error Codes */ exports.MONGODB_ERROR_CODES = Object.freeze({\n    HostUnreachable: 6,\n    HostNotFound: 7,\n    NetworkTimeout: 89,\n    ShutdownInProgress: 91,\n    PrimarySteppedDown: 189,\n    ExceededTimeLimit: 262,\n    SocketException: 9001,\n    NotWritablePrimary: 10107,\n    InterruptedAtShutdown: 11600,\n    InterruptedDueToReplStateChange: 11602,\n    NotPrimaryNoSecondaryOk: 13435,\n    NotPrimaryOrSecondary: 13436,\n    StaleShardVersion: 63,\n    StaleEpoch: 150,\n    StaleConfig: 13388,\n    RetryChangeStream: 234,\n    FailedToSatisfyReadPreference: 133,\n    CursorNotFound: 43,\n    LegacyNotPrimary: 10058,\n    WriteConcernFailed: 64,\n    NamespaceNotFound: 26,\n    IllegalOperation: 20,\n    MaxTimeMSExpired: 50,\n    UnknownReplWriteConcern: 79,\n    UnsatisfiableWriteConcern: 100,\n    Reauthenticate: 391\n});\n// From spec@https://github.com/mongodb/specifications/blob/f93d78191f3db2898a59013a7ed5650352ef6da8/source/change-streams/change-streams.rst#resumable-error\nexports.GET_MORE_RESUMABLE_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.HostUnreachable,\n    exports.MONGODB_ERROR_CODES.HostNotFound,\n    exports.MONGODB_ERROR_CODES.NetworkTimeout,\n    exports.MONGODB_ERROR_CODES.ShutdownInProgress,\n    exports.MONGODB_ERROR_CODES.PrimarySteppedDown,\n    exports.MONGODB_ERROR_CODES.ExceededTimeLimit,\n    exports.MONGODB_ERROR_CODES.SocketException,\n    exports.MONGODB_ERROR_CODES.NotWritablePrimary,\n    exports.MONGODB_ERROR_CODES.InterruptedAtShutdown,\n    exports.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,\n    exports.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,\n    exports.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,\n    exports.MONGODB_ERROR_CODES.StaleShardVersion,\n    exports.MONGODB_ERROR_CODES.StaleEpoch,\n    exports.MONGODB_ERROR_CODES.StaleConfig,\n    exports.MONGODB_ERROR_CODES.RetryChangeStream,\n    exports.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,\n    exports.MONGODB_ERROR_CODES.CursorNotFound\n]);\n/** @public */ exports.MongoErrorLabel = Object.freeze({\n    RetryableWriteError: \"RetryableWriteError\",\n    TransientTransactionError: \"TransientTransactionError\",\n    UnknownTransactionCommitResult: \"UnknownTransactionCommitResult\",\n    ResumableChangeStreamError: \"ResumableChangeStreamError\",\n    HandshakeError: \"HandshakeError\",\n    ResetPool: \"ResetPool\",\n    PoolRequstedRetry: \"PoolRequstedRetry\",\n    InterruptInUseConnections: \"InterruptInUseConnections\",\n    NoWritesPerformed: \"NoWritesPerformed\"\n});\nfunction isAggregateError(e) {\n    return e != null && typeof e === \"object\" && \"errors\" in e && Array.isArray(e.errors);\n}\n/**\n * @public\n * @category Error\n *\n * @privateRemarks\n * mongodb-client-encryption has a dependency on this error, it uses the constructor with a string argument\n */ class MongoError extends Error {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, options){\n        super(message, options);\n        this[kErrorLabels] = new Set();\n    }\n    /** @internal */ static buildErrorMessage(e) {\n        if (typeof e === \"string\") {\n            return e;\n        }\n        if (isAggregateError(e) && e.message.length === 0) {\n            return e.errors.length === 0 ? \"AggregateError has an empty errors array. Please check the `cause` property for more information.\" : e.errors.map(({ message })=>message).join(\", \");\n        }\n        return e != null && typeof e === \"object\" && \"message\" in e && typeof e.message === \"string\" ? e.message : \"empty error message\";\n    }\n    get name() {\n        return \"MongoError\";\n    }\n    /** Legacy name for server error responses */ get errmsg() {\n        return this.message;\n    }\n    /**\n     * Checks the error to see if it has an error label\n     *\n     * @param label - The error label to check for\n     * @returns returns true if the error has the provided error label\n     */ hasErrorLabel(label) {\n        return this[kErrorLabels].has(label);\n    }\n    addErrorLabel(label) {\n        this[kErrorLabels].add(label);\n    }\n    get errorLabels() {\n        return Array.from(this[kErrorLabels]);\n    }\n}\nexports.MongoError = MongoError;\n/**\n * An error coming from the mongo server\n *\n * @public\n * @category Error\n */ class MongoServerError extends MongoError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message.message || message.errmsg || message.$err || \"n/a\");\n        if (message.errorLabels) {\n            this[kErrorLabels] = new Set(message.errorLabels);\n        }\n        this.errorResponse = message;\n        for(const name in message){\n            if (name !== \"errorLabels\" && name !== \"errmsg\" && name !== \"message\" && name !== \"errorResponse\") {\n                this[name] = message[name];\n            }\n        }\n    }\n    get name() {\n        return \"MongoServerError\";\n    }\n}\nexports.MongoServerError = MongoServerError;\n/**\n * An error generated by the driver\n *\n * @public\n * @category Error\n */ class MongoDriverError extends MongoError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, options){\n        super(message, options);\n    }\n    get name() {\n        return \"MongoDriverError\";\n    }\n}\nexports.MongoDriverError = MongoDriverError;\n/**\n * An error generated when the driver API is used incorrectly\n *\n * @privateRemarks\n * Should **never** be directly instantiated\n *\n * @public\n * @category Error\n */ class MongoAPIError extends MongoDriverError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, options){\n        super(message, options);\n    }\n    get name() {\n        return \"MongoAPIError\";\n    }\n}\nexports.MongoAPIError = MongoAPIError;\n/**\n * An error generated when the driver encounters unexpected input\n * or reaches an unexpected/invalid internal state\n *\n * @privateRemarks\n * Should **never** be directly instantiated.\n *\n * @public\n * @category Error\n */ class MongoRuntimeError extends MongoDriverError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, options){\n        super(message, options);\n    }\n    get name() {\n        return \"MongoRuntimeError\";\n    }\n}\nexports.MongoRuntimeError = MongoRuntimeError;\n/**\n * An error generated when a batch command is re-executed after one of the commands in the batch\n * has failed\n *\n * @public\n * @category Error\n */ class MongoBatchReExecutionError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message = \"This batch has already been executed, create new batch to execute\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoBatchReExecutionError\";\n    }\n}\nexports.MongoBatchReExecutionError = MongoBatchReExecutionError;\n/**\n * An error generated when the driver fails to decompress\n * data received from the server.\n *\n * @public\n * @category Error\n */ class MongoDecompressionError extends MongoRuntimeError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoDecompressionError\";\n    }\n}\nexports.MongoDecompressionError = MongoDecompressionError;\n/**\n * An error thrown when the user attempts to operate on a database or collection through a MongoClient\n * that has not yet successfully called the \"connect\" method\n *\n * @public\n * @category Error\n */ class MongoNotConnectedError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoNotConnectedError\";\n    }\n}\nexports.MongoNotConnectedError = MongoNotConnectedError;\n/**\n * An error generated when the user makes a mistake in the usage of transactions.\n * (e.g. attempting to commit a transaction with a readPreference other than primary)\n *\n * @public\n * @category Error\n */ class MongoTransactionError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoTransactionError\";\n    }\n}\nexports.MongoTransactionError = MongoTransactionError;\n/**\n * An error generated when the user attempts to operate\n * on a session that has expired or has been closed.\n *\n * @public\n * @category Error\n */ class MongoExpiredSessionError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message = \"Cannot use a session that has ended\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoExpiredSessionError\";\n    }\n}\nexports.MongoExpiredSessionError = MongoExpiredSessionError;\n/**\n * A error generated when the user attempts to authenticate\n * via Kerberos, but fails to connect to the Kerberos client.\n *\n * @public\n * @category Error\n */ class MongoKerberosError extends MongoRuntimeError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoKerberosError\";\n    }\n}\nexports.MongoKerberosError = MongoKerberosError;\n/**\n * A error generated when the user attempts to authenticate\n * via AWS, but fails\n *\n * @public\n * @category Error\n */ class MongoAWSError extends MongoRuntimeError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoAWSError\";\n    }\n}\nexports.MongoAWSError = MongoAWSError;\n/**\n * A error generated when the user attempts to authenticate\n * via Azure, but fails.\n *\n * @public\n * @category Error\n */ class MongoAzureError extends MongoRuntimeError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoAzureError\";\n    }\n}\nexports.MongoAzureError = MongoAzureError;\n/**\n * An error generated when a ChangeStream operation fails to execute.\n *\n * @public\n * @category Error\n */ class MongoChangeStreamError extends MongoRuntimeError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoChangeStreamError\";\n    }\n}\nexports.MongoChangeStreamError = MongoChangeStreamError;\n/**\n * An error thrown when the user calls a function or method not supported on a tailable cursor\n *\n * @public\n * @category Error\n */ class MongoTailableCursorError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message = \"Tailable cursor does not support this operation\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoTailableCursorError\";\n    }\n}\nexports.MongoTailableCursorError = MongoTailableCursorError;\n/** An error generated when a GridFSStream operation fails to execute.\n *\n * @public\n * @category Error\n */ class MongoGridFSStreamError extends MongoRuntimeError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoGridFSStreamError\";\n    }\n}\nexports.MongoGridFSStreamError = MongoGridFSStreamError;\n/**\n * An error generated when a malformed or invalid chunk is\n * encountered when reading from a GridFSStream.\n *\n * @public\n * @category Error\n */ class MongoGridFSChunkError extends MongoRuntimeError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoGridFSChunkError\";\n    }\n}\nexports.MongoGridFSChunkError = MongoGridFSChunkError;\n/**\n * An error generated when a **parsable** unexpected response comes from the server.\n * This is generally an error where the driver in a state expecting a certain behavior to occur in\n * the next message from MongoDB but it receives something else.\n * This error **does not** represent an issue with wire message formatting.\n *\n * #### Example\n * When an operation fails, it is the driver's job to retry it. It must perform serverSelection\n * again to make sure that it attempts the operation against a server in a good state. If server\n * selection returns a server that does not support retryable operations, this error is used.\n * This scenario is unlikely as retryable support would also have been determined on the first attempt\n * but it is possible the state change could report a selectable server that does not support retries.\n *\n * @public\n * @category Error\n */ class MongoUnexpectedServerResponseError extends MongoRuntimeError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoUnexpectedServerResponseError\";\n    }\n}\nexports.MongoUnexpectedServerResponseError = MongoUnexpectedServerResponseError;\n/**\n * An error thrown when the user attempts to add options to a cursor that has already been\n * initialized\n *\n * @public\n * @category Error\n */ class MongoCursorInUseError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message = \"Cursor is already initialized\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoCursorInUseError\";\n    }\n}\nexports.MongoCursorInUseError = MongoCursorInUseError;\n/**\n * An error generated when an attempt is made to operate\n * on a closed/closing server.\n *\n * @public\n * @category Error\n */ class MongoServerClosedError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message = \"Server is closed\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoServerClosedError\";\n    }\n}\nexports.MongoServerClosedError = MongoServerClosedError;\n/**\n * An error thrown when an attempt is made to read from a cursor that has been exhausted\n *\n * @public\n * @category Error\n */ class MongoCursorExhaustedError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message || \"Cursor is exhausted\");\n    }\n    get name() {\n        return \"MongoCursorExhaustedError\";\n    }\n}\nexports.MongoCursorExhaustedError = MongoCursorExhaustedError;\n/**\n * An error generated when an attempt is made to operate on a\n * dropped, or otherwise unavailable, database.\n *\n * @public\n * @category Error\n */ class MongoTopologyClosedError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message = \"Topology is closed\"){\n        super(message);\n    }\n    get name() {\n        return \"MongoTopologyClosedError\";\n    }\n}\nexports.MongoTopologyClosedError = MongoTopologyClosedError;\n/** @internal */ const kBeforeHandshake = Symbol(\"beforeHandshake\");\nfunction isNetworkErrorBeforeHandshake(err) {\n    return err[kBeforeHandshake] === true;\n}\nexports.isNetworkErrorBeforeHandshake = isNetworkErrorBeforeHandshake;\n/**\n * An error indicating an issue with the network, including TCP errors and timeouts.\n * @public\n * @category Error\n */ class MongoNetworkError extends MongoError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, options){\n        super(message, {\n            cause: options?.cause\n        });\n        if (options && typeof options.beforeHandshake === \"boolean\") {\n            this[kBeforeHandshake] = options.beforeHandshake;\n        }\n    }\n    get name() {\n        return \"MongoNetworkError\";\n    }\n}\nexports.MongoNetworkError = MongoNetworkError;\n/**\n * An error indicating a network timeout occurred\n * @public\n * @category Error\n *\n * @privateRemarks\n * mongodb-client-encryption has a dependency on this error with an instanceof check\n */ class MongoNetworkTimeoutError extends MongoNetworkError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, options){\n        super(message, options);\n    }\n    get name() {\n        return \"MongoNetworkTimeoutError\";\n    }\n}\nexports.MongoNetworkTimeoutError = MongoNetworkTimeoutError;\n/**\n * An error used when attempting to parse a value (like a connection string)\n * @public\n * @category Error\n */ class MongoParseError extends MongoDriverError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoParseError\";\n    }\n}\nexports.MongoParseError = MongoParseError;\n/**\n * An error generated when the user supplies malformed or unexpected arguments\n * or when a required argument or field is not provided.\n *\n *\n * @public\n * @category Error\n */ class MongoInvalidArgumentError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoInvalidArgumentError\";\n    }\n}\nexports.MongoInvalidArgumentError = MongoInvalidArgumentError;\n/**\n * An error generated when a feature that is not enabled or allowed for the current server\n * configuration is used\n *\n *\n * @public\n * @category Error\n */ class MongoCompatibilityError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoCompatibilityError\";\n    }\n}\nexports.MongoCompatibilityError = MongoCompatibilityError;\n/**\n * An error generated when the user fails to provide authentication credentials before attempting\n * to connect to a mongo server instance.\n *\n *\n * @public\n * @category Error\n */ class MongoMissingCredentialsError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message){\n        super(message);\n    }\n    get name() {\n        return \"MongoMissingCredentialsError\";\n    }\n}\nexports.MongoMissingCredentialsError = MongoMissingCredentialsError;\n/**\n * An error generated when a required module or dependency is not present in the local environment\n *\n * @public\n * @category Error\n */ class MongoMissingDependencyError extends MongoAPIError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, options = {}){\n        super(message, options);\n    }\n    get name() {\n        return \"MongoMissingDependencyError\";\n    }\n}\nexports.MongoMissingDependencyError = MongoMissingDependencyError;\n/**\n * An error signifying a general system issue\n * @public\n * @category Error\n */ class MongoSystemError extends MongoError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, reason){\n        if (reason && reason.error) {\n            super(MongoError.buildErrorMessage(reason.error.message || reason.error), {\n                cause: reason.error\n            });\n        } else {\n            super(message);\n        }\n        if (reason) {\n            this.reason = reason;\n        }\n        this.code = reason.error?.code;\n    }\n    get name() {\n        return \"MongoSystemError\";\n    }\n}\nexports.MongoSystemError = MongoSystemError;\n/**\n * An error signifying a client-side server selection error\n * @public\n * @category Error\n */ class MongoServerSelectionError extends MongoSystemError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, reason){\n        super(message, reason);\n    }\n    get name() {\n        return \"MongoServerSelectionError\";\n    }\n}\nexports.MongoServerSelectionError = MongoServerSelectionError;\nfunction makeWriteConcernResultObject(input) {\n    const output = Object.assign({}, input);\n    if (output.ok === 0) {\n        output.ok = 1;\n        delete output.errmsg;\n        delete output.code;\n        delete output.codeName;\n    }\n    return output;\n}\n/**\n * An error thrown when the server reports a writeConcernError\n * @public\n * @category Error\n */ class MongoWriteConcernError extends MongoServerError {\n    /**\n     * **Do not use this constructor!**\n     *\n     * Meant for internal use only.\n     *\n     * @remarks\n     * This class is only meant to be constructed within the driver. This constructor is\n     * not subject to semantic versioning compatibility guarantees and may change at any time.\n     *\n     * @public\n     **/ constructor(message, result){\n        if (result && Array.isArray(result.errorLabels)) {\n            message.errorLabels = result.errorLabels;\n        }\n        super(message);\n        this.errInfo = message.errInfo;\n        if (result != null) {\n            this.result = makeWriteConcernResultObject(result);\n        }\n    }\n    get name() {\n        return \"MongoWriteConcernError\";\n    }\n}\nexports.MongoWriteConcernError = MongoWriteConcernError;\n// https://github.com/mongodb/specifications/blob/master/source/retryable-reads/retryable-reads.rst#retryable-error\nconst RETRYABLE_READ_ERROR_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.HostUnreachable,\n    exports.MONGODB_ERROR_CODES.HostNotFound,\n    exports.MONGODB_ERROR_CODES.NetworkTimeout,\n    exports.MONGODB_ERROR_CODES.ShutdownInProgress,\n    exports.MONGODB_ERROR_CODES.PrimarySteppedDown,\n    exports.MONGODB_ERROR_CODES.SocketException,\n    exports.MONGODB_ERROR_CODES.NotWritablePrimary,\n    exports.MONGODB_ERROR_CODES.InterruptedAtShutdown,\n    exports.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,\n    exports.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,\n    exports.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,\n    exports.MONGODB_ERROR_CODES.ExceededTimeLimit\n]);\n// see: https://github.com/mongodb/specifications/blob/master/source/retryable-writes/retryable-writes.rst#terms\nconst RETRYABLE_WRITE_ERROR_CODES = RETRYABLE_READ_ERROR_CODES;\nfunction needsRetryableWriteLabel(error, maxWireVersion) {\n    // pre-4.4 server, then the driver adds an error label for every valid case\n    // execute operation will only inspect the label, code/message logic is handled here\n    if (error instanceof MongoNetworkError) {\n        return true;\n    }\n    if (error instanceof MongoError) {\n        if ((maxWireVersion >= 9 || isRetryableWriteError(error)) && !error.hasErrorLabel(exports.MongoErrorLabel.HandshakeError)) {\n            // If we already have the error label no need to add it again. 4.4+ servers add the label.\n            // In the case where we have a handshake error, need to fall down to the logic checking\n            // the codes.\n            return false;\n        }\n    }\n    if (error instanceof MongoWriteConcernError) {\n        return RETRYABLE_WRITE_ERROR_CODES.has(error.result?.code ?? error.code ?? 0);\n    }\n    if (error instanceof MongoError && typeof error.code === \"number\") {\n        return RETRYABLE_WRITE_ERROR_CODES.has(error.code);\n    }\n    const isNotWritablePrimaryError = exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(error.message);\n    if (isNotWritablePrimaryError) {\n        return true;\n    }\n    const isNodeIsRecoveringError = exports.NODE_IS_RECOVERING_ERROR_MESSAGE.test(error.message);\n    if (isNodeIsRecoveringError) {\n        return true;\n    }\n    return false;\n}\nexports.needsRetryableWriteLabel = needsRetryableWriteLabel;\nfunction isRetryableWriteError(error) {\n    return error.hasErrorLabel(exports.MongoErrorLabel.RetryableWriteError) || error.hasErrorLabel(exports.MongoErrorLabel.PoolRequstedRetry);\n}\nexports.isRetryableWriteError = isRetryableWriteError;\n/** Determines whether an error is something the driver should attempt to retry */ function isRetryableReadError(error) {\n    const hasRetryableErrorCode = typeof error.code === \"number\" ? RETRYABLE_READ_ERROR_CODES.has(error.code) : false;\n    if (hasRetryableErrorCode) {\n        return true;\n    }\n    if (error instanceof MongoNetworkError) {\n        return true;\n    }\n    const isNotWritablePrimaryError = exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(error.message);\n    if (isNotWritablePrimaryError) {\n        return true;\n    }\n    const isNodeIsRecoveringError = exports.NODE_IS_RECOVERING_ERROR_MESSAGE.test(error.message);\n    if (isNodeIsRecoveringError) {\n        return true;\n    }\n    return false;\n}\nexports.isRetryableReadError = isRetryableReadError;\nconst SDAM_RECOVERING_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.ShutdownInProgress,\n    exports.MONGODB_ERROR_CODES.PrimarySteppedDown,\n    exports.MONGODB_ERROR_CODES.InterruptedAtShutdown,\n    exports.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,\n    exports.MONGODB_ERROR_CODES.NotPrimaryOrSecondary\n]);\nconst SDAM_NOT_PRIMARY_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.NotWritablePrimary,\n    exports.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,\n    exports.MONGODB_ERROR_CODES.LegacyNotPrimary\n]);\nconst SDAM_NODE_SHUTTING_DOWN_ERROR_CODES = new Set([\n    exports.MONGODB_ERROR_CODES.InterruptedAtShutdown,\n    exports.MONGODB_ERROR_CODES.ShutdownInProgress\n]);\nfunction isRecoveringError(err) {\n    if (typeof err.code === \"number\") {\n        // If any error code exists, we ignore the error.message\n        return SDAM_RECOVERING_CODES.has(err.code);\n    }\n    return exports.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(err.message) || exports.NODE_IS_RECOVERING_ERROR_MESSAGE.test(err.message);\n}\nfunction isNotWritablePrimaryError(err) {\n    if (typeof err.code === \"number\") {\n        // If any error code exists, we ignore the error.message\n        return SDAM_NOT_PRIMARY_CODES.has(err.code);\n    }\n    if (isRecoveringError(err)) {\n        return false;\n    }\n    return exports.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(err.message);\n}\nfunction isNodeShuttingDownError(err) {\n    return !!(typeof err.code === \"number\" && SDAM_NODE_SHUTTING_DOWN_ERROR_CODES.has(err.code));\n}\nexports.isNodeShuttingDownError = isNodeShuttingDownError;\n/**\n * Determines whether SDAM can recover from a given error. If it cannot\n * then the pool will be cleared, and server state will completely reset\n * locally.\n *\n * @see https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#not-master-and-node-is-recovering\n */ function isSDAMUnrecoverableError(error) {\n    // NOTE: null check is here for a strictly pre-CMAP world, a timeout or\n    //       close event are considered unrecoverable\n    if (error instanceof MongoParseError || error == null) {\n        return true;\n    }\n    return isRecoveringError(error) || isNotWritablePrimaryError(error);\n}\nexports.isSDAMUnrecoverableError = isSDAMUnrecoverableError;\nfunction isNetworkTimeoutError(err) {\n    return !!(err instanceof MongoNetworkError && err.message.match(/timed out/));\n}\nexports.isNetworkTimeoutError = isNetworkTimeoutError;\nfunction isResumableError(error, wireVersion) {\n    if (error == null || !(error instanceof MongoError)) {\n        return false;\n    }\n    if (error instanceof MongoNetworkError) {\n        return true;\n    }\n    if (wireVersion != null && wireVersion >= 9) {\n        // DRIVERS-1308: For 4.4 drivers running against 4.4 servers, drivers will add a special case to treat the CursorNotFound error code as resumable\n        if (error.code === exports.MONGODB_ERROR_CODES.CursorNotFound) {\n            return true;\n        }\n        return error.hasErrorLabel(exports.MongoErrorLabel.ResumableChangeStreamError);\n    }\n    if (typeof error.code === \"number\") {\n        return exports.GET_MORE_RESUMABLE_CODES.has(error.code);\n    }\n    return false;\n}\nexports.isResumableError = isResumableError; //# sourceMappingURL=error.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHdCQUF3QixHQUFHQSw2QkFBNkIsR0FBR0EsZ0NBQWdDLEdBQUdBLCtCQUErQixHQUFHQSw0QkFBNEIsR0FBR0EsNkJBQTZCLEdBQUdBLGdDQUFnQyxHQUFHQSw4QkFBOEIsR0FBR0EsaUNBQWlDLEdBQUdBLHdCQUF3QixHQUFHQSxtQ0FBbUMsR0FBR0Esb0NBQW9DLEdBQUdBLCtCQUErQixHQUFHQSxpQ0FBaUMsR0FBR0EsdUJBQXVCLEdBQUdBLGdDQUFnQyxHQUFHQSx5QkFBeUIsR0FBR0EscUNBQXFDLEdBQUdBLGdDQUFnQyxHQUFHQSxpQ0FBaUMsR0FBR0EsOEJBQThCLEdBQUdBLDZCQUE2QixHQUFHQSwwQ0FBMEMsR0FBR0EsNkJBQTZCLEdBQUdBLDhCQUE4QixHQUFHQSxnQ0FBZ0MsR0FBR0EsOEJBQThCLEdBQUdBLHVCQUF1QixHQUFHQSxxQkFBcUIsR0FBR0EsMEJBQTBCLEdBQUdBLGdDQUFnQyxHQUFHQSw2QkFBNkIsR0FBR0EsOEJBQThCLEdBQUdBLCtCQUErQixHQUFHQSxrQ0FBa0MsR0FBR0EseUJBQXlCLEdBQUdBLHFCQUFxQixHQUFHQSx3QkFBd0IsR0FBR0Esd0JBQXdCLEdBQUdBLGtCQUFrQixHQUFHQSx1QkFBdUIsR0FBR0EsZ0NBQWdDLEdBQUdBLDJCQUEyQixHQUFHQSx3Q0FBd0MsR0FBR0EscURBQXFELEdBQUdBLGlEQUFpRCxHQUFHLEtBQUs7QUFDaGdELGNBQWMsR0FDZCxNQUFNZ0QsZUFBZUMsT0FBTztBQUM1Qjs7OztDQUlDLEdBQ0RqRCxpREFBaUQsR0FBRyxJQUFJa0QsT0FBTyxjQUFjO0FBQzdFOzs7O0NBSUMsR0FDRGxELHFEQUFxRCxHQUFHLElBQUlrRCxPQUFPLDJCQUEyQjtBQUM5Rjs7OztDQUlDLEdBQ0RsRCx3Q0FBd0MsR0FBRyxJ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LE9BQU8sQ0FBQyxDQUFFQSxDQUFBQSxlQUFlL0YscUJBQXFCK0YsSUFBSWxCLE9BQU8sQ0FBQzJDLEtBQUssQ0FBQyxZQUFXO0FBQy9FO0FBQ0ExSSw2QkFBNkIsR0FBR0c7QUFDaEMsU0FBU0QsaUJBQWlCbUgsS0FBSyxFQUFFc0IsV0FBVztJQUN4QyxJQUFJdEIsU0FBUyxRQUFRLENBQUVBLENBQUFBLGlCQUFpQjVFLFVBQVMsR0FBSTtRQUNqRCxPQUFPO0lBQ1g7SUFDQSxJQUFJNEUsaUJBQWlCbkcsbUJBQW1CO1FBQ3BDLE9BQU87SUFDWDtJQUNBLElBQUl5SCxlQUFlLFFBQVFBLGVBQWUsR0FBRztRQUN6QyxpSkFBaUo7UUFDakosSUFBSXRCLE1BQU1DLElBQUksS0FBS3RILFFBQVE0QyxtQkFBbUIsQ0FBQ3lCLGNBQWMsRUFBRTtZQUMzRCxPQUFPO1FBQ1g7UUFDQSxPQUFPZ0QsTUFBTWQsYUFBYSxDQUFDdkcsUUFBUTBDLGVBQWUsQ0FBQ3dDLDBCQUEwQjtJQUNqRjtJQUNBLElBQUksT0FBT21DLE1BQU1DLElBQUksS0FBSyxVQUFVO1FBQ2hDLE9BQU90SCxRQUFRMkMsd0JBQXdCLENBQUM4RCxHQUFHLENBQUNZLE1BQU1DLElBQUk7SUFDMUQ7SUFDQSxPQUFPO0FBQ1g7QUFDQXRILHdCQUF3QixHQUFHRSxrQkFDM0IsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9lcnJvci5qcz8zMDY5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc1Jlc3VtYWJsZUVycm9yID0gZXhwb3J0cy5pc05ldHdvcmtUaW1lb3V0RXJyb3IgPSBleHBvcnRzLmlzU0RBTVVucmVjb3ZlcmFibGVFcnJvciA9IGV4cG9ydHMuaXNOb2RlU2h1dHRpbmdEb3duRXJyb3IgPSBleHBvcnRzLmlzUmV0cnlhYmxlUmVhZEVycm9yID0gZXhwb3J0cy5pc1JldHJ5YWJsZVdyaXRlRXJyb3IgPSBleHBvcnRzLm5lZWRzUmV0cnlhYmxlV3JpdGVMYWJlbCA9IGV4cG9ydHMuTW9uZ29Xcml0ZUNvbmNlcm5FcnJvciA9IGV4cG9ydHMuTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvciA9IGV4cG9ydHMuTW9uZ29TeXN0ZW1FcnJvciA9IGV4cG9ydHMuTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yID0gZXhwb3J0cy5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yID0gZXhwb3J0cy5Nb25nb0NvbXBhdGliaWxpdHlFcnJvciA9IGV4cG9ydHMuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciA9IGV4cG9ydHMuTW9uZ29QYXJzZUVycm9yID0gZXhwb3J0cy5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IgPSBleHBvcnRzLk1vbmdvTmV0d29ya0Vycm9yID0gZXhwb3J0cy5pc05ldHdvcmtFcnJvckJlZm9yZUhhbmRzaGFrZSA9IGV4cG9ydHMuTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yID0gZXhwb3J0cy5Nb25nb0N1cnNvckV4aGF1c3RlZEVycm9yID0gZXhwb3J0cy5Nb25nb1NlcnZlckNsb3NlZEVycm9yID0gZXhwb3J0cy5Nb25nb0N1cnNvckluVXNlRXJyb3IgPSBleHBvcnRzLk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IgPSBleHBvcnRzLk1vbmdvR3JpZEZTQ2h1bmtFcnJvciA9IGV4cG9ydHMuTW9uZ29HcmlkRlNTdHJlYW1FcnJvciA9IGV4cG9ydHMuTW9uZ29UYWlsYWJsZUN1cnNvckVycm9yID0gZXhwb3J0cy5Nb25nb0NoYW5nZVN0cmVhbUVycm9yID0gZXhwb3J0cy5Nb25nb0F6dXJlRXJyb3IgPSBleHBvcnRzLk1vbmdvQVdTRXJyb3IgPSBleHBvcnRzLk1vbmdvS2VyYmVyb3NFcnJvciA9IGV4cG9ydHMuTW9uZ29FeHBpcmVkU2Vzc2lvbkVycm9yID0gZXhwb3J0cy5Nb25nb1RyYW5zYWN0aW9uRXJyb3IgPSBleHBvcnRzLk1vbmdvTm90Q29ubmVjdGVkRXJyb3IgPSBleHBvcnRzLk1vbmdvRGVjb21wcmVzc2lvbkVycm9yID0gZXhwb3J0cy5Nb25nb0JhdGNoUmVFeGVjdXRpb25FcnJvciA9IGV4cG9ydHMuTW9uZ29SdW50aW1lRXJyb3IgPSBleHBvcnRzLk1vbmdvQVBJRXJyb3IgPSBleHBvcnRzLk1vbmdvRHJpdmVyRXJyb3IgPSBleHBvcnRzLk1vbmdvU2VydmVyRXJyb3IgPSBleHBvcnRzLk1vbmdvRXJyb3IgPSBleHBvcnRzLk1vbmdvRXJyb3JMYWJlbCA9IGV4cG9ydHMuR0VUX01PUkVfUkVTVU1BQkxFX0NPREVTID0gZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTID0gZXhwb3J0cy5OT0RFX0lTX1JFQ09WRVJJTkdfRVJST1JfTUVTU0FHRSA9IGV4cG9ydHMuTEVHQUNZX05PVF9QUklNQVJZX09SX1NFQ09OREFSWV9FUlJPUl9NRVNTQUdFID0gZXhwb3J0cy5MRUdBQ1lfTk9UX1dSSVRBQkxFX1BSSU1BUllfRVJST1JfTUVTU0FHRSA9IHZvaWQgMDtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtFcnJvckxhYmVscyA9IFN5bWJvbCgnZXJyb3JMYWJlbHMnKTtcbi8qKlxuICogQGludGVybmFsXG4gKiBUaGUgbGVnYWN5IGVycm9yIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyIHRoYXQgaW5kaWNhdGVzIHRoZSBub2RlIGlzIG5vdCBhIHdyaXRhYmxlIHByaW1hcnlcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9tb25nb2RiL3NwZWNpZmljYXRpb25zL2Jsb2IvYjA3YzI2ZGM0MGQwNGFjMjAzNDlmOTg5ZGI1MzFjOTg0NWZkZDc1NS9zb3VyY2Uvc2VydmVyLWRpc2NvdmVyeS1hbmQtbW9uaXRvcmluZy9zZXJ2ZXItZGlzY292ZXJ5LWFuZC1tb25pdG9yaW5nLnJzdCNub3Qtd3JpdGFibGUtcHJpbWFyeS1hbmQtbm9kZS1pcy1yZWNvdmVyaW5nXG4gKi9cbmV4cG9ydHMuTEVHQUNZX05PVF9XUklUQUJMRV9QUklNQVJZX0VSUk9SX01FU1NBR0UgPSBuZXcgUmVnRXhwKCdub3QgbWFzdGVyJywgJ2knKTtcbi8qKlxuICogQGludGVybmFsXG4gKiBUaGUgbGVnYWN5IGVycm9yIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyIHRoYXQgaW5kaWNhdGVzIHRoZSBub2RlIGlzIG5vdCBhIHByaW1hcnkgb3Igc2Vjb25kYXJ5XG4gKiBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL2IwN2MyNmRjNDBkMDRhYzIwMzQ5Zjk4OWRiNTMxYzk4NDVmZGQ3NTUvc291cmNlL3NlcnZlci1kaXNjb3ZlcnktYW5kLW1vbml0b3Jpbmcvc2VydmVyLWRpc2NvdmVyeS1hbmQtbW9uaXRvcmluZy5yc3Qjbm90LXdyaXRhYmxlLXByaW1hcnktYW5kLW5vZGUtaXMtcmVjb3ZlcmluZ1xuICovXG5leHBvcnRzLkxFR0FDWV9OT1RfUFJJTUFSWV9PUl9TRUNPTkRBUllfRVJST1JfTUVTU0FHRSA9IG5ldyBSZWdFeHAoJ25vdCBtYXN0ZXIgb3Igc2Vjb25kYXJ5JywgJ2knKTtcbi8qKlxuICogQGludGVybmFsXG4gKiBUaGUgZXJyb3IgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXIgdGhhdCBpbmRpY2F0ZXMgdGhlIG5vZGUgaXMgcmVjb3ZlcmluZ1xuICogaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi9iMDdjMjZkYzQwZDA0YWMyMDM0OWY5ODlkYjUzMWM5ODQ1ZmRkNzU1L3NvdXJjZS9zZXJ2ZXItZGlzY292ZXJ5LWFuZC1tb25pdG9yaW5nL3NlcnZlci1kaXNjb3ZlcnktYW5kLW1vbml0b3JpbmcucnN0I25vdC13cml0YWJsZS1wcmltYXJ5LWFuZC1ub2RlLWlzLXJlY292ZXJpbmdcbiAqL1xuZXhwb3J0cy5OT0RFX0lTX1JFQ09WRVJJTkdfRVJST1JfTUVTU0FHRSA9IG5ldyBSZWdFeHAoJ25vZGUgaXMgcmVjb3ZlcmluZycsICdpJyk7XG4vKiogQGludGVybmFsIE1vbmdvREIgRXJyb3IgQ29kZXMgKi9cbmV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUyA9IE9iamVjdC5mcmVlemUoe1xuICAgIEhvc3RVbnJlYWNoYWJsZTogNixcbiAgICBIb3N0Tm90Rm91bmQ6IDcsXG4gICAgTmV0d29ya1RpbWVvdXQ6IDg5LFxuICAgIFNodXRkb3duSW5Qcm9ncmVzczogOTEsXG4gICAgUHJpbWFyeVN0ZXBwZWREb3duOiAxODksXG4gICAgRXhjZWVkZWRUaW1lTGltaXQ6IDI2MixcbiAgICBTb2NrZXRFeGNlcHRpb246IDkwMDEsXG4gICAgTm90V3JpdGFibGVQcmltYXJ5OiAxMDEwNyxcbiAgICBJbnRlcnJ1cHRlZEF0U2h1dGRvd246IDExNjAwLFxuICAgIEludGVycnVwdGVkRHVlVG9SZXBsU3RhdGVDaGFuZ2U6IDExNjAyLFxuICAgIE5vdFByaW1hcnlOb1NlY29uZGFyeU9rOiAxMzQzNSxcbiAgICBOb3RQcmltYXJ5T3JTZWNvbmRhcnk6IDEzNDM2LFxuICAgIFN0YWxlU2hhcmRWZXJzaW9uOiA2MyxcbiAgICBTdGFsZUVwb2NoOiAxNTAsXG4gICAgU3RhbGVDb25maWc6IDEzMzg4LFxuICAgIFJldHJ5Q2hhbmdlU3RyZWFtOiAyMzQsXG4gICAgRmFpbGVkVG9TYXRpc2Z5UmVhZFByZWZlcmVuY2U6IDEzMyxcbiAgICBDdXJzb3JOb3RGb3VuZDogNDMsXG4gICAgTGVnYWN5Tm90UHJpbWFyeTogMTAwNTgsXG4gICAgV3JpdGVDb25jZXJuRmFpbGVkOiA2NCxcbiAgICBOYW1lc3BhY2VOb3RGb3VuZDogMjYsXG4gICAgSWxsZWdhbE9wZXJhdGlvbjogMjAsXG4gICAgTWF4VGltZU1TRXhwaXJlZDogNTAsXG4gICAgVW5rbm93blJlcGxXcml0ZUNvbmNlcm46IDc5LFxuICAgIFVuc2F0aXNmaWFibGVXcml0ZUNvbmNlcm46IDEwMCxcbiAgICBSZWF1dGhlbnRpY2F0ZTogMzkxXG59KTtcbi8vIEZyb20gc3BlY0BodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL2Y5M2Q3ODE5MWYzZGIyODk4YTU5MDEzYTdlZDU2NTAzNTJlZjZkYTgvc291cmNlL2NoYW5nZS1zdHJlYW1zL2NoYW5nZS1zdHJlYW1zLnJzdCNyZXN1bWFibGUtZXJyb3JcbmV4cG9ydHMuR0VUX01PUkVfUkVTVU1BQkxFX0NPREVTID0gbmV3IFNldChbXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkhvc3RVbnJlYWNoYWJsZSxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuSG9zdE5vdEZvdW5kLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5OZXR3b3JrVGltZW91dCxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuU2h1dGRvd25JblByb2dyZXNzLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5QcmltYXJ5U3RlcHBlZERvd24sXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkV4Y2VlZGVkVGltZUxpbWl0LFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5Tb2NrZXRFeGNlcHRpb24sXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5vdFdyaXRhYmxlUHJpbWFyeSxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuSW50ZXJydXB0ZWRBdFNodXRkb3duLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5JbnRlcnJ1cHRlZER1ZVRvUmVwbFN0YXRlQ2hhbmdlLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5Ob3RQcmltYXJ5Tm9TZWNvbmRhcnlPayxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuTm90UHJpbWFyeU9yU2Vjb25kYXJ5LFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5TdGFsZVNoYXJkVmVyc2lvbixcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuU3RhbGVFcG9jaCxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuU3RhbGVDb25maWcsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLlJldHJ5Q2hhbmdlU3RyZWFtLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5GYWlsZWRUb1NhdGlzZnlSZWFkUHJlZmVyZW5jZSxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuQ3Vyc29yTm90Rm91bmRcbl0pO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuTW9uZ29FcnJvckxhYmVsID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgUmV0cnlhYmxlV3JpdGVFcnJvcjogJ1JldHJ5YWJsZVdyaXRlRXJyb3InLFxuICAgIFRyYW5zaWVudFRyYW5zYWN0aW9uRXJyb3I6ICdUcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yJyxcbiAgICBVbmtub3duVHJhbnNhY3Rpb25Db21taXRSZXN1bHQ6ICdVbmtub3duVHJhbnNhY3Rpb25Db21taXRSZXN1bHQnLFxuICAgIFJlc3VtYWJsZUNoYW5nZVN0cmVhbUVycm9yOiAnUmVzdW1hYmxlQ2hhbmdlU3RyZWFtRXJyb3InLFxuICAgIEhhbmRzaGFrZUVycm9yOiAnSGFuZHNoYWtlRXJyb3InLFxuICAgIFJlc2V0UG9vbDogJ1Jlc2V0UG9vbCcsXG4gICAgUG9vbFJlcXVzdGVkUmV0cnk6ICdQb29sUmVxdXN0ZWRSZXRyeScsXG4gICAgSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9uczogJ0ludGVycnVwdEluVXNlQ29ubmVjdGlvbnMnLFxuICAgIE5vV3JpdGVzUGVyZm9ybWVkOiAnTm9Xcml0ZXNQZXJmb3JtZWQnXG59KTtcbmZ1bmN0aW9uIGlzQWdncmVnYXRlRXJyb3IoZSkge1xuICAgIHJldHVybiBlICE9IG51bGwgJiYgdHlwZW9mIGUgPT09ICdvYmplY3QnICYmICdlcnJvcnMnIGluIGUgJiYgQXJyYXkuaXNBcnJheShlLmVycm9ycyk7XG59XG4vKipcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICpcbiAqIEBwcml2YXRlUmVtYXJrc1xuICogbW9uZ29kYi1jbGllbnQtZW5jcnlwdGlvbiBoYXMgYSBkZXBlbmRlbmN5IG9uIHRoaXMgZXJyb3IsIGl0IHVzZXMgdGhlIGNvbnN0cnVjdG9yIHdpdGggYSBzdHJpbmcgYXJndW1lbnRcbiAqL1xuY2xhc3MgTW9uZ29FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpc1trRXJyb3JMYWJlbHNdID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgc3RhdGljIGJ1aWxkRXJyb3JNZXNzYWdlKGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQWdncmVnYXRlRXJyb3IoZSkgJiYgZS5tZXNzYWdlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGUuZXJyb3JzLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgID8gJ0FnZ3JlZ2F0ZUVycm9yIGhhcyBhbiBlbXB0eSBlcnJvcnMgYXJyYXkuIFBsZWFzZSBjaGVjayB0aGUgYGNhdXNlYCBwcm9wZXJ0eSBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nXG4gICAgICAgICAgICAgICAgOiBlLmVycm9ycy5tYXAoKHsgbWVzc2FnZSB9KSA9PiBtZXNzYWdlKS5qb2luKCcsICcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlICE9IG51bGwgJiYgdHlwZW9mIGUgPT09ICdvYmplY3QnICYmICdtZXNzYWdlJyBpbiBlICYmIHR5cGVvZiBlLm1lc3NhZ2UgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGUubWVzc2FnZVxuICAgICAgICAgICAgOiAnZW1wdHkgZXJyb3IgbWVzc2FnZSc7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvRXJyb3InO1xuICAgIH1cbiAgICAvKiogTGVnYWN5IG5hbWUgZm9yIHNlcnZlciBlcnJvciByZXNwb25zZXMgKi9cbiAgICBnZXQgZXJybXNnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIGVycm9yIHRvIHNlZSBpZiBpdCBoYXMgYW4gZXJyb3IgbGFiZWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsYWJlbCAtIFRoZSBlcnJvciBsYWJlbCB0byBjaGVjayBmb3JcbiAgICAgKiBAcmV0dXJucyByZXR1cm5zIHRydWUgaWYgdGhlIGVycm9yIGhhcyB0aGUgcHJvdmlkZWQgZXJyb3IgbGFiZWxcbiAgICAgKi9cbiAgICBoYXNFcnJvckxhYmVsKGxhYmVsKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tFcnJvckxhYmVsc10uaGFzKGxhYmVsKTtcbiAgICB9XG4gICAgYWRkRXJyb3JMYWJlbChsYWJlbCkge1xuICAgICAgICB0aGlzW2tFcnJvckxhYmVsc10uYWRkKGxhYmVsKTtcbiAgICB9XG4gICAgZ2V0IGVycm9yTGFiZWxzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzW2tFcnJvckxhYmVsc10pO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29FcnJvciA9IE1vbmdvRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGNvbWluZyBmcm9tIHRoZSBtb25nbyBzZXJ2ZXJcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29TZXJ2ZXJFcnJvciBleHRlbmRzIE1vbmdvRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UubWVzc2FnZSB8fCBtZXNzYWdlLmVycm1zZyB8fCBtZXNzYWdlLiRlcnIgfHwgJ24vYScpO1xuICAgICAgICBpZiAobWVzc2FnZS5lcnJvckxhYmVscykge1xuICAgICAgICAgICAgdGhpc1trRXJyb3JMYWJlbHNdID0gbmV3IFNldChtZXNzYWdlLmVycm9yTGFiZWxzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVycm9yUmVzcG9uc2UgPSBtZXNzYWdlO1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gbWVzc2FnZSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09ICdlcnJvckxhYmVscycgJiZcbiAgICAgICAgICAgICAgICBuYW1lICE9PSAnZXJybXNnJyAmJlxuICAgICAgICAgICAgICAgIG5hbWUgIT09ICdtZXNzYWdlJyAmJlxuICAgICAgICAgICAgICAgIG5hbWUgIT09ICdlcnJvclJlc3BvbnNlJykge1xuICAgICAgICAgICAgICAgIHRoaXNbbmFtZV0gPSBtZXNzYWdlW25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvU2VydmVyRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29TZXJ2ZXJFcnJvciA9IE1vbmdvU2VydmVyRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGdlbmVyYXRlZCBieSB0aGUgZHJpdmVyXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvRHJpdmVyRXJyb3IgZXh0ZW5kcyBNb25nb0Vycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29Ecml2ZXJFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0RyaXZlckVycm9yID0gTW9uZ29Ecml2ZXJFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gdGhlIGRyaXZlciBBUEkgaXMgdXNlZCBpbmNvcnJlY3RseVxuICpcbiAqIEBwcml2YXRlUmVtYXJrc1xuICogU2hvdWxkICoqbmV2ZXIqKiBiZSBkaXJlY3RseSBpbnN0YW50aWF0ZWRcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29BUElFcnJvciBleHRlbmRzIE1vbmdvRHJpdmVyRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0FQSUVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvQVBJRXJyb3IgPSBNb25nb0FQSUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiB0aGUgZHJpdmVyIGVuY291bnRlcnMgdW5leHBlY3RlZCBpbnB1dFxuICogb3IgcmVhY2hlcyBhbiB1bmV4cGVjdGVkL2ludmFsaWQgaW50ZXJuYWwgc3RhdGVcbiAqXG4gKiBAcHJpdmF0ZVJlbWFya3NcbiAqIFNob3VsZCAqKm5ldmVyKiogYmUgZGlyZWN0bHkgaW5zdGFudGlhdGVkLlxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1J1bnRpbWVFcnJvciBleHRlbmRzIE1vbmdvRHJpdmVyRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1J1bnRpbWVFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb1J1bnRpbWVFcnJvciA9IE1vbmdvUnVudGltZUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiBhIGJhdGNoIGNvbW1hbmQgaXMgcmUtZXhlY3V0ZWQgYWZ0ZXIgb25lIG9mIHRoZSBjb21tYW5kcyBpbiB0aGUgYmF0Y2hcbiAqIGhhcyBmYWlsZWRcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdUaGlzIGJhdGNoIGhhcyBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQsIGNyZWF0ZSBuZXcgYmF0Y2ggdG8gZXhlY3V0ZScpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yID0gTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGdlbmVyYXRlZCB3aGVuIHRoZSBkcml2ZXIgZmFpbHMgdG8gZGVjb21wcmVzc1xuICogZGF0YSByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvRGVjb21wcmVzc2lvbkVycm9yIGV4dGVuZHMgTW9uZ29SdW50aW1lRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0RlY29tcHJlc3Npb25FcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0RlY29tcHJlc3Npb25FcnJvciA9IE1vbmdvRGVjb21wcmVzc2lvbkVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiB0aGUgdXNlciBhdHRlbXB0cyB0byBvcGVyYXRlIG9uIGEgZGF0YWJhc2Ugb3IgY29sbGVjdGlvbiB0aHJvdWdoIGEgTW9uZ29DbGllbnRcbiAqIHRoYXQgaGFzIG5vdCB5ZXQgc3VjY2Vzc2Z1bGx5IGNhbGxlZCB0aGUgXCJjb25uZWN0XCIgbWV0aG9kXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvTm90Q29ubmVjdGVkRXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29Ob3RDb25uZWN0ZWRFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb05vdENvbm5lY3RlZEVycm9yID0gTW9uZ29Ob3RDb25uZWN0ZWRFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gdGhlIHVzZXIgbWFrZXMgYSBtaXN0YWtlIGluIHRoZSB1c2FnZSBvZiB0cmFuc2FjdGlvbnMuXG4gKiAoZS5nLiBhdHRlbXB0aW5nIHRvIGNvbW1pdCBhIHRyYW5zYWN0aW9uIHdpdGggYSByZWFkUHJlZmVyZW5jZSBvdGhlciB0aGFuIHByaW1hcnkpXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvVHJhbnNhY3Rpb25FcnJvciBleHRlbmRzIE1vbmdvQVBJRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1RyYW5zYWN0aW9uRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29UcmFuc2FjdGlvbkVycm9yID0gTW9uZ29UcmFuc2FjdGlvbkVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiB0aGUgdXNlciBhdHRlbXB0cyB0byBvcGVyYXRlXG4gKiBvbiBhIHNlc3Npb24gdGhhdCBoYXMgZXhwaXJlZCBvciBoYXMgYmVlbiBjbG9zZWQuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvRXhwaXJlZFNlc3Npb25FcnJvciBleHRlbmRzIE1vbmdvQVBJRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJ0Nhbm5vdCB1c2UgYSBzZXNzaW9uIHRoYXQgaGFzIGVuZGVkJykge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29FeHBpcmVkU2Vzc2lvbkVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvciA9IE1vbmdvRXhwaXJlZFNlc3Npb25FcnJvcjtcbi8qKlxuICogQSBlcnJvciBnZW5lcmF0ZWQgd2hlbiB0aGUgdXNlciBhdHRlbXB0cyB0byBhdXRoZW50aWNhdGVcbiAqIHZpYSBLZXJiZXJvcywgYnV0IGZhaWxzIHRvIGNvbm5lY3QgdG8gdGhlIEtlcmJlcm9zIGNsaWVudC5cbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29LZXJiZXJvc0Vycm9yIGV4dGVuZHMgTW9uZ29SdW50aW1lRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0tlcmJlcm9zRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29LZXJiZXJvc0Vycm9yID0gTW9uZ29LZXJiZXJvc0Vycm9yO1xuLyoqXG4gKiBBIGVycm9yIGdlbmVyYXRlZCB3aGVuIHRoZSB1c2VyIGF0dGVtcHRzIHRvIGF1dGhlbnRpY2F0ZVxuICogdmlhIEFXUywgYnV0IGZhaWxzXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvQVdTRXJyb3IgZXh0ZW5kcyBNb25nb1J1bnRpbWVFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvQVdTRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29BV1NFcnJvciA9IE1vbmdvQVdTRXJyb3I7XG4vKipcbiAqIEEgZXJyb3IgZ2VuZXJhdGVkIHdoZW4gdGhlIHVzZXIgYXR0ZW1wdHMgdG8gYXV0aGVudGljYXRlXG4gKiB2aWEgQXp1cmUsIGJ1dCBmYWlscy5cbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29BenVyZUVycm9yIGV4dGVuZHMgTW9uZ29SdW50aW1lRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0F6dXJlRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29BenVyZUVycm9yID0gTW9uZ29BenVyZUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiBhIENoYW5nZVN0cmVhbSBvcGVyYXRpb24gZmFpbHMgdG8gZXhlY3V0ZS5cbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29DaGFuZ2VTdHJlYW1FcnJvciBleHRlbmRzIE1vbmdvUnVudGltZUVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29DaGFuZ2VTdHJlYW1FcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NoYW5nZVN0cmVhbUVycm9yID0gTW9uZ29DaGFuZ2VTdHJlYW1FcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgdGhyb3duIHdoZW4gdGhlIHVzZXIgY2FsbHMgYSBmdW5jdGlvbiBvciBtZXRob2Qgbm90IHN1cHBvcnRlZCBvbiBhIHRhaWxhYmxlIGN1cnNvclxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdUYWlsYWJsZSBjdXJzb3IgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIG9wZXJhdGlvbicpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvVGFpbGFibGVDdXJzb3JFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IgPSBNb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3I7XG4vKiogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gYSBHcmlkRlNTdHJlYW0gb3BlcmF0aW9uIGZhaWxzIHRvIGV4ZWN1dGUuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvR3JpZEZTU3RyZWFtRXJyb3IgZXh0ZW5kcyBNb25nb1J1bnRpbWVFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvR3JpZEZTU3RyZWFtRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29HcmlkRlNTdHJlYW1FcnJvciA9IE1vbmdvR3JpZEZTU3RyZWFtRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGdlbmVyYXRlZCB3aGVuIGEgbWFsZm9ybWVkIG9yIGludmFsaWQgY2h1bmsgaXNcbiAqIGVuY291bnRlcmVkIHdoZW4gcmVhZGluZyBmcm9tIGEgR3JpZEZTU3RyZWFtLlxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb0dyaWRGU0NodW5rRXJyb3IgZXh0ZW5kcyBNb25nb1J1bnRpbWVFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvR3JpZEZTQ2h1bmtFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0dyaWRGU0NodW5rRXJyb3IgPSBNb25nb0dyaWRGU0NodW5rRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIGdlbmVyYXRlZCB3aGVuIGEgKipwYXJzYWJsZSoqIHVuZXhwZWN0ZWQgcmVzcG9uc2UgY29tZXMgZnJvbSB0aGUgc2VydmVyLlxuICogVGhpcyBpcyBnZW5lcmFsbHkgYW4gZXJyb3Igd2hlcmUgdGhlIGRyaXZlciBpbiBhIHN0YXRlIGV4cGVjdGluZyBhIGNlcnRhaW4gYmVoYXZpb3IgdG8gb2NjdXIgaW5cbiAqIHRoZSBuZXh0IG1lc3NhZ2UgZnJvbSBNb25nb0RCIGJ1dCBpdCByZWNlaXZlcyBzb21ldGhpbmcgZWxzZS5cbiAqIFRoaXMgZXJyb3IgKipkb2VzIG5vdCoqIHJlcHJlc2VudCBhbiBpc3N1ZSB3aXRoIHdpcmUgbWVzc2FnZSBmb3JtYXR0aW5nLlxuICpcbiAqICMjIyMgRXhhbXBsZVxuICogV2hlbiBhbiBvcGVyYXRpb24gZmFpbHMsIGl0IGlzIHRoZSBkcml2ZXIncyBqb2IgdG8gcmV0cnkgaXQuIEl0IG11c3QgcGVyZm9ybSBzZXJ2ZXJTZWxlY3Rpb25cbiAqIGFnYWluIHRvIG1ha2Ugc3VyZSB0aGF0IGl0IGF0dGVtcHRzIHRoZSBvcGVyYXRpb24gYWdhaW5zdCBhIHNlcnZlciBpbiBhIGdvb2Qgc3RhdGUuIElmIHNlcnZlclxuICogc2VsZWN0aW9uIHJldHVybnMgYSBzZXJ2ZXIgdGhhdCBkb2VzIG5vdCBzdXBwb3J0IHJldHJ5YWJsZSBvcGVyYXRpb25zLCB0aGlzIGVycm9yIGlzIHVzZWQuXG4gKiBUaGlzIHNjZW5hcmlvIGlzIHVubGlrZWx5IGFzIHJldHJ5YWJsZSBzdXBwb3J0IHdvdWxkIGFsc28gaGF2ZSBiZWVuIGRldGVybWluZWQgb24gdGhlIGZpcnN0IGF0dGVtcHRcbiAqIGJ1dCBpdCBpcyBwb3NzaWJsZSB0aGUgc3RhdGUgY2hhbmdlIGNvdWxkIHJlcG9ydCBhIHNlbGVjdGFibGUgc2VydmVyIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCByZXRyaWVzLlxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yIGV4dGVuZHMgTW9uZ29SdW50aW1lRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IgPSBNb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiB0aGUgdXNlciBhdHRlbXB0cyB0byBhZGQgb3B0aW9ucyB0byBhIGN1cnNvciB0aGF0IGhhcyBhbHJlYWR5IGJlZW5cbiAqIGluaXRpYWxpemVkXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvQ3Vyc29ySW5Vc2VFcnJvciBleHRlbmRzIE1vbmdvQVBJRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJ0N1cnNvciBpcyBhbHJlYWR5IGluaXRpYWxpemVkJykge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29DdXJzb3JJblVzZUVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvQ3Vyc29ySW5Vc2VFcnJvciA9IE1vbmdvQ3Vyc29ySW5Vc2VFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gYW4gYXR0ZW1wdCBpcyBtYWRlIHRvIG9wZXJhdGVcbiAqIG9uIGEgY2xvc2VkL2Nsb3Npbmcgc2VydmVyLlxuICpcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1NlcnZlckNsb3NlZEVycm9yIGV4dGVuZHMgTW9uZ29BUElFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnU2VydmVyIGlzIGNsb3NlZCcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvU2VydmVyQ2xvc2VkRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29TZXJ2ZXJDbG9zZWRFcnJvciA9IE1vbmdvU2VydmVyQ2xvc2VkRXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIGFuIGF0dGVtcHQgaXMgbWFkZSB0byByZWFkIGZyb20gYSBjdXJzb3IgdGhhdCBoYXMgYmVlbiBleGhhdXN0ZWRcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29DdXJzb3JFeGhhdXN0ZWRFcnJvciBleHRlbmRzIE1vbmdvQVBJRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0N1cnNvciBpcyBleGhhdXN0ZWQnKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29DdXJzb3JFeGhhdXN0ZWRFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0N1cnNvckV4aGF1c3RlZEVycm9yID0gTW9uZ29DdXJzb3JFeGhhdXN0ZWRFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gYW4gYXR0ZW1wdCBpcyBtYWRlIHRvIG9wZXJhdGUgb24gYVxuICogZHJvcHBlZCwgb3Igb3RoZXJ3aXNlIHVuYXZhaWxhYmxlLCBkYXRhYmFzZS5cbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yIGV4dGVuZHMgTW9uZ29BUElFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnVG9wb2xvZ3kgaXMgY2xvc2VkJykge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvciA9IE1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvcjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtCZWZvcmVIYW5kc2hha2UgPSBTeW1ib2woJ2JlZm9yZUhhbmRzaGFrZScpO1xuZnVuY3Rpb24gaXNOZXR3b3JrRXJyb3JCZWZvcmVIYW5kc2hha2UoZXJyKSB7XG4gICAgcmV0dXJuIGVycltrQmVmb3JlSGFuZHNoYWtlXSA9PT0gdHJ1ZTtcbn1cbmV4cG9ydHMuaXNOZXR3b3JrRXJyb3JCZWZvcmVIYW5kc2hha2UgPSBpc05ldHdvcmtFcnJvckJlZm9yZUhhbmRzaGFrZTtcbi8qKlxuICogQW4gZXJyb3IgaW5kaWNhdGluZyBhbiBpc3N1ZSB3aXRoIHRoZSBuZXR3b3JrLCBpbmNsdWRpbmcgVENQIGVycm9ycyBhbmQgdGltZW91dHMuXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29OZXR3b3JrRXJyb3IgZXh0ZW5kcyBNb25nb0Vycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCB7IGNhdXNlOiBvcHRpb25zPy5jYXVzZSB9KTtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMuYmVmb3JlSGFuZHNoYWtlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRoaXNba0JlZm9yZUhhbmRzaGFrZV0gPSBvcHRpb25zLmJlZm9yZUhhbmRzaGFrZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb05ldHdvcmtFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb05ldHdvcmtFcnJvciA9IE1vbmdvTmV0d29ya0Vycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBpbmRpY2F0aW5nIGEgbmV0d29yayB0aW1lb3V0IG9jY3VycmVkXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqXG4gKiBAcHJpdmF0ZVJlbWFya3NcbiAqIG1vbmdvZGItY2xpZW50LWVuY3J5cHRpb24gaGFzIGEgZGVwZW5kZW5jeSBvbiB0aGlzIGVycm9yIHdpdGggYW4gaW5zdGFuY2VvZiBjaGVja1xuICovXG5jbGFzcyBNb25nb05ldHdvcmtUaW1lb3V0RXJyb3IgZXh0ZW5kcyBNb25nb05ldHdvcmtFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvTmV0d29ya1RpbWVvdXRFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IgPSBNb25nb05ldHdvcmtUaW1lb3V0RXJyb3I7XG4vKipcbiAqIEFuIGVycm9yIHVzZWQgd2hlbiBhdHRlbXB0aW5nIHRvIHBhcnNlIGEgdmFsdWUgKGxpa2UgYSBjb25uZWN0aW9uIHN0cmluZylcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1BhcnNlRXJyb3IgZXh0ZW5kcyBNb25nb0RyaXZlckVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29QYXJzZUVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvUGFyc2VFcnJvciA9IE1vbmdvUGFyc2VFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gdGhlIHVzZXIgc3VwcGxpZXMgbWFsZm9ybWVkIG9yIHVuZXhwZWN0ZWQgYXJndW1lbnRzXG4gKiBvciB3aGVuIGEgcmVxdWlyZWQgYXJndW1lbnQgb3IgZmllbGQgaXMgbm90IHByb3ZpZGVkLlxuICpcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIE1vbmdvQVBJRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IgPSBNb25nb0ludmFsaWRBcmd1bWVudEVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBnZW5lcmF0ZWQgd2hlbiBhIGZlYXR1cmUgdGhhdCBpcyBub3QgZW5hYmxlZCBvciBhbGxvd2VkIGZvciB0aGUgY3VycmVudCBzZXJ2ZXJcbiAqIGNvbmZpZ3VyYXRpb24gaXMgdXNlZFxuICpcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29Db21wYXRpYmlsaXR5RXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IgPSBNb25nb0NvbXBhdGliaWxpdHlFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gdGhlIHVzZXIgZmFpbHMgdG8gcHJvdmlkZSBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBiZWZvcmUgYXR0ZW1wdGluZ1xuICogdG8gY29ubmVjdCB0byBhIG1vbmdvIHNlcnZlciBpbnN0YW5jZS5cbiAqXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IgZXh0ZW5kcyBNb25nb0FQSUVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yID0gTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvcjtcbi8qKlxuICogQW4gZXJyb3IgZ2VuZXJhdGVkIHdoZW4gYSByZXF1aXJlZCBtb2R1bGUgb3IgZGVwZW5kZW5jeSBpcyBub3QgcHJlc2VudCBpbiB0aGUgbG9jYWwgZW52aXJvbm1lbnRcbiAqXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yIGV4dGVuZHMgTW9uZ29BUElFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvciA9IE1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvcjtcbi8qKlxuICogQW4gZXJyb3Igc2lnbmlmeWluZyBhIGdlbmVyYWwgc3lzdGVtIGlzc3VlXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXJyb3JcbiAqL1xuY2xhc3MgTW9uZ29TeXN0ZW1FcnJvciBleHRlbmRzIE1vbmdvRXJyb3Ige1xuICAgIC8qKlxuICAgICAqICoqRG8gbm90IHVzZSB0aGlzIGNvbnN0cnVjdG9yISoqXG4gICAgICpcbiAgICAgKiBNZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgY2xhc3MgaXMgb25seSBtZWFudCB0byBiZSBjb25zdHJ1Y3RlZCB3aXRoaW4gdGhlIGRyaXZlci4gVGhpcyBjb25zdHJ1Y3RvciBpc1xuICAgICAqIG5vdCBzdWJqZWN0IHRvIHNlbWFudGljIHZlcnNpb25pbmcgY29tcGF0aWJpbGl0eSBndWFyYW50ZWVzIGFuZCBtYXkgY2hhbmdlIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZWFzb24pIHtcbiAgICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24uZXJyb3IpIHtcbiAgICAgICAgICAgIHN1cGVyKE1vbmdvRXJyb3IuYnVpbGRFcnJvck1lc3NhZ2UocmVhc29uLmVycm9yLm1lc3NhZ2UgfHwgcmVhc29uLmVycm9yKSwge1xuICAgICAgICAgICAgICAgIGNhdXNlOiByZWFzb24uZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlYXNvbikge1xuICAgICAgICAgICAgdGhpcy5yZWFzb24gPSByZWFzb247XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2RlID0gcmVhc29uLmVycm9yPy5jb2RlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNb25nb1N5c3RlbUVycm9yJztcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvU3lzdGVtRXJyb3IgPSBNb25nb1N5c3RlbUVycm9yO1xuLyoqXG4gKiBBbiBlcnJvciBzaWduaWZ5aW5nIGEgY2xpZW50LXNpZGUgc2VydmVyIHNlbGVjdGlvbiBlcnJvclxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEVycm9yXG4gKi9cbmNsYXNzIE1vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3IgZXh0ZW5kcyBNb25nb1N5c3RlbUVycm9yIHtcbiAgICAvKipcbiAgICAgKiAqKkRvIG5vdCB1c2UgdGhpcyBjb25zdHJ1Y3RvciEqKlxuICAgICAqXG4gICAgICogTWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGlzIGNsYXNzIGlzIG9ubHkgbWVhbnQgdG8gYmUgY29uc3RydWN0ZWQgd2l0aGluIHRoZSBkcml2ZXIuIFRoaXMgY29uc3RydWN0b3IgaXNcbiAgICAgKiBub3Qgc3ViamVjdCB0byBzZW1hbnRpYyB2ZXJzaW9uaW5nIGNvbXBhdGliaWxpdHkgZ3VhcmFudGVlcyBhbmQgbWF5IGNoYW5nZSBhdCBhbnkgdGltZS5cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVhc29uKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHJlYXNvbik7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvciA9IE1vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3I7XG5mdW5jdGlvbiBtYWtlV3JpdGVDb25jZXJuUmVzdWx0T2JqZWN0KGlucHV0KSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gT2JqZWN0LmFzc2lnbih7fSwgaW5wdXQpO1xuICAgIGlmIChvdXRwdXQub2sgPT09IDApIHtcbiAgICAgICAgb3V0cHV0Lm9rID0gMTtcbiAgICAgICAgZGVsZXRlIG91dHB1dC5lcnJtc2c7XG4gICAgICAgIGRlbGV0ZSBvdXRwdXQuY29kZTtcbiAgICAgICAgZGVsZXRlIG91dHB1dC5jb2RlTmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbi8qKlxuICogQW4gZXJyb3IgdGhyb3duIHdoZW4gdGhlIHNlcnZlciByZXBvcnRzIGEgd3JpdGVDb25jZXJuRXJyb3JcbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFcnJvclxuICovXG5jbGFzcyBNb25nb1dyaXRlQ29uY2VybkVycm9yIGV4dGVuZHMgTW9uZ29TZXJ2ZXJFcnJvciB7XG4gICAgLyoqXG4gICAgICogKipEbyBub3QgdXNlIHRoaXMgY29uc3RydWN0b3IhKipcbiAgICAgKlxuICAgICAqIE1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogVGhpcyBjbGFzcyBpcyBvbmx5IG1lYW50IHRvIGJlIGNvbnN0cnVjdGVkIHdpdGhpbiB0aGUgZHJpdmVyLiBUaGlzIGNvbnN0cnVjdG9yIGlzXG4gICAgICogbm90IHN1YmplY3QgdG8gc2VtYW50aWMgdmVyc2lvbmluZyBjb21wYXRpYmlsaXR5IGd1YXJhbnRlZXMgYW5kIG1heSBjaGFuZ2UgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHJlc3VsdCkge1xuICAgICAgICBpZiAocmVzdWx0ICYmIEFycmF5LmlzQXJyYXkocmVzdWx0LmVycm9yTGFiZWxzKSkge1xuICAgICAgICAgICAgbWVzc2FnZS5lcnJvckxhYmVscyA9IHJlc3VsdC5lcnJvckxhYmVscztcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5lcnJJbmZvID0gbWVzc2FnZS5lcnJJbmZvO1xuICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gbWFrZVdyaXRlQ29uY2VyblJlc3VsdE9iamVjdChyZXN1bHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01vbmdvV3JpdGVDb25jZXJuRXJyb3InO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29Xcml0ZUNvbmNlcm5FcnJvciA9IE1vbmdvV3JpdGVDb25jZXJuRXJyb3I7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL21hc3Rlci9zb3VyY2UvcmV0cnlhYmxlLXJlYWRzL3JldHJ5YWJsZS1yZWFkcy5yc3QjcmV0cnlhYmxlLWVycm9yXG5jb25zdCBSRVRSWUFCTEVfUkVBRF9FUlJPUl9DT0RFUyA9IG5ldyBTZXQoW1xuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5Ib3N0VW5yZWFjaGFibGUsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkhvc3ROb3RGb3VuZCxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuTmV0d29ya1RpbWVvdXQsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLlNodXRkb3duSW5Qcm9ncmVzcyxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuUHJpbWFyeVN0ZXBwZWREb3duLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5Tb2NrZXRFeGNlcHRpb24sXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5vdFdyaXRhYmxlUHJpbWFyeSxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuSW50ZXJydXB0ZWRBdFNodXRkb3duLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5JbnRlcnJ1cHRlZER1ZVRvUmVwbFN0YXRlQ2hhbmdlLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5Ob3RQcmltYXJ5Tm9TZWNvbmRhcnlPayxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuTm90UHJpbWFyeU9yU2Vjb25kYXJ5LFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5FeGNlZWRlZFRpbWVMaW1pdFxuXSk7XG4vLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tb25nb2RiL3NwZWNpZmljYXRpb25zL2Jsb2IvbWFzdGVyL3NvdXJjZS9yZXRyeWFibGUtd3JpdGVzL3JldHJ5YWJsZS13cml0ZXMucnN0I3Rlcm1zXG5jb25zdCBSRVRSWUFCTEVfV1JJVEVfRVJST1JfQ09ERVMgPSBSRVRSWUFCTEVfUkVBRF9FUlJPUl9DT0RFUztcbmZ1bmN0aW9uIG5lZWRzUmV0cnlhYmxlV3JpdGVMYWJlbChlcnJvciwgbWF4V2lyZVZlcnNpb24pIHtcbiAgICAvLyBwcmUtNC40IHNlcnZlciwgdGhlbiB0aGUgZHJpdmVyIGFkZHMgYW4gZXJyb3IgbGFiZWwgZm9yIGV2ZXJ5IHZhbGlkIGNhc2VcbiAgICAvLyBleGVjdXRlIG9wZXJhdGlvbiB3aWxsIG9ubHkgaW5zcGVjdCB0aGUgbGFiZWwsIGNvZGUvbWVzc2FnZSBsb2dpYyBpcyBoYW5kbGVkIGhlcmVcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNb25nb05ldHdvcmtFcnJvcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTW9uZ29FcnJvcikge1xuICAgICAgICBpZiAoKG1heFdpcmVWZXJzaW9uID49IDkgfHwgaXNSZXRyeWFibGVXcml0ZUVycm9yKGVycm9yKSkgJiZcbiAgICAgICAgICAgICFlcnJvci5oYXNFcnJvckxhYmVsKGV4cG9ydHMuTW9uZ29FcnJvckxhYmVsLkhhbmRzaGFrZUVycm9yKSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSBlcnJvciBsYWJlbCBubyBuZWVkIHRvIGFkZCBpdCBhZ2Fpbi4gNC40KyBzZXJ2ZXJzIGFkZCB0aGUgbGFiZWwuXG4gICAgICAgICAgICAvLyBJbiB0aGUgY2FzZSB3aGVyZSB3ZSBoYXZlIGEgaGFuZHNoYWtlIGVycm9yLCBuZWVkIHRvIGZhbGwgZG93biB0byB0aGUgbG9naWMgY2hlY2tpbmdcbiAgICAgICAgICAgIC8vIHRoZSBjb2Rlcy5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNb25nb1dyaXRlQ29uY2VybkVycm9yKSB7XG4gICAgICAgIHJldHVybiBSRVRSWUFCTEVfV1JJVEVfRVJST1JfQ09ERVMuaGFzKGVycm9yLnJlc3VsdD8uY29kZSA/PyBlcnJvci5jb2RlID8/IDApO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNb25nb0Vycm9yICYmIHR5cGVvZiBlcnJvci5jb2RlID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gUkVUUllBQkxFX1dSSVRFX0VSUk9SX0NPREVTLmhhcyhlcnJvci5jb2RlKTtcbiAgICB9XG4gICAgY29uc3QgaXNOb3RXcml0YWJsZVByaW1hcnlFcnJvciA9IGV4cG9ydHMuTEVHQUNZX05PVF9XUklUQUJMRV9QUklNQVJZX0VSUk9SX01FU1NBR0UudGVzdChlcnJvci5tZXNzYWdlKTtcbiAgICBpZiAoaXNOb3RXcml0YWJsZVByaW1hcnlFcnJvcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgaXNOb2RlSXNSZWNvdmVyaW5nRXJyb3IgPSBleHBvcnRzLk5PREVfSVNfUkVDT1ZFUklOR19FUlJPUl9NRVNTQUdFLnRlc3QoZXJyb3IubWVzc2FnZSk7XG4gICAgaWYgKGlzTm9kZUlzUmVjb3ZlcmluZ0Vycm9yKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLm5lZWRzUmV0cnlhYmxlV3JpdGVMYWJlbCA9IG5lZWRzUmV0cnlhYmxlV3JpdGVMYWJlbDtcbmZ1bmN0aW9uIGlzUmV0cnlhYmxlV3JpdGVFcnJvcihlcnJvcikge1xuICAgIHJldHVybiAoZXJyb3IuaGFzRXJyb3JMYWJlbChleHBvcnRzLk1vbmdvRXJyb3JMYWJlbC5SZXRyeWFibGVXcml0ZUVycm9yKSB8fFxuICAgICAgICBlcnJvci5oYXNFcnJvckxhYmVsKGV4cG9ydHMuTW9uZ29FcnJvckxhYmVsLlBvb2xSZXF1c3RlZFJldHJ5KSk7XG59XG5leHBvcnRzLmlzUmV0cnlhYmxlV3JpdGVFcnJvciA9IGlzUmV0cnlhYmxlV3JpdGVFcnJvcjtcbi8qKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgaXMgc29tZXRoaW5nIHRoZSBkcml2ZXIgc2hvdWxkIGF0dGVtcHQgdG8gcmV0cnkgKi9cbmZ1bmN0aW9uIGlzUmV0cnlhYmxlUmVhZEVycm9yKGVycm9yKSB7XG4gICAgY29uc3QgaGFzUmV0cnlhYmxlRXJyb3JDb2RlID0gdHlwZW9mIGVycm9yLmNvZGUgPT09ICdudW1iZXInID8gUkVUUllBQkxFX1JFQURfRVJST1JfQ09ERVMuaGFzKGVycm9yLmNvZGUpIDogZmFsc2U7XG4gICAgaWYgKGhhc1JldHJ5YWJsZUVycm9yQ29kZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTW9uZ29OZXR3b3JrRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGlzTm90V3JpdGFibGVQcmltYXJ5RXJyb3IgPSBleHBvcnRzLkxFR0FDWV9OT1RfV1JJVEFCTEVfUFJJTUFSWV9FUlJPUl9NRVNTQUdFLnRlc3QoZXJyb3IubWVzc2FnZSk7XG4gICAgaWYgKGlzTm90V3JpdGFibGVQcmltYXJ5RXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGlzTm9kZUlzUmVjb3ZlcmluZ0Vycm9yID0gZXhwb3J0cy5OT0RFX0lTX1JFQ09WRVJJTkdfRVJST1JfTUVTU0FHRS50ZXN0KGVycm9yLm1lc3NhZ2UpO1xuICAgIGlmIChpc05vZGVJc1JlY292ZXJpbmdFcnJvcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0cy5pc1JldHJ5YWJsZVJlYWRFcnJvciA9IGlzUmV0cnlhYmxlUmVhZEVycm9yO1xuY29uc3QgU0RBTV9SRUNPVkVSSU5HX0NPREVTID0gbmV3IFNldChbXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLlNodXRkb3duSW5Qcm9ncmVzcyxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuUHJpbWFyeVN0ZXBwZWREb3duLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5JbnRlcnJ1cHRlZEF0U2h1dGRvd24sXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkludGVycnVwdGVkRHVlVG9SZXBsU3RhdGVDaGFuZ2UsXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5vdFByaW1hcnlPclNlY29uZGFyeVxuXSk7XG5jb25zdCBTREFNX05PVF9QUklNQVJZX0NPREVTID0gbmV3IFNldChbXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLk5vdFdyaXRhYmxlUHJpbWFyeSxcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuTm90UHJpbWFyeU5vU2Vjb25kYXJ5T2ssXG4gICAgZXhwb3J0cy5NT05HT0RCX0VSUk9SX0NPREVTLkxlZ2FjeU5vdFByaW1hcnlcbl0pO1xuY29uc3QgU0RBTV9OT0RFX1NIVVRUSU5HX0RPV05fRVJST1JfQ09ERVMgPSBuZXcgU2V0KFtcbiAgICBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuSW50ZXJydXB0ZWRBdFNodXRkb3duLFxuICAgIGV4cG9ydHMuTU9OR09EQl9FUlJPUl9DT0RFUy5TaHV0ZG93bkluUHJvZ3Jlc3Ncbl0pO1xuZnVuY3Rpb24gaXNSZWNvdmVyaW5nRXJyb3IoZXJyKSB7XG4gICAgaWYgKHR5cGVvZiBlcnIuY29kZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgLy8gSWYgYW55IGVycm9yIGNvZGUgZXhpc3RzLCB3ZSBpZ25vcmUgdGhlIGVycm9yLm1lc3NhZ2VcbiAgICAgICAgcmV0dXJuIFNEQU1fUkVDT1ZFUklOR19DT0RFUy5oYXMoZXJyLmNvZGUpO1xuICAgIH1cbiAgICByZXR1cm4gKGV4cG9ydHMuTEVHQUNZX05PVF9QUklNQVJZX09SX1NFQ09OREFSWV9FUlJPUl9NRVNTQUdFLnRlc3QoZXJyLm1lc3NhZ2UpIHx8XG4gICAgICAgIGV4cG9ydHMuTk9ERV9JU19SRUNPVkVSSU5HX0VSUk9SX01FU1NBR0UudGVzdChlcnIubWVzc2FnZSkpO1xufVxuZnVuY3Rpb24gaXNOb3RXcml0YWJsZVByaW1hcnlFcnJvcihlcnIpIHtcbiAgICBpZiAodHlwZW9mIGVyci5jb2RlID09PSAnbnVtYmVyJykge1xuICAgICAgICAvLyBJZiBhbnkgZXJyb3IgY29kZSBleGlzdHMsIHdlIGlnbm9yZSB0aGUgZXJyb3IubWVzc2FnZVxuICAgICAgICByZXR1cm4gU0RBTV9OT1RfUFJJTUFSWV9DT0RFUy5oYXMoZXJyLmNvZGUpO1xuICAgIH1cbiAgICBpZiAoaXNSZWNvdmVyaW5nRXJyb3IoZXJyKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBleHBvcnRzLkxFR0FDWV9OT1RfV1JJVEFCTEVfUFJJTUFSWV9FUlJPUl9NRVNTQUdFLnRlc3QoZXJyLm1lc3NhZ2UpO1xufVxuZnVuY3Rpb24gaXNOb2RlU2h1dHRpbmdEb3duRXJyb3IoZXJyKSB7XG4gICAgcmV0dXJuICEhKHR5cGVvZiBlcnIuY29kZSA9PT0gJ251bWJlcicgJiYgU0RBTV9OT0RFX1NIVVRUSU5HX0RPV05fRVJST1JfQ09ERVMuaGFzKGVyci5jb2RlKSk7XG59XG5leHBvcnRzLmlzTm9kZVNodXR0aW5nRG93bkVycm9yID0gaXNOb2RlU2h1dHRpbmdEb3duRXJyb3I7XG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBTREFNIGNhbiByZWNvdmVyIGZyb20gYSBnaXZlbiBlcnJvci4gSWYgaXQgY2Fubm90XG4gKiB0aGVuIHRoZSBwb29sIHdpbGwgYmUgY2xlYXJlZCwgYW5kIHNlcnZlciBzdGF0ZSB3aWxsIGNvbXBsZXRlbHkgcmVzZXRcbiAqIGxvY2FsbHkuXG4gKlxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL21hc3Rlci9zb3VyY2Uvc2VydmVyLWRpc2NvdmVyeS1hbmQtbW9uaXRvcmluZy9zZXJ2ZXItZGlzY292ZXJ5LWFuZC1tb25pdG9yaW5nLnJzdCNub3QtbWFzdGVyLWFuZC1ub2RlLWlzLXJlY292ZXJpbmdcbiAqL1xuZnVuY3Rpb24gaXNTREFNVW5yZWNvdmVyYWJsZUVycm9yKGVycm9yKSB7XG4gICAgLy8gTk9URTogbnVsbCBjaGVjayBpcyBoZXJlIGZvciBhIHN0cmljdGx5IHByZS1DTUFQIHdvcmxkLCBhIHRpbWVvdXQgb3JcbiAgICAvLyAgICAgICBjbG9zZSBldmVudCBhcmUgY29uc2lkZXJlZCB1bnJlY292ZXJhYmxlXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTW9uZ29QYXJzZUVycm9yIHx8IGVycm9yID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBpc1JlY292ZXJpbmdFcnJvcihlcnJvcikgfHwgaXNOb3RXcml0YWJsZVByaW1hcnlFcnJvcihlcnJvcik7XG59XG5leHBvcnRzLmlzU0RBTVVucmVjb3ZlcmFibGVFcnJvciA9IGlzU0RBTVVucmVjb3ZlcmFibGVFcnJvcjtcbmZ1bmN0aW9uIGlzTmV0d29ya1RpbWVvdXRFcnJvcihlcnIpIHtcbiAgICByZXR1cm4gISEoZXJyIGluc3RhbmNlb2YgTW9uZ29OZXR3b3JrRXJyb3IgJiYgZXJyLm1lc3NhZ2UubWF0Y2goL3RpbWVkIG91dC8pKTtcbn1cbmV4cG9ydHMuaXNOZXR3b3JrVGltZW91dEVycm9yID0gaXNOZXR3b3JrVGltZW91dEVycm9yO1xuZnVuY3Rpb24gaXNSZXN1bWFibGVFcnJvcihlcnJvciwgd2lyZVZlcnNpb24pIHtcbiAgICBpZiAoZXJyb3IgPT0gbnVsbCB8fCAhKGVycm9yIGluc3RhbmNlb2YgTW9uZ29FcnJvcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNb25nb05ldHdvcmtFcnJvcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHdpcmVWZXJzaW9uICE9IG51bGwgJiYgd2lyZVZlcnNpb24gPj0gOSkge1xuICAgICAgICAvLyBEUklWRVJTLTEzMDg6IEZvciA0LjQgZHJpdmVycyBydW5uaW5nIGFnYWluc3QgNC40IHNlcnZlcnMsIGRyaXZlcnMgd2lsbCBhZGQgYSBzcGVjaWFsIGNhc2UgdG8gdHJlYXQgdGhlIEN1cnNvck5vdEZvdW5kIGVycm9yIGNvZGUgYXMgcmVzdW1hYmxlXG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSBleHBvcnRzLk1PTkdPREJfRVJST1JfQ09ERVMuQ3Vyc29yTm90Rm91bmQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcnJvci5oYXNFcnJvckxhYmVsKGV4cG9ydHMuTW9uZ29FcnJvckxhYmVsLlJlc3VtYWJsZUNoYW5nZVN0cmVhbUVycm9yKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlcnJvci5jb2RlID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5HRVRfTU9SRV9SRVNVTUFCTEVfQ09ERVMuaGFzKGVycm9yLmNvZGUpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLmlzUmVzdW1hYmxlRXJyb3IgPSBpc1Jlc3VtYWJsZUVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNSZXN1bWFibGVFcnJvciIsImlzTmV0d29ya1RpbWVvdXRFcnJvciIsImlzU0RBTVVucmVjb3ZlcmFibGVFcnJvciIsImlzTm9kZVNodXR0aW5nRG93bkVycm9yIiwiaXNSZXRyeWFibGVSZWFkRXJyb3IiLCJpc1JldHJ5YWJsZVdyaXRlRXJyb3IiLCJuZWVkc1JldHJ5YWJsZVdyaXRlTGFiZWwiLCJNb25nb1dyaXRlQ29uY2VybkVycm9yIiwiTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvciIsIk1vbmdvU3lzdGVtRXJyb3IiLCJNb25nb01pc3NpbmdEZXBlbmRlbmN5RXJyb3IiLCJNb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiTW9uZ29QYXJzZUVycm9yIiwiTW9uZ29OZXR3b3JrVGltZW91dEVycm9yIiwiTW9uZ29OZXR3b3JrRXJyb3IiLCJpc05ldHdvcmtFcnJvckJlZm9yZUhhbmRzaGFrZSIsIk1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvciIsIk1vbmdvQ3Vyc29yRXhoYXVzdGVkRXJyb3IiLCJNb25nb1NlcnZlckNsb3NlZEVycm9yIiwiTW9uZ29DdXJzb3JJblVzZUVycm9yIiwiTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvciIsIk1vbmdvR3JpZEZTQ2h1bmtFcnJvciIsIk1vbmdvR3JpZEZTU3RyZWFtRXJyb3IiLCJNb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IiLCJNb25nb0NoYW5nZVN0cmVhbUVycm9yIiwiTW9uZ29BenVyZUVycm9yIiwiTW9uZ29BV1NFcnJvciIsIk1vbmdvS2VyYmVyb3NFcnJvciIsIk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvciIsIk1vbmdvVHJhbnNhY3Rpb25FcnJvciIsIk1vbmdvTm90Q29ubmVjdGVkRXJyb3IiLCJNb25nb0RlY29tcHJlc3Npb25FcnJvciIsIk1vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJNb25nb0FQSUVycm9yIiwiTW9uZ29Ecml2ZXJFcnJvciIsIk1vbmdvU2VydmVyRXJyb3IiLCJNb25nb0Vycm9yIiwiTW9uZ29FcnJvckxhYmVsIiwiR0VUX01PUkVfUkVTVU1BQkxFX0NPREVTIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIk5PREVfSVNfUkVDT1ZFUklOR19FUlJPUl9NRVNTQUdFIiwiTEVHQUNZX05PVF9QUklNQVJZX09SX1NFQ09OREFSWV9FUlJPUl9NRVNTQUdFIiwiTEVHQUNZX05PVF9XUklUQUJMRV9QUklNQVJZX0VSUk9SX01FU1NBR0UiLCJrRXJyb3JMYWJlbHMiLCJTeW1ib2wiLCJSZWdFeHAiLCJmcmVlemUiLCJIb3N0VW5yZWFjaGFibGUiLCJIb3N0Tm90Rm91bmQiLCJOZXR3b3JrVGltZW91dCIsIlNodXRkb3duSW5Qcm9ncmVzcyIsIlByaW1hcnlTdGVwcGVkRG93biIsIkV4Y2VlZGVkVGltZUxpbWl0IiwiU29ja2V0RXhjZXB0aW9uIiwiTm90V3JpdGFibGVQcmltYXJ5IiwiSW50ZXJydXB0ZWRBdFNodXRkb3duIiwiSW50ZXJydXB0ZWREdWVUb1JlcGxTdGF0ZUNoYW5nZSIsIk5vdFByaW1hcnlOb1NlY29uZGFyeU9rIiwiTm90UHJpbWFyeU9yU2Vjb25kYXJ5IiwiU3RhbGVTaGFyZFZlcnNpb24iLCJTdGFsZUVwb2NoIiwiU3RhbGVDb25maWciLCJSZXRyeUNoYW5nZVN0cmVhbSIsIkZhaWxlZFRvU2F0aXNmeVJlYWRQcmVmZXJlbmNlIiwiQ3Vyc29yTm90Rm91bmQiLCJMZWdhY3lOb3RQcmltYXJ5IiwiV3JpdGVDb25jZXJuRmFpbGVkIiwiTmFtZXNwYWNlTm90Rm91bmQiLCJJbGxlZ2FsT3BlcmF0aW9uIiwiTWF4VGltZU1TRXhwaXJlZCIsIlVua25vd25SZXBsV3JpdGVDb25jZXJuIiwiVW5zYXRpc2ZpYWJsZVdyaXRlQ29uY2VybiIsIlJlYXV0aGVudGljYXRlIiwiU2V0IiwiUmV0cnlhYmxlV3JpdGVFcnJvciIsIlRyYW5zaWVudFRyYW5zYWN0aW9uRXJyb3IiLCJVbmtub3duVHJhbnNhY3Rpb25Db21taXRSZXN1bHQiLCJSZXN1bWFibGVDaGFuZ2VTdHJlYW1FcnJvciIsIkhhbmRzaGFrZUVycm9yIiwiUmVzZXRQb29sIiwiUG9vbFJlcXVzdGVkUmV0cnkiLCJJbnRlcnJ1cHRJblVzZUNvbm5lY3Rpb25zIiwiTm9Xcml0ZXNQZXJmb3JtZWQiLCJpc0FnZ3JlZ2F0ZUVycm9yIiwiZSIsIkFycmF5IiwiaXNBcnJheSIsImVycm9ycyIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwib3B0aW9ucyIsImJ1aWxkRXJyb3JNZXNzYWdlIiwibGVuZ3RoIiwibWFwIiwiam9pbiIsIm5hbWUiLCJlcnJtc2ciLCJoYXNFcnJvckxhYmVsIiwibGFiZWwiLCJoYXMiLCJhZGRFcnJvckxhYmVsIiwiYWRkIiwiZXJyb3JMYWJlbHMiLCJmcm9tIiwiJGVyciIsImVycm9yUmVzcG9uc2UiLCJrQmVmb3JlSGFuZHNoYWtlIiwiZXJyIiwiY2F1c2UiLCJiZWZvcmVIYW5kc2hha2UiLCJyZWFzb24iLCJlcnJvciIsImNvZGUiLCJtYWtlV3JpdGVDb25jZXJuUmVzdWx0T2JqZWN0IiwiaW5wdXQiLCJvdXRwdXQiLCJhc3NpZ24iLCJvayIsImNvZGVOYW1lIiwicmVzdWx0IiwiZXJySW5mbyIsIlJFVFJZQUJMRV9SRUFEX0VSUk9SX0NPREVTIiwiUkVUUllBQkxFX1dSSVRFX0VSUk9SX0NPREVTIiwibWF4V2lyZVZlcnNpb24iLCJpc05vdFdyaXRhYmxlUHJpbWFyeUVycm9yIiwidGVzdCIsImlzTm9kZUlzUmVjb3ZlcmluZ0Vycm9yIiwiaGFzUmV0cnlhYmxlRXJyb3JDb2RlIiwiU0RBTV9SRUNPVkVSSU5HX0NPREVTIiwiU0RBTV9OT1RfUFJJTUFSWV9DT0RFUyIsIlNEQU1fTk9ERV9TSFVUVElOR19ET1dOX0VSUk9SX0NPREVTIiwiaXNSZWNvdmVyaW5nRXJyb3IiLCJtYXRjaCIsIndpcmVWZXJzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/error.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/explain.js":
/*!*********************************************!*\
  !*** ./node_modules/mongodb/lib/explain.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Explain = exports.ExplainVerbosity = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/** @public */ exports.ExplainVerbosity = Object.freeze({\n    queryPlanner: \"queryPlanner\",\n    queryPlannerExtended: \"queryPlannerExtended\",\n    executionStats: \"executionStats\",\n    allPlansExecution: \"allPlansExecution\"\n});\n/** @internal */ class Explain {\n    constructor(verbosity){\n        if (typeof verbosity === \"boolean\") {\n            this.verbosity = verbosity ? exports.ExplainVerbosity.allPlansExecution : exports.ExplainVerbosity.queryPlanner;\n        } else {\n            this.verbosity = verbosity;\n        }\n    }\n    static fromOptions(options) {\n        if (options?.explain == null) return;\n        const explain = options.explain;\n        if (typeof explain === \"boolean\" || typeof explain === \"string\") {\n            return new Explain(explain);\n        }\n        throw new error_1.MongoInvalidArgumentError('Field \"explain\" must be a string or a boolean');\n    }\n}\nexports.Explain = Explain; //# sourceMappingURL=explain.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZXhwbGFpbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZUFBZSxHQUFHQSx3QkFBd0IsR0FBRyxLQUFLO0FBQ2xELE1BQU1JLFVBQVVDLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLFlBQVksR0FDWkwsd0JBQXdCLEdBQUdGLE9BQU9RLE1BQU0sQ0FBQztJQUNyQ0MsY0FBYztJQUNkQyxzQkFBc0I7SUFDdEJDLGdCQUFnQjtJQUNoQkMsbUJBQW1CO0FBQ3ZCO0FBQ0EsY0FBYyxHQUNkLE1BQU1SO0lBQ0ZTLFlBQVlDLFNBQVMsQ0FBRTtRQUNuQixJQUFJLE9BQU9BLGNBQWMsV0FBVztZQUNoQyxJQUFJLENBQUNBLFNBQVMsR0FBR0EsWUFDWFosUUFBUUcsZ0JBQWdCLENBQUNPLGlCQUFpQixHQUMxQ1YsUUFBUUcsZ0JBQWdCLENBQUNJLFlBQVk7UUFDL0MsT0FDSztZQUNELElBQUksQ0FBQ0ssU0FBUyxHQUFHQTtRQUNyQjtJQUNKO0lBQ0EsT0FBT0MsWUFBWUMsT0FBTyxFQUFFO1FBQ3hCLElBQUlBLFNBQVNDLFdBQVcsTUFDcEI7UUFDSixNQUFNQSxVQUFVRCxRQUFRQyxPQUFPO1FBQy9CLElBQUksT0FBT0EsWUFBWSxhQUFhLE9BQU9BLFlBQVksVUFBVTtZQUM3RCxPQUFPLElBQUliLFFBQVFhO1FBQ3ZCO1FBQ0EsTUFBTSxJQUFJWCxRQUFRWSx5QkFBeUIsQ0FBQztJQUNoRDtBQUNKO0FBQ0FoQixlQUFlLEdBQUdFLFNBQ2xCLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZXhwbGFpbi5qcz82MjYyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FeHBsYWluID0gZXhwb3J0cy5FeHBsYWluVmVyYm9zaXR5ID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuRXhwbGFpblZlcmJvc2l0eSA9IE9iamVjdC5mcmVlemUoe1xuICAgIHF1ZXJ5UGxhbm5lcjogJ3F1ZXJ5UGxhbm5lcicsXG4gICAgcXVlcnlQbGFubmVyRXh0ZW5kZWQ6ICdxdWVyeVBsYW5uZXJFeHRlbmRlZCcsXG4gICAgZXhlY3V0aW9uU3RhdHM6ICdleGVjdXRpb25TdGF0cycsXG4gICAgYWxsUGxhbnNFeGVjdXRpb246ICdhbGxQbGFuc0V4ZWN1dGlvbidcbn0pO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgRXhwbGFpbiB7XG4gICAgY29uc3RydWN0b3IodmVyYm9zaXR5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmVyYm9zaXR5ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRoaXMudmVyYm9zaXR5ID0gdmVyYm9zaXR5XG4gICAgICAgICAgICAgICAgPyBleHBvcnRzLkV4cGxhaW5WZXJib3NpdHkuYWxsUGxhbnNFeGVjdXRpb25cbiAgICAgICAgICAgICAgICA6IGV4cG9ydHMuRXhwbGFpblZlcmJvc2l0eS5xdWVyeVBsYW5uZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZlcmJvc2l0eSA9IHZlcmJvc2l0eTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZnJvbU9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucz8uZXhwbGFpbiA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBleHBsYWluID0gb3B0aW9ucy5leHBsYWluO1xuICAgICAgICBpZiAodHlwZW9mIGV4cGxhaW4gPT09ICdib29sZWFuJyB8fCB0eXBlb2YgZXhwbGFpbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXhwbGFpbihleHBsYWluKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdGaWVsZCBcImV4cGxhaW5cIiBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgYm9vbGVhbicpO1xuICAgIH1cbn1cbmV4cG9ydHMuRXhwbGFpbiA9IEV4cGxhaW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHBsYWluLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkV4cGxhaW4iLCJFeHBsYWluVmVyYm9zaXR5IiwiZXJyb3JfMSIsInJlcXVpcmUiLCJmcmVlemUiLCJxdWVyeVBsYW5uZXIiLCJxdWVyeVBsYW5uZXJFeHRlbmRlZCIsImV4ZWN1dGlvblN0YXRzIiwiYWxsUGxhbnNFeGVjdXRpb24iLCJjb25zdHJ1Y3RvciIsInZlcmJvc2l0eSIsImZyb21PcHRpb25zIiwib3B0aW9ucyIsImV4cGxhaW4iLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/explain.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/gridfs/download.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/gridfs/download.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.GridFSBucketReadStream = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/**\n * A readable stream that enables you to read buffers from GridFS.\n *\n * Do not instantiate this class directly. Use `openDownloadStream()` instead.\n * @public\n */ class GridFSBucketReadStream extends stream_1.Readable {\n    /**\n     * @param chunks - Handle for chunks collection\n     * @param files - Handle for files collection\n     * @param readPreference - The read preference to use\n     * @param filter - The filter to use to find the file document\n     * @internal\n     */ constructor(chunks, files, readPreference, filter, options){\n        super({\n            emitClose: true\n        });\n        this.s = {\n            bytesToTrim: 0,\n            bytesToSkip: 0,\n            bytesRead: 0,\n            chunks,\n            expected: 0,\n            files,\n            filter,\n            init: false,\n            expectedEnd: 0,\n            options: {\n                start: 0,\n                end: 0,\n                ...options\n            },\n            readPreference\n        };\n    }\n    /**\n     * Reads from the cursor and pushes to the stream.\n     * Private Impl, do not call directly\n     * @internal\n     */ _read() {\n        if (this.destroyed) return;\n        waitForFile(this, ()=>doRead(this));\n    }\n    /**\n     * Sets the 0-based offset in bytes to start streaming from. Throws\n     * an error if this stream has entered flowing mode\n     * (e.g. if you've already called `on('data')`)\n     *\n     * @param start - 0-based offset in bytes to start streaming from\n     */ start(start = 0) {\n        throwIfInitialized(this);\n        this.s.options.start = start;\n        return this;\n    }\n    /**\n     * Sets the 0-based offset in bytes to start streaming from. Throws\n     * an error if this stream has entered flowing mode\n     * (e.g. if you've already called `on('data')`)\n     *\n     * @param end - Offset in bytes to stop reading at\n     */ end(end = 0) {\n        throwIfInitialized(this);\n        this.s.options.end = end;\n        return this;\n    }\n    /**\n     * Marks this stream as aborted (will never push another `data` event)\n     * and kills the underlying cursor. Will emit the 'end' event, and then\n     * the 'close' event once the cursor is successfully killed.\n     */ async abort() {\n        this.push(null);\n        this.destroy();\n        await this.s.cursor?.close();\n    }\n}\n/**\n * Fires when the stream loaded the file document corresponding to the provided id.\n * @event\n */ GridFSBucketReadStream.FILE = \"file\";\nexports.GridFSBucketReadStream = GridFSBucketReadStream;\nfunction throwIfInitialized(stream) {\n    if (stream.s.init) {\n        throw new error_1.MongoGridFSStreamError(\"Options cannot be changed after the stream is initialized\");\n    }\n}\nfunction doRead(stream) {\n    if (stream.destroyed) return;\n    if (!stream.s.cursor) return;\n    if (!stream.s.file) return;\n    const handleReadResult = ({ error, doc })=>{\n        if (stream.destroyed) {\n            return;\n        }\n        if (error) {\n            stream.destroy(error);\n            return;\n        }\n        if (!doc) {\n            stream.push(null);\n            stream.s.cursor?.close().then(()=>null, (error)=>stream.destroy(error));\n            return;\n        }\n        if (!stream.s.file) return;\n        const bytesRemaining = stream.s.file.length - stream.s.bytesRead;\n        const expectedN = stream.s.expected++;\n        const expectedLength = Math.min(stream.s.file.chunkSize, bytesRemaining);\n        if (doc.n > expectedN) {\n            return stream.destroy(new error_1.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${doc.n}, expected: ${expectedN}`));\n        }\n        if (doc.n < expectedN) {\n            return stream.destroy(new error_1.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${doc.n}, expected: ${expectedN}`));\n        }\n        let buf = Buffer.isBuffer(doc.data) ? doc.data : doc.data.buffer;\n        if (buf.byteLength !== expectedLength) {\n            if (bytesRemaining <= 0) {\n                return stream.destroy(new error_1.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${doc.n}, expected file length ${stream.s.file.length} bytes but already read ${stream.s.bytesRead} bytes`));\n            }\n            return stream.destroy(new error_1.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${buf.byteLength}, expected: ${expectedLength}`));\n        }\n        stream.s.bytesRead += buf.byteLength;\n        if (buf.byteLength === 0) {\n            return stream.push(null);\n        }\n        let sliceStart = null;\n        let sliceEnd = null;\n        if (stream.s.bytesToSkip != null) {\n            sliceStart = stream.s.bytesToSkip;\n            stream.s.bytesToSkip = 0;\n        }\n        const atEndOfStream = expectedN === stream.s.expectedEnd - 1;\n        const bytesLeftToRead = stream.s.options.end - stream.s.bytesToSkip;\n        if (atEndOfStream && stream.s.bytesToTrim != null) {\n            sliceEnd = stream.s.file.chunkSize - stream.s.bytesToTrim;\n        } else if (stream.s.options.end && bytesLeftToRead < doc.data.byteLength) {\n            sliceEnd = bytesLeftToRead;\n        }\n        if (sliceStart != null || sliceEnd != null) {\n            buf = buf.slice(sliceStart || 0, sliceEnd || buf.byteLength);\n        }\n        stream.push(buf);\n        return;\n    };\n    stream.s.cursor.next().then((doc)=>handleReadResult({\n            error: null,\n            doc\n        }), (error)=>handleReadResult({\n            error,\n            doc: null\n        }));\n}\nfunction init(stream) {\n    const findOneOptions = {};\n    if (stream.s.readPreference) {\n        findOneOptions.readPreference = stream.s.readPreference;\n    }\n    if (stream.s.options && stream.s.options.sort) {\n        findOneOptions.sort = stream.s.options.sort;\n    }\n    if (stream.s.options && stream.s.options.skip) {\n        findOneOptions.skip = stream.s.options.skip;\n    }\n    const handleReadResult = ({ error, doc })=>{\n        if (error) {\n            return stream.destroy(error);\n        }\n        if (!doc) {\n            const identifier = stream.s.filter._id ? stream.s.filter._id.toString() : stream.s.filter.filename;\n            const errmsg = `FileNotFound: file ${identifier} was not found`;\n            // TODO(NODE-3483)\n            const err = new error_1.MongoRuntimeError(errmsg);\n            err.code = \"ENOENT\"; // TODO: NODE-3338 set property as part of constructor\n            return stream.destroy(err);\n        }\n        // If document is empty, kill the stream immediately and don't\n        // execute any reads\n        if (doc.length <= 0) {\n            stream.push(null);\n            return;\n        }\n        if (stream.destroyed) {\n            // If user destroys the stream before we have a cursor, wait\n            // until the query is done to say we're 'closed' because we can't\n            // cancel a query.\n            stream.destroy();\n            return;\n        }\n        try {\n            stream.s.bytesToSkip = handleStartOption(stream, doc, stream.s.options);\n        } catch (error) {\n            return stream.destroy(error);\n        }\n        const filter = {\n            files_id: doc._id\n        };\n        // Currently (MongoDB 3.4.4) skip function does not support the index,\n        // it needs to retrieve all the documents first and then skip them. (CS-25811)\n        // As work around we use $gte on the \"n\" field.\n        if (stream.s.options && stream.s.options.start != null) {\n            const skip = Math.floor(stream.s.options.start / doc.chunkSize);\n            if (skip > 0) {\n                filter[\"n\"] = {\n                    $gte: skip\n                };\n            }\n        }\n        stream.s.cursor = stream.s.chunks.find(filter).sort({\n            n: 1\n        });\n        if (stream.s.readPreference) {\n            stream.s.cursor.withReadPreference(stream.s.readPreference);\n        }\n        stream.s.expectedEnd = Math.ceil(doc.length / doc.chunkSize);\n        stream.s.file = doc;\n        try {\n            stream.s.bytesToTrim = handleEndOption(stream, doc, stream.s.cursor, stream.s.options);\n        } catch (error) {\n            return stream.destroy(error);\n        }\n        stream.emit(GridFSBucketReadStream.FILE, doc);\n        return;\n    };\n    stream.s.files.findOne(stream.s.filter, findOneOptions).then((doc)=>handleReadResult({\n            error: null,\n            doc\n        }), (error)=>handleReadResult({\n            error,\n            doc: null\n        }));\n}\nfunction waitForFile(stream, callback) {\n    if (stream.s.file) {\n        return callback();\n    }\n    if (!stream.s.init) {\n        init(stream);\n        stream.s.init = true;\n    }\n    stream.once(\"file\", ()=>{\n        callback();\n    });\n}\nfunction handleStartOption(stream, doc, options) {\n    if (options && options.start != null) {\n        if (options.start > doc.length) {\n            throw new error_1.MongoInvalidArgumentError(`Stream start (${options.start}) must not be more than the length of the file (${doc.length})`);\n        }\n        if (options.start < 0) {\n            throw new error_1.MongoInvalidArgumentError(`Stream start (${options.start}) must not be negative`);\n        }\n        if (options.end != null && options.end < options.start) {\n            throw new error_1.MongoInvalidArgumentError(`Stream start (${options.start}) must not be greater than stream end (${options.end})`);\n        }\n        stream.s.bytesRead = Math.floor(options.start / doc.chunkSize) * doc.chunkSize;\n        stream.s.expected = Math.floor(options.start / doc.chunkSize);\n        return options.start - stream.s.bytesRead;\n    }\n    throw new error_1.MongoInvalidArgumentError(\"Start option must be defined\");\n}\nfunction handleEndOption(stream, doc, cursor, options) {\n    if (options && options.end != null) {\n        if (options.end > doc.length) {\n            throw new error_1.MongoInvalidArgumentError(`Stream end (${options.end}) must not be more than the length of the file (${doc.length})`);\n        }\n        if (options.start == null || options.start < 0) {\n            throw new error_1.MongoInvalidArgumentError(`Stream end (${options.end}) must not be negative`);\n        }\n        const start = options.start != null ? Math.floor(options.start / doc.chunkSize) : 0;\n        cursor.limit(Math.ceil(options.end / doc.chunkSize) - start);\n        stream.s.expectedEnd = Math.ceil(options.end / doc.chunkSize);\n        return Math.ceil(options.end / doc.chunkSize) * doc.chunkSize - options.end;\n    }\n    throw new error_1.MongoInvalidArgumentError(\"End option must be defined\");\n} //# sourceMappingURL=download.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZ3JpZGZzL2Rvd25sb2FkLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw4QkFBOEIsR0FBRyxLQUFLO0FBQ3RDLE1BQU1HLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDOzs7OztDQUtDLEdBQ0QsTUFBTUYsK0JBQStCQyxTQUFTRyxRQUFRO0lBQ2xEOzs7Ozs7S0FNQyxHQUNEQyxZQUFZQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsY0FBYyxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUN4RCxLQUFLLENBQUM7WUFBRUMsV0FBVztRQUFLO1FBQ3hCLElBQUksQ0FBQ0MsQ0FBQyxHQUFHO1lBQ0xDLGFBQWE7WUFDYkMsYUFBYTtZQUNiQyxXQUFXO1lBQ1hUO1lBQ0FVLFVBQVU7WUFDVlQ7WUFDQUU7WUFDQVEsTUFBTTtZQUNOQyxhQUFhO1lBQ2JSLFNBQVM7Z0JBQ0xTLE9BQU87Z0JBQ1BDLEtBQUs7Z0JBQ0wsR0FBR1YsT0FBTztZQUNkO1lBQ0FGO1FBQ0o7SUFDSjtJQUNBOzs7O0tBSUMsR0FDRGEsUUFBUTtRQUNKLElBQUksSUFBSSxDQUFDQyxTQUFTLEVBQ2Q7UUFDSkMsWUFBWSxJQUFJLEVBQUUsSUFBTUMsT0FBTyxJQUFJO0lBQ3ZDO0lBQ0E7Ozs7OztLQU1DLEdBQ0RMLE1BQU1BLFFBQVEsQ0FBQyxFQUFFO1FBQ2JNLG1CQUFtQixJQUFJO1FBQ3ZCLElBQUksQ0FBQ2IsQ0FBQyxDQUFDRixPQUFPLENBQUNTLEtBQUssR0FBR0E7UUFDdkIsT0FBTyxJQUFJO0lBQ2Y7SUFDQTs7Ozs7O0tBTUMsR0FDREMsSUFBSUEsTUFBTSxDQUFDLEVBQUU7UUFDVEssbUJBQW1CLElBQUk7UUFDdkIsSUFBSSxDQUFDYixDQUFDLENBQUNGLE9BQU8sQ0FBQ1UsR0FB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QUFRZ0YseUJBQXlCLENBQUMsQ0FBQyxZQUFZLEVBQUV6RSxRQUFRVSxHQUFHLENBQUMsZ0RBQWdELEVBQUVpQixJQUFJRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzFJO1FBQ0EsSUFBSTlCLFFBQVFTLEtBQUssSUFBSSxRQUFRVCxRQUFRUyxLQUFLLEdBQUcsR0FBRztZQUM1QyxNQUFNLElBQUloQixRQUFRZ0YseUJBQXlCLENBQUMsQ0FBQyxZQUFZLEVBQUV6RSxRQUFRVSxHQUFHLENBQUMsc0JBQXNCLENBQUM7UUFDbEc7UUFDQSxNQUFNRCxRQUFRVCxRQUFRUyxLQUFLLElBQUksT0FBT3dCLEtBQUs4QixLQUFLLENBQUMvRCxRQUFRUyxLQUFLLEdBQUdrQixJQUFJUSxTQUFTLElBQUk7UUFDbEZoQixPQUFPdUQsS0FBSyxDQUFDekMsS0FBS2tDLElBQUksQ0FBQ25FLFFBQVFVLEdBQUcsR0FBR2lCLElBQUlRLFNBQVMsSUFBSTFCO1FBQ3REYSxPQUFPcEIsQ0FBQyxDQUFDTSxXQUFXLEdBQUd5QixLQUFLa0MsSUFBSSxDQUFDbkUsUUFBUVUsR0FBRyxHQUFHaUIsSUFBSVEsU0FBUztRQUM1RCxPQUFPRixLQUFLa0MsSUFBSSxDQUFDbkUsUUFBUVUsR0FBRyxHQUFHaUIsSUFBSVEsU0FBUyxJQUFJUixJQUFJUSxTQUFTLEdBQUduQyxRQUFRVSxHQUFHO0lBQy9FO0lBQ0EsTUFBTSxJQUFJakIsUUFBUWdGLHlCQUF5QixDQUFDO0FBQ2hELEVBQ0Esb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9ncmlkZnMvZG93bmxvYWQuanM/MWNmMSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuR3JpZEZTQnVja2V0UmVhZFN0cmVhbSA9IHZvaWQgMDtcbmNvbnN0IHN0cmVhbV8xID0gcmVxdWlyZShcInN0cmVhbVwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG4vKipcbiAqIEEgcmVhZGFibGUgc3RyZWFtIHRoYXQgZW5hYmxlcyB5b3UgdG8gcmVhZCBidWZmZXJzIGZyb20gR3JpZEZTLlxuICpcbiAqIERvIG5vdCBpbnN0YW50aWF0ZSB0aGlzIGNsYXNzIGRpcmVjdGx5LiBVc2UgYG9wZW5Eb3dubG9hZFN0cmVhbSgpYCBpbnN0ZWFkLlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBHcmlkRlNCdWNrZXRSZWFkU3RyZWFtIGV4dGVuZHMgc3RyZWFtXzEuUmVhZGFibGUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBjaHVua3MgLSBIYW5kbGUgZm9yIGNodW5rcyBjb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIGZpbGVzIC0gSGFuZGxlIGZvciBmaWxlcyBjb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHJlYWRQcmVmZXJlbmNlIC0gVGhlIHJlYWQgcHJlZmVyZW5jZSB0byB1c2VcbiAgICAgKiBAcGFyYW0gZmlsdGVyIC0gVGhlIGZpbHRlciB0byB1c2UgdG8gZmluZCB0aGUgZmlsZSBkb2N1bWVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNodW5rcywgZmlsZXMsIHJlYWRQcmVmZXJlbmNlLCBmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoeyBlbWl0Q2xvc2U6IHRydWUgfSk7XG4gICAgICAgIHRoaXMucyA9IHtcbiAgICAgICAgICAgIGJ5dGVzVG9UcmltOiAwLFxuICAgICAgICAgICAgYnl0ZXNUb1NraXA6IDAsXG4gICAgICAgICAgICBieXRlc1JlYWQ6IDAsXG4gICAgICAgICAgICBjaHVua3MsXG4gICAgICAgICAgICBleHBlY3RlZDogMCxcbiAgICAgICAgICAgIGZpbGVzLFxuICAgICAgICAgICAgZmlsdGVyLFxuICAgICAgICAgICAgaW5pdDogZmFsc2UsXG4gICAgICAgICAgICBleHBlY3RlZEVuZDogMCxcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBzdGFydDogMCxcbiAgICAgICAgICAgICAgICBlbmQ6IDAsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGN1cnNvciBhbmQgcHVzaGVzIHRvIHRoZSBzdHJlYW0uXG4gICAgICogUHJpdmF0ZSBJbXBsLCBkbyBub3QgY2FsbCBkaXJlY3RseVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9yZWFkKCkge1xuICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHdhaXRGb3JGaWxlKHRoaXMsICgpID0+IGRvUmVhZCh0aGlzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIDAtYmFzZWQgb2Zmc2V0IGluIGJ5dGVzIHRvIHN0YXJ0IHN0cmVhbWluZyBmcm9tLiBUaHJvd3NcbiAgICAgKiBhbiBlcnJvciBpZiB0aGlzIHN0cmVhbSBoYXMgZW50ZXJlZCBmbG93aW5nIG1vZGVcbiAgICAgKiAoZS5nLiBpZiB5b3UndmUgYWxyZWFkeSBjYWxsZWQgYG9uKCdkYXRhJylgKVxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0IC0gMC1iYXNlZCBvZmZzZXQgaW4gYnl0ZXMgdG8gc3RhcnQgc3RyZWFtaW5nIGZyb21cbiAgICAgKi9cbiAgICBzdGFydChzdGFydCA9IDApIHtcbiAgICAgICAgdGhyb3dJZkluaXRpYWxpemVkKHRoaXMpO1xuICAgICAgICB0aGlzLnMub3B0aW9ucy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgMC1iYXNlZCBvZmZzZXQgaW4gYnl0ZXMgdG8gc3RhcnQgc3RyZWFtaW5nIGZyb20uIFRocm93c1xuICAgICAqIGFuIGVycm9yIGlmIHRoaXMgc3RyZWFtIGhhcyBlbnRlcmVkIGZsb3dpbmcgbW9kZVxuICAgICAqIChlLmcuIGlmIHlvdSd2ZSBhbHJlYWR5IGNhbGxlZCBgb24oJ2RhdGEnKWApXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW5kIC0gT2Zmc2V0IGluIGJ5dGVzIHRvIHN0b3AgcmVhZGluZyBhdFxuICAgICAqL1xuICAgIGVuZChlbmQgPSAwKSB7XG4gICAgICAgIHRocm93SWZJbml0aWFsaXplZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zLm9wdGlvbnMuZW5kID0gZW5kO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgYWJvcnRlZCAod2lsbCBuZXZlciBwdXNoIGFub3RoZXIgYGRhdGFgIGV2ZW50KVxuICAgICAqIGFuZCBraWxscyB0aGUgdW5kZXJseWluZyBjdXJzb3IuIFdpbGwgZW1pdCB0aGUgJ2VuZCcgZXZlbnQsIGFuZCB0aGVuXG4gICAgICogdGhlICdjbG9zZScgZXZlbnQgb25jZSB0aGUgY3Vyc29yIGlzIHN1Y2Nlc3NmdWxseSBraWxsZWQuXG4gICAgICovXG4gICAgYXN5bmMgYWJvcnQoKSB7XG4gICAgICAgIHRoaXMucHVzaChudWxsKTtcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgIGF3YWl0IHRoaXMucy5jdXJzb3I/LmNsb3NlKCk7XG4gICAgfVxufVxuLyoqXG4gKiBGaXJlcyB3aGVuIHRoZSBzdHJlYW0gbG9hZGVkIHRoZSBmaWxlIGRvY3VtZW50IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGlkLlxuICogQGV2ZW50XG4gKi9cbkdyaWRGU0J1Y2tldFJlYWRTdHJlYW0uRklMRSA9ICdmaWxlJztcbmV4cG9ydHMuR3JpZEZTQnVja2V0UmVhZFN0cmVhbSA9IEdyaWRGU0J1Y2tldFJlYWRTdHJlYW07XG5mdW5jdGlvbiB0aHJvd0lmSW5pdGlhbGl6ZWQoc3RyZWFtKSB7XG4gICAgaWYgKHN0cmVhbS5zLmluaXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29HcmlkRlNTdHJlYW1FcnJvcignT3B0aW9ucyBjYW5ub3QgYmUgY2hhbmdlZCBhZnRlciB0aGUgc3RyZWFtIGlzIGluaXRpYWxpemVkJyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZG9SZWFkKHN0cmVhbSkge1xuICAgIGlmIChzdHJlYW0uZGVzdHJveWVkKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKCFzdHJlYW0ucy5jdXJzb3IpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoIXN0cmVhbS5zLmZpbGUpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBoYW5kbGVSZWFkUmVzdWx0ID0gKHsgZXJyb3IsIGRvYyB9KSA9PiB7XG4gICAgICAgIGlmIChzdHJlYW0uZGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBzdHJlYW0uZGVzdHJveShlcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkb2MpIHtcbiAgICAgICAgICAgIHN0cmVhbS5wdXNoKG51bGwpO1xuICAgICAgICAgICAgc3RyZWFtLnMuY3Vyc29yPy5jbG9zZSgpLnRoZW4oKCkgPT4gbnVsbCwgZXJyb3IgPT4gc3RyZWFtLmRlc3Ryb3koZXJyb3IpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN0cmVhbS5zLmZpbGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGJ5dGVzUmVtYWluaW5nID0gc3RyZWFtLnMuZmlsZS5sZW5ndGggLSBzdHJlYW0ucy5ieXRlc1JlYWQ7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkTiA9IHN0cmVhbS5zLmV4cGVjdGVkKys7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkTGVuZ3RoID0gTWF0aC5taW4oc3RyZWFtLnMuZmlsZS5jaHVua1NpemUsIGJ5dGVzUmVtYWluaW5nKTtcbiAgICAgICAgaWYgKGRvYy5uID4gZXhwZWN0ZWROKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtLmRlc3Ryb3kobmV3IGVycm9yXzEuTW9uZ29HcmlkRlNDaHVua0Vycm9yKGBDaHVua0lzTWlzc2luZzogR290IHVuZXhwZWN0ZWQgbjogJHtkb2Mubn0sIGV4cGVjdGVkOiAke2V4cGVjdGVkTn1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvYy5uIDwgZXhwZWN0ZWROKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtLmRlc3Ryb3kobmV3IGVycm9yXzEuTW9uZ29HcmlkRlNDaHVua0Vycm9yKGBFeHRyYUNodW5rOiBHb3QgdW5leHBlY3RlZCBuOiAke2RvYy5ufSwgZXhwZWN0ZWQ6ICR7ZXhwZWN0ZWROfWApKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYnVmID0gQnVmZmVyLmlzQnVmZmVyKGRvYy5kYXRhKSA/IGRvYy5kYXRhIDogZG9jLmRhdGEuYnVmZmVyO1xuICAgICAgICBpZiAoYnVmLmJ5dGVMZW5ndGggIT09IGV4cGVjdGVkTGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoYnl0ZXNSZW1haW5pbmcgPD0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHJlYW0uZGVzdHJveShuZXcgZXJyb3JfMS5Nb25nb0dyaWRGU0NodW5rRXJyb3IoYEV4dHJhQ2h1bms6IEdvdCB1bmV4cGVjdGVkIG46ICR7ZG9jLm59LCBleHBlY3RlZCBmaWxlIGxlbmd0aCAke3N0cmVhbS5zLmZpbGUubGVuZ3RofSBieXRlcyBidXQgYWxyZWFkeSByZWFkICR7c3RyZWFtLnMuYnl0ZXNSZWFkfSBieXRlc2ApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHJlYW0uZGVzdHJveShuZXcgZXJyb3JfMS5Nb25nb0dyaWRGU0NodW5rRXJyb3IoYENodW5rSXNXcm9uZ1NpemU6IEdvdCB1bmV4cGVjdGVkIGxlbmd0aDogJHtidWYuYnl0ZUxlbmd0aH0sIGV4cGVjdGVkOiAke2V4cGVjdGVkTGVuZ3RofWApKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0ucy5ieXRlc1JlYWQgKz0gYnVmLmJ5dGVMZW5ndGg7XG4gICAgICAgIGlmIChidWYuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbS5wdXNoKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzbGljZVN0YXJ0ID0gbnVsbDtcbiAgICAgICAgbGV0IHNsaWNlRW5kID0gbnVsbDtcbiAgICAgICAgaWYgKHN0cmVhbS5zLmJ5dGVzVG9Ta2lwICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNsaWNlU3RhcnQgPSBzdHJlYW0ucy5ieXRlc1RvU2tpcDtcbiAgICAgICAgICAgIHN0cmVhbS5zLmJ5dGVzVG9Ta2lwID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdEVuZE9mU3RyZWFtID0gZXhwZWN0ZWROID09PSBzdHJlYW0ucy5leHBlY3RlZEVuZCAtIDE7XG4gICAgICAgIGNvbnN0IGJ5dGVzTGVmdFRvUmVhZCA9IHN0cmVhbS5zLm9wdGlvbnMuZW5kIC0gc3RyZWFtLnMuYnl0ZXNUb1NraXA7XG4gICAgICAgIGlmIChhdEVuZE9mU3RyZWFtICYmIHN0cmVhbS5zLmJ5dGVzVG9UcmltICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNsaWNlRW5kID0gc3RyZWFtLnMuZmlsZS5jaHVua1NpemUgLSBzdHJlYW0ucy5ieXRlc1RvVHJpbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdHJlYW0ucy5vcHRpb25zLmVuZCAmJiBieXRlc0xlZnRUb1JlYWQgPCBkb2MuZGF0YS5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICBzbGljZUVuZCA9IGJ5dGVzTGVmdFRvUmVhZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2xpY2VTdGFydCAhPSBudWxsIHx8IHNsaWNlRW5kICE9IG51bGwpIHtcbiAgICAgICAgICAgIGJ1ZiA9IGJ1Zi5zbGljZShzbGljZVN0YXJ0IHx8IDAsIHNsaWNlRW5kIHx8IGJ1Zi5ieXRlTGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0ucHVzaChidWYpO1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICBzdHJlYW0ucy5jdXJzb3IubmV4dCgpLnRoZW4oZG9jID0+IGhhbmRsZVJlYWRSZXN1bHQoeyBlcnJvcjogbnVsbCwgZG9jIH0pLCBlcnJvciA9PiBoYW5kbGVSZWFkUmVzdWx0KHsgZXJyb3IsIGRvYzogbnVsbCB9KSk7XG59XG5mdW5jdGlvbiBpbml0KHN0cmVhbSkge1xuICAgIGNvbnN0IGZpbmRPbmVPcHRpb25zID0ge307XG4gICAgaWYgKHN0cmVhbS5zLnJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgIGZpbmRPbmVPcHRpb25zLnJlYWRQcmVmZXJlbmNlID0gc3RyZWFtLnMucmVhZFByZWZlcmVuY2U7XG4gICAgfVxuICAgIGlmIChzdHJlYW0ucy5vcHRpb25zICYmIHN0cmVhbS5zLm9wdGlvbnMuc29ydCkge1xuICAgICAgICBmaW5kT25lT3B0aW9ucy5zb3J0ID0gc3RyZWFtLnMub3B0aW9ucy5zb3J0O1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLnMub3B0aW9ucyAmJiBzdHJlYW0ucy5vcHRpb25zLnNraXApIHtcbiAgICAgICAgZmluZE9uZU9wdGlvbnMuc2tpcCA9IHN0cmVhbS5zLm9wdGlvbnMuc2tpcDtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlUmVhZFJlc3VsdCA9ICh7IGVycm9yLCBkb2MgfSkgPT4ge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW0uZGVzdHJveShlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkb2MpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkZW50aWZpZXIgPSBzdHJlYW0ucy5maWx0ZXIuX2lkXG4gICAgICAgICAgICAgICAgPyBzdHJlYW0ucy5maWx0ZXIuX2lkLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICA6IHN0cmVhbS5zLmZpbHRlci5maWxlbmFtZTtcbiAgICAgICAgICAgIGNvbnN0IGVycm1zZyA9IGBGaWxlTm90Rm91bmQ6IGZpbGUgJHtpZGVudGlmaWVyfSB3YXMgbm90IGZvdW5kYDtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKVxuICAgICAgICAgICAgY29uc3QgZXJyID0gbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoZXJybXNnKTtcbiAgICAgICAgICAgIGVyci5jb2RlID0gJ0VOT0VOVCc7IC8vIFRPRE86IE5PREUtMzMzOCBzZXQgcHJvcGVydHkgYXMgcGFydCBvZiBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbS5kZXN0cm95KGVycik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgZG9jdW1lbnQgaXMgZW1wdHksIGtpbGwgdGhlIHN0cmVhbSBpbW1lZGlhdGVseSBhbmQgZG9uJ3RcbiAgICAgICAgLy8gZXhlY3V0ZSBhbnkgcmVhZHNcbiAgICAgICAgaWYgKGRvYy5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgc3RyZWFtLnB1c2gobnVsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cmVhbS5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIC8vIElmIHVzZXIgZGVzdHJveXMgdGhlIHN0cmVhbSBiZWZvcmUgd2UgaGF2ZSBhIGN1cnNvciwgd2FpdFxuICAgICAgICAgICAgLy8gdW50aWwgdGhlIHF1ZXJ5IGlzIGRvbmUgdG8gc2F5IHdlJ3JlICdjbG9zZWQnIGJlY2F1c2Ugd2UgY2FuJ3RcbiAgICAgICAgICAgIC8vIGNhbmNlbCBhIHF1ZXJ5LlxuICAgICAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3RyZWFtLnMuYnl0ZXNUb1NraXAgPSBoYW5kbGVTdGFydE9wdGlvbihzdHJlYW0sIGRvYywgc3RyZWFtLnMub3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtLmRlc3Ryb3koZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbHRlciA9IHsgZmlsZXNfaWQ6IGRvYy5faWQgfTtcbiAgICAgICAgLy8gQ3VycmVudGx5IChNb25nb0RCIDMuNC40KSBza2lwIGZ1bmN0aW9uIGRvZXMgbm90IHN1cHBvcnQgdGhlIGluZGV4LFxuICAgICAgICAvLyBpdCBuZWVkcyB0byByZXRyaWV2ZSBhbGwgdGhlIGRvY3VtZW50cyBmaXJzdCBhbmQgdGhlbiBza2lwIHRoZW0uIChDUy0yNTgxMSlcbiAgICAgICAgLy8gQXMgd29yayBhcm91bmQgd2UgdXNlICRndGUgb24gdGhlIFwiblwiIGZpZWxkLlxuICAgICAgICBpZiAoc3RyZWFtLnMub3B0aW9ucyAmJiBzdHJlYW0ucy5vcHRpb25zLnN0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHNraXAgPSBNYXRoLmZsb29yKHN0cmVhbS5zLm9wdGlvbnMuc3RhcnQgLyBkb2MuY2h1bmtTaXplKTtcbiAgICAgICAgICAgIGlmIChza2lwID4gMCkge1xuICAgICAgICAgICAgICAgIGZpbHRlclsnbiddID0geyAkZ3RlOiBza2lwIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLnMuY3Vyc29yID0gc3RyZWFtLnMuY2h1bmtzLmZpbmQoZmlsdGVyKS5zb3J0KHsgbjogMSB9KTtcbiAgICAgICAgaWYgKHN0cmVhbS5zLnJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBzdHJlYW0ucy5jdXJzb3Iud2l0aFJlYWRQcmVmZXJlbmNlKHN0cmVhbS5zLnJlYWRQcmVmZXJlbmNlKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0ucy5leHBlY3RlZEVuZCA9IE1hdGguY2VpbChkb2MubGVuZ3RoIC8gZG9jLmNodW5rU2l6ZSk7XG4gICAgICAgIHN0cmVhbS5zLmZpbGUgPSBkb2M7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzdHJlYW0ucy5ieXRlc1RvVHJpbSA9IGhhbmRsZUVuZE9wdGlvbihzdHJlYW0sIGRvYywgc3RyZWFtLnMuY3Vyc29yLCBzdHJlYW0ucy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW0uZGVzdHJveShlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLmVtaXQoR3JpZEZTQnVja2V0UmVhZFN0cmVhbS5GSUxFLCBkb2MpO1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgICBzdHJlYW0ucy5maWxlcy5maW5kT25lKHN0cmVhbS5zLmZpbHRlciwgZmluZE9uZU9wdGlvbnMpLnRoZW4oZG9jID0+IGhhbmRsZVJlYWRSZXN1bHQoeyBlcnJvcjogbnVsbCwgZG9jIH0pLCBlcnJvciA9PiBoYW5kbGVSZWFkUmVzdWx0KHsgZXJyb3IsIGRvYzogbnVsbCB9KSk7XG59XG5mdW5jdGlvbiB3YWl0Rm9yRmlsZShzdHJlYW0sIGNhbGxiYWNrKSB7XG4gICAgaWYgKHN0cmVhbS5zLmZpbGUpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGlmICghc3RyZWFtLnMuaW5pdCkge1xuICAgICAgICBpbml0KHN0cmVhbSk7XG4gICAgICAgIHN0cmVhbS5zLmluaXQgPSB0cnVlO1xuICAgIH1cbiAgICBzdHJlYW0ub25jZSgnZmlsZScsICgpID0+IHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGhhbmRsZVN0YXJ0T3B0aW9uKHN0cmVhbSwgZG9jLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zdGFydCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChvcHRpb25zLnN0YXJ0ID4gZG9jLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgU3RyZWFtIHN0YXJ0ICgke29wdGlvbnMuc3RhcnR9KSBtdXN0IG5vdCBiZSBtb3JlIHRoYW4gdGhlIGxlbmd0aCBvZiB0aGUgZmlsZSAoJHtkb2MubGVuZ3RofSlgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zdGFydCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYFN0cmVhbSBzdGFydCAoJHtvcHRpb25zLnN0YXJ0fSkgbXVzdCBub3QgYmUgbmVnYXRpdmVgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5lbmQgIT0gbnVsbCAmJiBvcHRpb25zLmVuZCA8IG9wdGlvbnMuc3RhcnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYFN0cmVhbSBzdGFydCAoJHtvcHRpb25zLnN0YXJ0fSkgbXVzdCBub3QgYmUgZ3JlYXRlciB0aGFuIHN0cmVhbSBlbmQgKCR7b3B0aW9ucy5lbmR9KWApO1xuICAgICAgICB9XG4gICAgICAgIHN0cmVhbS5zLmJ5dGVzUmVhZCA9IE1hdGguZmxvb3Iob3B0aW9ucy5zdGFydCAvIGRvYy5jaHVua1NpemUpICogZG9jLmNodW5rU2l6ZTtcbiAgICAgICAgc3RyZWFtLnMuZXhwZWN0ZWQgPSBNYXRoLmZsb29yKG9wdGlvbnMuc3RhcnQgLyBkb2MuY2h1bmtTaXplKTtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuc3RhcnQgLSBzdHJlYW0ucy5ieXRlc1JlYWQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1N0YXJ0IG9wdGlvbiBtdXN0IGJlIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUVuZE9wdGlvbihzdHJlYW0sIGRvYywgY3Vyc29yLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5lbmQgIT0gbnVsbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5lbmQgPiBkb2MubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBTdHJlYW0gZW5kICgke29wdGlvbnMuZW5kfSkgbXVzdCBub3QgYmUgbW9yZSB0aGFuIHRoZSBsZW5ndGggb2YgdGhlIGZpbGUgKCR7ZG9jLmxlbmd0aH0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnQgPT0gbnVsbCB8fCBvcHRpb25zLnN0YXJ0IDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgU3RyZWFtIGVuZCAoJHtvcHRpb25zLmVuZH0pIG11c3Qgbm90IGJlIG5lZ2F0aXZlYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhcnQgPSBvcHRpb25zLnN0YXJ0ICE9IG51bGwgPyBNYXRoLmZsb29yKG9wdGlvbnMuc3RhcnQgLyBkb2MuY2h1bmtTaXplKSA6IDA7XG4gICAgICAgIGN1cnNvci5saW1pdChNYXRoLmNlaWwob3B0aW9ucy5lbmQgLyBkb2MuY2h1bmtTaXplKSAtIHN0YXJ0KTtcbiAgICAgICAgc3RyZWFtLnMuZXhwZWN0ZWRFbmQgPSBNYXRoLmNlaWwob3B0aW9ucy5lbmQgLyBkb2MuY2h1bmtTaXplKTtcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChvcHRpb25zLmVuZCAvIGRvYy5jaHVua1NpemUpICogZG9jLmNodW5rU2l6ZSAtIG9wdGlvbnMuZW5kO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdFbmQgb3B0aW9uIG11c3QgYmUgZGVmaW5lZCcpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG93bmxvYWQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiR3JpZEZTQnVja2V0UmVhZFN0cmVhbSIsInN0cmVhbV8xIiwicmVxdWlyZSIsImVycm9yXzEiLCJSZWFkYWJsZSIsImNvbnN0cnVjdG9yIiwiY2h1bmtzIiwiZmlsZXMiLCJyZWFkUHJlZmVyZW5jZSIsImZpbHRlciIsIm9wdGlvbnMiLCJlbWl0Q2xvc2UiLCJzIiwiYnl0ZXNUb1RyaW0iLCJieXRlc1RvU2tpcCIsImJ5dGVzUmVhZCIsImV4cGVjdGVkIiwiaW5pdCIsImV4cGVjdGVkRW5kIiwic3RhcnQiLCJlbmQiLCJfcmVhZCIsImRlc3Ryb3llZCIsIndhaXRGb3JGaWxlIiwiZG9SZWFkIiwidGhyb3dJZkluaXRpYWxpemVkIiwiYWJvcnQiLCJwdXNoIiwiZGVzdHJveSIsImN1cnNvciIsImNsb3NlIiwiRklMRSIsInN0cmVhbSIsIk1vbmdvR3JpZEZTU3RyZWFtRXJyb3IiLCJmaWxlIiwiaGFuZGxlUmVhZFJlc3VsdCIsImVycm9yIiwiZG9jIiwidGhlbiIsImJ5dGVzUmVtYWluaW5nIiwibGVuZ3RoIiwiZXhwZWN0ZWROIiwiZXhwZWN0ZWRMZW5ndGgiLCJNYXRoIiwibWluIiwiY2h1bmtTaXplIiwibiIsIk1vbmdvR3JpZEZTQ2h1bmtFcnJvciIsImJ1ZiIsIkJ1ZmZlciIsImlzQnVmZmVyIiwiZGF0YSIsImJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJzbGljZVN0YXJ0Iiwic2xpY2VFbmQiLCJhdEVuZE9mU3RyZWFtIiwiYnl0ZXNMZWZ0VG9SZWFkIiwic2xpY2UiLCJuZXh0IiwiZmluZE9uZU9wdGlvbnMiLCJzb3J0Iiwic2tpcCIsImlkZW50aWZpZXIiLCJfaWQiLCJ0b1N0cmluZyIsImZpbGVuYW1lIiwiZXJybXNnIiwiZXJyIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJjb2RlIiwiaGFuZGxlU3RhcnRPcHRpb24iLCJmaWxlc19pZCIsImZsb29yIiwiJGd0ZSIsImZpbmQiLCJ3aXRoUmVhZFByZWZlcmVuY2UiLCJjZWlsIiwiaGFuZGxlRW5kT3B0aW9uIiwiZW1pdCIsImZpbmRPbmUiLCJjYWxsYmFjayIsIm9uY2UiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwibGltaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/gridfs/download.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/gridfs/index.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/gridfs/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.GridFSBucket = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst download_1 = __webpack_require__(/*! ./download */ \"(ssr)/./node_modules/mongodb/lib/gridfs/download.js\");\nconst upload_1 = __webpack_require__(/*! ./upload */ \"(ssr)/./node_modules/mongodb/lib/gridfs/upload.js\");\nconst DEFAULT_GRIDFS_BUCKET_OPTIONS = {\n    bucketName: \"fs\",\n    chunkSizeBytes: 255 * 1024\n};\n/**\n * Constructor for a streaming GridFS interface\n * @public\n */ class GridFSBucket extends mongo_types_1.TypedEventEmitter {\n    constructor(db, options){\n        super();\n        this.setMaxListeners(0);\n        const privateOptions = {\n            ...DEFAULT_GRIDFS_BUCKET_OPTIONS,\n            ...options,\n            writeConcern: write_concern_1.WriteConcern.fromOptions(options)\n        };\n        this.s = {\n            db,\n            options: privateOptions,\n            _chunksCollection: db.collection(privateOptions.bucketName + \".chunks\"),\n            _filesCollection: db.collection(privateOptions.bucketName + \".files\"),\n            checkedIndexes: false,\n            calledOpenUploadStream: false\n        };\n    }\n    /**\n     * Returns a writable stream (GridFSBucketWriteStream) for writing\n     * buffers to GridFS. The stream's 'id' property contains the resulting\n     * file's id.\n     *\n     * @param filename - The value of the 'filename' key in the files doc\n     * @param options - Optional settings.\n     */ openUploadStream(filename, options) {\n        return new upload_1.GridFSBucketWriteStream(this, filename, options);\n    }\n    /**\n     * Returns a writable stream (GridFSBucketWriteStream) for writing\n     * buffers to GridFS for a custom file id. The stream's 'id' property contains the resulting\n     * file's id.\n     */ openUploadStreamWithId(id, filename, options) {\n        return new upload_1.GridFSBucketWriteStream(this, filename, {\n            ...options,\n            id\n        });\n    }\n    /** Returns a readable stream (GridFSBucketReadStream) for streaming file data from GridFS. */ openDownloadStream(id, options) {\n        return new download_1.GridFSBucketReadStream(this.s._chunksCollection, this.s._filesCollection, this.s.options.readPreference, {\n            _id: id\n        }, options);\n    }\n    /**\n     * Deletes a file with the given id\n     *\n     * @param id - The id of the file doc\n     */ async delete(id) {\n        const { deletedCount } = await this.s._filesCollection.deleteOne({\n            _id: id\n        });\n        // Delete orphaned chunks before returning FileNotFound\n        await this.s._chunksCollection.deleteMany({\n            files_id: id\n        });\n        if (deletedCount === 0) {\n            // TODO(NODE-3483): Replace with more appropriate error\n            // Consider creating new error MongoGridFSFileNotFoundError\n            throw new error_1.MongoRuntimeError(`File not found for id ${id}`);\n        }\n    }\n    /** Convenience wrapper around find on the files collection */ find(filter = {}, options = {}) {\n        return this.s._filesCollection.find(filter, options);\n    }\n    /**\n     * Returns a readable stream (GridFSBucketReadStream) for streaming the\n     * file with the given name from GridFS. If there are multiple files with\n     * the same name, this will stream the most recent file with the given name\n     * (as determined by the `uploadDate` field). You can set the `revision`\n     * option to change this behavior.\n     */ openDownloadStreamByName(filename, options) {\n        let sort = {\n            uploadDate: -1\n        };\n        let skip = undefined;\n        if (options && options.revision != null) {\n            if (options.revision >= 0) {\n                sort = {\n                    uploadDate: 1\n                };\n                skip = options.revision;\n            } else {\n                skip = -options.revision - 1;\n            }\n        }\n        return new download_1.GridFSBucketReadStream(this.s._chunksCollection, this.s._filesCollection, this.s.options.readPreference, {\n            filename\n        }, {\n            ...options,\n            sort,\n            skip\n        });\n    }\n    /**\n     * Renames the file with the given _id to the given string\n     *\n     * @param id - the id of the file to rename\n     * @param filename - new name for the file\n     */ async rename(id, filename) {\n        const filter = {\n            _id: id\n        };\n        const update = {\n            $set: {\n                filename\n            }\n        };\n        const { matchedCount } = await this.s._filesCollection.updateOne(filter, update);\n        if (matchedCount === 0) {\n            throw new error_1.MongoRuntimeError(`File with id ${id} not found`);\n        }\n    }\n    /** Removes this bucket's files collection, followed by its chunks collection. */ async drop() {\n        await this.s._filesCollection.drop();\n        await this.s._chunksCollection.drop();\n    }\n}\n/**\n * When the first call to openUploadStream is made, the upload stream will\n * check to see if it needs to create the proper indexes on the chunks and\n * files collections. This event is fired either when 1) it determines that\n * no index creation is necessary, 2) when it successfully creates the\n * necessary indexes.\n * @event\n */ GridFSBucket.INDEX = \"index\";\nexports.GridFSBucket = GridFSBucket; //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZ3JpZGZzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxvQkFBb0IsR0FBRyxLQUFLO0FBQzVCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLGdCQUFnQkQsbUJBQU9BLENBQUMsdUVBQWdCO0FBQzlDLE1BQU1FLGtCQUFrQkYsbUJBQU9BLENBQUMsMkVBQWtCO0FBQ2xELE1BQU1HLGFBQWFILG1CQUFPQSxDQUFDLHVFQUFZO0FBQ3ZDLE1BQU1JLFdBQVdKLG1CQUFPQSxDQUFDLG1FQUFVO0FBQ25DLE1BQU1LLGdDQUFnQztJQUNsQ0MsWUFBWTtJQUNaQyxnQkFBZ0IsTUFBTTtBQUMxQjtBQUNBOzs7Q0FHQyxHQUNELE1BQU1ULHFCQUFxQkcsY0FBY08saUJBQWlCO0lBQ3REQyxZQUFZQyxFQUFFLEVBQUVDLE9BQU8sQ0FBRTtRQUNyQixLQUFLO1FBQ0wsSUFBSSxDQUFDQyxlQUFlLENBQUM7UUFDckIsTUFBTUMsaUJBQWlCO1lBQ25CLEdBQUdSLDZCQUE2QjtZQUNoQyxHQUFHTSxPQUFPO1lBQ1ZHLGNBQWNaLGdCQUFnQmEsWUFBWSxDQUFDQyxXQUFXLENBQUNMO1FBQzNEO1FBQ0EsSUFBSSxDQUFDTSxDQUFDLEdBQUc7WUFDTFA7WUFDQUMsU0FBU0U7WUFDVEssbUJBQW1CUixHQUFHUyxVQUFVLENBQUNOLGVBQWVQLFVBQVUsR0FBRztZQUM3RGMsa0JBQWtCVixHQUFHUyxVQUFVLENBQUNOLGVBQWVQLFVBQVUsR0FBRztZQUM1RGUsZ0JBQWdCO1lBQ2hCQyx3QkFBd0I7UUFDNUI7SUFDSjtJQUNBOzs7Ozs7O0tBT0MsR0FDREMsaUJBQWlCQyxRQUFRLEVBQUViLE9BQU8sRUFBRTtRQUNoQyxPQUFPLElBQUlQLFNBQVNxQix1QkFBdUIsQ0FBQyxJQUFJLEVBQUVELFVBQVViO0lBQ2hFO0lB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QUFDLENBQUNDLGlCQUFpQixDQUFDaUMsSUFBSTtJQUN2QztBQUNKO0FBQ0E7Ozs7Ozs7Q0FPQyxHQUNEckQsYUFBYXNELEtBQUssR0FBRztBQUNyQnhELG9CQUFvQixHQUFHRSxjQUN2QixpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2dyaWRmcy9pbmRleC5qcz83MTBiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5HcmlkRlNCdWNrZXQgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgbW9uZ29fdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9tb25nb190eXBlc1wiKTtcbmNvbnN0IHdyaXRlX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuLi93cml0ZV9jb25jZXJuXCIpO1xuY29uc3QgZG93bmxvYWRfMSA9IHJlcXVpcmUoXCIuL2Rvd25sb2FkXCIpO1xuY29uc3QgdXBsb2FkXzEgPSByZXF1aXJlKFwiLi91cGxvYWRcIik7XG5jb25zdCBERUZBVUxUX0dSSURGU19CVUNLRVRfT1BUSU9OUyA9IHtcbiAgICBidWNrZXROYW1lOiAnZnMnLFxuICAgIGNodW5rU2l6ZUJ5dGVzOiAyNTUgKiAxMDI0XG59O1xuLyoqXG4gKiBDb25zdHJ1Y3RvciBmb3IgYSBzdHJlYW1pbmcgR3JpZEZTIGludGVyZmFjZVxuICogQHB1YmxpY1xuICovXG5jbGFzcyBHcmlkRlNCdWNrZXQgZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNldE1heExpc3RlbmVycygwKTtcbiAgICAgICAgY29uc3QgcHJpdmF0ZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi5ERUZBVUxUX0dSSURGU19CVUNLRVRfT1BUSU9OUyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICB3cml0ZUNvbmNlcm46IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucylcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zID0ge1xuICAgICAgICAgICAgZGIsXG4gICAgICAgICAgICBvcHRpb25zOiBwcml2YXRlT3B0aW9ucyxcbiAgICAgICAgICAgIF9jaHVua3NDb2xsZWN0aW9uOiBkYi5jb2xsZWN0aW9uKHByaXZhdGVPcHRpb25zLmJ1Y2tldE5hbWUgKyAnLmNodW5rcycpLFxuICAgICAgICAgICAgX2ZpbGVzQ29sbGVjdGlvbjogZGIuY29sbGVjdGlvbihwcml2YXRlT3B0aW9ucy5idWNrZXROYW1lICsgJy5maWxlcycpLFxuICAgICAgICAgICAgY2hlY2tlZEluZGV4ZXM6IGZhbHNlLFxuICAgICAgICAgICAgY2FsbGVkT3BlblVwbG9hZFN0cmVhbTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHdyaXRhYmxlIHN0cmVhbSAoR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0pIGZvciB3cml0aW5nXG4gICAgICogYnVmZmVycyB0byBHcmlkRlMuIFRoZSBzdHJlYW0ncyAnaWQnIHByb3BlcnR5IGNvbnRhaW5zIHRoZSByZXN1bHRpbmdcbiAgICAgKiBmaWxlJ3MgaWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsZW5hbWUgLSBUaGUgdmFsdWUgb2YgdGhlICdmaWxlbmFtZScga2V5IGluIHRoZSBmaWxlcyBkb2NcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzLlxuICAgICAqL1xuICAgIG9wZW5VcGxvYWRTdHJlYW0oZmlsZW5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1cGxvYWRfMS5HcmlkRlNCdWNrZXRXcml0ZVN0cmVhbSh0aGlzLCBmaWxlbmFtZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB3cml0YWJsZSBzdHJlYW0gKEdyaWRGU0J1Y2tldFdyaXRlU3RyZWFtKSBmb3Igd3JpdGluZ1xuICAgICAqIGJ1ZmZlcnMgdG8gR3JpZEZTIGZvciBhIGN1c3RvbSBmaWxlIGlkLiBUaGUgc3RyZWFtJ3MgJ2lkJyBwcm9wZXJ0eSBjb250YWlucyB0aGUgcmVzdWx0aW5nXG4gICAgICogZmlsZSdzIGlkLlxuICAgICAqL1xuICAgIG9wZW5VcGxvYWRTdHJlYW1XaXRoSWQoaWQsIGZpbGVuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgdXBsb2FkXzEuR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0odGhpcywgZmlsZW5hbWUsIHsgLi4ub3B0aW9ucywgaWQgfSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmVhZGFibGUgc3RyZWFtIChHcmlkRlNCdWNrZXRSZWFkU3RyZWFtKSBmb3Igc3RyZWFtaW5nIGZpbGUgZGF0YSBmcm9tIEdyaWRGUy4gKi9cbiAgICBvcGVuRG93bmxvYWRTdHJlYW0oaWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBkb3dubG9hZF8xLkdyaWRGU0J1Y2tldFJlYWRTdHJlYW0odGhpcy5zLl9jaHVua3NDb2xsZWN0aW9uLCB0aGlzLnMuX2ZpbGVzQ29sbGVjdGlvbiwgdGhpcy5zLm9wdGlvbnMucmVhZFByZWZlcmVuY2UsIHsgX2lkOiBpZCB9LCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhIGZpbGUgd2l0aCB0aGUgZ2l2ZW4gaWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCAtIFRoZSBpZCBvZiB0aGUgZmlsZSBkb2NcbiAgICAgKi9cbiAgICBhc3luYyBkZWxldGUoaWQpIHtcbiAgICAgICAgY29uc3QgeyBkZWxldGVkQ291bnQgfSA9IGF3YWl0IHRoaXMucy5fZmlsZXNDb2xsZWN0aW9uLmRlbGV0ZU9uZSh7IF9pZDogaWQgfSk7XG4gICAgICAgIC8vIERlbGV0ZSBvcnBoYW5lZCBjaHVua3MgYmVmb3JlIHJldHVybmluZyBGaWxlTm90Rm91bmRcbiAgICAgICAgYXdhaXQgdGhpcy5zLl9jaHVua3NDb2xsZWN0aW9uLmRlbGV0ZU1hbnkoeyBmaWxlc19pZDogaWQgfSk7XG4gICAgICAgIGlmIChkZWxldGVkQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogUmVwbGFjZSB3aXRoIG1vcmUgYXBwcm9wcmlhdGUgZXJyb3JcbiAgICAgICAgICAgIC8vIENvbnNpZGVyIGNyZWF0aW5nIG5ldyBlcnJvciBNb25nb0dyaWRGU0ZpbGVOb3RGb3VuZEVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgRmlsZSBub3QgZm91bmQgZm9yIGlkICR7aWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIENvbnZlbmllbmNlIHdyYXBwZXIgYXJvdW5kIGZpbmQgb24gdGhlIGZpbGVzIGNvbGxlY3Rpb24gKi9cbiAgICBmaW5kKGZpbHRlciA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5fZmlsZXNDb2xsZWN0aW9uLmZpbmQoZmlsdGVyLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHJlYWRhYmxlIHN0cmVhbSAoR3JpZEZTQnVja2V0UmVhZFN0cmVhbSkgZm9yIHN0cmVhbWluZyB0aGVcbiAgICAgKiBmaWxlIHdpdGggdGhlIGdpdmVuIG5hbWUgZnJvbSBHcmlkRlMuIElmIHRoZXJlIGFyZSBtdWx0aXBsZSBmaWxlcyB3aXRoXG4gICAgICogdGhlIHNhbWUgbmFtZSwgdGhpcyB3aWxsIHN0cmVhbSB0aGUgbW9zdCByZWNlbnQgZmlsZSB3aXRoIHRoZSBnaXZlbiBuYW1lXG4gICAgICogKGFzIGRldGVybWluZWQgYnkgdGhlIGB1cGxvYWREYXRlYCBmaWVsZCkuIFlvdSBjYW4gc2V0IHRoZSBgcmV2aXNpb25gXG4gICAgICogb3B0aW9uIHRvIGNoYW5nZSB0aGlzIGJlaGF2aW9yLlxuICAgICAqL1xuICAgIG9wZW5Eb3dubG9hZFN0cmVhbUJ5TmFtZShmaWxlbmFtZSwgb3B0aW9ucykge1xuICAgICAgICBsZXQgc29ydCA9IHsgdXBsb2FkRGF0ZTogLTEgfTtcbiAgICAgICAgbGV0IHNraXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmV2aXNpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucmV2aXNpb24gPj0gMCkge1xuICAgICAgICAgICAgICAgIHNvcnQgPSB7IHVwbG9hZERhdGU6IDEgfTtcbiAgICAgICAgICAgICAgICBza2lwID0gb3B0aW9ucy5yZXZpc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNraXAgPSAtb3B0aW9ucy5yZXZpc2lvbiAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBkb3dubG9hZF8xLkdyaWRGU0J1Y2tldFJlYWRTdHJlYW0odGhpcy5zLl9jaHVua3NDb2xsZWN0aW9uLCB0aGlzLnMuX2ZpbGVzQ29sbGVjdGlvbiwgdGhpcy5zLm9wdGlvbnMucmVhZFByZWZlcmVuY2UsIHsgZmlsZW5hbWUgfSwgeyAuLi5vcHRpb25zLCBzb3J0LCBza2lwIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW5hbWVzIHRoZSBmaWxlIHdpdGggdGhlIGdpdmVuIF9pZCB0byB0aGUgZ2l2ZW4gc3RyaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaWQgLSB0aGUgaWQgb2YgdGhlIGZpbGUgdG8gcmVuYW1lXG4gICAgICogQHBhcmFtIGZpbGVuYW1lIC0gbmV3IG5hbWUgZm9yIHRoZSBmaWxlXG4gICAgICovXG4gICAgYXN5bmMgcmVuYW1lKGlkLCBmaWxlbmFtZSkge1xuICAgICAgICBjb25zdCBmaWx0ZXIgPSB7IF9pZDogaWQgfTtcbiAgICAgICAgY29uc3QgdXBkYXRlID0geyAkc2V0OiB7IGZpbGVuYW1lIH0gfTtcbiAgICAgICAgY29uc3QgeyBtYXRjaGVkQ291bnQgfSA9IGF3YWl0IHRoaXMucy5fZmlsZXNDb2xsZWN0aW9uLnVwZGF0ZU9uZShmaWx0ZXIsIHVwZGF0ZSk7XG4gICAgICAgIGlmIChtYXRjaGVkQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBGaWxlIHdpdGggaWQgJHtpZH0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFJlbW92ZXMgdGhpcyBidWNrZXQncyBmaWxlcyBjb2xsZWN0aW9uLCBmb2xsb3dlZCBieSBpdHMgY2h1bmtzIGNvbGxlY3Rpb24uICovXG4gICAgYXN5bmMgZHJvcCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zLl9maWxlc0NvbGxlY3Rpb24uZHJvcCgpO1xuICAgICAgICBhd2FpdCB0aGlzLnMuX2NodW5rc0NvbGxlY3Rpb24uZHJvcCgpO1xuICAgIH1cbn1cbi8qKlxuICogV2hlbiB0aGUgZmlyc3QgY2FsbCB0byBvcGVuVXBsb2FkU3RyZWFtIGlzIG1hZGUsIHRoZSB1cGxvYWQgc3RyZWFtIHdpbGxcbiAqIGNoZWNrIHRvIHNlZSBpZiBpdCBuZWVkcyB0byBjcmVhdGUgdGhlIHByb3BlciBpbmRleGVzIG9uIHRoZSBjaHVua3MgYW5kXG4gKiBmaWxlcyBjb2xsZWN0aW9ucy4gVGhpcyBldmVudCBpcyBmaXJlZCBlaXRoZXIgd2hlbiAxKSBpdCBkZXRlcm1pbmVzIHRoYXRcbiAqIG5vIGluZGV4IGNyZWF0aW9uIGlzIG5lY2Vzc2FyeSwgMikgd2hlbiBpdCBzdWNjZXNzZnVsbHkgY3JlYXRlcyB0aGVcbiAqIG5lY2Vzc2FyeSBpbmRleGVzLlxuICogQGV2ZW50XG4gKi9cbkdyaWRGU0J1Y2tldC5JTkRFWCA9ICdpbmRleCc7XG5leHBvcnRzLkdyaWRGU0J1Y2tldCA9IEdyaWRGU0J1Y2tldDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkdyaWRGU0J1Y2tldCIsImVycm9yXzEiLCJyZXF1aXJlIiwibW9uZ29fdHlwZXNfMSIsIndyaXRlX2NvbmNlcm5fMSIsImRvd25sb2FkXzEiLCJ1cGxvYWRfMSIsIkRFRkFVTFRfR1JJREZTX0JVQ0tFVF9PUFRJT05TIiwiYnVja2V0TmFtZSIsImNodW5rU2l6ZUJ5dGVzIiwiVHlwZWRFdmVudEVtaXR0ZXIiLCJjb25zdHJ1Y3RvciIsImRiIiwib3B0aW9ucyIsInNldE1heExpc3RlbmVycyIsInByaXZhdGVPcHRpb25zIiwid3JpdGVDb25jZXJuIiwiV3JpdGVDb25jZXJuIiwiZnJvbU9wdGlvbnMiLCJzIiwiX2NodW5rc0NvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwiX2ZpbGVzQ29sbGVjdGlvbiIsImNoZWNrZWRJbmRleGVzIiwiY2FsbGVkT3BlblVwbG9hZFN0cmVhbSIsIm9wZW5VcGxvYWRTdHJlYW0iLCJmaWxlbmFtZSIsIkdyaWRGU0J1Y2tldFdyaXRlU3RyZWFtIiwib3BlblVwbG9hZFN0cmVhbVdpdGhJZCIsImlkIiwib3BlbkRvd25sb2FkU3RyZWFtIiwiR3JpZEZTQnVja2V0UmVhZFN0cmVhbSIsInJlYWRQcmVmZXJlbmNlIiwiX2lkIiwiZGVsZXRlIiwiZGVsZXRlZENvdW50IiwiZGVsZXRlT25lIiwiZGVsZXRlTWFueSIsImZpbGVzX2lkIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJmaW5kIiwiZmlsdGVyIiwib3BlbkRvd25sb2FkU3RyZWFtQnlOYW1lIiwic29ydCIsInVwbG9hZERhdGUiLCJza2lwIiwidW5kZWZpbmVkIiwicmV2aXNpb24iLCJyZW5hbWUiLCJ1cGRhdGUiLCIkc2V0IiwibWF0Y2hlZENvdW50IiwidXBkYXRlT25lIiwiZHJvcCIsIklOREVYIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/gridfs/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/gridfs/upload.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/gridfs/upload.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.GridFSBucketWriteStream = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst write_concern_1 = __webpack_require__(/*! ./../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n/**\n * A writable stream that enables you to write buffers to GridFS.\n *\n * Do not instantiate this class directly. Use `openUploadStream()` instead.\n * @public\n */ class GridFSBucketWriteStream extends stream_1.Writable {\n    /**\n     * @param bucket - Handle for this stream's corresponding bucket\n     * @param filename - The value of the 'filename' key in the files doc\n     * @param options - Optional settings.\n     * @internal\n     */ constructor(bucket, filename, options){\n        super();\n        /**\n         * The document containing information about the inserted file.\n         * This property is defined _after_ the finish event has been emitted.\n         * It will remain `null` if an error occurs.\n         *\n         * @example\n         * ```ts\n         * fs.createReadStream('file.txt')\n         *   .pipe(bucket.openUploadStream('file.txt'))\n         *   .on('finish', function () {\n         *     console.log(this.gridFSFile)\n         *   })\n         * ```\n         */ this.gridFSFile = null;\n        options = options ?? {};\n        this.bucket = bucket;\n        this.chunks = bucket.s._chunksCollection;\n        this.filename = filename;\n        this.files = bucket.s._filesCollection;\n        this.options = options;\n        this.writeConcern = write_concern_1.WriteConcern.fromOptions(options) || bucket.s.options.writeConcern;\n        // Signals the write is all done\n        this.done = false;\n        this.id = options.id ? options.id : new bson_1.ObjectId();\n        // properly inherit the default chunksize from parent\n        this.chunkSizeBytes = options.chunkSizeBytes || this.bucket.s.options.chunkSizeBytes;\n        this.bufToStore = Buffer.alloc(this.chunkSizeBytes);\n        this.length = 0;\n        this.n = 0;\n        this.pos = 0;\n        this.state = {\n            streamEnd: false,\n            outstandingRequests: 0,\n            errored: false,\n            aborted: false\n        };\n        if (!this.bucket.s.calledOpenUploadStream) {\n            this.bucket.s.calledOpenUploadStream = true;\n            checkIndexes(this).then(()=>{\n                this.bucket.s.checkedIndexes = true;\n                this.bucket.emit(\"index\");\n            }, ()=>null);\n        }\n    }\n    /**\n     * @internal\n     *\n     * The stream is considered constructed when the indexes are done being created\n     */ _construct(callback) {\n        if (this.bucket.s.checkedIndexes) {\n            return process.nextTick(callback);\n        }\n        this.bucket.once(\"index\", callback);\n    }\n    /**\n     * @internal\n     * Write a buffer to the stream.\n     *\n     * @param chunk - Buffer to write\n     * @param encoding - Optional encoding for the buffer\n     * @param callback - Function to call when the chunk was added to the buffer, or if the entire chunk was persisted to MongoDB if this chunk caused a flush.\n     */ _write(chunk, encoding, callback) {\n        doWrite(this, chunk, encoding, callback);\n    }\n    /** @internal */ _final(callback) {\n        if (this.state.streamEnd) {\n            return process.nextTick(callback);\n        }\n        this.state.streamEnd = true;\n        writeRemnant(this, callback);\n    }\n    /**\n     * Places this write stream into an aborted state (all future writes fail)\n     * and deletes all chunks that have already been written.\n     */ async abort() {\n        if (this.state.streamEnd) {\n            // TODO(NODE-3485): Replace with MongoGridFSStreamClosed\n            throw new error_1.MongoAPIError(\"Cannot abort a stream that has already completed\");\n        }\n        if (this.state.aborted) {\n            // TODO(NODE-3485): Replace with MongoGridFSStreamClosed\n            throw new error_1.MongoAPIError(\"Cannot call abort() on a stream twice\");\n        }\n        this.state.aborted = true;\n        await this.chunks.deleteMany({\n            files_id: this.id\n        });\n    }\n}\nexports.GridFSBucketWriteStream = GridFSBucketWriteStream;\nfunction handleError(stream, error, callback) {\n    if (stream.state.errored) {\n        process.nextTick(callback);\n        return;\n    }\n    stream.state.errored = true;\n    process.nextTick(callback, error);\n}\nfunction createChunkDoc(filesId, n, data) {\n    return {\n        _id: new bson_1.ObjectId(),\n        files_id: filesId,\n        n,\n        data\n    };\n}\nasync function checkChunksIndex(stream) {\n    const index = {\n        files_id: 1,\n        n: 1\n    };\n    let indexes;\n    try {\n        indexes = await stream.chunks.listIndexes().toArray();\n    } catch (error) {\n        if (error instanceof error_1.MongoError && error.code === error_1.MONGODB_ERROR_CODES.NamespaceNotFound) {\n            indexes = [];\n        } else {\n            throw error;\n        }\n    }\n    const hasChunksIndex = !!indexes.find((index)=>{\n        const keys = Object.keys(index.key);\n        if (keys.length === 2 && index.key.files_id === 1 && index.key.n === 1) {\n            return true;\n        }\n        return false;\n    });\n    if (!hasChunksIndex) {\n        await stream.chunks.createIndex(index, {\n            ...stream.writeConcern,\n            background: true,\n            unique: true\n        });\n    }\n}\nfunction checkDone(stream, callback) {\n    if (stream.done) {\n        return process.nextTick(callback);\n    }\n    if (stream.state.streamEnd && stream.state.outstandingRequests === 0 && !stream.state.errored) {\n        // Set done so we do not trigger duplicate createFilesDoc\n        stream.done = true;\n        // Create a new files doc\n        const gridFSFile = createFilesDoc(stream.id, stream.length, stream.chunkSizeBytes, stream.filename, stream.options.contentType, stream.options.aliases, stream.options.metadata);\n        if (isAborted(stream, callback)) {\n            return;\n        }\n        stream.files.insertOne(gridFSFile, {\n            writeConcern: stream.writeConcern\n        }).then(()=>{\n            stream.gridFSFile = gridFSFile;\n            callback();\n        }, (error)=>handleError(stream, error, callback));\n        return;\n    }\n    process.nextTick(callback);\n}\nasync function checkIndexes(stream) {\n    const doc = await stream.files.findOne({}, {\n        projection: {\n            _id: 1\n        }\n    });\n    if (doc != null) {\n        // If at least one document exists assume the collection has the required index\n        return;\n    }\n    const index = {\n        filename: 1,\n        uploadDate: 1\n    };\n    let indexes;\n    try {\n        indexes = await stream.files.listIndexes().toArray();\n    } catch (error) {\n        if (error instanceof error_1.MongoError && error.code === error_1.MONGODB_ERROR_CODES.NamespaceNotFound) {\n            indexes = [];\n        } else {\n            throw error;\n        }\n    }\n    const hasFileIndex = !!indexes.find((index)=>{\n        const keys = Object.keys(index.key);\n        if (keys.length === 2 && index.key.filename === 1 && index.key.uploadDate === 1) {\n            return true;\n        }\n        return false;\n    });\n    if (!hasFileIndex) {\n        await stream.files.createIndex(index, {\n            background: false\n        });\n    }\n    await checkChunksIndex(stream);\n}\nfunction createFilesDoc(_id, length, chunkSize, filename, contentType, aliases, metadata) {\n    const ret = {\n        _id,\n        length,\n        chunkSize,\n        uploadDate: new Date(),\n        filename\n    };\n    if (contentType) {\n        ret.contentType = contentType;\n    }\n    if (aliases) {\n        ret.aliases = aliases;\n    }\n    if (metadata) {\n        ret.metadata = metadata;\n    }\n    return ret;\n}\nfunction doWrite(stream, chunk, encoding, callback) {\n    if (isAborted(stream, callback)) {\n        return;\n    }\n    const inputBuf = Buffer.isBuffer(chunk) ? chunk : Buffer.from(chunk, encoding);\n    stream.length += inputBuf.length;\n    // Input is small enough to fit in our buffer\n    if (stream.pos + inputBuf.length < stream.chunkSizeBytes) {\n        inputBuf.copy(stream.bufToStore, stream.pos);\n        stream.pos += inputBuf.length;\n        process.nextTick(callback);\n        return;\n    }\n    // Otherwise, buffer is too big for current chunk, so we need to flush\n    // to MongoDB.\n    let inputBufRemaining = inputBuf.length;\n    let spaceRemaining = stream.chunkSizeBytes - stream.pos;\n    let numToCopy = Math.min(spaceRemaining, inputBuf.length);\n    let outstandingRequests = 0;\n    while(inputBufRemaining > 0){\n        const inputBufPos = inputBuf.length - inputBufRemaining;\n        inputBuf.copy(stream.bufToStore, stream.pos, inputBufPos, inputBufPos + numToCopy);\n        stream.pos += numToCopy;\n        spaceRemaining -= numToCopy;\n        let doc;\n        if (spaceRemaining === 0) {\n            doc = createChunkDoc(stream.id, stream.n, Buffer.from(stream.bufToStore));\n            ++stream.state.outstandingRequests;\n            ++outstandingRequests;\n            if (isAborted(stream, callback)) {\n                return;\n            }\n            stream.chunks.insertOne(doc, {\n                writeConcern: stream.writeConcern\n            }).then(()=>{\n                --stream.state.outstandingRequests;\n                --outstandingRequests;\n                if (!outstandingRequests) {\n                    checkDone(stream, callback);\n                }\n            }, (error)=>handleError(stream, error, callback));\n            spaceRemaining = stream.chunkSizeBytes;\n            stream.pos = 0;\n            ++stream.n;\n        }\n        inputBufRemaining -= numToCopy;\n        numToCopy = Math.min(spaceRemaining, inputBufRemaining);\n    }\n}\nfunction writeRemnant(stream, callback) {\n    // Buffer is empty, so don't bother to insert\n    if (stream.pos === 0) {\n        return checkDone(stream, callback);\n    }\n    ++stream.state.outstandingRequests;\n    // Create a new buffer to make sure the buffer isn't bigger than it needs\n    // to be.\n    const remnant = Buffer.alloc(stream.pos);\n    stream.bufToStore.copy(remnant, 0, 0, stream.pos);\n    const doc = createChunkDoc(stream.id, stream.n, remnant);\n    // If the stream was aborted, do not write remnant\n    if (isAborted(stream, callback)) {\n        return;\n    }\n    stream.chunks.insertOne(doc, {\n        writeConcern: stream.writeConcern\n    }).then(()=>{\n        --stream.state.outstandingRequests;\n        checkDone(stream, callback);\n    }, (error)=>handleError(stream, error, callback));\n}\nfunction isAborted(stream, callback) {\n    if (stream.state.aborted) {\n        process.nextTick(callback, new error_1.MongoAPIError(\"Stream has been aborted\"));\n        return true;\n    }\n    return false;\n} //# sourceMappingURL=upload.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvZ3JpZGZzL3VwbG9hZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsK0JBQStCLEdBQUcsS0FBSztBQUN2QyxNQUFNRyxXQUFXQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxrQkFBa0JILG1CQUFPQSxDQUFDLDZFQUFvQjtBQUNwRDs7Ozs7Q0FLQyxHQUNELE1BQU1GLGdDQUFnQ0MsU0FBU0ssUUFBUTtJQUNuRDs7Ozs7S0FLQyxHQUNEQyxZQUFZQyxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsT0FBTyxDQUFFO1FBQ25DLEtBQUs7UUFDTDs7Ozs7Ozs7Ozs7OztTQWFDLEdBQ0QsSUFBSSxDQUFDQyxVQUFVLEdBQUc7UUFDbEJELFVBQVVBLFdBQVcsQ0FBQztRQUN0QixJQUFJLENBQUNGLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNJLE1BQU0sR0FBR0osT0FBT0ssQ0FBQyxDQUFDQyxpQkFBaUI7UUFDeEMsSUFBSSxDQUFDTCxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ00sS0FBSyxHQUFHUCxPQUFPSyxDQUFDLENBQUNHLGdCQUFnQjtRQUN0QyxJQUFJLENBQUNOLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNPLFlBQVksR0FBR1osZ0JBQWdCYSxZQUFZLENBQUNDLFdBQVcsQ0FBQ1QsWUFBWUYsT0FBT0ssQ0FBQyxDQUFDSCxPQUFPLENBQUNPLFlBQVk7UUFDdEcsZ0NBQWdDO1FBQ2hDLElBQUksQ0FBQ0csSUFBSSxHQUFHO1FBQ1osSUFBSSxDQUFDQyxFQUFFLEdBQUdYLFFBQVFXLEVBQUUsR0FBR1gsUUFBUVcsRUFBRSxHQUFHLElBQUlsQixPQUFPbUIsUUFBUTtRQUN2RCxxREFBcUQ7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LGFBQWEsQ0FBQztRQUNyRCxPQUFPO0lBQ1g7SUFDQSxPQUFPO0FBQ1gsRUFDQSxrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2dyaWRmcy91cGxvYWQuanM/YmYzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0gPSB2b2lkIDA7XG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCJzdHJlYW1cIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB3cml0ZV9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi8uLi93cml0ZV9jb25jZXJuXCIpO1xuLyoqXG4gKiBBIHdyaXRhYmxlIHN0cmVhbSB0aGF0IGVuYWJsZXMgeW91IHRvIHdyaXRlIGJ1ZmZlcnMgdG8gR3JpZEZTLlxuICpcbiAqIERvIG5vdCBpbnN0YW50aWF0ZSB0aGlzIGNsYXNzIGRpcmVjdGx5LiBVc2UgYG9wZW5VcGxvYWRTdHJlYW0oKWAgaW5zdGVhZC5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0gZXh0ZW5kcyBzdHJlYW1fMS5Xcml0YWJsZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJ1Y2tldCAtIEhhbmRsZSBmb3IgdGhpcyBzdHJlYW0ncyBjb3JyZXNwb25kaW5nIGJ1Y2tldFxuICAgICAqIEBwYXJhbSBmaWxlbmFtZSAtIFRoZSB2YWx1ZSBvZiB0aGUgJ2ZpbGVuYW1lJyBrZXkgaW4gdGhlIGZpbGVzIGRvY1xuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYnVja2V0LCBmaWxlbmFtZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRvY3VtZW50IGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGluc2VydGVkIGZpbGUuXG4gICAgICAgICAqIFRoaXMgcHJvcGVydHkgaXMgZGVmaW5lZCBfYWZ0ZXJfIHRoZSBmaW5pc2ggZXZlbnQgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICAgICAgICogSXQgd2lsbCByZW1haW4gYG51bGxgIGlmIGFuIGVycm9yIG9jY3Vycy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYGBgdHNcbiAgICAgICAgICogZnMuY3JlYXRlUmVhZFN0cmVhbSgnZmlsZS50eHQnKVxuICAgICAgICAgKiAgIC5waXBlKGJ1Y2tldC5vcGVuVXBsb2FkU3RyZWFtKCdmaWxlLnR4dCcpKVxuICAgICAgICAgKiAgIC5vbignZmluaXNoJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgKiAgICAgY29uc29sZS5sb2codGhpcy5ncmlkRlNGaWxlKVxuICAgICAgICAgKiAgIH0pXG4gICAgICAgICAqIGBgYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ncmlkRlNGaWxlID0gbnVsbDtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHRoaXMuYnVja2V0ID0gYnVja2V0O1xuICAgICAgICB0aGlzLmNodW5rcyA9IGJ1Y2tldC5zLl9jaHVua3NDb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIHRoaXMuZmlsZXMgPSBidWNrZXQucy5fZmlsZXNDb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLndyaXRlQ29uY2VybiA9IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucykgfHwgYnVja2V0LnMub3B0aW9ucy53cml0ZUNvbmNlcm47XG4gICAgICAgIC8vIFNpZ25hbHMgdGhlIHdyaXRlIGlzIGFsbCBkb25lXG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlkID0gb3B0aW9ucy5pZCA/IG9wdGlvbnMuaWQgOiBuZXcgYnNvbl8xLk9iamVjdElkKCk7XG4gICAgICAgIC8vIHByb3Blcmx5IGluaGVyaXQgdGhlIGRlZmF1bHQgY2h1bmtzaXplIGZyb20gcGFyZW50XG4gICAgICAgIHRoaXMuY2h1bmtTaXplQnl0ZXMgPSBvcHRpb25zLmNodW5rU2l6ZUJ5dGVzIHx8IHRoaXMuYnVja2V0LnMub3B0aW9ucy5jaHVua1NpemVCeXRlcztcbiAgICAgICAgdGhpcy5idWZUb1N0b3JlID0gQnVmZmVyLmFsbG9jKHRoaXMuY2h1bmtTaXplQnl0ZXMpO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubiA9IDA7XG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0cmVhbUVuZDogZmFsc2UsXG4gICAgICAgICAgICBvdXRzdGFuZGluZ1JlcXVlc3RzOiAwLFxuICAgICAgICAgICAgZXJyb3JlZDogZmFsc2UsXG4gICAgICAgICAgICBhYm9ydGVkOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXMuYnVja2V0LnMuY2FsbGVkT3BlblVwbG9hZFN0cmVhbSkge1xuICAgICAgICAgICAgdGhpcy5idWNrZXQucy5jYWxsZWRPcGVuVXBsb2FkU3RyZWFtID0gdHJ1ZTtcbiAgICAgICAgICAgIGNoZWNrSW5kZXhlcyh0aGlzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1Y2tldC5zLmNoZWNrZWRJbmRleGVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1Y2tldC5lbWl0KCdpbmRleCcpO1xuICAgICAgICAgICAgfSwgKCkgPT4gbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICpcbiAgICAgKiBUaGUgc3RyZWFtIGlzIGNvbnNpZGVyZWQgY29uc3RydWN0ZWQgd2hlbiB0aGUgaW5kZXhlcyBhcmUgZG9uZSBiZWluZyBjcmVhdGVkXG4gICAgICovXG4gICAgX2NvbnN0cnVjdChjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5idWNrZXQucy5jaGVja2VkSW5kZXhlcykge1xuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVja2V0Lm9uY2UoJ2luZGV4JywgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBXcml0ZSBhIGJ1ZmZlciB0byB0aGUgc3RyZWFtLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNodW5rIC0gQnVmZmVyIHRvIHdyaXRlXG4gICAgICogQHBhcmFtIGVuY29kaW5nIC0gT3B0aW9uYWwgZW5jb2RpbmcgZm9yIHRoZSBidWZmZXJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGNodW5rIHdhcyBhZGRlZCB0byB0aGUgYnVmZmVyLCBvciBpZiB0aGUgZW50aXJlIGNodW5rIHdhcyBwZXJzaXN0ZWQgdG8gTW9uZ29EQiBpZiB0aGlzIGNodW5rIGNhdXNlZCBhIGZsdXNoLlxuICAgICAqL1xuICAgIF93cml0ZShjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGRvV3JpdGUodGhpcywgY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfZmluYWwoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc3RyZWFtRW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZS5zdHJlYW1FbmQgPSB0cnVlO1xuICAgICAgICB3cml0ZVJlbW5hbnQodGhpcywgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQbGFjZXMgdGhpcyB3cml0ZSBzdHJlYW0gaW50byBhbiBhYm9ydGVkIHN0YXRlIChhbGwgZnV0dXJlIHdyaXRlcyBmYWlsKVxuICAgICAqIGFuZCBkZWxldGVzIGFsbCBjaHVua3MgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiB3cml0dGVuLlxuICAgICAqL1xuICAgIGFzeW5jIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zdHJlYW1FbmQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDg1KTogUmVwbGFjZSB3aXRoIE1vbmdvR3JpZEZTU3RyZWFtQ2xvc2VkXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0FQSUVycm9yKCdDYW5ub3QgYWJvcnQgYSBzdHJlYW0gdGhhdCBoYXMgYWxyZWFkeSBjb21wbGV0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5hYm9ydGVkKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4NSk6IFJlcGxhY2Ugd2l0aCBNb25nb0dyaWRGU1N0cmVhbUNsb3NlZFxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignQ2Fubm90IGNhbGwgYWJvcnQoKSBvbiBhIHN0cmVhbSB0d2ljZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUuYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIGF3YWl0IHRoaXMuY2h1bmtzLmRlbGV0ZU1hbnkoeyBmaWxlc19pZDogdGhpcy5pZCB9KTtcbiAgICB9XG59XG5leHBvcnRzLkdyaWRGU0J1Y2tldFdyaXRlU3RyZWFtID0gR3JpZEZTQnVja2V0V3JpdGVTdHJlYW07XG5mdW5jdGlvbiBoYW5kbGVFcnJvcihzdHJlYW0sIGVycm9yLCBjYWxsYmFjaykge1xuICAgIGlmIChzdHJlYW0uc3RhdGUuZXJyb3JlZCkge1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdHJlYW0uc3RhdGUuZXJyb3JlZCA9IHRydWU7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhjYWxsYmFjaywgZXJyb3IpO1xufVxuZnVuY3Rpb24gY3JlYXRlQ2h1bmtEb2MoZmlsZXNJZCwgbiwgZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIF9pZDogbmV3IGJzb25fMS5PYmplY3RJZCgpLFxuICAgICAgICBmaWxlc19pZDogZmlsZXNJZCxcbiAgICAgICAgbixcbiAgICAgICAgZGF0YVxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBjaGVja0NodW5rc0luZGV4KHN0cmVhbSkge1xuICAgIGNvbnN0IGluZGV4ID0geyBmaWxlc19pZDogMSwgbjogMSB9O1xuICAgIGxldCBpbmRleGVzO1xuICAgIHRyeSB7XG4gICAgICAgIGluZGV4ZXMgPSBhd2FpdCBzdHJlYW0uY2h1bmtzLmxpc3RJbmRleGVzKCkudG9BcnJheSgpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb0Vycm9yICYmIGVycm9yLmNvZGUgPT09IGVycm9yXzEuTU9OR09EQl9FUlJPUl9DT0RFUy5OYW1lc3BhY2VOb3RGb3VuZCkge1xuICAgICAgICAgICAgaW5kZXhlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaGFzQ2h1bmtzSW5kZXggPSAhIWluZGV4ZXMuZmluZChpbmRleCA9PiB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhpbmRleC5rZXkpO1xuICAgICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDIgJiYgaW5kZXgua2V5LmZpbGVzX2lkID09PSAxICYmIGluZGV4LmtleS5uID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgaWYgKCFoYXNDaHVua3NJbmRleCkge1xuICAgICAgICBhd2FpdCBzdHJlYW0uY2h1bmtzLmNyZWF0ZUluZGV4KGluZGV4LCB7XG4gICAgICAgICAgICAuLi5zdHJlYW0ud3JpdGVDb25jZXJuLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogdHJ1ZSxcbiAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja0RvbmUoc3RyZWFtLCBjYWxsYmFjaykge1xuICAgIGlmIChzdHJlYW0uZG9uZSkge1xuICAgICAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhjYWxsYmFjayk7XG4gICAgfVxuICAgIGlmIChzdHJlYW0uc3RhdGUuc3RyZWFtRW5kICYmIHN0cmVhbS5zdGF0ZS5vdXRzdGFuZGluZ1JlcXVlc3RzID09PSAwICYmICFzdHJlYW0uc3RhdGUuZXJyb3JlZCkge1xuICAgICAgICAvLyBTZXQgZG9uZSBzbyB3ZSBkbyBub3QgdHJpZ2dlciBkdXBsaWNhdGUgY3JlYXRlRmlsZXNEb2NcbiAgICAgICAgc3RyZWFtLmRvbmUgPSB0cnVlO1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgZmlsZXMgZG9jXG4gICAgICAgIGNvbnN0IGdyaWRGU0ZpbGUgPSBjcmVhdGVGaWxlc0RvYyhzdHJlYW0uaWQsIHN0cmVhbS5sZW5ndGgsIHN0cmVhbS5jaHVua1NpemVCeXRlcywgc3RyZWFtLmZpbGVuYW1lLCBzdHJlYW0ub3B0aW9ucy5jb250ZW50VHlwZSwgc3RyZWFtLm9wdGlvbnMuYWxpYXNlcywgc3RyZWFtLm9wdGlvbnMubWV0YWRhdGEpO1xuICAgICAgICBpZiAoaXNBYm9ydGVkKHN0cmVhbSwgY2FsbGJhY2spKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLmZpbGVzLmluc2VydE9uZShncmlkRlNGaWxlLCB7IHdyaXRlQ29uY2Vybjogc3RyZWFtLndyaXRlQ29uY2VybiB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHN0cmVhbS5ncmlkRlNGaWxlID0gZ3JpZEZTRmlsZTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0sIGVycm9yID0+IGhhbmRsZUVycm9yKHN0cmVhbSwgZXJyb3IsIGNhbGxiYWNrKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJvY2Vzcy5uZXh0VGljayhjYWxsYmFjayk7XG59XG5hc3luYyBmdW5jdGlvbiBjaGVja0luZGV4ZXMoc3RyZWFtKSB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgc3RyZWFtLmZpbGVzLmZpbmRPbmUoe30sIHsgcHJvamVjdGlvbjogeyBfaWQ6IDEgfSB9KTtcbiAgICBpZiAoZG9jICE9IG51bGwpIHtcbiAgICAgICAgLy8gSWYgYXQgbGVhc3Qgb25lIGRvY3VtZW50IGV4aXN0cyBhc3N1bWUgdGhlIGNvbGxlY3Rpb24gaGFzIHRoZSByZXF1aXJlZCBpbmRleFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0geyBmaWxlbmFtZTogMSwgdXBsb2FkRGF0ZTogMSB9O1xuICAgIGxldCBpbmRleGVzO1xuICAgIHRyeSB7XG4gICAgICAgIGluZGV4ZXMgPSBhd2FpdCBzdHJlYW0uZmlsZXMubGlzdEluZGV4ZXMoKS50b0FycmF5KCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IgJiYgZXJyb3IuY29kZSA9PT0gZXJyb3JfMS5NT05HT0RCX0VSUk9SX0NPREVTLk5hbWVzcGFjZU5vdEZvdW5kKSB7XG4gICAgICAgICAgICBpbmRleGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBoYXNGaWxlSW5kZXggPSAhIWluZGV4ZXMuZmluZChpbmRleCA9PiB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhpbmRleC5rZXkpO1xuICAgICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDIgJiYgaW5kZXgua2V5LmZpbGVuYW1lID09PSAxICYmIGluZGV4LmtleS51cGxvYWREYXRlID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgaWYgKCFoYXNGaWxlSW5kZXgpIHtcbiAgICAgICAgYXdhaXQgc3RyZWFtLmZpbGVzLmNyZWF0ZUluZGV4KGluZGV4LCB7IGJhY2tncm91bmQ6IGZhbHNlIH0pO1xuICAgIH1cbiAgICBhd2FpdCBjaGVja0NodW5rc0luZGV4KHN0cmVhbSk7XG59XG5mdW5jdGlvbiBjcmVhdGVGaWxlc0RvYyhfaWQsIGxlbmd0aCwgY2h1bmtTaXplLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIGFsaWFzZXMsIG1ldGFkYXRhKSB7XG4gICAgY29uc3QgcmV0ID0ge1xuICAgICAgICBfaWQsXG4gICAgICAgIGxlbmd0aCxcbiAgICAgICAgY2h1bmtTaXplLFxuICAgICAgICB1cGxvYWREYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICBmaWxlbmFtZVxuICAgIH07XG4gICAgaWYgKGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIHJldC5jb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlO1xuICAgIH1cbiAgICBpZiAoYWxpYXNlcykge1xuICAgICAgICByZXQuYWxpYXNlcyA9IGFsaWFzZXM7XG4gICAgfVxuICAgIGlmIChtZXRhZGF0YSkge1xuICAgICAgICByZXQubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmZ1bmN0aW9uIGRvV3JpdGUoc3RyZWFtLCBjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGlzQWJvcnRlZChzdHJlYW0sIGNhbGxiYWNrKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGlucHV0QnVmID0gQnVmZmVyLmlzQnVmZmVyKGNodW5rKSA/IGNodW5rIDogQnVmZmVyLmZyb20oY2h1bmssIGVuY29kaW5nKTtcbiAgICBzdHJlYW0ubGVuZ3RoICs9IGlucHV0QnVmLmxlbmd0aDtcbiAgICAvLyBJbnB1dCBpcyBzbWFsbCBlbm91Z2ggdG8gZml0IGluIG91ciBidWZmZXJcbiAgICBpZiAoc3RyZWFtLnBvcyArIGlucHV0QnVmLmxlbmd0aCA8IHN0cmVhbS5jaHVua1NpemVCeXRlcykge1xuICAgICAgICBpbnB1dEJ1Zi5jb3B5KHN0cmVhbS5idWZUb1N0b3JlLCBzdHJlYW0ucG9zKTtcbiAgICAgICAgc3RyZWFtLnBvcyArPSBpbnB1dEJ1Zi5sZW5ndGg7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soY2FsbGJhY2spO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIE90aGVyd2lzZSwgYnVmZmVyIGlzIHRvbyBiaWcgZm9yIGN1cnJlbnQgY2h1bmssIHNvIHdlIG5lZWQgdG8gZmx1c2hcbiAgICAvLyB0byBNb25nb0RCLlxuICAgIGxldCBpbnB1dEJ1ZlJlbWFpbmluZyA9IGlucHV0QnVmLmxlbmd0aDtcbiAgICBsZXQgc3BhY2VSZW1haW5pbmcgPSBzdHJlYW0uY2h1bmtTaXplQnl0ZXMgLSBzdHJlYW0ucG9zO1xuICAgIGxldCBudW1Ub0NvcHkgPSBNYXRoLm1pbihzcGFjZVJlbWFpbmluZywgaW5wdXRCdWYubGVuZ3RoKTtcbiAgICBsZXQgb3V0c3RhbmRpbmdSZXF1ZXN0cyA9IDA7XG4gICAgd2hpbGUgKGlucHV0QnVmUmVtYWluaW5nID4gMCkge1xuICAgICAgICBjb25zdCBpbnB1dEJ1ZlBvcyA9IGlucHV0QnVmLmxlbmd0aCAtIGlucHV0QnVmUmVtYWluaW5nO1xuICAgICAgICBpbnB1dEJ1Zi5jb3B5KHN0cmVhbS5idWZUb1N0b3JlLCBzdHJlYW0ucG9zLCBpbnB1dEJ1ZlBvcywgaW5wdXRCdWZQb3MgKyBudW1Ub0NvcHkpO1xuICAgICAgICBzdHJlYW0ucG9zICs9IG51bVRvQ29weTtcbiAgICAgICAgc3BhY2VSZW1haW5pbmcgLT0gbnVtVG9Db3B5O1xuICAgICAgICBsZXQgZG9jO1xuICAgICAgICBpZiAoc3BhY2VSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICAgIGRvYyA9IGNyZWF0ZUNodW5rRG9jKHN0cmVhbS5pZCwgc3RyZWFtLm4sIEJ1ZmZlci5mcm9tKHN0cmVhbS5idWZUb1N0b3JlKSk7XG4gICAgICAgICAgICArK3N0cmVhbS5zdGF0ZS5vdXRzdGFuZGluZ1JlcXVlc3RzO1xuICAgICAgICAgICAgKytvdXRzdGFuZGluZ1JlcXVlc3RzO1xuICAgICAgICAgICAgaWYgKGlzQWJvcnRlZChzdHJlYW0sIGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cmVhbS5jaHVua3MuaW5zZXJ0T25lKGRvYywgeyB3cml0ZUNvbmNlcm46IHN0cmVhbS53cml0ZUNvbmNlcm4gfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgLS1zdHJlYW0uc3RhdGUub3V0c3RhbmRpbmdSZXF1ZXN0cztcbiAgICAgICAgICAgICAgICAtLW91dHN0YW5kaW5nUmVxdWVzdHM7XG4gICAgICAgICAgICAgICAgaWYgKCFvdXRzdGFuZGluZ1JlcXVlc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrRG9uZShzdHJlYW0sIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlcnJvciA9PiBoYW5kbGVFcnJvcihzdHJlYW0sIGVycm9yLCBjYWxsYmFjaykpO1xuICAgICAgICAgICAgc3BhY2VSZW1haW5pbmcgPSBzdHJlYW0uY2h1bmtTaXplQnl0ZXM7XG4gICAgICAgICAgICBzdHJlYW0ucG9zID0gMDtcbiAgICAgICAgICAgICsrc3RyZWFtLm47XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXRCdWZSZW1haW5pbmcgLT0gbnVtVG9Db3B5O1xuICAgICAgICBudW1Ub0NvcHkgPSBNYXRoLm1pbihzcGFjZVJlbWFpbmluZywgaW5wdXRCdWZSZW1haW5pbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdyaXRlUmVtbmFudChzdHJlYW0sIGNhbGxiYWNrKSB7XG4gICAgLy8gQnVmZmVyIGlzIGVtcHR5LCBzbyBkb24ndCBib3RoZXIgdG8gaW5zZXJ0XG4gICAgaWYgKHN0cmVhbS5wb3MgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGNoZWNrRG9uZShzdHJlYW0sIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgKytzdHJlYW0uc3RhdGUub3V0c3RhbmRpbmdSZXF1ZXN0cztcbiAgICAvLyBDcmVhdGUgYSBuZXcgYnVmZmVyIHRvIG1ha2Ugc3VyZSB0aGUgYnVmZmVyIGlzbid0IGJpZ2dlciB0aGFuIGl0IG5lZWRzXG4gICAgLy8gdG8gYmUuXG4gICAgY29uc3QgcmVtbmFudCA9IEJ1ZmZlci5hbGxvYyhzdHJlYW0ucG9zKTtcbiAgICBzdHJlYW0uYnVmVG9TdG9yZS5jb3B5KHJlbW5hbnQsIDAsIDAsIHN0cmVhbS5wb3MpO1xuICAgIGNvbnN0IGRvYyA9IGNyZWF0ZUNodW5rRG9jKHN0cmVhbS5pZCwgc3RyZWFtLm4sIHJlbW5hbnQpO1xuICAgIC8vIElmIHRoZSBzdHJlYW0gd2FzIGFib3J0ZWQsIGRvIG5vdCB3cml0ZSByZW1uYW50XG4gICAgaWYgKGlzQWJvcnRlZChzdHJlYW0sIGNhbGxiYWNrKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHN0cmVhbS5jaHVua3MuaW5zZXJ0T25lKGRvYywgeyB3cml0ZUNvbmNlcm46IHN0cmVhbS53cml0ZUNvbmNlcm4gfSkudGhlbigoKSA9PiB7XG4gICAgICAgIC0tc3RyZWFtLnN0YXRlLm91dHN0YW5kaW5nUmVxdWVzdHM7XG4gICAgICAgIGNoZWNrRG9uZShzdHJlYW0sIGNhbGxiYWNrKTtcbiAgICB9LCBlcnJvciA9PiBoYW5kbGVFcnJvcihzdHJlYW0sIGVycm9yLCBjYWxsYmFjaykpO1xufVxuZnVuY3Rpb24gaXNBYm9ydGVkKHN0cmVhbSwgY2FsbGJhY2spIHtcbiAgICBpZiAoc3RyZWFtLnN0YXRlLmFib3J0ZWQpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhjYWxsYmFjaywgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignU3RyZWFtIGhhcyBiZWVuIGFib3J0ZWQnKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGxvYWQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiR3JpZEZTQnVja2V0V3JpdGVTdHJlYW0iLCJzdHJlYW1fMSIsInJlcXVpcmUiLCJic29uXzEiLCJlcnJvcl8xIiwid3JpdGVfY29uY2Vybl8xIiwiV3JpdGFibGUiLCJjb25zdHJ1Y3RvciIsImJ1Y2tldCIsImZpbGVuYW1lIiwib3B0aW9ucyIsImdyaWRGU0ZpbGUiLCJjaHVua3MiLCJzIiwiX2NodW5rc0NvbGxlY3Rpb24iLCJmaWxlcyIsIl9maWxlc0NvbGxlY3Rpb24iLCJ3cml0ZUNvbmNlcm4iLCJXcml0ZUNvbmNlcm4iLCJmcm9tT3B0aW9ucyIsImRvbmUiLCJpZCIsIk9iamVjdElkIiwiY2h1bmtTaXplQnl0ZXMiLCJidWZUb1N0b3JlIiwiQnVmZmVyIiwiYWxsb2MiLCJsZW5ndGgiLCJuIiwicG9zIiwic3RhdGUiLCJzdHJlYW1FbmQiLCJvdXRzdGFuZGluZ1JlcXVlc3RzIiwiZXJyb3JlZCIsImFib3J0ZWQiLCJjYWxsZWRPcGVuVXBsb2FkU3RyZWFtIiwiY2hlY2tJbmRleGVzIiwidGhlbiIsImNoZWNrZWRJbmRleGVzIiwiZW1pdCIsIl9jb25zdHJ1Y3QiLCJjYWxsYmFjayIsInByb2Nlc3MiLCJuZXh0VGljayIsIm9uY2UiLCJfd3JpdGUiLCJjaHVuayIsImVuY29kaW5nIiwiZG9Xcml0ZSIsIl9maW5hbCIsIndyaXRlUmVtbmFudCIsImFib3J0IiwiTW9uZ29BUElFcnJvciIsImRlbGV0ZU1hbnkiLCJmaWxlc19pZCIsImhhbmRsZUVycm9yIiwic3RyZWFtIiwiZXJyb3IiLCJjcmVhdGVDaHVua0RvYyIsImZpbGVzSWQiLCJkYXRhIiwiX2lkIiwiY2hlY2tDaHVua3NJbmRleCIsImluZGV4IiwiaW5kZXhlcyIsImxpc3RJbmRleGVzIiwidG9BcnJheSIsIk1vbmdvRXJyb3IiLCJjb2RlIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIk5hbWVzcGFjZU5vdEZvdW5kIiwiaGFzQ2h1bmtzSW5kZXgiLCJmaW5kIiwia2V5cyIsImtleSIsImNyZWF0ZUluZGV4IiwiYmFja2dyb3VuZCIsInVuaXF1ZSIsImNoZWNrRG9uZSIsImNyZWF0ZUZpbGVzRG9jIiwiY29udGVudFR5cGUiLCJhbGlhc2VzIiwibWV0YWRhdGEiLCJpc0Fib3J0ZWQiLCJpbnNlcnRPbmUiLCJkb2MiLCJmaW5kT25lIiwicHJvamVjdGlvbiIsInVwbG9hZERhdGUiLCJoYXNGaWxlSW5kZXgiLCJjaHVua1NpemUiLCJyZXQiLCJEYXRlIiwiaW5wdXRCdWYiLCJpc0J1ZmZlciIsImZyb20iLCJjb3B5IiwiaW5wdXRCdWZSZW1haW5pbmciLCJzcGFjZVJlbWFpbmluZyIsIm51bVRvQ29weSIsIk1hdGgiLCJtaW4iLCJpbnB1dEJ1ZlBvcyIsInJlbW5hbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/gridfs/upload.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/index.js":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/lib/index.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoUnexpectedServerResponseError = exports.MongoTransactionError = exports.MongoTopologyClosedError = exports.MongoTailableCursorError = exports.MongoSystemError = exports.MongoServerSelectionError = exports.MongoServerError = exports.MongoServerClosedError = exports.MongoRuntimeError = exports.MongoParseError = exports.MongoNotConnectedError = exports.MongoNetworkTimeoutError = exports.MongoNetworkError = exports.MongoMissingDependencyError = exports.MongoMissingCredentialsError = exports.MongoKerberosError = exports.MongoInvalidArgumentError = exports.MongoGridFSStreamError = exports.MongoGridFSChunkError = exports.MongoExpiredSessionError = exports.MongoError = exports.MongoDriverError = exports.MongoDecompressionError = exports.MongoCursorInUseError = exports.MongoCursorExhaustedError = exports.MongoCompatibilityError = exports.MongoChangeStreamError = exports.MongoBatchReExecutionError = exports.MongoAzureError = exports.MongoAWSError = exports.MongoAPIError = exports.ChangeStreamCursor = exports.ClientEncryption = exports.MongoBulkWriteError = exports.UUID = exports.Timestamp = exports.ObjectId = exports.MinKey = exports.MaxKey = exports.Long = exports.Int32 = exports.Double = exports.Decimal128 = exports.DBRef = exports.Code = exports.BSONType = exports.BSONSymbol = exports.BSONRegExp = exports.Binary = exports.BSON = void 0;\nexports.ConnectionPoolReadyEvent = exports.ConnectionPoolMonitoringEvent = exports.ConnectionPoolCreatedEvent = exports.ConnectionPoolClosedEvent = exports.ConnectionPoolClearedEvent = exports.ConnectionCreatedEvent = exports.ConnectionClosedEvent = exports.ConnectionCheckOutStartedEvent = exports.ConnectionCheckOutFailedEvent = exports.ConnectionCheckedOutEvent = exports.ConnectionCheckedInEvent = exports.CommandSucceededEvent = exports.CommandStartedEvent = exports.CommandFailedEvent = exports.WriteConcern = exports.ReadPreference = exports.ReadConcern = exports.TopologyType = exports.ServerType = exports.ReadPreferenceMode = exports.ReadConcernLevel = exports.ProfilingLevel = exports.ReturnDocument = exports.ServerApiVersion = exports.ExplainVerbosity = exports.MongoErrorLabel = exports.CURSOR_FLAGS = exports.Compressor = exports.AuthMechanism = exports.GSSAPICanonicalizationValue = exports.AutoEncryptionLoggerLevel = exports.BatchType = exports.UnorderedBulkOperation = exports.OrderedBulkOperation = exports.MongoClient = exports.ListIndexesCursor = exports.ListCollectionsCursor = exports.GridFSBucketWriteStream = exports.GridFSBucketReadStream = exports.GridFSBucket = exports.FindCursor = exports.Db = exports.Collection = exports.ClientSession = exports.ChangeStream = exports.CancellationToken = exports.AggregationCursor = exports.Admin = exports.AbstractCursor = exports.MongoWriteConcernError = void 0;\nexports.MongoClientAuthProviders = exports.MongoCryptKMSRequestNetworkTimeoutError = exports.MongoCryptInvalidArgumentError = exports.MongoCryptError = exports.MongoCryptCreateEncryptedCollectionError = exports.MongoCryptCreateDataKeyError = exports.MongoCryptAzureKMSRequestError = exports.SrvPollingEvent = exports.WaitingForSuitableServerEvent = exports.ServerSelectionSucceededEvent = exports.ServerSelectionStartedEvent = exports.ServerSelectionFailedEvent = exports.ServerSelectionEvent = exports.TopologyOpeningEvent = exports.TopologyDescriptionChangedEvent = exports.TopologyClosedEvent = exports.ServerOpeningEvent = exports.ServerHeartbeatSucceededEvent = exports.ServerHeartbeatStartedEvent = exports.ServerHeartbeatFailedEvent = exports.ServerDescriptionChangedEvent = exports.ServerClosedEvent = exports.ConnectionReadyEvent = void 0;\nconst admin_1 = __webpack_require__(/*! ./admin */ \"(ssr)/./node_modules/mongodb/lib/admin.js\");\nObject.defineProperty(exports, \"Admin\", ({\n    enumerable: true,\n    get: function() {\n        return admin_1.Admin;\n    }\n}));\nconst ordered_1 = __webpack_require__(/*! ./bulk/ordered */ \"(ssr)/./node_modules/mongodb/lib/bulk/ordered.js\");\nObject.defineProperty(exports, \"OrderedBulkOperation\", ({\n    enumerable: true,\n    get: function() {\n        return ordered_1.OrderedBulkOperation;\n    }\n}));\nconst unordered_1 = __webpack_require__(/*! ./bulk/unordered */ \"(ssr)/./node_modules/mongodb/lib/bulk/unordered.js\");\nObject.defineProperty(exports, \"UnorderedBulkOperation\", ({\n    enumerable: true,\n    get: function() {\n        return unordered_1.UnorderedBulkOperation;\n    }\n}));\nconst change_stream_1 = __webpack_require__(/*! ./change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nObject.defineProperty(exports, \"ChangeStream\", ({\n    enumerable: true,\n    get: function() {\n        return change_stream_1.ChangeStream;\n    }\n}));\nconst collection_1 = __webpack_require__(/*! ./collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nObject.defineProperty(exports, \"Collection\", ({\n    enumerable: true,\n    get: function() {\n        return collection_1.Collection;\n    }\n}));\nconst abstract_cursor_1 = __webpack_require__(/*! ./cursor/abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\nObject.defineProperty(exports, \"AbstractCursor\", ({\n    enumerable: true,\n    get: function() {\n        return abstract_cursor_1.AbstractCursor;\n    }\n}));\nconst aggregation_cursor_1 = __webpack_require__(/*! ./cursor/aggregation_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/aggregation_cursor.js\");\nObject.defineProperty(exports, \"AggregationCursor\", ({\n    enumerable: true,\n    get: function() {\n        return aggregation_cursor_1.AggregationCursor;\n    }\n}));\nconst find_cursor_1 = __webpack_require__(/*! ./cursor/find_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/find_cursor.js\");\nObject.defineProperty(exports, \"FindCursor\", ({\n    enumerable: true,\n    get: function() {\n        return find_cursor_1.FindCursor;\n    }\n}));\nconst list_collections_cursor_1 = __webpack_require__(/*! ./cursor/list_collections_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_collections_cursor.js\");\nObject.defineProperty(exports, \"ListCollectionsCursor\", ({\n    enumerable: true,\n    get: function() {\n        return list_collections_cursor_1.ListCollectionsCursor;\n    }\n}));\nconst list_indexes_cursor_1 = __webpack_require__(/*! ./cursor/list_indexes_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/list_indexes_cursor.js\");\nObject.defineProperty(exports, \"ListIndexesCursor\", ({\n    enumerable: true,\n    get: function() {\n        return list_indexes_cursor_1.ListIndexesCursor;\n    }\n}));\nconst db_1 = __webpack_require__(/*! ./db */ \"(ssr)/./node_modules/mongodb/lib/db.js\");\nObject.defineProperty(exports, \"Db\", ({\n    enumerable: true,\n    get: function() {\n        return db_1.Db;\n    }\n}));\nconst gridfs_1 = __webpack_require__(/*! ./gridfs */ \"(ssr)/./node_modules/mongodb/lib/gridfs/index.js\");\nObject.defineProperty(exports, \"GridFSBucket\", ({\n    enumerable: true,\n    get: function() {\n        return gridfs_1.GridFSBucket;\n    }\n}));\nconst download_1 = __webpack_require__(/*! ./gridfs/download */ \"(ssr)/./node_modules/mongodb/lib/gridfs/download.js\");\nObject.defineProperty(exports, \"GridFSBucketReadStream\", ({\n    enumerable: true,\n    get: function() {\n        return download_1.GridFSBucketReadStream;\n    }\n}));\nconst upload_1 = __webpack_require__(/*! ./gridfs/upload */ \"(ssr)/./node_modules/mongodb/lib/gridfs/upload.js\");\nObject.defineProperty(exports, \"GridFSBucketWriteStream\", ({\n    enumerable: true,\n    get: function() {\n        return upload_1.GridFSBucketWriteStream;\n    }\n}));\nconst mongo_client_1 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nObject.defineProperty(exports, \"MongoClient\", ({\n    enumerable: true,\n    get: function() {\n        return mongo_client_1.MongoClient;\n    }\n}));\nconst mongo_types_1 = __webpack_require__(/*! ./mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nObject.defineProperty(exports, \"CancellationToken\", ({\n    enumerable: true,\n    get: function() {\n        return mongo_types_1.CancellationToken;\n    }\n}));\nconst sessions_1 = __webpack_require__(/*! ./sessions */ \"(ssr)/./node_modules/mongodb/lib/sessions.js\");\nObject.defineProperty(exports, \"ClientSession\", ({\n    enumerable: true,\n    get: function() {\n        return sessions_1.ClientSession;\n    }\n}));\n/** @public */ var bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nObject.defineProperty(exports, \"BSON\", ({\n    enumerable: true,\n    get: function() {\n        return bson_1.BSON;\n    }\n}));\nvar bson_2 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nObject.defineProperty(exports, \"Binary\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Binary;\n    }\n}));\nObject.defineProperty(exports, \"BSONRegExp\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.BSONRegExp;\n    }\n}));\nObject.defineProperty(exports, \"BSONSymbol\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.BSONSymbol;\n    }\n}));\nObject.defineProperty(exports, \"BSONType\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.BSONType;\n    }\n}));\nObject.defineProperty(exports, \"Code\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Code;\n    }\n}));\nObject.defineProperty(exports, \"DBRef\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.DBRef;\n    }\n}));\nObject.defineProperty(exports, \"Decimal128\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Decimal128;\n    }\n}));\nObject.defineProperty(exports, \"Double\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Double;\n    }\n}));\nObject.defineProperty(exports, \"Int32\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Int32;\n    }\n}));\nObject.defineProperty(exports, \"Long\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Long;\n    }\n}));\nObject.defineProperty(exports, \"MaxKey\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.MaxKey;\n    }\n}));\nObject.defineProperty(exports, \"MinKey\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.MinKey;\n    }\n}));\nObject.defineProperty(exports, \"ObjectId\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.ObjectId;\n    }\n}));\nObject.defineProperty(exports, \"Timestamp\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.Timestamp;\n    }\n}));\nObject.defineProperty(exports, \"UUID\", ({\n    enumerable: true,\n    get: function() {\n        return bson_2.UUID;\n    }\n}));\nvar common_1 = __webpack_require__(/*! ./bulk/common */ \"(ssr)/./node_modules/mongodb/lib/bulk/common.js\");\nObject.defineProperty(exports, \"MongoBulkWriteError\", ({\n    enumerable: true,\n    get: function() {\n        return common_1.MongoBulkWriteError;\n    }\n}));\nvar client_encryption_1 = __webpack_require__(/*! ./client-side-encryption/client_encryption */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/client_encryption.js\");\nObject.defineProperty(exports, \"ClientEncryption\", ({\n    enumerable: true,\n    get: function() {\n        return client_encryption_1.ClientEncryption;\n    }\n}));\nvar change_stream_cursor_1 = __webpack_require__(/*! ./cursor/change_stream_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/change_stream_cursor.js\");\nObject.defineProperty(exports, \"ChangeStreamCursor\", ({\n    enumerable: true,\n    get: function() {\n        return change_stream_cursor_1.ChangeStreamCursor;\n    }\n}));\nvar error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nObject.defineProperty(exports, \"MongoAPIError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoAPIError;\n    }\n}));\nObject.defineProperty(exports, \"MongoAWSError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoAWSError;\n    }\n}));\nObject.defineProperty(exports, \"MongoAzureError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoAzureError;\n    }\n}));\nObject.defineProperty(exports, \"MongoBatchReExecutionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoBatchReExecutionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoChangeStreamError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoChangeStreamError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCompatibilityError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoCompatibilityError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCursorExhaustedError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoCursorExhaustedError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCursorInUseError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoCursorInUseError;\n    }\n}));\nObject.defineProperty(exports, \"MongoDecompressionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoDecompressionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoDriverError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoDriverError;\n    }\n}));\nObject.defineProperty(exports, \"MongoError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoError;\n    }\n}));\nObject.defineProperty(exports, \"MongoExpiredSessionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoExpiredSessionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoGridFSChunkError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoGridFSChunkError;\n    }\n}));\nObject.defineProperty(exports, \"MongoGridFSStreamError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoGridFSStreamError;\n    }\n}));\nObject.defineProperty(exports, \"MongoInvalidArgumentError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoInvalidArgumentError;\n    }\n}));\nObject.defineProperty(exports, \"MongoKerberosError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoKerberosError;\n    }\n}));\nObject.defineProperty(exports, \"MongoMissingCredentialsError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoMissingCredentialsError;\n    }\n}));\nObject.defineProperty(exports, \"MongoMissingDependencyError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoMissingDependencyError;\n    }\n}));\nObject.defineProperty(exports, \"MongoNetworkError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoNetworkError;\n    }\n}));\nObject.defineProperty(exports, \"MongoNetworkTimeoutError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoNetworkTimeoutError;\n    }\n}));\nObject.defineProperty(exports, \"MongoNotConnectedError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoNotConnectedError;\n    }\n}));\nObject.defineProperty(exports, \"MongoParseError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoParseError;\n    }\n}));\nObject.defineProperty(exports, \"MongoRuntimeError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoRuntimeError;\n    }\n}));\nObject.defineProperty(exports, \"MongoServerClosedError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoServerClosedError;\n    }\n}));\nObject.defineProperty(exports, \"MongoServerError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoServerError;\n    }\n}));\nObject.defineProperty(exports, \"MongoServerSelectionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoServerSelectionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoSystemError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoSystemError;\n    }\n}));\nObject.defineProperty(exports, \"MongoTailableCursorError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoTailableCursorError;\n    }\n}));\nObject.defineProperty(exports, \"MongoTopologyClosedError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoTopologyClosedError;\n    }\n}));\nObject.defineProperty(exports, \"MongoTransactionError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoTransactionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoUnexpectedServerResponseError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoUnexpectedServerResponseError;\n    }\n}));\nObject.defineProperty(exports, \"MongoWriteConcernError\", ({\n    enumerable: true,\n    get: function() {\n        return error_1.MongoWriteConcernError;\n    }\n}));\n// enums\nvar common_2 = __webpack_require__(/*! ./bulk/common */ \"(ssr)/./node_modules/mongodb/lib/bulk/common.js\");\nObject.defineProperty(exports, \"BatchType\", ({\n    enumerable: true,\n    get: function() {\n        return common_2.BatchType;\n    }\n}));\nvar auto_encrypter_1 = __webpack_require__(/*! ./client-side-encryption/auto_encrypter */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/auto_encrypter.js\");\nObject.defineProperty(exports, \"AutoEncryptionLoggerLevel\", ({\n    enumerable: true,\n    get: function() {\n        return auto_encrypter_1.AutoEncryptionLoggerLevel;\n    }\n}));\nvar gssapi_1 = __webpack_require__(/*! ./cmap/auth/gssapi */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js\");\nObject.defineProperty(exports, \"GSSAPICanonicalizationValue\", ({\n    enumerable: true,\n    get: function() {\n        return gssapi_1.GSSAPICanonicalizationValue;\n    }\n}));\nvar providers_1 = __webpack_require__(/*! ./cmap/auth/providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nObject.defineProperty(exports, \"AuthMechanism\", ({\n    enumerable: true,\n    get: function() {\n        return providers_1.AuthMechanism;\n    }\n}));\nvar compression_1 = __webpack_require__(/*! ./cmap/wire_protocol/compression */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/compression.js\");\nObject.defineProperty(exports, \"Compressor\", ({\n    enumerable: true,\n    get: function() {\n        return compression_1.Compressor;\n    }\n}));\nvar abstract_cursor_2 = __webpack_require__(/*! ./cursor/abstract_cursor */ \"(ssr)/./node_modules/mongodb/lib/cursor/abstract_cursor.js\");\nObject.defineProperty(exports, \"CURSOR_FLAGS\", ({\n    enumerable: true,\n    get: function() {\n        return abstract_cursor_2.CURSOR_FLAGS;\n    }\n}));\nvar error_2 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nObject.defineProperty(exports, \"MongoErrorLabel\", ({\n    enumerable: true,\n    get: function() {\n        return error_2.MongoErrorLabel;\n    }\n}));\nvar explain_1 = __webpack_require__(/*! ./explain */ \"(ssr)/./node_modules/mongodb/lib/explain.js\");\nObject.defineProperty(exports, \"ExplainVerbosity\", ({\n    enumerable: true,\n    get: function() {\n        return explain_1.ExplainVerbosity;\n    }\n}));\nvar mongo_client_2 = __webpack_require__(/*! ./mongo_client */ \"(ssr)/./node_modules/mongodb/lib/mongo_client.js\");\nObject.defineProperty(exports, \"ServerApiVersion\", ({\n    enumerable: true,\n    get: function() {\n        return mongo_client_2.ServerApiVersion;\n    }\n}));\nvar find_and_modify_1 = __webpack_require__(/*! ./operations/find_and_modify */ \"(ssr)/./node_modules/mongodb/lib/operations/find_and_modify.js\");\nObject.defineProperty(exports, \"ReturnDocument\", ({\n    enumerable: true,\n    get: function() {\n        return find_and_modify_1.ReturnDocument;\n    }\n}));\nvar set_profiling_level_1 = __webpack_require__(/*! ./operations/set_profiling_level */ \"(ssr)/./node_modules/mongodb/lib/operations/set_profiling_level.js\");\nObject.defineProperty(exports, \"ProfilingLevel\", ({\n    enumerable: true,\n    get: function() {\n        return set_profiling_level_1.ProfilingLevel;\n    }\n}));\nvar read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nObject.defineProperty(exports, \"ReadConcernLevel\", ({\n    enumerable: true,\n    get: function() {\n        return read_concern_1.ReadConcernLevel;\n    }\n}));\nvar read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nObject.defineProperty(exports, \"ReadPreferenceMode\", ({\n    enumerable: true,\n    get: function() {\n        return read_preference_1.ReadPreferenceMode;\n    }\n}));\nvar common_3 = __webpack_require__(/*! ./sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nObject.defineProperty(exports, \"ServerType\", ({\n    enumerable: true,\n    get: function() {\n        return common_3.ServerType;\n    }\n}));\nObject.defineProperty(exports, \"TopologyType\", ({\n    enumerable: true,\n    get: function() {\n        return common_3.TopologyType;\n    }\n}));\n// Helper classes\nvar read_concern_2 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nObject.defineProperty(exports, \"ReadConcern\", ({\n    enumerable: true,\n    get: function() {\n        return read_concern_2.ReadConcern;\n    }\n}));\nvar read_preference_2 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nObject.defineProperty(exports, \"ReadPreference\", ({\n    enumerable: true,\n    get: function() {\n        return read_preference_2.ReadPreference;\n    }\n}));\nvar write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nObject.defineProperty(exports, \"WriteConcern\", ({\n    enumerable: true,\n    get: function() {\n        return write_concern_1.WriteConcern;\n    }\n}));\n// events\nvar command_monitoring_events_1 = __webpack_require__(/*! ./cmap/command_monitoring_events */ \"(ssr)/./node_modules/mongodb/lib/cmap/command_monitoring_events.js\");\nObject.defineProperty(exports, \"CommandFailedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return command_monitoring_events_1.CommandFailedEvent;\n    }\n}));\nObject.defineProperty(exports, \"CommandStartedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return command_monitoring_events_1.CommandStartedEvent;\n    }\n}));\nObject.defineProperty(exports, \"CommandSucceededEvent\", ({\n    enumerable: true,\n    get: function() {\n        return command_monitoring_events_1.CommandSucceededEvent;\n    }\n}));\nvar connection_pool_events_1 = __webpack_require__(/*! ./cmap/connection_pool_events */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection_pool_events.js\");\nObject.defineProperty(exports, \"ConnectionCheckedInEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCheckedInEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionCheckedOutEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCheckedOutEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionCheckOutFailedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCheckOutFailedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionCheckOutStartedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCheckOutStartedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionClosedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionClosedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionCreatedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionCreatedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolClearedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolClearedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolClosedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolClosedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolCreatedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolCreatedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolMonitoringEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolMonitoringEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionPoolReadyEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionPoolReadyEvent;\n    }\n}));\nObject.defineProperty(exports, \"ConnectionReadyEvent\", ({\n    enumerable: true,\n    get: function() {\n        return connection_pool_events_1.ConnectionReadyEvent;\n    }\n}));\nvar events_1 = __webpack_require__(/*! ./sdam/events */ \"(ssr)/./node_modules/mongodb/lib/sdam/events.js\");\nObject.defineProperty(exports, \"ServerClosedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerClosedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerDescriptionChangedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerDescriptionChangedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerHeartbeatFailedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerHeartbeatFailedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerHeartbeatStartedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerHeartbeatStartedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerHeartbeatSucceededEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerHeartbeatSucceededEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerOpeningEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.ServerOpeningEvent;\n    }\n}));\nObject.defineProperty(exports, \"TopologyClosedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.TopologyClosedEvent;\n    }\n}));\nObject.defineProperty(exports, \"TopologyDescriptionChangedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.TopologyDescriptionChangedEvent;\n    }\n}));\nObject.defineProperty(exports, \"TopologyOpeningEvent\", ({\n    enumerable: true,\n    get: function() {\n        return events_1.TopologyOpeningEvent;\n    }\n}));\nvar server_selection_events_1 = __webpack_require__(/*! ./sdam/server_selection_events */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection_events.js\");\nObject.defineProperty(exports, \"ServerSelectionEvent\", ({\n    enumerable: true,\n    get: function() {\n        return server_selection_events_1.ServerSelectionEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerSelectionFailedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return server_selection_events_1.ServerSelectionFailedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerSelectionStartedEvent\", ({\n    enumerable: true,\n    get: function() {\n        return server_selection_events_1.ServerSelectionStartedEvent;\n    }\n}));\nObject.defineProperty(exports, \"ServerSelectionSucceededEvent\", ({\n    enumerable: true,\n    get: function() {\n        return server_selection_events_1.ServerSelectionSucceededEvent;\n    }\n}));\nObject.defineProperty(exports, \"WaitingForSuitableServerEvent\", ({\n    enumerable: true,\n    get: function() {\n        return server_selection_events_1.WaitingForSuitableServerEvent;\n    }\n}));\nvar srv_polling_1 = __webpack_require__(/*! ./sdam/srv_polling */ \"(ssr)/./node_modules/mongodb/lib/sdam/srv_polling.js\");\nObject.defineProperty(exports, \"SrvPollingEvent\", ({\n    enumerable: true,\n    get: function() {\n        return srv_polling_1.SrvPollingEvent;\n    }\n}));\nvar errors_1 = __webpack_require__(/*! ./client-side-encryption/errors */ \"(ssr)/./node_modules/mongodb/lib/client-side-encryption/errors.js\");\nObject.defineProperty(exports, \"MongoCryptAzureKMSRequestError\", ({\n    enumerable: true,\n    get: function() {\n        return errors_1.MongoCryptAzureKMSRequestError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCryptCreateDataKeyError\", ({\n    enumerable: true,\n    get: function() {\n        return errors_1.MongoCryptCreateDataKeyError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCryptCreateEncryptedCollectionError\", ({\n    enumerable: true,\n    get: function() {\n        return errors_1.MongoCryptCreateEncryptedCollectionError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCryptError\", ({\n    enumerable: true,\n    get: function() {\n        return errors_1.MongoCryptError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCryptInvalidArgumentError\", ({\n    enumerable: true,\n    get: function() {\n        return errors_1.MongoCryptInvalidArgumentError;\n    }\n}));\nObject.defineProperty(exports, \"MongoCryptKMSRequestNetworkTimeoutError\", ({\n    enumerable: true,\n    get: function() {\n        return errors_1.MongoCryptKMSRequestNetworkTimeoutError;\n    }\n}));\nvar mongo_client_auth_providers_1 = __webpack_require__(/*! ./mongo_client_auth_providers */ \"(ssr)/./node_modules/mongodb/lib/mongo_client_auth_providers.js\");\nObject.defineProperty(exports, \"MongoClientAuthProviders\", ({\n    enumerable: true,\n    get: function() {\n        return mongo_client_auth_providers_1.MongoClientAuthProviders;\n    }\n})); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDBDQUEwQyxHQUFHQSw2QkFBNkIsR0FBR0EsZ0NBQWdDLEdBQUdBLGdDQUFnQyxHQUFHQSx3QkFBd0IsR0FBR0EsaUNBQWlDLEdBQUdBLHdCQUF3QixHQUFHQSw4QkFBOEIsR0FBR0EseUJBQXlCLEdBQUdBLHVCQUF1QixHQUFHQSw4QkFBOEIsR0FBR0EsZ0NBQWdDLEdBQUdBLHlCQUF5QixHQUFHQSxtQ0FBbUMsR0FBR0Esb0NBQW9DLEdBQUdBLDBCQUEwQixHQUFHQSxpQ0FBaUMsR0FBR0EsOEJBQThCLEdBQUdBLDZCQUE2QixHQUFHQSxnQ0FBZ0MsR0FBR0Esa0JBQWtCLEdBQUdBLHdCQUF3QixHQUFHQSwrQkFBK0IsR0FBR0EsNkJBQTZCLEdBQUdBLGlDQUFpQyxHQUFHQSwrQkFBK0IsR0FBR0EsOEJBQThCLEdBQUdBLGtDQUFrQyxHQUFHQSx1QkFBdUIsR0FBR0EscUJBQXFCLEdBQUdBLHFCQUFxQixHQUFHQSwwQkFBMEIsR0FBR0Esd0JBQXdCLEdBQUdBLDJCQUEyQixHQUFHQSxZQUFZLEdBQUdBLGlCQUFpQixHQUFHQSxnQkFBZ0IsR0FBR0EsY0FBYyxHQUFHQSxjQUFjLEdBQUdBLFlBQVksR0FBR0EsYUFBYSxHQUFHQSxjQUFjLEdBQUdBLGtCQUFrQixHQUFHQSxhQUFhLEdBQUdBLFlBQVksR0FBR0EsZ0JBQWdCLEdBQUdBLGtCQUFrQixHQUFHQSxrQkFBa0IsR0FBR0EsY0FBYyxHQUFHQSxZQUFZLEdBQUcsS0FBSztBQUNsMUNBLGdDQUFnQyxHQUFHQSxxQ0FBcUMsR0FBR0Esa0NBQWtDLEdBQUdBLGlDQUFpQyxHQUFHQSxrQ0FBa0MsR0FBR0EsOEJBQThCLEdBQUdBLDZCQUE2QixHQUFHQSxzQ0FBc0MsR0FBR0EscUNBQXFDLEdBQUdBLGlDQUFpQyxHQUFHQSxn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QU82QyxTQUFTbkUsd0NBQXdDO0lBQUU7QUFBRSxDQUFDLEVBQUM7QUFDaEw1RyxtREFBa0Q7SUFBRWlJLFlBQVk7SUFBTUMsS0FBSztRQUFjLE9BQU82QyxTQUFTcEUsZUFBZTtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQzlIM0csa0VBQWlFO0lBQUVpSSxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPNkMsU0FBU3JFLDhCQUE4QjtJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQzVKMUcsMkVBQTBFO0lBQUVpSSxZQUFZO0lBQU1DLEtBQUs7UUFBYyxPQUFPNkMsU0FBU3RFLHVDQUF1QztJQUFFO0FBQUUsQ0FBQyxFQUFDO0FBQzlLLElBQUl1RSxnQ0FBZ0NoRCxtQkFBT0EsQ0FBQyxzR0FBK0I7QUFDM0VoSSw0REFBMkQ7SUFBRWlJLFlBQVk7SUFBTUMsS0FBSztRQUFjLE9BQU84Qyw4QkFBOEJ4RSx3QkFBd0I7SUFBRTtBQUFFLENBQUMsRUFBQyxFQUNySyxpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL2luZGV4LmpzPzY4YjEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IgPSBleHBvcnRzLk1vbmdvVHJhbnNhY3Rpb25FcnJvciA9IGV4cG9ydHMuTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yID0gZXhwb3J0cy5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3IgPSBleHBvcnRzLk1vbmdvU3lzdGVtRXJyb3IgPSBleHBvcnRzLk1vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3IgPSBleHBvcnRzLk1vbmdvU2VydmVyRXJyb3IgPSBleHBvcnRzLk1vbmdvU2VydmVyQ2xvc2VkRXJyb3IgPSBleHBvcnRzLk1vbmdvUnVudGltZUVycm9yID0gZXhwb3J0cy5Nb25nb1BhcnNlRXJyb3IgPSBleHBvcnRzLk1vbmdvTm90Q29ubmVjdGVkRXJyb3IgPSBleHBvcnRzLk1vbmdvTmV0d29ya1RpbWVvdXRFcnJvciA9IGV4cG9ydHMuTW9uZ29OZXR3b3JrRXJyb3IgPSBleHBvcnRzLk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvciA9IGV4cG9ydHMuTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvciA9IGV4cG9ydHMuTW9uZ29LZXJiZXJvc0Vycm9yID0gZXhwb3J0cy5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yID0gZXhwb3J0cy5Nb25nb0dyaWRGU1N0cmVhbUVycm9yID0gZXhwb3J0cy5Nb25nb0dyaWRGU0NodW5rRXJyb3IgPSBleHBvcnRzLk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvciA9IGV4cG9ydHMuTW9uZ29FcnJvciA9IGV4cG9ydHMuTW9uZ29Ecml2ZXJFcnJvciA9IGV4cG9ydHMuTW9uZ29EZWNvbXByZXNzaW9uRXJyb3IgPSBleHBvcnRzLk1vbmdvQ3Vyc29ySW5Vc2VFcnJvciA9IGV4cG9ydHMuTW9uZ29DdXJzb3JFeGhhdXN0ZWRFcnJvciA9IGV4cG9ydHMuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IgPSBleHBvcnRzLk1vbmdvQ2hhbmdlU3RyZWFtRXJyb3IgPSBleHBvcnRzLk1vbmdvQmF0Y2hSZUV4ZWN1dGlvbkVycm9yID0gZXhwb3J0cy5Nb25nb0F6dXJlRXJyb3IgPSBleHBvcnRzLk1vbmdvQVdTRXJyb3IgPSBleHBvcnRzLk1vbmdvQVBJRXJyb3IgPSBleHBvcnRzLkNoYW5nZVN0cmVhbUN1cnNvciA9IGV4cG9ydHMuQ2xpZW50RW5jcnlwdGlvbiA9IGV4cG9ydHMuTW9uZ29CdWxrV3JpdGVFcnJvciA9IGV4cG9ydHMuVVVJRCA9IGV4cG9ydHMuVGltZXN0YW1wID0gZXhwb3J0cy5PYmplY3RJZCA9IGV4cG9ydHMuTWluS2V5ID0gZXhwb3J0cy5NYXhLZXkgPSBleHBvcnRzLkxvbmcgPSBleHBvcnRzLkludDMyID0gZXhwb3J0cy5Eb3VibGUgPSBleHBvcnRzLkRlY2ltYWwxMjggPSBleHBvcnRzLkRCUmVmID0gZXhwb3J0cy5Db2RlID0gZXhwb3J0cy5CU09OVHlwZSA9IGV4cG9ydHMuQlNPTlN5bWJvbCA9IGV4cG9ydHMuQlNPTlJlZ0V4cCA9IGV4cG9ydHMuQmluYXJ5ID0gZXhwb3J0cy5CU09OID0gdm9pZCAwO1xuZXhwb3J0cy5Db25uZWN0aW9uUG9vbFJlYWR5RXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uUG9vbENyZWF0ZWRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvblBvb2xDbG9zZWRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvblBvb2xDbGVhcmVkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25DcmVhdGVkRXZlbnQgPSBleHBvcnRzLkNvbm5lY3Rpb25DbG9zZWRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvbkNoZWNrT3V0U3RhcnRlZEV2ZW50ID0gZXhwb3J0cy5Db25uZWN0aW9uQ2hlY2tPdXRGYWlsZWRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvbkNoZWNrZWRPdXRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvbkNoZWNrZWRJbkV2ZW50ID0gZXhwb3J0cy5Db21tYW5kU3VjY2VlZGVkRXZlbnQgPSBleHBvcnRzLkNvbW1hbmRTdGFydGVkRXZlbnQgPSBleHBvcnRzLkNvbW1hbmRGYWlsZWRFdmVudCA9IGV4cG9ydHMuV3JpdGVDb25jZXJuID0gZXhwb3J0cy5SZWFkUHJlZmVyZW5jZSA9IGV4cG9ydHMuUmVhZENvbmNlcm4gPSBleHBvcnRzLlRvcG9sb2d5VHlwZSA9IGV4cG9ydHMuU2VydmVyVHlwZSA9IGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlID0gZXhwb3J0cy5SZWFkQ29uY2VybkxldmVsID0gZXhwb3J0cy5Qcm9maWxpbmdMZXZlbCA9IGV4cG9ydHMuUmV0dXJuRG9jdW1lbnQgPSBleHBvcnRzLlNlcnZlckFwaVZlcnNpb24gPSBleHBvcnRzLkV4cGxhaW5WZXJib3NpdHkgPSBleHBvcnRzLk1vbmdvRXJyb3JMYWJlbCA9IGV4cG9ydHMuQ1VSU09SX0ZMQUdTID0gZXhwb3J0cy5Db21wcmVzc29yID0gZXhwb3J0cy5BdXRoTWVjaGFuaXNtID0gZXhwb3J0cy5HU1NBUElDYW5vbmljYWxpemF0aW9uVmFsdWUgPSBleHBvcnRzLkF1dG9FbmNyeXB0aW9uTG9nZ2VyTGV2ZWwgPSBleHBvcnRzLkJhdGNoVHlwZSA9IGV4cG9ydHMuVW5vcmRlcmVkQnVsa09wZXJhdGlvbiA9IGV4cG9ydHMuT3JkZXJlZEJ1bGtPcGVyYXRpb24gPSBleHBvcnRzLk1vbmdvQ2xpZW50ID0gZXhwb3J0cy5MaXN0SW5kZXhlc0N1cnNvciA9IGV4cG9ydHMuTGlzdENvbGxlY3Rpb25zQ3Vyc29yID0gZXhwb3J0cy5HcmlkRlNCdWNrZXRXcml0ZVN0cmVhbSA9IGV4cG9ydHMuR3JpZEZTQnVja2V0UmVhZFN0cmVhbSA9IGV4cG9ydHMuR3JpZEZTQnVja2V0ID0gZXhwb3J0cy5GaW5kQ3Vyc29yID0gZXhwb3J0cy5EYiA9IGV4cG9ydHMuQ29sbGVjdGlvbiA9IGV4cG9ydHMuQ2xpZW50U2Vzc2lvbiA9IGV4cG9ydHMuQ2hhbmdlU3RyZWFtID0gZXhwb3J0cy5DYW5jZWxsYXRpb25Ub2tlbiA9IGV4cG9ydHMuQWdncmVnYXRpb25DdXJzb3IgPSBleHBvcnRzLkFkbWluID0gZXhwb3J0cy5BYnN0cmFjdEN1cnNvciA9IGV4cG9ydHMuTW9uZ29Xcml0ZUNvbmNlcm5FcnJvciA9IHZvaWQgMDtcbmV4cG9ydHMuTW9uZ29DbGllbnRBdXRoUHJvdmlkZXJzID0gZXhwb3J0cy5Nb25nb0NyeXB0S01TUmVxdWVzdE5ldHdvcmtUaW1lb3V0RXJyb3IgPSBleHBvcnRzLk1vbmdvQ3J5cHRJbnZhbGlkQXJndW1lbnRFcnJvciA9IGV4cG9ydHMuTW9uZ29DcnlwdEVycm9yID0gZXhwb3J0cy5Nb25nb0NyeXB0Q3JlYXRlRW5jcnlwdGVkQ29sbGVjdGlvbkVycm9yID0gZXhwb3J0cy5Nb25nb0NyeXB0Q3JlYXRlRGF0YUtleUVycm9yID0gZXhwb3J0cy5Nb25nb0NyeXB0QXp1cmVLTVNSZXF1ZXN0RXJyb3IgPSBleHBvcnRzLlNydlBvbGxpbmdFdmVudCA9IGV4cG9ydHMuV2FpdGluZ0ZvclN1aXRhYmxlU2VydmVyRXZlbnQgPSBleHBvcnRzLlNlcnZlclNlbGVjdGlvblN1Y2NlZWRlZEV2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJTZWxlY3Rpb25TdGFydGVkRXZlbnQgPSBleHBvcnRzLlNlcnZlclNlbGVjdGlvbkZhaWxlZEV2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJTZWxlY3Rpb25FdmVudCA9IGV4cG9ydHMuVG9wb2xvZ3lPcGVuaW5nRXZlbnQgPSBleHBvcnRzLlRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQgPSBleHBvcnRzLlRvcG9sb2d5Q2xvc2VkRXZlbnQgPSBleHBvcnRzLlNlcnZlck9wZW5pbmdFdmVudCA9IGV4cG9ydHMuU2VydmVySGVhcnRiZWF0U3VjY2VlZGVkRXZlbnQgPSBleHBvcnRzLlNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudCA9IGV4cG9ydHMuU2VydmVySGVhcnRiZWF0RmFpbGVkRXZlbnQgPSBleHBvcnRzLlNlcnZlckRlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJDbG9zZWRFdmVudCA9IGV4cG9ydHMuQ29ubmVjdGlvblJlYWR5RXZlbnQgPSB2b2lkIDA7XG5jb25zdCBhZG1pbl8xID0gcmVxdWlyZShcIi4vYWRtaW5cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBZG1pblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYWRtaW5fMS5BZG1pbjsgfSB9KTtcbmNvbnN0IG9yZGVyZWRfMSA9IHJlcXVpcmUoXCIuL2J1bGsvb3JkZXJlZFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk9yZGVyZWRCdWxrT3BlcmF0aW9uXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBvcmRlcmVkXzEuT3JkZXJlZEJ1bGtPcGVyYXRpb247IH0gfSk7XG5jb25zdCB1bm9yZGVyZWRfMSA9IHJlcXVpcmUoXCIuL2J1bGsvdW5vcmRlcmVkXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVW5vcmRlcmVkQnVsa09wZXJhdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5vcmRlcmVkXzEuVW5vcmRlcmVkQnVsa09wZXJhdGlvbjsgfSB9KTtcbmNvbnN0IGNoYW5nZV9zdHJlYW1fMSA9IHJlcXVpcmUoXCIuL2NoYW5nZV9zdHJlYW1cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDaGFuZ2VTdHJlYW1cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNoYW5nZV9zdHJlYW1fMS5DaGFuZ2VTdHJlYW07IH0gfSk7XG5jb25zdCBjb2xsZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9jb2xsZWN0aW9uXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29sbGVjdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29sbGVjdGlvbl8xLkNvbGxlY3Rpb247IH0gfSk7XG5jb25zdCBhYnN0cmFjdF9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9hYnN0cmFjdF9jdXJzb3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBYnN0cmFjdEN1cnNvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYWJzdHJhY3RfY3Vyc29yXzEuQWJzdHJhY3RDdXJzb3I7IH0gfSk7XG5jb25zdCBhZ2dyZWdhdGlvbl9jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9hZ2dyZWdhdGlvbl9jdXJzb3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBZ2dyZWdhdGlvbkN1cnNvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYWdncmVnYXRpb25fY3Vyc29yXzEuQWdncmVnYXRpb25DdXJzb3I7IH0gfSk7XG5jb25zdCBmaW5kX2N1cnNvcl8xID0gcmVxdWlyZShcIi4vY3Vyc29yL2ZpbmRfY3Vyc29yXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRmluZEN1cnNvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmluZF9jdXJzb3JfMS5GaW5kQ3Vyc29yOyB9IH0pO1xuY29uc3QgbGlzdF9jb2xsZWN0aW9uc19jdXJzb3JfMSA9IHJlcXVpcmUoXCIuL2N1cnNvci9saXN0X2NvbGxlY3Rpb25zX2N1cnNvclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkxpc3RDb2xsZWN0aW9uc0N1cnNvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbGlzdF9jb2xsZWN0aW9uc19jdXJzb3JfMS5MaXN0Q29sbGVjdGlvbnNDdXJzb3I7IH0gfSk7XG5jb25zdCBsaXN0X2luZGV4ZXNfY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9jdXJzb3IvbGlzdF9pbmRleGVzX2N1cnNvclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkxpc3RJbmRleGVzQ3Vyc29yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBsaXN0X2luZGV4ZXNfY3Vyc29yXzEuTGlzdEluZGV4ZXNDdXJzb3I7IH0gfSk7XG5jb25zdCBkYl8xID0gcmVxdWlyZShcIi4vZGJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJEYlwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZGJfMS5EYjsgfSB9KTtcbmNvbnN0IGdyaWRmc18xID0gcmVxdWlyZShcIi4vZ3JpZGZzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiR3JpZEZTQnVja2V0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBncmlkZnNfMS5HcmlkRlNCdWNrZXQ7IH0gfSk7XG5jb25zdCBkb3dubG9hZF8xID0gcmVxdWlyZShcIi4vZ3JpZGZzL2Rvd25sb2FkXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiR3JpZEZTQnVja2V0UmVhZFN0cmVhbVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG93bmxvYWRfMS5HcmlkRlNCdWNrZXRSZWFkU3RyZWFtOyB9IH0pO1xuY29uc3QgdXBsb2FkXzEgPSByZXF1aXJlKFwiLi9ncmlkZnMvdXBsb2FkXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiR3JpZEZTQnVja2V0V3JpdGVTdHJlYW1cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVwbG9hZF8xLkdyaWRGU0J1Y2tldFdyaXRlU3RyZWFtOyB9IH0pO1xuY29uc3QgbW9uZ29fY2xpZW50XzEgPSByZXF1aXJlKFwiLi9tb25nb19jbGllbnRcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0NsaWVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbW9uZ29fY2xpZW50XzEuTW9uZ29DbGllbnQ7IH0gfSk7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4vbW9uZ29fdHlwZXNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDYW5jZWxsYXRpb25Ub2tlblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbW9uZ29fdHlwZXNfMS5DYW5jZWxsYXRpb25Ub2tlbjsgfSB9KTtcbmNvbnN0IHNlc3Npb25zXzEgPSByZXF1aXJlKFwiLi9zZXNzaW9uc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNsaWVudFNlc3Npb25cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlc3Npb25zXzEuQ2xpZW50U2Vzc2lvbjsgfSB9KTtcbi8qKiBAcHVibGljICovXG52YXIgYnNvbl8xID0gcmVxdWlyZShcIi4vYnNvblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJTT05cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMS5CU09OOyB9IH0pO1xudmFyIGJzb25fMiA9IHJlcXVpcmUoXCIuL2Jzb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJCaW5hcnlcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5CaW5hcnk7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJCU09OUmVnRXhwXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzIuQlNPTlJlZ0V4cDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJTT05TeW1ib2xcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5CU09OU3ltYm9sOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQlNPTlR5cGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5CU09OVHlwZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvZGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5Db2RlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiREJSZWZcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5EQlJlZjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRlY2ltYWwxMjhcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5EZWNpbWFsMTI4OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRG91YmxlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzIuRG91YmxlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiSW50MzJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5JbnQzMjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkxvbmdcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5Mb25nOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTWF4S2V5XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzIuTWF4S2V5OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTWluS2V5XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBic29uXzIuTWluS2V5OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiT2JqZWN0SWRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5PYmplY3RJZDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRpbWVzdGFtcFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnNvbl8yLlRpbWVzdGFtcDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlVVSURcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJzb25fMi5VVUlEOyB9IH0pO1xudmFyIGNvbW1vbl8xID0gcmVxdWlyZShcIi4vYnVsay9jb21tb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0J1bGtXcml0ZUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb21tb25fMS5Nb25nb0J1bGtXcml0ZUVycm9yOyB9IH0pO1xudmFyIGNsaWVudF9lbmNyeXB0aW9uXzEgPSByZXF1aXJlKFwiLi9jbGllbnQtc2lkZS1lbmNyeXB0aW9uL2NsaWVudF9lbmNyeXB0aW9uXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ2xpZW50RW5jcnlwdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY2xpZW50X2VuY3J5cHRpb25fMS5DbGllbnRFbmNyeXB0aW9uOyB9IH0pO1xudmFyIGNoYW5nZV9zdHJlYW1fY3Vyc29yXzEgPSByZXF1aXJlKFwiLi9jdXJzb3IvY2hhbmdlX3N0cmVhbV9jdXJzb3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDaGFuZ2VTdHJlYW1DdXJzb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNoYW5nZV9zdHJlYW1fY3Vyc29yXzEuQ2hhbmdlU3RyZWFtQ3Vyc29yOyB9IH0pO1xudmFyIGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvQVBJRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29BUElFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvQVdTRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29BV1NFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvQXp1cmVFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0F6dXJlRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0JhdGNoUmVFeGVjdXRpb25FcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0JhdGNoUmVFeGVjdXRpb25FcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvQ2hhbmdlU3RyZWFtRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29DaGFuZ2VTdHJlYW1FcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29DdXJzb3JFeGhhdXN0ZWRFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0N1cnNvckV4aGF1c3RlZEVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29DdXJzb3JJblVzZUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvQ3Vyc29ySW5Vc2VFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvRGVjb21wcmVzc2lvbkVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvRGVjb21wcmVzc2lvbkVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29Ecml2ZXJFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0RyaXZlckVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29FcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0Vycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29FeHBpcmVkU2Vzc2lvbkVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvR3JpZEZTQ2h1bmtFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb0dyaWRGU0NodW5rRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0dyaWRGU1N0cmVhbUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvR3JpZEZTU3RyZWFtRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0tlcmJlcm9zRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29LZXJiZXJvc0Vycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29NaXNzaW5nQ3JlZGVudGlhbHNFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb01pc3NpbmdDcmVkZW50aWFsc0Vycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29NaXNzaW5nRGVwZW5kZW5jeUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvTmV0d29ya0Vycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29OZXR3b3JrVGltZW91dEVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvTmV0d29ya1RpbWVvdXRFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvTm90Q29ubmVjdGVkRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29Ob3RDb25uZWN0ZWRFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvUGFyc2VFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1J1bnRpbWVFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvU2VydmVyQ2xvc2VkRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29TZXJ2ZXJDbG9zZWRFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvU2VydmVyRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvU3lzdGVtRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29TeXN0ZW1FcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvVGFpbGFibGVDdXJzb3JFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JfMS5Nb25nb1RhaWxhYmxlQ3Vyc29yRXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb1RvcG9sb2d5Q2xvc2VkRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29Ub3BvbG9neUNsb3NlZEVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29UcmFuc2FjdGlvbkVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcl8xLk1vbmdvVHJhbnNhY3Rpb25FcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvV3JpdGVDb25jZXJuRXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzEuTW9uZ29Xcml0ZUNvbmNlcm5FcnJvcjsgfSB9KTtcbi8vIGVudW1zXG52YXIgY29tbW9uXzIgPSByZXF1aXJlKFwiLi9idWxrL2NvbW1vblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJhdGNoVHlwZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29tbW9uXzIuQmF0Y2hUeXBlOyB9IH0pO1xudmFyIGF1dG9fZW5jcnlwdGVyXzEgPSByZXF1aXJlKFwiLi9jbGllbnQtc2lkZS1lbmNyeXB0aW9uL2F1dG9fZW5jcnlwdGVyXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQXV0b0VuY3J5cHRpb25Mb2dnZXJMZXZlbFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYXV0b19lbmNyeXB0ZXJfMS5BdXRvRW5jcnlwdGlvbkxvZ2dlckxldmVsOyB9IH0pO1xudmFyIGdzc2FwaV8xID0gcmVxdWlyZShcIi4vY21hcC9hdXRoL2dzc2FwaVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkdTU0FQSUNhbm9uaWNhbGl6YXRpb25WYWx1ZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ3NzYXBpXzEuR1NTQVBJQ2Fub25pY2FsaXphdGlvblZhbHVlOyB9IH0pO1xudmFyIHByb3ZpZGVyc18xID0gcmVxdWlyZShcIi4vY21hcC9hdXRoL3Byb3ZpZGVyc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkF1dGhNZWNoYW5pc21cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb3ZpZGVyc18xLkF1dGhNZWNoYW5pc207IH0gfSk7XG52YXIgY29tcHJlc3Npb25fMSA9IHJlcXVpcmUoXCIuL2NtYXAvd2lyZV9wcm90b2NvbC9jb21wcmVzc2lvblwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbXByZXNzb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbXByZXNzaW9uXzEuQ29tcHJlc3NvcjsgfSB9KTtcbnZhciBhYnN0cmFjdF9jdXJzb3JfMiA9IHJlcXVpcmUoXCIuL2N1cnNvci9hYnN0cmFjdF9jdXJzb3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDVVJTT1JfRkxBR1NcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFic3RyYWN0X2N1cnNvcl8yLkNVUlNPUl9GTEFHUzsgfSB9KTtcbnZhciBlcnJvcl8yID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0Vycm9yTGFiZWxcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yXzIuTW9uZ29FcnJvckxhYmVsOyB9IH0pO1xudmFyIGV4cGxhaW5fMSA9IHJlcXVpcmUoXCIuL2V4cGxhaW5cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFeHBsYWluVmVyYm9zaXR5XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBleHBsYWluXzEuRXhwbGFpblZlcmJvc2l0eTsgfSB9KTtcbnZhciBtb25nb19jbGllbnRfMiA9IHJlcXVpcmUoXCIuL21vbmdvX2NsaWVudFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlNlcnZlckFwaVZlcnNpb25cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1vbmdvX2NsaWVudF8yLlNlcnZlckFwaVZlcnNpb247IH0gfSk7XG52YXIgZmluZF9hbmRfbW9kaWZ5XzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2ZpbmRfYW5kX21vZGlmeVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlJldHVybkRvY3VtZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBmaW5kX2FuZF9tb2RpZnlfMS5SZXR1cm5Eb2N1bWVudDsgfSB9KTtcbnZhciBzZXRfcHJvZmlsaW5nX2xldmVsXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL3NldF9wcm9maWxpbmdfbGV2ZWxcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJQcm9maWxpbmdMZXZlbFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0X3Byb2ZpbGluZ19sZXZlbF8xLlByb2ZpbGluZ0xldmVsOyB9IH0pO1xudmFyIHJlYWRfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vcmVhZF9jb25jZXJuXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUmVhZENvbmNlcm5MZXZlbFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm5MZXZlbDsgfSB9KTtcbnZhciByZWFkX3ByZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuL3JlYWRfcHJlZmVyZW5jZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlJlYWRQcmVmZXJlbmNlTW9kZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2VNb2RlOyB9IH0pO1xudmFyIGNvbW1vbl8zID0gcmVxdWlyZShcIi4vc2RhbS9jb21tb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZXJ2ZXJUeXBlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb21tb25fMy5TZXJ2ZXJUeXBlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVG9wb2xvZ3lUeXBlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb21tb25fMy5Ub3BvbG9neVR5cGU7IH0gfSk7XG4vLyBIZWxwZXIgY2xhc3Nlc1xudmFyIHJlYWRfY29uY2Vybl8yID0gcmVxdWlyZShcIi4vcmVhZF9jb25jZXJuXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUmVhZENvbmNlcm5cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlYWRfY29uY2Vybl8yLlJlYWRDb25jZXJuOyB9IH0pO1xudmFyIHJlYWRfcHJlZmVyZW5jZV8yID0gcmVxdWlyZShcIi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUmVhZFByZWZlcmVuY2VcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlYWRfcHJlZmVyZW5jZV8yLlJlYWRQcmVmZXJlbmNlOyB9IH0pO1xudmFyIHdyaXRlX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3dyaXRlX2NvbmNlcm5cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJXcml0ZUNvbmNlcm5cIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm47IH0gfSk7XG4vLyBldmVudHNcbnZhciBjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEgPSByZXF1aXJlKFwiLi9jbWFwL2NvbW1hbmRfbW9uaXRvcmluZ19ldmVudHNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb21tYW5kRmFpbGVkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbW1hbmRfbW9uaXRvcmluZ19ldmVudHNfMS5Db21tYW5kRmFpbGVkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb21tYW5kU3RhcnRlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb21tYW5kX21vbml0b3JpbmdfZXZlbnRzXzEuQ29tbWFuZFN0YXJ0ZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbW1hbmRTdWNjZWVkZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29tbWFuZF9tb25pdG9yaW5nX2V2ZW50c18xLkNvbW1hbmRTdWNjZWVkZWRFdmVudDsgfSB9KTtcbnZhciBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEgPSByZXF1aXJlKFwiLi9jbWFwL2Nvbm5lY3Rpb25fcG9vbF9ldmVudHNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb25uZWN0aW9uQ2hlY2tlZEluRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ2hlY2tlZEluRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb25uZWN0aW9uQ2hlY2tlZE91dEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNoZWNrZWRPdXRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25DaGVja091dEZhaWxlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNoZWNrT3V0RmFpbGVkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb25uZWN0aW9uQ2hlY2tPdXRTdGFydGVkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ2hlY2tPdXRTdGFydGVkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb25uZWN0aW9uQ2xvc2VkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uQ2xvc2VkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb25uZWN0aW9uQ3JlYXRlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvbkNyZWF0ZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25Qb29sQ2xlYXJlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvblBvb2xDbGVhcmVkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb25uZWN0aW9uUG9vbENsb3NlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvblBvb2xDbG9zZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbm5lY3Rpb25Qb29sQ3JlYXRlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvblBvb2xDcmVhdGVkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJDb25uZWN0aW9uUG9vbE1vbml0b3JpbmdFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gY29ubmVjdGlvbl9wb29sX2V2ZW50c18xLkNvbm5lY3Rpb25Qb29sTW9uaXRvcmluZ0V2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29ubmVjdGlvblBvb2xSZWFkeUV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25uZWN0aW9uX3Bvb2xfZXZlbnRzXzEuQ29ubmVjdGlvblBvb2xSZWFkeUV2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29ubmVjdGlvblJlYWR5RXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbm5lY3Rpb25fcG9vbF9ldmVudHNfMS5Db25uZWN0aW9uUmVhZHlFdmVudDsgfSB9KTtcbnZhciBldmVudHNfMSA9IHJlcXVpcmUoXCIuL3NkYW0vZXZlbnRzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VydmVyQ2xvc2VkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV2ZW50c18xLlNlcnZlckNsb3NlZEV2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV2ZW50c18xLlNlcnZlckRlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VydmVySGVhcnRiZWF0RmFpbGVkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV2ZW50c18xLlNlcnZlckhlYXJ0YmVhdEZhaWxlZEV2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VydmVySGVhcnRiZWF0U3RhcnRlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBldmVudHNfMS5TZXJ2ZXJIZWFydGJlYXRTdGFydGVkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZXJ2ZXJIZWFydGJlYXRTdWNjZWVkZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXZlbnRzXzEuU2VydmVySGVhcnRiZWF0U3VjY2VlZGVkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZXJ2ZXJPcGVuaW5nRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV2ZW50c18xLlNlcnZlck9wZW5pbmdFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRvcG9sb2d5Q2xvc2VkRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV2ZW50c18xLlRvcG9sb2d5Q2xvc2VkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJUb3BvbG9neURlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBldmVudHNfMS5Ub3BvbG9neURlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVG9wb2xvZ3lPcGVuaW5nRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGV2ZW50c18xLlRvcG9sb2d5T3BlbmluZ0V2ZW50OyB9IH0pO1xudmFyIHNlcnZlcl9zZWxlY3Rpb25fZXZlbnRzXzEgPSByZXF1aXJlKFwiLi9zZGFtL3NlcnZlcl9zZWxlY3Rpb25fZXZlbnRzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2VydmVyU2VsZWN0aW9uRXZlbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlcnZlcl9zZWxlY3Rpb25fZXZlbnRzXzEuU2VydmVyU2VsZWN0aW9uRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZXJ2ZXJTZWxlY3Rpb25GYWlsZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VydmVyX3NlbGVjdGlvbl9ldmVudHNfMS5TZXJ2ZXJTZWxlY3Rpb25GYWlsZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlNlcnZlclNlbGVjdGlvblN0YXJ0ZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VydmVyX3NlbGVjdGlvbl9ldmVudHNfMS5TZXJ2ZXJTZWxlY3Rpb25TdGFydGVkRXZlbnQ7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJTZXJ2ZXJTZWxlY3Rpb25TdWNjZWVkZWRFdmVudFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VydmVyX3NlbGVjdGlvbl9ldmVudHNfMS5TZXJ2ZXJTZWxlY3Rpb25TdWNjZWVkZWRFdmVudDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIldhaXRpbmdGb3JTdWl0YWJsZVNlcnZlckV2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50c18xLldhaXRpbmdGb3JTdWl0YWJsZVNlcnZlckV2ZW50OyB9IH0pO1xudmFyIHNydl9wb2xsaW5nXzEgPSByZXF1aXJlKFwiLi9zZGFtL3Nydl9wb2xsaW5nXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU3J2UG9sbGluZ0V2ZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzcnZfcG9sbGluZ18xLlNydlBvbGxpbmdFdmVudDsgfSB9KTtcbnZhciBlcnJvcnNfMSA9IHJlcXVpcmUoXCIuL2NsaWVudC1zaWRlLWVuY3J5cHRpb24vZXJyb3JzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29DcnlwdEF6dXJlS01TUmVxdWVzdEVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcnNfMS5Nb25nb0NyeXB0QXp1cmVLTVNSZXF1ZXN0RXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0NyeXB0Q3JlYXRlRGF0YUtleUVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcnNfMS5Nb25nb0NyeXB0Q3JlYXRlRGF0YUtleUVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29DcnlwdENyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb25FcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JzXzEuTW9uZ29DcnlwdENyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb25FcnJvcjsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvQ3J5cHRFcnJvclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXJyb3JzXzEuTW9uZ29DcnlwdEVycm9yOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcnNfMS5Nb25nb0NyeXB0SW52YWxpZEFyZ3VtZW50RXJyb3I7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJNb25nb0NyeXB0S01TUmVxdWVzdE5ldHdvcmtUaW1lb3V0RXJyb3JcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yc18xLk1vbmdvQ3J5cHRLTVNSZXF1ZXN0TmV0d29ya1RpbWVvdXRFcnJvcjsgfSB9KTtcbnZhciBtb25nb19jbGllbnRfYXV0aF9wcm92aWRlcnNfMSA9IHJlcXVpcmUoXCIuL21vbmdvX2NsaWVudF9hdXRoX3Byb3ZpZGVyc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIk1vbmdvQ2xpZW50QXV0aFByb3ZpZGVyc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbW9uZ29fY2xpZW50X2F1dGhfcHJvdmlkZXJzXzEuTW9uZ29DbGllbnRBdXRoUHJvdmlkZXJzOyB9IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvciIsIk1vbmdvVHJhbnNhY3Rpb25FcnJvciIsIk1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvciIsIk1vbmdvVGFpbGFibGVDdXJzb3JFcnJvciIsIk1vbmdvU3lzdGVtRXJyb3IiLCJNb25nb1NlcnZlclNlbGVjdGlvbkVycm9yIiwiTW9uZ29TZXJ2ZXJFcnJvciIsIk1vbmdvU2VydmVyQ2xvc2VkRXJyb3IiLCJNb25nb1J1bnRpbWVFcnJvciIsIk1vbmdvUGFyc2VFcnJvciIsIk1vbmdvTm90Q29ubmVjdGVkRXJyb3IiLCJNb25nb05ldHdvcmtUaW1lb3V0RXJyb3IiLCJNb25nb05ldHdvcmtFcnJvciIsIk1vbmdvTWlzc2luZ0RlcGVuZGVuY3lFcnJvciIsIk1vbmdvTWlzc2luZ0NyZWRlbnRpYWxzRXJyb3IiLCJNb25nb0tlcmJlcm9zRXJyb3IiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiTW9uZ29HcmlkRlNTdHJlYW1FcnJvciIsIk1vbmdvR3JpZEZTQ2h1bmtFcnJvciIsIk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvciIsIk1vbmdvRXJyb3IiLCJNb25nb0RyaXZlckVycm9yIiwiTW9uZ29EZWNvbXByZXNzaW9uRXJyb3IiLCJNb25nb0N1cnNvckluVXNlRXJyb3IiLCJNb25nb0N1cnNvckV4aGF1c3RlZEVycm9yIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJNb25nb0NoYW5nZVN0cmVhbUVycm9yIiwiTW9uZ29CYXRjaFJlRXhlY3V0aW9uRXJyb3IiLCJNb25nb0F6dXJlRXJyb3IiLCJNb25nb0FXU0Vycm9yIiwiTW9uZ29BUElFcnJvciIsIkNoYW5nZVN0cmVhbUN1cnNvciIsIkNsaWVudEVuY3J5cHRpb24iLCJNb25nb0J1bGtXcml0ZUVycm9yIiwiVVVJRCIsIlRpbWVzdGFtcCIsIk9iamVjdElkIiwiTWluS2V5IiwiTWF4S2V5IiwiTG9uZyIsIkludDMyIiwiRG91YmxlIiwiRGVjaW1hbDEyOCIsIkRCUmVmIiwiQ29kZSIsIkJTT05UeXBlIiwiQlNPTlN5bWJvbCIsIkJTT05SZWdFeHAiLCJCaW5hcnkiLCJCU09OIiwiQ29ubmVjdGlvblBvb2xSZWFkeUV2ZW50IiwiQ29ubmVjdGlvblBvb2xNb25pdG9yaW5nRXZlbnQiLCJDb25uZWN0aW9uUG9vbENyZWF0ZWRFdmVudCIsIkNvbm5lY3Rpb25Qb29sQ2xvc2VkRXZlbnQiLCJDb25uZWN0aW9uUG9vbENsZWFyZWRFdmVudCIsIkNvbm5lY3Rpb25DcmVhdGVkRXZlbnQiLCJDb25uZWN0aW9uQ2xvc2VkRXZlbnQiLCJDb25uZWN0aW9uQ2hlY2tPdXRTdGFydGVkRXZlbnQiLCJDb25uZWN0aW9uQ2hlY2tPdXRGYWlsZWRFdmVudCIsIkNvbm5lY3Rpb25DaGVja2VkT3V0RXZlbnQiLCJDb25uZWN0aW9uQ2hlY2tlZEluRXZlbnQiLCJDb21tYW5kU3VjY2VlZGVkRXZlbnQiLCJDb21tYW5kU3RhcnRlZEV2ZW50IiwiQ29tbWFuZEZhaWxlZEV2ZW50IiwiV3JpdGVDb25jZXJuIiwiUmVhZFByZWZlcmVuY2UiLCJSZWFkQ29uY2VybiIsIlRvcG9sb2d5VHlwZSIsIlNlcnZlclR5cGUiLCJSZWFkUHJlZmVyZW5jZU1vZGUiLCJSZWFkQ29uY2VybkxldmVsIiwiUHJvZmlsaW5nTGV2ZWwiLCJSZXR1cm5Eb2N1bWVudCIsIlNlcnZlckFwaVZlcnNpb24iLCJFeHBsYWluVmVyYm9zaXR5IiwiTW9uZ29FcnJvckxhYmVsIiwiQ1VSU09SX0ZMQUdTIiwiQ29tcHJlc3NvciIsIkF1dGhNZWNoYW5pc20iLCJHU1NBUElDYW5vbmljYWxpemF0aW9uVmFsdWUiLCJBdXRvRW5jcnlwdGlvbkxvZ2dlckxldmVsIiwiQmF0Y2hUeXBlIiwiVW5vcmRlcmVkQnVsa09wZXJhdGlvbiIsIk9yZGVyZWRCdWxrT3BlcmF0aW9uIiwiTW9uZ29DbGllbnQiLCJMaXN0SW5kZXhlc0N1cnNvciIsIkxpc3RDb2xsZWN0aW9uc0N1cnNvciIsIkdyaWRGU0J1Y2tldFdyaXRlU3RyZWFtIiwiR3JpZEZTQnVja2V0UmVhZFN0cmVhbSIsIkdyaWRGU0J1Y2tldCIsIkZpbmRDdXJzb3IiLCJEYiIsIkNvbGxlY3Rpb24iLCJDbGllbnRTZXNzaW9uIiwiQ2hhbmdlU3RyZWFtIiwiQ2FuY2VsbGF0aW9uVG9rZW4iLCJBZ2dyZWdhdGlvbkN1cnNvciIsIkFkbWluIiwiQWJzdHJhY3RDdXJzb3IiLCJNb25nb1dyaXRlQ29uY2VybkVycm9yIiwiTW9uZ29DbGllbnRBdXRoUHJvdmlkZXJzIiwiTW9uZ29DcnlwdEtNU1JlcXVlc3ROZXR3b3JrVGltZW91dEVycm9yIiwiTW9uZ29DcnlwdEludmFsaWRBcmd1bWVudEVycm9yIiwiTW9uZ29DcnlwdEVycm9yIiwiTW9uZ29DcnlwdENyZWF0ZUVuY3J5cHRlZENvbGxlY3Rpb25FcnJvciIsIk1vbmdvQ3J5cHRDcmVhdGVEYXRhS2V5RXJyb3IiLCJNb25nb0NyeXB0QXp1cmVLTVNSZXF1ZXN0RXJyb3IiLCJTcnZQb2xsaW5nRXZlbnQiLCJXYWl0aW5nRm9yU3VpdGFibGVTZXJ2ZXJFdmVudCIsIlNlcnZlclNlbGVjdGlvblN1Y2NlZWRlZEV2ZW50IiwiU2VydmVyU2VsZWN0aW9uU3RhcnRlZEV2ZW50IiwiU2VydmVyU2VsZWN0aW9uRmFpbGVkRXZlbnQiLCJTZXJ2ZXJTZWxlY3Rpb25FdmVudCIsIlRvcG9sb2d5T3BlbmluZ0V2ZW50IiwiVG9wb2xvZ3lEZXNjcmlwdGlvbkNoYW5nZWRFdmVudCIsIlRvcG9sb2d5Q2xvc2VkRXZlbnQiLCJTZXJ2ZXJPcGVuaW5nRXZlbnQiLCJTZXJ2ZXJIZWFydGJlYXRTdWNjZWVkZWRFdmVudCIsIlNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudCIsIlNlcnZlckhlYXJ0YmVhdEZhaWxlZEV2ZW50IiwiU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQiLCJTZXJ2ZXJDbG9zZWRFdmVudCIsIkNvbm5lY3Rpb25SZWFkeUV2ZW50IiwiYWRtaW5fMSIsInJlcXVpcmUiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib3JkZXJlZF8xIiwidW5vcmRlcmVkXzEiLCJjaGFuZ2Vfc3RyZWFtXzEiLCJjb2xsZWN0aW9uXzEiLCJhYnN0cmFjdF9jdXJzb3JfMSIsImFnZ3JlZ2F0aW9uX2N1cnNvcl8xIiwiZmluZF9jdXJzb3JfMSIsImxpc3RfY29sbGVjdGlvbnNfY3Vyc29yXzEiLCJsaXN0X2luZGV4ZXNfY3Vyc29yXzEiLCJkYl8xIiwiZ3JpZGZzXzEiLCJkb3dubG9hZF8xIiwidXBsb2FkXzEiLCJtb25nb19jbGllbnRfMSIsIm1vbmdvX3R5cGVzXzEiLCJzZXNzaW9uc18xIiwiYnNvbl8xIiwiYnNvbl8yIiwiY29tbW9uXzEiLCJjbGllbnRfZW5jcnlwdGlvbl8xIiwiY2hhbmdlX3N0cmVhbV9jdXJzb3JfMSIsImVycm9yXzEiLCJjb21tb25fMiIsImF1dG9fZW5jcnlwdGVyXzEiLCJnc3NhcGlfMSIsInByb3ZpZGVyc18xIiwiY29tcHJlc3Npb25fMSIsImFic3RyYWN0X2N1cnNvcl8yIiwiZXJyb3JfMiIsImV4cGxhaW5fMSIsIm1vbmdvX2NsaWVudF8yIiwiZmluZF9hbmRfbW9kaWZ5XzEiLCJzZXRfcHJvZmlsaW5nX2xldmVsXzEiLCJyZWFkX2NvbmNlcm5fMSIsInJlYWRfcHJlZmVyZW5jZV8xIiwiY29tbW9uXzMiLCJyZWFkX2NvbmNlcm5fMiIsInJlYWRfcHJlZmVyZW5jZV8yIiwid3JpdGVfY29uY2Vybl8xIiwiY29tbWFuZF9tb25pdG9yaW5nX2V2ZW50c18xIiwiY29ubmVjdGlvbl9wb29sX2V2ZW50c18xIiwiZXZlbnRzXzEiLCJzZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50c18xIiwic3J2X3BvbGxpbmdfMSIsImVycm9yc18xIiwibW9uZ29fY2xpZW50X2F1dGhfcHJvdmlkZXJzXzEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/mongo_client.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/mongo_client.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoClient = exports.ServerApiVersion = void 0;\nconst fs_1 = __webpack_require__(/*! fs */ \"fs\");\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst change_stream_1 = __webpack_require__(/*! ./change_stream */ \"(ssr)/./node_modules/mongodb/lib/change_stream.js\");\nconst mongo_credentials_1 = __webpack_require__(/*! ./cmap/auth/mongo_credentials */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongo_credentials.js\");\nconst providers_1 = __webpack_require__(/*! ./cmap/auth/providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst connection_string_1 = __webpack_require__(/*! ./connection_string */ \"(ssr)/./node_modules/mongodb/lib/connection_string.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst db_1 = __webpack_require__(/*! ./db */ \"(ssr)/./node_modules/mongodb/lib/db.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_client_auth_providers_1 = __webpack_require__(/*! ./mongo_client_auth_providers */ \"(ssr)/./node_modules/mongodb/lib/mongo_client_auth_providers.js\");\nconst mongo_logger_1 = __webpack_require__(/*! ./mongo_logger */ \"(ssr)/./node_modules/mongodb/lib/mongo_logger.js\");\nconst mongo_types_1 = __webpack_require__(/*! ./mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst execute_operation_1 = __webpack_require__(/*! ./operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst run_command_1 = __webpack_require__(/*! ./operations/run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst server_selection_1 = __webpack_require__(/*! ./sdam/server_selection */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\");\nconst topology_1 = __webpack_require__(/*! ./sdam/topology */ \"(ssr)/./node_modules/mongodb/lib/sdam/topology.js\");\nconst sessions_1 = __webpack_require__(/*! ./sessions */ \"(ssr)/./node_modules/mongodb/lib/sessions.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/** @public */ exports.ServerApiVersion = Object.freeze({\n    v1: \"1\"\n});\n/** @internal */ const kOptions = Symbol(\"options\");\n/**\n * The **MongoClient** class is a class that allows for making Connections to MongoDB.\n * @public\n *\n * @remarks\n * The programmatically provided options take precedence over the URI options.\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * // Enable command monitoring for debugging\n * const client = new MongoClient('mongodb://localhost:27017', { monitorCommands: true });\n *\n * client.on('commandStarted', started => console.log(started));\n * client.db().collection('pets');\n * await client.insertOne({ name: 'spot', kind: 'dog' });\n * ```\n */ class MongoClient extends mongo_types_1.TypedEventEmitter {\n    constructor(url, options){\n        super();\n        this[kOptions] = (0, connection_string_1.parseOptions)(url, this, options);\n        const shouldSetLogger = Object.values(this[kOptions].mongoLoggerOptions.componentSeverities).some((value)=>value !== mongo_logger_1.SeverityLevel.OFF);\n        this.mongoLogger = shouldSetLogger ? new mongo_logger_1.MongoLogger(this[kOptions].mongoLoggerOptions) : undefined;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const client = this;\n        // The internal state\n        this.s = {\n            url,\n            bsonOptions: (0, bson_1.resolveBSONOptions)(this[kOptions]),\n            namespace: (0, utils_1.ns)(\"admin\"),\n            hasBeenClosed: false,\n            sessionPool: new sessions_1.ServerSessionPool(this),\n            activeSessions: new Set(),\n            authProviders: new mongo_client_auth_providers_1.MongoClientAuthProviders(),\n            get options () {\n                return client[kOptions];\n            },\n            get readConcern () {\n                return client[kOptions].readConcern;\n            },\n            get writeConcern () {\n                return client[kOptions].writeConcern;\n            },\n            get readPreference () {\n                return client[kOptions].readPreference;\n            },\n            get isMongoClient () {\n                return true;\n            }\n        };\n        this.checkForNonGenuineHosts();\n    }\n    /** @internal */ checkForNonGenuineHosts() {\n        const documentDBHostnames = this[kOptions].hosts.filter((hostAddress)=>(0, utils_1.isHostMatch)(utils_1.DOCUMENT_DB_CHECK, hostAddress.host));\n        const srvHostIsDocumentDB = (0, utils_1.isHostMatch)(utils_1.DOCUMENT_DB_CHECK, this[kOptions].srvHost);\n        const cosmosDBHostnames = this[kOptions].hosts.filter((hostAddress)=>(0, utils_1.isHostMatch)(utils_1.COSMOS_DB_CHECK, hostAddress.host));\n        const srvHostIsCosmosDB = (0, utils_1.isHostMatch)(utils_1.COSMOS_DB_CHECK, this[kOptions].srvHost);\n        if (documentDBHostnames.length !== 0 || srvHostIsDocumentDB) {\n            this.mongoLogger?.info(\"client\", utils_1.DOCUMENT_DB_MSG);\n        } else if (cosmosDBHostnames.length !== 0 || srvHostIsCosmosDB) {\n            this.mongoLogger?.info(\"client\", utils_1.COSMOS_DB_MSG);\n        }\n    }\n    /** @see MongoOptions */ get options() {\n        return Object.freeze({\n            ...this[kOptions]\n        });\n    }\n    get serverApi() {\n        return this[kOptions].serverApi && Object.freeze({\n            ...this[kOptions].serverApi\n        });\n    }\n    /**\n     * Intended for APM use only\n     * @internal\n     */ get monitorCommands() {\n        return this[kOptions].monitorCommands;\n    }\n    set monitorCommands(value) {\n        this[kOptions].monitorCommands = value;\n    }\n    /** @internal */ get autoEncrypter() {\n        return this[kOptions].autoEncrypter;\n    }\n    get readConcern() {\n        return this.s.readConcern;\n    }\n    get writeConcern() {\n        return this.s.writeConcern;\n    }\n    get readPreference() {\n        return this.s.readPreference;\n    }\n    get bsonOptions() {\n        return this.s.bsonOptions;\n    }\n    /**\n     * Connect to MongoDB using a url\n     *\n     * @see docs.mongodb.org/manual/reference/connection-string/\n     */ async connect() {\n        if (this.connectionLock) {\n            return this.connectionLock;\n        }\n        try {\n            this.connectionLock = this._connect();\n            await this.connectionLock;\n        } finally{\n            // release\n            this.connectionLock = undefined;\n        }\n        return this;\n    }\n    /**\n     * Create a topology to open the connection, must be locked to avoid topology leaks in concurrency scenario.\n     * Locking is enforced by the connect method.\n     *\n     * @internal\n     */ async _connect() {\n        if (this.topology && this.topology.isConnected()) {\n            return this;\n        }\n        const options = this[kOptions];\n        if (options.tls) {\n            if (typeof options.tlsCAFile === \"string\") {\n                options.ca ??= await fs_1.promises.readFile(options.tlsCAFile);\n            }\n            if (typeof options.tlsCRLFile === \"string\") {\n                options.crl ??= await fs_1.promises.readFile(options.tlsCRLFile);\n            }\n            if (typeof options.tlsCertificateKeyFile === \"string\") {\n                if (!options.key || !options.cert) {\n                    const contents = await fs_1.promises.readFile(options.tlsCertificateKeyFile);\n                    options.key ??= contents;\n                    options.cert ??= contents;\n                }\n            }\n        }\n        if (typeof options.srvHost === \"string\") {\n            const hosts = await (0, connection_string_1.resolveSRVRecord)(options);\n            for (const [index, host] of hosts.entries()){\n                options.hosts[index] = host;\n            }\n        }\n        // It is important to perform validation of hosts AFTER SRV resolution, to check the real hostname,\n        // but BEFORE we even attempt connecting with a potentially not allowed hostname\n        if (options.credentials?.mechanism === providers_1.AuthMechanism.MONGODB_OIDC) {\n            const allowedHosts = options.credentials?.mechanismProperties?.ALLOWED_HOSTS || mongo_credentials_1.DEFAULT_ALLOWED_HOSTS;\n            const isServiceAuth = !!options.credentials?.mechanismProperties?.PROVIDER_NAME;\n            if (!isServiceAuth) {\n                for (const host of options.hosts){\n                    if (!(0, utils_1.hostMatchesWildcards)(host.toHostPort().host, allowedHosts)) {\n                        throw new error_1.MongoInvalidArgumentError(`Host '${host}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${allowedHosts.join(\",\")}'`);\n                    }\n                }\n            }\n        }\n        this.topology = new topology_1.Topology(this, options.hosts, options);\n        // Events can be emitted before initialization is complete so we have to\n        // save the reference to the topology on the client ASAP if the event handlers need to access it\n        this.topology.once(topology_1.Topology.OPEN, ()=>this.emit(\"open\", this));\n        for (const event of constants_1.MONGO_CLIENT_EVENTS){\n            this.topology.on(event, (...args)=>this.emit(event, ...args));\n        }\n        const topologyConnect = async ()=>{\n            try {\n                await (0, util_1.promisify)((callback)=>this.topology?.connect(options, callback))();\n            } catch (error) {\n                this.topology?.close();\n                throw error;\n            }\n        };\n        if (this.autoEncrypter) {\n            await this.autoEncrypter?.init();\n            await topologyConnect();\n            await options.encrypter.connectInternalClient();\n        } else {\n            await topologyConnect();\n        }\n        return this;\n    }\n    /**\n     * Close the client and its underlying connections\n     *\n     * @param force - Force close, emitting no events\n     */ async close(force = false) {\n        // There's no way to set hasBeenClosed back to false\n        Object.defineProperty(this.s, \"hasBeenClosed\", {\n            value: true,\n            enumerable: true,\n            configurable: false,\n            writable: false\n        });\n        const activeSessionEnds = Array.from(this.s.activeSessions, (session)=>session.endSession());\n        this.s.activeSessions.clear();\n        await Promise.all(activeSessionEnds);\n        if (this.topology == null) {\n            return;\n        }\n        // If we would attempt to select a server and get nothing back we short circuit\n        // to avoid the server selection timeout.\n        const selector = (0, server_selection_1.readPreferenceServerSelector)(read_preference_1.ReadPreference.primaryPreferred);\n        const topologyDescription = this.topology.description;\n        const serverDescriptions = Array.from(topologyDescription.servers.values());\n        const servers = selector(topologyDescription, serverDescriptions);\n        if (servers.length !== 0) {\n            const endSessions = Array.from(this.s.sessionPool.sessions, ({ id })=>id);\n            if (endSessions.length !== 0) {\n                await (0, execute_operation_1.executeOperation)(this, new run_command_1.RunAdminCommandOperation({\n                    endSessions\n                }, {\n                    readPreference: read_preference_1.ReadPreference.primaryPreferred,\n                    noResponse: true\n                })).catch(()=>null); // outcome does not matter;\n            }\n        }\n        // clear out references to old topology\n        const topology = this.topology;\n        this.topology = undefined;\n        topology.close();\n        const { encrypter } = this[kOptions];\n        if (encrypter) {\n            await encrypter.close(this, force);\n        }\n    }\n    /**\n     * Create a new Db instance sharing the current socket connections.\n     *\n     * @param dbName - The name of the database we want to use. If not provided, use database name from connection string.\n     * @param options - Optional settings for Db construction\n     */ db(dbName, options) {\n        options = options ?? {};\n        // Default to db from connection string if not provided\n        if (!dbName) {\n            dbName = this.options.dbName;\n        }\n        // Copy the options and add out internal override of the not shared flag\n        const finalOptions = Object.assign({}, this[kOptions], options);\n        // Return the db object\n        const db = new db_1.Db(this, dbName, finalOptions);\n        // Return the database\n        return db;\n    }\n    /**\n     * Connect to MongoDB using a url\n     *\n     * @remarks\n     * The programmatically provided options take precedence over the URI options.\n     *\n     * @see https://www.mongodb.com/docs/manual/reference/connection-string/\n     */ static async connect(url, options) {\n        const client = new this(url, options);\n        return client.connect();\n    }\n    /**\n     * Creates a new ClientSession. When using the returned session in an operation\n     * a corresponding ServerSession will be created.\n     *\n     * @remarks\n     * A ClientSession instance may only be passed to operations being performed on the same\n     * MongoClient it was started from.\n     */ startSession(options) {\n        const session = new sessions_1.ClientSession(this, this.s.sessionPool, {\n            explicit: true,\n            ...options\n        }, this[kOptions]);\n        this.s.activeSessions.add(session);\n        session.once(\"ended\", ()=>{\n            this.s.activeSessions.delete(session);\n        });\n        return session;\n    }\n    async withSession(optionsOrExecutor, executor) {\n        const options = {\n            // Always define an owner\n            owner: Symbol(),\n            // If it's an object inherit the options\n            ...typeof optionsOrExecutor === \"object\" ? optionsOrExecutor : {}\n        };\n        const withSessionCallback = typeof optionsOrExecutor === \"function\" ? optionsOrExecutor : executor;\n        if (withSessionCallback == null) {\n            throw new error_1.MongoInvalidArgumentError(\"Missing required callback parameter\");\n        }\n        const session = this.startSession(options);\n        try {\n            return await withSessionCallback(session);\n        } finally{\n            try {\n                await session.endSession();\n            } catch  {\n            // We are not concerned with errors from endSession()\n            }\n        }\n    }\n    /**\n     * Create a new Change Stream, watching for new changes (insertions, updates,\n     * replacements, deletions, and invalidations) in this cluster. Will ignore all\n     * changes to system collections, as well as the local, admin, and config databases.\n     *\n     * @remarks\n     * watch() accepts two generic arguments for distinct use cases:\n     * - The first is to provide the schema that may be defined for all the data within the current cluster\n     * - The second is to override the shape of the change stream document entirely, if it is not provided the type will default to ChangeStreamDocument of the first argument\n     *\n     * @param pipeline - An array of {@link https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/|aggregation pipeline stages} through which to pass change stream documents. This allows for filtering (using $match) and manipulating the change stream documents.\n     * @param options - Optional settings for the command\n     * @typeParam TSchema - Type of the data being detected by the change stream\n     * @typeParam TChange - Type of the whole change stream document emitted\n     */ watch(pipeline = [], options = {}) {\n        // Allow optionally not specifying a pipeline\n        if (!Array.isArray(pipeline)) {\n            options = pipeline;\n            pipeline = [];\n        }\n        return new change_stream_1.ChangeStream(this, pipeline, (0, utils_1.resolveOptions)(this, options));\n    }\n}\nexports.MongoClient = MongoClient; //# sourceMappingURL=mongo_client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvbW9uZ29fY2xpZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUN0RCxNQUFNSSxPQUFPQyxtQkFBT0EsQ0FBQyxjQUFJO0FBQ3pCLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1FLFNBQVNGLG1CQUFPQSxDQUFDLHdEQUFRO0FBQy9CLE1BQU1HLGtCQUFrQkgsbUJBQU9BLENBQUMsMEVBQWlCO0FBQ2pELE1BQU1JLHNCQUFzQkosbUJBQU9BLENBQUMsc0dBQStCO0FBQ25FLE1BQU1LLGNBQWNMLG1CQUFPQSxDQUFDLHNGQUF1QjtBQUNuRCxNQUFNTSxzQkFBc0JOLG1CQUFPQSxDQUFDLGtGQUFxQjtBQUN6RCxNQUFNTyxjQUFjUCxtQkFBT0EsQ0FBQyxrRUFBYTtBQUN6QyxNQUFNUSxPQUFPUixtQkFBT0EsQ0FBQyxvREFBTTtBQUMzQixNQUFNUyxVQUFVVCxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxNQUFNVSxnQ0FBZ0NWLG1CQUFPQSxDQUFDLHNHQUErQjtBQUM3RSxNQUFNVyxpQkFBaUJYLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNWSxnQkFBZ0JaLG1CQUFPQSxDQUFDLHNFQUFlO0FBQzdDLE1BQU1hLHNCQUFzQmIsbUJBQU9BLENBQUMsd0dBQWdDO0FBQ3BFLE1BQU1jLGdCQUFnQmQsbUJBQU9BLENBQUMsNEZBQTBCO0FBQ3hELE1BQU1lLG9CQUFvQmYsbUJBQU9BLENBQUMsOEVBQW1CO0FBQ3JELE1BQU1nQixxQkFBcUJoQixtQkFBT0EsQ0FBQywwRkFBeUI7QUFDNUQsTUFBTWlCLGFBQWFqQixtQkFBT0EsQ0FBQywwRUFBaUI7QUFDNUMsTUFBTWtCLGFBQWFsQixtQkFBT0EsQ0FBQyxnRUFBWTtBQUN2QyxNQUFNbUIsVUFB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QUFvQmxDO1FBQ3JDLFNBQ1E7WUFDSixJQUFJO2dCQUNBLE1BQU1BLFFBQVFDLFVBQVU7WUFDNUIsRUFDQSxPQUFNO1lBQ0YscURBQXFEO1lBQ3pEO1FBQ0o7SUFDSjtJQUNBOzs7Ozs7Ozs7Ozs7OztLQWNDLEdBQ0RrQyxNQUFNQyxXQUFXLEVBQUUsRUFBRTdJLFVBQVUsQ0FBQyxDQUFDLEVBQUU7UUFDL0IsNkNBQTZDO1FBQzdDLElBQUksQ0FBQ3VHLE1BQU11QyxPQUFPLENBQUNELFdBQVc7WUFDMUI3SSxVQUFVNkk7WUFDVkEsV0FBVyxFQUFFO1FBQ2pCO1FBQ0EsT0FBTyxJQUFJckssZ0JBQWdCdUssWUFBWSxDQUFDLElBQUksRUFBRUYsVUFBVSxDQUFDLEdBQUdySixRQUFRd0osY0FBYyxFQUFFLElBQUksRUFBRWhKO0lBQzlGO0FBQ0o7QUFDQWhDLG1CQUFtQixHQUFHRSxhQUN0Qix3Q0FBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL21vbmdvX2NsaWVudC5qcz82ZDdmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Nb25nb0NsaWVudCA9IGV4cG9ydHMuU2VydmVyQXBpVmVyc2lvbiA9IHZvaWQgMDtcbmNvbnN0IGZzXzEgPSByZXF1aXJlKFwiZnNcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwidXRpbFwiKTtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuL2Jzb25cIik7XG5jb25zdCBjaGFuZ2Vfc3RyZWFtXzEgPSByZXF1aXJlKFwiLi9jaGFuZ2Vfc3RyZWFtXCIpO1xuY29uc3QgbW9uZ29fY3JlZGVudGlhbHNfMSA9IHJlcXVpcmUoXCIuL2NtYXAvYXV0aC9tb25nb19jcmVkZW50aWFsc1wiKTtcbmNvbnN0IHByb3ZpZGVyc18xID0gcmVxdWlyZShcIi4vY21hcC9hdXRoL3Byb3ZpZGVyc1wiKTtcbmNvbnN0IGNvbm5lY3Rpb25fc3RyaW5nXzEgPSByZXF1aXJlKFwiLi9jb25uZWN0aW9uX3N0cmluZ1wiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuY29uc3QgZGJfMSA9IHJlcXVpcmUoXCIuL2RiXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xuY29uc3QgbW9uZ29fY2xpZW50X2F1dGhfcHJvdmlkZXJzXzEgPSByZXF1aXJlKFwiLi9tb25nb19jbGllbnRfYXV0aF9wcm92aWRlcnNcIik7XG5jb25zdCBtb25nb19sb2dnZXJfMSA9IHJlcXVpcmUoXCIuL21vbmdvX2xvZ2dlclwiKTtcbmNvbnN0IG1vbmdvX3R5cGVzXzEgPSByZXF1aXJlKFwiLi9tb25nb190eXBlc1wiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2V4ZWN1dGVfb3BlcmF0aW9uXCIpO1xuY29uc3QgcnVuX2NvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvcnVuX2NvbW1hbmRcIik7XG5jb25zdCByZWFkX3ByZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuL3JlYWRfcHJlZmVyZW5jZVwiKTtcbmNvbnN0IHNlcnZlcl9zZWxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuL3NkYW0vc2VydmVyX3NlbGVjdGlvblwiKTtcbmNvbnN0IHRvcG9sb2d5XzEgPSByZXF1aXJlKFwiLi9zZGFtL3RvcG9sb2d5XCIpO1xuY29uc3Qgc2Vzc2lvbnNfMSA9IHJlcXVpcmUoXCIuL3Nlc3Npb25zXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydHMuU2VydmVyQXBpVmVyc2lvbiA9IE9iamVjdC5mcmVlemUoe1xuICAgIHYxOiAnMSdcbn0pO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga09wdGlvbnMgPSBTeW1ib2woJ29wdGlvbnMnKTtcbi8qKlxuICogVGhlICoqTW9uZ29DbGllbnQqKiBjbGFzcyBpcyBhIGNsYXNzIHRoYXQgYWxsb3dzIGZvciBtYWtpbmcgQ29ubmVjdGlvbnMgdG8gTW9uZ29EQi5cbiAqIEBwdWJsaWNcbiAqXG4gKiBAcmVtYXJrc1xuICogVGhlIHByb2dyYW1tYXRpY2FsbHkgcHJvdmlkZWQgb3B0aW9ucyB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUgVVJJIG9wdGlvbnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gJ21vbmdvZGInO1xuICpcbiAqIC8vIEVuYWJsZSBjb21tYW5kIG1vbml0b3JpbmcgZm9yIGRlYnVnZ2luZ1xuICogY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3JywgeyBtb25pdG9yQ29tbWFuZHM6IHRydWUgfSk7XG4gKlxuICogY2xpZW50Lm9uKCdjb21tYW5kU3RhcnRlZCcsIHN0YXJ0ZWQgPT4gY29uc29sZS5sb2coc3RhcnRlZCkpO1xuICogY2xpZW50LmRiKCkuY29sbGVjdGlvbigncGV0cycpO1xuICogYXdhaXQgY2xpZW50Lmluc2VydE9uZSh7IG5hbWU6ICdzcG90Jywga2luZDogJ2RvZycgfSk7XG4gKiBgYGBcbiAqL1xuY2xhc3MgTW9uZ29DbGllbnQgZXh0ZW5kcyBtb25nb190eXBlc18xLlR5cGVkRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmwsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpc1trT3B0aW9uc10gPSAoMCwgY29ubmVjdGlvbl9zdHJpbmdfMS5wYXJzZU9wdGlvbnMpKHVybCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHNob3VsZFNldExvZ2dlciA9IE9iamVjdC52YWx1ZXModGhpc1trT3B0aW9uc10ubW9uZ29Mb2dnZXJPcHRpb25zLmNvbXBvbmVudFNldmVyaXRpZXMpLnNvbWUodmFsdWUgPT4gdmFsdWUgIT09IG1vbmdvX2xvZ2dlcl8xLlNldmVyaXR5TGV2ZWwuT0ZGKTtcbiAgICAgICAgdGhpcy5tb25nb0xvZ2dlciA9IHNob3VsZFNldExvZ2dlclxuICAgICAgICAgICAgPyBuZXcgbW9uZ29fbG9nZ2VyXzEuTW9uZ29Mb2dnZXIodGhpc1trT3B0aW9uc10ubW9uZ29Mb2dnZXJPcHRpb25zKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzO1xuICAgICAgICAvLyBUaGUgaW50ZXJuYWwgc3RhdGVcbiAgICAgICAgdGhpcy5zID0ge1xuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgYnNvbk9wdGlvbnM6ICgwLCBic29uXzEucmVzb2x2ZUJTT05PcHRpb25zKSh0aGlzW2tPcHRpb25zXSksXG4gICAgICAgICAgICBuYW1lc3BhY2U6ICgwLCB1dGlsc18xLm5zKSgnYWRtaW4nKSxcbiAgICAgICAgICAgIGhhc0JlZW5DbG9zZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc2Vzc2lvblBvb2w6IG5ldyBzZXNzaW9uc18xLlNlcnZlclNlc3Npb25Qb29sKHRoaXMpLFxuICAgICAgICAgICAgYWN0aXZlU2Vzc2lvbnM6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIGF1dGhQcm92aWRlcnM6IG5ldyBtb25nb19jbGllbnRfYXV0aF9wcm92aWRlcnNfMS5Nb25nb0NsaWVudEF1dGhQcm92aWRlcnMoKSxcbiAgICAgICAgICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnRba09wdGlvbnNdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCByZWFkQ29uY2VybigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50W2tPcHRpb25zXS5yZWFkQ29uY2VybjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQgd3JpdGVDb25jZXJuKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnRba09wdGlvbnNdLndyaXRlQ29uY2VybjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQgcmVhZFByZWZlcmVuY2UoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudFtrT3B0aW9uc10ucmVhZFByZWZlcmVuY2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IGlzTW9uZ29DbGllbnQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hlY2tGb3JOb25HZW51aW5lSG9zdHMoKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNoZWNrRm9yTm9uR2VudWluZUhvc3RzKCkge1xuICAgICAgICBjb25zdCBkb2N1bWVudERCSG9zdG5hbWVzID0gdGhpc1trT3B0aW9uc10uaG9zdHMuZmlsdGVyKChob3N0QWRkcmVzcykgPT4gKDAsIHV0aWxzXzEuaXNIb3N0TWF0Y2gpKHV0aWxzXzEuRE9DVU1FTlRfREJfQ0hFQ0ssIGhvc3RBZGRyZXNzLmhvc3QpKTtcbiAgICAgICAgY29uc3Qgc3J2SG9zdElzRG9jdW1lbnREQiA9ICgwLCB1dGlsc18xLmlzSG9zdE1hdGNoKSh1dGlsc18xLkRPQ1VNRU5UX0RCX0NIRUNLLCB0aGlzW2tPcHRpb25zXS5zcnZIb3N0KTtcbiAgICAgICAgY29uc3QgY29zbW9zREJIb3N0bmFtZXMgPSB0aGlzW2tPcHRpb25zXS5ob3N0cy5maWx0ZXIoKGhvc3RBZGRyZXNzKSA9PiAoMCwgdXRpbHNfMS5pc0hvc3RNYXRjaCkodXRpbHNfMS5DT1NNT1NfREJfQ0hFQ0ssIGhvc3RBZGRyZXNzLmhvc3QpKTtcbiAgICAgICAgY29uc3Qgc3J2SG9zdElzQ29zbW9zREIgPSAoMCwgdXRpbHNfMS5pc0hvc3RNYXRjaCkodXRpbHNfMS5DT1NNT1NfREJfQ0hFQ0ssIHRoaXNba09wdGlvbnNdLnNydkhvc3QpO1xuICAgICAgICBpZiAoZG9jdW1lbnREQkhvc3RuYW1lcy5sZW5ndGggIT09IDAgfHwgc3J2SG9zdElzRG9jdW1lbnREQikge1xuICAgICAgICAgICAgdGhpcy5tb25nb0xvZ2dlcj8uaW5mbygnY2xpZW50JywgdXRpbHNfMS5ET0NVTUVOVF9EQl9NU0cpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvc21vc0RCSG9zdG5hbWVzLmxlbmd0aCAhPT0gMCB8fCBzcnZIb3N0SXNDb3Ntb3NEQikge1xuICAgICAgICAgICAgdGhpcy5tb25nb0xvZ2dlcj8uaW5mbygnY2xpZW50JywgdXRpbHNfMS5DT1NNT1NfREJfTVNHKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQHNlZSBNb25nb09wdGlvbnMgKi9cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUoeyAuLi50aGlzW2tPcHRpb25zXSB9KTtcbiAgICB9XG4gICAgZ2V0IHNlcnZlckFwaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba09wdGlvbnNdLnNlcnZlckFwaSAmJiBPYmplY3QuZnJlZXplKHsgLi4udGhpc1trT3B0aW9uc10uc2VydmVyQXBpIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlbmRlZCBmb3IgQVBNIHVzZSBvbmx5XG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IG1vbml0b3JDb21tYW5kcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba09wdGlvbnNdLm1vbml0b3JDb21tYW5kcztcbiAgICB9XG4gICAgc2V0IG1vbml0b3JDb21tYW5kcyh2YWx1ZSkge1xuICAgICAgICB0aGlzW2tPcHRpb25zXS5tb25pdG9yQ29tbWFuZHMgPSB2YWx1ZTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGdldCBhdXRvRW5jcnlwdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trT3B0aW9uc10uYXV0b0VuY3J5cHRlcjtcbiAgICB9XG4gICAgZ2V0IHJlYWRDb25jZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLnJlYWRDb25jZXJuO1xuICAgIH1cbiAgICBnZXQgd3JpdGVDb25jZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLndyaXRlQ29uY2VybjtcbiAgICB9XG4gICAgZ2V0IHJlYWRQcmVmZXJlbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLnJlYWRQcmVmZXJlbmNlO1xuICAgIH1cbiAgICBnZXQgYnNvbk9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuYnNvbk9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gTW9uZ29EQiB1c2luZyBhIHVybFxuICAgICAqXG4gICAgICogQHNlZSBkb2NzLm1vbmdvZGIub3JnL21hbnVhbC9yZWZlcmVuY2UvY29ubmVjdGlvbi1zdHJpbmcvXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbkxvY2spIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25Mb2NrO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25Mb2NrID0gdGhpcy5fY29ubmVjdCgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uTG9jaztcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIC8vIHJlbGVhc2VcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkxvY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHRvcG9sb2d5IHRvIG9wZW4gdGhlIGNvbm5lY3Rpb24sIG11c3QgYmUgbG9ja2VkIHRvIGF2b2lkIHRvcG9sb2d5IGxlYWtzIGluIGNvbmN1cnJlbmN5IHNjZW5hcmlvLlxuICAgICAqIExvY2tpbmcgaXMgZW5mb3JjZWQgYnkgdGhlIGNvbm5lY3QgbWV0aG9kLlxuICAgICAqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgX2Nvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLnRvcG9sb2d5ICYmIHRoaXMudG9wb2xvZ3kuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXNba09wdGlvbnNdO1xuICAgICAgICBpZiAob3B0aW9ucy50bHMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50bHNDQUZpbGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYSA/Pz0gYXdhaXQgZnNfMS5wcm9taXNlcy5yZWFkRmlsZShvcHRpb25zLnRsc0NBRmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMudGxzQ1JMRmlsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNybCA/Pz0gYXdhaXQgZnNfMS5wcm9taXNlcy5yZWFkRmlsZShvcHRpb25zLnRsc0NSTEZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnRsc0NlcnRpZmljYXRlS2V5RmlsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMua2V5IHx8ICFvcHRpb25zLmNlcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCBmc18xLnByb21pc2VzLnJlYWRGaWxlKG9wdGlvbnMudGxzQ2VydGlmaWNhdGVLZXlGaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5rZXkgPz89IGNvbnRlbnRzO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNlcnQgPz89IGNvbnRlbnRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc3J2SG9zdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbnN0IGhvc3RzID0gYXdhaXQgKDAsIGNvbm5lY3Rpb25fc3RyaW5nXzEucmVzb2x2ZVNSVlJlY29yZCkob3B0aW9ucyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtpbmRleCwgaG9zdF0gb2YgaG9zdHMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5ob3N0c1tpbmRleF0gPSBob3N0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEl0IGlzIGltcG9ydGFudCB0byBwZXJmb3JtIHZhbGlkYXRpb24gb2YgaG9zdHMgQUZURVIgU1JWIHJlc29sdXRpb24sIHRvIGNoZWNrIHRoZSByZWFsIGhvc3RuYW1lLFxuICAgICAgICAvLyBidXQgQkVGT1JFIHdlIGV2ZW4gYXR0ZW1wdCBjb25uZWN0aW5nIHdpdGggYSBwb3RlbnRpYWxseSBub3QgYWxsb3dlZCBob3N0bmFtZVxuICAgICAgICBpZiAob3B0aW9ucy5jcmVkZW50aWFscz8ubWVjaGFuaXNtID09PSBwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfT0lEQykge1xuICAgICAgICAgICAgY29uc3QgYWxsb3dlZEhvc3RzID0gb3B0aW9ucy5jcmVkZW50aWFscz8ubWVjaGFuaXNtUHJvcGVydGllcz8uQUxMT1dFRF9IT1NUUyB8fCBtb25nb19jcmVkZW50aWFsc18xLkRFRkFVTFRfQUxMT1dFRF9IT1NUUztcbiAgICAgICAgICAgIGNvbnN0IGlzU2VydmljZUF1dGggPSAhIW9wdGlvbnMuY3JlZGVudGlhbHM/Lm1lY2hhbmlzbVByb3BlcnRpZXM/LlBST1ZJREVSX05BTUU7XG4gICAgICAgICAgICBpZiAoIWlzU2VydmljZUF1dGgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGhvc3Qgb2Ygb3B0aW9ucy5ob3N0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISgwLCB1dGlsc18xLmhvc3RNYXRjaGVzV2lsZGNhcmRzKShob3N0LnRvSG9zdFBvcnQoKS5ob3N0LCBhbGxvd2VkSG9zdHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBIb3N0ICcke2hvc3R9JyBpcyBub3QgdmFsaWQgZm9yIE9JREMgYXV0aGVudGljYXRpb24gd2l0aCBBTExPV0VEX0hPU1RTIG9mICcke2FsbG93ZWRIb3N0cy5qb2luKCcsJyl9J2ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9wb2xvZ3kgPSBuZXcgdG9wb2xvZ3lfMS5Ub3BvbG9neSh0aGlzLCBvcHRpb25zLmhvc3RzLCBvcHRpb25zKTtcbiAgICAgICAgLy8gRXZlbnRzIGNhbiBiZSBlbWl0dGVkIGJlZm9yZSBpbml0aWFsaXphdGlvbiBpcyBjb21wbGV0ZSBzbyB3ZSBoYXZlIHRvXG4gICAgICAgIC8vIHNhdmUgdGhlIHJlZmVyZW5jZSB0byB0aGUgdG9wb2xvZ3kgb24gdGhlIGNsaWVudCBBU0FQIGlmIHRoZSBldmVudCBoYW5kbGVycyBuZWVkIHRvIGFjY2VzcyBpdFxuICAgICAgICB0aGlzLnRvcG9sb2d5Lm9uY2UodG9wb2xvZ3lfMS5Ub3BvbG9neS5PUEVOLCAoKSA9PiB0aGlzLmVtaXQoJ29wZW4nLCB0aGlzKSk7XG4gICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgY29uc3RhbnRzXzEuTU9OR09fQ0xJRU5UX0VWRU5UUykge1xuICAgICAgICAgICAgdGhpcy50b3BvbG9neS5vbihldmVudCwgKC4uLmFyZ3MpID0+IHRoaXMuZW1pdChldmVudCwgLi4uYXJncykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvcG9sb2d5Q29ubmVjdCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgKDAsIHV0aWxfMS5wcm9taXNpZnkpKGNhbGxiYWNrID0+IHRoaXMudG9wb2xvZ3k/LmNvbm5lY3Qob3B0aW9ucywgY2FsbGJhY2spKSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3BvbG9neT8uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b0VuY3J5cHRlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hdXRvRW5jcnlwdGVyPy5pbml0KCk7XG4gICAgICAgICAgICBhd2FpdCB0b3BvbG9neUNvbm5lY3QoKTtcbiAgICAgICAgICAgIGF3YWl0IG9wdGlvbnMuZW5jcnlwdGVyLmNvbm5lY3RJbnRlcm5hbENsaWVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdG9wb2xvZ3lDb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBjbGllbnQgYW5kIGl0cyB1bmRlcmx5aW5nIGNvbm5lY3Rpb25zXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm9yY2UgLSBGb3JjZSBjbG9zZSwgZW1pdHRpbmcgbm8gZXZlbnRzXG4gICAgICovXG4gICAgYXN5bmMgY2xvc2UoZm9yY2UgPSBmYWxzZSkge1xuICAgICAgICAvLyBUaGVyZSdzIG5vIHdheSB0byBzZXQgaGFzQmVlbkNsb3NlZCBiYWNrIHRvIGZhbHNlXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLnMsICdoYXNCZWVuQ2xvc2VkJywge1xuICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYWN0aXZlU2Vzc2lvbkVuZHMgPSBBcnJheS5mcm9tKHRoaXMucy5hY3RpdmVTZXNzaW9ucywgc2Vzc2lvbiA9PiBzZXNzaW9uLmVuZFNlc3Npb24oKSk7XG4gICAgICAgIHRoaXMucy5hY3RpdmVTZXNzaW9ucy5jbGVhcigpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhY3RpdmVTZXNzaW9uRW5kcyk7XG4gICAgICAgIGlmICh0aGlzLnRvcG9sb2d5ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSB3b3VsZCBhdHRlbXB0IHRvIHNlbGVjdCBhIHNlcnZlciBhbmQgZ2V0IG5vdGhpbmcgYmFjayB3ZSBzaG9ydCBjaXJjdWl0XG4gICAgICAgIC8vIHRvIGF2b2lkIHRoZSBzZXJ2ZXIgc2VsZWN0aW9uIHRpbWVvdXQuXG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gKDAsIHNlcnZlcl9zZWxlY3Rpb25fMS5yZWFkUHJlZmVyZW5jZVNlcnZlclNlbGVjdG9yKShyZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5UHJlZmVycmVkKTtcbiAgICAgICAgY29uc3QgdG9wb2xvZ3lEZXNjcmlwdGlvbiA9IHRoaXMudG9wb2xvZ3kuZGVzY3JpcHRpb247XG4gICAgICAgIGNvbnN0IHNlcnZlckRlc2NyaXB0aW9ucyA9IEFycmF5LmZyb20odG9wb2xvZ3lEZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKTtcbiAgICAgICAgY29uc3Qgc2VydmVycyA9IHNlbGVjdG9yKHRvcG9sb2d5RGVzY3JpcHRpb24sIHNlcnZlckRlc2NyaXB0aW9ucyk7XG4gICAgICAgIGlmIChzZXJ2ZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgZW5kU2Vzc2lvbnMgPSBBcnJheS5mcm9tKHRoaXMucy5zZXNzaW9uUG9vbC5zZXNzaW9ucywgKHsgaWQgfSkgPT4gaWQpO1xuICAgICAgICAgICAgaWYgKGVuZFNlc3Npb25zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGF3YWl0ICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHRoaXMsIG5ldyBydW5fY29tbWFuZF8xLlJ1bkFkbWluQ29tbWFuZE9wZXJhdGlvbih7IGVuZFNlc3Npb25zIH0sIHsgcmVhZFByZWZlcmVuY2U6IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnlQcmVmZXJyZWQsIG5vUmVzcG9uc2U6IHRydWUgfSkpLmNhdGNoKCgpID0+IG51bGwpOyAvLyBvdXRjb21lIGRvZXMgbm90IG1hdHRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjbGVhciBvdXQgcmVmZXJlbmNlcyB0byBvbGQgdG9wb2xvZ3lcbiAgICAgICAgY29uc3QgdG9wb2xvZ3kgPSB0aGlzLnRvcG9sb2d5O1xuICAgICAgICB0aGlzLnRvcG9sb2d5ID0gdW5kZWZpbmVkO1xuICAgICAgICB0b3BvbG9neS5jbG9zZSgpO1xuICAgICAgICBjb25zdCB7IGVuY3J5cHRlciB9ID0gdGhpc1trT3B0aW9uc107XG4gICAgICAgIGlmIChlbmNyeXB0ZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IGVuY3J5cHRlci5jbG9zZSh0aGlzLCBmb3JjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IERiIGluc3RhbmNlIHNoYXJpbmcgdGhlIGN1cnJlbnQgc29ja2V0IGNvbm5lY3Rpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRiTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBkYXRhYmFzZSB3ZSB3YW50IHRvIHVzZS4gSWYgbm90IHByb3ZpZGVkLCB1c2UgZGF0YWJhc2UgbmFtZSBmcm9tIGNvbm5lY3Rpb24gc3RyaW5nLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIERiIGNvbnN0cnVjdGlvblxuICAgICAqL1xuICAgIGRiKGRiTmFtZSwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgLy8gRGVmYXVsdCB0byBkYiBmcm9tIGNvbm5lY3Rpb24gc3RyaW5nIGlmIG5vdCBwcm92aWRlZFxuICAgICAgICBpZiAoIWRiTmFtZSkge1xuICAgICAgICAgICAgZGJOYW1lID0gdGhpcy5vcHRpb25zLmRiTmFtZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb3B5IHRoZSBvcHRpb25zIGFuZCBhZGQgb3V0IGludGVybmFsIG92ZXJyaWRlIG9mIHRoZSBub3Qgc2hhcmVkIGZsYWdcbiAgICAgICAgY29uc3QgZmluYWxPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpc1trT3B0aW9uc10sIG9wdGlvbnMpO1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGRiIG9iamVjdFxuICAgICAgICBjb25zdCBkYiA9IG5ldyBkYl8xLkRiKHRoaXMsIGRiTmFtZSwgZmluYWxPcHRpb25zKTtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBkYXRhYmFzZVxuICAgICAgICByZXR1cm4gZGI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gTW9uZ29EQiB1c2luZyBhIHVybFxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGUgcHJvZ3JhbW1hdGljYWxseSBwcm92aWRlZCBvcHRpb25zIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSBVUkkgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL2Nvbm5lY3Rpb24tc3RyaW5nL1xuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBjb25uZWN0KHVybCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBuZXcgdGhpcyh1cmwsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gY2xpZW50LmNvbm5lY3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBDbGllbnRTZXNzaW9uLiBXaGVuIHVzaW5nIHRoZSByZXR1cm5lZCBzZXNzaW9uIGluIGFuIG9wZXJhdGlvblxuICAgICAqIGEgY29ycmVzcG9uZGluZyBTZXJ2ZXJTZXNzaW9uIHdpbGwgYmUgY3JlYXRlZC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogQSBDbGllbnRTZXNzaW9uIGluc3RhbmNlIG1heSBvbmx5IGJlIHBhc3NlZCB0byBvcGVyYXRpb25zIGJlaW5nIHBlcmZvcm1lZCBvbiB0aGUgc2FtZVxuICAgICAqIE1vbmdvQ2xpZW50IGl0IHdhcyBzdGFydGVkIGZyb20uXG4gICAgICovXG4gICAgc3RhcnRTZXNzaW9uKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBzZXNzaW9uc18xLkNsaWVudFNlc3Npb24odGhpcywgdGhpcy5zLnNlc3Npb25Qb29sLCB7IGV4cGxpY2l0OiB0cnVlLCAuLi5vcHRpb25zIH0sIHRoaXNba09wdGlvbnNdKTtcbiAgICAgICAgdGhpcy5zLmFjdGl2ZVNlc3Npb25zLmFkZChzZXNzaW9uKTtcbiAgICAgICAgc2Vzc2lvbi5vbmNlKCdlbmRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucy5hY3RpdmVTZXNzaW9ucy5kZWxldGUoc2Vzc2lvbik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgYXN5bmMgd2l0aFNlc3Npb24ob3B0aW9uc09yRXhlY3V0b3IsIGV4ZWN1dG9yKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAvLyBBbHdheXMgZGVmaW5lIGFuIG93bmVyXG4gICAgICAgICAgICBvd25lcjogU3ltYm9sKCksXG4gICAgICAgICAgICAvLyBJZiBpdCdzIGFuIG9iamVjdCBpbmhlcml0IHRoZSBvcHRpb25zXG4gICAgICAgICAgICAuLi4odHlwZW9mIG9wdGlvbnNPckV4ZWN1dG9yID09PSAnb2JqZWN0JyA/IG9wdGlvbnNPckV4ZWN1dG9yIDoge30pXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHdpdGhTZXNzaW9uQ2FsbGJhY2sgPSB0eXBlb2Ygb3B0aW9uc09yRXhlY3V0b3IgPT09ICdmdW5jdGlvbicgPyBvcHRpb25zT3JFeGVjdXRvciA6IGV4ZWN1dG9yO1xuICAgICAgICBpZiAod2l0aFNlc3Npb25DYWxsYmFjayA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGNhbGxiYWNrIHBhcmFtZXRlcicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnN0YXJ0U2Vzc2lvbihvcHRpb25zKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB3aXRoU2Vzc2lvbkNhbGxiYWNrKHNlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZXNzaW9uLmVuZFNlc3Npb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBhcmUgbm90IGNvbmNlcm5lZCB3aXRoIGVycm9ycyBmcm9tIGVuZFNlc3Npb24oKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBDaGFuZ2UgU3RyZWFtLCB3YXRjaGluZyBmb3IgbmV3IGNoYW5nZXMgKGluc2VydGlvbnMsIHVwZGF0ZXMsXG4gICAgICogcmVwbGFjZW1lbnRzLCBkZWxldGlvbnMsIGFuZCBpbnZhbGlkYXRpb25zKSBpbiB0aGlzIGNsdXN0ZXIuIFdpbGwgaWdub3JlIGFsbFxuICAgICAqIGNoYW5nZXMgdG8gc3lzdGVtIGNvbGxlY3Rpb25zLCBhcyB3ZWxsIGFzIHRoZSBsb2NhbCwgYWRtaW4sIGFuZCBjb25maWcgZGF0YWJhc2VzLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiB3YXRjaCgpIGFjY2VwdHMgdHdvIGdlbmVyaWMgYXJndW1lbnRzIGZvciBkaXN0aW5jdCB1c2UgY2FzZXM6XG4gICAgICogLSBUaGUgZmlyc3QgaXMgdG8gcHJvdmlkZSB0aGUgc2NoZW1hIHRoYXQgbWF5IGJlIGRlZmluZWQgZm9yIGFsbCB0aGUgZGF0YSB3aXRoaW4gdGhlIGN1cnJlbnQgY2x1c3RlclxuICAgICAqIC0gVGhlIHNlY29uZCBpcyB0byBvdmVycmlkZSB0aGUgc2hhcGUgb2YgdGhlIGNoYW5nZSBzdHJlYW0gZG9jdW1lbnQgZW50aXJlbHksIGlmIGl0IGlzIG5vdCBwcm92aWRlZCB0aGUgdHlwZSB3aWxsIGRlZmF1bHQgdG8gQ2hhbmdlU3RyZWFtRG9jdW1lbnQgb2YgdGhlIGZpcnN0IGFyZ3VtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGlwZWxpbmUgLSBBbiBhcnJheSBvZiB7QGxpbmsgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvcmVmZXJlbmNlL29wZXJhdG9yL2FnZ3JlZ2F0aW9uLXBpcGVsaW5lL3xhZ2dyZWdhdGlvbiBwaXBlbGluZSBzdGFnZXN9IHRocm91Z2ggd2hpY2ggdG8gcGFzcyBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50cy4gVGhpcyBhbGxvd3MgZm9yIGZpbHRlcmluZyAodXNpbmcgJG1hdGNoKSBhbmQgbWFuaXB1bGF0aW5nIHRoZSBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY29tbWFuZFxuICAgICAqIEB0eXBlUGFyYW0gVFNjaGVtYSAtIFR5cGUgb2YgdGhlIGRhdGEgYmVpbmcgZGV0ZWN0ZWQgYnkgdGhlIGNoYW5nZSBzdHJlYW1cbiAgICAgKiBAdHlwZVBhcmFtIFRDaGFuZ2UgLSBUeXBlIG9mIHRoZSB3aG9sZSBjaGFuZ2Ugc3RyZWFtIGRvY3VtZW50IGVtaXR0ZWRcbiAgICAgKi9cbiAgICB3YXRjaChwaXBlbGluZSA9IFtdLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgLy8gQWxsb3cgb3B0aW9uYWxseSBub3Qgc3BlY2lmeWluZyBhIHBpcGVsaW5lXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwaXBlbGluZSkpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBwaXBlbGluZTtcbiAgICAgICAgICAgIHBpcGVsaW5lID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBjaGFuZ2Vfc3RyZWFtXzEuQ2hhbmdlU3RyZWFtKHRoaXMsIHBpcGVsaW5lLCAoMCwgdXRpbHNfMS5yZXNvbHZlT3B0aW9ucykodGhpcywgb3B0aW9ucykpO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29DbGllbnQgPSBNb25nb0NsaWVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvX2NsaWVudC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJNb25nb0NsaWVudCIsIlNlcnZlckFwaVZlcnNpb24iLCJmc18xIiwicmVxdWlyZSIsInV0aWxfMSIsImJzb25fMSIsImNoYW5nZV9zdHJlYW1fMSIsIm1vbmdvX2NyZWRlbnRpYWxzXzEiLCJwcm92aWRlcnNfMSIsImNvbm5lY3Rpb25fc3RyaW5nXzEiLCJjb25zdGFudHNfMSIsImRiXzEiLCJlcnJvcl8xIiwibW9uZ29fY2xpZW50X2F1dGhfcHJvdmlkZXJzXzEiLCJtb25nb19sb2dnZXJfMSIsIm1vbmdvX3R5cGVzXzEiLCJleGVjdXRlX29wZXJhdGlvbl8xIiwicnVuX2NvbW1hbmRfMSIsInJlYWRfcHJlZmVyZW5jZV8xIiwic2VydmVyX3NlbGVjdGlvbl8xIiwidG9wb2xvZ3lfMSIsInNlc3Npb25zXzEiLCJ1dGlsc18xIiwiZnJlZXplIiwidjEiLCJrT3B0aW9ucyIsIlN5bWJvbCIsIlR5cGVkRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJ1cmwiLCJvcHRpb25zIiwicGFyc2VPcHRpb25zIiwic2hvdWxkU2V0TG9nZ2VyIiwidmFsdWVzIiwibW9uZ29Mb2dnZXJPcHRpb25zIiwiY29tcG9uZW50U2V2ZXJpdGllcyIsInNvbWUiLCJTZXZlcml0eUxldmVsIiwiT0ZGIiwibW9uZ29Mb2dnZXIiLCJNb25nb0xvZ2dlciIsInVuZGVmaW5lZCIsImNsaWVudCIsInMiLCJic29uT3B0aW9ucyIsInJlc29sdmVCU09OT3B0aW9ucyIsIm5hbWVzcGFjZSIsIm5zIiwiaGFzQmVlbkNsb3NlZCIsInNlc3Npb25Qb29sIiwiU2VydmVyU2Vzc2lvblBvb2wiLCJhY3RpdmVTZXNzaW9ucyIsIlNldCIsImF1dGhQcm92aWRlcnMiLCJNb25nb0NsaWVudEF1dGhQcm92aWRlcnMiLCJyZWFkQ29uY2VybiIsIndyaXRlQ29uY2VybiIsInJlYWRQcmVmZXJlbmNlIiwiaXNNb25nb0NsaWVudCIsImNoZWNrRm9yTm9uR2VudWluZUhvc3RzIiwiZG9jdW1lbnREQkhvc3RuYW1lcyIsImhvc3RzIiwiZmlsdGVyIiwiaG9zdEFkZHJlc3MiLCJpc0hvc3RNYXRjaCIsIkRPQ1VNRU5UX0RCX0NIRUNLIiwiaG9zdCIsInNydkhvc3RJc0RvY3VtZW50REIiLCJzcnZIb3N0IiwiY29zbW9zREJIb3N0bmFtZXMiLCJDT1NNT1NfREJfQ0hFQ0siLCJzcnZIb3N0SXNDb3Ntb3NEQiIsImxlbmd0aCIsImluZm8iLCJET0NVTUVOVF9EQl9NU0ciLCJDT1NNT1NfREJfTVNHIiwic2VydmVyQXBpIiwibW9uaXRvckNvbW1hbmRzIiwiYXV0b0VuY3J5cHRlciIsImNvbm5lY3QiLCJjb25uZWN0aW9uTG9jayIsIl9jb25uZWN0IiwidG9wb2xvZ3kiLCJpc0Nvbm5lY3RlZCIsInRscyIsInRsc0NBRmlsZSIsImNhIiwicHJvbWlzZXMiLCJyZWFkRmlsZSIsInRsc0NSTEZpbGUiLCJjcmwiLCJ0bHNDZXJ0aWZpY2F0ZUtleUZpbGUiLCJrZXkiLCJjZXJ0IiwiY29udGVudHMiLCJyZXNvbHZlU1JWUmVjb3JkIiwiaW5kZXgiLCJlbnRyaWVzIiwiY3JlZGVudGlhbHMiLCJtZWNoYW5pc20iLCJBdXRoTWVjaGFuaXNtIiwiTU9OR09EQl9PSURDIiwiYWxsb3dlZEhvc3RzIiwibWVjaGFuaXNtUHJvcGVydGllcyIsIkFMTE9XRURfSE9TVFMiLCJERUZBVUxUX0FMTE9XRURfSE9TVFMiLCJpc1NlcnZpY2VBdXRoIiwiUFJPVklERVJfTkFNRSIsImhvc3RNYXRjaGVzV2lsZGNhcmRzIiwidG9Ib3N0UG9ydCIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJqb2luIiwiVG9wb2xvZ3kiLCJvbmNlIiwiT1BFTiIsImVtaXQiLCJldmVudCIsIk1PTkdPX0NMSUVOVF9FVkVOVFMiLCJvbiIsImFyZ3MiLCJ0b3BvbG9neUNvbm5lY3QiLCJwcm9taXNpZnkiLCJjYWxsYmFjayIsImVycm9yIiwiY2xvc2UiLCJpbml0IiwiZW5jcnlwdGVyIiwiY29ubmVjdEludGVybmFsQ2xpZW50IiwiZm9yY2UiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhY3RpdmVTZXNzaW9uRW5kcyIsIkFycmF5IiwiZnJvbSIsInNlc3Npb24iLCJlbmRTZXNzaW9uIiwiY2xlYXIiLCJQcm9taXNlIiwiYWxsIiwic2VsZWN0b3IiLCJyZWFkUHJlZmVyZW5jZVNlcnZlclNlbGVjdG9yIiwiUmVhZFByZWZlcmVuY2UiLCJwcmltYXJ5UHJlZmVycmVkIiwidG9wb2xvZ3lEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwic2VydmVyRGVzY3JpcHRpb25zIiwic2VydmVycyIsImVuZFNlc3Npb25zIiwic2Vzc2lvbnMiLCJpZCIsImV4ZWN1dGVPcGVyYXRpb24iLCJSdW5BZG1pbkNvbW1hbmRPcGVyYXRpb24iLCJub1Jlc3BvbnNlIiwiY2F0Y2giLCJkYiIsImRiTmFtZSIsImZpbmFsT3B0aW9ucyIsImFzc2lnbiIsIkRiIiwic3RhcnRTZXNzaW9uIiwiQ2xpZW50U2Vzc2lvbiIsImV4cGxpY2l0IiwiYWRkIiwiZGVsZXRlIiwid2l0aFNlc3Npb24iLCJvcHRpb25zT3JFeGVjdXRvciIsImV4ZWN1dG9yIiwib3duZXIiLCJ3aXRoU2Vzc2lvbkNhbGxiYWNrIiwid2F0Y2giLCJwaXBlbGluZSIsImlzQXJyYXkiLCJDaGFuZ2VTdHJlYW0iLCJyZXNvbHZlT3B0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/mongo_client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/mongo_client_auth_providers.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/mongo_client_auth_providers.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoClientAuthProviders = void 0;\nconst gssapi_1 = __webpack_require__(/*! ./cmap/auth/gssapi */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/gssapi.js\");\nconst mongocr_1 = __webpack_require__(/*! ./cmap/auth/mongocr */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongocr.js\");\nconst mongodb_aws_1 = __webpack_require__(/*! ./cmap/auth/mongodb_aws */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_aws.js\");\nconst mongodb_oidc_1 = __webpack_require__(/*! ./cmap/auth/mongodb_oidc */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/mongodb_oidc.js\");\nconst plain_1 = __webpack_require__(/*! ./cmap/auth/plain */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/plain.js\");\nconst providers_1 = __webpack_require__(/*! ./cmap/auth/providers */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/providers.js\");\nconst scram_1 = __webpack_require__(/*! ./cmap/auth/scram */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/scram.js\");\nconst x509_1 = __webpack_require__(/*! ./cmap/auth/x509 */ \"(ssr)/./node_modules/mongodb/lib/cmap/auth/x509.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/** @internal */ const AUTH_PROVIDERS = new Map([\n    [\n        providers_1.AuthMechanism.MONGODB_AWS,\n        ()=>new mongodb_aws_1.MongoDBAWS()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_CR,\n        ()=>new mongocr_1.MongoCR()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_GSSAPI,\n        ()=>new gssapi_1.GSSAPI()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_OIDC,\n        ()=>new mongodb_oidc_1.MongoDBOIDC()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_PLAIN,\n        ()=>new plain_1.Plain()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_SCRAM_SHA1,\n        ()=>new scram_1.ScramSHA1()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_SCRAM_SHA256,\n        ()=>new scram_1.ScramSHA256()\n    ],\n    [\n        providers_1.AuthMechanism.MONGODB_X509,\n        ()=>new x509_1.X509()\n    ]\n]);\n/**\n * Create a set of providers per client\n * to avoid sharing the provider's cache between different clients.\n * @internal\n */ class MongoClientAuthProviders {\n    constructor(){\n        this.existingProviders = new Map();\n    }\n    /**\n     * Get or create an authentication provider based on the provided mechanism.\n     * We don't want to create all providers at once, as some providers may not be used.\n     * @param name - The name of the provider to get or create.\n     * @returns The provider.\n     * @throws MongoInvalidArgumentError if the mechanism is not supported.\n     * @internal\n     */ getOrCreateProvider(name) {\n        const authProvider = this.existingProviders.get(name);\n        if (authProvider) {\n            return authProvider;\n        }\n        const provider = AUTH_PROVIDERS.get(name)?.();\n        if (!provider) {\n            throw new error_1.MongoInvalidArgumentError(`authMechanism ${name} not supported`);\n        }\n        this.existingProviders.set(name, provider);\n        return provider;\n    }\n}\nexports.MongoClientAuthProviders = MongoClientAuthProviders; //# sourceMappingURL=mongo_client_auth_providers.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvbW9uZ29fY2xpZW50X2F1dGhfcHJvdmlkZXJzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxnQ0FBZ0MsR0FBRyxLQUFLO0FBQ3hDLE1BQU1HLFdBQVdDLG1CQUFPQSxDQUFDLGdGQUFvQjtBQUM3QyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyxrRkFBcUI7QUFDL0MsTUFBTUUsZ0JBQWdCRixtQkFBT0EsQ0FBQywwRkFBeUI7QUFDdkQsTUFBTUcsaUJBQWlCSCxtQkFBT0EsQ0FBQyw0RkFBMEI7QUFDekQsTUFBTUksVUFBVUosbUJBQU9BLENBQUMsOEVBQW1CO0FBQzNDLE1BQU1LLGNBQWNMLG1CQUFPQSxDQUFDLHNGQUF1QjtBQUNuRCxNQUFNTSxVQUFVTixtQkFBT0EsQ0FBQyw4RUFBbUI7QUFDM0MsTUFBTU8sU0FBU1AsbUJBQU9BLENBQUMsNEVBQWtCO0FBQ3pDLE1BQU1RLFVBQVVSLG1CQUFPQSxDQUFDLDBEQUFTO0FBQ2pDLGNBQWMsR0FDZCxNQUFNUyxpQkFBaUIsSUFBSUMsSUFBSTtJQUMzQjtRQUFDTCxZQUFZTSxhQUFhLENBQUNDLFdBQVc7UUFBRSxJQUFNLElBQUlWLGNBQWNXLFVBQVU7S0FBRztJQUM3RTtRQUFDUixZQUFZTSxhQUFhLENBQUNHLFVBQVU7UUFBRSxJQUFNLElBQUliLFVBQVVjLE9BQU87S0FBRztJQUNyRTtRQUFDVixZQUFZTSxhQUFhLENBQUNLLGNBQWM7UUFBRSxJQUFNLElBQUlqQixTQUFTa0IsTUFBTTtLQUFHO0lBQ3ZFO1FBQUNaLFlBQVlNLGFBQWEsQ0FBQ08sWUFBWTtRQUFFLElBQU0sSUFBSWYsZUFBZWdCLFdBQVc7S0FBRztJQUNoRjtRQUFDZCxZQUFZTSxhQUFhLENBQUNTLGFBQWE7UUFBRSxJQUFNLElBQUloQixRQUFRaUIsS0FBSztLQUFHO0lBQ3BFO1FBQUNoQixZQUFZTSxhQUFhLENBQUNXLGtCQUFrQjtRQUFFLElBQU0sSUFBSWhCLFFBQVFpQixTQUFTO0tBQUc7SUFDN0U7UUFBQ2xCLFlBQVlNLGFBQWEsQ0FBQ2Esb0JBQW9CO1FBQUUsSUFBTSxJQUFJbEIsUUFBUW1CLFdBQVc7S0FBRztJQUNqRjtRQUFDcEIsWUFBWU0sYUFBYSxDQUFDZSxZQUFZO1FBQUUsSUFBTSxJQUFJbkIsT0FBT29CLElBQUk7S0FBRztDQUNwRTtBQUNEOzs7O0NBSUMsR0FDRCxNQUFNN0I7SUFDRjhCLGFBQWM7UUFDVixJQUFJLENBQUNDLGlCQUFpQixHQUFHLElBQUluQjtJQUNqQztJQUNBOzs7Ozs7O0tBT0MsR0FDRG9CLG9CQUFvQkMsSUFBSSxFQUFFO1FBQ3RCLE1BQU1DLGVBQWUsSUFBSSxDQUFDSCxpQkFBaUIsQ0FBQ0ksR0FBRyxDQUFDRjtRQUNoRCxJQUFJQyxjQUFjO1lBQ2QsT0FBT0E7UUFDWDtRQUNBLE1BQU1FLFdBQVd6QixlQUFld0IsR0FBRyxDQUFDRjtRQUNwQyxJQUFJLENBQUNHLFVBQVU7WUFDWCxNQUFNLElBQUkxQixRQUFRMkIseUJBQXlCLENBQUMsQ0FBQyxjQUFjLEVBQUVKLEtBQUssY0FBYyxDQUFDO1FBQ3JGO1FBQ0EsSUFBSSxDQUFDRixpQkFBaUIsQ0FBQ08sR0FBRyxDQUFDTCxNQUFNRztRQUNqQyxPQUFPQTtJQUNYO0FBQ0o7QUFDQXRDLGdDQUFnQyxHQUFHRSwwQkFDbkMsdURBQXVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9tb25nb19jbGllbnRfYXV0aF9wcm92aWRlcnMuanM/ZmJlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9uZ29DbGllbnRBdXRoUHJvdmlkZXJzID0gdm9pZCAwO1xuY29uc3QgZ3NzYXBpXzEgPSByZXF1aXJlKFwiLi9jbWFwL2F1dGgvZ3NzYXBpXCIpO1xuY29uc3QgbW9uZ29jcl8xID0gcmVxdWlyZShcIi4vY21hcC9hdXRoL21vbmdvY3JcIik7XG5jb25zdCBtb25nb2RiX2F3c18xID0gcmVxdWlyZShcIi4vY21hcC9hdXRoL21vbmdvZGJfYXdzXCIpO1xuY29uc3QgbW9uZ29kYl9vaWRjXzEgPSByZXF1aXJlKFwiLi9jbWFwL2F1dGgvbW9uZ29kYl9vaWRjXCIpO1xuY29uc3QgcGxhaW5fMSA9IHJlcXVpcmUoXCIuL2NtYXAvYXV0aC9wbGFpblwiKTtcbmNvbnN0IHByb3ZpZGVyc18xID0gcmVxdWlyZShcIi4vY21hcC9hdXRoL3Byb3ZpZGVyc1wiKTtcbmNvbnN0IHNjcmFtXzEgPSByZXF1aXJlKFwiLi9jbWFwL2F1dGgvc2NyYW1cIik7XG5jb25zdCB4NTA5XzEgPSByZXF1aXJlKFwiLi9jbWFwL2F1dGgveDUwOVwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IEFVVEhfUFJPVklERVJTID0gbmV3IE1hcChbXG4gICAgW3Byb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9BV1MsICgpID0+IG5ldyBtb25nb2RiX2F3c18xLk1vbmdvREJBV1MoKV0sXG4gICAgW3Byb3ZpZGVyc18xLkF1dGhNZWNoYW5pc20uTU9OR09EQl9DUiwgKCkgPT4gbmV3IG1vbmdvY3JfMS5Nb25nb0NSKCldLFxuICAgIFtwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfR1NTQVBJLCAoKSA9PiBuZXcgZ3NzYXBpXzEuR1NTQVBJKCldLFxuICAgIFtwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfT0lEQywgKCkgPT4gbmV3IG1vbmdvZGJfb2lkY18xLk1vbmdvREJPSURDKCldLFxuICAgIFtwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfUExBSU4sICgpID0+IG5ldyBwbGFpbl8xLlBsYWluKCldLFxuICAgIFtwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfU0NSQU1fU0hBMSwgKCkgPT4gbmV3IHNjcmFtXzEuU2NyYW1TSEExKCldLFxuICAgIFtwcm92aWRlcnNfMS5BdXRoTWVjaGFuaXNtLk1PTkdPREJfU0NSQU1fU0hBMjU2LCAoKSA9PiBuZXcgc2NyYW1fMS5TY3JhbVNIQTI1NigpXSxcbiAgICBbcHJvdmlkZXJzXzEuQXV0aE1lY2hhbmlzbS5NT05HT0RCX1g1MDksICgpID0+IG5ldyB4NTA5XzEuWDUwOSgpXVxuXSk7XG4vKipcbiAqIENyZWF0ZSBhIHNldCBvZiBwcm92aWRlcnMgcGVyIGNsaWVudFxuICogdG8gYXZvaWQgc2hhcmluZyB0aGUgcHJvdmlkZXIncyBjYWNoZSBiZXR3ZWVuIGRpZmZlcmVudCBjbGllbnRzLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIE1vbmdvQ2xpZW50QXV0aFByb3ZpZGVycyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZXhpc3RpbmdQcm92aWRlcnMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBvciBjcmVhdGUgYW4gYXV0aGVudGljYXRpb24gcHJvdmlkZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIG1lY2hhbmlzbS5cbiAgICAgKiBXZSBkb24ndCB3YW50IHRvIGNyZWF0ZSBhbGwgcHJvdmlkZXJzIGF0IG9uY2UsIGFzIHNvbWUgcHJvdmlkZXJzIG1heSBub3QgYmUgdXNlZC5cbiAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBwcm92aWRlciB0byBnZXQgb3IgY3JlYXRlLlxuICAgICAqIEByZXR1cm5zIFRoZSBwcm92aWRlci5cbiAgICAgKiBAdGhyb3dzIE1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IgaWYgdGhlIG1lY2hhbmlzbSBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldE9yQ3JlYXRlUHJvdmlkZXIobmFtZSkge1xuICAgICAgICBjb25zdCBhdXRoUHJvdmlkZXIgPSB0aGlzLmV4aXN0aW5nUHJvdmlkZXJzLmdldChuYW1lKTtcbiAgICAgICAgaWYgKGF1dGhQcm92aWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGF1dGhQcm92aWRlcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm92aWRlciA9IEFVVEhfUFJPVklERVJTLmdldChuYW1lKT8uKCk7XG4gICAgICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYGF1dGhNZWNoYW5pc20gJHtuYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5leGlzdGluZ1Byb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0NsaWVudEF1dGhQcm92aWRlcnMgPSBNb25nb0NsaWVudEF1dGhQcm92aWRlcnM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb25nb19jbGllbnRfYXV0aF9wcm92aWRlcnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTW9uZ29DbGllbnRBdXRoUHJvdmlkZXJzIiwiZ3NzYXBpXzEiLCJyZXF1aXJlIiwibW9uZ29jcl8xIiwibW9uZ29kYl9hd3NfMSIsIm1vbmdvZGJfb2lkY18xIiwicGxhaW5fMSIsInByb3ZpZGVyc18xIiwic2NyYW1fMSIsIng1MDlfMSIsImVycm9yXzEiLCJBVVRIX1BST1ZJREVSUyIsIk1hcCIsIkF1dGhNZWNoYW5pc20iLCJNT05HT0RCX0FXUyIsIk1vbmdvREJBV1MiLCJNT05HT0RCX0NSIiwiTW9uZ29DUiIsIk1PTkdPREJfR1NTQVBJIiwiR1NTQVBJIiwiTU9OR09EQl9PSURDIiwiTW9uZ29EQk9JREMiLCJNT05HT0RCX1BMQUlOIiwiUGxhaW4iLCJNT05HT0RCX1NDUkFNX1NIQTEiLCJTY3JhbVNIQTEiLCJNT05HT0RCX1NDUkFNX1NIQTI1NiIsIlNjcmFtU0hBMjU2IiwiTU9OR09EQl9YNTA5IiwiWDUwOSIsImNvbnN0cnVjdG9yIiwiZXhpc3RpbmdQcm92aWRlcnMiLCJnZXRPckNyZWF0ZVByb3ZpZGVyIiwibmFtZSIsImF1dGhQcm92aWRlciIsImdldCIsInByb3ZpZGVyIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/mongo_client_auth_providers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/mongo_logger.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/mongo_logger.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MongoLogger = exports.defaultLogTransform = exports.stringifyWithMaxLen = exports.createStdioLogger = exports.parseSeverityFromString = exports.MongoLoggableComponent = exports.SEVERITY_LEVEL_MAP = exports.DEFAULT_MAX_DOCUMENT_LENGTH = exports.SeverityLevel = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/** @internal */ exports.SeverityLevel = Object.freeze({\n    EMERGENCY: \"emergency\",\n    ALERT: \"alert\",\n    CRITICAL: \"critical\",\n    ERROR: \"error\",\n    WARNING: \"warn\",\n    NOTICE: \"notice\",\n    INFORMATIONAL: \"info\",\n    DEBUG: \"debug\",\n    TRACE: \"trace\",\n    OFF: \"off\"\n});\n/** @internal */ exports.DEFAULT_MAX_DOCUMENT_LENGTH = 1000;\n/** @internal */ class SeverityLevelMap extends Map {\n    constructor(entries){\n        const newEntries = [];\n        for (const [level, value] of entries){\n            newEntries.push([\n                value,\n                level\n            ]);\n        }\n        newEntries.push(...entries);\n        super(newEntries);\n    }\n    getNumericSeverityLevel(severity) {\n        return this.get(severity);\n    }\n    getSeverityLevelName(level) {\n        return this.get(level);\n    }\n}\n/** @internal */ exports.SEVERITY_LEVEL_MAP = new SeverityLevelMap([\n    [\n        exports.SeverityLevel.OFF,\n        -Infinity\n    ],\n    [\n        exports.SeverityLevel.EMERGENCY,\n        0\n    ],\n    [\n        exports.SeverityLevel.ALERT,\n        1\n    ],\n    [\n        exports.SeverityLevel.CRITICAL,\n        2\n    ],\n    [\n        exports.SeverityLevel.ERROR,\n        3\n    ],\n    [\n        exports.SeverityLevel.WARNING,\n        4\n    ],\n    [\n        exports.SeverityLevel.NOTICE,\n        5\n    ],\n    [\n        exports.SeverityLevel.INFORMATIONAL,\n        6\n    ],\n    [\n        exports.SeverityLevel.DEBUG,\n        7\n    ],\n    [\n        exports.SeverityLevel.TRACE,\n        8\n    ]\n]);\n/** @internal */ exports.MongoLoggableComponent = Object.freeze({\n    COMMAND: \"command\",\n    TOPOLOGY: \"topology\",\n    SERVER_SELECTION: \"serverSelection\",\n    CONNECTION: \"connection\",\n    CLIENT: \"client\"\n});\n/**\n * Parses a string as one of SeverityLevel\n * @internal\n *\n * @param s - the value to be parsed\n * @returns one of SeverityLevel if value can be parsed as such, otherwise null\n */ function parseSeverityFromString(s) {\n    const validSeverities = Object.values(exports.SeverityLevel);\n    const lowerSeverity = s?.toLowerCase();\n    if (lowerSeverity != null && validSeverities.includes(lowerSeverity)) {\n        return lowerSeverity;\n    }\n    return null;\n}\nexports.parseSeverityFromString = parseSeverityFromString;\n/** @internal */ function createStdioLogger(stream) {\n    return {\n        write: (0, util_1.promisify)((log, cb)=>{\n            const logLine = (0, util_1.inspect)(log, {\n                compact: true,\n                breakLength: Infinity\n            });\n            stream.write(`${logLine}\\n`, \"utf-8\", cb);\n            return;\n        })\n    };\n}\nexports.createStdioLogger = createStdioLogger;\n/**\n * resolves the MONGODB_LOG_PATH and mongodbLogPath options from the environment and the\n * mongo client options respectively. The mongodbLogPath can be either 'stdout', 'stderr', a NodeJS\n * Writable or an object which has a `write` method with the signature:\n * ```ts\n * write(log: Log): void\n * ```\n *\n * @returns the MongoDBLogWritable object to write logs to\n */ function resolveLogPath({ MONGODB_LOG_PATH }, { mongodbLogPath }) {\n    if (typeof mongodbLogPath === \"string\" && /^stderr$/i.test(mongodbLogPath)) {\n        return {\n            mongodbLogPath: createStdioLogger(process.stderr),\n            mongodbLogPathIsStdErr: true\n        };\n    }\n    if (typeof mongodbLogPath === \"string\" && /^stdout$/i.test(mongodbLogPath)) {\n        return {\n            mongodbLogPath: createStdioLogger(process.stdout),\n            mongodbLogPathIsStdErr: false\n        };\n    }\n    if (typeof mongodbLogPath === \"object\" && typeof mongodbLogPath?.write === \"function\") {\n        return {\n            mongodbLogPath: mongodbLogPath,\n            mongodbLogPathIsStdErr: false\n        };\n    }\n    if (MONGODB_LOG_PATH && /^stderr$/i.test(MONGODB_LOG_PATH)) {\n        return {\n            mongodbLogPath: createStdioLogger(process.stderr),\n            mongodbLogPathIsStdErr: true\n        };\n    }\n    if (MONGODB_LOG_PATH && /^stdout$/i.test(MONGODB_LOG_PATH)) {\n        return {\n            mongodbLogPath: createStdioLogger(process.stdout),\n            mongodbLogPathIsStdErr: false\n        };\n    }\n    return {\n        mongodbLogPath: createStdioLogger(process.stderr),\n        mongodbLogPathIsStdErr: true\n    };\n}\nfunction resolveSeverityConfiguration(clientOption, environmentOption, defaultSeverity) {\n    return parseSeverityFromString(clientOption) ?? parseSeverityFromString(environmentOption) ?? defaultSeverity;\n}\nfunction compareSeverity(s0, s1) {\n    const s0Num = exports.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(s0);\n    const s1Num = exports.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(s1);\n    return s0Num < s1Num ? -1 : s0Num > s1Num ? 1 : 0;\n}\n/** @internal */ function stringifyWithMaxLen(value, maxDocumentLength, options = {}) {\n    let strToTruncate = \"\";\n    if (typeof value === \"string\") {\n        strToTruncate = value;\n    } else if (typeof value === \"function\") {\n        strToTruncate = value.name;\n    } else {\n        try {\n            strToTruncate = bson_1.EJSON.stringify(value, options);\n        } catch (e) {\n            strToTruncate = `Extended JSON serialization failed with: ${e.message}`;\n        }\n    }\n    // handle truncation that occurs in the middle of multi-byte codepoints\n    if (maxDocumentLength !== 0 && strToTruncate.length > maxDocumentLength && strToTruncate.charCodeAt(maxDocumentLength - 1) !== strToTruncate.codePointAt(maxDocumentLength - 1)) {\n        maxDocumentLength--;\n        if (maxDocumentLength === 0) {\n            return \"\";\n        }\n    }\n    return maxDocumentLength !== 0 && strToTruncate.length > maxDocumentLength ? `${strToTruncate.slice(0, maxDocumentLength)}...` : strToTruncate;\n}\nexports.stringifyWithMaxLen = stringifyWithMaxLen;\nfunction isLogConvertible(obj) {\n    const objAsLogConvertible = obj;\n    // eslint-disable-next-line no-restricted-syntax\n    return objAsLogConvertible.toLog !== undefined && typeof objAsLogConvertible.toLog === \"function\";\n}\nfunction attachServerSelectionFields(log, serverSelectionEvent, maxDocumentLength = exports.DEFAULT_MAX_DOCUMENT_LENGTH) {\n    const { selector, operation, topologyDescription, message } = serverSelectionEvent;\n    log.selector = stringifyWithMaxLen(selector, maxDocumentLength);\n    log.operation = operation;\n    log.topologyDescription = stringifyWithMaxLen(topologyDescription, maxDocumentLength);\n    log.message = message;\n    return log;\n}\nfunction attachCommandFields(log, commandEvent) {\n    log.commandName = commandEvent.commandName;\n    log.requestId = commandEvent.requestId;\n    log.driverConnectionId = commandEvent.connectionId;\n    const { host, port } = utils_1.HostAddress.fromString(commandEvent.address).toHostPort();\n    log.serverHost = host;\n    log.serverPort = port;\n    if (commandEvent?.serviceId) {\n        log.serviceId = commandEvent.serviceId.toHexString();\n    }\n    log.databaseName = commandEvent.databaseName;\n    log.serverConnectionId = commandEvent.serverConnectionId;\n    return log;\n}\nfunction attachConnectionFields(log, event) {\n    const { host, port } = utils_1.HostAddress.fromString(event.address).toHostPort();\n    log.serverHost = host;\n    log.serverPort = port;\n    return log;\n}\nfunction attachSDAMFields(log, sdamEvent) {\n    log.topologyId = sdamEvent.topologyId;\n    return log;\n}\nfunction attachServerHeartbeatFields(log, serverHeartbeatEvent) {\n    const { awaited, connectionId } = serverHeartbeatEvent;\n    log.awaited = awaited;\n    log.driverConnectionId = serverHeartbeatEvent.connectionId;\n    const { host, port } = utils_1.HostAddress.fromString(connectionId).toHostPort();\n    log.serverHost = host;\n    log.serverPort = port;\n    return log;\n}\n/** @internal */ function defaultLogTransform(logObject, maxDocumentLength = exports.DEFAULT_MAX_DOCUMENT_LENGTH) {\n    let log = Object.create(null);\n    switch(logObject.name){\n        case constants_1.SERVER_SELECTION_STARTED:\n            log = attachServerSelectionFields(log, logObject, maxDocumentLength);\n            return log;\n        case constants_1.SERVER_SELECTION_FAILED:\n            log = attachServerSelectionFields(log, logObject, maxDocumentLength);\n            log.failure = logObject.failure?.message;\n            return log;\n        case constants_1.SERVER_SELECTION_SUCCEEDED:\n            log = attachServerSelectionFields(log, logObject, maxDocumentLength);\n            log.serverHost = logObject.serverHost;\n            log.serverPort = logObject.serverPort;\n            return log;\n        case constants_1.WAITING_FOR_SUITABLE_SERVER:\n            log = attachServerSelectionFields(log, logObject, maxDocumentLength);\n            log.remainingTimeMS = logObject.remainingTimeMS;\n            return log;\n        case constants_1.COMMAND_STARTED:\n            log = attachCommandFields(log, logObject);\n            log.message = \"Command started\";\n            log.command = stringifyWithMaxLen(logObject.command, maxDocumentLength, {\n                relaxed: true\n            });\n            log.databaseName = logObject.databaseName;\n            return log;\n        case constants_1.COMMAND_SUCCEEDED:\n            log = attachCommandFields(log, logObject);\n            log.message = \"Command succeeded\";\n            log.durationMS = logObject.duration;\n            log.reply = stringifyWithMaxLen(logObject.reply, maxDocumentLength, {\n                relaxed: true\n            });\n            return log;\n        case constants_1.COMMAND_FAILED:\n            log = attachCommandFields(log, logObject);\n            log.message = \"Command failed\";\n            log.durationMS = logObject.duration;\n            log.failure = logObject.failure?.message ?? \"(redacted)\";\n            return log;\n        case constants_1.CONNECTION_POOL_CREATED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection pool created\";\n            if (logObject.options) {\n                const { maxIdleTimeMS, minPoolSize, maxPoolSize, maxConnecting, waitQueueTimeoutMS } = logObject.options;\n                log = {\n                    ...log,\n                    maxIdleTimeMS,\n                    minPoolSize,\n                    maxPoolSize,\n                    maxConnecting,\n                    waitQueueTimeoutMS\n                };\n            }\n            return log;\n        case constants_1.CONNECTION_POOL_READY:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection pool ready\";\n            return log;\n        case constants_1.CONNECTION_POOL_CLEARED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection pool cleared\";\n            if (logObject.serviceId?._bsontype === \"ObjectId\") {\n                log.serviceId = logObject.serviceId?.toHexString();\n            }\n            return log;\n        case constants_1.CONNECTION_POOL_CLOSED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection pool closed\";\n            return log;\n        case constants_1.CONNECTION_CREATED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection created\";\n            log.driverConnectionId = logObject.connectionId;\n            return log;\n        case constants_1.CONNECTION_READY:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection ready\";\n            log.driverConnectionId = logObject.connectionId;\n            return log;\n        case constants_1.CONNECTION_CLOSED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection closed\";\n            log.driverConnectionId = logObject.connectionId;\n            switch(logObject.reason){\n                case \"stale\":\n                    log.reason = \"Connection became stale because the pool was cleared\";\n                    break;\n                case \"idle\":\n                    log.reason = \"Connection has been available but unused for longer than the configured max idle time\";\n                    break;\n                case \"error\":\n                    log.reason = \"An error occurred while using the connection\";\n                    if (logObject.error) {\n                        log.error = logObject.error;\n                    }\n                    break;\n                case \"poolClosed\":\n                    log.reason = \"Connection pool was closed\";\n                    break;\n                default:\n                    log.reason = `Unknown close reason: ${logObject.reason}`;\n            }\n            return log;\n        case constants_1.CONNECTION_CHECK_OUT_STARTED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection checkout started\";\n            return log;\n        case constants_1.CONNECTION_CHECK_OUT_FAILED:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection checkout failed\";\n            switch(logObject.reason){\n                case \"poolClosed\":\n                    log.reason = \"Connection pool was closed\";\n                    break;\n                case \"timeout\":\n                    log.reason = \"Wait queue timeout elapsed without a connection becoming available\";\n                    break;\n                case \"connectionError\":\n                    log.reason = \"An error occurred while trying to establish a new connection\";\n                    if (logObject.error) {\n                        log.error = logObject.error;\n                    }\n                    break;\n                default:\n                    log.reason = `Unknown close reason: ${logObject.reason}`;\n            }\n            return log;\n        case constants_1.CONNECTION_CHECKED_OUT:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection checked out\";\n            log.driverConnectionId = logObject.connectionId;\n            return log;\n        case constants_1.CONNECTION_CHECKED_IN:\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Connection checked in\";\n            log.driverConnectionId = logObject.connectionId;\n            return log;\n        case constants_1.SERVER_OPENING:\n            log = attachSDAMFields(log, logObject);\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Starting server monitoring\";\n            return log;\n        case constants_1.SERVER_CLOSED:\n            log = attachSDAMFields(log, logObject);\n            log = attachConnectionFields(log, logObject);\n            log.message = \"Stopped server monitoring\";\n            return log;\n        case constants_1.SERVER_HEARTBEAT_STARTED:\n            log = attachSDAMFields(log, logObject);\n            log = attachServerHeartbeatFields(log, logObject);\n            log.message = \"Server heartbeat started\";\n            return log;\n        case constants_1.SERVER_HEARTBEAT_SUCCEEDED:\n            log = attachSDAMFields(log, logObject);\n            log = attachServerHeartbeatFields(log, logObject);\n            log.message = \"Server heartbeat succeeded\";\n            log.durationMS = logObject.duration;\n            log.serverConnectionId = logObject.serverConnectionId;\n            log.reply = stringifyWithMaxLen(logObject.reply, maxDocumentLength, {\n                relaxed: true\n            });\n            return log;\n        case constants_1.SERVER_HEARTBEAT_FAILED:\n            log = attachSDAMFields(log, logObject);\n            log = attachServerHeartbeatFields(log, logObject);\n            log.message = \"Server heartbeat failed\";\n            log.durationMS = logObject.duration;\n            log.failure = logObject.failure?.message;\n            return log;\n        case constants_1.TOPOLOGY_OPENING:\n            log = attachSDAMFields(log, logObject);\n            log.message = \"Starting topology monitoring\";\n            return log;\n        case constants_1.TOPOLOGY_CLOSED:\n            log = attachSDAMFields(log, logObject);\n            log.message = \"Stopped topology monitoring\";\n            return log;\n        case constants_1.TOPOLOGY_DESCRIPTION_CHANGED:\n            log = attachSDAMFields(log, logObject);\n            log.message = \"Topology description changed\";\n            log.previousDescription = log.reply = stringifyWithMaxLen(logObject.previousDescription, maxDocumentLength);\n            log.newDescription = log.reply = stringifyWithMaxLen(logObject.newDescription, maxDocumentLength);\n            return log;\n        default:\n            for (const [key, value] of Object.entries(logObject)){\n                if (value != null) log[key] = value;\n            }\n    }\n    return log;\n}\nexports.defaultLogTransform = defaultLogTransform;\n/** @internal */ class MongoLogger {\n    constructor(options){\n        this.pendingLog = null;\n        /**\n         * This method should be used when logging errors that do not have a public driver API for\n         * reporting errors.\n         */ this.error = this.log.bind(this, \"error\");\n        /**\n         * This method should be used to log situations where undesirable application behaviour might\n         * occur. For example, failing to end sessions on `MongoClient.close`.\n         */ this.warn = this.log.bind(this, \"warn\");\n        /**\n         * This method should be used to report high-level information about normal driver behaviour.\n         * For example, the creation of a `MongoClient`.\n         */ this.info = this.log.bind(this, \"info\");\n        /**\n         * This method should be used to report information that would be helpful when debugging an\n         * application. For example, a command starting, succeeding or failing.\n         */ this.debug = this.log.bind(this, \"debug\");\n        /**\n         * This method should be used to report fine-grained details related to logic flow. For example,\n         * entering and exiting a function body.\n         */ this.trace = this.log.bind(this, \"trace\");\n        this.componentSeverities = options.componentSeverities;\n        this.maxDocumentLength = options.maxDocumentLength;\n        this.logDestination = options.logDestination;\n        this.logDestinationIsStdErr = options.logDestinationIsStdErr;\n        this.severities = this.createLoggingSeverities();\n    }\n    createLoggingSeverities() {\n        const severities = Object();\n        for (const component of Object.values(exports.MongoLoggableComponent)){\n            severities[component] = {};\n            for (const severityLevel of Object.values(exports.SeverityLevel)){\n                severities[component][severityLevel] = compareSeverity(severityLevel, this.componentSeverities[component]) <= 0;\n            }\n        }\n        return severities;\n    }\n    turnOffSeverities() {\n        for (const component of Object.values(exports.MongoLoggableComponent)){\n            this.componentSeverities[component] = exports.SeverityLevel.OFF;\n            for (const severityLevel of Object.values(exports.SeverityLevel)){\n                this.severities[component][severityLevel] = false;\n            }\n        }\n    }\n    logWriteFailureHandler(error) {\n        if (this.logDestinationIsStdErr) {\n            this.turnOffSeverities();\n            this.clearPendingLog();\n            return;\n        }\n        this.logDestination = createStdioLogger(process.stderr);\n        this.logDestinationIsStdErr = true;\n        this.clearPendingLog();\n        this.error(exports.MongoLoggableComponent.CLIENT, {\n            toLog: function() {\n                return {\n                    message: \"User input for mongodbLogPath is now invalid. Logging is halted.\",\n                    error: error.message\n                };\n            }\n        });\n        this.turnOffSeverities();\n        this.clearPendingLog();\n    }\n    clearPendingLog() {\n        this.pendingLog = null;\n    }\n    willLog(component, severity) {\n        if (severity === exports.SeverityLevel.OFF) return false;\n        return this.severities[component][severity];\n    }\n    log(severity, component, message) {\n        if (!this.willLog(component, severity)) return;\n        let logMessage = {\n            t: new Date(),\n            c: component,\n            s: severity\n        };\n        if (typeof message === \"string\") {\n            logMessage.message = message;\n        } else if (typeof message === \"object\") {\n            if (isLogConvertible(message)) {\n                logMessage = {\n                    ...logMessage,\n                    ...message.toLog()\n                };\n            } else {\n                logMessage = {\n                    ...logMessage,\n                    ...defaultLogTransform(message, this.maxDocumentLength)\n                };\n            }\n        }\n        if ((0, utils_1.isPromiseLike)(this.pendingLog)) {\n            this.pendingLog = this.pendingLog.then(()=>this.logDestination.write(logMessage)).then(this.clearPendingLog.bind(this), this.logWriteFailureHandler.bind(this));\n            return;\n        }\n        try {\n            const logResult = this.logDestination.write(logMessage);\n            if ((0, utils_1.isPromiseLike)(logResult)) {\n                this.pendingLog = logResult.then(this.clearPendingLog.bind(this), this.logWriteFailureHandler.bind(this));\n            }\n        } catch (error) {\n            this.logWriteFailureHandler(error);\n        }\n    }\n    /**\n     * Merges options set through environment variables and the MongoClient, preferring environment\n     * variables when both are set, and substituting defaults for values not set. Options set in\n     * constructor take precedence over both environment variables and MongoClient options.\n     *\n     * @remarks\n     * When parsing component severity levels, invalid values are treated as unset and replaced with\n     * the default severity.\n     *\n     * @param envOptions - options set for the logger from the environment\n     * @param clientOptions - options set for the logger in the MongoClient options\n     * @returns a MongoLoggerOptions object to be used when instantiating a new MongoLogger\n     */ static resolveOptions(envOptions, clientOptions) {\n        // client options take precedence over env options\n        const resolvedLogPath = resolveLogPath(envOptions, clientOptions);\n        const combinedOptions = {\n            ...envOptions,\n            ...clientOptions,\n            mongodbLogPath: resolvedLogPath.mongodbLogPath,\n            mongodbLogPathIsStdErr: resolvedLogPath.mongodbLogPathIsStdErr\n        };\n        const defaultSeverity = resolveSeverityConfiguration(combinedOptions.mongodbLogComponentSeverities?.default, combinedOptions.MONGODB_LOG_ALL, exports.SeverityLevel.OFF);\n        return {\n            componentSeverities: {\n                command: resolveSeverityConfiguration(combinedOptions.mongodbLogComponentSeverities?.command, combinedOptions.MONGODB_LOG_COMMAND, defaultSeverity),\n                topology: resolveSeverityConfiguration(combinedOptions.mongodbLogComponentSeverities?.topology, combinedOptions.MONGODB_LOG_TOPOLOGY, defaultSeverity),\n                serverSelection: resolveSeverityConfiguration(combinedOptions.mongodbLogComponentSeverities?.serverSelection, combinedOptions.MONGODB_LOG_SERVER_SELECTION, defaultSeverity),\n                connection: resolveSeverityConfiguration(combinedOptions.mongodbLogComponentSeverities?.connection, combinedOptions.MONGODB_LOG_CONNECTION, defaultSeverity),\n                client: resolveSeverityConfiguration(combinedOptions.mongodbLogComponentSeverities?.client, combinedOptions.MONGODB_LOG_CLIENT, defaultSeverity),\n                default: defaultSeverity\n            },\n            maxDocumentLength: combinedOptions.mongodbLogMaxDocumentLength ?? (0, utils_1.parseUnsignedInteger)(combinedOptions.MONGODB_LOG_MAX_DOCUMENT_LENGTH) ?? 1000,\n            logDestination: combinedOptions.mongodbLogPath,\n            logDestinationIsStdErr: combinedOptions.mongodbLogPathIsStdErr\n        };\n    }\n}\nexports.MongoLogger = MongoLogger; //# sourceMappingURL=mongo_logger.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvbW9uZ29fbG9nZ2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0EsMkJBQTJCLEdBQUdBLDJCQUEyQixHQUFHQSx5QkFBeUIsR0FBR0EsK0JBQStCLEdBQUdBLDhCQUE4QixHQUFHQSwwQkFBMEIsR0FBR0EsbUNBQW1DLEdBQUdBLHFCQUFxQixHQUFHLEtBQUs7QUFDalIsTUFBTVcsU0FBU0MsbUJBQU9BLENBQUMsa0JBQU07QUFDN0IsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUMsd0RBQVE7QUFDL0IsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsa0VBQWE7QUFDekMsTUFBTUcsVUFBVUgsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsY0FBYyxHQUNkWixxQkFBcUIsR0FBR0YsT0FBT2tCLE1BQU0sQ0FBQztJQUNsQ0MsV0FBVztJQUNYQyxPQUFPO0lBQ1BDLFVBQVU7SUFDVkMsT0FBTztJQUNQQyxTQUFTO0lBQ1RDLFFBQVE7SUFDUkMsZUFBZTtJQUNmQyxPQUFPO0lBQ1BDLE9BQU87SUFDUEMsS0FBSztBQUNUO0FBQ0EsY0FBYyxHQUNkMUIsbUNBQW1DLEdBQUc7QUFDdEMsY0FBYyxHQUNkLE1BQU0yQix5QkFBeUJDO0lBQzNCQyxZQUFZQyxPQUFPLENBQUU7UUFDakIsTUFBTUMsYUFBYSxFQUFFO1FBQ3JCLEtBQUssTUFBTSxDQUFDQyxPQUFPL0IsTUFBTSxJQUFJNkIsUUFBUztZQUNsQ0MsV0FBV0UsSUFBSSxDQUFDO2dCQUFDaEM7Z0JBQU8rQjthQUFNO1FBQ2xDO1FBQ0FELFdBQVdFLElBQUksSUFBSUg7UUFDbkIsS0FBSyxDQUFDQztJQUNWO0lBQ0FHLHdCQUF3QkMsUUFBUSxFQUFFO1FBQzlCLE9BQU8sSUFBSSxDQUFDQyxHQUFHLENBQUNEO0lBQ3BCO0lBQ0FFLHFCQUFxQkwsS0FBSyxFQUFFO1FBQ3hC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QTZCbUksZ0JBQWdCQyw2QkFBNkIsRUFBRU0saUJBQWlCUCxnQkFBZ0JRLDRCQUE0QixFQUFFeEk7Z0JBQzVKeUksWUFBWTVJLDZCQUE2Qm1JLGdCQUFnQkMsNkJBQTZCLEVBQUVRLFlBQVlULGdCQUFnQlUsc0JBQXNCLEVBQUUxSTtnQkFDNUkySSxRQUFROUksNkJBQTZCbUksZ0JBQWdCQyw2QkFBNkIsRUFBRVUsUUFBUVgsZ0JBQWdCWSxrQkFBa0IsRUFBRTVJO2dCQUNoSWtJLFNBQVNsSTtZQUNiO1lBQ0FNLG1CQUFtQjBILGdCQUFnQmEsMkJBQTJCLElBQzFELENBQUMsR0FBR3BNLFFBQVFxTSxvQkFBb0IsRUFBRWQsZ0JBQWdCZSwrQkFBK0IsS0FDakY7WUFDSnBDLGdCQUFnQnFCLGdCQUFnQnpJLGNBQWM7WUFDOUNxSCx3QkFBd0JvQixnQkFBZ0JySSxzQkFBc0I7UUFDbEU7SUFDSjtBQUNKO0FBQ0FqRSxtQkFBbUIsR0FBR0UsYUFDdEIsd0NBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9tb25nb19sb2dnZXIuanM/OTBmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9uZ29Mb2dnZXIgPSBleHBvcnRzLmRlZmF1bHRMb2dUcmFuc2Zvcm0gPSBleHBvcnRzLnN0cmluZ2lmeVdpdGhNYXhMZW4gPSBleHBvcnRzLmNyZWF0ZVN0ZGlvTG9nZ2VyID0gZXhwb3J0cy5wYXJzZVNldmVyaXR5RnJvbVN0cmluZyA9IGV4cG9ydHMuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudCA9IGV4cG9ydHMuU0VWRVJJVFlfTEVWRUxfTUFQID0gZXhwb3J0cy5ERUZBVUxUX01BWF9ET0NVTUVOVF9MRU5HVEggPSBleHBvcnRzLlNldmVyaXR5TGV2ZWwgPSB2b2lkIDA7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwidXRpbFwiKTtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuL2Jzb25cIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuU2V2ZXJpdHlMZXZlbCA9IE9iamVjdC5mcmVlemUoe1xuICAgIEVNRVJHRU5DWTogJ2VtZXJnZW5jeScsXG4gICAgQUxFUlQ6ICdhbGVydCcsXG4gICAgQ1JJVElDQUw6ICdjcml0aWNhbCcsXG4gICAgRVJST1I6ICdlcnJvcicsXG4gICAgV0FSTklORzogJ3dhcm4nLFxuICAgIE5PVElDRTogJ25vdGljZScsXG4gICAgSU5GT1JNQVRJT05BTDogJ2luZm8nLFxuICAgIERFQlVHOiAnZGVidWcnLFxuICAgIFRSQUNFOiAndHJhY2UnLFxuICAgIE9GRjogJ29mZidcbn0pO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5ERUZBVUxUX01BWF9ET0NVTUVOVF9MRU5HVEggPSAxMDAwO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgU2V2ZXJpdHlMZXZlbE1hcCBleHRlbmRzIE1hcCB7XG4gICAgY29uc3RydWN0b3IoZW50cmllcykge1xuICAgICAgICBjb25zdCBuZXdFbnRyaWVzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgW2xldmVsLCB2YWx1ZV0gb2YgZW50cmllcykge1xuICAgICAgICAgICAgbmV3RW50cmllcy5wdXNoKFt2YWx1ZSwgbGV2ZWxdKTtcbiAgICAgICAgfVxuICAgICAgICBuZXdFbnRyaWVzLnB1c2goLi4uZW50cmllcyk7XG4gICAgICAgIHN1cGVyKG5ld0VudHJpZXMpO1xuICAgIH1cbiAgICBnZXROdW1lcmljU2V2ZXJpdHlMZXZlbChzZXZlcml0eSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoc2V2ZXJpdHkpO1xuICAgIH1cbiAgICBnZXRTZXZlcml0eUxldmVsTmFtZShsZXZlbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQobGV2ZWwpO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuU0VWRVJJVFlfTEVWRUxfTUFQID0gbmV3IFNldmVyaXR5TGV2ZWxNYXAoW1xuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuT0ZGLCAtSW5maW5pdHldLFxuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuRU1FUkdFTkNZLCAwXSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLkFMRVJULCAxXSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLkNSSVRJQ0FMLCAyXSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLkVSUk9SLCAzXSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLldBUk5JTkcsIDRdLFxuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuTk9USUNFLCA1XSxcbiAgICBbZXhwb3J0cy5TZXZlcml0eUxldmVsLklORk9STUFUSU9OQUwsIDZdLFxuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuREVCVUcsIDddLFxuICAgIFtleHBvcnRzLlNldmVyaXR5TGV2ZWwuVFJBQ0UsIDhdXG5dKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudCA9IE9iamVjdC5mcmVlemUoe1xuICAgIENPTU1BTkQ6ICdjb21tYW5kJyxcbiAgICBUT1BPTE9HWTogJ3RvcG9sb2d5JyxcbiAgICBTRVJWRVJfU0VMRUNUSU9OOiAnc2VydmVyU2VsZWN0aW9uJyxcbiAgICBDT05ORUNUSU9OOiAnY29ubmVjdGlvbicsXG4gICAgQ0xJRU5UOiAnY2xpZW50J1xufSk7XG4vKipcbiAqIFBhcnNlcyBhIHN0cmluZyBhcyBvbmUgb2YgU2V2ZXJpdHlMZXZlbFxuICogQGludGVybmFsXG4gKlxuICogQHBhcmFtIHMgLSB0aGUgdmFsdWUgdG8gYmUgcGFyc2VkXG4gKiBAcmV0dXJucyBvbmUgb2YgU2V2ZXJpdHlMZXZlbCBpZiB2YWx1ZSBjYW4gYmUgcGFyc2VkIGFzIHN1Y2gsIG90aGVyd2lzZSBudWxsXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2V2ZXJpdHlGcm9tU3RyaW5nKHMpIHtcbiAgICBjb25zdCB2YWxpZFNldmVyaXRpZXMgPSBPYmplY3QudmFsdWVzKGV4cG9ydHMuU2V2ZXJpdHlMZXZlbCk7XG4gICAgY29uc3QgbG93ZXJTZXZlcml0eSA9IHM/LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxvd2VyU2V2ZXJpdHkgIT0gbnVsbCAmJiB2YWxpZFNldmVyaXRpZXMuaW5jbHVkZXMobG93ZXJTZXZlcml0eSkpIHtcbiAgICAgICAgcmV0dXJuIGxvd2VyU2V2ZXJpdHk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZXhwb3J0cy5wYXJzZVNldmVyaXR5RnJvbVN0cmluZyA9IHBhcnNlU2V2ZXJpdHlGcm9tU3RyaW5nO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gY3JlYXRlU3RkaW9Mb2dnZXIoc3RyZWFtKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6ICgwLCB1dGlsXzEucHJvbWlzaWZ5KSgobG9nLCBjYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbG9nTGluZSA9ICgwLCB1dGlsXzEuaW5zcGVjdCkobG9nLCB7IGNvbXBhY3Q6IHRydWUsIGJyZWFrTGVuZ3RoOiBJbmZpbml0eSB9KTtcbiAgICAgICAgICAgIHN0cmVhbS53cml0ZShgJHtsb2dMaW5lfVxcbmAsICd1dGYtOCcsIGNiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSlcbiAgICB9O1xufVxuZXhwb3J0cy5jcmVhdGVTdGRpb0xvZ2dlciA9IGNyZWF0ZVN0ZGlvTG9nZ2VyO1xuLyoqXG4gKiByZXNvbHZlcyB0aGUgTU9OR09EQl9MT0dfUEFUSCBhbmQgbW9uZ29kYkxvZ1BhdGggb3B0aW9ucyBmcm9tIHRoZSBlbnZpcm9ubWVudCBhbmQgdGhlXG4gKiBtb25nbyBjbGllbnQgb3B0aW9ucyByZXNwZWN0aXZlbHkuIFRoZSBtb25nb2RiTG9nUGF0aCBjYW4gYmUgZWl0aGVyICdzdGRvdXQnLCAnc3RkZXJyJywgYSBOb2RlSlNcbiAqIFdyaXRhYmxlIG9yIGFuIG9iamVjdCB3aGljaCBoYXMgYSBgd3JpdGVgIG1ldGhvZCB3aXRoIHRoZSBzaWduYXR1cmU6XG4gKiBgYGB0c1xuICogd3JpdGUobG9nOiBMb2cpOiB2b2lkXG4gKiBgYGBcbiAqXG4gKiBAcmV0dXJucyB0aGUgTW9uZ29EQkxvZ1dyaXRhYmxlIG9iamVjdCB0byB3cml0ZSBsb2dzIHRvXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVMb2dQYXRoKHsgTU9OR09EQl9MT0dfUEFUSCB9LCB7IG1vbmdvZGJMb2dQYXRoIH0pIHtcbiAgICBpZiAodHlwZW9mIG1vbmdvZGJMb2dQYXRoID09PSAnc3RyaW5nJyAmJiAvXnN0ZGVyciQvaS50ZXN0KG1vbmdvZGJMb2dQYXRoKSkge1xuICAgICAgICByZXR1cm4geyBtb25nb2RiTG9nUGF0aDogY3JlYXRlU3RkaW9Mb2dnZXIocHJvY2Vzcy5zdGRlcnIpLCBtb25nb2RiTG9nUGF0aElzU3RkRXJyOiB0cnVlIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbW9uZ29kYkxvZ1BhdGggPT09ICdzdHJpbmcnICYmIC9ec3Rkb3V0JC9pLnRlc3QobW9uZ29kYkxvZ1BhdGgpKSB7XG4gICAgICAgIHJldHVybiB7IG1vbmdvZGJMb2dQYXRoOiBjcmVhdGVTdGRpb0xvZ2dlcihwcm9jZXNzLnN0ZG91dCksIG1vbmdvZGJMb2dQYXRoSXNTdGRFcnI6IGZhbHNlIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbW9uZ29kYkxvZ1BhdGggPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb25nb2RiTG9nUGF0aD8ud3JpdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHsgbW9uZ29kYkxvZ1BhdGg6IG1vbmdvZGJMb2dQYXRoLCBtb25nb2RiTG9nUGF0aElzU3RkRXJyOiBmYWxzZSB9O1xuICAgIH1cbiAgICBpZiAoTU9OR09EQl9MT0dfUEFUSCAmJiAvXnN0ZGVyciQvaS50ZXN0KE1PTkdPREJfTE9HX1BBVEgpKSB7XG4gICAgICAgIHJldHVybiB7IG1vbmdvZGJMb2dQYXRoOiBjcmVhdGVTdGRpb0xvZ2dlcihwcm9jZXNzLnN0ZGVyciksIG1vbmdvZGJMb2dQYXRoSXNTdGRFcnI6IHRydWUgfTtcbiAgICB9XG4gICAgaWYgKE1PTkdPREJfTE9HX1BBVEggJiYgL15zdGRvdXQkL2kudGVzdChNT05HT0RCX0xPR19QQVRIKSkge1xuICAgICAgICByZXR1cm4geyBtb25nb2RiTG9nUGF0aDogY3JlYXRlU3RkaW9Mb2dnZXIocHJvY2Vzcy5zdGRvdXQpLCBtb25nb2RiTG9nUGF0aElzU3RkRXJyOiBmYWxzZSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBtb25nb2RiTG9nUGF0aDogY3JlYXRlU3RkaW9Mb2dnZXIocHJvY2Vzcy5zdGRlcnIpLCBtb25nb2RiTG9nUGF0aElzU3RkRXJyOiB0cnVlIH07XG59XG5mdW5jdGlvbiByZXNvbHZlU2V2ZXJpdHlDb25maWd1cmF0aW9uKGNsaWVudE9wdGlvbiwgZW52aXJvbm1lbnRPcHRpb24sIGRlZmF1bHRTZXZlcml0eSkge1xuICAgIHJldHVybiAocGFyc2VTZXZlcml0eUZyb21TdHJpbmcoY2xpZW50T3B0aW9uKSA/P1xuICAgICAgICBwYXJzZVNldmVyaXR5RnJvbVN0cmluZyhlbnZpcm9ubWVudE9wdGlvbikgPz9cbiAgICAgICAgZGVmYXVsdFNldmVyaXR5KTtcbn1cbmZ1bmN0aW9uIGNvbXBhcmVTZXZlcml0eShzMCwgczEpIHtcbiAgICBjb25zdCBzME51bSA9IGV4cG9ydHMuU0VWRVJJVFlfTEVWRUxfTUFQLmdldE51bWVyaWNTZXZlcml0eUxldmVsKHMwKTtcbiAgICBjb25zdCBzMU51bSA9IGV4cG9ydHMuU0VWRVJJVFlfTEVWRUxfTUFQLmdldE51bWVyaWNTZXZlcml0eUxldmVsKHMxKTtcbiAgICByZXR1cm4gczBOdW0gPCBzMU51bSA/IC0xIDogczBOdW0gPiBzMU51bSA/IDEgOiAwO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5V2l0aE1heExlbih2YWx1ZSwgbWF4RG9jdW1lbnRMZW5ndGgsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBzdHJUb1RydW5jYXRlID0gJyc7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc3RyVG9UcnVuY2F0ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc3RyVG9UcnVuY2F0ZSA9IHZhbHVlLm5hbWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3RyVG9UcnVuY2F0ZSA9IGJzb25fMS5FSlNPTi5zdHJpbmdpZnkodmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBzdHJUb1RydW5jYXRlID0gYEV4dGVuZGVkIEpTT04gc2VyaWFsaXphdGlvbiBmYWlsZWQgd2l0aDogJHtlLm1lc3NhZ2V9YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBoYW5kbGUgdHJ1bmNhdGlvbiB0aGF0IG9jY3VycyBpbiB0aGUgbWlkZGxlIG9mIG11bHRpLWJ5dGUgY29kZXBvaW50c1xuICAgIGlmIChtYXhEb2N1bWVudExlbmd0aCAhPT0gMCAmJlxuICAgICAgICBzdHJUb1RydW5jYXRlLmxlbmd0aCA+IG1heERvY3VtZW50TGVuZ3RoICYmXG4gICAgICAgIHN0clRvVHJ1bmNhdGUuY2hhckNvZGVBdChtYXhEb2N1bWVudExlbmd0aCAtIDEpICE9PVxuICAgICAgICAgICAgc3RyVG9UcnVuY2F0ZS5jb2RlUG9pbnRBdChtYXhEb2N1bWVudExlbmd0aCAtIDEpKSB7XG4gICAgICAgIG1heERvY3VtZW50TGVuZ3RoLS07XG4gICAgICAgIGlmIChtYXhEb2N1bWVudExlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXhEb2N1bWVudExlbmd0aCAhPT0gMCAmJiBzdHJUb1RydW5jYXRlLmxlbmd0aCA+IG1heERvY3VtZW50TGVuZ3RoXG4gICAgICAgID8gYCR7c3RyVG9UcnVuY2F0ZS5zbGljZSgwLCBtYXhEb2N1bWVudExlbmd0aCl9Li4uYFxuICAgICAgICA6IHN0clRvVHJ1bmNhdGU7XG59XG5leHBvcnRzLnN0cmluZ2lmeVdpdGhNYXhMZW4gPSBzdHJpbmdpZnlXaXRoTWF4TGVuO1xuZnVuY3Rpb24gaXNMb2dDb252ZXJ0aWJsZShvYmopIHtcbiAgICBjb25zdCBvYmpBc0xvZ0NvbnZlcnRpYmxlID0gb2JqO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgIHJldHVybiBvYmpBc0xvZ0NvbnZlcnRpYmxlLnRvTG9nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9iakFzTG9nQ29udmVydGlibGUudG9Mb2cgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBhdHRhY2hTZXJ2ZXJTZWxlY3Rpb25GaWVsZHMobG9nLCBzZXJ2ZXJTZWxlY3Rpb25FdmVudCwgbWF4RG9jdW1lbnRMZW5ndGggPSBleHBvcnRzLkRFRkFVTFRfTUFYX0RPQ1VNRU5UX0xFTkdUSCkge1xuICAgIGNvbnN0IHsgc2VsZWN0b3IsIG9wZXJhdGlvbiwgdG9wb2xvZ3lEZXNjcmlwdGlvbiwgbWVzc2FnZSB9ID0gc2VydmVyU2VsZWN0aW9uRXZlbnQ7XG4gICAgbG9nLnNlbGVjdG9yID0gc3RyaW5naWZ5V2l0aE1heExlbihzZWxlY3RvciwgbWF4RG9jdW1lbnRMZW5ndGgpO1xuICAgIGxvZy5vcGVyYXRpb24gPSBvcGVyYXRpb247XG4gICAgbG9nLnRvcG9sb2d5RGVzY3JpcHRpb24gPSBzdHJpbmdpZnlXaXRoTWF4TGVuKHRvcG9sb2d5RGVzY3JpcHRpb24sIG1heERvY3VtZW50TGVuZ3RoKTtcbiAgICBsb2cubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgcmV0dXJuIGxvZztcbn1cbmZ1bmN0aW9uIGF0dGFjaENvbW1hbmRGaWVsZHMobG9nLCBjb21tYW5kRXZlbnQpIHtcbiAgICBsb2cuY29tbWFuZE5hbWUgPSBjb21tYW5kRXZlbnQuY29tbWFuZE5hbWU7XG4gICAgbG9nLnJlcXVlc3RJZCA9IGNvbW1hbmRFdmVudC5yZXF1ZXN0SWQ7XG4gICAgbG9nLmRyaXZlckNvbm5lY3Rpb25JZCA9IGNvbW1hbmRFdmVudC5jb25uZWN0aW9uSWQ7XG4gICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSB1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcoY29tbWFuZEV2ZW50LmFkZHJlc3MpLnRvSG9zdFBvcnQoKTtcbiAgICBsb2cuc2VydmVySG9zdCA9IGhvc3Q7XG4gICAgbG9nLnNlcnZlclBvcnQgPSBwb3J0O1xuICAgIGlmIChjb21tYW5kRXZlbnQ/LnNlcnZpY2VJZCkge1xuICAgICAgICBsb2cuc2VydmljZUlkID0gY29tbWFuZEV2ZW50LnNlcnZpY2VJZC50b0hleFN0cmluZygpO1xuICAgIH1cbiAgICBsb2cuZGF0YWJhc2VOYW1lID0gY29tbWFuZEV2ZW50LmRhdGFiYXNlTmFtZTtcbiAgICBsb2cuc2VydmVyQ29ubmVjdGlvbklkID0gY29tbWFuZEV2ZW50LnNlcnZlckNvbm5lY3Rpb25JZDtcbiAgICByZXR1cm4gbG9nO1xufVxuZnVuY3Rpb24gYXR0YWNoQ29ubmVjdGlvbkZpZWxkcyhsb2csIGV2ZW50KSB7XG4gICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSB1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcoZXZlbnQuYWRkcmVzcykudG9Ib3N0UG9ydCgpO1xuICAgIGxvZy5zZXJ2ZXJIb3N0ID0gaG9zdDtcbiAgICBsb2cuc2VydmVyUG9ydCA9IHBvcnQ7XG4gICAgcmV0dXJuIGxvZztcbn1cbmZ1bmN0aW9uIGF0dGFjaFNEQU1GaWVsZHMobG9nLCBzZGFtRXZlbnQpIHtcbiAgICBsb2cudG9wb2xvZ3lJZCA9IHNkYW1FdmVudC50b3BvbG9neUlkO1xuICAgIHJldHVybiBsb2c7XG59XG5mdW5jdGlvbiBhdHRhY2hTZXJ2ZXJIZWFydGJlYXRGaWVsZHMobG9nLCBzZXJ2ZXJIZWFydGJlYXRFdmVudCkge1xuICAgIGNvbnN0IHsgYXdhaXRlZCwgY29ubmVjdGlvbklkIH0gPSBzZXJ2ZXJIZWFydGJlYXRFdmVudDtcbiAgICBsb2cuYXdhaXRlZCA9IGF3YWl0ZWQ7XG4gICAgbG9nLmRyaXZlckNvbm5lY3Rpb25JZCA9IHNlcnZlckhlYXJ0YmVhdEV2ZW50LmNvbm5lY3Rpb25JZDtcbiAgICBjb25zdCB7IGhvc3QsIHBvcnQgfSA9IHV0aWxzXzEuSG9zdEFkZHJlc3MuZnJvbVN0cmluZyhjb25uZWN0aW9uSWQpLnRvSG9zdFBvcnQoKTtcbiAgICBsb2cuc2VydmVySG9zdCA9IGhvc3Q7XG4gICAgbG9nLnNlcnZlclBvcnQgPSBwb3J0O1xuICAgIHJldHVybiBsb2c7XG59XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBkZWZhdWx0TG9nVHJhbnNmb3JtKGxvZ09iamVjdCwgbWF4RG9jdW1lbnRMZW5ndGggPSBleHBvcnRzLkRFRkFVTFRfTUFYX0RPQ1VNRU5UX0xFTkdUSCkge1xuICAgIGxldCBsb2cgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHN3aXRjaCAobG9nT2JqZWN0Lm5hbWUpIHtcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5TRVJWRVJfU0VMRUNUSU9OX1NUQVJURUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hTZXJ2ZXJTZWxlY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QsIG1heERvY3VtZW50TGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuU0VSVkVSX1NFTEVDVElPTl9GQUlMRUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hTZXJ2ZXJTZWxlY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QsIG1heERvY3VtZW50TGVuZ3RoKTtcbiAgICAgICAgICAgIGxvZy5mYWlsdXJlID0gbG9nT2JqZWN0LmZhaWx1cmU/Lm1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLlNFUlZFUl9TRUxFQ1RJT05fU1VDQ0VFREVEOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoU2VydmVyU2VsZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0LCBtYXhEb2N1bWVudExlbmd0aCk7XG4gICAgICAgICAgICBsb2cuc2VydmVySG9zdCA9IGxvZ09iamVjdC5zZXJ2ZXJIb3N0O1xuICAgICAgICAgICAgbG9nLnNlcnZlclBvcnQgPSBsb2dPYmplY3Quc2VydmVyUG9ydDtcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuV0FJVElOR19GT1JfU1VJVEFCTEVfU0VSVkVSOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoU2VydmVyU2VsZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0LCBtYXhEb2N1bWVudExlbmd0aCk7XG4gICAgICAgICAgICBsb2cucmVtYWluaW5nVGltZU1TID0gbG9nT2JqZWN0LnJlbWFpbmluZ1RpbWVNUztcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuQ09NTUFORF9TVEFSVEVEOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoQ29tbWFuZEZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdDb21tYW5kIHN0YXJ0ZWQnO1xuICAgICAgICAgICAgbG9nLmNvbW1hbmQgPSBzdHJpbmdpZnlXaXRoTWF4TGVuKGxvZ09iamVjdC5jb21tYW5kLCBtYXhEb2N1bWVudExlbmd0aCwgeyByZWxheGVkOiB0cnVlIH0pO1xuICAgICAgICAgICAgbG9nLmRhdGFiYXNlTmFtZSA9IGxvZ09iamVjdC5kYXRhYmFzZU5hbWU7XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLkNPTU1BTkRfU1VDQ0VFREVEOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoQ29tbWFuZEZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdDb21tYW5kIHN1Y2NlZWRlZCc7XG4gICAgICAgICAgICBsb2cuZHVyYXRpb25NUyA9IGxvZ09iamVjdC5kdXJhdGlvbjtcbiAgICAgICAgICAgIGxvZy5yZXBseSA9IHN0cmluZ2lmeVdpdGhNYXhMZW4obG9nT2JqZWN0LnJlcGx5LCBtYXhEb2N1bWVudExlbmd0aCwgeyByZWxheGVkOiB0cnVlIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT01NQU5EX0ZBSUxFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbW1hbmRGaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29tbWFuZCBmYWlsZWQnO1xuICAgICAgICAgICAgbG9nLmR1cmF0aW9uTVMgPSBsb2dPYmplY3QuZHVyYXRpb247XG4gICAgICAgICAgICBsb2cuZmFpbHVyZSA9IGxvZ09iamVjdC5mYWlsdXJlPy5tZXNzYWdlID8/ICcocmVkYWN0ZWQpJztcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuQ09OTkVDVElPTl9QT09MX0NSRUFURUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb25uZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ0Nvbm5lY3Rpb24gcG9vbCBjcmVhdGVkJztcbiAgICAgICAgICAgIGlmIChsb2dPYmplY3Qub3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgbWF4SWRsZVRpbWVNUywgbWluUG9vbFNpemUsIG1heFBvb2xTaXplLCBtYXhDb25uZWN0aW5nLCB3YWl0UXVldWVUaW1lb3V0TVMgfSA9IGxvZ09iamVjdC5vcHRpb25zO1xuICAgICAgICAgICAgICAgIGxvZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubG9nLFxuICAgICAgICAgICAgICAgICAgICBtYXhJZGxlVGltZU1TLFxuICAgICAgICAgICAgICAgICAgICBtaW5Qb29sU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgbWF4UG9vbFNpemUsXG4gICAgICAgICAgICAgICAgICAgIG1heENvbm5lY3RpbmcsXG4gICAgICAgICAgICAgICAgICAgIHdhaXRRdWV1ZVRpbWVvdXRNU1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLkNPTk5FQ1RJT05fUE9PTF9SRUFEWTpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBwb29sIHJlYWR5JztcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuQ09OTkVDVElPTl9QT09MX0NMRUFSRUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb25uZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ0Nvbm5lY3Rpb24gcG9vbCBjbGVhcmVkJztcbiAgICAgICAgICAgIGlmIChsb2dPYmplY3Quc2VydmljZUlkPy5fYnNvbnR5cGUgPT09ICdPYmplY3RJZCcpIHtcbiAgICAgICAgICAgICAgICBsb2cuc2VydmljZUlkID0gbG9nT2JqZWN0LnNlcnZpY2VJZD8udG9IZXhTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuQ09OTkVDVElPTl9QT09MX0NMT1NFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBwb29sIGNsb3NlZCc7XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ1JFQVRFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBjcmVhdGVkJztcbiAgICAgICAgICAgIGxvZy5kcml2ZXJDb25uZWN0aW9uSWQgPSBsb2dPYmplY3QuY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT05ORUNUSU9OX1JFQURZOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoQ29ubmVjdGlvbkZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdDb25uZWN0aW9uIHJlYWR5JztcbiAgICAgICAgICAgIGxvZy5kcml2ZXJDb25uZWN0aW9uSWQgPSBsb2dPYmplY3QuY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5DT05ORUNUSU9OX0NMT1NFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBjbG9zZWQnO1xuICAgICAgICAgICAgbG9nLmRyaXZlckNvbm5lY3Rpb25JZCA9IGxvZ09iamVjdC5jb25uZWN0aW9uSWQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGxvZ09iamVjdC5yZWFzb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdGFsZSc6XG4gICAgICAgICAgICAgICAgICAgIGxvZy5yZWFzb24gPSAnQ29ubmVjdGlvbiBiZWNhbWUgc3RhbGUgYmVjYXVzZSB0aGUgcG9vbCB3YXMgY2xlYXJlZCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2lkbGUnOlxuICAgICAgICAgICAgICAgICAgICBsb2cucmVhc29uID1cbiAgICAgICAgICAgICAgICAgICAgICAgICdDb25uZWN0aW9uIGhhcyBiZWVuIGF2YWlsYWJsZSBidXQgdW51c2VkIGZvciBsb25nZXIgdGhhbiB0aGUgY29uZmlndXJlZCBtYXggaWRsZSB0aW1lJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgICAgICAgICBsb2cucmVhc29uID0gJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIHVzaW5nIHRoZSBjb25uZWN0aW9uJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ09iamVjdC5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yID0gbG9nT2JqZWN0LmVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Bvb2xDbG9zZWQnOlxuICAgICAgICAgICAgICAgICAgICBsb2cucmVhc29uID0gJ0Nvbm5lY3Rpb24gcG9vbCB3YXMgY2xvc2VkJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgbG9nLnJlYXNvbiA9IGBVbmtub3duIGNsb3NlIHJlYXNvbjogJHtsb2dPYmplY3QucmVhc29ufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX1NUQVJURUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb25uZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ0Nvbm5lY3Rpb24gY2hlY2tvdXQgc3RhcnRlZCc7XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLkNPTk5FQ1RJT05fQ0hFQ0tfT1VUX0ZBSUxFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBjaGVja291dCBmYWlsZWQnO1xuICAgICAgICAgICAgc3dpdGNoIChsb2dPYmplY3QucmVhc29uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAncG9vbENsb3NlZCc6XG4gICAgICAgICAgICAgICAgICAgIGxvZy5yZWFzb24gPSAnQ29ubmVjdGlvbiBwb29sIHdhcyBjbG9zZWQnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0aW1lb3V0JzpcbiAgICAgICAgICAgICAgICAgICAgbG9nLnJlYXNvbiA9ICdXYWl0IHF1ZXVlIHRpbWVvdXQgZWxhcHNlZCB3aXRob3V0IGEgY29ubmVjdGlvbiBiZWNvbWluZyBhdmFpbGFibGUnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjb25uZWN0aW9uRXJyb3InOlxuICAgICAgICAgICAgICAgICAgICBsb2cucmVhc29uID0gJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBlc3RhYmxpc2ggYSBuZXcgY29ubmVjdGlvbic7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2dPYmplY3QuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5lcnJvciA9IGxvZ09iamVjdC5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBsb2cucmVhc29uID0gYFVua25vd24gY2xvc2UgcmVhc29uOiAke2xvZ09iamVjdC5yZWFzb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DSEVDS0VEX09VVDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaENvbm5lY3Rpb25GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBjaGVja2VkIG91dCc7XG4gICAgICAgICAgICBsb2cuZHJpdmVyQ29ubmVjdGlvbklkID0gbG9nT2JqZWN0LmNvbm5lY3Rpb25JZDtcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuQ09OTkVDVElPTl9DSEVDS0VEX0lOOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoQ29ubmVjdGlvbkZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdDb25uZWN0aW9uIGNoZWNrZWQgaW4nO1xuICAgICAgICAgICAgbG9nLmRyaXZlckNvbm5lY3Rpb25JZCA9IGxvZ09iamVjdC5jb25uZWN0aW9uSWQ7XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLlNFUlZFUl9PUEVOSU5HOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoU0RBTUZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hDb25uZWN0aW9uRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZy5tZXNzYWdlID0gJ1N0YXJ0aW5nIHNlcnZlciBtb25pdG9yaW5nJztcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuU0VSVkVSX0NMT1NFRDpcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaFNEQU1GaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nID0gYXR0YWNoQ29ubmVjdGlvbkZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdTdG9wcGVkIHNlcnZlciBtb25pdG9yaW5nJztcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuU0VSVkVSX0hFQVJUQkVBVF9TVEFSVEVEOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoU0RBTUZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hTZXJ2ZXJIZWFydGJlYXRGaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnU2VydmVyIGhlYXJ0YmVhdCBzdGFydGVkJztcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQ6XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hTREFNRmllbGRzKGxvZywgbG9nT2JqZWN0KTtcbiAgICAgICAgICAgIGxvZyA9IGF0dGFjaFNlcnZlckhlYXJ0YmVhdEZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdTZXJ2ZXIgaGVhcnRiZWF0IHN1Y2NlZWRlZCc7XG4gICAgICAgICAgICBsb2cuZHVyYXRpb25NUyA9IGxvZ09iamVjdC5kdXJhdGlvbjtcbiAgICAgICAgICAgIGxvZy5zZXJ2ZXJDb25uZWN0aW9uSWQgPSBsb2dPYmplY3Quc2VydmVyQ29ubmVjdGlvbklkO1xuICAgICAgICAgICAgbG9nLnJlcGx5ID0gc3RyaW5naWZ5V2l0aE1heExlbihsb2dPYmplY3QucmVwbHksIG1heERvY3VtZW50TGVuZ3RoLCB7IHJlbGF4ZWQ6IHRydWUgfSk7XG4gICAgICAgICAgICByZXR1cm4gbG9nO1xuICAgICAgICBjYXNlIGNvbnN0YW50c18xLlNFUlZFUl9IRUFSVEJFQVRfRkFJTEVEOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoU0RBTUZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cgPSBhdHRhY2hTZXJ2ZXJIZWFydGJlYXRGaWVsZHMobG9nLCBsb2dPYmplY3QpO1xuICAgICAgICAgICAgbG9nLm1lc3NhZ2UgPSAnU2VydmVyIGhlYXJ0YmVhdCBmYWlsZWQnO1xuICAgICAgICAgICAgbG9nLmR1cmF0aW9uTVMgPSBsb2dPYmplY3QuZHVyYXRpb247XG4gICAgICAgICAgICBsb2cuZmFpbHVyZSA9IGxvZ09iamVjdC5mYWlsdXJlPy5tZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5UT1BPTE9HWV9PUEVOSU5HOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoU0RBTUZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdTdGFydGluZyB0b3BvbG9neSBtb25pdG9yaW5nJztcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGNhc2UgY29uc3RhbnRzXzEuVE9QT0xPR1lfQ0xPU0VEOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoU0RBTUZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdTdG9wcGVkIHRvcG9sb2d5IG1vbml0b3JpbmcnO1xuICAgICAgICAgICAgcmV0dXJuIGxvZztcbiAgICAgICAgY2FzZSBjb25zdGFudHNfMS5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VEOlxuICAgICAgICAgICAgbG9nID0gYXR0YWNoU0RBTUZpZWxkcyhsb2csIGxvZ09iamVjdCk7XG4gICAgICAgICAgICBsb2cubWVzc2FnZSA9ICdUb3BvbG9neSBkZXNjcmlwdGlvbiBjaGFuZ2VkJztcbiAgICAgICAgICAgIGxvZy5wcmV2aW91c0Rlc2NyaXB0aW9uID0gbG9nLnJlcGx5ID0gc3RyaW5naWZ5V2l0aE1heExlbihsb2dPYmplY3QucHJldmlvdXNEZXNjcmlwdGlvbiwgbWF4RG9jdW1lbnRMZW5ndGgpO1xuICAgICAgICAgICAgbG9nLm5ld0Rlc2NyaXB0aW9uID0gbG9nLnJlcGx5ID0gc3RyaW5naWZ5V2l0aE1heExlbihsb2dPYmplY3QubmV3RGVzY3JpcHRpb24sIG1heERvY3VtZW50TGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiBsb2c7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhsb2dPYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGxvZ1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb2c7XG59XG5leHBvcnRzLmRlZmF1bHRMb2dUcmFuc2Zvcm0gPSBkZWZhdWx0TG9nVHJhbnNmb3JtO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgTW9uZ29Mb2dnZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nTG9nID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIHdoZW4gbG9nZ2luZyBlcnJvcnMgdGhhdCBkbyBub3QgaGF2ZSBhIHB1YmxpYyBkcml2ZXIgQVBJIGZvclxuICAgICAgICAgKiByZXBvcnRpbmcgZXJyb3JzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMubG9nLmJpbmQodGhpcywgJ2Vycm9yJyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgdXNlZCB0byBsb2cgc2l0dWF0aW9ucyB3aGVyZSB1bmRlc2lyYWJsZSBhcHBsaWNhdGlvbiBiZWhhdmlvdXIgbWlnaHRcbiAgICAgICAgICogb2NjdXIuIEZvciBleGFtcGxlLCBmYWlsaW5nIHRvIGVuZCBzZXNzaW9ucyBvbiBgTW9uZ29DbGllbnQuY2xvc2VgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53YXJuID0gdGhpcy5sb2cuYmluZCh0aGlzLCAnd2FybicpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgdG8gcmVwb3J0IGhpZ2gtbGV2ZWwgaW5mb3JtYXRpb24gYWJvdXQgbm9ybWFsIGRyaXZlciBiZWhhdmlvdXIuXG4gICAgICAgICAqIEZvciBleGFtcGxlLCB0aGUgY3JlYXRpb24gb2YgYSBgTW9uZ29DbGllbnRgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbmZvID0gdGhpcy5sb2cuYmluZCh0aGlzLCAnaW5mbycpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgdG8gcmVwb3J0IGluZm9ybWF0aW9uIHRoYXQgd291bGQgYmUgaGVscGZ1bCB3aGVuIGRlYnVnZ2luZyBhblxuICAgICAgICAgKiBhcHBsaWNhdGlvbi4gRm9yIGV4YW1wbGUsIGEgY29tbWFuZCBzdGFydGluZywgc3VjY2VlZGluZyBvciBmYWlsaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWJ1ZyA9IHRoaXMubG9nLmJpbmQodGhpcywgJ2RlYnVnJyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgdXNlZCB0byByZXBvcnQgZmluZS1ncmFpbmVkIGRldGFpbHMgcmVsYXRlZCB0byBsb2dpYyBmbG93LiBGb3IgZXhhbXBsZSxcbiAgICAgICAgICogZW50ZXJpbmcgYW5kIGV4aXRpbmcgYSBmdW5jdGlvbiBib2R5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmFjZSA9IHRoaXMubG9nLmJpbmQodGhpcywgJ3RyYWNlJyk7XG4gICAgICAgIHRoaXMuY29tcG9uZW50U2V2ZXJpdGllcyA9IG9wdGlvbnMuY29tcG9uZW50U2V2ZXJpdGllcztcbiAgICAgICAgdGhpcy5tYXhEb2N1bWVudExlbmd0aCA9IG9wdGlvbnMubWF4RG9jdW1lbnRMZW5ndGg7XG4gICAgICAgIHRoaXMubG9nRGVzdGluYXRpb24gPSBvcHRpb25zLmxvZ0Rlc3RpbmF0aW9uO1xuICAgICAgICB0aGlzLmxvZ0Rlc3RpbmF0aW9uSXNTdGRFcnIgPSBvcHRpb25zLmxvZ0Rlc3RpbmF0aW9uSXNTdGRFcnI7XG4gICAgICAgIHRoaXMuc2V2ZXJpdGllcyA9IHRoaXMuY3JlYXRlTG9nZ2luZ1NldmVyaXRpZXMoKTtcbiAgICB9XG4gICAgY3JlYXRlTG9nZ2luZ1NldmVyaXRpZXMoKSB7XG4gICAgICAgIGNvbnN0IHNldmVyaXRpZXMgPSBPYmplY3QoKTtcbiAgICAgICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgT2JqZWN0LnZhbHVlcyhleHBvcnRzLk1vbmdvTG9nZ2FibGVDb21wb25lbnQpKSB7XG4gICAgICAgICAgICBzZXZlcml0aWVzW2NvbXBvbmVudF0gPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2V2ZXJpdHlMZXZlbCBvZiBPYmplY3QudmFsdWVzKGV4cG9ydHMuU2V2ZXJpdHlMZXZlbCkpIHtcbiAgICAgICAgICAgICAgICBzZXZlcml0aWVzW2NvbXBvbmVudF1bc2V2ZXJpdHlMZXZlbF0gPVxuICAgICAgICAgICAgICAgICAgICBjb21wYXJlU2V2ZXJpdHkoc2V2ZXJpdHlMZXZlbCwgdGhpcy5jb21wb25lbnRTZXZlcml0aWVzW2NvbXBvbmVudF0pIDw9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNldmVyaXRpZXM7XG4gICAgfVxuICAgIHR1cm5PZmZTZXZlcml0aWVzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBPYmplY3QudmFsdWVzKGV4cG9ydHMuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50U2V2ZXJpdGllc1tjb21wb25lbnRdID0gZXhwb3J0cy5TZXZlcml0eUxldmVsLk9GRjtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2V2ZXJpdHlMZXZlbCBvZiBPYmplY3QudmFsdWVzKGV4cG9ydHMuU2V2ZXJpdHlMZXZlbCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldmVyaXRpZXNbY29tcG9uZW50XVtzZXZlcml0eUxldmVsXSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxvZ1dyaXRlRmFpbHVyZUhhbmRsZXIoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMubG9nRGVzdGluYXRpb25Jc1N0ZEVycikge1xuICAgICAgICAgICAgdGhpcy50dXJuT2ZmU2V2ZXJpdGllcygpO1xuICAgICAgICAgICAgdGhpcy5jbGVhclBlbmRpbmdMb2coKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ0Rlc3RpbmF0aW9uID0gY3JlYXRlU3RkaW9Mb2dnZXIocHJvY2Vzcy5zdGRlcnIpO1xuICAgICAgICB0aGlzLmxvZ0Rlc3RpbmF0aW9uSXNTdGRFcnIgPSB0cnVlO1xuICAgICAgICB0aGlzLmNsZWFyUGVuZGluZ0xvZygpO1xuICAgICAgICB0aGlzLmVycm9yKGV4cG9ydHMuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudC5DTElFTlQsIHtcbiAgICAgICAgICAgIHRvTG9nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1VzZXIgaW5wdXQgZm9yIG1vbmdvZGJMb2dQYXRoIGlzIG5vdyBpbnZhbGlkLiBMb2dnaW5nIGlzIGhhbHRlZC4nLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnR1cm5PZmZTZXZlcml0aWVzKCk7XG4gICAgICAgIHRoaXMuY2xlYXJQZW5kaW5nTG9nKCk7XG4gICAgfVxuICAgIGNsZWFyUGVuZGluZ0xvZygpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nTG9nID0gbnVsbDtcbiAgICB9XG4gICAgd2lsbExvZyhjb21wb25lbnQsIHNldmVyaXR5KSB7XG4gICAgICAgIGlmIChzZXZlcml0eSA9PT0gZXhwb3J0cy5TZXZlcml0eUxldmVsLk9GRilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V2ZXJpdGllc1tjb21wb25lbnRdW3NldmVyaXR5XTtcbiAgICB9XG4gICAgbG9nKHNldmVyaXR5LCBjb21wb25lbnQsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLndpbGxMb2coY29tcG9uZW50LCBzZXZlcml0eSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBsb2dNZXNzYWdlID0geyB0OiBuZXcgRGF0ZSgpLCBjOiBjb21wb25lbnQsIHM6IHNldmVyaXR5IH07XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGxvZ01lc3NhZ2UubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBpZiAoaXNMb2dDb252ZXJ0aWJsZShtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIGxvZ01lc3NhZ2UgPSB7IC4uLmxvZ01lc3NhZ2UsIC4uLm1lc3NhZ2UudG9Mb2coKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nTWVzc2FnZSA9IHsgLi4ubG9nTWVzc2FnZSwgLi4uZGVmYXVsdExvZ1RyYW5zZm9ybShtZXNzYWdlLCB0aGlzLm1heERvY3VtZW50TGVuZ3RoKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc1Byb21pc2VMaWtlKSh0aGlzLnBlbmRpbmdMb2cpKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdMb2cgPSB0aGlzLnBlbmRpbmdMb2dcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmxvZ0Rlc3RpbmF0aW9uLndyaXRlKGxvZ01lc3NhZ2UpKVxuICAgICAgICAgICAgICAgIC50aGVuKHRoaXMuY2xlYXJQZW5kaW5nTG9nLmJpbmQodGhpcyksIHRoaXMubG9nV3JpdGVGYWlsdXJlSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbG9nUmVzdWx0ID0gdGhpcy5sb2dEZXN0aW5hdGlvbi53cml0ZShsb2dNZXNzYWdlKTtcbiAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc1Byb21pc2VMaWtlKShsb2dSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nTG9nID0gbG9nUmVzdWx0LnRoZW4odGhpcy5jbGVhclBlbmRpbmdMb2cuYmluZCh0aGlzKSwgdGhpcy5sb2dXcml0ZUZhaWx1cmVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5sb2dXcml0ZUZhaWx1cmVIYW5kbGVyKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXJnZXMgb3B0aW9ucyBzZXQgdGhyb3VnaCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYW5kIHRoZSBNb25nb0NsaWVudCwgcHJlZmVycmluZyBlbnZpcm9ubWVudFxuICAgICAqIHZhcmlhYmxlcyB3aGVuIGJvdGggYXJlIHNldCwgYW5kIHN1YnN0aXR1dGluZyBkZWZhdWx0cyBmb3IgdmFsdWVzIG5vdCBzZXQuIE9wdGlvbnMgc2V0IGluXG4gICAgICogY29uc3RydWN0b3IgdGFrZSBwcmVjZWRlbmNlIG92ZXIgYm90aCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYW5kIE1vbmdvQ2xpZW50IG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFdoZW4gcGFyc2luZyBjb21wb25lbnQgc2V2ZXJpdHkgbGV2ZWxzLCBpbnZhbGlkIHZhbHVlcyBhcmUgdHJlYXRlZCBhcyB1bnNldCBhbmQgcmVwbGFjZWQgd2l0aFxuICAgICAqIHRoZSBkZWZhdWx0IHNldmVyaXR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGVudk9wdGlvbnMgLSBvcHRpb25zIHNldCBmb3IgdGhlIGxvZ2dlciBmcm9tIHRoZSBlbnZpcm9ubWVudFxuICAgICAqIEBwYXJhbSBjbGllbnRPcHRpb25zIC0gb3B0aW9ucyBzZXQgZm9yIHRoZSBsb2dnZXIgaW4gdGhlIE1vbmdvQ2xpZW50IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyBhIE1vbmdvTG9nZ2VyT3B0aW9ucyBvYmplY3QgdG8gYmUgdXNlZCB3aGVuIGluc3RhbnRpYXRpbmcgYSBuZXcgTW9uZ29Mb2dnZXJcbiAgICAgKi9cbiAgICBzdGF0aWMgcmVzb2x2ZU9wdGlvbnMoZW52T3B0aW9ucywgY2xpZW50T3B0aW9ucykge1xuICAgICAgICAvLyBjbGllbnQgb3B0aW9ucyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBlbnYgb3B0aW9uc1xuICAgICAgICBjb25zdCByZXNvbHZlZExvZ1BhdGggPSByZXNvbHZlTG9nUGF0aChlbnZPcHRpb25zLCBjbGllbnRPcHRpb25zKTtcbiAgICAgICAgY29uc3QgY29tYmluZWRPcHRpb25zID0ge1xuICAgICAgICAgICAgLi4uZW52T3B0aW9ucyxcbiAgICAgICAgICAgIC4uLmNsaWVudE9wdGlvbnMsXG4gICAgICAgICAgICBtb25nb2RiTG9nUGF0aDogcmVzb2x2ZWRMb2dQYXRoLm1vbmdvZGJMb2dQYXRoLFxuICAgICAgICAgICAgbW9uZ29kYkxvZ1BhdGhJc1N0ZEVycjogcmVzb2x2ZWRMb2dQYXRoLm1vbmdvZGJMb2dQYXRoSXNTdGRFcnJcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZGVmYXVsdFNldmVyaXR5ID0gcmVzb2x2ZVNldmVyaXR5Q29uZmlndXJhdGlvbihjb21iaW5lZE9wdGlvbnMubW9uZ29kYkxvZ0NvbXBvbmVudFNldmVyaXRpZXM/LmRlZmF1bHQsIGNvbWJpbmVkT3B0aW9ucy5NT05HT0RCX0xPR19BTEwsIGV4cG9ydHMuU2V2ZXJpdHlMZXZlbC5PRkYpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcG9uZW50U2V2ZXJpdGllczoge1xuICAgICAgICAgICAgICAgIGNvbW1hbmQ6IHJlc29sdmVTZXZlcml0eUNvbmZpZ3VyYXRpb24oY29tYmluZWRPcHRpb25zLm1vbmdvZGJMb2dDb21wb25lbnRTZXZlcml0aWVzPy5jb21tYW5kLCBjb21iaW5lZE9wdGlvbnMuTU9OR09EQl9MT0dfQ09NTUFORCwgZGVmYXVsdFNldmVyaXR5KSxcbiAgICAgICAgICAgICAgICB0b3BvbG9neTogcmVzb2x2ZVNldmVyaXR5Q29uZmlndXJhdGlvbihjb21iaW5lZE9wdGlvbnMubW9uZ29kYkxvZ0NvbXBvbmVudFNldmVyaXRpZXM/LnRvcG9sb2d5LCBjb21iaW5lZE9wdGlvbnMuTU9OR09EQl9MT0dfVE9QT0xPR1ksIGRlZmF1bHRTZXZlcml0eSksXG4gICAgICAgICAgICAgICAgc2VydmVyU2VsZWN0aW9uOiByZXNvbHZlU2V2ZXJpdHlDb25maWd1cmF0aW9uKGNvbWJpbmVkT3B0aW9ucy5tb25nb2RiTG9nQ29tcG9uZW50U2V2ZXJpdGllcz8uc2VydmVyU2VsZWN0aW9uLCBjb21iaW5lZE9wdGlvbnMuTU9OR09EQl9MT0dfU0VSVkVSX1NFTEVDVElPTiwgZGVmYXVsdFNldmVyaXR5KSxcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uOiByZXNvbHZlU2V2ZXJpdHlDb25maWd1cmF0aW9uKGNvbWJpbmVkT3B0aW9ucy5tb25nb2RiTG9nQ29tcG9uZW50U2V2ZXJpdGllcz8uY29ubmVjdGlvbiwgY29tYmluZWRPcHRpb25zLk1PTkdPREJfTE9HX0NPTk5FQ1RJT04sIGRlZmF1bHRTZXZlcml0eSksXG4gICAgICAgICAgICAgICAgY2xpZW50OiByZXNvbHZlU2V2ZXJpdHlDb25maWd1cmF0aW9uKGNvbWJpbmVkT3B0aW9ucy5tb25nb2RiTG9nQ29tcG9uZW50U2V2ZXJpdGllcz8uY2xpZW50LCBjb21iaW5lZE9wdGlvbnMuTU9OR09EQl9MT0dfQ0xJRU5ULCBkZWZhdWx0U2V2ZXJpdHkpLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRlZmF1bHRTZXZlcml0eVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1heERvY3VtZW50TGVuZ3RoOiBjb21iaW5lZE9wdGlvbnMubW9uZ29kYkxvZ01heERvY3VtZW50TGVuZ3RoID8/XG4gICAgICAgICAgICAgICAgKDAsIHV0aWxzXzEucGFyc2VVbnNpZ25lZEludGVnZXIpKGNvbWJpbmVkT3B0aW9ucy5NT05HT0RCX0xPR19NQVhfRE9DVU1FTlRfTEVOR1RIKSA/P1xuICAgICAgICAgICAgICAgIDEwMDAsXG4gICAgICAgICAgICBsb2dEZXN0aW5hdGlvbjogY29tYmluZWRPcHRpb25zLm1vbmdvZGJMb2dQYXRoLFxuICAgICAgICAgICAgbG9nRGVzdGluYXRpb25Jc1N0ZEVycjogY29tYmluZWRPcHRpb25zLm1vbmdvZGJMb2dQYXRoSXNTdGRFcnJcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLk1vbmdvTG9nZ2VyID0gTW9uZ29Mb2dnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb25nb19sb2dnZXIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTW9uZ29Mb2dnZXIiLCJkZWZhdWx0TG9nVHJhbnNmb3JtIiwic3RyaW5naWZ5V2l0aE1heExlbiIsImNyZWF0ZVN0ZGlvTG9nZ2VyIiwicGFyc2VTZXZlcml0eUZyb21TdHJpbmciLCJNb25nb0xvZ2dhYmxlQ29tcG9uZW50IiwiU0VWRVJJVFlfTEVWRUxfTUFQIiwiREVGQVVMVF9NQVhfRE9DVU1FTlRfTEVOR1RIIiwiU2V2ZXJpdHlMZXZlbCIsInV0aWxfMSIsInJlcXVpcmUiLCJic29uXzEiLCJjb25zdGFudHNfMSIsInV0aWxzXzEiLCJmcmVlemUiLCJFTUVSR0VOQ1kiLCJBTEVSVCIsIkNSSVRJQ0FMIiwiRVJST1IiLCJXQVJOSU5HIiwiTk9USUNFIiwiSU5GT1JNQVRJT05BTCIsIkRFQlVHIiwiVFJBQ0UiLCJPRkYiLCJTZXZlcml0eUxldmVsTWFwIiwiTWFwIiwiY29uc3RydWN0b3IiLCJlbnRyaWVzIiwibmV3RW50cmllcyIsImxldmVsIiwicHVzaCIsImdldE51bWVyaWNTZXZlcml0eUxldmVsIiwic2V2ZXJpdHkiLCJnZXQiLCJnZXRTZXZlcml0eUxldmVsTmFtZSIsIkluZmluaXR5IiwiQ09NTUFORCIsIlRPUE9MT0dZIiwiU0VSVkVSX1NFTEVDVElPTiIsIkNPTk5FQ1RJT04iLCJDTElFTlQiLCJzIiwidmFsaWRTZXZlcml0aWVzIiwidmFsdWVzIiwibG93ZXJTZXZlcml0eSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJzdHJlYW0iLCJ3cml0ZSIsInByb21pc2lmeSIsImxvZyIsImNiIiwibG9nTGluZSIsImluc3BlY3QiLCJjb21wYWN0IiwiYnJlYWtMZW5ndGgiLCJyZXNvbHZlTG9nUGF0aCIsIk1PTkdPREJfTE9HX1BBVEgiLCJtb25nb2RiTG9nUGF0aCIsInRlc3QiLCJwcm9jZXNzIiwic3RkZXJyIiwibW9uZ29kYkxvZ1BhdGhJc1N0ZEVyciIsInN0ZG91dCIsInJlc29sdmVTZXZlcml0eUNvbmZpZ3VyYXRpb24iLCJjbGllbnRPcHRpb24iLCJlbnZpcm9ubWVudE9wdGlvbiIsImRlZmF1bHRTZXZlcml0eSIsImNvbXBhcmVTZXZlcml0eSIsInMwIiwiczEiLCJzME51bSIsInMxTnVtIiwibWF4RG9jdW1lbnRMZW5ndGgiLCJvcHRpb25zIiwic3RyVG9UcnVuY2F0ZSIsIm5hbWUiLCJFSlNPTiIsInN0cmluZ2lmeSIsImUiLCJtZXNzYWdlIiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsImNvZGVQb2ludEF0Iiwic2xpY2UiLCJpc0xvZ0NvbnZlcnRpYmxlIiwib2JqIiwib2JqQXNMb2dDb252ZXJ0aWJsZSIsInRvTG9nIiwidW5kZWZpbmVkIiwiYXR0YWNoU2VydmVyU2VsZWN0aW9uRmllbGRzIiwic2VydmVyU2VsZWN0aW9uRXZlbnQiLCJzZWxlY3RvciIsIm9wZXJhdGlvbiIsInRvcG9sb2d5RGVzY3JpcHRpb24iLCJhdHRhY2hDb21tYW5kRmllbGRzIiwiY29tbWFuZEV2ZW50IiwiY29tbWFuZE5hbWUiLCJyZXF1ZXN0SWQiLCJkcml2ZXJDb25uZWN0aW9uSWQiLCJjb25uZWN0aW9uSWQiLCJob3N0IiwicG9ydCIsIkhvc3RBZGRyZXNzIiwiZnJvbVN0cmluZyIsImFkZHJlc3MiLCJ0b0hvc3RQb3J0Iiwic2VydmVySG9zdCIsInNlcnZlclBvcnQiLCJzZXJ2aWNlSWQiLCJ0b0hleFN0cmluZyIsImRhdGFiYXNlTmFtZSIsInNlcnZlckNvbm5lY3Rpb25JZCIsImF0dGFjaENvbm5lY3Rpb25GaWVsZHMiLCJldmVudCIsImF0dGFjaFNEQU1GaWVsZHMiLCJzZGFtRXZlbnQiLCJ0b3BvbG9neUlkIiwiYXR0YWNoU2VydmVySGVhcnRiZWF0RmllbGRzIiwic2VydmVySGVhcnRiZWF0RXZlbnQiLCJhd2FpdGVkIiwibG9nT2JqZWN0IiwiY3JlYXRlIiwiU0VSVkVSX1NFTEVDVElPTl9TVEFSVEVEIiwiU0VSVkVSX1NFTEVDVElPTl9GQUlMRUQiLCJmYWlsdXJlIiwiU0VSVkVSX1NFTEVDVElPTl9TVUNDRUVERUQiLCJXQUlUSU5HX0ZPUl9TVUlUQUJMRV9TRVJWRVIiLCJyZW1haW5pbmdUaW1lTVMiLCJDT01NQU5EX1NUQVJURUQiLCJjb21tYW5kIiwicmVsYXhlZCIsIkNPTU1BTkRfU1VDQ0VFREVEIiwiZHVyYXRpb25NUyIsImR1cmF0aW9uIiwicmVwbHkiLCJDT01NQU5EX0ZBSUxFRCIsIkNPTk5FQ1RJT05fUE9PTF9DUkVBVEVEIiwibWF4SWRsZVRpbWVNUyIsIm1pblBvb2xTaXplIiwibWF4UG9vbFNpemUiLCJtYXhDb25uZWN0aW5nIiwid2FpdFF1ZXVlVGltZW91dE1TIiwiQ09OTkVDVElPTl9QT09MX1JFQURZIiwiQ09OTkVDVElPTl9QT09MX0NMRUFSRUQiLCJfYnNvbnR5cGUiLCJDT05ORUNUSU9OX1BPT0xfQ0xPU0VEIiwiQ09OTkVDVElPTl9DUkVBVEVEIiwiQ09OTkVDVElPTl9SRUFEWSIsIkNPTk5FQ1RJT05fQ0xPU0VEIiwicmVhc29uIiwiZXJyb3IiLCJDT05ORUNUSU9OX0NIRUNLX09VVF9TVEFSVEVEIiwiQ09OTkVDVElPTl9DSEVDS19PVVRfRkFJTEVEIiwiQ09OTkVDVElPTl9DSEVDS0VEX09VVCIsIkNPTk5FQ1RJT05fQ0hFQ0tFRF9JTiIsIlNFUlZFUl9PUEVOSU5HIiwiU0VSVkVSX0NMT1NFRCIsIlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCIsIlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVEIiwiU0VSVkVSX0hFQVJUQkVBVF9GQUlMRUQiLCJUT1BPTE9HWV9PUEVOSU5HIiwiVE9QT0xPR1lfQ0xPU0VEIiwiVE9QT0xPR1lfREVTQ1JJUFRJT05fQ0hBTkdFRCIsInByZXZpb3VzRGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsImtleSIsInBlbmRpbmdMb2ciLCJiaW5kIiwid2FybiIsImluZm8iLCJkZWJ1ZyIsInRyYWNlIiwiY29tcG9uZW50U2V2ZXJpdGllcyIsImxvZ0Rlc3RpbmF0aW9uIiwibG9nRGVzdGluYXRpb25Jc1N0ZEVyciIsInNldmVyaXRpZXMiLCJjcmVhdGVMb2dnaW5nU2V2ZXJpdGllcyIsImNvbXBvbmVudCIsInNldmVyaXR5TGV2ZWwiLCJ0dXJuT2ZmU2V2ZXJpdGllcyIsImxvZ1dyaXRlRmFpbHVyZUhhbmRsZXIiLCJjbGVhclBlbmRpbmdMb2ciLCJ3aWxsTG9nIiwibG9nTWVzc2FnZSIsInQiLCJEYXRlIiwiYyIsImlzUHJvbWlzZUxpa2UiLCJ0aGVuIiwibG9nUmVzdWx0IiwicmVzb2x2ZU9wdGlvbnMiLCJlbnZPcHRpb25zIiwiY2xpZW50T3B0aW9ucyIsInJlc29sdmVkTG9nUGF0aCIsImNvbWJpbmVkT3B0aW9ucyIsIm1vbmdvZGJMb2dDb21wb25lbnRTZXZlcml0aWVzIiwiZGVmYXVsdCIsIk1PTkdPREJfTE9HX0FMTCIsIk1PTkdPREJfTE9HX0NPTU1BTkQiLCJ0b3BvbG9neSIsIk1PTkdPREJfTE9HX1RPUE9MT0dZIiwic2VydmVyU2VsZWN0aW9uIiwiTU9OR09EQl9MT0dfU0VSVkVSX1NFTEVDVElPTiIsImNvbm5lY3Rpb24iLCJNT05HT0RCX0xPR19DT05ORUNUSU9OIiwiY2xpZW50IiwiTU9OR09EQl9MT0dfQ0xJRU5UIiwibW9uZ29kYkxvZ01heERvY3VtZW50TGVuZ3RoIiwicGFyc2VVbnNpZ25lZEludGVnZXIiLCJNT05HT0RCX0xPR19NQVhfRE9DVU1FTlRfTEVOR1RIIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/mongo_logger.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/mongo_types.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/mongo_types.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CancellationToken = exports.TypedEventEmitter = void 0;\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst mongo_logger_1 = __webpack_require__(/*! ./mongo_logger */ \"(ssr)/./node_modules/mongodb/lib/mongo_logger.js\");\n/**\n * Typescript type safe event emitter\n * @public\n */ class TypedEventEmitter extends events_1.EventEmitter {\n    /** @internal */ emitAndLog(event, ...args) {\n        this.emit(event, ...args);\n        if (this.component) this.mongoLogger?.debug(this.component, args[0]);\n    }\n    /** @internal */ emitAndLogHeartbeat(event, topologyId, serverConnectionId, ...args) {\n        this.emit(event, ...args);\n        if (this.component) {\n            const loggableHeartbeatEvent = {\n                topologyId: topologyId,\n                serverConnectionId: serverConnectionId ?? null,\n                ...args[0]\n            };\n            this.mongoLogger?.debug(this.component, loggableHeartbeatEvent);\n        }\n    }\n    /** @internal */ emitAndLogCommand(monitorCommands, event, databaseName, connectionEstablished, ...args) {\n        if (monitorCommands) {\n            this.emit(event, ...args);\n        }\n        if (connectionEstablished) {\n            const loggableCommandEvent = {\n                databaseName: databaseName,\n                ...args[0]\n            };\n            this.mongoLogger?.debug(mongo_logger_1.MongoLoggableComponent.COMMAND, loggableCommandEvent);\n        }\n    }\n}\nexports.TypedEventEmitter = TypedEventEmitter;\n/** @public */ class CancellationToken extends TypedEventEmitter {\n}\nexports.CancellationToken = CancellationToken; //# sourceMappingURL=mongo_types.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvbW9uZ29fdHlwZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHQSx5QkFBeUIsR0FBRyxLQUFLO0FBQzdELE1BQU1JLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1DLGlCQUFpQkQsbUJBQU9BLENBQUMsd0VBQWdCO0FBQy9DOzs7Q0FHQyxHQUNELE1BQU1GLDBCQUEwQkMsU0FBU0csWUFBWTtJQUNqRCxjQUFjLEdBQ2RDLFdBQVdDLEtBQUssRUFBRSxHQUFHQyxJQUFJLEVBQUU7UUFDdkIsSUFBSSxDQUFDQyxJQUFJLENBQUNGLFVBQVVDO1FBQ3BCLElBQUksSUFBSSxDQUFDRSxTQUFTLEVBQ2QsSUFBSSxDQUFDQyxXQUFXLEVBQUVDLE1BQU0sSUFBSSxDQUFDRixTQUFTLEVBQUVGLElBQUksQ0FBQyxFQUFFO0lBQ3ZEO0lBQ0EsY0FBYyxHQUNkSyxvQkFBb0JOLEtBQUssRUFBRU8sVUFBVSxFQUFFQyxrQkFBa0IsRUFBRSxHQUFHUCxJQUFJLEVBQUU7UUFDaEUsSUFBSSxDQUFDQyxJQUFJLENBQUNGLFVBQVVDO1FBQ3BCLElBQUksSUFBSSxDQUFDRSxTQUFTLEVBQUU7WUFDaEIsTUFBTU0seUJBQXlCO2dCQUMzQkYsWUFBWUE7Z0JBQ1pDLG9CQUFvQkEsc0JBQXNCO2dCQUMxQyxHQUFHUCxJQUFJLENBQUMsRUFBRTtZQUNkO1lBQ0EsSUFBSSxDQUFDRyxXQUFXLEVBQUVDLE1BQU0sSUFBSSxDQUFDRixTQUFTLEVBQUVNO1FBQzVDO0lBQ0o7SUFDQSxjQUFjLEdBQ2RDLGtCQUFrQkMsZUFBZSxFQUFFWCxLQUFLLEVBQUVZLFlBQVksRUFBRUMscUJBQXFCLEVBQUUsR0FBR1osSUFBSSxFQUFFO1FBQ3BGLElBQUlVLGlCQUFpQjtZQUNqQixJQUFJLENBQUNULElBQUksQ0FBQ0YsVUFBVUM7UUFDeEI7UUFDQSxJQUFJWSx1QkFBdUI7WUFDdkIsTUFBTUMsdUJBQXVCO2dCQUN6QkYsY0FBY0E7Z0JBQ2QsR0FBR1gsSUFBSSxDQUFDLEVBQUU7WUFDZDtZQUNBLElBQUksQ0FBQ0csV0FBVyxFQUFFQyxNQUFNUixlQUFla0Isc0JBQXNCLENBQUNDLE9BQU8sRUFBRUY7UUFDM0U7SUFDSjtBQUNKO0FBQ0F2Qix5QkFBeUIsR0FBR0c7QUFDNUIsWUFBWSxHQUNaLE1BQU1ELDBCQUEwQkM7QUFDaEM7QUFDQUgseUJBQXlCLEdBQUdFLG1CQUM1Qix1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL21vbmdvX3R5cGVzLmpzPzE0NDUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhbmNlbGxhdGlvblRva2VuID0gZXhwb3J0cy5UeXBlZEV2ZW50RW1pdHRlciA9IHZvaWQgMDtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbmNvbnN0IG1vbmdvX2xvZ2dlcl8xID0gcmVxdWlyZShcIi4vbW9uZ29fbG9nZ2VyXCIpO1xuLyoqXG4gKiBUeXBlc2NyaXB0IHR5cGUgc2FmZSBldmVudCBlbWl0dGVyXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIFR5cGVkRXZlbnRFbWl0dGVyIGV4dGVuZHMgZXZlbnRzXzEuRXZlbnRFbWl0dGVyIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgZW1pdEFuZExvZyhldmVudCwgLi4uYXJncykge1xuICAgICAgICB0aGlzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpXG4gICAgICAgICAgICB0aGlzLm1vbmdvTG9nZ2VyPy5kZWJ1Zyh0aGlzLmNvbXBvbmVudCwgYXJnc1swXSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBlbWl0QW5kTG9nSGVhcnRiZWF0KGV2ZW50LCB0b3BvbG9neUlkLCBzZXJ2ZXJDb25uZWN0aW9uSWQsIC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XG4gICAgICAgICAgICBjb25zdCBsb2dnYWJsZUhlYXJ0YmVhdEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIHRvcG9sb2d5SWQ6IHRvcG9sb2d5SWQsXG4gICAgICAgICAgICAgICAgc2VydmVyQ29ubmVjdGlvbklkOiBzZXJ2ZXJDb25uZWN0aW9uSWQgPz8gbnVsbCxcbiAgICAgICAgICAgICAgICAuLi5hcmdzWzBdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5tb25nb0xvZ2dlcj8uZGVidWcodGhpcy5jb21wb25lbnQsIGxvZ2dhYmxlSGVhcnRiZWF0RXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBlbWl0QW5kTG9nQ29tbWFuZChtb25pdG9yQ29tbWFuZHMsIGV2ZW50LCBkYXRhYmFzZU5hbWUsIGNvbm5lY3Rpb25Fc3RhYmxpc2hlZCwgLi4uYXJncykge1xuICAgICAgICBpZiAobW9uaXRvckNvbW1hbmRzKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25uZWN0aW9uRXN0YWJsaXNoZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvZ2dhYmxlQ29tbWFuZEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlTmFtZTogZGF0YWJhc2VOYW1lLFxuICAgICAgICAgICAgICAgIC4uLmFyZ3NbMF1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm1vbmdvTG9nZ2VyPy5kZWJ1Zyhtb25nb19sb2dnZXJfMS5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50LkNPTU1BTkQsIGxvZ2dhYmxlQ29tbWFuZEV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuVHlwZWRFdmVudEVtaXR0ZXIgPSBUeXBlZEV2ZW50RW1pdHRlcjtcbi8qKiBAcHVibGljICovXG5jbGFzcyBDYW5jZWxsYXRpb25Ub2tlbiBleHRlbmRzIFR5cGVkRXZlbnRFbWl0dGVyIHtcbn1cbmV4cG9ydHMuQ2FuY2VsbGF0aW9uVG9rZW4gPSBDYW5jZWxsYXRpb25Ub2tlbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vbmdvX3R5cGVzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNhbmNlbGxhdGlvblRva2VuIiwiVHlwZWRFdmVudEVtaXR0ZXIiLCJldmVudHNfMSIsInJlcXVpcmUiLCJtb25nb19sb2dnZXJfMSIsIkV2ZW50RW1pdHRlciIsImVtaXRBbmRMb2ciLCJldmVudCIsImFyZ3MiLCJlbWl0IiwiY29tcG9uZW50IiwibW9uZ29Mb2dnZXIiLCJkZWJ1ZyIsImVtaXRBbmRMb2dIZWFydGJlYXQiLCJ0b3BvbG9neUlkIiwic2VydmVyQ29ubmVjdGlvbklkIiwibG9nZ2FibGVIZWFydGJlYXRFdmVudCIsImVtaXRBbmRMb2dDb21tYW5kIiwibW9uaXRvckNvbW1hbmRzIiwiZGF0YWJhc2VOYW1lIiwiY29ubmVjdGlvbkVzdGFibGlzaGVkIiwibG9nZ2FibGVDb21tYW5kRXZlbnQiLCJNb25nb0xvZ2dhYmxlQ29tcG9uZW50IiwiQ09NTUFORCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/mongo_types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/aggregate.js":
/*!**********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/aggregate.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AggregateOperation = exports.DB_AGGREGATE_COLLECTION = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ exports.DB_AGGREGATE_COLLECTION = 1;\nconst MIN_WIRE_VERSION_$OUT_READ_CONCERN_SUPPORT = 8;\n/** @internal */ class AggregateOperation extends command_1.CommandOperation {\n    constructor(ns, pipeline, options){\n        super(undefined, {\n            ...options,\n            dbName: ns.db\n        });\n        this.options = {\n            ...options\n        };\n        // Covers when ns.collection is null, undefined or the empty string, use DB_AGGREGATE_COLLECTION\n        this.target = ns.collection || exports.DB_AGGREGATE_COLLECTION;\n        this.pipeline = pipeline;\n        // determine if we have a write stage, override read preference if so\n        this.hasWriteStage = false;\n        if (typeof options?.out === \"string\") {\n            this.pipeline = this.pipeline.concat({\n                $out: options.out\n            });\n            this.hasWriteStage = true;\n        } else if (pipeline.length > 0) {\n            const finalStage = pipeline[pipeline.length - 1];\n            if (finalStage.$out || finalStage.$merge) {\n                this.hasWriteStage = true;\n            }\n        }\n        if (this.hasWriteStage) {\n            this.trySecondaryWrite = true;\n        } else {\n            delete this.options.writeConcern;\n        }\n        if (this.explain && this.writeConcern) {\n            throw new error_1.MongoInvalidArgumentError('Option \"explain\" cannot be used on an aggregate call with writeConcern');\n        }\n        if (options?.cursor != null && typeof options.cursor !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError(\"Cursor options must be an object\");\n        }\n    }\n    get commandName() {\n        return \"aggregate\";\n    }\n    get canRetryRead() {\n        return !this.hasWriteStage;\n    }\n    addToPipeline(stage) {\n        this.pipeline.push(stage);\n    }\n    async execute(server, session) {\n        const options = this.options;\n        const serverWireVersion = (0, utils_1.maxWireVersion)(server);\n        const command = {\n            aggregate: this.target,\n            pipeline: this.pipeline\n        };\n        if (this.hasWriteStage && serverWireVersion < MIN_WIRE_VERSION_$OUT_READ_CONCERN_SUPPORT) {\n            this.readConcern = undefined;\n        }\n        if (this.hasWriteStage && this.writeConcern) {\n            write_concern_1.WriteConcern.apply(command, this.writeConcern);\n        }\n        if (options.bypassDocumentValidation === true) {\n            command.bypassDocumentValidation = options.bypassDocumentValidation;\n        }\n        if (typeof options.allowDiskUse === \"boolean\") {\n            command.allowDiskUse = options.allowDiskUse;\n        }\n        if (options.hint) {\n            command.hint = options.hint;\n        }\n        if (options.let) {\n            command.let = options.let;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            command.comment = options.comment;\n        }\n        command.cursor = options.cursor || {};\n        if (options.batchSize && !this.hasWriteStage) {\n            command.cursor.batchSize = options.batchSize;\n        }\n        return super.executeCommand(server, session, command);\n    }\n}\nexports.AggregateOperation = AggregateOperation;\n(0, operation_1.defineAspects)(AggregateOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]); //# sourceMappingURL=aggregate.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9hZ2dyZWdhdGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDBCQUEwQixHQUFHQSwrQkFBK0IsR0FBRyxLQUFLO0FBQ3BFLE1BQU1JLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1FLGtCQUFrQkYsbUJBQU9BLENBQUMsMkVBQWtCO0FBQ2xELE1BQU1HLFlBQVlILG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLE1BQU1JLGNBQWNKLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZEwsK0JBQStCLEdBQUc7QUFDbEMsTUFBTVUsNkNBQTZDO0FBQ25ELGNBQWMsR0FDZCxNQUFNUiwyQkFBMkJNLFVBQVVHLGdCQUFnQjtJQUN2REMsWUFBWUMsRUFBRSxFQUFFQyxRQUFRLEVBQUVDLE9BQU8sQ0FBRTtRQUMvQixLQUFLLENBQUNDLFdBQVc7WUFBRSxHQUFHRCxPQUFPO1lBQUVFLFFBQVFKLEdBQUdLLEVBQUU7UUFBQztRQUM3QyxJQUFJLENBQUNILE9BQU8sR0FBRztZQUFFLEdBQUdBLE9BQU87UUFBQztRQUM1QixnR0FBZ0c7UUFDaEcsSUFBSSxDQUFDSSxNQUFNLEdBQUdOLEdBQUdPLFVBQVUsSUFBSXBCLFFBQVFHLHVCQUF1QjtRQUM5RCxJQUFJLENBQUNXLFFBQVEsR0FBR0E7UUFDaEIscUVBQXFFO1FBQ3JFLElBQUksQ0FBQ08sYUFBYSxHQUFHO1FBQ3JCLElBQUksT0FBT04sU0FBU08sUUFBUSxVQUFVO1lBQ2xDLElBQUksQ0FBQ1IsUUFBUSxHQUFHLElBQUksQ0FBQ0EsUUFBUSxDQUFDUyxNQUFNLENBQUM7Z0JBQUVDLE1BQU1ULFFBQVFPLEdBQUc7WUFBQztZQUN6RCxJQUFJLENBQUNELGFBQWEsR0FBRztRQUN6QixP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RyxXQUFXO0lBQzlCbEQsWUFBWStDLE1BQU0sQ0FBQ0ksZUFBZTtDQUNyQyxHQUNELHFDQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9hZ2dyZWdhdGUuanM/NzhmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQWdncmVnYXRlT3BlcmF0aW9uID0gZXhwb3J0cy5EQl9BR0dSRUdBVEVfQ09MTEVDVElPTiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4uL3dyaXRlX2NvbmNlcm5cIik7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkRCX0FHR1JFR0FURV9DT0xMRUNUSU9OID0gMTtcbmNvbnN0IE1JTl9XSVJFX1ZFUlNJT05fJE9VVF9SRUFEX0NPTkNFUk5fU1VQUE9SVCA9IDg7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBBZ2dyZWdhdGVPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IobnMsIHBpcGVsaW5lLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHVuZGVmaW5lZCwgeyAuLi5vcHRpb25zLCBkYk5hbWU6IG5zLmRiIH0pO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICAgICAgLy8gQ292ZXJzIHdoZW4gbnMuY29sbGVjdGlvbiBpcyBudWxsLCB1bmRlZmluZWQgb3IgdGhlIGVtcHR5IHN0cmluZywgdXNlIERCX0FHR1JFR0FURV9DT0xMRUNUSU9OXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnMuY29sbGVjdGlvbiB8fCBleHBvcnRzLkRCX0FHR1JFR0FURV9DT0xMRUNUSU9OO1xuICAgICAgICB0aGlzLnBpcGVsaW5lID0gcGlwZWxpbmU7XG4gICAgICAgIC8vIGRldGVybWluZSBpZiB3ZSBoYXZlIGEgd3JpdGUgc3RhZ2UsIG92ZXJyaWRlIHJlYWQgcHJlZmVyZW5jZSBpZiBzb1xuICAgICAgICB0aGlzLmhhc1dyaXRlU3RhZ2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zPy5vdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLnBpcGVsaW5lID0gdGhpcy5waXBlbGluZS5jb25jYXQoeyAkb3V0OiBvcHRpb25zLm91dCB9KTtcbiAgICAgICAgICAgIHRoaXMuaGFzV3JpdGVTdGFnZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGlwZWxpbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZmluYWxTdGFnZSA9IHBpcGVsaW5lW3BpcGVsaW5lLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKGZpbmFsU3RhZ2UuJG91dCB8fCBmaW5hbFN0YWdlLiRtZXJnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzV3JpdGVTdGFnZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFzV3JpdGVTdGFnZSkge1xuICAgICAgICAgICAgdGhpcy50cnlTZWNvbmRhcnlXcml0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zLndyaXRlQ29uY2VybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leHBsYWluICYmIHRoaXMud3JpdGVDb25jZXJuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdPcHRpb24gXCJleHBsYWluXCIgY2Fubm90IGJlIHVzZWQgb24gYW4gYWdncmVnYXRlIGNhbGwgd2l0aCB3cml0ZUNvbmNlcm4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucz8uY3Vyc29yICE9IG51bGwgJiYgdHlwZW9mIG9wdGlvbnMuY3Vyc29yICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQ3Vyc29yIG9wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnYWdncmVnYXRlJztcbiAgICB9XG4gICAgZ2V0IGNhblJldHJ5UmVhZCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmhhc1dyaXRlU3RhZ2U7XG4gICAgfVxuICAgIGFkZFRvUGlwZWxpbmUoc3RhZ2UpIHtcbiAgICAgICAgdGhpcy5waXBlbGluZS5wdXNoKHN0YWdlKTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3Qgc2VydmVyV2lyZVZlcnNpb24gPSAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikoc2VydmVyKTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHsgYWdncmVnYXRlOiB0aGlzLnRhcmdldCwgcGlwZWxpbmU6IHRoaXMucGlwZWxpbmUgfTtcbiAgICAgICAgaWYgKHRoaXMuaGFzV3JpdGVTdGFnZSAmJiBzZXJ2ZXJXaXJlVmVyc2lvbiA8IE1JTl9XSVJFX1ZFUlNJT05fJE9VVF9SRUFEX0NPTkNFUk5fU1VQUE9SVCkge1xuICAgICAgICAgICAgdGhpcy5yZWFkQ29uY2VybiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNXcml0ZVN0YWdlICYmIHRoaXMud3JpdGVDb25jZXJuKSB7XG4gICAgICAgICAgICB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmFwcGx5KGNvbW1hbmQsIHRoaXMud3JpdGVDb25jZXJuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb24gPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uID0gb3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmFsbG93RGlza1VzZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBjb21tYW5kLmFsbG93RGlza1VzZSA9IG9wdGlvbnMuYWxsb3dEaXNrVXNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhpbnQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuaGludCA9IG9wdGlvbnMuaGludDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5sZXQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQubGV0ID0gb3B0aW9ucy5sZXQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgY2hlY2sgZm9yIHVuZGVmaW5lZCBzcGVjaWZpY2FsbHkgaGVyZSB0byBhbGxvdyBmYWxzeSB2YWx1ZXNcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgIGlmIChvcHRpb25zLmNvbW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29tbWFuZC5jb21tZW50ID0gb3B0aW9ucy5jb21tZW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbW1hbmQuY3Vyc29yID0gb3B0aW9ucy5jdXJzb3IgfHwge307XG4gICAgICAgIGlmIChvcHRpb25zLmJhdGNoU2l6ZSAmJiAhdGhpcy5oYXNXcml0ZVN0YWdlKSB7XG4gICAgICAgICAgICBjb21tYW5kLmN1cnNvci5iYXRjaFNpemUgPSBvcHRpb25zLmJhdGNoU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZUNvbW1hbmQoc2VydmVyLCBzZXNzaW9uLCBjb21tYW5kKTtcbiAgICB9XG59XG5leHBvcnRzLkFnZ3JlZ2F0ZU9wZXJhdGlvbiA9IEFnZ3JlZ2F0ZU9wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShBZ2dyZWdhdGVPcGVyYXRpb24sIFtcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT04sXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRSxcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuRVhQTEFJTkFCTEUsXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LkNVUlNPUl9DUkVBVElOR1xuXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZ2dyZWdhdGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQWdncmVnYXRlT3BlcmF0aW9uIiwiREJfQUdHUkVHQVRFX0NPTExFQ1RJT04iLCJlcnJvcl8xIiwicmVxdWlyZSIsInV0aWxzXzEiLCJ3cml0ZV9jb25jZXJuXzEiLCJjb21tYW5kXzEiLCJvcGVyYXRpb25fMSIsIk1JTl9XSVJFX1ZFUlNJT05fJE9VVF9SRUFEX0NPTkNFUk5fU1VQUE9SVCIsIkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsIm5zIiwicGlwZWxpbmUiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwiZGJOYW1lIiwiZGIiLCJ0YXJnZXQiLCJjb2xsZWN0aW9uIiwiaGFzV3JpdGVTdGFnZSIsIm91dCIsImNvbmNhdCIsIiRvdXQiLCJsZW5ndGgiLCJmaW5hbFN0YWdlIiwiJG1lcmdlIiwidHJ5U2Vjb25kYXJ5V3JpdGUiLCJ3cml0ZUNvbmNlcm4iLCJleHBsYWluIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsImN1cnNvciIsImNvbW1hbmROYW1lIiwiY2FuUmV0cnlSZWFkIiwiYWRkVG9QaXBlbGluZSIsInN0YWdlIiwicHVzaCIsImV4ZWN1dGUiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwic2VydmVyV2lyZVZlcnNpb24iLCJtYXhXaXJlVmVyc2lvbiIsImNvbW1hbmQiLCJhZ2dyZWdhdGUiLCJyZWFkQ29uY2VybiIsIldyaXRlQ29uY2VybiIsImFwcGx5IiwiYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uIiwiYWxsb3dEaXNrVXNlIiwiaGludCIsImxldCIsImNvbW1lbnQiLCJiYXRjaFNpemUiLCJleGVjdXRlQ29tbWFuZCIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRUFEX09QRVJBVElPTiIsIlJFVFJZQUJMRSIsIkVYUExBSU5BQkxFIiwiQ1VSU09SX0NSRUFUSU5HIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/aggregate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/bulk_write.js":
/*!***********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/bulk_write.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.BulkWriteOperation = void 0;\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class BulkWriteOperation extends operation_1.AbstractOperation {\n    constructor(collection, operations, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n        this.operations = operations;\n    }\n    get commandName() {\n        return \"bulkWrite\";\n    }\n    async execute(server, session) {\n        const coll = this.collection;\n        const operations = this.operations;\n        const options = {\n            ...this.options,\n            ...this.bsonOptions,\n            readPreference: this.readPreference\n        };\n        // Create the bulk operation\n        const bulk = options.ordered === false ? coll.initializeUnorderedBulkOp(options) : coll.initializeOrderedBulkOp(options);\n        // for each op go through and add to the bulk\n        for(let i = 0; i < operations.length; i++){\n            bulk.raw(operations[i]);\n        }\n        // Execute the bulk\n        const result = await bulk.execute({\n            ...options,\n            session\n        });\n        return result;\n    }\n}\nexports.BulkWriteOperation = BulkWriteOperation;\n(0, operation_1.defineAspects)(BulkWriteOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=bulk_write.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9idWxrX3dyaXRlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xDLE1BQU1HLGNBQWNDLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZCxNQUFNRiwyQkFBMkJDLFlBQVlFLGlCQUFpQjtJQUMxREMsWUFBWUMsVUFBVSxFQUFFQyxVQUFVLEVBQUVDLE9BQU8sQ0FBRTtRQUN6QyxLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDRixVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsVUFBVSxHQUFHQTtJQUN0QjtJQUNBLElBQUlFLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixNQUFNQyxPQUFPLElBQUksQ0FBQ1AsVUFBVTtRQUM1QixNQUFNQyxhQUFhLElBQUksQ0FBQ0EsVUFBVTtRQUNsQyxNQUFNQyxVQUFVO1lBQUUsR0FBRyxJQUFJLENBQUNBLE9BQU87WUFBRSxHQUFHLElBQUksQ0FBQ00sV0FBVztZQUFFQyxnQkFBZ0IsSUFBSSxDQUFDQSxjQUFjO1FBQUM7UUFDNUYsNEJBQTRCO1FBQzVCLE1BQU1DLE9BQU9SLFFBQVFTLE9BQU8sS0FBSyxRQUMzQkosS0FBS0sseUJBQXlCLENBQUNWLFdBQy9CSyxLQUFLTSx1QkFBdUIsQ0FBQ1g7UUFDbkMsNkNBQTZDO1FBQzdDLElBQUssSUFBSVksSUFBSSxHQUFHQSxJQUFJYixXQUFXYyxNQUFNLEVBQUVELElBQUs7WUFDeENKLEtBQUtNLEdBQUcsQ0FBQ2YsVUFBVSxDQUFDYSxFQUFFO1FBQzFCO1FBQ0EsbUJBQW1CO1FBQ25CLE1BQU1HLFNBQVMsTUFBTVAsS0FBS04sT0FBTyxDQUFDO1lBQUUsR0FBR0YsT0FBTztZQUFFSTtRQUFRO1FBQ3hELE9BQU9XO0lBQ1g7QUFDSjtBQUNBeEIsMEJBQTBCLEdBQUdFO0FBQzVCLElBQUdDLFlBQVlzQixhQUFhLEVBQUV2QixvQkFBb0I7SUFBQ0MsWUFBWXVCLE1BQU0sQ0FBQ0MsZUFBZTtDQUFDLEdBQ3ZGLHNDQUFzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9idWxrX3dyaXRlLmpzP2UyYWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJ1bGtXcml0ZU9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQnVsa1dyaXRlT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG9wZXJhdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMub3BlcmF0aW9ucyA9IG9wZXJhdGlvbnM7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdidWxrV3JpdGUnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBjb2xsID0gdGhpcy5jb2xsZWN0aW9uO1xuICAgICAgICBjb25zdCBvcGVyYXRpb25zID0gdGhpcy5vcGVyYXRpb25zO1xuICAgICAgICBjb25zdCBvcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLnRoaXMuYnNvbk9wdGlvbnMsIHJlYWRQcmVmZXJlbmNlOiB0aGlzLnJlYWRQcmVmZXJlbmNlIH07XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYnVsayBvcGVyYXRpb25cbiAgICAgICAgY29uc3QgYnVsayA9IG9wdGlvbnMub3JkZXJlZCA9PT0gZmFsc2VcbiAgICAgICAgICAgID8gY29sbC5pbml0aWFsaXplVW5vcmRlcmVkQnVsa09wKG9wdGlvbnMpXG4gICAgICAgICAgICA6IGNvbGwuaW5pdGlhbGl6ZU9yZGVyZWRCdWxrT3Aob3B0aW9ucyk7XG4gICAgICAgIC8vIGZvciBlYWNoIG9wIGdvIHRocm91Z2ggYW5kIGFkZCB0byB0aGUgYnVsa1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wZXJhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJ1bGsucmF3KG9wZXJhdGlvbnNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGJ1bGtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYnVsay5leGVjdXRlKHsgLi4ub3B0aW9ucywgc2Vzc2lvbiB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5leHBvcnRzLkJ1bGtXcml0ZU9wZXJhdGlvbiA9IEJ1bGtXcml0ZU9wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShCdWxrV3JpdGVPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWxrX3dyaXRlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkJ1bGtXcml0ZU9wZXJhdGlvbiIsIm9wZXJhdGlvbl8xIiwicmVxdWlyZSIsIkFic3RyYWN0T3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwib3BlcmF0aW9ucyIsIm9wdGlvbnMiLCJjb21tYW5kTmFtZSIsImV4ZWN1dGUiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY29sbCIsImJzb25PcHRpb25zIiwicmVhZFByZWZlcmVuY2UiLCJidWxrIiwib3JkZXJlZCIsImluaXRpYWxpemVVbm9yZGVyZWRCdWxrT3AiLCJpbml0aWFsaXplT3JkZXJlZEJ1bGtPcCIsImkiLCJsZW5ndGgiLCJyYXciLCJyZXN1bHQiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiV1JJVEVfT1BFUkFUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/bulk_write.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/collections.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/collections.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CollectionsOperation = void 0;\nconst collection_1 = __webpack_require__(/*! ../collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class CollectionsOperation extends operation_1.AbstractOperation {\n    constructor(db, options){\n        super(options);\n        this.options = options;\n        this.db = db;\n    }\n    get commandName() {\n        return \"listCollections\";\n    }\n    async execute(server, session) {\n        // Let's get the collection names\n        const documents = await this.db.listCollections({}, {\n            ...this.options,\n            nameOnly: true,\n            readPreference: this.readPreference,\n            session\n        }).toArray();\n        const collections = [];\n        for (const { name } of documents){\n            if (!name.includes(\"$\")) {\n                // Filter collections removing any illegal ones\n                collections.push(new collection_1.Collection(this.db, name, this.db.s.options));\n            }\n        }\n        // Return the collection objects\n        return collections;\n    }\n}\nexports.CollectionsOperation = CollectionsOperation; //# sourceMappingURL=collections.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb2xsZWN0aW9ucy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsNEJBQTRCLEdBQUcsS0FBSztBQUNwQyxNQUFNRyxlQUFlQyxtQkFBT0EsQ0FBQyxxRUFBZTtBQUM1QyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsNkJBQTZCRyxZQUFZQyxpQkFBaUI7SUFDNURDLFlBQVlDLEVBQUUsRUFBRUMsT0FBTyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNELEVBQUUsR0FBR0E7SUFDZDtJQUNBLElBQUlFLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixpQ0FBaUM7UUFDakMsTUFBTUMsWUFBWSxNQUFNLElBQUksQ0FBQ04sRUFBRSxDQUMxQk8sZUFBZSxDQUFDLENBQUMsR0FBRztZQUFFLEdBQUcsSUFBSSxDQUFDTixPQUFPO1lBQUVPLFVBQVU7WUFBTUMsZ0JBQWdCLElBQUksQ0FBQ0EsY0FBYztZQUFFSjtRQUFRLEdBQ3BHSyxPQUFPO1FBQ1osTUFBTUMsY0FBYyxFQUFFO1FBQ3RCLEtBQUssTUFBTSxFQUFFQyxJQUFJLEVBQUUsSUFBSU4sVUFBVztZQUM5QixJQUFJLENBQUNNLEtBQUtDLFFBQVEsQ0FBQyxNQUFNO2dCQUNyQiwrQ0FBK0M7Z0JBQy9DRixZQUFZRyxJQUFJLENBQUMsSUFBSW5CLGFBQWFvQixVQUFVLENBQUMsSUFBSSxDQUFDZixFQUFFLEVBQUVZLE1BQU0sSUFBSSxDQUFDWixFQUFFLENBQUNnQixDQUFDLENBQUNmLE9BQU87WUFDakY7UUFDSjtRQUNBLGdDQUFnQztRQUNoQyxPQUFPVTtJQUNYO0FBQ0o7QUFDQW5CLDRCQUE0QixHQUFHRSxzQkFDL0IsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2NvbGxlY3Rpb25zLmpzPzFiN2QiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbGxlY3Rpb25zT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgY29sbGVjdGlvbl8xID0gcmVxdWlyZShcIi4uL2NvbGxlY3Rpb25cIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENvbGxlY3Rpb25zT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdsaXN0Q29sbGVjdGlvbnMnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICAvLyBMZXQncyBnZXQgdGhlIGNvbGxlY3Rpb24gbmFtZXNcbiAgICAgICAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgdGhpcy5kYlxuICAgICAgICAgICAgLmxpc3RDb2xsZWN0aW9ucyh7fSwgeyAuLi50aGlzLm9wdGlvbnMsIG5hbWVPbmx5OiB0cnVlLCByZWFkUHJlZmVyZW5jZTogdGhpcy5yZWFkUHJlZmVyZW5jZSwgc2Vzc2lvbiB9KVxuICAgICAgICAgICAgLnRvQXJyYXkoKTtcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB7IG5hbWUgfSBvZiBkb2N1bWVudHMpIHtcbiAgICAgICAgICAgIGlmICghbmFtZS5pbmNsdWRlcygnJCcpKSB7XG4gICAgICAgICAgICAgICAgLy8gRmlsdGVyIGNvbGxlY3Rpb25zIHJlbW92aW5nIGFueSBpbGxlZ2FsIG9uZXNcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9ucy5wdXNoKG5ldyBjb2xsZWN0aW9uXzEuQ29sbGVjdGlvbih0aGlzLmRiLCBuYW1lLCB0aGlzLmRiLnMub3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiB0aGUgY29sbGVjdGlvbiBvYmplY3RzXG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9ucztcbiAgICB9XG59XG5leHBvcnRzLkNvbGxlY3Rpb25zT3BlcmF0aW9uID0gQ29sbGVjdGlvbnNPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsZWN0aW9ucy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDb2xsZWN0aW9uc09wZXJhdGlvbiIsImNvbGxlY3Rpb25fMSIsInJlcXVpcmUiLCJvcGVyYXRpb25fMSIsIkFic3RyYWN0T3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJkYiIsIm9wdGlvbnMiLCJjb21tYW5kTmFtZSIsImV4ZWN1dGUiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiZG9jdW1lbnRzIiwibGlzdENvbGxlY3Rpb25zIiwibmFtZU9ubHkiLCJyZWFkUHJlZmVyZW5jZSIsInRvQXJyYXkiLCJjb2xsZWN0aW9ucyIsIm5hbWUiLCJpbmNsdWRlcyIsInB1c2giLCJDb2xsZWN0aW9uIiwicyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/collections.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/command.js":
/*!********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/command.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CommandOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst explain_1 = __webpack_require__(/*! ../explain */ \"(ssr)/./node_modules/mongodb/lib/explain.js\");\nconst read_concern_1 = __webpack_require__(/*! ../read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst server_selection_1 = __webpack_require__(/*! ../sdam/server_selection */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class CommandOperation extends operation_1.AbstractOperation {\n    constructor(parent, options){\n        super(options);\n        this.options = options ?? {};\n        // NOTE: this was explicitly added for the add/remove user operations, it's likely\n        //       something we'd want to reconsider. Perhaps those commands can use `Admin`\n        //       as a parent?\n        const dbNameOverride = options?.dbName || options?.authdb;\n        if (dbNameOverride) {\n            this.ns = new utils_1.MongoDBNamespace(dbNameOverride, \"$cmd\");\n        } else {\n            this.ns = parent ? parent.s.namespace.withCollection(\"$cmd\") : new utils_1.MongoDBNamespace(\"admin\", \"$cmd\");\n        }\n        this.readConcern = read_concern_1.ReadConcern.fromOptions(options);\n        this.writeConcern = write_concern_1.WriteConcern.fromOptions(options);\n        if (this.hasAspect(operation_1.Aspect.EXPLAINABLE)) {\n            this.explain = explain_1.Explain.fromOptions(options);\n        } else if (options?.explain != null) {\n            throw new error_1.MongoInvalidArgumentError(`Option \"explain\" is not supported on this command`);\n        }\n    }\n    get canRetryWrite() {\n        if (this.hasAspect(operation_1.Aspect.EXPLAINABLE)) {\n            return this.explain == null;\n        }\n        return true;\n    }\n    async executeCommand(server, session, cmd) {\n        // TODO: consider making this a non-enumerable property\n        this.server = server;\n        const options = {\n            ...this.options,\n            ...this.bsonOptions,\n            readPreference: this.readPreference,\n            session\n        };\n        const serverWireVersion = (0, utils_1.maxWireVersion)(server);\n        const inTransaction = this.session && this.session.inTransaction();\n        if (this.readConcern && (0, utils_1.commandSupportsReadConcern)(cmd) && !inTransaction) {\n            Object.assign(cmd, {\n                readConcern: this.readConcern\n            });\n        }\n        if (this.trySecondaryWrite && serverWireVersion < server_selection_1.MIN_SECONDARY_WRITE_WIRE_VERSION) {\n            options.omitReadPreference = true;\n        }\n        if (this.writeConcern && this.hasAspect(operation_1.Aspect.WRITE_OPERATION) && !inTransaction) {\n            write_concern_1.WriteConcern.apply(cmd, this.writeConcern);\n        }\n        if (options.collation && typeof options.collation === \"object\" && !this.hasAspect(operation_1.Aspect.SKIP_COLLATION)) {\n            Object.assign(cmd, {\n                collation: options.collation\n            });\n        }\n        if (typeof options.maxTimeMS === \"number\") {\n            cmd.maxTimeMS = options.maxTimeMS;\n        }\n        if (this.hasAspect(operation_1.Aspect.EXPLAINABLE) && this.explain) {\n            cmd = (0, utils_1.decorateWithExplain)(cmd, this.explain);\n        }\n        return server.command(this.ns, cmd, options);\n    }\n}\nexports.CommandOperation = CommandOperation; //# sourceMappingURL=command.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb21tYW5kLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx3QkFBd0IsR0FBRyxLQUFLO0FBQ2hDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLFlBQVlELG1CQUFPQSxDQUFDLCtEQUFZO0FBQ3RDLE1BQU1FLGlCQUFpQkYsbUJBQU9BLENBQUMseUVBQWlCO0FBQ2hELE1BQU1HLHFCQUFxQkgsbUJBQU9BLENBQUMsMkZBQTBCO0FBQzdELE1BQU1JLFVBQVVKLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1LLGtCQUFrQkwsbUJBQU9BLENBQUMsMkVBQWtCO0FBQ2xELE1BQU1NLGNBQWNOLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZCxNQUFNRix5QkFBeUJRLFlBQVlDLGlCQUFpQjtJQUN4REMsWUFBWUMsTUFBTSxFQUFFQyxPQUFPLENBQUU7UUFDekIsS0FBSyxDQUFDQTtRQUNOLElBQUksQ0FBQ0EsT0FBTyxHQUFHQSxXQUFXLENBQUM7UUFDM0Isa0ZBQWtGO1FBQ2xGLGtGQUFrRjtRQUNsRixxQkFBcUI7UUFDckIsTUFBTUMsaUJBQWlCRCxTQUFTRSxVQUFVRixTQUFTRztRQUNuRCxJQUFJRixnQkFBZ0I7WUFDaEIsSUFBSSxDQUFDRyxFQUFFLEdBQUcsSUFBSVYsUUFBUVcsZ0JBQWdCLENBQUNKLGdCQUFnQjtRQUMzRCxPQUNLO1lBQ0QsSUFBSSxDQUFDRyxFQUFFLEdBQUdMLFNBQ0pBLE9BQU9PLENBQUMsQ0FBQ0MsU0FBUyxDQUFDQyxjQUFjLENBQUMsVUFDbEMsSUFBSWQsUUFBUVcsZ0JBQWdCLENBQUMsU0FBUztRQUNoRDtRQUNBLElBQUksQ0FBQ0ksV0FBVyxHQUFHakIsZUFBZWtCLFdBQVcsQ0FBQ0MsV0FBVyxDQUFDWDtRQUMxRCxJQUFJLENBQUNZLFlBQVksR0FBR2pCLGdCQUFnQmtCLFlBQVksQ0FBQ0YsV0FBVyxDQUFDWDtRQUM3RCxJQUFJLElBQUksQ0FBQ2MsU0FBUyxDQUFDbEIsWUFBWW1CLE1BQU0sQ0FBQ0MsV0FBVyxHQUFHO1lBQ2hELElBQUksQ0FBQ0MsT0FBTyxHQUFHMUIsVUFBVTJCLE9BQU8sQ0FBQ1AsV0FBVyxDQUFDWDtRQUNqRCxPQUNLLElBQUlBLFNBQVNpQixXQUFXLE1BQU07WUFDL0IsTUFBTSxJQUFJNUIsUUFBUThCLHlCQUF5QixDQUFDLENBQUMsaURBQWlELENBQUM7UUFDbkc7SUFDSjtJQUNBLElBQUlDLGdCQUFnQjtRQUNoQixJQUFJLElBQUksQ0FBQ04sU0FBUyxDQUFDbEIsWUFBWW1CLE1BQU0sQ0FBQ0MsV0FBVyxHQUFHO1lBQ2hELE9BQU8sSUFBSSxDQUFDQyxPQUFPLElBQUk7UUFDM0I7UUFDQSxPQUFPO0lBQ1g7SUFDQSxNQUFNSSxlQUFlQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsR0FBRyxFQUFFO1FBQ3ZDLHVEQUF1RDtRQUN2RCxJQUFJLENBQUNGLE1BQU0sR0FBR0E7UUFDZCxNQUFNdEIsVUFBVTtZQUNaLEdBQUcsSUFBSSxDQUFDQSxPQUFPO1lBQ2YsR0FBRyxJQUFJLENBQUN5QixXQUFXO1lBQ25CQyxnQkFBZ0IsSUFBSSxDQUFDQSxjQUFjO1lBQ25DSDtRQUNKO1FBQ0EsTUFBTUksb0JBQW9CLENBQUMsR0FBR2pDLFFBQVFrQyxjQUFjLEVBQUVOO1FBQ3RELE1BQU1PLGdCQUFnQixJQUFJLENBQUNOLE9BQU8sSUFBSSxJQUFJLENBQUNBLE9BQU8sQ0FBQ00sYUFBYTtRQUNoRSxJQUFJLElBQUksQ0FBQ3BCLFdBQVcsSUFBSSxDQUFDLEdBQUdmLFFBQVFvQywwQkFBMEIsRUFBRU4sUUFBUSxDQUFDSyxlQUFlO1lBQ3BGN0MsT0FBTytDLE1BQU0sQ0FBQ1AsS0FBSztnQkFBRWYsYUFBYSxJQUFJLENBQUNBLFdBQVc7WUFBQztRQUN2RDtRQUNBLElBQUksSUFBSSxDQUFDdUIsaUJBQWlCLElBQUlMLG9CQUFvQmxDLG1CQUFtQndDLGdDQUFnQyxFQUFFO1lBQ25HakMsUUFBUWtDLGtCQUFrQixHQUFHO1FBQ2pDO1FBQ0EsSUFBSSxJQUFJLENBQUN0QixZQUFZLElBQUksSUFBSSxDQUFDRSxTQUFTLENBQUNsQixZQUFZbUIsTUFBTSxDQUFDb0IsZUFBZSxLQUFLLENBQUNOLGVBQWU7WUFDM0ZsQyxnQkFBZ0JrQixZQUFZLENBQUN1QixLQUFLLENBQUNaLEtBQUssSUFBSSxDQUFDWixZQUFZO1FBQzdEO1FBQ0EsSUFBSVosUUFBUXFDLFNBQVMsSUFDakIsT0FBT3JDLFFBQVFxQyxTQUFTLEtBQUssWUFDN0IsQ0FBQyxJQUFJLENBQUN2QixTQUFTLENBQUNsQixZQUFZbUIsTUFBTSxDQUFDdUIsY0FBYyxHQUFHO1lBQ3BEdEQsT0FBTytDLE1BQU0sQ0FBQ1AsS0FBSztnQkFBRWEsV0FBV3JDLFFBQVFxQyxTQUFTO1lBQUM7UUFDdEQ7UUFDQSxJQUFJLE9BQU9yQyxRQUFRdUMsU0FBUyxLQUFLLFVBQVU7WUFDdkNmLElBQUllLFNBQVMsR0FBR3ZDLFFBQVF1QyxTQUFTO1FBQ3JDO1FBQ0EsSUFBSSxJQUFJLENBQUN6QixTQUFTLENBQUNsQixZQUFZbUIsTUFBTSxDQUFDQyxXQUFXLEtBQUssSUFBSSxDQUFDQyxPQUFPLEVBQUU7WUFDaEVPLE1BQU0sQ0FBQyxHQUFHOUIsUUFBUThDLG1CQUFtQixFQUFFaEIsS0FBSyxJQUFJLENBQUNQLE9BQU87UUFDNUQ7UUFDQSxPQUFPSyxPQUFPbUIsT0FBTyxDQUFDLElBQUksQ0FBQ3JDLEVBQUUsRUFBRW9CLEtBQUt4QjtJQUN4QztBQUNKO0FBQ0FkLHdCQUF3QixHQUFHRSxrQkFDM0IsbUNBQW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2NvbW1hbmQuanM/NzY4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29tbWFuZE9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBleHBsYWluXzEgPSByZXF1aXJlKFwiLi4vZXhwbGFpblwiKTtcbmNvbnN0IHJlYWRfY29uY2Vybl8xID0gcmVxdWlyZShcIi4uL3JlYWRfY29uY2VyblwiKTtcbmNvbnN0IHNlcnZlcl9zZWxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi9zZGFtL3NlcnZlcl9zZWxlY3Rpb25cIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4uL3dyaXRlX2NvbmNlcm5cIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENvbW1hbmRPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICAvLyBOT1RFOiB0aGlzIHdhcyBleHBsaWNpdGx5IGFkZGVkIGZvciB0aGUgYWRkL3JlbW92ZSB1c2VyIG9wZXJhdGlvbnMsIGl0J3MgbGlrZWx5XG4gICAgICAgIC8vICAgICAgIHNvbWV0aGluZyB3ZSdkIHdhbnQgdG8gcmVjb25zaWRlci4gUGVyaGFwcyB0aG9zZSBjb21tYW5kcyBjYW4gdXNlIGBBZG1pbmBcbiAgICAgICAgLy8gICAgICAgYXMgYSBwYXJlbnQ/XG4gICAgICAgIGNvbnN0IGRiTmFtZU92ZXJyaWRlID0gb3B0aW9ucz8uZGJOYW1lIHx8IG9wdGlvbnM/LmF1dGhkYjtcbiAgICAgICAgaWYgKGRiTmFtZU92ZXJyaWRlKSB7XG4gICAgICAgICAgICB0aGlzLm5zID0gbmV3IHV0aWxzXzEuTW9uZ29EQk5hbWVzcGFjZShkYk5hbWVPdmVycmlkZSwgJyRjbWQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubnMgPSBwYXJlbnRcbiAgICAgICAgICAgICAgICA/IHBhcmVudC5zLm5hbWVzcGFjZS53aXRoQ29sbGVjdGlvbignJGNtZCcpXG4gICAgICAgICAgICAgICAgOiBuZXcgdXRpbHNfMS5Nb25nb0RCTmFtZXNwYWNlKCdhZG1pbicsICckY21kJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWFkQ29uY2VybiA9IHJlYWRfY29uY2Vybl8xLlJlYWRDb25jZXJuLmZyb21PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLndyaXRlQ29uY2VybiA9IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGlmICh0aGlzLmhhc0FzcGVjdChvcGVyYXRpb25fMS5Bc3BlY3QuRVhQTEFJTkFCTEUpKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGxhaW4gPSBleHBsYWluXzEuRXhwbGFpbi5mcm9tT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zPy5leHBsYWluICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYE9wdGlvbiBcImV4cGxhaW5cIiBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgY29tbWFuZGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjYW5SZXRyeVdyaXRlKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNBc3BlY3Qob3BlcmF0aW9uXzEuQXNwZWN0LkVYUExBSU5BQkxFKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhwbGFpbiA9PSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlQ29tbWFuZChzZXJ2ZXIsIHNlc3Npb24sIGNtZCkge1xuICAgICAgICAvLyBUT0RPOiBjb25zaWRlciBtYWtpbmcgdGhpcyBhIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5XG4gICAgICAgIHRoaXMuc2VydmVyID0gc2VydmVyO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgLi4udGhpcy5ic29uT3B0aW9ucyxcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlOiB0aGlzLnJlYWRQcmVmZXJlbmNlLFxuICAgICAgICAgICAgc2Vzc2lvblxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzZXJ2ZXJXaXJlVmVyc2lvbiA9ICgwLCB1dGlsc18xLm1heFdpcmVWZXJzaW9uKShzZXJ2ZXIpO1xuICAgICAgICBjb25zdCBpblRyYW5zYWN0aW9uID0gdGhpcy5zZXNzaW9uICYmIHRoaXMuc2Vzc2lvbi5pblRyYW5zYWN0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLnJlYWRDb25jZXJuICYmICgwLCB1dGlsc18xLmNvbW1hbmRTdXBwb3J0c1JlYWRDb25jZXJuKShjbWQpICYmICFpblRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNtZCwgeyByZWFkQ29uY2VybjogdGhpcy5yZWFkQ29uY2VybiB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50cnlTZWNvbmRhcnlXcml0ZSAmJiBzZXJ2ZXJXaXJlVmVyc2lvbiA8IHNlcnZlcl9zZWxlY3Rpb25fMS5NSU5fU0VDT05EQVJZX1dSSVRFX1dJUkVfVkVSU0lPTikge1xuICAgICAgICAgICAgb3B0aW9ucy5vbWl0UmVhZFByZWZlcmVuY2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLndyaXRlQ29uY2VybiAmJiB0aGlzLmhhc0FzcGVjdChvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OKSAmJiAhaW5UcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgd3JpdGVfY29uY2Vybl8xLldyaXRlQ29uY2Vybi5hcHBseShjbWQsIHRoaXMud3JpdGVDb25jZXJuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5jb2xsYXRpb24gJiZcbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmNvbGxhdGlvbiA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICF0aGlzLmhhc0FzcGVjdChvcGVyYXRpb25fMS5Bc3BlY3QuU0tJUF9DT0xMQVRJT04pKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNtZCwgeyBjb2xsYXRpb246IG9wdGlvbnMuY29sbGF0aW9uIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5tYXhUaW1lTVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjbWQubWF4VGltZU1TID0gb3B0aW9ucy5tYXhUaW1lTVM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFzQXNwZWN0KG9wZXJhdGlvbl8xLkFzcGVjdC5FWFBMQUlOQUJMRSkgJiYgdGhpcy5leHBsYWluKSB7XG4gICAgICAgICAgICBjbWQgPSAoMCwgdXRpbHNfMS5kZWNvcmF0ZVdpdGhFeHBsYWluKShjbWQsIHRoaXMuZXhwbGFpbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcnZlci5jb21tYW5kKHRoaXMubnMsIGNtZCwgb3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0cy5Db21tYW5kT3BlcmF0aW9uID0gQ29tbWFuZE9wZXJhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1hbmQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ29tbWFuZE9wZXJhdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwiZXhwbGFpbl8xIiwicmVhZF9jb25jZXJuXzEiLCJzZXJ2ZXJfc2VsZWN0aW9uXzEiLCJ1dGlsc18xIiwid3JpdGVfY29uY2Vybl8xIiwib3BlcmF0aW9uXzEiLCJBYnN0cmFjdE9wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwicGFyZW50Iiwib3B0aW9ucyIsImRiTmFtZU92ZXJyaWRlIiwiZGJOYW1lIiwiYXV0aGRiIiwibnMiLCJNb25nb0RCTmFtZXNwYWNlIiwicyIsIm5hbWVzcGFjZSIsIndpdGhDb2xsZWN0aW9uIiwicmVhZENvbmNlcm4iLCJSZWFkQ29uY2VybiIsImZyb21PcHRpb25zIiwid3JpdGVDb25jZXJuIiwiV3JpdGVDb25jZXJuIiwiaGFzQXNwZWN0IiwiQXNwZWN0IiwiRVhQTEFJTkFCTEUiLCJleHBsYWluIiwiRXhwbGFpbiIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJjYW5SZXRyeVdyaXRlIiwiZXhlY3V0ZUNvbW1hbmQiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY21kIiwiYnNvbk9wdGlvbnMiLCJyZWFkUHJlZmVyZW5jZSIsInNlcnZlcldpcmVWZXJzaW9uIiwibWF4V2lyZVZlcnNpb24iLCJpblRyYW5zYWN0aW9uIiwiY29tbWFuZFN1cHBvcnRzUmVhZENvbmNlcm4iLCJhc3NpZ24iLCJ0cnlTZWNvbmRhcnlXcml0ZSIsIk1JTl9TRUNPTkRBUllfV1JJVEVfV0lSRV9WRVJTSU9OIiwib21pdFJlYWRQcmVmZXJlbmNlIiwiV1JJVEVfT1BFUkFUSU9OIiwiYXBwbHkiLCJjb2xsYXRpb24iLCJTS0lQX0NPTExBVElPTiIsIm1heFRpbWVNUyIsImRlY29yYXRlV2l0aEV4cGxhaW4iLCJjb21tYW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/command.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/common_functions.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/common_functions.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.maybeAddIdToDocuments = exports.indexInformation = void 0;\nasync function indexInformation(db, name, options) {\n    if (options == null) {\n        options = {};\n    }\n    // If we specified full information\n    const full = options.full == null ? false : options.full;\n    // Get the list of indexes of the specified collection\n    const indexes = await db.collection(name).listIndexes(options).toArray();\n    if (full) return indexes;\n    const info = {};\n    for (const index of indexes){\n        info[index.name] = Object.entries(index.key);\n    }\n    return info;\n}\nexports.indexInformation = indexInformation;\nfunction maybeAddIdToDocuments(coll, docOrDocs, options) {\n    const forceServerObjectId = typeof options.forceServerObjectId === \"boolean\" ? options.forceServerObjectId : coll.s.db.options?.forceServerObjectId;\n    // no need to modify the docs if server sets the ObjectId\n    if (forceServerObjectId === true) {\n        return docOrDocs;\n    }\n    const transform = (doc)=>{\n        if (doc._id == null) {\n            doc._id = coll.s.pkFactory.createPk();\n        }\n        return doc;\n    };\n    return Array.isArray(docOrDocs) ? docOrDocs.map(transform) : transform(docOrDocs);\n}\nexports.maybeAddIdToDocuments = maybeAddIdToDocuments; //# sourceMappingURL=common_functions.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb21tb25fZnVuY3Rpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw2QkFBNkIsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUNoRSxlQUFlRyxpQkFBaUJDLEVBQUUsRUFBRUMsSUFBSSxFQUFFQyxPQUFPO0lBQzdDLElBQUlBLFdBQVcsTUFBTTtRQUNqQkEsVUFBVSxDQUFDO0lBQ2Y7SUFDQSxtQ0FBbUM7SUFDbkMsTUFBTUMsT0FBT0QsUUFBUUMsSUFBSSxJQUFJLE9BQU8sUUFBUUQsUUFBUUMsSUFBSTtJQUN4RCxzREFBc0Q7SUFDdEQsTUFBTUMsVUFBVSxNQUFNSixHQUFHSyxVQUFVLENBQUNKLE1BQU1LLFdBQVcsQ0FBQ0osU0FBU0ssT0FBTztJQUN0RSxJQUFJSixNQUNBLE9BQU9DO0lBQ1gsTUFBTUksT0FBTyxDQUFDO0lBQ2QsS0FBSyxNQUFNQyxTQUFTTCxRQUFTO1FBQ3pCSSxJQUFJLENBQUNDLE1BQU1SLElBQUksQ0FBQyxHQUFHUCxPQUFPZ0IsT0FBTyxDQUFDRCxNQUFNRSxHQUFHO0lBQy9DO0lBQ0EsT0FBT0g7QUFDWDtBQUNBWix3QkFBd0IsR0FBR0c7QUFDM0IsU0FBU0Qsc0JBQXNCYyxJQUFJLEVBQUVDLFNBQVMsRUFBRVgsT0FBTztJQUNuRCxNQUFNWSxzQkFBc0IsT0FBT1osUUFBUVksbUJBQW1CLEtBQUssWUFDN0RaLFFBQVFZLG1CQUFtQixHQUMzQkYsS0FBS0csQ0FBQyxDQUFDZixFQUFFLENBQUNFLE9BQU8sRUFBRVk7SUFDekIseURBQXlEO0lBQ3pELElBQUlBLHdCQUF3QixNQUFNO1FBQzlCLE9BQU9EO0lBQ1g7SUFDQSxNQUFNRyxZQUFZLENBQUNDO1FBQ2YsSUFBSUEsSUFBSUMsR0FBRyxJQUFJLE1BQU07WUFDakJELElBQUlDLEdBQUcsR0FBR04sS0FBS0csQ0FBQyxDQUFDSSxTQUFTLENBQUNDLFFBQVE7UUFDdkM7UUFDQSxPQUFPSDtJQUNYO0lBQ0EsT0FBT0ksTUFBTUMsT0FBTyxDQUFDVCxhQUFhQSxVQUFVVSxHQUFHLENBQUNQLGFBQWFBLFVBQVVIO0FBQzNFO0FBQ0FqQiw2QkFBNkIsR0FBR0UsdUJBQ2hDLDRDQUE0QyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb21tb25fZnVuY3Rpb25zLmpzPzQ5ODYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1heWJlQWRkSWRUb0RvY3VtZW50cyA9IGV4cG9ydHMuaW5kZXhJbmZvcm1hdGlvbiA9IHZvaWQgMDtcbmFzeW5jIGZ1bmN0aW9uIGluZGV4SW5mb3JtYXRpb24oZGIsIG5hbWUsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgLy8gSWYgd2Ugc3BlY2lmaWVkIGZ1bGwgaW5mb3JtYXRpb25cbiAgICBjb25zdCBmdWxsID0gb3B0aW9ucy5mdWxsID09IG51bGwgPyBmYWxzZSA6IG9wdGlvbnMuZnVsbDtcbiAgICAvLyBHZXQgdGhlIGxpc3Qgb2YgaW5kZXhlcyBvZiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25cbiAgICBjb25zdCBpbmRleGVzID0gYXdhaXQgZGIuY29sbGVjdGlvbihuYW1lKS5saXN0SW5kZXhlcyhvcHRpb25zKS50b0FycmF5KCk7XG4gICAgaWYgKGZ1bGwpXG4gICAgICAgIHJldHVybiBpbmRleGVzO1xuICAgIGNvbnN0IGluZm8gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGluZGV4IG9mIGluZGV4ZXMpIHtcbiAgICAgICAgaW5mb1tpbmRleC5uYW1lXSA9IE9iamVjdC5lbnRyaWVzKGluZGV4LmtleSk7XG4gICAgfVxuICAgIHJldHVybiBpbmZvO1xufVxuZXhwb3J0cy5pbmRleEluZm9ybWF0aW9uID0gaW5kZXhJbmZvcm1hdGlvbjtcbmZ1bmN0aW9uIG1heWJlQWRkSWRUb0RvY3VtZW50cyhjb2xsLCBkb2NPckRvY3MsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBmb3JjZVNlcnZlck9iamVjdElkID0gdHlwZW9mIG9wdGlvbnMuZm9yY2VTZXJ2ZXJPYmplY3RJZCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgID8gb3B0aW9ucy5mb3JjZVNlcnZlck9iamVjdElkXG4gICAgICAgIDogY29sbC5zLmRiLm9wdGlvbnM/LmZvcmNlU2VydmVyT2JqZWN0SWQ7XG4gICAgLy8gbm8gbmVlZCB0byBtb2RpZnkgdGhlIGRvY3MgaWYgc2VydmVyIHNldHMgdGhlIE9iamVjdElkXG4gICAgaWYgKGZvcmNlU2VydmVyT2JqZWN0SWQgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGRvY09yRG9jcztcbiAgICB9XG4gICAgY29uc3QgdHJhbnNmb3JtID0gKGRvYykgPT4ge1xuICAgICAgICBpZiAoZG9jLl9pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBkb2MuX2lkID0gY29sbC5zLnBrRmFjdG9yeS5jcmVhdGVQaygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb2M7XG4gICAgfTtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkb2NPckRvY3MpID8gZG9jT3JEb2NzLm1hcCh0cmFuc2Zvcm0pIDogdHJhbnNmb3JtKGRvY09yRG9jcyk7XG59XG5leHBvcnRzLm1heWJlQWRkSWRUb0RvY3VtZW50cyA9IG1heWJlQWRkSWRUb0RvY3VtZW50cztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbl9mdW5jdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwibWF5YmVBZGRJZFRvRG9jdW1lbnRzIiwiaW5kZXhJbmZvcm1hdGlvbiIsImRiIiwibmFtZSIsIm9wdGlvbnMiLCJmdWxsIiwiaW5kZXhlcyIsImNvbGxlY3Rpb24iLCJsaXN0SW5kZXhlcyIsInRvQXJyYXkiLCJpbmZvIiwiaW5kZXgiLCJlbnRyaWVzIiwia2V5IiwiY29sbCIsImRvY09yRG9jcyIsImZvcmNlU2VydmVyT2JqZWN0SWQiLCJzIiwidHJhbnNmb3JtIiwiZG9jIiwiX2lkIiwicGtGYWN0b3J5IiwiY3JlYXRlUGsiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/common_functions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/count.js":
/*!******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/count.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CountOperation = void 0;\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class CountOperation extends command_1.CommandOperation {\n    constructor(namespace, filter, options){\n        super({\n            s: {\n                namespace: namespace\n            }\n        }, options);\n        this.options = options;\n        this.collectionName = namespace.collection;\n        this.query = filter;\n    }\n    get commandName() {\n        return \"count\";\n    }\n    async execute(server, session) {\n        const options = this.options;\n        const cmd = {\n            count: this.collectionName,\n            query: this.query\n        };\n        if (typeof options.limit === \"number\") {\n            cmd.limit = options.limit;\n        }\n        if (typeof options.skip === \"number\") {\n            cmd.skip = options.skip;\n        }\n        if (options.hint != null) {\n            cmd.hint = options.hint;\n        }\n        if (typeof options.maxTimeMS === \"number\") {\n            cmd.maxTimeMS = options.maxTimeMS;\n        }\n        const result = await super.executeCommand(server, session, cmd);\n        return result ? result.n : 0;\n    }\n}\nexports.CountOperation = CountOperation;\n(0, operation_1.defineAspects)(CountOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE\n]); //# sourceMappingURL=count.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb3VudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUcsS0FBSztBQUM5QixNQUFNRyxZQUFZQyxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsdUJBQXVCQyxVQUFVRyxnQkFBZ0I7SUFDbkRDLFlBQVlDLFNBQVMsRUFBRUMsTUFBTSxFQUFFQyxPQUFPLENBQUU7UUFDcEMsS0FBSyxDQUFDO1lBQUVDLEdBQUc7Z0JBQUVILFdBQVdBO1lBQVU7UUFBRSxHQUFHRTtRQUN2QyxJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNFLGNBQWMsR0FBR0osVUFBVUssVUFBVTtRQUMxQyxJQUFJLENBQUNDLEtBQUssR0FBR0w7SUFDakI7SUFDQSxJQUFJTSxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsTUFBTVIsVUFBVSxJQUFJLENBQUNBLE9BQU87UUFDNUIsTUFBTVMsTUFBTTtZQUNSQyxPQUFPLElBQUksQ0FBQ1IsY0FBYztZQUMxQkUsT0FBTyxJQUFJLENBQUNBLEtBQUs7UUFDckI7UUFDQSxJQUFJLE9BQU9KLFFBQVFXLEtBQUssS0FBSyxVQUFVO1lBQ25DRixJQUFJRSxLQUFLLEdBQUdYLFFBQVFXLEtBQUs7UUFDN0I7UUFDQSxJQUFJLE9BQU9YLFFBQVFZLElBQUksS0FBSyxVQUFVO1lBQ2xDSCxJQUFJRyxJQUFJLEdBQUdaLFFBQVFZLElBQUk7UUFDM0I7UUFDQSxJQUFJWixRQUFRYSxJQUFJLElBQUksTUFBTTtZQUN0QkosSUFBSUksSUFBSSxHQUFHYixRQUFRYSxJQUFJO1FBQzNCO1FBQ0EsSUFBSSxPQUFPYixRQUFRYyxTQUFTLEtBQUssVUFBVTtZQUN2Q0wsSUFBSUssU0FBUyxHQUFHZCxRQUFRYyxTQUFTO1FBQ3JDO1FBQ0EsTUFBTUMsU0FBUyxNQUFNLEtBQUssQ0FBQ0MsZUFBZVQsUUFBUUMsU0FBU0M7UUFDM0QsT0FBT00sU0FBU0EsT0FBT0UsQ0FBQyxHQUFHO0lBQy9CO0FBQ0o7QUFDQTNCLHNCQUFzQixHQUFHRTtBQUN4QixJQUFHRyxZQUFZdUIsYUFBYSxFQUFFMUIsZ0JBQWdCO0lBQUNHLFlBQVl3QixNQUFNLENBQUNDLGNBQWM7SUFBRXpCLFlBQVl3QixNQUFNLENBQUNFLFNBQVM7Q0FBQyxHQUNoSCxpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvY291bnQuanM/NzIyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ291bnRPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBDb3VudE9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lc3BhY2UsIGZpbHRlciwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcih7IHM6IHsgbmFtZXNwYWNlOiBuYW1lc3BhY2UgfSB9LCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uTmFtZSA9IG5hbWVzcGFjZS5jb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gZmlsdGVyO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnY291bnQnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBjbWQgPSB7XG4gICAgICAgICAgICBjb3VudDogdGhpcy5jb2xsZWN0aW9uTmFtZSxcbiAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLnF1ZXJ5XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5saW1pdCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNtZC5saW1pdCA9IG9wdGlvbnMubGltaXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNraXAgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjbWQuc2tpcCA9IG9wdGlvbnMuc2tpcDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oaW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNtZC5oaW50ID0gb3B0aW9ucy5oaW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5tYXhUaW1lTVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjbWQubWF4VGltZU1TID0gb3B0aW9ucy5tYXhUaW1lTVM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3VwZXIuZXhlY3V0ZUNvbW1hbmQoc2VydmVyLCBzZXNzaW9uLCBjbWQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0ID8gcmVzdWx0Lm4gOiAwO1xuICAgIH1cbn1cbmV4cG9ydHMuQ291bnRPcGVyYXRpb24gPSBDb3VudE9wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShDb3VudE9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5SRUFEX09QRVJBVElPTiwgb3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRV0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y291bnQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ291bnRPcGVyYXRpb24iLCJjb21tYW5kXzEiLCJyZXF1aXJlIiwib3BlcmF0aW9uXzEiLCJDb21tYW5kT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJuYW1lc3BhY2UiLCJmaWx0ZXIiLCJvcHRpb25zIiwicyIsImNvbGxlY3Rpb25OYW1lIiwiY29sbGVjdGlvbiIsInF1ZXJ5IiwiY29tbWFuZE5hbWUiLCJleGVjdXRlIiwic2VydmVyIiwic2Vzc2lvbiIsImNtZCIsImNvdW50IiwibGltaXQiLCJza2lwIiwiaGludCIsIm1heFRpbWVNUyIsInJlc3VsdCIsImV4ZWN1dGVDb21tYW5kIiwibiIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRUFEX09QRVJBVElPTiIsIlJFVFJZQUJMRSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/count.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/count_documents.js":
/*!****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/count_documents.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CountDocumentsOperation = void 0;\nconst aggregate_1 = __webpack_require__(/*! ./aggregate */ \"(ssr)/./node_modules/mongodb/lib/operations/aggregate.js\");\n/** @internal */ class CountDocumentsOperation extends aggregate_1.AggregateOperation {\n    constructor(collection, query, options){\n        const pipeline = [];\n        pipeline.push({\n            $match: query\n        });\n        if (typeof options.skip === \"number\") {\n            pipeline.push({\n                $skip: options.skip\n            });\n        }\n        if (typeof options.limit === \"number\") {\n            pipeline.push({\n                $limit: options.limit\n            });\n        }\n        pipeline.push({\n            $group: {\n                _id: 1,\n                n: {\n                    $sum: 1\n                }\n            }\n        });\n        super(collection.s.namespace, pipeline, options);\n    }\n    async execute(server, session) {\n        const result = await super.execute(server, session);\n        // NOTE: We're avoiding creating a cursor here to reduce the callstack.\n        const response = result;\n        if (response.cursor == null || response.cursor.firstBatch == null) {\n            return 0;\n        }\n        const docs = response.cursor.firstBatch;\n        return docs.length ? docs[0].n : 0;\n    }\n}\nexports.CountDocumentsOperation = CountDocumentsOperation; //# sourceMappingURL=count_documents.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jb3VudF9kb2N1bWVudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELCtCQUErQixHQUFHLEtBQUs7QUFDdkMsTUFBTUcsY0FBY0MsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLGdDQUFnQ0MsWUFBWUUsa0JBQWtCO0lBQ2hFQyxZQUFZQyxVQUFVLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxDQUFFO1FBQ3BDLE1BQU1DLFdBQVcsRUFBRTtRQUNuQkEsU0FBU0MsSUFBSSxDQUFDO1lBQUVDLFFBQVFKO1FBQU07UUFDOUIsSUFBSSxPQUFPQyxRQUFRSSxJQUFJLEtBQUssVUFBVTtZQUNsQ0gsU0FBU0MsSUFBSSxDQUFDO2dCQUFFRyxPQUFPTCxRQUFRSSxJQUFJO1lBQUM7UUFDeEM7UUFDQSxJQUFJLE9BQU9KLFFBQVFNLEtBQUssS0FBSyxVQUFVO1lBQ25DTCxTQUFTQyxJQUFJLENBQUM7Z0JBQUVLLFFBQVFQLFFBQVFNLEtBQUs7WUFBQztRQUMxQztRQUNBTCxTQUFTQyxJQUFJLENBQUM7WUFBRU0sUUFBUTtnQkFBRUMsS0FBSztnQkFBR0MsR0FBRztvQkFBRUMsTUFBTTtnQkFBRTtZQUFFO1FBQUU7UUFDbkQsS0FBSyxDQUFDYixXQUFXYyxDQUFDLENBQUNDLFNBQVMsRUFBRVosVUFBVUQ7SUFDNUM7SUFDQSxNQUFNYyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixNQUFNQyxTQUFTLE1BQU0sS0FBSyxDQUFDSCxRQUFRQyxRQUFRQztRQUMzQyx1RUFBdUU7UUFDdkUsTUFBTUUsV0FBV0Q7UUFDakIsSUFBSUMsU0FBU0MsTUFBTSxJQUFJLFFBQVFELFNBQVNDLE1BQU0sQ0FBQ0MsVUFBVSxJQUFJLE1BQU07WUFDL0QsT0FBTztRQUNYO1FBQ0EsTUFBTUMsT0FBT0gsU0FBU0MsTUFBTSxDQUFDQyxVQUFVO1FBQ3ZDLE9BQU9DLEtBQUtDLE1BQU0sR0FBR0QsSUFBSSxDQUFDLEVBQUUsQ0FBQ1gsQ0FBQyxHQUFHO0lBQ3JDO0FBQ0o7QUFDQW5CLCtCQUErQixHQUFHRSx5QkFDbEMsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2NvdW50X2RvY3VtZW50cy5qcz8wMjU2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Db3VudERvY3VtZW50c09wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGFnZ3JlZ2F0ZV8xID0gcmVxdWlyZShcIi4vYWdncmVnYXRlXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQ291bnREb2N1bWVudHNPcGVyYXRpb24gZXh0ZW5kcyBhZ2dyZWdhdGVfMS5BZ2dyZWdhdGVPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBpcGVsaW5lID0gW107XG4gICAgICAgIHBpcGVsaW5lLnB1c2goeyAkbWF0Y2g6IHF1ZXJ5IH0pO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2tpcCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHBpcGVsaW5lLnB1c2goeyAkc2tpcDogb3B0aW9ucy5za2lwIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5saW1pdCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHBpcGVsaW5lLnB1c2goeyAkbGltaXQ6IG9wdGlvbnMubGltaXQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcGlwZWxpbmUucHVzaCh7ICRncm91cDogeyBfaWQ6IDEsIG46IHsgJHN1bTogMSB9IH0gfSk7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24ucy5uYW1lc3BhY2UsIHBpcGVsaW5lLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3VwZXIuZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pO1xuICAgICAgICAvLyBOT1RFOiBXZSdyZSBhdm9pZGluZyBjcmVhdGluZyBhIGN1cnNvciBoZXJlIHRvIHJlZHVjZSB0aGUgY2FsbHN0YWNrLlxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlc3VsdDtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmN1cnNvciA9PSBudWxsIHx8IHJlc3BvbnNlLmN1cnNvci5maXJzdEJhdGNoID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRvY3MgPSByZXNwb25zZS5jdXJzb3IuZmlyc3RCYXRjaDtcbiAgICAgICAgcmV0dXJuIGRvY3MubGVuZ3RoID8gZG9jc1swXS5uIDogMDtcbiAgICB9XG59XG5leHBvcnRzLkNvdW50RG9jdW1lbnRzT3BlcmF0aW9uID0gQ291bnREb2N1bWVudHNPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3VudF9kb2N1bWVudHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ291bnREb2N1bWVudHNPcGVyYXRpb24iLCJhZ2dyZWdhdGVfMSIsInJlcXVpcmUiLCJBZ2dyZWdhdGVPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJxdWVyeSIsIm9wdGlvbnMiLCJwaXBlbGluZSIsInB1c2giLCIkbWF0Y2giLCJza2lwIiwiJHNraXAiLCJsaW1pdCIsIiRsaW1pdCIsIiRncm91cCIsIl9pZCIsIm4iLCIkc3VtIiwicyIsIm5hbWVzcGFjZSIsImV4ZWN1dGUiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwicmVzdWx0IiwicmVzcG9uc2UiLCJjdXJzb3IiLCJmaXJzdEJhdGNoIiwiZG9jcyIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/count_documents.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/create_collection.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/create_collection.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CreateCollectionOperation = void 0;\nconst constants_1 = __webpack_require__(/*! ../cmap/wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\nconst collection_1 = __webpack_require__(/*! ../collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst indexes_1 = __webpack_require__(/*! ./indexes */ \"(ssr)/./node_modules/mongodb/lib/operations/indexes.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nconst ILLEGAL_COMMAND_FIELDS = new Set([\n    \"w\",\n    \"wtimeout\",\n    \"j\",\n    \"fsync\",\n    \"autoIndexId\",\n    \"pkFactory\",\n    \"raw\",\n    \"readPreference\",\n    \"session\",\n    \"readConcern\",\n    \"writeConcern\",\n    \"raw\",\n    \"fieldsAsRaw\",\n    \"useBigInt64\",\n    \"promoteLongs\",\n    \"promoteValues\",\n    \"promoteBuffers\",\n    \"bsonRegExp\",\n    \"serializeFunctions\",\n    \"ignoreUndefined\",\n    \"enableUtf8Validation\"\n]);\n/* @internal */ const INVALID_QE_VERSION = \"Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.\";\n/** @internal */ class CreateCollectionOperation extends command_1.CommandOperation {\n    constructor(db, name, options = {}){\n        super(db, options);\n        this.options = options;\n        this.db = db;\n        this.name = name;\n    }\n    get commandName() {\n        return \"create\";\n    }\n    async execute(server, session) {\n        const db = this.db;\n        const name = this.name;\n        const options = this.options;\n        const encryptedFields = options.encryptedFields ?? db.client.options.autoEncryption?.encryptedFieldsMap?.[`${db.databaseName}.${name}`];\n        if (encryptedFields) {\n            // Creating a QE collection required min server of 7.0.0\n            // TODO(NODE-5353): Get wire version information from connection.\n            if (!server.loadBalanced && server.description.maxWireVersion < constants_1.MIN_SUPPORTED_QE_WIRE_VERSION) {\n                throw new error_1.MongoCompatibilityError(`${INVALID_QE_VERSION} The minimum server version required is ${constants_1.MIN_SUPPORTED_QE_SERVER_VERSION}`);\n            }\n            // Create auxilliary collections for queryable encryption support.\n            const escCollection = encryptedFields.escCollection ?? `enxcol_.${name}.esc`;\n            const ecocCollection = encryptedFields.ecocCollection ?? `enxcol_.${name}.ecoc`;\n            for (const collectionName of [\n                escCollection,\n                ecocCollection\n            ]){\n                const createOp = new CreateCollectionOperation(db, collectionName, {\n                    clusteredIndex: {\n                        key: {\n                            _id: 1\n                        },\n                        unique: true\n                    }\n                });\n                await createOp.executeWithoutEncryptedFieldsCheck(server, session);\n            }\n            if (!options.encryptedFields) {\n                this.options = {\n                    ...this.options,\n                    encryptedFields\n                };\n            }\n        }\n        const coll = await this.executeWithoutEncryptedFieldsCheck(server, session);\n        if (encryptedFields) {\n            // Create the required index for queryable encryption support.\n            const createIndexOp = new indexes_1.CreateIndexOperation(db, name, {\n                __safeContent__: 1\n            }, {});\n            await createIndexOp.execute(server, session);\n        }\n        return coll;\n    }\n    async executeWithoutEncryptedFieldsCheck(server, session) {\n        const db = this.db;\n        const name = this.name;\n        const options = this.options;\n        const cmd = {\n            create: name\n        };\n        for(const n in options){\n            if (options[n] != null && typeof options[n] !== \"function\" && !ILLEGAL_COMMAND_FIELDS.has(n)) {\n                cmd[n] = options[n];\n            }\n        }\n        // otherwise just execute the command\n        await super.executeCommand(server, session, cmd);\n        return new collection_1.Collection(db, name, options);\n    }\n}\nexports.CreateCollectionOperation = CreateCollectionOperation;\n(0, operation_1.defineAspects)(CreateCollectionOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=create_collection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9jcmVhdGVfY29sbGVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUNBQWlDLEdBQUcsS0FBSztBQUN6QyxNQUFNRyxjQUFjQyxtQkFBT0EsQ0FBQyx5R0FBaUM7QUFDN0QsTUFBTUMsZUFBZUQsbUJBQU9BLENBQUMscUVBQWU7QUFDNUMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUcsWUFBWUgsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUksWUFBWUosbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUssY0FBY0wsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsTUFBTU0seUJBQXlCLElBQUlDLElBQUk7SUFDbkM7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRCxhQUFhLEdBQ2IsTUFBTUMscUJBQXFCO0FBQzNCLGNBQWMsR0FDZCxNQUFNVixrQ0FBa0NLLFVBQVVNLGdCQUFnQjtJQUM5REMsWUFBWUMsRUFBRSxFQUFFQyxJQUFJLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDaEMsS0FBSyxDQUFDRixJQUFJRTtRQUNWLElBQUksQ0FBQ0EsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0YsRUFBRSxHQUFHQTtRQUNWLElBQUksQ0FBQ0MsSUFBSSxHQUFHQTtJQUNoQjtJQUNBLElBQUlFLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixNQUFNTixLQUFLLElBQUksQ0FBQ0EsRUFBRTtRQUNsQixNQUFNQyxPQUFPLElBQUksQ0FBQ0EsSUFBSTtRQUN0QixNQUFNQyxVQUFVLElBQUksQ0FBQ0EsT0FBTztRQUM1QixNQUFNSyxrQkFBa0JMLFFBQVFLLGVBQWUsSUFDM0NQLEdBQUdRLE1BQU0sQ0FBQ04sT0FBTyxDQUFDTyxjQUFjLEVBQUVDLG9CQUFvQixDQUFDLENBQUMsRUFBRVYsR0FBR1csWUFBWSxDQUFDLENBQUMsRUFBRVYsS0FBSyxDQUFDLENBQUM7UUFDeEYsSUFBSU0saUJBQWlCO1lBQ2pCLHdEQUF3RDtZQUN4RCxpRUFBaUU7WUFDakUsSUFBSSxDQUFDRixPQUFPTyxZQUFZLElBQ3BCUCxPQUFPUSxXQUFXLENBQUNDLGNBQWMsR0FBRzFCLFlBQVkyQiw2QkFBNkIsRUFBRTtnQkFDL0UsTUFBTSxJQUFJeEIsUUFBUXlCLHVCQUF1QixDQUFDLENBQUMsRUFBRW5CLG1CQUFtQix3Q0FBd0MsRUFBRVQsWUFBWTZCLCtCQUErQixDQUFDLENBQUM7WUFDM0o7WUFDQSxrRUFBa0U7WUFDbEUsTUFBTUMsZ0JBQWdCWCxnQkFBZ0JXLGFBQWEsSUFBSSxDQUFDLFFBQVEsRUFBRWpCLEtBQUssSUFBSSxDQUFDO1lBQzVFLE1BQU1rQixpQkFBaUJaLGdCQUFnQlksY0FBYyxJQUFJLENBQUMsUUFBUSxFQUFFbEIsS0FBSyxLQUFLLENBQUM7WUFDL0UsS0FBSyxNQUFNbUIsa0JBQWtCO2dCQUFDRjtnQkFBZUM7YUFBZSxDQUFFO2dCQUMxRCxNQUFNRSxXQUFXLElBQUlsQywwQkFBMEJhLElBQUlvQixnQkFBZ0I7b0JBQy9ERSxnQkFBZ0I7d0JBQ1pDLEtBQUs7NEJBQUVDLEtBQUs7d0JBQUU7d0JBQ2RDLFFBQVE7b0JBQ1o7Z0JBQ0o7Z0JBQ0EsTUFBTUosU0FBU0ssa0NBQWtDLENBQUNyQixRQUFRQztZQUM5RDtZQUNBLElBQUksQ0FBQ0osUUFBUUssZUFBZSxFQUFFO2dCQUMxQixJQUFJLENBQUNMLE9BQU8sR0FBRztvQkFBRSxHQUFHLElBQUksQ0FBQ0EsT0FBTztvQkFBRUs7Z0JBQWdCO1lBQ3REO1FBQ0o7UUFDQSxNQUFNb0IsT0FBTyxNQUFNLElBQUksQ0FBQ0Qsa0NBQWtDLENBQUNyQixRQUFRQztRQUNuRSxJQUFJQyxpQkFBaUI7WUFDakIsOERBQThEO1lBQzlELE1BQU1xQixnQkFBZ0IsSUFBSW5DLFVBQVVvQyxvQkFBb0IsQ0FBQzdCLElBQUlDLE1BQU07Z0JBQUU2QixpQkFBaUI7WUFBRSxHQUFHLENBQUM7WUFDNUYsTUFBTUYsY0FBY3hCLE9BQU8sQ0FBQ0MsUUFBUUM7UUFDeEM7UUFDQSxPQUFPcUI7SUFDWDtJQUNBLE1BQU1ELG1DQUFtQ3JCLE1BQU0sRUFBRUMsT0FBTyxFQUFFO1FBQ3RELE1BQU1OLEtBQUssSUFBSSxDQUFDQSxFQUFFO1FBQ2xCLE1BQU1DLE9BQU8sSUFBSSxDQUFDQSxJQUFJO1FBQ3RCLE1BQU1DLFVBQVUsSUFBSSxDQUFDQSxPQUFPO1FBQzVCLE1BQU02QixNQUFNO1lBQUVDLFFBQVEvQjtRQUFLO1FBQzNCLElBQUssTUFBTWdDLEtBQUsvQixRQUFTO1lBQ3JCLElBQUlBLE9BQU8sQ0FBQytCLEVBQUUsSUFBSSxRQUNkLE9BQU8vQixPQUFPLENBQUMrQixFQUFFLEtBQUssY0FDdEIsQ0FBQ3RDLHVCQUF1QnVDLEdBQUcsQ0FBQ0QsSUFBSTtnQkFDaENGLEdBQUcsQ0FBQ0UsRUFBRSxHQUFHL0IsT0FBTyxDQUFDK0IsRUFBRTtZQUN2QjtRQUNKO1FBQ0EscUNBQXFDO1FBQ3JDLE1BQU0sS0FBSyxDQUFDRSxlQUFlOUIsUUFBUUMsU0FBU3lCO1FBQzVDLE9BQU8sSUFBSXpDLGFBQWE4QyxVQUFVLENBQUNwQyxJQUFJQyxNQUFNQztJQUNqRDtBQUNKO0FBQ0FqQixpQ0FBaUMsR0FBR0U7QUFDbkMsSUFBR08sWUFBWTJDLGFBQWEsRUFBRWxELDJCQUEyQjtJQUFDTyxZQUFZNEMsTUFBTSxDQUFDQyxlQUFlO0NBQUMsR0FDOUYsNkNBQTZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2NyZWF0ZV9jb2xsZWN0aW9uLmpzP2VjZTQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNyZWF0ZUNvbGxlY3Rpb25PcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jbWFwL3dpcmVfcHJvdG9jb2wvY29uc3RhbnRzXCIpO1xuY29uc3QgY29sbGVjdGlvbl8xID0gcmVxdWlyZShcIi4uL2NvbGxlY3Rpb25cIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IGluZGV4ZXNfMSA9IHJlcXVpcmUoXCIuL2luZGV4ZXNcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbmNvbnN0IElMTEVHQUxfQ09NTUFORF9GSUVMRFMgPSBuZXcgU2V0KFtcbiAgICAndycsXG4gICAgJ3d0aW1lb3V0JyxcbiAgICAnaicsXG4gICAgJ2ZzeW5jJyxcbiAgICAnYXV0b0luZGV4SWQnLFxuICAgICdwa0ZhY3RvcnknLFxuICAgICdyYXcnLFxuICAgICdyZWFkUHJlZmVyZW5jZScsXG4gICAgJ3Nlc3Npb24nLFxuICAgICdyZWFkQ29uY2VybicsXG4gICAgJ3dyaXRlQ29uY2VybicsXG4gICAgJ3JhdycsXG4gICAgJ2ZpZWxkc0FzUmF3JyxcbiAgICAndXNlQmlnSW50NjQnLFxuICAgICdwcm9tb3RlTG9uZ3MnLFxuICAgICdwcm9tb3RlVmFsdWVzJyxcbiAgICAncHJvbW90ZUJ1ZmZlcnMnLFxuICAgICdic29uUmVnRXhwJyxcbiAgICAnc2VyaWFsaXplRnVuY3Rpb25zJyxcbiAgICAnaWdub3JlVW5kZWZpbmVkJyxcbiAgICAnZW5hYmxlVXRmOFZhbGlkYXRpb24nXG5dKTtcbi8qIEBpbnRlcm5hbCAqL1xuY29uc3QgSU5WQUxJRF9RRV9WRVJTSU9OID0gJ0RyaXZlciBzdXBwb3J0IG9mIFF1ZXJ5YWJsZSBFbmNyeXB0aW9uIGlzIGluY29tcGF0aWJsZSB3aXRoIHNlcnZlci4gVXBncmFkZSBzZXJ2ZXIgdG8gdXNlIFF1ZXJ5YWJsZSBFbmNyeXB0aW9uLic7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBDcmVhdGVDb2xsZWN0aW9uT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBuYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoZGIsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdjcmVhdGUnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBkYiA9IHRoaXMuZGI7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGVuY3J5cHRlZEZpZWxkcyA9IG9wdGlvbnMuZW5jcnlwdGVkRmllbGRzID8/XG4gICAgICAgICAgICBkYi5jbGllbnQub3B0aW9ucy5hdXRvRW5jcnlwdGlvbj8uZW5jcnlwdGVkRmllbGRzTWFwPy5bYCR7ZGIuZGF0YWJhc2VOYW1lfS4ke25hbWV9YF07XG4gICAgICAgIGlmIChlbmNyeXB0ZWRGaWVsZHMpIHtcbiAgICAgICAgICAgIC8vIENyZWF0aW5nIGEgUUUgY29sbGVjdGlvbiByZXF1aXJlZCBtaW4gc2VydmVyIG9mIDcuMC4wXG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtNTM1Myk6IEdldCB3aXJlIHZlcnNpb24gaW5mb3JtYXRpb24gZnJvbSBjb25uZWN0aW9uLlxuICAgICAgICAgICAgaWYgKCFzZXJ2ZXIubG9hZEJhbGFuY2VkICYmXG4gICAgICAgICAgICAgICAgc2VydmVyLmRlc2NyaXB0aW9uLm1heFdpcmVWZXJzaW9uIDwgY29uc3RhbnRzXzEuTUlOX1NVUFBPUlRFRF9RRV9XSVJFX1ZFUlNJT04pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcihgJHtJTlZBTElEX1FFX1ZFUlNJT059IFRoZSBtaW5pbXVtIHNlcnZlciB2ZXJzaW9uIHJlcXVpcmVkIGlzICR7Y29uc3RhbnRzXzEuTUlOX1NVUFBPUlRFRF9RRV9TRVJWRVJfVkVSU0lPTn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhdXhpbGxpYXJ5IGNvbGxlY3Rpb25zIGZvciBxdWVyeWFibGUgZW5jcnlwdGlvbiBzdXBwb3J0LlxuICAgICAgICAgICAgY29uc3QgZXNjQ29sbGVjdGlvbiA9IGVuY3J5cHRlZEZpZWxkcy5lc2NDb2xsZWN0aW9uID8/IGBlbnhjb2xfLiR7bmFtZX0uZXNjYDtcbiAgICAgICAgICAgIGNvbnN0IGVjb2NDb2xsZWN0aW9uID0gZW5jcnlwdGVkRmllbGRzLmVjb2NDb2xsZWN0aW9uID8/IGBlbnhjb2xfLiR7bmFtZX0uZWNvY2A7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb25OYW1lIG9mIFtlc2NDb2xsZWN0aW9uLCBlY29jQ29sbGVjdGlvbl0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVPcCA9IG5ldyBDcmVhdGVDb2xsZWN0aW9uT3BlcmF0aW9uKGRiLCBjb2xsZWN0aW9uTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICBjbHVzdGVyZWRJbmRleDoge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB7IF9pZDogMSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBjcmVhdGVPcC5leGVjdXRlV2l0aG91dEVuY3J5cHRlZEZpZWxkc0NoZWNrKHNlcnZlciwgc2Vzc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuZW5jcnlwdGVkRmllbGRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIGVuY3J5cHRlZEZpZWxkcyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbGwgPSBhd2FpdCB0aGlzLmV4ZWN1dGVXaXRob3V0RW5jcnlwdGVkRmllbGRzQ2hlY2soc2VydmVyLCBzZXNzaW9uKTtcbiAgICAgICAgaWYgKGVuY3J5cHRlZEZpZWxkcykge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSByZXF1aXJlZCBpbmRleCBmb3IgcXVlcnlhYmxlIGVuY3J5cHRpb24gc3VwcG9ydC5cbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZUluZGV4T3AgPSBuZXcgaW5kZXhlc18xLkNyZWF0ZUluZGV4T3BlcmF0aW9uKGRiLCBuYW1lLCB7IF9fc2FmZUNvbnRlbnRfXzogMSB9LCB7fSk7XG4gICAgICAgICAgICBhd2FpdCBjcmVhdGVJbmRleE9wLmV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbDtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZVdpdGhvdXRFbmNyeXB0ZWRGaWVsZHNDaGVjayhzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgZGIgPSB0aGlzLmRiO1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBjbWQgPSB7IGNyZWF0ZTogbmFtZSB9O1xuICAgICAgICBmb3IgKGNvbnN0IG4gaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnNbbl0gIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zW25dICE9PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICAgIUlMTEVHQUxfQ09NTUFORF9GSUVMRFMuaGFzKG4pKSB7XG4gICAgICAgICAgICAgICAgY21kW25dID0gb3B0aW9uc1tuXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBvdGhlcndpc2UganVzdCBleGVjdXRlIHRoZSBjb21tYW5kXG4gICAgICAgIGF3YWl0IHN1cGVyLmV4ZWN1dGVDb21tYW5kKHNlcnZlciwgc2Vzc2lvbiwgY21kKTtcbiAgICAgICAgcmV0dXJuIG5ldyBjb2xsZWN0aW9uXzEuQ29sbGVjdGlvbihkYiwgbmFtZSwgb3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0cy5DcmVhdGVDb2xsZWN0aW9uT3BlcmF0aW9uID0gQ3JlYXRlQ29sbGVjdGlvbk9wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShDcmVhdGVDb2xsZWN0aW9uT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlX2NvbGxlY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ3JlYXRlQ29sbGVjdGlvbk9wZXJhdGlvbiIsImNvbnN0YW50c18xIiwicmVxdWlyZSIsImNvbGxlY3Rpb25fMSIsImVycm9yXzEiLCJjb21tYW5kXzEiLCJpbmRleGVzXzEiLCJvcGVyYXRpb25fMSIsIklMTEVHQUxfQ09NTUFORF9GSUVMRFMiLCJTZXQiLCJJTlZBTElEX1FFX1ZFUlNJT04iLCJDb21tYW5kT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJkYiIsIm5hbWUiLCJvcHRpb25zIiwiY29tbWFuZE5hbWUiLCJleGVjdXRlIiwic2VydmVyIiwic2Vzc2lvbiIsImVuY3J5cHRlZEZpZWxkcyIsImNsaWVudCIsImF1dG9FbmNyeXB0aW9uIiwiZW5jcnlwdGVkRmllbGRzTWFwIiwiZGF0YWJhc2VOYW1lIiwibG9hZEJhbGFuY2VkIiwiZGVzY3JpcHRpb24iLCJtYXhXaXJlVmVyc2lvbiIsIk1JTl9TVVBQT1JURURfUUVfV0lSRV9WRVJTSU9OIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJNSU5fU1VQUE9SVEVEX1FFX1NFUlZFUl9WRVJTSU9OIiwiZXNjQ29sbGVjdGlvbiIsImVjb2NDb2xsZWN0aW9uIiwiY29sbGVjdGlvbk5hbWUiLCJjcmVhdGVPcCIsImNsdXN0ZXJlZEluZGV4Iiwia2V5IiwiX2lkIiwidW5pcXVlIiwiZXhlY3V0ZVdpdGhvdXRFbmNyeXB0ZWRGaWVsZHNDaGVjayIsImNvbGwiLCJjcmVhdGVJbmRleE9wIiwiQ3JlYXRlSW5kZXhPcGVyYXRpb24iLCJfX3NhZmVDb250ZW50X18iLCJjbWQiLCJjcmVhdGUiLCJuIiwiaGFzIiwiZXhlY3V0ZUNvbW1hbmQiLCJDb2xsZWN0aW9uIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIldSSVRFX09QRVJBVElPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/create_collection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/delete.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/delete.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.makeDeleteStatement = exports.DeleteManyOperation = exports.DeleteOneOperation = exports.DeleteOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class DeleteOperation extends command_1.CommandOperation {\n    constructor(ns, statements, options){\n        super(undefined, options);\n        this.options = options;\n        this.ns = ns;\n        this.statements = statements;\n    }\n    get commandName() {\n        return \"delete\";\n    }\n    get canRetryWrite() {\n        if (super.canRetryWrite === false) {\n            return false;\n        }\n        return this.statements.every((op)=>op.limit != null ? op.limit > 0 : true);\n    }\n    async execute(server, session) {\n        const options = this.options ?? {};\n        const ordered = typeof options.ordered === \"boolean\" ? options.ordered : true;\n        const command = {\n            delete: this.ns.collection,\n            deletes: this.statements,\n            ordered\n        };\n        if (options.let) {\n            command.let = options.let;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            command.comment = options.comment;\n        }\n        const unacknowledgedWrite = this.writeConcern && this.writeConcern.w === 0;\n        if (unacknowledgedWrite) {\n            if (this.statements.find((o)=>o.hint)) {\n                // TODO(NODE-3541): fix error for hint with unacknowledged writes\n                throw new error_1.MongoCompatibilityError(`hint is not supported with unacknowledged writes`);\n            }\n        }\n        return super.executeCommand(server, session, command);\n    }\n}\nexports.DeleteOperation = DeleteOperation;\nclass DeleteOneOperation extends DeleteOperation {\n    constructor(collection, filter, options){\n        super(collection.s.namespace, [\n            makeDeleteStatement(filter, {\n                ...options,\n                limit: 1\n            })\n        ], options);\n    }\n    async execute(server, session) {\n        const res = await super.execute(server, session);\n        if (this.explain) return res;\n        if (res.code) throw new error_1.MongoServerError(res);\n        if (res.writeErrors) throw new error_1.MongoServerError(res.writeErrors[0]);\n        return {\n            acknowledged: this.writeConcern?.w !== 0,\n            deletedCount: res.n\n        };\n    }\n}\nexports.DeleteOneOperation = DeleteOneOperation;\nclass DeleteManyOperation extends DeleteOperation {\n    constructor(collection, filter, options){\n        super(collection.s.namespace, [\n            makeDeleteStatement(filter, options)\n        ], options);\n    }\n    async execute(server, session) {\n        const res = await super.execute(server, session);\n        if (this.explain) return res;\n        if (res.code) throw new error_1.MongoServerError(res);\n        if (res.writeErrors) throw new error_1.MongoServerError(res.writeErrors[0]);\n        return {\n            acknowledged: this.writeConcern?.w !== 0,\n            deletedCount: res.n\n        };\n    }\n}\nexports.DeleteManyOperation = DeleteManyOperation;\nfunction makeDeleteStatement(filter, options) {\n    const op = {\n        q: filter,\n        limit: typeof options.limit === \"number\" ? options.limit : 0\n    };\n    if (options.collation) {\n        op.collation = options.collation;\n    }\n    if (options.hint) {\n        op.hint = options.hint;\n    }\n    return op;\n}\nexports.makeDeleteStatement = makeDeleteStatement;\n(0, operation_1.defineAspects)(DeleteOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(DeleteOneOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.SKIP_COLLATION\n]);\n(0, operation_1.defineAspects)(DeleteManyOperation, [\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.SKIP_COLLATION\n]); //# sourceMappingURL=delete.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9kZWxldGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDJCQUEyQixHQUFHQSwyQkFBMkIsR0FBR0EsMEJBQTBCLEdBQUdBLHVCQUF1QixHQUFHLEtBQUs7QUFDeEgsTUFBTU0sVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsWUFBWUQsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLHdCQUF3QkcsVUFBVUUsZ0JBQWdCO0lBQ3BEQyxZQUFZQyxFQUFFLEVBQUVDLFVBQVUsRUFBRUMsT0FBTyxDQUFFO1FBQ2pDLEtBQUssQ0FBQ0MsV0FBV0Q7UUFDakIsSUFBSSxDQUFDQSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDRixFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDQyxVQUFVLEdBQUdBO0lBQ3RCO0lBQ0EsSUFBSUcsY0FBYztRQUNkLE9BQU87SUFDWDtJQUNBLElBQUlDLGdCQUFnQjtRQUNoQixJQUFJLEtBQUssQ0FBQ0Esa0JBQWtCLE9BQU87WUFDL0IsT0FBTztRQUNYO1FBQ0EsT0FBTyxJQUFJLENBQUNKLFVBQVUsQ0FBQ0ssS0FBSyxDQUFDQyxDQUFBQSxLQUFPQSxHQUFHQyxLQUFLLElBQUksT0FBT0QsR0FBR0MsS0FBSyxHQUFHLElBQUk7SUFDMUU7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixNQUFNVCxVQUFVLElBQUksQ0FBQ0EsT0FBTyxJQUFJLENBQUM7UUFDakMsTUFBTVUsVUFBVSxPQUFPVixRQUFRVSxPQUFPLEtBQUssWUFBWVYsUUFBUVUsT0FBTyxHQUFHO1FBQ3pFLE1BQU1DLFVBQVU7WUFDWkMsUUFBUSxJQUFJLENBQUNkLEVBQUUsQ0FBQ2UsVUFB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QUFTO0lBQ3BDO0lBQ0EsSUFBSXJDLFFBQVFzQixJQUFJLEVBQUU7UUFDZGpCLEdBQUdpQixJQUFJLEdBQUd0QixRQUFRc0IsSUFBSTtJQUMxQjtJQUNBLE9BQU9qQjtBQUNYO0FBQ0FuQiwyQkFBMkIsR0FBR0U7QUFDN0IsSUFBR08sWUFBWTJDLGFBQWEsRUFBRS9DLGlCQUFpQjtJQUFDSSxZQUFZNEMsTUFBTSxDQUFDQyxTQUFTO0lBQUU3QyxZQUFZNEMsTUFBTSxDQUFDRSxlQUFlO0NBQUM7QUFDakgsSUFBRzlDLFlBQVkyQyxhQUFhLEVBQUVoRCxvQkFBb0I7SUFDL0NLLFlBQVk0QyxNQUFNLENBQUNDLFNBQVM7SUFDNUI3QyxZQUFZNEMsTUFBTSxDQUFDRSxlQUFlO0lBQ2xDOUMsWUFBWTRDLE1BQU0sQ0FBQ0csV0FBVztJQUM5Qi9DLFlBQVk0QyxNQUFNLENBQUNJLGNBQWM7Q0FDcEM7QUFDQSxJQUFHaEQsWUFBWTJDLGFBQWEsRUFBRWpELHFCQUFxQjtJQUNoRE0sWUFBWTRDLE1BQU0sQ0FBQ0UsZUFBZTtJQUNsQzlDLFlBQVk0QyxNQUFNLENBQUNHLFdBQVc7SUFDOUIvQyxZQUFZNEMsTUFBTSxDQUFDSSxjQUFjO0NBQ3BDLEdBQ0Qsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2RlbGV0ZS5qcz9kMjM3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5tYWtlRGVsZXRlU3RhdGVtZW50ID0gZXhwb3J0cy5EZWxldGVNYW55T3BlcmF0aW9uID0gZXhwb3J0cy5EZWxldGVPbmVPcGVyYXRpb24gPSBleHBvcnRzLkRlbGV0ZU9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBEZWxldGVPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IobnMsIHN0YXRlbWVudHMsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIodW5kZWZpbmVkLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5ucyA9IG5zO1xuICAgICAgICB0aGlzLnN0YXRlbWVudHMgPSBzdGF0ZW1lbnRzO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnZGVsZXRlJztcbiAgICB9XG4gICAgZ2V0IGNhblJldHJ5V3JpdGUoKSB7XG4gICAgICAgIGlmIChzdXBlci5jYW5SZXRyeVdyaXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlbWVudHMuZXZlcnkob3AgPT4gKG9wLmxpbWl0ICE9IG51bGwgPyBvcC5saW1pdCA+IDAgOiB0cnVlKSk7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IG9yZGVyZWQgPSB0eXBlb2Ygb3B0aW9ucy5vcmRlcmVkID09PSAnYm9vbGVhbicgPyBvcHRpb25zLm9yZGVyZWQgOiB0cnVlO1xuICAgICAgICBjb25zdCBjb21tYW5kID0ge1xuICAgICAgICAgICAgZGVsZXRlOiB0aGlzLm5zLmNvbGxlY3Rpb24sXG4gICAgICAgICAgICBkZWxldGVzOiB0aGlzLnN0YXRlbWVudHMsXG4gICAgICAgICAgICBvcmRlcmVkXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvcHRpb25zLmxldCkge1xuICAgICAgICAgICAgY29tbWFuZC5sZXQgPSBvcHRpb25zLmxldDtcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSBjaGVjayBmb3IgdW5kZWZpbmVkIHNwZWNpZmljYWxseSBoZXJlIHRvIGFsbG93IGZhbHN5IHZhbHVlc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb21tYW5kLmNvbW1lbnQgPSBvcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5hY2tub3dsZWRnZWRXcml0ZSA9IHRoaXMud3JpdGVDb25jZXJuICYmIHRoaXMud3JpdGVDb25jZXJuLncgPT09IDA7XG4gICAgICAgIGlmICh1bmFja25vd2xlZGdlZFdyaXRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZW1lbnRzLmZpbmQoKG8pID0+IG8uaGludCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKE5PREUtMzU0MSk6IGZpeCBlcnJvciBmb3IgaGludCB3aXRoIHVuYWNrbm93bGVkZ2VkIHdyaXRlc1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKGBoaW50IGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCB1bmFja25vd2xlZGdlZCB3cml0ZXNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZUNvbW1hbmQoc2VydmVyLCBzZXNzaW9uLCBjb21tYW5kKTtcbiAgICB9XG59XG5leHBvcnRzLkRlbGV0ZU9wZXJhdGlvbiA9IERlbGV0ZU9wZXJhdGlvbjtcbmNsYXNzIERlbGV0ZU9uZU9wZXJhdGlvbiBleHRlbmRzIERlbGV0ZU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24ucy5uYW1lc3BhY2UsIFttYWtlRGVsZXRlU3RhdGVtZW50KGZpbHRlciwgeyAuLi5vcHRpb25zLCBsaW1pdDogMSB9KV0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXMgPSAoYXdhaXQgc3VwZXIuZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pKTtcbiAgICAgICAgaWYgKHRoaXMuZXhwbGFpbilcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIGlmIChyZXMuY29kZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzKTtcbiAgICAgICAgaWYgKHJlcy53cml0ZUVycm9ycylcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzLndyaXRlRXJyb3JzWzBdKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFja25vd2xlZGdlZDogdGhpcy53cml0ZUNvbmNlcm4/LncgIT09IDAsXG4gICAgICAgICAgICBkZWxldGVkQ291bnQ6IHJlcy5uXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0cy5EZWxldGVPbmVPcGVyYXRpb24gPSBEZWxldGVPbmVPcGVyYXRpb247XG5jbGFzcyBEZWxldGVNYW55T3BlcmF0aW9uIGV4dGVuZHMgRGVsZXRlT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbi5zLm5hbWVzcGFjZSwgW21ha2VEZWxldGVTdGF0ZW1lbnQoZmlsdGVyLCBvcHRpb25zKV0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXMgPSAoYXdhaXQgc3VwZXIuZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pKTtcbiAgICAgICAgaWYgKHRoaXMuZXhwbGFpbilcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIGlmIChyZXMuY29kZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzKTtcbiAgICAgICAgaWYgKHJlcy53cml0ZUVycm9ycylcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzLndyaXRlRXJyb3JzWzBdKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFja25vd2xlZGdlZDogdGhpcy53cml0ZUNvbmNlcm4/LncgIT09IDAsXG4gICAgICAgICAgICBkZWxldGVkQ291bnQ6IHJlcy5uXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0cy5EZWxldGVNYW55T3BlcmF0aW9uID0gRGVsZXRlTWFueU9wZXJhdGlvbjtcbmZ1bmN0aW9uIG1ha2VEZWxldGVTdGF0ZW1lbnQoZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgb3AgPSB7XG4gICAgICAgIHE6IGZpbHRlcixcbiAgICAgICAgbGltaXQ6IHR5cGVvZiBvcHRpb25zLmxpbWl0ID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubGltaXQgOiAwXG4gICAgfTtcbiAgICBpZiAob3B0aW9ucy5jb2xsYXRpb24pIHtcbiAgICAgICAgb3AuY29sbGF0aW9uID0gb3B0aW9ucy5jb2xsYXRpb247XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmhpbnQpIHtcbiAgICAgICAgb3AuaGludCA9IG9wdGlvbnMuaGludDtcbiAgICB9XG4gICAgcmV0dXJuIG9wO1xufVxuZXhwb3J0cy5tYWtlRGVsZXRlU3RhdGVtZW50ID0gbWFrZURlbGV0ZVN0YXRlbWVudDtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShEZWxldGVPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFLCBvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OXSk7XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRGVsZXRlT25lT3BlcmF0aW9uLCBbXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRSxcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5FWFBMQUlOQUJMRSxcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuU0tJUF9DT0xMQVRJT05cbl0pO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKERlbGV0ZU1hbnlPcGVyYXRpb24sIFtcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5FWFBMQUlOQUJMRSxcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuU0tJUF9DT0xMQVRJT05cbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsZXRlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIm1ha2VEZWxldGVTdGF0ZW1lbnQiLCJEZWxldGVNYW55T3BlcmF0aW9uIiwiRGVsZXRlT25lT3BlcmF0aW9uIiwiRGVsZXRlT3BlcmF0aW9uIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJjb21tYW5kXzEiLCJvcGVyYXRpb25fMSIsIkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsIm5zIiwic3RhdGVtZW50cyIsIm9wdGlvbnMiLCJ1bmRlZmluZWQiLCJjb21tYW5kTmFtZSIsImNhblJldHJ5V3JpdGUiLCJldmVyeSIsIm9wIiwibGltaXQiLCJleGVjdXRlIiwic2VydmVyIiwic2Vzc2lvbiIsIm9yZGVyZWQiLCJjb21tYW5kIiwiZGVsZXRlIiwiY29sbGVjdGlvbiIsImRlbGV0ZXMiLCJsZXQiLCJjb21tZW50IiwidW5hY2tub3dsZWRnZWRXcml0ZSIsIndyaXRlQ29uY2VybiIsInciLCJmaW5kIiwibyIsImhpbnQiLCJNb25nb0NvbXBhdGliaWxpdHlFcnJvciIsImV4ZWN1dGVDb21tYW5kIiwiZmlsdGVyIiwicyIsIm5hbWVzcGFjZSIsInJlcyIsImV4cGxhaW4iLCJjb2RlIiwiTW9uZ29TZXJ2ZXJFcnJvciIsIndyaXRlRXJyb3JzIiwiYWNrbm93bGVkZ2VkIiwiZGVsZXRlZENvdW50IiwibiIsInEiLCJjb2xsYXRpb24iLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiUkVUUllBQkxFIiwiV1JJVEVfT1BFUkFUSU9OIiwiRVhQTEFJTkFCTEUiLCJTS0lQX0NPTExBVElPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/delete.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/distinct.js":
/*!*********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/distinct.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DistinctOperation = void 0;\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/**\n * Return a list of distinct values for the given key across a collection.\n * @internal\n */ class DistinctOperation extends command_1.CommandOperation {\n    /**\n     * Construct a Distinct operation.\n     *\n     * @param collection - Collection instance.\n     * @param key - Field of the document to find distinct values for.\n     * @param query - The query for filtering the set of documents to which we apply the distinct filter.\n     * @param options - Optional settings. See Collection.prototype.distinct for a list of options.\n     */ constructor(collection, key, query, options){\n        super(collection, options);\n        this.options = options ?? {};\n        this.collection = collection;\n        this.key = key;\n        this.query = query;\n    }\n    get commandName() {\n        return \"distinct\";\n    }\n    async execute(server, session) {\n        const coll = this.collection;\n        const key = this.key;\n        const query = this.query;\n        const options = this.options;\n        // Distinct command\n        const cmd = {\n            distinct: coll.collectionName,\n            key: key,\n            query: query\n        };\n        // Add maxTimeMS if defined\n        if (typeof options.maxTimeMS === \"number\") {\n            cmd.maxTimeMS = options.maxTimeMS;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (typeof options.comment !== \"undefined\") {\n            cmd.comment = options.comment;\n        }\n        // Do we have a readConcern specified\n        (0, utils_1.decorateWithReadConcern)(cmd, coll, options);\n        // Have we specified collation\n        (0, utils_1.decorateWithCollation)(cmd, coll, options);\n        const result = await super.executeCommand(server, session, cmd);\n        return this.explain ? result : result.values;\n    }\n}\nexports.DistinctOperation = DistinctOperation;\n(0, operation_1.defineAspects)(DistinctOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.EXPLAINABLE\n]); //# sourceMappingURL=distinct.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9kaXN0aW5jdC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQseUJBQXlCLEdBQUcsS0FBSztBQUNqQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6Qzs7O0NBR0MsR0FDRCxNQUFNRiwwQkFBMEJHLFVBQVVFLGdCQUFnQjtJQUN0RDs7Ozs7OztLQU9DLEdBQ0RDLFlBQVlDLFVBQVUsRUFBRUMsR0FBRyxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sQ0FBRTtRQUN6QyxLQUFLLENBQUNILFlBQVlHO1FBQ2xCLElBQUksQ0FBQ0EsT0FBTyxHQUFHQSxXQUFXLENBQUM7UUFDM0IsSUFBSSxDQUFDSCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsR0FBRyxHQUFHQTtRQUNYLElBQUksQ0FBQ0MsS0FBSyxHQUFHQTtJQUNqQjtJQUNBLElBQUlFLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixNQUFNQyxPQUFPLElBQUksQ0FBQ1IsVUFBVTtRQUM1QixNQUFNQyxNQUFNLElBQUksQ0FBQ0EsR0FBRztRQUNwQixNQUFNQyxRQUFRLElBQUksQ0FBQ0EsS0FBSztRQUN4QixNQUFNQyxVQUFVLElBQUksQ0FBQ0EsT0FBTztRQUM1QixtQkFBbUI7UUFDbkIsTUFBTU0sTUFBTTtZQUNSQyxVQUFVRixLQUFLRyxjQUFjO1lBQzdCVixLQUFLQTtZQUNMQyxPQUFPQTtRQUNYO1FBQ0EsMkJBQTJCO1FBQzNCLElBQUksT0FBT0MsUUFBUVMsU0FBUyxLQUFLLFVBQVU7WUFDdkNILElBQUlHLFNBQVMsR0FBR1QsUUFBUVMsU0FBUztRQUNyQztRQUNBLGlFQUFpRTtRQUNqRSxnREFBZ0Q7UUFDaEQsSUFBSSxPQUFPVCxRQUFRVSxPQUFPLEtBQUssYUFBYTtZQUN4Q0osSUFBSUksT0FBTyxHQUFHVixRQUFRVSxPQUFPO1FBQ2pDO1FBQ0EscUNBQXFDO1FBQ3BDLElBQUduQixRQUFRb0IsdUJBQXVCLEVBQUVMLEtBQUtELE1BQU1MO1FBQ2hELDhCQUE4QjtRQUM3QixJQUFHVCxRQUFRcUIscUJBQXFCLEVBQUVOLEtBQUtELE1BQU1MO1FBQzlDLE1BQU1hLFNBQVMsTUFBTSxLQUFLLENBQUNDLGVBQWVYLFFBQVFDLFNBQVNFO1FBQzNELE9BQU8sSUFBSSxDQUFDUyxPQUFPLEdBQUdGLFNBQVNBLE9BQU9HLE1BQU07SUFDaEQ7QUFDSjtBQUNBNUIseUJBQXlCLEdBQUdFO0FBQzNCLElBQUdJLFlBQVl1QixhQUFhLEVBQUUzQixtQkFBbUI7SUFBQ0ksWUFBWXdCLE1BQU0sQ0FBQ0MsY0FBYztJQUFFekIsWUFBWXdCLE1BQU0sQ0FBQ0UsU0FBUztJQUFFMUIsWUFBWXdCLE1BQU0sQ0FBQ0csV0FBVztDQUFDLEdBQ25KLG9DQUFvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9kaXN0aW5jdC5qcz9kMTk4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5EaXN0aW5jdE9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKipcbiAqIFJldHVybiBhIGxpc3Qgb2YgZGlzdGluY3QgdmFsdWVzIGZvciB0aGUgZ2l2ZW4ga2V5IGFjcm9zcyBhIGNvbGxlY3Rpb24uXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgRGlzdGluY3RPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IGEgRGlzdGluY3Qgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbGxlY3Rpb24gLSBDb2xsZWN0aW9uIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBrZXkgLSBGaWVsZCBvZiB0aGUgZG9jdW1lbnQgdG8gZmluZCBkaXN0aW5jdCB2YWx1ZXMgZm9yLlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSBmb3IgZmlsdGVyaW5nIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRvIHdoaWNoIHdlIGFwcGx5IHRoZSBkaXN0aW5jdCBmaWx0ZXIuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncy4gU2VlIENvbGxlY3Rpb24ucHJvdG90eXBlLmRpc3RpbmN0IGZvciBhIGxpc3Qgb2Ygb3B0aW9ucy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBrZXksIHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnZGlzdGluY3QnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBjb2xsID0gdGhpcy5jb2xsZWN0aW9uO1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmtleTtcbiAgICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnF1ZXJ5O1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAvLyBEaXN0aW5jdCBjb21tYW5kXG4gICAgICAgIGNvbnN0IGNtZCA9IHtcbiAgICAgICAgICAgIGRpc3RpbmN0OiBjb2xsLmNvbGxlY3Rpb25OYW1lLFxuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBxdWVyeTogcXVlcnlcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQWRkIG1heFRpbWVNUyBpZiBkZWZpbmVkXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5tYXhUaW1lTVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjbWQubWF4VGltZU1TID0gb3B0aW9ucy5tYXhUaW1lTVM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgY2hlY2sgZm9yIHVuZGVmaW5lZCBzcGVjaWZpY2FsbHkgaGVyZSB0byBhbGxvdyBmYWxzeSB2YWx1ZXNcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb21tZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY21kLmNvbW1lbnQgPSBvcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG8gd2UgaGF2ZSBhIHJlYWRDb25jZXJuIHNwZWNpZmllZFxuICAgICAgICAoMCwgdXRpbHNfMS5kZWNvcmF0ZVdpdGhSZWFkQ29uY2VybikoY21kLCBjb2xsLCBvcHRpb25zKTtcbiAgICAgICAgLy8gSGF2ZSB3ZSBzcGVjaWZpZWQgY29sbGF0aW9uXG4gICAgICAgICgwLCB1dGlsc18xLmRlY29yYXRlV2l0aENvbGxhdGlvbikoY21kLCBjb2xsLCBvcHRpb25zKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3VwZXIuZXhlY3V0ZUNvbW1hbmQoc2VydmVyLCBzZXNzaW9uLCBjbWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5leHBsYWluID8gcmVzdWx0IDogcmVzdWx0LnZhbHVlcztcbiAgICB9XG59XG5leHBvcnRzLkRpc3RpbmN0T3BlcmF0aW9uID0gRGlzdGluY3RPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRGlzdGluY3RPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT04sIG9wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsIG9wZXJhdGlvbl8xLkFzcGVjdC5FWFBMQUlOQUJMRV0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlzdGluY3QuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRGlzdGluY3RPcGVyYXRpb24iLCJ1dGlsc18xIiwicmVxdWlyZSIsImNvbW1hbmRfMSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZE9wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsImtleSIsInF1ZXJ5Iiwib3B0aW9ucyIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJjb2xsIiwiY21kIiwiZGlzdGluY3QiLCJjb2xsZWN0aW9uTmFtZSIsIm1heFRpbWVNUyIsImNvbW1lbnQiLCJkZWNvcmF0ZVdpdGhSZWFkQ29uY2VybiIsImRlY29yYXRlV2l0aENvbGxhdGlvbiIsInJlc3VsdCIsImV4ZWN1dGVDb21tYW5kIiwiZXhwbGFpbiIsInZhbHVlcyIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRUFEX09QRVJBVElPTiIsIlJFVFJZQUJMRSIsIkVYUExBSU5BQkxFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/distinct.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/drop.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/drop.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DropDatabaseOperation = exports.DropCollectionOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class DropCollectionOperation extends command_1.CommandOperation {\n    constructor(db, name, options = {}){\n        super(db, options);\n        this.db = db;\n        this.options = options;\n        this.name = name;\n    }\n    get commandName() {\n        return \"drop\";\n    }\n    async execute(server, session) {\n        const db = this.db;\n        const options = this.options;\n        const name = this.name;\n        const encryptedFieldsMap = db.client.options.autoEncryption?.encryptedFieldsMap;\n        let encryptedFields = options.encryptedFields ?? encryptedFieldsMap?.[`${db.databaseName}.${name}`];\n        if (!encryptedFields && encryptedFieldsMap) {\n            // If the MongoClient was configured with an encryptedFieldsMap,\n            // and no encryptedFields config was available in it or explicitly\n            // passed as an argument, the spec tells us to look one up using\n            // listCollections().\n            const listCollectionsResult = await db.listCollections({\n                name\n            }, {\n                nameOnly: false\n            }).toArray();\n            encryptedFields = listCollectionsResult?.[0]?.options?.encryptedFields;\n        }\n        if (encryptedFields) {\n            const escCollection = encryptedFields.escCollection || `enxcol_.${name}.esc`;\n            const ecocCollection = encryptedFields.ecocCollection || `enxcol_.${name}.ecoc`;\n            for (const collectionName of [\n                escCollection,\n                ecocCollection\n            ]){\n                // Drop auxilliary collections, ignoring potential NamespaceNotFound errors.\n                const dropOp = new DropCollectionOperation(db, collectionName);\n                try {\n                    await dropOp.executeWithoutEncryptedFieldsCheck(server, session);\n                } catch (err) {\n                    if (!(err instanceof error_1.MongoServerError) || err.code !== error_1.MONGODB_ERROR_CODES.NamespaceNotFound) {\n                        throw err;\n                    }\n                }\n            }\n        }\n        return this.executeWithoutEncryptedFieldsCheck(server, session);\n    }\n    async executeWithoutEncryptedFieldsCheck(server, session) {\n        await super.executeCommand(server, session, {\n            drop: this.name\n        });\n        return true;\n    }\n}\nexports.DropCollectionOperation = DropCollectionOperation;\n/** @internal */ class DropDatabaseOperation extends command_1.CommandOperation {\n    constructor(db, options){\n        super(db, options);\n        this.options = options;\n    }\n    get commandName() {\n        return \"dropDatabase\";\n    }\n    async execute(server, session) {\n        await super.executeCommand(server, session, {\n            dropDatabase: 1\n        });\n        return true;\n    }\n}\nexports.DropDatabaseOperation = DropDatabaseOperation;\n(0, operation_1.defineAspects)(DropCollectionOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(DropDatabaseOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=drop.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9kcm9wLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw2QkFBNkIsR0FBR0EsK0JBQStCLEdBQUcsS0FBSztBQUN2RSxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsZ0NBQWdDRyxVQUFVRSxnQkFBZ0I7SUFDNURDLFlBQVlDLEVBQUUsRUFBRUMsSUFBSSxFQUFFQyxVQUFVLENBQUMsQ0FBQyxDQUFFO1FBQ2hDLEtBQUssQ0FBQ0YsSUFBSUU7UUFDVixJQUFJLENBQUNGLEVBQUUsR0FBR0E7UUFDVixJQUFJLENBQUNFLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNELElBQUksR0FBR0E7SUFDaEI7SUFDQSxJQUFJRSxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsTUFBTU4sS0FBSyxJQUFJLENBQUNBLEVBQUU7UUFDbEIsTUFBTUUsVUFBVSxJQUFJLENBQUNBLE9BQU87UUFDNUIsTUFBTUQsT0FBTyxJQUFJLENBQUNBLElBQUk7UUFDdEIsTUFBTU0scUJBQXFCUCxHQUFHUSxNQUFNLENBQUNOLE9BQU8sQ0FBQ08sY0FBYyxFQUFFRjtRQUM3RCxJQUFJRyxrQkFBa0JSLFFBQVFRLGVBQWUsSUFBSUgsb0JBQW9CLENBQUMsQ0FBQyxFQUFFUCxHQUFHVyxZQUFZLENBQUMsQ0FBQyxFQUFFVixLQUFLLENBQUMsQ0FBQztRQUNuRyxJQUFJLENBQUNTLG1CQUFtQkgsb0JBQW9CO1lBQ3hDLGdFQUFnRTtZQUNoRSxrRUFBa0U7WUFDbEUsZ0VBQWdFO1lBQ2hFLHFCQUFxQjtZQUNyQixNQUFNSyx3QkFBd0IsTUFBTVosR0FDL0JhLGVBQWUsQ0FBQztnQkFBRVo7WUFBSyxHQUFHO2dCQUFFYSxVQUFVO1lBQU0sR0FDNUNDLE9BQU87WUFDWkwsa0JBQWtCRSx1QkFBdUIsQ0FBQyxFQUFFLEVBQUVWLFNBQVNRO1FBQzNEO1FBQ0EsSUFBSUEsaUJBQWlCO1lBQ2pCLE1BQU1NLGdCQUFnQk4sZ0JBQWdCTSxhQUFhLElBQUksQ0FBQyxRQUFRLEVBQUVmLEtBQUssSUFBSSxDQUFDO1lBQzVFLE1BQU1nQixpQkFBaUJQLGdCQUFnQk8sY0FBYyxJQUFJLENBQUMsUUFBUSxFQUFFaEIsS0FBSyxLQUFLLENBQUM7WUFDL0UsS0FBSyxNQUFNaUIsa0JBQWtCO2dCQUFDRjtnQkFBZUM7YUFBZSxDQUFFO2dCQUMxRCw0RUFBNEU7Z0JBQzVFLE1BQU1FLFNBQVMsSUFBSTFCLHdCQUF3Qk8sSUFBSWtCO2dCQUMvQyxJQUFJO29CQUNBLE1BQU1DLE9BQU9DLGtDQUFrQyxDQUFDZixRQUFRQztnQkFDNUQsRUFDQSxPQUFPZSxLQUFLO29CQUNSLElBQUksQ0FBRUEsQ0FBQUEsZUFBZTNCLFFBQVE0QixnQkFBZ0IsS0FDekNELElBQUlFLElBQUksS0FBSzdCLFFBQVE4QixtQkFBbUIsQ0FBQ0MsaUJBQWlCLEVBQUU7d0JBQzVELE1BQU1KO29CQUNWO2dCQUNKO1lBQ0o7UUFDSjtRQUNBLE9BQU8sSUFBSSxDQUFDRCxrQ0FBa0MsQ0FBQ2YsUUFBUUM7SUFDM0Q7SUFDQSxNQUFNYyxtQ0FBbUNmLE1BQU0sRUFBRUMsT0FBTyxFQUFFO1FBQ3RELE1BQU0sS0FBSyxDQUFDb0IsZUFBZXJCLFFBQVFDLFNBQVM7WUFBRXFCLE1BQU0sSUFBSSxDQUFDMUIsSUFBSTtRQUFDO1FBQzlELE9BQU87SUFDWDtBQUNKO0FBQ0FYLCtCQUErQixHQUFHRztBQUNsQyxjQUFjLEdBQ2QsTUFBTUQsOEJBQThCSSxVQUFVRSxnQkFBZ0I7SUFDMURDLFlBQVlDLEVBQUUsRUFBRUUsT0FBTyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0YsSUFBSUU7UUFDVixJQUFJLENBQUNBLE9BQU8sR0FBR0E7SUFDbkI7SUFDQSxJQUFJQyxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsTUFBTSxLQUFLLENBQUNvQixlQUFlckIsUUFBUUMsU0FBUztZQUFFc0IsY0FBYztRQUFFO1FBQzlELE9BQU87SUFDWDtBQUNKO0FBQ0F0Qyw2QkFBNkIsR0FBR0U7QUFDL0IsSUFBR0ssWUFBWWdDLGFBQWEsRUFBRXBDLHlCQUF5QjtJQUFDSSxZQUFZaUMsTUFBTSxDQUFDQyxlQUFlO0NBQUM7QUFDM0YsSUFBR2xDLFlBQVlnQyxhQUFhLEVBQUVyQyx1QkFBdUI7SUFBQ0ssWUFBWWlDLE1BQU0sQ0FBQ0MsZUFBZTtDQUFDLEdBQzFGLGdDQUFnQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9kcm9wLmpzP2JiMmUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRyb3BEYXRhYmFzZU9wZXJhdGlvbiA9IGV4cG9ydHMuRHJvcENvbGxlY3Rpb25PcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgRHJvcENvbGxlY3Rpb25PcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZGIsIG5hbWUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcihkYiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2Ryb3AnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBkYiA9IHRoaXMuZGI7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgIGNvbnN0IGVuY3J5cHRlZEZpZWxkc01hcCA9IGRiLmNsaWVudC5vcHRpb25zLmF1dG9FbmNyeXB0aW9uPy5lbmNyeXB0ZWRGaWVsZHNNYXA7XG4gICAgICAgIGxldCBlbmNyeXB0ZWRGaWVsZHMgPSBvcHRpb25zLmVuY3J5cHRlZEZpZWxkcyA/PyBlbmNyeXB0ZWRGaWVsZHNNYXA/LltgJHtkYi5kYXRhYmFzZU5hbWV9LiR7bmFtZX1gXTtcbiAgICAgICAgaWYgKCFlbmNyeXB0ZWRGaWVsZHMgJiYgZW5jcnlwdGVkRmllbGRzTWFwKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgTW9uZ29DbGllbnQgd2FzIGNvbmZpZ3VyZWQgd2l0aCBhbiBlbmNyeXB0ZWRGaWVsZHNNYXAsXG4gICAgICAgICAgICAvLyBhbmQgbm8gZW5jcnlwdGVkRmllbGRzIGNvbmZpZyB3YXMgYXZhaWxhYmxlIGluIGl0IG9yIGV4cGxpY2l0bHlcbiAgICAgICAgICAgIC8vIHBhc3NlZCBhcyBhbiBhcmd1bWVudCwgdGhlIHNwZWMgdGVsbHMgdXMgdG8gbG9vayBvbmUgdXAgdXNpbmdcbiAgICAgICAgICAgIC8vIGxpc3RDb2xsZWN0aW9ucygpLlxuICAgICAgICAgICAgY29uc3QgbGlzdENvbGxlY3Rpb25zUmVzdWx0ID0gYXdhaXQgZGJcbiAgICAgICAgICAgICAgICAubGlzdENvbGxlY3Rpb25zKHsgbmFtZSB9LCB7IG5hbWVPbmx5OiBmYWxzZSB9KVxuICAgICAgICAgICAgICAgIC50b0FycmF5KCk7XG4gICAgICAgICAgICBlbmNyeXB0ZWRGaWVsZHMgPSBsaXN0Q29sbGVjdGlvbnNSZXN1bHQ/LlswXT8ub3B0aW9ucz8uZW5jcnlwdGVkRmllbGRzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmNyeXB0ZWRGaWVsZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGVzY0NvbGxlY3Rpb24gPSBlbmNyeXB0ZWRGaWVsZHMuZXNjQ29sbGVjdGlvbiB8fCBgZW54Y29sXy4ke25hbWV9LmVzY2A7XG4gICAgICAgICAgICBjb25zdCBlY29jQ29sbGVjdGlvbiA9IGVuY3J5cHRlZEZpZWxkcy5lY29jQ29sbGVjdGlvbiB8fCBgZW54Y29sXy4ke25hbWV9LmVjb2NgO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjb2xsZWN0aW9uTmFtZSBvZiBbZXNjQ29sbGVjdGlvbiwgZWNvY0NvbGxlY3Rpb25dKSB7XG4gICAgICAgICAgICAgICAgLy8gRHJvcCBhdXhpbGxpYXJ5IGNvbGxlY3Rpb25zLCBpZ25vcmluZyBwb3RlbnRpYWwgTmFtZXNwYWNlTm90Rm91bmQgZXJyb3JzLlxuICAgICAgICAgICAgICAgIGNvbnN0IGRyb3BPcCA9IG5ldyBEcm9wQ29sbGVjdGlvbk9wZXJhdGlvbihkYiwgY29sbGVjdGlvbk5hbWUpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGRyb3BPcC5leGVjdXRlV2l0aG91dEVuY3J5cHRlZEZpZWxkc0NoZWNrKHNlcnZlciwgc2Vzc2lvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyLmNvZGUgIT09IGVycm9yXzEuTU9OR09EQl9FUlJPUl9DT0RFUy5OYW1lc3BhY2VOb3RGb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVXaXRob3V0RW5jcnlwdGVkRmllbGRzQ2hlY2soc2VydmVyLCBzZXNzaW9uKTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZVdpdGhvdXRFbmNyeXB0ZWRGaWVsZHNDaGVjayhzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuZXhlY3V0ZUNvbW1hbmQoc2VydmVyLCBzZXNzaW9uLCB7IGRyb3A6IHRoaXMubmFtZSB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuZXhwb3J0cy5Ecm9wQ29sbGVjdGlvbk9wZXJhdGlvbiA9IERyb3BDb2xsZWN0aW9uT3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgRHJvcERhdGFiYXNlT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGRiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2Ryb3BEYXRhYmFzZSc7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmV4ZWN1dGVDb21tYW5kKHNlcnZlciwgc2Vzc2lvbiwgeyBkcm9wRGF0YWJhc2U6IDEgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydHMuRHJvcERhdGFiYXNlT3BlcmF0aW9uID0gRHJvcERhdGFiYXNlT3BlcmF0aW9uO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKERyb3BDb2xsZWN0aW9uT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKERyb3BEYXRhYmFzZU9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT05dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyb3AuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRHJvcERhdGFiYXNlT3BlcmF0aW9uIiwiRHJvcENvbGxlY3Rpb25PcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsImNvbW1hbmRfMSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZE9wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiZGIiLCJuYW1lIiwib3B0aW9ucyIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJlbmNyeXB0ZWRGaWVsZHNNYXAiLCJjbGllbnQiLCJhdXRvRW5jcnlwdGlvbiIsImVuY3J5cHRlZEZpZWxkcyIsImRhdGFiYXNlTmFtZSIsImxpc3RDb2xsZWN0aW9uc1Jlc3VsdCIsImxpc3RDb2xsZWN0aW9ucyIsIm5hbWVPbmx5IiwidG9BcnJheSIsImVzY0NvbGxlY3Rpb24iLCJlY29jQ29sbGVjdGlvbiIsImNvbGxlY3Rpb25OYW1lIiwiZHJvcE9wIiwiZXhlY3V0ZVdpdGhvdXRFbmNyeXB0ZWRGaWVsZHNDaGVjayIsImVyciIsIk1vbmdvU2VydmVyRXJyb3IiLCJjb2RlIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIk5hbWVzcGFjZU5vdEZvdW5kIiwiZXhlY3V0ZUNvbW1hbmQiLCJkcm9wIiwiZHJvcERhdGFiYXNlIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIldSSVRFX09QRVJBVElPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/drop.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/estimated_document_count.js":
/*!*************************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/estimated_document_count.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.EstimatedDocumentCountOperation = void 0;\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class EstimatedDocumentCountOperation extends command_1.CommandOperation {\n    constructor(collection, options = {}){\n        super(collection, options);\n        this.options = options;\n        this.collectionName = collection.collectionName;\n    }\n    get commandName() {\n        return \"count\";\n    }\n    async execute(server, session) {\n        const cmd = {\n            count: this.collectionName\n        };\n        if (typeof this.options.maxTimeMS === \"number\") {\n            cmd.maxTimeMS = this.options.maxTimeMS;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (this.options.comment !== undefined) {\n            cmd.comment = this.options.comment;\n        }\n        const response = await super.executeCommand(server, session, cmd);\n        return response?.n || 0;\n    }\n}\nexports.EstimatedDocumentCountOperation = EstimatedDocumentCountOperation;\n(0, operation_1.defineAspects)(EstimatedDocumentCountOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]); //# sourceMappingURL=estimated_document_count.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9lc3RpbWF0ZWRfZG9jdW1lbnRfY291bnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVDQUF1QyxHQUFHLEtBQUs7QUFDL0MsTUFBTUcsWUFBWUMsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUMsY0FBY0QsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLHdDQUF3Q0MsVUFBVUcsZ0JBQWdCO0lBQ3BFQyxZQUFZQyxVQUFVLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDbEMsS0FBSyxDQUFDRCxZQUFZQztRQUNsQixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLGNBQWMsR0FBR0YsV0FBV0UsY0FBYztJQUNuRDtJQUNBLElBQUlDLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixNQUFNQyxNQUFNO1lBQUVDLE9BQU8sSUFBSSxDQUFDTixjQUFjO1FBQUM7UUFDekMsSUFBSSxPQUFPLElBQUksQ0FBQ0QsT0FBTyxDQUFDUSxTQUFTLEtBQUssVUFBVTtZQUM1Q0YsSUFBSUUsU0FBUyxHQUFHLElBQUksQ0FBQ1IsT0FBTyxDQUFDUSxTQUFTO1FBQzFDO1FBQ0EsaUVBQWlFO1FBQ2pFLGdEQUFnRDtRQUNoRCxJQUFJLElBQUksQ0FBQ1IsT0FBTyxDQUFDUyxPQUFPLEtBQUtDLFdBQVc7WUFDcENKLElBQUlHLE9BQU8sR0FBRyxJQUFJLENBQUNULE9BQU8sQ0FBQ1MsT0FBTztRQUN0QztRQUNBLE1BQU1FLFdBQVcsTUFBTSxLQUFLLENBQUNDLGVBQWVSLFFBQVFDLFNBQVNDO1FBQzdELE9BQU9LLFVBQVVFLEtBQUs7SUFDMUI7QUFDSjtBQUNBdEIsdUNBQXVDLEdBQUdFO0FBQ3pDLElBQUdHLFlBQVlrQixhQUFhLEVBQUVyQixpQ0FBaUM7SUFDNURHLFlBQVltQixNQUFNLENBQUNDLGNBQWM7SUFDakNwQixZQUFZbUIsTUFBTSxDQUFDRSxTQUFTO0lBQzVCckIsWUFBWW1CLE1BQU0sQ0FBQ0csZUFBZTtDQUNyQyxHQUNELG9EQUFvRCIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9lc3RpbWF0ZWRfZG9jdW1lbnRfY291bnQuanM/ODIzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRXN0aW1hdGVkRG9jdW1lbnRDb3VudE9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEVzdGltYXRlZERvY3VtZW50Q291bnRPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25OYW1lID0gY29sbGVjdGlvbi5jb2xsZWN0aW9uTmFtZTtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2NvdW50JztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgY21kID0geyBjb3VudDogdGhpcy5jb2xsZWN0aW9uTmFtZSB9O1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5tYXhUaW1lTVMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjbWQubWF4VGltZU1TID0gdGhpcy5vcHRpb25zLm1heFRpbWVNUztcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSBjaGVjayBmb3IgdW5kZWZpbmVkIHNwZWNpZmljYWxseSBoZXJlIHRvIGFsbG93IGZhbHN5IHZhbHVlc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNtZC5jb21tZW50ID0gdGhpcy5vcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdXBlci5leGVjdXRlQ29tbWFuZChzZXJ2ZXIsIHNlc3Npb24sIGNtZCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZT8ubiB8fCAwO1xuICAgIH1cbn1cbmV4cG9ydHMuRXN0aW1hdGVkRG9jdW1lbnRDb3VudE9wZXJhdGlvbiA9IEVzdGltYXRlZERvY3VtZW50Q291bnRPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRXN0aW1hdGVkRG9jdW1lbnRDb3VudE9wZXJhdGlvbiwgW1xuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5SRUFEX09QRVJBVElPTixcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5DVVJTT1JfQ1JFQVRJTkdcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXN0aW1hdGVkX2RvY3VtZW50X2NvdW50LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkVzdGltYXRlZERvY3VtZW50Q291bnRPcGVyYXRpb24iLCJjb21tYW5kXzEiLCJyZXF1aXJlIiwib3BlcmF0aW9uXzEiLCJDb21tYW5kT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwib3B0aW9ucyIsImNvbGxlY3Rpb25OYW1lIiwiY29tbWFuZE5hbWUiLCJleGVjdXRlIiwic2VydmVyIiwic2Vzc2lvbiIsImNtZCIsImNvdW50IiwibWF4VGltZU1TIiwiY29tbWVudCIsInVuZGVmaW5lZCIsInJlc3BvbnNlIiwiZXhlY3V0ZUNvbW1hbmQiLCJuIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIlJFQURfT1BFUkFUSU9OIiwiUkVUUllBQkxFIiwiQ1VSU09SX0NSRUFUSU5HIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/estimated_document_count.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/execute_operation.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.executeOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst server_selection_1 = __webpack_require__(/*! ../sdam/server_selection */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nconst MMAPv1_RETRY_WRITES_ERROR_CODE = error_1.MONGODB_ERROR_CODES.IllegalOperation;\nconst MMAPv1_RETRY_WRITES_ERROR_MESSAGE = \"This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.\";\n/**\n * Executes the given operation with provided arguments.\n * @internal\n *\n * @remarks\n * Allows for a single point of entry to provide features such as implicit sessions, which\n * are required by the Driver Sessions specification in the event that a ClientSession is\n * not provided.\n *\n * The expectation is that this function:\n * - Connects the MongoClient if it has not already been connected\n * - Creates a session if none is provided and cleans up the session it creates\n * - Selects a server based on readPreference or various factors\n * - Retries an operation if it fails for certain errors, see {@link retryOperation}\n *\n * @typeParam T - The operation's type\n * @typeParam TResult - The type of the operation's result, calculated from T\n *\n * @param client - The MongoClient to execute this operation with\n * @param operation - The operation to execute\n */ async function executeOperation(client, operation) {\n    if (!(operation instanceof operation_1.AbstractOperation)) {\n        // TODO(NODE-3483): Extend MongoRuntimeError\n        throw new error_1.MongoRuntimeError(\"This method requires a valid operation instance\");\n    }\n    if (client.topology == null) {\n        // Auto connect on operation\n        if (client.s.hasBeenClosed) {\n            throw new error_1.MongoNotConnectedError(\"Client must be connected before running operations\");\n        }\n        client.s.options[Symbol.for(\"@@mdb.skipPingOnConnect\")] = true;\n        try {\n            await client.connect();\n        } finally{\n            delete client.s.options[Symbol.for(\"@@mdb.skipPingOnConnect\")];\n        }\n    }\n    const { topology } = client;\n    if (topology == null) {\n        throw new error_1.MongoRuntimeError(\"client.connect did not create a topology but also did not throw\");\n    }\n    // The driver sessions spec mandates that we implicitly create sessions for operations\n    // that are not explicitly provided with a session.\n    let session = operation.session;\n    let owner;\n    if (session == null) {\n        owner = Symbol();\n        session = client.startSession({\n            owner,\n            explicit: false\n        });\n    } else if (session.hasEnded) {\n        throw new error_1.MongoExpiredSessionError(\"Use of expired sessions is not permitted\");\n    } else if (session.snapshotEnabled && !topology.capabilities.supportsSnapshotReads) {\n        throw new error_1.MongoCompatibilityError(\"Snapshot reads require MongoDB 5.0 or later\");\n    } else if (session.client !== client) {\n        throw new error_1.MongoInvalidArgumentError(\"ClientSession must be from the same MongoClient\");\n    }\n    const readPreference = operation.readPreference ?? read_preference_1.ReadPreference.primary;\n    const inTransaction = !!session?.inTransaction();\n    if (inTransaction && !readPreference.equals(read_preference_1.ReadPreference.primary)) {\n        throw new error_1.MongoTransactionError(`Read preference in a transaction must be primary, not: ${readPreference.mode}`);\n    }\n    if (session?.isPinned && session.transaction.isCommitted && !operation.bypassPinningCheck) {\n        session.unpin();\n    }\n    let selector;\n    if (operation.hasAspect(operation_1.Aspect.MUST_SELECT_SAME_SERVER)) {\n        // GetMore and KillCursor operations must always select the same server, but run through\n        // server selection to potentially force monitor checks if the server is\n        // in an unknown state.\n        selector = (0, server_selection_1.sameServerSelector)(operation.server?.description);\n    } else if (operation.trySecondaryWrite) {\n        // If operation should try to write to secondary use the custom server selector\n        // otherwise provide the read preference.\n        selector = (0, server_selection_1.secondaryWritableServerSelector)(topology.commonWireVersion, readPreference);\n    } else {\n        selector = readPreference;\n    }\n    const server = await topology.selectServerAsync(selector, {\n        session,\n        operationName: operation.commandName\n    });\n    if (session == null) {\n        // No session also means it is not retryable, early exit\n        return operation.execute(server, undefined);\n    }\n    if (!operation.hasAspect(operation_1.Aspect.RETRYABLE)) {\n        // non-retryable operation, early exit\n        try {\n            return await operation.execute(server, session);\n        } finally{\n            if (session?.owner != null && session.owner === owner) {\n                await session.endSession().catch(()=>null);\n            }\n        }\n    }\n    const willRetryRead = topology.s.options.retryReads && !inTransaction && operation.canRetryRead;\n    const willRetryWrite = topology.s.options.retryWrites && !inTransaction && (0, utils_1.supportsRetryableWrites)(server) && operation.canRetryWrite;\n    const hasReadAspect = operation.hasAspect(operation_1.Aspect.READ_OPERATION);\n    const hasWriteAspect = operation.hasAspect(operation_1.Aspect.WRITE_OPERATION);\n    const willRetry = hasReadAspect && willRetryRead || hasWriteAspect && willRetryWrite;\n    if (hasWriteAspect && willRetryWrite) {\n        operation.options.willRetryWrite = true;\n        session.incrementTransactionNumber();\n    }\n    try {\n        return await operation.execute(server, session);\n    } catch (operationError) {\n        if (willRetry && operationError instanceof error_1.MongoError) {\n            return await retryOperation(operation, operationError, {\n                session,\n                topology,\n                selector,\n                previousServer: server.description\n            });\n        }\n        throw operationError;\n    } finally{\n        if (session?.owner != null && session.owner === owner) {\n            await session.endSession().catch(()=>null);\n        }\n    }\n}\nexports.executeOperation = executeOperation;\nasync function retryOperation(operation, originalError, { session, topology, selector, previousServer }) {\n    const isWriteOperation = operation.hasAspect(operation_1.Aspect.WRITE_OPERATION);\n    const isReadOperation = operation.hasAspect(operation_1.Aspect.READ_OPERATION);\n    if (isWriteOperation && originalError.code === MMAPv1_RETRY_WRITES_ERROR_CODE) {\n        throw new error_1.MongoServerError({\n            message: MMAPv1_RETRY_WRITES_ERROR_MESSAGE,\n            errmsg: MMAPv1_RETRY_WRITES_ERROR_MESSAGE,\n            originalError\n        });\n    }\n    if (isWriteOperation && !(0, error_1.isRetryableWriteError)(originalError)) {\n        throw originalError;\n    }\n    if (isReadOperation && !(0, error_1.isRetryableReadError)(originalError)) {\n        throw originalError;\n    }\n    if (originalError instanceof error_1.MongoNetworkError && session.isPinned && !session.inTransaction() && operation.hasAspect(operation_1.Aspect.CURSOR_CREATING)) {\n        // If we have a cursor and the initial command fails with a network error,\n        // we can retry it on another connection. So we need to check it back in, clear the\n        // pool for the service id, and retry again.\n        session.unpin({\n            force: true,\n            forceClear: true\n        });\n    }\n    // select a new server, and attempt to retry the operation\n    const server = await topology.selectServerAsync(selector, {\n        session,\n        operationName: operation.commandName,\n        previousServer\n    });\n    if (isWriteOperation && !(0, utils_1.supportsRetryableWrites)(server)) {\n        throw new error_1.MongoUnexpectedServerResponseError(\"Selected server does not support retryable writes\");\n    }\n    try {\n        return await operation.execute(server, session);\n    } catch (retryError) {\n        if (retryError instanceof error_1.MongoError && retryError.hasErrorLabel(error_1.MongoErrorLabel.NoWritesPerformed)) {\n            throw originalError;\n        }\n        throw retryError;\n    }\n} //# sourceMappingURL=execute_operation.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9leGVjdXRlX29wZXJhdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxvQkFBb0JELG1CQUFPQSxDQUFDLCtFQUFvQjtBQUN0RCxNQUFNRSxxQkFBcUJGLG1CQUFPQSxDQUFDLDJGQUEwQjtBQUM3RCxNQUFNRyxVQUFVSCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNSSxjQUFjSixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxNQUFNSyxpQ0FBaUNOLFFBQVFPLG1CQUFtQixDQUFDQyxnQkFBZ0I7QUFDbkYsTUFBTUMsb0NBQW9DO0FBQzFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW9CQyxHQUNELGVBQWVWLGlCQUFpQlcsTUFBTSxFQUFFQyxTQUFTO0lBQzdDLElBQUksQ0FBRUEsQ0FBQUEscUJBQXFCTixZQUFZTyxpQkFBaUIsR0FBRztRQUN2RCw0Q0FBNEM7UUFDNUMsTUFBTSxJQUFJWixRQUFRYSxpQkFBaUIsQ0FBQztJQUN4QztJQUNBLElBQUlILE9BQU9JLFFBQVEsSUFBSSxNQUFNO1FBQ3pCLDRCQUE0QjtRQUM1QixJQUFJSixPQUFPSyxDQUFDLENBQUNDLGFBQWEsRUFBRTtZQUN4QixNQUFNLElBQUloQixRQUFRaUIsc0JBQXNCLENBQUM7UUFDN0M7UUFDQVAsT0FBT0ssQ0FBQyxDQUFDRyxPQUFPLENBQUNDLE9BQU9DLEdBQUcsQ0FBQywyQkFBMkIsR0FBRztRQUMxRCxJQUFJO1lBQ0EsTUFBTVYsT0FBT1csT0FBTztRQUN4QixTQUNRO1lBQ0osT0FBT1gsT0FBT0ssQ0FBQyxDQUFDRyxPQUFPLENBQUNDLE9BQU9DLEdBQUcsQ0FBQywyQkFBMkI7UUFDbEU7SUFDSjtJQUNBLE1B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YztJQUNWO0FBQ0osRUFDQSw2Q0FBNkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvZXhlY3V0ZV9vcGVyYXRpb24uanM/ZTBiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZXhlY3V0ZU9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCByZWFkX3ByZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuLi9yZWFkX3ByZWZlcmVuY2VcIik7XG5jb25zdCBzZXJ2ZXJfc2VsZWN0aW9uXzEgPSByZXF1aXJlKFwiLi4vc2RhbS9zZXJ2ZXJfc2VsZWN0aW9uXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuY29uc3QgTU1BUHYxX1JFVFJZX1dSSVRFU19FUlJPUl9DT0RFID0gZXJyb3JfMS5NT05HT0RCX0VSUk9SX0NPREVTLklsbGVnYWxPcGVyYXRpb247XG5jb25zdCBNTUFQdjFfUkVUUllfV1JJVEVTX0VSUk9SX01FU1NBR0UgPSAnVGhpcyBNb25nb0RCIGRlcGxveW1lbnQgZG9lcyBub3Qgc3VwcG9ydCByZXRyeWFibGUgd3JpdGVzLiBQbGVhc2UgYWRkIHJldHJ5V3JpdGVzPWZhbHNlIHRvIHlvdXIgY29ubmVjdGlvbiBzdHJpbmcuJztcbi8qKlxuICogRXhlY3V0ZXMgdGhlIGdpdmVuIG9wZXJhdGlvbiB3aXRoIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAqIEBpbnRlcm5hbFxuICpcbiAqIEByZW1hcmtzXG4gKiBBbGxvd3MgZm9yIGEgc2luZ2xlIHBvaW50IG9mIGVudHJ5IHRvIHByb3ZpZGUgZmVhdHVyZXMgc3VjaCBhcyBpbXBsaWNpdCBzZXNzaW9ucywgd2hpY2hcbiAqIGFyZSByZXF1aXJlZCBieSB0aGUgRHJpdmVyIFNlc3Npb25zIHNwZWNpZmljYXRpb24gaW4gdGhlIGV2ZW50IHRoYXQgYSBDbGllbnRTZXNzaW9uIGlzXG4gKiBub3QgcHJvdmlkZWQuXG4gKlxuICogVGhlIGV4cGVjdGF0aW9uIGlzIHRoYXQgdGhpcyBmdW5jdGlvbjpcbiAqIC0gQ29ubmVjdHMgdGhlIE1vbmdvQ2xpZW50IGlmIGl0IGhhcyBub3QgYWxyZWFkeSBiZWVuIGNvbm5lY3RlZFxuICogLSBDcmVhdGVzIGEgc2Vzc2lvbiBpZiBub25lIGlzIHByb3ZpZGVkIGFuZCBjbGVhbnMgdXAgdGhlIHNlc3Npb24gaXQgY3JlYXRlc1xuICogLSBTZWxlY3RzIGEgc2VydmVyIGJhc2VkIG9uIHJlYWRQcmVmZXJlbmNlIG9yIHZhcmlvdXMgZmFjdG9yc1xuICogLSBSZXRyaWVzIGFuIG9wZXJhdGlvbiBpZiBpdCBmYWlscyBmb3IgY2VydGFpbiBlcnJvcnMsIHNlZSB7QGxpbmsgcmV0cnlPcGVyYXRpb259XG4gKlxuICogQHR5cGVQYXJhbSBUIC0gVGhlIG9wZXJhdGlvbidzIHR5cGVcbiAqIEB0eXBlUGFyYW0gVFJlc3VsdCAtIFRoZSB0eXBlIG9mIHRoZSBvcGVyYXRpb24ncyByZXN1bHQsIGNhbGN1bGF0ZWQgZnJvbSBUXG4gKlxuICogQHBhcmFtIGNsaWVudCAtIFRoZSBNb25nb0NsaWVudCB0byBleGVjdXRlIHRoaXMgb3BlcmF0aW9uIHdpdGhcbiAqIEBwYXJhbSBvcGVyYXRpb24gLSBUaGUgb3BlcmF0aW9uIHRvIGV4ZWN1dGVcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZU9wZXJhdGlvbihjbGllbnQsIG9wZXJhdGlvbikge1xuICAgIGlmICghKG9wZXJhdGlvbiBpbnN0YW5jZW9mIG9wZXJhdGlvbl8xLkFic3RyYWN0T3BlcmF0aW9uKSkge1xuICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IEV4dGVuZCBNb25nb1J1bnRpbWVFcnJvclxuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignVGhpcyBtZXRob2QgcmVxdWlyZXMgYSB2YWxpZCBvcGVyYXRpb24gaW5zdGFuY2UnKTtcbiAgICB9XG4gICAgaWYgKGNsaWVudC50b3BvbG9neSA9PSBudWxsKSB7XG4gICAgICAgIC8vIEF1dG8gY29ubmVjdCBvbiBvcGVyYXRpb25cbiAgICAgICAgaWYgKGNsaWVudC5zLmhhc0JlZW5DbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvTm90Q29ubmVjdGVkRXJyb3IoJ0NsaWVudCBtdXN0IGJlIGNvbm5lY3RlZCBiZWZvcmUgcnVubmluZyBvcGVyYXRpb25zJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2xpZW50LnMub3B0aW9uc1tTeW1ib2wuZm9yKCdAQG1kYi5za2lwUGluZ09uQ29ubmVjdCcpXSA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgZGVsZXRlIGNsaWVudC5zLm9wdGlvbnNbU3ltYm9sLmZvcignQEBtZGIuc2tpcFBpbmdPbkNvbm5lY3QnKV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgeyB0b3BvbG9neSB9ID0gY2xpZW50O1xuICAgIGlmICh0b3BvbG9neSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdjbGllbnQuY29ubmVjdCBkaWQgbm90IGNyZWF0ZSBhIHRvcG9sb2d5IGJ1dCBhbHNvIGRpZCBub3QgdGhyb3cnKTtcbiAgICB9XG4gICAgLy8gVGhlIGRyaXZlciBzZXNzaW9ucyBzcGVjIG1hbmRhdGVzIHRoYXQgd2UgaW1wbGljaXRseSBjcmVhdGUgc2Vzc2lvbnMgZm9yIG9wZXJhdGlvbnNcbiAgICAvLyB0aGF0IGFyZSBub3QgZXhwbGljaXRseSBwcm92aWRlZCB3aXRoIGEgc2Vzc2lvbi5cbiAgICBsZXQgc2Vzc2lvbiA9IG9wZXJhdGlvbi5zZXNzaW9uO1xuICAgIGxldCBvd25lcjtcbiAgICBpZiAoc2Vzc2lvbiA9PSBudWxsKSB7XG4gICAgICAgIG93bmVyID0gU3ltYm9sKCk7XG4gICAgICAgIHNlc3Npb24gPSBjbGllbnQuc3RhcnRTZXNzaW9uKHsgb3duZXIsIGV4cGxpY2l0OiBmYWxzZSB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2Vzc2lvbi5oYXNFbmRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0V4cGlyZWRTZXNzaW9uRXJyb3IoJ1VzZSBvZiBleHBpcmVkIHNlc3Npb25zIGlzIG5vdCBwZXJtaXR0ZWQnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2Vzc2lvbi5zbmFwc2hvdEVuYWJsZWQgJiYgIXRvcG9sb2d5LmNhcGFiaWxpdGllcy5zdXBwb3J0c1NuYXBzaG90UmVhZHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoJ1NuYXBzaG90IHJlYWRzIHJlcXVpcmUgTW9uZ29EQiA1LjAgb3IgbGF0ZXInKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2Vzc2lvbi5jbGllbnQgIT09IGNsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdDbGllbnRTZXNzaW9uIG11c3QgYmUgZnJvbSB0aGUgc2FtZSBNb25nb0NsaWVudCcpO1xuICAgIH1cbiAgICBjb25zdCByZWFkUHJlZmVyZW5jZSA9IG9wZXJhdGlvbi5yZWFkUHJlZmVyZW5jZSA/PyByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5O1xuICAgIGNvbnN0IGluVHJhbnNhY3Rpb24gPSAhIXNlc3Npb24/LmluVHJhbnNhY3Rpb24oKTtcbiAgICBpZiAoaW5UcmFuc2FjdGlvbiAmJiAhcmVhZFByZWZlcmVuY2UuZXF1YWxzKHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnkpKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVHJhbnNhY3Rpb25FcnJvcihgUmVhZCBwcmVmZXJlbmNlIGluIGEgdHJhbnNhY3Rpb24gbXVzdCBiZSBwcmltYXJ5LCBub3Q6ICR7cmVhZFByZWZlcmVuY2UubW9kZX1gKTtcbiAgICB9XG4gICAgaWYgKHNlc3Npb24/LmlzUGlubmVkICYmIHNlc3Npb24udHJhbnNhY3Rpb24uaXNDb21taXR0ZWQgJiYgIW9wZXJhdGlvbi5ieXBhc3NQaW5uaW5nQ2hlY2spIHtcbiAgICAgICAgc2Vzc2lvbi51bnBpbigpO1xuICAgIH1cbiAgICBsZXQgc2VsZWN0b3I7XG4gICAgaWYgKG9wZXJhdGlvbi5oYXNBc3BlY3Qob3BlcmF0aW9uXzEuQXNwZWN0Lk1VU1RfU0VMRUNUX1NBTUVfU0VSVkVSKSkge1xuICAgICAgICAvLyBHZXRNb3JlIGFuZCBLaWxsQ3Vyc29yIG9wZXJhdGlvbnMgbXVzdCBhbHdheXMgc2VsZWN0IHRoZSBzYW1lIHNlcnZlciwgYnV0IHJ1biB0aHJvdWdoXG4gICAgICAgIC8vIHNlcnZlciBzZWxlY3Rpb24gdG8gcG90ZW50aWFsbHkgZm9yY2UgbW9uaXRvciBjaGVja3MgaWYgdGhlIHNlcnZlciBpc1xuICAgICAgICAvLyBpbiBhbiB1bmtub3duIHN0YXRlLlxuICAgICAgICBzZWxlY3RvciA9ICgwLCBzZXJ2ZXJfc2VsZWN0aW9uXzEuc2FtZVNlcnZlclNlbGVjdG9yKShvcGVyYXRpb24uc2VydmVyPy5kZXNjcmlwdGlvbik7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wZXJhdGlvbi50cnlTZWNvbmRhcnlXcml0ZSkge1xuICAgICAgICAvLyBJZiBvcGVyYXRpb24gc2hvdWxkIHRyeSB0byB3cml0ZSB0byBzZWNvbmRhcnkgdXNlIHRoZSBjdXN0b20gc2VydmVyIHNlbGVjdG9yXG4gICAgICAgIC8vIG90aGVyd2lzZSBwcm92aWRlIHRoZSByZWFkIHByZWZlcmVuY2UuXG4gICAgICAgIHNlbGVjdG9yID0gKDAsIHNlcnZlcl9zZWxlY3Rpb25fMS5zZWNvbmRhcnlXcml0YWJsZVNlcnZlclNlbGVjdG9yKSh0b3BvbG9neS5jb21tb25XaXJlVmVyc2lvbiwgcmVhZFByZWZlcmVuY2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2VsZWN0b3IgPSByZWFkUHJlZmVyZW5jZTtcbiAgICB9XG4gICAgY29uc3Qgc2VydmVyID0gYXdhaXQgdG9wb2xvZ3kuc2VsZWN0U2VydmVyQXN5bmMoc2VsZWN0b3IsIHtcbiAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgb3BlcmF0aW9uTmFtZTogb3BlcmF0aW9uLmNvbW1hbmROYW1lXG4gICAgfSk7XG4gICAgaWYgKHNlc3Npb24gPT0gbnVsbCkge1xuICAgICAgICAvLyBObyBzZXNzaW9uIGFsc28gbWVhbnMgaXQgaXMgbm90IHJldHJ5YWJsZSwgZWFybHkgZXhpdFxuICAgICAgICByZXR1cm4gb3BlcmF0aW9uLmV4ZWN1dGUoc2VydmVyLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBpZiAoIW9wZXJhdGlvbi5oYXNBc3BlY3Qob3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRSkpIHtcbiAgICAgICAgLy8gbm9uLXJldHJ5YWJsZSBvcGVyYXRpb24sIGVhcmx5IGV4aXRcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBvcGVyYXRpb24uZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHNlc3Npb24/Lm93bmVyICE9IG51bGwgJiYgc2Vzc2lvbi5vd25lciA9PT0gb3duZXIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZXNzaW9uLmVuZFNlc3Npb24oKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB3aWxsUmV0cnlSZWFkID0gdG9wb2xvZ3kucy5vcHRpb25zLnJldHJ5UmVhZHMgJiYgIWluVHJhbnNhY3Rpb24gJiYgb3BlcmF0aW9uLmNhblJldHJ5UmVhZDtcbiAgICBjb25zdCB3aWxsUmV0cnlXcml0ZSA9IHRvcG9sb2d5LnMub3B0aW9ucy5yZXRyeVdyaXRlcyAmJlxuICAgICAgICAhaW5UcmFuc2FjdGlvbiAmJlxuICAgICAgICAoMCwgdXRpbHNfMS5zdXBwb3J0c1JldHJ5YWJsZVdyaXRlcykoc2VydmVyKSAmJlxuICAgICAgICBvcGVyYXRpb24uY2FuUmV0cnlXcml0ZTtcbiAgICBjb25zdCBoYXNSZWFkQXNwZWN0ID0gb3BlcmF0aW9uLmhhc0FzcGVjdChvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT04pO1xuICAgIGNvbnN0IGhhc1dyaXRlQXNwZWN0ID0gb3BlcmF0aW9uLmhhc0FzcGVjdChvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OKTtcbiAgICBjb25zdCB3aWxsUmV0cnkgPSAoaGFzUmVhZEFzcGVjdCAmJiB3aWxsUmV0cnlSZWFkKSB8fCAoaGFzV3JpdGVBc3BlY3QgJiYgd2lsbFJldHJ5V3JpdGUpO1xuICAgIGlmIChoYXNXcml0ZUFzcGVjdCAmJiB3aWxsUmV0cnlXcml0ZSkge1xuICAgICAgICBvcGVyYXRpb24ub3B0aW9ucy53aWxsUmV0cnlXcml0ZSA9IHRydWU7XG4gICAgICAgIHNlc3Npb24uaW5jcmVtZW50VHJhbnNhY3Rpb25OdW1iZXIoKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbi5leGVjdXRlKHNlcnZlciwgc2Vzc2lvbik7XG4gICAgfVxuICAgIGNhdGNoIChvcGVyYXRpb25FcnJvcikge1xuICAgICAgICBpZiAod2lsbFJldHJ5ICYmIG9wZXJhdGlvbkVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb0Vycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmV0cnlPcGVyYXRpb24ob3BlcmF0aW9uLCBvcGVyYXRpb25FcnJvciwge1xuICAgICAgICAgICAgICAgIHNlc3Npb24sXG4gICAgICAgICAgICAgICAgdG9wb2xvZ3ksXG4gICAgICAgICAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNTZXJ2ZXI6IHNlcnZlci5kZXNjcmlwdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgb3BlcmF0aW9uRXJyb3I7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBpZiAoc2Vzc2lvbj8ub3duZXIgIT0gbnVsbCAmJiBzZXNzaW9uLm93bmVyID09PSBvd25lcikge1xuICAgICAgICAgICAgYXdhaXQgc2Vzc2lvbi5lbmRTZXNzaW9uKCkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLmV4ZWN1dGVPcGVyYXRpb24gPSBleGVjdXRlT3BlcmF0aW9uO1xuYXN5bmMgZnVuY3Rpb24gcmV0cnlPcGVyYXRpb24ob3BlcmF0aW9uLCBvcmlnaW5hbEVycm9yLCB7IHNlc3Npb24sIHRvcG9sb2d5LCBzZWxlY3RvciwgcHJldmlvdXNTZXJ2ZXIgfSkge1xuICAgIGNvbnN0IGlzV3JpdGVPcGVyYXRpb24gPSBvcGVyYXRpb24uaGFzQXNwZWN0KG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT04pO1xuICAgIGNvbnN0IGlzUmVhZE9wZXJhdGlvbiA9IG9wZXJhdGlvbi5oYXNBc3BlY3Qob3BlcmF0aW9uXzEuQXNwZWN0LlJFQURfT1BFUkFUSU9OKTtcbiAgICBpZiAoaXNXcml0ZU9wZXJhdGlvbiAmJiBvcmlnaW5hbEVycm9yLmNvZGUgPT09IE1NQVB2MV9SRVRSWV9XUklURVNfRVJST1JfQ09ERSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IE1NQVB2MV9SRVRSWV9XUklURVNfRVJST1JfTUVTU0FHRSxcbiAgICAgICAgICAgIGVycm1zZzogTU1BUHYxX1JFVFJZX1dSSVRFU19FUlJPUl9NRVNTQUdFLFxuICAgICAgICAgICAgb3JpZ2luYWxFcnJvclxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGlzV3JpdGVPcGVyYXRpb24gJiYgISgwLCBlcnJvcl8xLmlzUmV0cnlhYmxlV3JpdGVFcnJvcikob3JpZ2luYWxFcnJvcikpIHtcbiAgICAgICAgdGhyb3cgb3JpZ2luYWxFcnJvcjtcbiAgICB9XG4gICAgaWYgKGlzUmVhZE9wZXJhdGlvbiAmJiAhKDAsIGVycm9yXzEuaXNSZXRyeWFibGVSZWFkRXJyb3IpKG9yaWdpbmFsRXJyb3IpKSB7XG4gICAgICAgIHRocm93IG9yaWdpbmFsRXJyb3I7XG4gICAgfVxuICAgIGlmIChvcmlnaW5hbEVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvciAmJlxuICAgICAgICBzZXNzaW9uLmlzUGlubmVkICYmXG4gICAgICAgICFzZXNzaW9uLmluVHJhbnNhY3Rpb24oKSAmJlxuICAgICAgICBvcGVyYXRpb24uaGFzQXNwZWN0KG9wZXJhdGlvbl8xLkFzcGVjdC5DVVJTT1JfQ1JFQVRJTkcpKSB7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBjdXJzb3IgYW5kIHRoZSBpbml0aWFsIGNvbW1hbmQgZmFpbHMgd2l0aCBhIG5ldHdvcmsgZXJyb3IsXG4gICAgICAgIC8vIHdlIGNhbiByZXRyeSBpdCBvbiBhbm90aGVyIGNvbm5lY3Rpb24uIFNvIHdlIG5lZWQgdG8gY2hlY2sgaXQgYmFjayBpbiwgY2xlYXIgdGhlXG4gICAgICAgIC8vIHBvb2wgZm9yIHRoZSBzZXJ2aWNlIGlkLCBhbmQgcmV0cnkgYWdhaW4uXG4gICAgICAgIHNlc3Npb24udW5waW4oeyBmb3JjZTogdHJ1ZSwgZm9yY2VDbGVhcjogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLy8gc2VsZWN0IGEgbmV3IHNlcnZlciwgYW5kIGF0dGVtcHQgdG8gcmV0cnkgdGhlIG9wZXJhdGlvblxuICAgIGNvbnN0IHNlcnZlciA9IGF3YWl0IHRvcG9sb2d5LnNlbGVjdFNlcnZlckFzeW5jKHNlbGVjdG9yLCB7XG4gICAgICAgIHNlc3Npb24sXG4gICAgICAgIG9wZXJhdGlvbk5hbWU6IG9wZXJhdGlvbi5jb21tYW5kTmFtZSxcbiAgICAgICAgcHJldmlvdXNTZXJ2ZXJcbiAgICB9KTtcbiAgICBpZiAoaXNXcml0ZU9wZXJhdGlvbiAmJiAhKDAsIHV0aWxzXzEuc3VwcG9ydHNSZXRyeWFibGVXcml0ZXMpKHNlcnZlcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29VbmV4cGVjdGVkU2VydmVyUmVzcG9uc2VFcnJvcignU2VsZWN0ZWQgc2VydmVyIGRvZXMgbm90IHN1cHBvcnQgcmV0cnlhYmxlIHdyaXRlcycpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uLmV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKTtcbiAgICB9XG4gICAgY2F0Y2ggKHJldHJ5RXJyb3IpIHtcbiAgICAgICAgaWYgKHJldHJ5RXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IgJiZcbiAgICAgICAgICAgIHJldHJ5RXJyb3IuaGFzRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5Ob1dyaXRlc1BlcmZvcm1lZCkpIHtcbiAgICAgICAgICAgIHRocm93IG9yaWdpbmFsRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgcmV0cnlFcnJvcjtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leGVjdXRlX29wZXJhdGlvbi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJleGVjdXRlT3BlcmF0aW9uIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJyZWFkX3ByZWZlcmVuY2VfMSIsInNlcnZlcl9zZWxlY3Rpb25fMSIsInV0aWxzXzEiLCJvcGVyYXRpb25fMSIsIk1NQVB2MV9SRVRSWV9XUklURVNfRVJST1JfQ09ERSIsIk1PTkdPREJfRVJST1JfQ09ERVMiLCJJbGxlZ2FsT3BlcmF0aW9uIiwiTU1BUHYxX1JFVFJZX1dSSVRFU19FUlJPUl9NRVNTQUdFIiwiY2xpZW50Iiwib3BlcmF0aW9uIiwiQWJzdHJhY3RPcGVyYXRpb24iLCJNb25nb1J1bnRpbWVFcnJvciIsInRvcG9sb2d5IiwicyIsImhhc0JlZW5DbG9zZWQiLCJNb25nb05vdENvbm5lY3RlZEVycm9yIiwib3B0aW9ucyIsIlN5bWJvbCIsImZvciIsImNvbm5lY3QiLCJzZXNzaW9uIiwib3duZXIiLCJzdGFydFNlc3Npb24iLCJleHBsaWNpdCIsImhhc0VuZGVkIiwiTW9uZ29FeHBpcmVkU2Vzc2lvbkVycm9yIiwic25hcHNob3RFbmFibGVkIiwiY2FwYWJpbGl0aWVzIiwic3VwcG9ydHNTbmFwc2hvdFJlYWRzIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwicmVhZFByZWZlcmVuY2UiLCJSZWFkUHJlZmVyZW5jZSIsInByaW1hcnkiLCJpblRyYW5zYWN0aW9uIiwiZXF1YWxzIiwiTW9uZ29UcmFuc2FjdGlvbkVycm9yIiwibW9kZSIsImlzUGlubmVkIiwidHJhbnNhY3Rpb24iLCJpc0NvbW1pdHRlZCIsImJ5cGFzc1Bpbm5pbmdDaGVjayIsInVucGluIiwic2VsZWN0b3IiLCJoYXNBc3BlY3QiLCJBc3BlY3QiLCJNVVNUX1NFTEVDVF9TQU1FX1NFUlZFUiIsInNhbWVTZXJ2ZXJTZWxlY3RvciIsInNlcnZlciIsImRlc2NyaXB0aW9uIiwidHJ5U2Vjb25kYXJ5V3JpdGUiLCJzZWNvbmRhcnlXcml0YWJsZVNlcnZlclNlbGVjdG9yIiwiY29tbW9uV2lyZVZlcnNpb24iLCJzZWxlY3RTZXJ2ZXJBc3luYyIsIm9wZXJhdGlvbk5hbWUiLCJjb21tYW5kTmFtZSIsImV4ZWN1dGUiLCJ1bmRlZmluZWQiLCJSRVRSWUFCTEUiLCJlbmRTZXNzaW9uIiwiY2F0Y2giLCJ3aWxsUmV0cnlSZWFkIiwicmV0cnlSZWFkcyIsImNhblJldHJ5UmVhZCIsIndpbGxSZXRyeVdyaXRlIiwicmV0cnlXcml0ZXMiLCJzdXBwb3J0c1JldHJ5YWJsZVdyaXRlcyIsImNhblJldHJ5V3JpdGUiLCJoYXNSZWFkQXNwZWN0IiwiUkVBRF9PUEVSQVRJT04iLCJoYXNXcml0ZUFzcGVjdCIsIldSSVRFX09QRVJBVElPTiIsIndpbGxSZXRyeSIsImluY3JlbWVudFRyYW5zYWN0aW9uTnVtYmVyIiwib3BlcmF0aW9uRXJyb3IiLCJNb25nb0Vycm9yIiwicmV0cnlPcGVyYXRpb24iLCJwcmV2aW91c1NlcnZlciIsIm9yaWdpbmFsRXJyb3IiLCJpc1dyaXRlT3BlcmF0aW9uIiwiaXNSZWFkT3BlcmF0aW9uIiwiY29kZSIsIk1vbmdvU2VydmVyRXJyb3IiLCJtZXNzYWdlIiwiZXJybXNnIiwiaXNSZXRyeWFibGVXcml0ZUVycm9yIiwiaXNSZXRyeWFibGVSZWFkRXJyb3IiLCJNb25nb05ldHdvcmtFcnJvciIsIkNVUlNPUl9DUkVBVElORyIsImZvcmNlIiwiZm9yY2VDbGVhciIsIk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IiLCJyZXRyeUVycm9yIiwiaGFzRXJyb3JMYWJlbCIsIk1vbmdvRXJyb3JMYWJlbCIsIk5vV3JpdGVzUGVyZm9ybWVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/find.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/find.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FindOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_concern_1 = __webpack_require__(/*! ../read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst sort_1 = __webpack_require__(/*! ../sort */ \"(ssr)/./node_modules/mongodb/lib/sort.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class FindOperation extends command_1.CommandOperation {\n    constructor(collection, ns, filter = {}, options = {}){\n        super(collection, options);\n        this.options = {\n            ...options\n        };\n        delete this.options.writeConcern;\n        this.ns = ns;\n        if (typeof filter !== \"object\" || Array.isArray(filter)) {\n            throw new error_1.MongoInvalidArgumentError(\"Query filter must be a plain object or ObjectId\");\n        }\n        // special case passing in an ObjectId as a filter\n        this.filter = filter != null && filter._bsontype === \"ObjectId\" ? {\n            _id: filter\n        } : filter;\n    }\n    get commandName() {\n        return \"find\";\n    }\n    async execute(server, session) {\n        this.server = server;\n        const options = this.options;\n        let findCommand = makeFindCommand(this.ns, this.filter, options);\n        if (this.explain) {\n            findCommand = (0, utils_1.decorateWithExplain)(findCommand, this.explain);\n        }\n        return server.command(this.ns, findCommand, {\n            ...this.options,\n            ...this.bsonOptions,\n            documentsReturnedIn: \"firstBatch\",\n            session\n        });\n    }\n}\nexports.FindOperation = FindOperation;\nfunction makeFindCommand(ns, filter, options) {\n    const findCommand = {\n        find: ns.collection,\n        filter\n    };\n    if (options.sort) {\n        findCommand.sort = (0, sort_1.formatSort)(options.sort);\n    }\n    if (options.projection) {\n        let projection = options.projection;\n        if (projection && Array.isArray(projection)) {\n            projection = projection.length ? projection.reduce((result, field)=>{\n                result[field] = 1;\n                return result;\n            }, {}) : {\n                _id: 1\n            };\n        }\n        findCommand.projection = projection;\n    }\n    if (options.hint) {\n        findCommand.hint = (0, utils_1.normalizeHintField)(options.hint);\n    }\n    if (typeof options.skip === \"number\") {\n        findCommand.skip = options.skip;\n    }\n    if (typeof options.limit === \"number\") {\n        if (options.limit < 0) {\n            findCommand.limit = -options.limit;\n            findCommand.singleBatch = true;\n        } else {\n            findCommand.limit = options.limit;\n        }\n    }\n    if (typeof options.batchSize === \"number\") {\n        if (options.batchSize < 0) {\n            if (options.limit && options.limit !== 0 && Math.abs(options.batchSize) < Math.abs(options.limit)) {\n                findCommand.limit = -options.batchSize;\n            }\n            findCommand.singleBatch = true;\n        } else {\n            findCommand.batchSize = options.batchSize;\n        }\n    }\n    if (typeof options.singleBatch === \"boolean\") {\n        findCommand.singleBatch = options.singleBatch;\n    }\n    // we check for undefined specifically here to allow falsy values\n    // eslint-disable-next-line no-restricted-syntax\n    if (options.comment !== undefined) {\n        findCommand.comment = options.comment;\n    }\n    if (typeof options.maxTimeMS === \"number\") {\n        findCommand.maxTimeMS = options.maxTimeMS;\n    }\n    const readConcern = read_concern_1.ReadConcern.fromOptions(options);\n    if (readConcern) {\n        findCommand.readConcern = readConcern.toJSON();\n    }\n    if (options.max) {\n        findCommand.max = options.max;\n    }\n    if (options.min) {\n        findCommand.min = options.min;\n    }\n    if (typeof options.returnKey === \"boolean\") {\n        findCommand.returnKey = options.returnKey;\n    }\n    if (typeof options.showRecordId === \"boolean\") {\n        findCommand.showRecordId = options.showRecordId;\n    }\n    if (typeof options.tailable === \"boolean\") {\n        findCommand.tailable = options.tailable;\n    }\n    if (typeof options.oplogReplay === \"boolean\") {\n        findCommand.oplogReplay = options.oplogReplay;\n    }\n    if (typeof options.timeout === \"boolean\") {\n        findCommand.noCursorTimeout = !options.timeout;\n    } else if (typeof options.noCursorTimeout === \"boolean\") {\n        findCommand.noCursorTimeout = options.noCursorTimeout;\n    }\n    if (typeof options.awaitData === \"boolean\") {\n        findCommand.awaitData = options.awaitData;\n    }\n    if (typeof options.allowPartialResults === \"boolean\") {\n        findCommand.allowPartialResults = options.allowPartialResults;\n    }\n    if (options.collation) {\n        findCommand.collation = options.collation;\n    }\n    if (typeof options.allowDiskUse === \"boolean\") {\n        findCommand.allowDiskUse = options.allowDiskUse;\n    }\n    if (options.let) {\n        findCommand.let = options.let;\n    }\n    return findCommand;\n}\n(0, operation_1.defineAspects)(FindOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]); //# sourceMappingURL=find.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9maW5kLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBRyxLQUFLO0FBQzdCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLGlCQUFpQkQsbUJBQU9BLENBQUMseUVBQWlCO0FBQ2hELE1BQU1FLFNBQVNGLG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1JLFlBQVlKLG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLE1BQU1LLGNBQWNMLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZCxNQUFNRixzQkFBc0JNLFVBQVVFLGdCQUFnQjtJQUNsREMsWUFBWUMsVUFBVSxFQUFFQyxFQUFFLEVBQUVDLFNBQVMsQ0FBQyxDQUFDLEVBQUVDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDbkQsS0FBSyxDQUFDSCxZQUFZRztRQUNsQixJQUFJLENBQUNBLE9BQU8sR0FBRztZQUFFLEdBQUdBLE9BQU87UUFBQztRQUM1QixPQUFPLElBQUksQ0FBQ0EsT0FBTyxDQUFDQyxZQUFZO1FBQ2hDLElBQUksQ0FBQ0gsRUFBRSxHQUFHQTtRQUNWLElBQUksT0FBT0MsV0FBVyxZQUFZRyxNQUFNQyxPQUFPLENBQUNKLFNBQVM7WUFDckQsTUFBTSxJQUFJWCxRQUFRZ0IseUJBQXlCLENBQUM7UUFDaEQ7UUFDQSxrREFBa0Q7UUFDbEQsSUFBSSxDQUFDTCxNQUFNLEdBQUdBLFVBQVUsUUFBUUEsT0FBT00sU0FBUyxLQUFLLGFBQWE7WUFBRUMsS0FBS1A7UUFBTyxJQUFJQTtJQUN4RjtJQUNBLElBQUlRLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixJQUFJ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UztJQUM3QztJQUNBLElBQUksT0FBT2pELFFBQVFrRCxtQkFBbUIsS0FBSyxXQUFXO1FBQ2xEdkMsWUFBWXVDLG1CQUFtQixHQUFHbEQsUUFBUWtELG1CQUFtQjtJQUNqRTtJQUNBLElBQUlsRCxRQUFRbUQsU0FBUyxFQUFFO1FBQ25CeEMsWUFBWXdDLFNBQVMsR0FBR25ELFFBQVFtRCxTQUFTO0lBQzdDO0lBQ0EsSUFBSSxPQUFPbkQsUUFBUW9ELFlBQVksS0FBSyxXQUFXO1FBQzNDekMsWUFBWXlDLFlBQVksR0FBR3BELFFBQVFvRCxZQUFZO0lBQ25EO0lBQ0EsSUFBSXBELFFBQVFxRCxHQUFHLEVBQUU7UUFDYjFDLFlBQVkwQyxHQUFHLEdBQUdyRCxRQUFRcUQsR0FBRztJQUNqQztJQUNBLE9BQU8xQztBQUNYO0FBQ0MsSUFBR2pCLFlBQVk0RCxhQUFhLEVBQUVuRSxlQUFlO0lBQzFDTyxZQUFZNkQsTUFBTSxDQUFDQyxjQUFjO0lBQ2pDOUQsWUFBWTZELE1BQU0sQ0FBQ0UsU0FBUztJQUM1Qi9ELFlBQVk2RCxNQUFNLENBQUNHLFdBQVc7SUFDOUJoRSxZQUFZNkQsTUFBTSxDQUFDSSxlQUFlO0NBQ3JDLEdBQ0QsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2ZpbmQuanM/ZWMzNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRmluZE9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCByZWFkX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuLi9yZWFkX2NvbmNlcm5cIik7XG5jb25zdCBzb3J0XzEgPSByZXF1aXJlKFwiLi4vc29ydFwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBGaW5kT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG5zLCBmaWx0ZXIgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICAgICAgZGVsZXRlIHRoaXMub3B0aW9ucy53cml0ZUNvbmNlcm47XG4gICAgICAgIHRoaXMubnMgPSBucztcbiAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkoZmlsdGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUXVlcnkgZmlsdGVyIG11c3QgYmUgYSBwbGFpbiBvYmplY3Qgb3IgT2JqZWN0SWQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzcGVjaWFsIGNhc2UgcGFzc2luZyBpbiBhbiBPYmplY3RJZCBhcyBhIGZpbHRlclxuICAgICAgICB0aGlzLmZpbHRlciA9IGZpbHRlciAhPSBudWxsICYmIGZpbHRlci5fYnNvbnR5cGUgPT09ICdPYmplY3RJZCcgPyB7IF9pZDogZmlsdGVyIH0gOiBmaWx0ZXI7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdmaW5kJztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXIgPSBzZXJ2ZXI7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGxldCBmaW5kQ29tbWFuZCA9IG1ha2VGaW5kQ29tbWFuZCh0aGlzLm5zLCB0aGlzLmZpbHRlciwgb3B0aW9ucyk7XG4gICAgICAgIGlmICh0aGlzLmV4cGxhaW4pIHtcbiAgICAgICAgICAgIGZpbmRDb21tYW5kID0gKDAsIHV0aWxzXzEuZGVjb3JhdGVXaXRoRXhwbGFpbikoZmluZENvbW1hbmQsIHRoaXMuZXhwbGFpbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcnZlci5jb21tYW5kKHRoaXMubnMsIGZpbmRDb21tYW5kLCB7XG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICAuLi50aGlzLmJzb25PcHRpb25zLFxuICAgICAgICAgICAgZG9jdW1lbnRzUmV0dXJuZWRJbjogJ2ZpcnN0QmF0Y2gnLFxuICAgICAgICAgICAgc2Vzc2lvblxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkZpbmRPcGVyYXRpb24gPSBGaW5kT3BlcmF0aW9uO1xuZnVuY3Rpb24gbWFrZUZpbmRDb21tYW5kKG5zLCBmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBmaW5kQ29tbWFuZCA9IHtcbiAgICAgICAgZmluZDogbnMuY29sbGVjdGlvbixcbiAgICAgICAgZmlsdGVyXG4gICAgfTtcbiAgICBpZiAob3B0aW9ucy5zb3J0KSB7XG4gICAgICAgIGZpbmRDb21tYW5kLnNvcnQgPSAoMCwgc29ydF8xLmZvcm1hdFNvcnQpKG9wdGlvbnMuc29ydCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnByb2plY3Rpb24pIHtcbiAgICAgICAgbGV0IHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb247XG4gICAgICAgIGlmIChwcm9qZWN0aW9uICYmIEFycmF5LmlzQXJyYXkocHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHByb2plY3Rpb24gPSBwcm9qZWN0aW9uLmxlbmd0aFxuICAgICAgICAgICAgICAgID8gcHJvamVjdGlvbi5yZWR1Y2UoKHJlc3VsdCwgZmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2ZpZWxkXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSwge30pXG4gICAgICAgICAgICAgICAgOiB7IF9pZDogMSB9O1xuICAgICAgICB9XG4gICAgICAgIGZpbmRDb21tYW5kLnByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5oaW50KSB7XG4gICAgICAgIGZpbmRDb21tYW5kLmhpbnQgPSAoMCwgdXRpbHNfMS5ub3JtYWxpemVIaW50RmllbGQpKG9wdGlvbnMuaGludCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5za2lwID09PSAnbnVtYmVyJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5za2lwID0gb3B0aW9ucy5za2lwO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMubGltaXQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmxpbWl0IDwgMCkge1xuICAgICAgICAgICAgZmluZENvbW1hbmQubGltaXQgPSAtb3B0aW9ucy5saW1pdDtcbiAgICAgICAgICAgIGZpbmRDb21tYW5kLnNpbmdsZUJhdGNoID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpbmRDb21tYW5kLmxpbWl0ID0gb3B0aW9ucy5saW1pdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuYmF0Y2hTaXplID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAob3B0aW9ucy5iYXRjaFNpemUgPCAwKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5saW1pdCAmJlxuICAgICAgICAgICAgICAgIG9wdGlvbnMubGltaXQgIT09IDAgJiZcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhvcHRpb25zLmJhdGNoU2l6ZSkgPCBNYXRoLmFicyhvcHRpb25zLmxpbWl0KSkge1xuICAgICAgICAgICAgICAgIGZpbmRDb21tYW5kLmxpbWl0ID0gLW9wdGlvbnMuYmF0Y2hTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluZENvbW1hbmQuc2luZ2xlQmF0Y2ggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmluZENvbW1hbmQuYmF0Y2hTaXplID0gb3B0aW9ucy5iYXRjaFNpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnNpbmdsZUJhdGNoID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgZmluZENvbW1hbmQuc2luZ2xlQmF0Y2ggPSBvcHRpb25zLnNpbmdsZUJhdGNoO1xuICAgIH1cbiAgICAvLyB3ZSBjaGVjayBmb3IgdW5kZWZpbmVkIHNwZWNpZmljYWxseSBoZXJlIHRvIGFsbG93IGZhbHN5IHZhbHVlc1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgIGlmIChvcHRpb25zLmNvbW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmaW5kQ29tbWFuZC5jb21tZW50ID0gb3B0aW9ucy5jb21tZW50O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMubWF4VGltZU1TID09PSAnbnVtYmVyJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5tYXhUaW1lTVMgPSBvcHRpb25zLm1heFRpbWVNUztcbiAgICB9XG4gICAgY29uc3QgcmVhZENvbmNlcm4gPSByZWFkX2NvbmNlcm5fMS5SZWFkQ29uY2Vybi5mcm9tT3B0aW9ucyhvcHRpb25zKTtcbiAgICBpZiAocmVhZENvbmNlcm4pIHtcbiAgICAgICAgZmluZENvbW1hbmQucmVhZENvbmNlcm4gPSByZWFkQ29uY2Vybi50b0pTT04oKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubWF4KSB7XG4gICAgICAgIGZpbmRDb21tYW5kLm1heCA9IG9wdGlvbnMubWF4O1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5taW4pIHtcbiAgICAgICAgZmluZENvbW1hbmQubWluID0gb3B0aW9ucy5taW47XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yZXR1cm5LZXkgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5yZXR1cm5LZXkgPSBvcHRpb25zLnJldHVybktleTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnNob3dSZWNvcmRJZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGZpbmRDb21tYW5kLnNob3dSZWNvcmRJZCA9IG9wdGlvbnMuc2hvd1JlY29yZElkO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudGFpbGFibGUgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaW5kQ29tbWFuZC50YWlsYWJsZSA9IG9wdGlvbnMudGFpbGFibGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5vcGxvZ1JlcGxheSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGZpbmRDb21tYW5kLm9wbG9nUmVwbGF5ID0gb3B0aW9ucy5vcGxvZ1JlcGxheTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnRpbWVvdXQgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5ub0N1cnNvclRpbWVvdXQgPSAhb3B0aW9ucy50aW1lb3V0O1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5ub0N1cnNvclRpbWVvdXQgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaW5kQ29tbWFuZC5ub0N1cnNvclRpbWVvdXQgPSBvcHRpb25zLm5vQ3Vyc29yVGltZW91dDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmF3YWl0RGF0YSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGZpbmRDb21tYW5kLmF3YWl0RGF0YSA9IG9wdGlvbnMuYXdhaXREYXRhO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuYWxsb3dQYXJ0aWFsUmVzdWx0cyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGZpbmRDb21tYW5kLmFsbG93UGFydGlhbFJlc3VsdHMgPSBvcHRpb25zLmFsbG93UGFydGlhbFJlc3VsdHM7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNvbGxhdGlvbikge1xuICAgICAgICBmaW5kQ29tbWFuZC5jb2xsYXRpb24gPSBvcHRpb25zLmNvbGxhdGlvbjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmFsbG93RGlza1VzZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGZpbmRDb21tYW5kLmFsbG93RGlza1VzZSA9IG9wdGlvbnMuYWxsb3dEaXNrVXNlO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5sZXQpIHtcbiAgICAgICAgZmluZENvbW1hbmQubGV0ID0gb3B0aW9ucy5sZXQ7XG4gICAgfVxuICAgIHJldHVybiBmaW5kQ29tbWFuZDtcbn1cbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShGaW5kT3BlcmF0aW9uLCBbXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlJFQURfT1BFUkFUSU9OLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LkVYUExBSU5BQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5DVVJTT1JfQ1JFQVRJTkdcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluZC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJGaW5kT3BlcmF0aW9uIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJyZWFkX2NvbmNlcm5fMSIsInNvcnRfMSIsInV0aWxzXzEiLCJjb21tYW5kXzEiLCJvcGVyYXRpb25fMSIsIkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJucyIsImZpbHRlciIsIm9wdGlvbnMiLCJ3cml0ZUNvbmNlcm4iLCJBcnJheSIsImlzQXJyYXkiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiX2Jzb250eXBlIiwiX2lkIiwiY29tbWFuZE5hbWUiLCJleGVjdXRlIiwic2VydmVyIiwic2Vzc2lvbiIsImZpbmRDb21tYW5kIiwibWFrZUZpbmRDb21tYW5kIiwiZXhwbGFpbiIsImRlY29yYXRlV2l0aEV4cGxhaW4iLCJjb21tYW5kIiwiYnNvbk9wdGlvbnMiLCJkb2N1bWVudHNSZXR1cm5lZEluIiwiZmluZCIsInNvcnQiLCJmb3JtYXRTb3J0IiwicHJvamVjdGlvbiIsImxlbmd0aCIsInJlZHVjZSIsInJlc3VsdCIsImZpZWxkIiwiaGludCIsIm5vcm1hbGl6ZUhpbnRGaWVsZCIsInNraXAiLCJsaW1pdCIsInNpbmdsZUJhdGNoIiwiYmF0Y2hTaXplIiwiTWF0aCIsImFicyIsImNvbW1lbnQiLCJ1bmRlZmluZWQiLCJtYXhUaW1lTVMiLCJyZWFkQ29uY2VybiIsIlJlYWRDb25jZXJuIiwiZnJvbU9wdGlvbnMiLCJ0b0pTT04iLCJtYXgiLCJtaW4iLCJyZXR1cm5LZXkiLCJzaG93UmVjb3JkSWQiLCJ0YWlsYWJsZSIsIm9wbG9nUmVwbGF5IiwidGltZW91dCIsIm5vQ3Vyc29yVGltZW91dCIsImF3YWl0RGF0YSIsImFsbG93UGFydGlhbFJlc3VsdHMiLCJjb2xsYXRpb24iLCJhbGxvd0Rpc2tVc2UiLCJsZXQiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiUkVBRF9PUEVSQVRJT04iLCJSRVRSWUFCTEUiLCJFWFBMQUlOQUJMRSIsIkNVUlNPUl9DUkVBVElORyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/find.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/find_and_modify.js":
/*!****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/find_and_modify.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FindOneAndUpdateOperation = exports.FindOneAndReplaceOperation = exports.FindOneAndDeleteOperation = exports.FindAndModifyOperation = exports.ReturnDocument = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst sort_1 = __webpack_require__(/*! ../sort */ \"(ssr)/./node_modules/mongodb/lib/sort.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @public */ exports.ReturnDocument = Object.freeze({\n    BEFORE: \"before\",\n    AFTER: \"after\"\n});\nfunction configureFindAndModifyCmdBaseUpdateOpts(cmdBase, options) {\n    cmdBase.new = options.returnDocument === exports.ReturnDocument.AFTER;\n    cmdBase.upsert = options.upsert === true;\n    if (options.bypassDocumentValidation === true) {\n        cmdBase.bypassDocumentValidation = options.bypassDocumentValidation;\n    }\n    return cmdBase;\n}\n/** @internal */ class FindAndModifyOperation extends command_1.CommandOperation {\n    constructor(collection, query, options){\n        super(collection, options);\n        this.options = options ?? {};\n        this.cmdBase = {\n            remove: false,\n            new: false,\n            upsert: false\n        };\n        options.includeResultMetadata ??= false;\n        const sort = (0, sort_1.formatSort)(options.sort);\n        if (sort) {\n            this.cmdBase.sort = sort;\n        }\n        if (options.projection) {\n            this.cmdBase.fields = options.projection;\n        }\n        if (options.maxTimeMS) {\n            this.cmdBase.maxTimeMS = options.maxTimeMS;\n        }\n        // Decorate the findAndModify command with the write Concern\n        if (options.writeConcern) {\n            this.cmdBase.writeConcern = options.writeConcern;\n        }\n        if (options.let) {\n            this.cmdBase.let = options.let;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            this.cmdBase.comment = options.comment;\n        }\n        // force primary read preference\n        this.readPreference = read_preference_1.ReadPreference.primary;\n        this.collection = collection;\n        this.query = query;\n    }\n    get commandName() {\n        return \"findAndModify\";\n    }\n    async execute(server, session) {\n        const coll = this.collection;\n        const query = this.query;\n        const options = {\n            ...this.options,\n            ...this.bsonOptions\n        };\n        // Create findAndModify command object\n        const cmd = {\n            findAndModify: coll.collectionName,\n            query: query,\n            ...this.cmdBase\n        };\n        // Have we specified collation\n        try {\n            (0, utils_1.decorateWithCollation)(cmd, coll, options);\n        } catch (err) {\n            return err;\n        }\n        if (options.hint) {\n            // TODO: once this method becomes a CommandOperation we will have the server\n            // in place to check.\n            const unacknowledgedWrite = this.writeConcern?.w === 0;\n            if (unacknowledgedWrite || (0, utils_1.maxWireVersion)(server) < 8) {\n                throw new error_1.MongoCompatibilityError(\"The current topology does not support a hint on findAndModify commands\");\n            }\n            cmd.hint = options.hint;\n        }\n        // Execute the command\n        const result = await super.executeCommand(server, session, cmd);\n        return options.includeResultMetadata ? result : result.value ?? null;\n    }\n}\nexports.FindAndModifyOperation = FindAndModifyOperation;\n/** @internal */ class FindOneAndDeleteOperation extends FindAndModifyOperation {\n    constructor(collection, filter, options){\n        // Basic validation\n        if (filter == null || typeof filter !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"filter\" must be an object');\n        }\n        super(collection, filter, options);\n        this.cmdBase.remove = true;\n    }\n}\nexports.FindOneAndDeleteOperation = FindOneAndDeleteOperation;\n/** @internal */ class FindOneAndReplaceOperation extends FindAndModifyOperation {\n    constructor(collection, filter, replacement, options){\n        if (filter == null || typeof filter !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"filter\" must be an object');\n        }\n        if (replacement == null || typeof replacement !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"replacement\" must be an object');\n        }\n        if ((0, utils_1.hasAtomicOperators)(replacement)) {\n            throw new error_1.MongoInvalidArgumentError(\"Replacement document must not contain atomic operators\");\n        }\n        super(collection, filter, options);\n        this.cmdBase.update = replacement;\n        configureFindAndModifyCmdBaseUpdateOpts(this.cmdBase, options);\n    }\n}\nexports.FindOneAndReplaceOperation = FindOneAndReplaceOperation;\n/** @internal */ class FindOneAndUpdateOperation extends FindAndModifyOperation {\n    constructor(collection, filter, update, options){\n        if (filter == null || typeof filter !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"filter\" must be an object');\n        }\n        if (update == null || typeof update !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError('Argument \"update\" must be an object');\n        }\n        if (!(0, utils_1.hasAtomicOperators)(update)) {\n            throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n        }\n        super(collection, filter, options);\n        this.cmdBase.update = update;\n        configureFindAndModifyCmdBaseUpdateOpts(this.cmdBase, options);\n        if (options.arrayFilters) {\n            this.cmdBase.arrayFilters = options.arrayFilters;\n        }\n    }\n}\nexports.FindOneAndUpdateOperation = FindOneAndUpdateOperation;\n(0, operation_1.defineAspects)(FindAndModifyOperation, [\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.EXPLAINABLE\n]); //# sourceMappingURL=find_and_modify.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9maW5kX2FuZF9tb2RpZnkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGlDQUFpQyxHQUFHQSxrQ0FBa0MsR0FBR0EsaUNBQWlDLEdBQUdBLDhCQUE4QixHQUFHQSxzQkFBc0IsR0FBRyxLQUFLO0FBQzVLLE1BQU1PLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLG9CQUFvQkQsbUJBQU9BLENBQUMsK0VBQW9CO0FBQ3RELE1BQU1FLFNBQVNGLG1CQUFPQSxDQUFDLHlEQUFTO0FBQ2hDLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1JLFlBQVlKLG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLE1BQU1LLGNBQWNMLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLFlBQVksR0FDWlIsc0JBQXNCLEdBQUdGLE9BQU9nQixNQUFNLENBQUM7SUFDbkNDLFFBQVE7SUFDUkMsT0FBTztBQUNYO0FBQ0EsU0FBU0Msd0NBQXdDQyxPQUFPLEVBQUVDLE9BQU87SUFDN0RELFFBQVFFLEdBQUcsR0FBR0QsUUFBUUUsY0FBYyxLQUFLckIsUUFBUU0sY0FBYyxDQUFDVSxLQUFLO0lBQ3JFRSxRQUFRSSxNQUFNLEdBQUdILFFBQVFHLE1BQU0sS0FBSztJQUNwQyxJQUFJSCxRQUFRSSx3QkFBd0IsS0FBSyxNQUFNO1FBQzNDTCxRQUFRSyx3QkFBd0IsR0FBR0osUUFBUUksd0JBQXdCO0lBQ3ZFO0lBQ0EsT0FBT0w7QUFDWDtBQUNBLGNBQWMsR0FDZCxNQUFNYiwrQkFBK0JPLFVBQVVZLGdCQUFnQjtJQUMzREMsWUFBWUMsVUFBVSxFQUFFQyxLQUFLLEVBQUVSLE9BQU8sQ0FBRTtRQUNwQyxLQUFLLENBQUNPLFlBQVlQO1FBQ2xCLElBQUksQ0FBQ0EsT0FBTyxHQUFHQSxXQUFXLENBQUM7UUFDM0Is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c0QseUJBQXlCLENBQUM7UUFDaEQ7UUFDQSxLQUFLLENBQUNuQyxZQUFZa0MsUUFBUXpDO1FBQzFCLElBQUksQ0FBQ0QsT0FBTyxDQUFDOEMsTUFBTSxHQUFHQTtRQUN0Qi9DLHdDQUF3QyxJQUFJLENBQUNDLE9BQU8sRUFBRUM7UUFDdEQsSUFBSUEsUUFBUThDLFlBQVksRUFBRTtZQUN0QixJQUFJLENBQUMvQyxPQUFPLENBQUMrQyxZQUFZLEdBQUc5QyxRQUFROEMsWUFBWTtRQUNwRDtJQUNKO0FBQ0o7QUFDQWpFLGlDQUFpQyxHQUFHRTtBQUNuQyxJQUFHVyxZQUFZcUQsYUFBYSxFQUFFN0Qsd0JBQXdCO0lBQ25EUSxZQUFZc0QsTUFBTSxDQUFDQyxlQUFlO0lBQ2xDdkQsWUFBWXNELE1BQU0sQ0FBQ0UsU0FBUztJQUM1QnhELFlBQVlzRCxNQUFNLENBQUNHLFdBQVc7Q0FDakMsR0FDRCwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvZmluZF9hbmRfbW9kaWZ5LmpzP2RlNjAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpbmRPbmVBbmRVcGRhdGVPcGVyYXRpb24gPSBleHBvcnRzLkZpbmRPbmVBbmRSZXBsYWNlT3BlcmF0aW9uID0gZXhwb3J0cy5GaW5kT25lQW5kRGVsZXRlT3BlcmF0aW9uID0gZXhwb3J0cy5GaW5kQW5kTW9kaWZ5T3BlcmF0aW9uID0gZXhwb3J0cy5SZXR1cm5Eb2N1bWVudCA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCByZWFkX3ByZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuLi9yZWFkX3ByZWZlcmVuY2VcIik7XG5jb25zdCBzb3J0XzEgPSByZXF1aXJlKFwiLi4vc29ydFwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5SZXR1cm5Eb2N1bWVudCA9IE9iamVjdC5mcmVlemUoe1xuICAgIEJFRk9SRTogJ2JlZm9yZScsXG4gICAgQUZURVI6ICdhZnRlcidcbn0pO1xuZnVuY3Rpb24gY29uZmlndXJlRmluZEFuZE1vZGlmeUNtZEJhc2VVcGRhdGVPcHRzKGNtZEJhc2UsIG9wdGlvbnMpIHtcbiAgICBjbWRCYXNlLm5ldyA9IG9wdGlvbnMucmV0dXJuRG9jdW1lbnQgPT09IGV4cG9ydHMuUmV0dXJuRG9jdW1lbnQuQUZURVI7XG4gICAgY21kQmFzZS51cHNlcnQgPSBvcHRpb25zLnVwc2VydCA9PT0gdHJ1ZTtcbiAgICBpZiAob3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb24gPT09IHRydWUpIHtcbiAgICAgICAgY21kQmFzZS5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb24gPSBvcHRpb25zLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIGNtZEJhc2U7XG59XG4vKiogQGludGVybmFsICovXG5jbGFzcyBGaW5kQW5kTW9kaWZ5T3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICB0aGlzLmNtZEJhc2UgPSB7XG4gICAgICAgICAgICByZW1vdmU6IGZhbHNlLFxuICAgICAgICAgICAgbmV3OiBmYWxzZSxcbiAgICAgICAgICAgIHVwc2VydDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgb3B0aW9ucy5pbmNsdWRlUmVzdWx0TWV0YWRhdGEgPz89IGZhbHNlO1xuICAgICAgICBjb25zdCBzb3J0ID0gKDAsIHNvcnRfMS5mb3JtYXRTb3J0KShvcHRpb25zLnNvcnQpO1xuICAgICAgICBpZiAoc29ydCkge1xuICAgICAgICAgICAgdGhpcy5jbWRCYXNlLnNvcnQgPSBzb3J0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY21kQmFzZS5maWVsZHMgPSBvcHRpb25zLnByb2plY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubWF4VGltZU1TKSB7XG4gICAgICAgICAgICB0aGlzLmNtZEJhc2UubWF4VGltZU1TID0gb3B0aW9ucy5tYXhUaW1lTVM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGVjb3JhdGUgdGhlIGZpbmRBbmRNb2RpZnkgY29tbWFuZCB3aXRoIHRoZSB3cml0ZSBDb25jZXJuXG4gICAgICAgIGlmIChvcHRpb25zLndyaXRlQ29uY2Vybikge1xuICAgICAgICAgICAgdGhpcy5jbWRCYXNlLndyaXRlQ29uY2VybiA9IG9wdGlvbnMud3JpdGVDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmxldCkge1xuICAgICAgICAgICAgdGhpcy5jbWRCYXNlLmxldCA9IG9wdGlvbnMubGV0O1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAob3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY21kQmFzZS5jb21tZW50ID0gb3B0aW9ucy5jb21tZW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIGZvcmNlIHByaW1hcnkgcmVhZCBwcmVmZXJlbmNlXG4gICAgICAgIHRoaXMucmVhZFByZWZlcmVuY2UgPSByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5O1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdmaW5kQW5kTW9kaWZ5JztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgY29sbCA9IHRoaXMuY29sbGVjdGlvbjtcbiAgICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnF1ZXJ5O1xuICAgICAgICBjb25zdCBvcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLnRoaXMuYnNvbk9wdGlvbnMgfTtcbiAgICAgICAgLy8gQ3JlYXRlIGZpbmRBbmRNb2RpZnkgY29tbWFuZCBvYmplY3RcbiAgICAgICAgY29uc3QgY21kID0ge1xuICAgICAgICAgICAgZmluZEFuZE1vZGlmeTogY29sbC5jb2xsZWN0aW9uTmFtZSxcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgIC4uLnRoaXMuY21kQmFzZVxuICAgICAgICB9O1xuICAgICAgICAvLyBIYXZlIHdlIHNwZWNpZmllZCBjb2xsYXRpb25cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICgwLCB1dGlsc18xLmRlY29yYXRlV2l0aENvbGxhdGlvbikoY21kLCBjb2xsLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhpbnQpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IG9uY2UgdGhpcyBtZXRob2QgYmVjb21lcyBhIENvbW1hbmRPcGVyYXRpb24gd2Ugd2lsbCBoYXZlIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIGluIHBsYWNlIHRvIGNoZWNrLlxuICAgICAgICAgICAgY29uc3QgdW5hY2tub3dsZWRnZWRXcml0ZSA9IHRoaXMud3JpdGVDb25jZXJuPy53ID09PSAwO1xuICAgICAgICAgICAgaWYgKHVuYWNrbm93bGVkZ2VkV3JpdGUgfHwgKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHNlcnZlcikgPCA4KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoJ1RoZSBjdXJyZW50IHRvcG9sb2d5IGRvZXMgbm90IHN1cHBvcnQgYSBoaW50IG9uIGZpbmRBbmRNb2RpZnkgY29tbWFuZHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNtZC5oaW50ID0gb3B0aW9ucy5oaW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNvbW1hbmRcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3VwZXIuZXhlY3V0ZUNvbW1hbmQoc2VydmVyLCBzZXNzaW9uLCBjbWQpO1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5pbmNsdWRlUmVzdWx0TWV0YWRhdGEgPyByZXN1bHQgOiByZXN1bHQudmFsdWUgPz8gbnVsbDtcbiAgICB9XG59XG5leHBvcnRzLkZpbmRBbmRNb2RpZnlPcGVyYXRpb24gPSBGaW5kQW5kTW9kaWZ5T3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgRmluZE9uZUFuZERlbGV0ZU9wZXJhdGlvbiBleHRlbmRzIEZpbmRBbmRNb2RpZnlPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIGZpbHRlciwgb3B0aW9ucykge1xuICAgICAgICAvLyBCYXNpYyB2YWxpZGF0aW9uXG4gICAgICAgIGlmIChmaWx0ZXIgPT0gbnVsbCB8fCB0eXBlb2YgZmlsdGVyICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQXJndW1lbnQgXCJmaWx0ZXJcIiBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIGZpbHRlciwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuY21kQmFzZS5yZW1vdmUgPSB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydHMuRmluZE9uZUFuZERlbGV0ZU9wZXJhdGlvbiA9IEZpbmRPbmVBbmREZWxldGVPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBGaW5kT25lQW5kUmVwbGFjZU9wZXJhdGlvbiBleHRlbmRzIEZpbmRBbmRNb2RpZnlPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIGZpbHRlciwgcmVwbGFjZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGZpbHRlciA9PSBudWxsIHx8IHR5cGVvZiBmaWx0ZXIgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBcmd1bWVudCBcImZpbHRlclwiIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09IG51bGwgfHwgdHlwZW9mIHJlcGxhY2VtZW50ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignQXJndW1lbnQgXCJyZXBsYWNlbWVudFwiIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCgwLCB1dGlsc18xLmhhc0F0b21pY09wZXJhdG9ycykocmVwbGFjZW1lbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdSZXBsYWNlbWVudCBkb2N1bWVudCBtdXN0IG5vdCBjb250YWluIGF0b21pYyBvcGVyYXRvcnMnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLCBmaWx0ZXIsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmNtZEJhc2UudXBkYXRlID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgIGNvbmZpZ3VyZUZpbmRBbmRNb2RpZnlDbWRCYXNlVXBkYXRlT3B0cyh0aGlzLmNtZEJhc2UsIG9wdGlvbnMpO1xuICAgIH1cbn1cbmV4cG9ydHMuRmluZE9uZUFuZFJlcGxhY2VPcGVyYXRpb24gPSBGaW5kT25lQW5kUmVwbGFjZU9wZXJhdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEZpbmRPbmVBbmRVcGRhdGVPcGVyYXRpb24gZXh0ZW5kcyBGaW5kQW5kTW9kaWZ5T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBmaWx0ZXIsIHVwZGF0ZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoZmlsdGVyID09IG51bGwgfHwgdHlwZW9mIGZpbHRlciAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IFwiZmlsdGVyXCIgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlID09IG51bGwgfHwgdHlwZW9mIHVwZGF0ZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IFwidXBkYXRlXCIgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISgwLCB1dGlsc18xLmhhc0F0b21pY09wZXJhdG9ycykodXBkYXRlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignVXBkYXRlIGRvY3VtZW50IHJlcXVpcmVzIGF0b21pYyBvcGVyYXRvcnMnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLCBmaWx0ZXIsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmNtZEJhc2UudXBkYXRlID0gdXBkYXRlO1xuICAgICAgICBjb25maWd1cmVGaW5kQW5kTW9kaWZ5Q21kQmFzZVVwZGF0ZU9wdHModGhpcy5jbWRCYXNlLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXJyYXlGaWx0ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmNtZEJhc2UuYXJyYXlGaWx0ZXJzID0gb3B0aW9ucy5hcnJheUZpbHRlcnM7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkZpbmRPbmVBbmRVcGRhdGVPcGVyYXRpb24gPSBGaW5kT25lQW5kVXBkYXRlT3BlcmF0aW9uO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKEZpbmRBbmRNb2RpZnlPcGVyYXRpb24sIFtcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LkVYUExBSU5BQkxFXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmRfYW5kX21vZGlmeS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJGaW5kT25lQW5kVXBkYXRlT3BlcmF0aW9uIiwiRmluZE9uZUFuZFJlcGxhY2VPcGVyYXRpb24iLCJGaW5kT25lQW5kRGVsZXRlT3BlcmF0aW9uIiwiRmluZEFuZE1vZGlmeU9wZXJhdGlvbiIsIlJldHVybkRvY3VtZW50IiwiZXJyb3JfMSIsInJlcXVpcmUiLCJyZWFkX3ByZWZlcmVuY2VfMSIsInNvcnRfMSIsInV0aWxzXzEiLCJjb21tYW5kXzEiLCJvcGVyYXRpb25fMSIsImZyZWV6ZSIsIkJFRk9SRSIsIkFGVEVSIiwiY29uZmlndXJlRmluZEFuZE1vZGlmeUNtZEJhc2VVcGRhdGVPcHRzIiwiY21kQmFzZSIsIm9wdGlvbnMiLCJuZXciLCJyZXR1cm5Eb2N1bWVudCIsInVwc2VydCIsImJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiIsIkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJxdWVyeSIsInJlbW92ZSIsImluY2x1ZGVSZXN1bHRNZXRhZGF0YSIsInNvcnQiLCJmb3JtYXRTb3J0IiwicHJvamVjdGlvbiIsImZpZWxkcyIsIm1heFRpbWVNUyIsIndyaXRlQ29uY2VybiIsImxldCIsImNvbW1lbnQiLCJ1bmRlZmluZWQiLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJjb2xsIiwiYnNvbk9wdGlvbnMiLCJjbWQiLCJmaW5kQW5kTW9kaWZ5IiwiY29sbGVjdGlvbk5hbWUiLCJkZWNvcmF0ZVdpdGhDb2xsYXRpb24iLCJlcnIiLCJoaW50IiwidW5hY2tub3dsZWRnZWRXcml0ZSIsInciLCJtYXhXaXJlVmVyc2lvbiIsIk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yIiwicmVzdWx0IiwiZXhlY3V0ZUNvbW1hbmQiLCJmaWx0ZXIiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwicmVwbGFjZW1lbnQiLCJoYXNBdG9taWNPcGVyYXRvcnMiLCJ1cGRhdGUiLCJhcnJheUZpbHRlcnMiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiV1JJVEVfT1BFUkFUSU9OIiwiUkVUUllBQkxFIiwiRVhQTEFJTkFCTEUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/find_and_modify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/get_more.js":
/*!*********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/get_more.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.GetMoreOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class GetMoreOperation extends operation_1.AbstractOperation {\n    constructor(ns, cursorId, server, options){\n        super(options);\n        this.options = options;\n        this.ns = ns;\n        this.cursorId = cursorId;\n        this.server = server;\n    }\n    get commandName() {\n        return \"getMore\";\n    }\n    /**\n     * Although there is a server already associated with the get more operation, the signature\n     * for execute passes a server so we will just use that one.\n     */ async execute(server, _session) {\n        if (server !== this.server) {\n            throw new error_1.MongoRuntimeError(\"Getmore must run on the same server operation began on\");\n        }\n        if (this.cursorId == null || this.cursorId.isZero()) {\n            throw new error_1.MongoRuntimeError(\"Unable to iterate cursor with no id\");\n        }\n        const collection = this.ns.collection;\n        if (collection == null) {\n            // Cursors should have adopted the namespace returned by MongoDB\n            // which should always defined a collection name (even a pseudo one, ex. db.aggregate())\n            throw new error_1.MongoRuntimeError(\"A collection name must be determined before getMore\");\n        }\n        const getMoreCmd = {\n            getMore: this.cursorId,\n            collection\n        };\n        if (typeof this.options.batchSize === \"number\") {\n            getMoreCmd.batchSize = Math.abs(this.options.batchSize);\n        }\n        if (typeof this.options.maxAwaitTimeMS === \"number\") {\n            getMoreCmd.maxTimeMS = this.options.maxAwaitTimeMS;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (this.options.comment !== undefined && (0, utils_1.maxWireVersion)(server) >= 9) {\n            getMoreCmd.comment = this.options.comment;\n        }\n        const commandOptions = {\n            returnFieldSelector: null,\n            documentsReturnedIn: \"nextBatch\",\n            ...this.options\n        };\n        return server.command(this.ns, getMoreCmd, commandOptions);\n    }\n}\nexports.GetMoreOperation = GetMoreOperation;\n(0, operation_1.defineAspects)(GetMoreOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.MUST_SELECT_SAME_SERVER\n]); //# sourceMappingURL=get_more.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9nZXRfbW9yZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYseUJBQXlCSSxZQUFZQyxpQkFBaUI7SUFDeERDLFlBQVlDLEVBQUUsRUFBRUMsUUFBUSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUN2QyxLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDSCxFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDQyxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHQTtJQUNsQjtJQUNBLElBQUlFLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQTs7O0tBR0MsR0FDRCxNQUFNQyxRQUFRSCxNQUFNLEVBQUVJLFFBQVEsRUFBRTtRQUM1QixJQUFJSixXQUFXLElBQUksQ0FBQ0EsTUFBTSxFQUFFO1lBQ3hCLE1BQU0sSUFBSVIsUUFBUWEsaUJBQWlCLENBQUM7UUFDeEM7UUFDQSxJQUFJLElBQUksQ0FBQ04sUUFBUSxJQUFJLFFBQVEsSUFBSSxDQUFDQSxRQUFRLENBQUNPLE1BQU0sSUFBSTtZQUNqRCxNQUFNLElBQUlkLFFBQVFhLGlCQUFpQixDQUFDO1FBQ3hDO1FBQ0EsTUFBTUUsYUFBYSxJQUFJLENBQUNULEVBQUUsQ0FBQ1MsVUFBVTtRQUNyQyxJQUFJQSxjQUFjLE1BQU07WUFDcEIsZ0VBQWdFO1lBQ2hFLHdGQUF3RjtZQUN4RixNQUFNLElBQUlmLFFBQVFhLGlCQUFpQixDQUFDO1FBQ3hDO1FBQ0EsTUFBTUcsYUFBYTtZQUNmQyxTQUFTLElBQUksQ0FBQ1YsUUFBUTtZQUN0QlE7UUFDSjtRQUNBLElBQUksT0FBTyxJQUFJLENBQUNOLE9BQU8sQ0FBQ1MsU0FBUyxLQUFLLFVBQVU7WUFDNUNGLFdBQVdFLFNBQVMsR0FBR0MsS0FBS0MsR0FBRyxDQUFDLElBQUksQ0FBQ1gsT0FBTyxDQUFDUyxTQUFTO1FBQzFEO1FBQ0EsSUFBSSxPQUFPLElBQUksQ0FBQ1QsT0FBTyxDQUFDWSxjQUFjLEtBQUssVUFBVTtZQUNqREwsV0FBV00sU0FBUyxHQUFHLElBQUksQ0FBQ2IsT0FBTyxDQUFDWSxjQUFjO1FBQ3REO1FBQ0EsaUVBQWlFO1FBQ2pFLGdEQUFnRDtRQUNoRCxJQUFJLElBQUksQ0FBQ1osT0FBTyxDQUFDYyxPQUFPLEtBQUtDLGFBQWEsQ0FBQyxHQUFHdEIsUUFBUXVCLGNBQWMsRUFBRWpCLFdBQVcsR0FBRztZQUNoRlEsV0FBV08sT0FBTyxHQUFHLElBQUksQ0FBQ2QsT0FBTyxDQUFDYyxPQUFPO1FBQzdDO1FBQ0EsTUFBTUcsaUJBQWlCO1lBQ25CQyxxQkFBcUI7WUFDckJDLHFCQUFxQjtZQUNyQixHQUFHLElBQUksQ0FBQ25CLE9BQU87UUFDbkI7UUFDQSxPQUFPRCxPQUFPcUIsT0FBTyxDQUFDLElBQUksQ0FBQ3ZCLEVBQUUsRUFBRVUsWUFBWVU7SUFDL0M7QUFDSjtBQUNBN0Isd0JBQXdCLEdBQUdFO0FBQzFCLElBQUdJLFlBQVkyQixhQUFhLEVBQUUvQixrQkFBa0I7SUFBQ0ksWUFBWTRCLE1BQU0sQ0FBQ0MsY0FBYztJQUFFN0IsWUFBWTRCLE1BQU0sQ0FBQ0UsdUJBQXVCO0NBQUMsR0FDaEksb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2dldF9tb3JlLmpzP2QxOTQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkdldE1vcmVPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgR2V0TW9yZU9wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihucywgY3Vyc29ySWQsIHNlcnZlciwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5ucyA9IG5zO1xuICAgICAgICB0aGlzLmN1cnNvcklkID0gY3Vyc29ySWQ7XG4gICAgICAgIHRoaXMuc2VydmVyID0gc2VydmVyO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnZ2V0TW9yZSc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsdGhvdWdoIHRoZXJlIGlzIGEgc2VydmVyIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIHRoZSBnZXQgbW9yZSBvcGVyYXRpb24sIHRoZSBzaWduYXR1cmVcbiAgICAgKiBmb3IgZXhlY3V0ZSBwYXNzZXMgYSBzZXJ2ZXIgc28gd2Ugd2lsbCBqdXN0IHVzZSB0aGF0IG9uZS5cbiAgICAgKi9cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgX3Nlc3Npb24pIHtcbiAgICAgICAgaWYgKHNlcnZlciAhPT0gdGhpcy5zZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdHZXRtb3JlIG11c3QgcnVuIG9uIHRoZSBzYW1lIHNlcnZlciBvcGVyYXRpb24gYmVnYW4gb24nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jdXJzb3JJZCA9PSBudWxsIHx8IHRoaXMuY3Vyc29ySWQuaXNaZXJvKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdVbmFibGUgdG8gaXRlcmF0ZSBjdXJzb3Igd2l0aCBubyBpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLm5zLmNvbGxlY3Rpb247XG4gICAgICAgIGlmIChjb2xsZWN0aW9uID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIEN1cnNvcnMgc2hvdWxkIGhhdmUgYWRvcHRlZCB0aGUgbmFtZXNwYWNlIHJldHVybmVkIGJ5IE1vbmdvREJcbiAgICAgICAgICAgIC8vIHdoaWNoIHNob3VsZCBhbHdheXMgZGVmaW5lZCBhIGNvbGxlY3Rpb24gbmFtZSAoZXZlbiBhIHBzZXVkbyBvbmUsIGV4LiBkYi5hZ2dyZWdhdGUoKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdBIGNvbGxlY3Rpb24gbmFtZSBtdXN0IGJlIGRldGVybWluZWQgYmVmb3JlIGdldE1vcmUnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnZXRNb3JlQ21kID0ge1xuICAgICAgICAgICAgZ2V0TW9yZTogdGhpcy5jdXJzb3JJZCxcbiAgICAgICAgICAgIGNvbGxlY3Rpb25cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuYmF0Y2hTaXplID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgZ2V0TW9yZUNtZC5iYXRjaFNpemUgPSBNYXRoLmFicyh0aGlzLm9wdGlvbnMuYmF0Y2hTaXplKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5tYXhBd2FpdFRpbWVNUyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGdldE1vcmVDbWQubWF4VGltZU1TID0gdGhpcy5vcHRpb25zLm1heEF3YWl0VGltZU1TO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbW1lbnQgIT09IHVuZGVmaW5lZCAmJiAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikoc2VydmVyKSA+PSA5KSB7XG4gICAgICAgICAgICBnZXRNb3JlQ21kLmNvbW1lbnQgPSB0aGlzLm9wdGlvbnMuY29tbWVudDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21tYW5kT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHJldHVybkZpZWxkU2VsZWN0b3I6IG51bGwsXG4gICAgICAgICAgICBkb2N1bWVudHNSZXR1cm5lZEluOiAnbmV4dEJhdGNoJyxcbiAgICAgICAgICAgIC4uLnRoaXMub3B0aW9uc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc2VydmVyLmNvbW1hbmQodGhpcy5ucywgZ2V0TW9yZUNtZCwgY29tbWFuZE9wdGlvbnMpO1xuICAgIH1cbn1cbmV4cG9ydHMuR2V0TW9yZU9wZXJhdGlvbiA9IEdldE1vcmVPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoR2V0TW9yZU9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5SRUFEX09QRVJBVElPTiwgb3BlcmF0aW9uXzEuQXNwZWN0Lk1VU1RfU0VMRUNUX1NBTUVfU0VSVkVSXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRfbW9yZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJHZXRNb3JlT3BlcmF0aW9uIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwib3BlcmF0aW9uXzEiLCJBYnN0cmFjdE9wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwibnMiLCJjdXJzb3JJZCIsInNlcnZlciIsIm9wdGlvbnMiLCJjb21tYW5kTmFtZSIsImV4ZWN1dGUiLCJfc2Vzc2lvbiIsIk1vbmdvUnVudGltZUVycm9yIiwiaXNaZXJvIiwiY29sbGVjdGlvbiIsImdldE1vcmVDbWQiLCJnZXRNb3JlIiwiYmF0Y2hTaXplIiwiTWF0aCIsImFicyIsIm1heEF3YWl0VGltZU1TIiwibWF4VGltZU1TIiwiY29tbWVudCIsInVuZGVmaW5lZCIsIm1heFdpcmVWZXJzaW9uIiwiY29tbWFuZE9wdGlvbnMiLCJyZXR1cm5GaWVsZFNlbGVjdG9yIiwiZG9jdW1lbnRzUmV0dXJuZWRJbiIsImNvbW1hbmQiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiUkVBRF9PUEVSQVRJT04iLCJNVVNUX1NFTEVDVF9TQU1FX1NFUlZFUiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/get_more.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/indexes.js":
/*!********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/indexes.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.IndexInformationOperation = exports.IndexExistsOperation = exports.ListIndexesOperation = exports.DropIndexOperation = exports.EnsureIndexOperation = exports.CreateIndexOperation = exports.CreateIndexesOperation = exports.IndexesOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst common_functions_1 = __webpack_require__(/*! ./common_functions */ \"(ssr)/./node_modules/mongodb/lib/operations/common_functions.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nconst VALID_INDEX_OPTIONS = new Set([\n    \"background\",\n    \"unique\",\n    \"name\",\n    \"partialFilterExpression\",\n    \"sparse\",\n    \"hidden\",\n    \"expireAfterSeconds\",\n    \"storageEngine\",\n    \"collation\",\n    \"version\",\n    // text indexes\n    \"weights\",\n    \"default_language\",\n    \"language_override\",\n    \"textIndexVersion\",\n    // 2d-sphere indexes\n    \"2dsphereIndexVersion\",\n    // 2d indexes\n    \"bits\",\n    \"min\",\n    \"max\",\n    // geoHaystack Indexes\n    \"bucketSize\",\n    // wildcard indexes\n    \"wildcardProjection\"\n]);\nfunction isIndexDirection(x) {\n    return typeof x === \"number\" || x === \"2d\" || x === \"2dsphere\" || x === \"text\" || x === \"geoHaystack\";\n}\nfunction isSingleIndexTuple(t) {\n    return Array.isArray(t) && t.length === 2 && isIndexDirection(t[1]);\n}\nfunction makeIndexSpec(indexSpec, options) {\n    const key = new Map();\n    const indexSpecs = !Array.isArray(indexSpec) || isSingleIndexTuple(indexSpec) ? [\n        indexSpec\n    ] : indexSpec;\n    // Iterate through array and handle different types\n    for (const spec of indexSpecs){\n        if (typeof spec === \"string\") {\n            key.set(spec, 1);\n        } else if (Array.isArray(spec)) {\n            key.set(spec[0], spec[1] ?? 1);\n        } else if (spec instanceof Map) {\n            for (const [property, value] of spec){\n                key.set(property, value);\n            }\n        } else if ((0, utils_1.isObject)(spec)) {\n            for (const [property, value] of Object.entries(spec)){\n                key.set(property, value);\n            }\n        }\n    }\n    return {\n        ...options,\n        key\n    };\n}\n/** @internal */ class IndexesOperation extends operation_1.AbstractOperation {\n    constructor(collection, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n    }\n    get commandName() {\n        return \"listIndexes\";\n    }\n    async execute(_server, session) {\n        const coll = this.collection;\n        const options = this.options;\n        return (0, common_functions_1.indexInformation)(coll.s.db, coll.collectionName, {\n            full: true,\n            ...options,\n            readPreference: this.readPreference,\n            session\n        });\n    }\n}\nexports.IndexesOperation = IndexesOperation;\n/** @internal */ class CreateIndexesOperation extends command_1.CommandOperation {\n    constructor(parent, collectionName, indexes, options){\n        super(parent, options);\n        this.options = options ?? {};\n        this.collectionName = collectionName;\n        this.indexes = indexes.map((userIndex)=>{\n            // Ensure the key is a Map to preserve index key ordering\n            const key = userIndex.key instanceof Map ? userIndex.key : new Map(Object.entries(userIndex.key));\n            const name = userIndex.name != null ? userIndex.name : Array.from(key).flat().join(\"_\");\n            const validIndexOptions = Object.fromEntries(Object.entries({\n                ...userIndex\n            }).filter(([optionName])=>VALID_INDEX_OPTIONS.has(optionName)));\n            return {\n                ...validIndexOptions,\n                name,\n                key\n            };\n        });\n    }\n    get commandName() {\n        return \"createIndexes\";\n    }\n    async execute(server, session) {\n        const options = this.options;\n        const indexes = this.indexes;\n        const serverWireVersion = (0, utils_1.maxWireVersion)(server);\n        const cmd = {\n            createIndexes: this.collectionName,\n            indexes\n        };\n        if (options.commitQuorum != null) {\n            if (serverWireVersion < 9) {\n                throw new error_1.MongoCompatibilityError(\"Option `commitQuorum` for `createIndexes` not supported on servers < 4.4\");\n            }\n            cmd.commitQuorum = options.commitQuorum;\n        }\n        // collation is set on each index, it should not be defined at the root\n        this.options.collation = undefined;\n        await super.executeCommand(server, session, cmd);\n        const indexNames = indexes.map((index)=>index.name || \"\");\n        return indexNames;\n    }\n}\nexports.CreateIndexesOperation = CreateIndexesOperation;\n/** @internal */ class CreateIndexOperation extends CreateIndexesOperation {\n    constructor(parent, collectionName, indexSpec, options){\n        super(parent, collectionName, [\n            makeIndexSpec(indexSpec, options)\n        ], options);\n    }\n    async execute(server, session) {\n        const indexNames = await super.execute(server, session);\n        return indexNames[0];\n    }\n}\nexports.CreateIndexOperation = CreateIndexOperation;\n/** @internal */ class EnsureIndexOperation extends CreateIndexOperation {\n    constructor(db, collectionName, indexSpec, options){\n        super(db, collectionName, indexSpec, options);\n        this.readPreference = read_preference_1.ReadPreference.primary;\n        this.db = db;\n        this.collectionName = collectionName;\n    }\n    get commandName() {\n        return \"listIndexes\";\n    }\n    async execute(server, session) {\n        const indexName = this.indexes[0].name;\n        const indexes = await this.db.collection(this.collectionName).listIndexes({\n            session\n        }).toArray().catch((error)=>{\n            if (error instanceof error_1.MongoError && error.code === error_1.MONGODB_ERROR_CODES.NamespaceNotFound) return [];\n            throw error;\n        });\n        if (indexName && indexes.some((index)=>index.name === indexName)) return indexName;\n        return super.execute(server, session);\n    }\n}\nexports.EnsureIndexOperation = EnsureIndexOperation;\n/** @internal */ class DropIndexOperation extends command_1.CommandOperation {\n    constructor(collection, indexName, options){\n        super(collection, options);\n        this.options = options ?? {};\n        this.collection = collection;\n        this.indexName = indexName;\n    }\n    get commandName() {\n        return \"dropIndexes\";\n    }\n    async execute(server, session) {\n        const cmd = {\n            dropIndexes: this.collection.collectionName,\n            index: this.indexName\n        };\n        return super.executeCommand(server, session, cmd);\n    }\n}\nexports.DropIndexOperation = DropIndexOperation;\n/** @internal */ class ListIndexesOperation extends command_1.CommandOperation {\n    constructor(collection, options){\n        super(collection, options);\n        this.options = {\n            ...options\n        };\n        delete this.options.writeConcern;\n        this.collectionNamespace = collection.s.namespace;\n    }\n    get commandName() {\n        return \"listIndexes\";\n    }\n    async execute(server, session) {\n        const serverWireVersion = (0, utils_1.maxWireVersion)(server);\n        const cursor = this.options.batchSize ? {\n            batchSize: this.options.batchSize\n        } : {};\n        const command = {\n            listIndexes: this.collectionNamespace.collection,\n            cursor\n        };\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (serverWireVersion >= 9 && this.options.comment !== undefined) {\n            command.comment = this.options.comment;\n        }\n        return super.executeCommand(server, session, command);\n    }\n}\nexports.ListIndexesOperation = ListIndexesOperation;\n/** @internal */ class IndexExistsOperation extends operation_1.AbstractOperation {\n    constructor(collection, indexes, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n        this.indexes = indexes;\n    }\n    get commandName() {\n        return \"listIndexes\";\n    }\n    async execute(server, session) {\n        const coll = this.collection;\n        const indexes = this.indexes;\n        const info = await (0, common_functions_1.indexInformation)(coll.s.db, coll.collectionName, {\n            ...this.options,\n            readPreference: this.readPreference,\n            session\n        });\n        // Let's check for the index names\n        if (!Array.isArray(indexes)) return info[indexes] != null;\n        // All keys found return true\n        return indexes.every((indexName)=>info[indexName] != null);\n    }\n}\nexports.IndexExistsOperation = IndexExistsOperation;\n/** @internal */ class IndexInformationOperation extends operation_1.AbstractOperation {\n    constructor(db, name, options){\n        super(options);\n        this.options = options ?? {};\n        this.db = db;\n        this.name = name;\n    }\n    get commandName() {\n        return \"listIndexes\";\n    }\n    async execute(server, session) {\n        const db = this.db;\n        const name = this.name;\n        return (0, common_functions_1.indexInformation)(db, name, {\n            ...this.options,\n            readPreference: this.readPreference,\n            session\n        });\n    }\n}\nexports.IndexInformationOperation = IndexInformationOperation;\n(0, operation_1.defineAspects)(ListIndexesOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]);\n(0, operation_1.defineAspects)(CreateIndexesOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(CreateIndexOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(EnsureIndexOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(DropIndexOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=indexes.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9pbmRleGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQ0FBaUMsR0FBR0EsNEJBQTRCLEdBQUdBLDRCQUE0QixHQUFHQSwwQkFBMEIsR0FBR0EsNEJBQTRCLEdBQUdBLDRCQUE0QixHQUFHQSw4QkFBOEIsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUM5UCxNQUFNVSxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxvQkFBb0JELG1CQUFPQSxDQUFDLCtFQUFvQjtBQUN0RCxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxZQUFZSCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNSSxxQkFBcUJKLG1CQUFPQSxDQUFDLDJGQUFvQjtBQUN2RCxNQUFNSyxjQUFjTCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxNQUFNTSxzQkFBc0IsSUFBSUMsSUFBSTtJQUNoQztJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLGVBQWU7SUFDZjtJQUNBO0lBQ0E7SUFDQTtJQUNBLG9CQUFvQjtJQUNwQjtJQUNBLGFBQWE7SUFDYjtJQUNBO0lBQ0E7SUFDQSxzQkFBc0I7SUFDdEI7SUFDQSxtQkFBbUI7SUFDbkI7Q0FDSDtBQUNELFNBQVNDLGlCQUFpQkMsQ0FBQztJQUN2QixPQUFRLE9BQU9BLE1BQU0sWUFBWUEsTUFBTSxRQUFRQSxNQUFNLGNBQWNBLE1BQU0sVUFBVUEsTUFBTTtBQUM3RjtBQUNBLFNBQVNDLG1CQUFtQkMsQ0FBQztJQUN6QixPQUFPQyxNQUFNQyxPQUFPLENBQUNGLE1BQU1BLEVBQUVHLE1BQU0sS0FBSyxLQUFLTixpQkFBaUJHLENBQUMsQ0FBQyxFQUFFO0FBQ3RFO0FBQ0EsU0FBU0ksY0FBY0MsU0FBUyxFQUFFQyxP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Olsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9pbmRleGVzLmpzPzcyMDkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkluZGV4SW5mb3JtYXRpb25PcGVyYXRpb24gPSBleHBvcnRzLkluZGV4RXhpc3RzT3BlcmF0aW9uID0gZXhwb3J0cy5MaXN0SW5kZXhlc09wZXJhdGlvbiA9IGV4cG9ydHMuRHJvcEluZGV4T3BlcmF0aW9uID0gZXhwb3J0cy5FbnN1cmVJbmRleE9wZXJhdGlvbiA9IGV4cG9ydHMuQ3JlYXRlSW5kZXhPcGVyYXRpb24gPSBleHBvcnRzLkNyZWF0ZUluZGV4ZXNPcGVyYXRpb24gPSBleHBvcnRzLkluZGV4ZXNPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBjb21tb25fZnVuY3Rpb25zXzEgPSByZXF1aXJlKFwiLi9jb21tb25fZnVuY3Rpb25zXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG5jb25zdCBWQUxJRF9JTkRFWF9PUFRJT05TID0gbmV3IFNldChbXG4gICAgJ2JhY2tncm91bmQnLFxuICAgICd1bmlxdWUnLFxuICAgICduYW1lJyxcbiAgICAncGFydGlhbEZpbHRlckV4cHJlc3Npb24nLFxuICAgICdzcGFyc2UnLFxuICAgICdoaWRkZW4nLFxuICAgICdleHBpcmVBZnRlclNlY29uZHMnLFxuICAgICdzdG9yYWdlRW5naW5lJyxcbiAgICAnY29sbGF0aW9uJyxcbiAgICAndmVyc2lvbicsXG4gICAgLy8gdGV4dCBpbmRleGVzXG4gICAgJ3dlaWdodHMnLFxuICAgICdkZWZhdWx0X2xhbmd1YWdlJyxcbiAgICAnbGFuZ3VhZ2Vfb3ZlcnJpZGUnLFxuICAgICd0ZXh0SW5kZXhWZXJzaW9uJyxcbiAgICAvLyAyZC1zcGhlcmUgaW5kZXhlc1xuICAgICcyZHNwaGVyZUluZGV4VmVyc2lvbicsXG4gICAgLy8gMmQgaW5kZXhlc1xuICAgICdiaXRzJyxcbiAgICAnbWluJyxcbiAgICAnbWF4JyxcbiAgICAvLyBnZW9IYXlzdGFjayBJbmRleGVzXG4gICAgJ2J1Y2tldFNpemUnLFxuICAgIC8vIHdpbGRjYXJkIGluZGV4ZXNcbiAgICAnd2lsZGNhcmRQcm9qZWN0aW9uJ1xuXSk7XG5mdW5jdGlvbiBpc0luZGV4RGlyZWN0aW9uKHgpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB4ID09PSAnbnVtYmVyJyB8fCB4ID09PSAnMmQnIHx8IHggPT09ICcyZHNwaGVyZScgfHwgeCA9PT0gJ3RleHQnIHx8IHggPT09ICdnZW9IYXlzdGFjaycpO1xufVxuZnVuY3Rpb24gaXNTaW5nbGVJbmRleFR1cGxlKHQpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0KSAmJiB0Lmxlbmd0aCA9PT0gMiAmJiBpc0luZGV4RGlyZWN0aW9uKHRbMV0pO1xufVxuZnVuY3Rpb24gbWFrZUluZGV4U3BlYyhpbmRleFNwZWMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBrZXkgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgaW5kZXhTcGVjcyA9ICFBcnJheS5pc0FycmF5KGluZGV4U3BlYykgfHwgaXNTaW5nbGVJbmRleFR1cGxlKGluZGV4U3BlYykgPyBbaW5kZXhTcGVjXSA6IGluZGV4U3BlYztcbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggYXJyYXkgYW5kIGhhbmRsZSBkaWZmZXJlbnQgdHlwZXNcbiAgICBmb3IgKGNvbnN0IHNwZWMgb2YgaW5kZXhTcGVjcykge1xuICAgICAgICBpZiAodHlwZW9mIHNwZWMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBrZXkuc2V0KHNwZWMsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc3BlYykpIHtcbiAgICAgICAgICAgIGtleS5zZXQoc3BlY1swXSwgc3BlY1sxXSA/PyAxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzcGVjIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtwcm9wZXJ0eSwgdmFsdWVdIG9mIHNwZWMpIHtcbiAgICAgICAgICAgICAgICBrZXkuc2V0KHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKDAsIHV0aWxzXzEuaXNPYmplY3QpKHNwZWMpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtwcm9wZXJ0eSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNwZWMpKSB7XG4gICAgICAgICAgICAgICAga2V5LnNldChwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IC4uLm9wdGlvbnMsIGtleSB9O1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgSW5kZXhlc09wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnbGlzdEluZGV4ZXMnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKF9zZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgY29sbCA9IHRoaXMuY29sbGVjdGlvbjtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgcmV0dXJuICgwLCBjb21tb25fZnVuY3Rpb25zXzEuaW5kZXhJbmZvcm1hdGlvbikoY29sbC5zLmRiLCBjb2xsLmNvbGxlY3Rpb25OYW1lLCB7XG4gICAgICAgICAgICBmdWxsOiB0cnVlLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlOiB0aGlzLnJlYWRQcmVmZXJlbmNlLFxuICAgICAgICAgICAgc2Vzc2lvblxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkluZGV4ZXNPcGVyYXRpb24gPSBJbmRleGVzT3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQ3JlYXRlSW5kZXhlc09wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGNvbGxlY3Rpb25OYW1lLCBpbmRleGVzLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbk5hbWUgPSBjb2xsZWN0aW9uTmFtZTtcbiAgICAgICAgdGhpcy5pbmRleGVzID0gaW5kZXhlcy5tYXAodXNlckluZGV4ID0+IHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUga2V5IGlzIGEgTWFwIHRvIHByZXNlcnZlIGluZGV4IGtleSBvcmRlcmluZ1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gdXNlckluZGV4LmtleSBpbnN0YW5jZW9mIE1hcCA/IHVzZXJJbmRleC5rZXkgOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHVzZXJJbmRleC5rZXkpKTtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB1c2VySW5kZXgubmFtZSAhPSBudWxsID8gdXNlckluZGV4Lm5hbWUgOiBBcnJheS5mcm9tKGtleSkuZmxhdCgpLmpvaW4oJ18nKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkSW5kZXhPcHRpb25zID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHsgLi4udXNlckluZGV4IH0pLmZpbHRlcigoW29wdGlvbk5hbWVdKSA9PiBWQUxJRF9JTkRFWF9PUFRJT05TLmhhcyhvcHRpb25OYW1lKSkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi52YWxpZEluZGV4T3B0aW9ucyxcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdjcmVhdGVJbmRleGVzJztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgaW5kZXhlcyA9IHRoaXMuaW5kZXhlcztcbiAgICAgICAgY29uc3Qgc2VydmVyV2lyZVZlcnNpb24gPSAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikoc2VydmVyKTtcbiAgICAgICAgY29uc3QgY21kID0geyBjcmVhdGVJbmRleGVzOiB0aGlzLmNvbGxlY3Rpb25OYW1lLCBpbmRleGVzIH07XG4gICAgICAgIGlmIChvcHRpb25zLmNvbW1pdFF1b3J1bSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoc2VydmVyV2lyZVZlcnNpb24gPCA5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoJ09wdGlvbiBgY29tbWl0UXVvcnVtYCBmb3IgYGNyZWF0ZUluZGV4ZXNgIG5vdCBzdXBwb3J0ZWQgb24gc2VydmVycyA8IDQuNCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY21kLmNvbW1pdFF1b3J1bSA9IG9wdGlvbnMuY29tbWl0UXVvcnVtO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvbGxhdGlvbiBpcyBzZXQgb24gZWFjaCBpbmRleCwgaXQgc2hvdWxkIG5vdCBiZSBkZWZpbmVkIGF0IHRoZSByb290XG4gICAgICAgIHRoaXMub3B0aW9ucy5jb2xsYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIGF3YWl0IHN1cGVyLmV4ZWN1dGVDb21tYW5kKHNlcnZlciwgc2Vzc2lvbiwgY21kKTtcbiAgICAgICAgY29uc3QgaW5kZXhOYW1lcyA9IGluZGV4ZXMubWFwKGluZGV4ID0+IGluZGV4Lm5hbWUgfHwgJycpO1xuICAgICAgICByZXR1cm4gaW5kZXhOYW1lcztcbiAgICB9XG59XG5leHBvcnRzLkNyZWF0ZUluZGV4ZXNPcGVyYXRpb24gPSBDcmVhdGVJbmRleGVzT3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgQ3JlYXRlSW5kZXhPcGVyYXRpb24gZXh0ZW5kcyBDcmVhdGVJbmRleGVzT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGNvbGxlY3Rpb25OYW1lLCBpbmRleFNwZWMsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIocGFyZW50LCBjb2xsZWN0aW9uTmFtZSwgW21ha2VJbmRleFNwZWMoaW5kZXhTcGVjLCBvcHRpb25zKV0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBpbmRleE5hbWVzID0gYXdhaXQgc3VwZXIuZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pO1xuICAgICAgICByZXR1cm4gaW5kZXhOYW1lc1swXTtcbiAgICB9XG59XG5leHBvcnRzLkNyZWF0ZUluZGV4T3BlcmF0aW9uID0gQ3JlYXRlSW5kZXhPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBFbnN1cmVJbmRleE9wZXJhdGlvbiBleHRlbmRzIENyZWF0ZUluZGV4T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgY29sbGVjdGlvbk5hbWUsIGluZGV4U3BlYywgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihkYiwgY29sbGVjdGlvbk5hbWUsIGluZGV4U3BlYywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMucmVhZFByZWZlcmVuY2UgPSByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5O1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbk5hbWUgPSBjb2xsZWN0aW9uTmFtZTtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2xpc3RJbmRleGVzJztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgaW5kZXhOYW1lID0gdGhpcy5pbmRleGVzWzBdLm5hbWU7XG4gICAgICAgIGNvbnN0IGluZGV4ZXMgPSBhd2FpdCB0aGlzLmRiXG4gICAgICAgICAgICAuY29sbGVjdGlvbih0aGlzLmNvbGxlY3Rpb25OYW1lKVxuICAgICAgICAgICAgLmxpc3RJbmRleGVzKHsgc2Vzc2lvbiB9KVxuICAgICAgICAgICAgLnRvQXJyYXkoKVxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29FcnJvciAmJiBlcnJvci5jb2RlID09PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuTmFtZXNwYWNlTm90Rm91bmQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaW5kZXhOYW1lICYmIGluZGV4ZXMuc29tZShpbmRleCA9PiBpbmRleC5uYW1lID09PSBpbmRleE5hbWUpKVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4TmFtZTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKTtcbiAgICB9XG59XG5leHBvcnRzLkVuc3VyZUluZGV4T3BlcmF0aW9uID0gRW5zdXJlSW5kZXhPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBEcm9wSW5kZXhPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgaW5kZXhOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmluZGV4TmFtZSA9IGluZGV4TmFtZTtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2Ryb3BJbmRleGVzJztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgY21kID0geyBkcm9wSW5kZXhlczogdGhpcy5jb2xsZWN0aW9uLmNvbGxlY3Rpb25OYW1lLCBpbmRleDogdGhpcy5pbmRleE5hbWUgfTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4ZWN1dGVDb21tYW5kKHNlcnZlciwgc2Vzc2lvbiwgY21kKTtcbiAgICB9XG59XG5leHBvcnRzLkRyb3BJbmRleE9wZXJhdGlvbiA9IERyb3BJbmRleE9wZXJhdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIExpc3RJbmRleGVzT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoY29sbGVjdGlvbiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zLndyaXRlQ29uY2VybjtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uTmFtZXNwYWNlID0gY29sbGVjdGlvbi5zLm5hbWVzcGFjZTtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2xpc3RJbmRleGVzJztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3Qgc2VydmVyV2lyZVZlcnNpb24gPSAoMCwgdXRpbHNfMS5tYXhXaXJlVmVyc2lvbikoc2VydmVyKTtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gdGhpcy5vcHRpb25zLmJhdGNoU2l6ZSA/IHsgYmF0Y2hTaXplOiB0aGlzLm9wdGlvbnMuYmF0Y2hTaXplIH0gOiB7fTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHsgbGlzdEluZGV4ZXM6IHRoaXMuY29sbGVjdGlvbk5hbWVzcGFjZS5jb2xsZWN0aW9uLCBjdXJzb3IgfTtcbiAgICAgICAgLy8gd2UgY2hlY2sgZm9yIHVuZGVmaW5lZCBzcGVjaWZpY2FsbHkgaGVyZSB0byBhbGxvdyBmYWxzeSB2YWx1ZXNcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgIGlmIChzZXJ2ZXJXaXJlVmVyc2lvbiA+PSA5ICYmIHRoaXMub3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY29tbWVudCA9IHRoaXMub3B0aW9ucy5jb21tZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5leGVjdXRlQ29tbWFuZChzZXJ2ZXIsIHNlc3Npb24sIGNvbW1hbmQpO1xuICAgIH1cbn1cbmV4cG9ydHMuTGlzdEluZGV4ZXNPcGVyYXRpb24gPSBMaXN0SW5kZXhlc09wZXJhdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEluZGV4RXhpc3RzT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIGluZGV4ZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMuaW5kZXhlcyA9IGluZGV4ZXM7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdsaXN0SW5kZXhlcyc7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IGNvbGwgPSB0aGlzLmNvbGxlY3Rpb247XG4gICAgICAgIGNvbnN0IGluZGV4ZXMgPSB0aGlzLmluZGV4ZXM7XG4gICAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCAoMCwgY29tbW9uX2Z1bmN0aW9uc18xLmluZGV4SW5mb3JtYXRpb24pKGNvbGwucy5kYiwgY29sbC5jb2xsZWN0aW9uTmFtZSwge1xuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHRoaXMucmVhZFByZWZlcmVuY2UsXG4gICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBMZXQncyBjaGVjayBmb3IgdGhlIGluZGV4IG5hbWVzXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbmRleGVzKSlcbiAgICAgICAgICAgIHJldHVybiBpbmZvW2luZGV4ZXNdICE9IG51bGw7XG4gICAgICAgIC8vIEFsbCBrZXlzIGZvdW5kIHJldHVybiB0cnVlXG4gICAgICAgIHJldHVybiBpbmRleGVzLmV2ZXJ5KGluZGV4TmFtZSA9PiBpbmZvW2luZGV4TmFtZV0gIT0gbnVsbCk7XG4gICAgfVxufVxuZXhwb3J0cy5JbmRleEV4aXN0c09wZXJhdGlvbiA9IEluZGV4RXhpc3RzT3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgSW5kZXhJbmZvcm1hdGlvbk9wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgbmFtZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnbGlzdEluZGV4ZXMnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBkYiA9IHRoaXMuZGI7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgIHJldHVybiAoMCwgY29tbW9uX2Z1bmN0aW9uc18xLmluZGV4SW5mb3JtYXRpb24pKGRiLCBuYW1lLCB7XG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZTogdGhpcy5yZWFkUHJlZmVyZW5jZSxcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5JbmRleEluZm9ybWF0aW9uT3BlcmF0aW9uID0gSW5kZXhJbmZvcm1hdGlvbk9wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShMaXN0SW5kZXhlc09wZXJhdGlvbiwgW1xuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5SRUFEX09QRVJBVElPTixcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5DVVJTT1JfQ1JFQVRJTkdcbl0pO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKENyZWF0ZUluZGV4ZXNPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OXSk7XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoQ3JlYXRlSW5kZXhPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OXSk7XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRW5zdXJlSW5kZXhPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OXSk7XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoRHJvcEluZGV4T3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXhlcy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJJbmRleEluZm9ybWF0aW9uT3BlcmF0aW9uIiwiSW5kZXhFeGlzdHNPcGVyYXRpb24iLCJMaXN0SW5kZXhlc09wZXJhdGlvbiIsIkRyb3BJbmRleE9wZXJhdGlvbiIsIkVuc3VyZUluZGV4T3BlcmF0aW9uIiwiQ3JlYXRlSW5kZXhPcGVyYXRpb24iLCJDcmVhdGVJbmRleGVzT3BlcmF0aW9uIiwiSW5kZXhlc09wZXJhdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwicmVhZF9wcmVmZXJlbmNlXzEiLCJ1dGlsc18xIiwiY29tbWFuZF8xIiwiY29tbW9uX2Z1bmN0aW9uc18xIiwib3BlcmF0aW9uXzEiLCJWQUxJRF9JTkRFWF9PUFRJT05TIiwiU2V0IiwiaXNJbmRleERpcmVjdGlvbiIsIngiLCJpc1NpbmdsZUluZGV4VHVwbGUiLCJ0IiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwibWFrZUluZGV4U3BlYyIsImluZGV4U3BlYyIsIm9wdGlvbnMiLCJrZXkiLCJNYXAiLCJpbmRleFNwZWNzIiwic3BlYyIsInNldCIsInByb3BlcnR5IiwiaXNPYmplY3QiLCJlbnRyaWVzIiwiQWJzdHJhY3RPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImNvbGxlY3Rpb24iLCJjb21tYW5kTmFtZSIsImV4ZWN1dGUiLCJfc2VydmVyIiwic2Vzc2lvbiIsImNvbGwiLCJpbmRleEluZm9ybWF0aW9uIiwicyIsImRiIiwiY29sbGVjdGlvbk5hbWUiLCJmdWxsIiwicmVhZFByZWZlcmVuY2UiLCJDb21tYW5kT3BlcmF0aW9uIiwicGFyZW50IiwiaW5kZXhlcyIsIm1hcCIsInVzZXJJbmRleCIsIm5hbWUiLCJmcm9tIiwiZmxhdCIsImpvaW4iLCJ2YWxpZEluZGV4T3B0aW9ucyIsImZyb21FbnRyaWVzIiwiZmlsdGVyIiwib3B0aW9uTmFtZSIsImhhcyIsInNlcnZlciIsInNlcnZlcldpcmVWZXJzaW9uIiwibWF4V2lyZVZlcnNpb24iLCJjbWQiLCJjcmVhdGVJbmRleGVzIiwiY29tbWl0UXVvcnVtIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJjb2xsYXRpb24iLCJ1bmRlZmluZWQiLCJleGVjdXRlQ29tbWFuZCIsImluZGV4TmFtZXMiLCJpbmRleCIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsImluZGV4TmFtZSIsImxpc3RJbmRleGVzIiwidG9BcnJheSIsImNhdGNoIiwiZXJyb3IiLCJNb25nb0Vycm9yIiwiY29kZSIsIk1PTkdPREJfRVJST1JfQ09ERVMiLCJOYW1lc3BhY2VOb3RGb3VuZCIsInNvbWUiLCJkcm9wSW5kZXhlcyIsIndyaXRlQ29uY2VybiIsImNvbGxlY3Rpb25OYW1lc3BhY2UiLCJuYW1lc3BhY2UiLCJjdXJzb3IiLCJiYXRjaFNpemUiLCJjb21tYW5kIiwiY29tbWVudCIsImluZm8iLCJldmVyeSIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRUFEX09QRVJBVElPTiIsIlJFVFJZQUJMRSIsIkNVUlNPUl9DUkVBVElORyIsIldSSVRFX09QRVJBVElPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/indexes.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/insert.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/insert.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.InsertManyOperation = exports.InsertOneOperation = exports.InsertOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst write_concern_1 = __webpack_require__(/*! ../write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst bulk_write_1 = __webpack_require__(/*! ./bulk_write */ \"(ssr)/./node_modules/mongodb/lib/operations/bulk_write.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst common_functions_1 = __webpack_require__(/*! ./common_functions */ \"(ssr)/./node_modules/mongodb/lib/operations/common_functions.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class InsertOperation extends command_1.CommandOperation {\n    constructor(ns, documents, options){\n        super(undefined, options);\n        this.options = {\n            ...options,\n            checkKeys: options.checkKeys ?? false\n        };\n        this.ns = ns;\n        this.documents = documents;\n    }\n    get commandName() {\n        return \"insert\";\n    }\n    async execute(server, session) {\n        const options = this.options ?? {};\n        const ordered = typeof options.ordered === \"boolean\" ? options.ordered : true;\n        const command = {\n            insert: this.ns.collection,\n            documents: this.documents,\n            ordered\n        };\n        if (typeof options.bypassDocumentValidation === \"boolean\") {\n            command.bypassDocumentValidation = options.bypassDocumentValidation;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            command.comment = options.comment;\n        }\n        return super.executeCommand(server, session, command);\n    }\n}\nexports.InsertOperation = InsertOperation;\nclass InsertOneOperation extends InsertOperation {\n    constructor(collection, doc, options){\n        super(collection.s.namespace, (0, common_functions_1.maybeAddIdToDocuments)(collection, [\n            doc\n        ], options), options);\n    }\n    async execute(server, session) {\n        const res = await super.execute(server, session);\n        if (res.code) throw new error_1.MongoServerError(res);\n        if (res.writeErrors) {\n            // This should be a WriteError but we can't change it now because of error hierarchy\n            throw new error_1.MongoServerError(res.writeErrors[0]);\n        }\n        return {\n            acknowledged: this.writeConcern?.w !== 0,\n            insertedId: this.documents[0]._id\n        };\n    }\n}\nexports.InsertOneOperation = InsertOneOperation;\n/** @internal */ class InsertManyOperation extends operation_1.AbstractOperation {\n    constructor(collection, docs, options){\n        super(options);\n        if (!Array.isArray(docs)) {\n            throw new error_1.MongoInvalidArgumentError('Argument \"docs\" must be an array of documents');\n        }\n        this.options = options;\n        this.collection = collection;\n        this.docs = docs;\n    }\n    get commandName() {\n        return \"insert\";\n    }\n    async execute(server, session) {\n        const coll = this.collection;\n        const options = {\n            ...this.options,\n            ...this.bsonOptions,\n            readPreference: this.readPreference\n        };\n        const writeConcern = write_concern_1.WriteConcern.fromOptions(options);\n        const bulkWriteOperation = new bulk_write_1.BulkWriteOperation(coll, this.docs.map((document)=>({\n                insertOne: {\n                    document\n                }\n            })), options);\n        try {\n            const res = await bulkWriteOperation.execute(server, session);\n            return {\n                acknowledged: writeConcern?.w !== 0,\n                insertedCount: res.insertedCount,\n                insertedIds: res.insertedIds\n            };\n        } catch (err) {\n            if (err && err.message === \"Operation must be an object with an operation key\") {\n                throw new error_1.MongoInvalidArgumentError(\"Collection.insertMany() cannot be called with an array that has null/undefined values\");\n            }\n            throw err;\n        }\n    }\n}\nexports.InsertManyOperation = InsertManyOperation;\n(0, operation_1.defineAspects)(InsertOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(InsertOneOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION\n]);\n(0, operation_1.defineAspects)(InsertManyOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=insert.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9pbnNlcnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDJCQUEyQixHQUFHQSwwQkFBMEIsR0FBR0EsdUJBQXVCLEdBQUcsS0FBSztBQUMxRixNQUFNSyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxrQkFBa0JELG1CQUFPQSxDQUFDLDJFQUFrQjtBQUNsRCxNQUFNRSxlQUFlRixtQkFBT0EsQ0FBQywrRUFBYztBQUMzQyxNQUFNRyxZQUFZSCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNSSxxQkFBcUJKLG1CQUFPQSxDQUFDLDJGQUFvQjtBQUN2RCxNQUFNSyxjQUFjTCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsd0JBQXdCSyxVQUFVRyxnQkFBZ0I7SUFDcERDLFlBQVlDLEVBQUUsRUFBRUMsU0FBUyxFQUFFQyxPQUFPLENBQUU7UUFDaEMsS0FBSyxDQUFDQyxXQUFXRDtRQUNqQixJQUFJLENBQUNBLE9BQU8sR0FBRztZQUFFLEdBQUdBLE9BQU87WUFBRUUsV0FBV0YsUUFBUUUsU0FBUyxJQUFJO1FBQU07UUFDbkUsSUFBSSxDQUFDSixFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDQyxTQUFTLEdBQUdBO0lBQ3JCO0lBQ0EsSUFBSUksY0FBYztRQUNkLE9BQU87SUFDWDtJQUNBLE1BQU1DLFFBQVFDLE1BQU0sRUFBRUMsT0FBTyxFQUFFO1FBQzNCLE1BQU1OLFVBQVUsSUFBSSxDQUFDQSxPQUFPLElBQUksQ0FBQztRQUNqQyxNQUFNTyxVQUFVLE9BQU9QLFFBQVFPLE9BQU8sS0FBSyxZQUFZUCxRQUFRTyxPQUFPLEdBQUc7UUFDekUsTUFBTUMsVUFBVTtZQUNaQyxRQUFRLElBQUksQ0FBQ1gsRUFBRSxDQUFDWSxVQUFVO1lBQzFCWCxXQUFXLElBQUksQ0FB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QUNBNUQsMkJBQTJCLEdBQUdFO0FBQzdCLElBQUdTLFlBQVltRCxhQUFhLEVBQUUxRCxpQkFBaUI7SUFBQ08sWUFBWW9ELE1BQU0sQ0FBQ0MsU0FBUztJQUFFckQsWUFBWW9ELE1BQU0sQ0FBQ0UsZUFBZTtDQUFDO0FBQ2pILElBQUd0RCxZQUFZbUQsYUFBYSxFQUFFM0Qsb0JBQW9CO0lBQUNRLFlBQVlvRCxNQUFNLENBQUNDLFNBQVM7SUFBRXJELFlBQVlvRCxNQUFNLENBQUNFLGVBQWU7Q0FBQztBQUNwSCxJQUFHdEQsWUFBWW1ELGFBQWEsRUFBRTVELHFCQUFxQjtJQUFDUyxZQUFZb0QsTUFBTSxDQUFDRSxlQUFlO0NBQUMsR0FDeEYsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2luc2VydC5qcz83NWZhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5JbnNlcnRNYW55T3BlcmF0aW9uID0gZXhwb3J0cy5JbnNlcnRPbmVPcGVyYXRpb24gPSBleHBvcnRzLkluc2VydE9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB3cml0ZV9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi4vd3JpdGVfY29uY2VyblwiKTtcbmNvbnN0IGJ1bGtfd3JpdGVfMSA9IHJlcXVpcmUoXCIuL2J1bGtfd3JpdGVcIik7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3QgY29tbW9uX2Z1bmN0aW9uc18xID0gcmVxdWlyZShcIi4vY29tbW9uX2Z1bmN0aW9uc1wiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgSW5zZXJ0T3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG5zLCBkb2N1bWVudHMsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIodW5kZWZpbmVkLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyAuLi5vcHRpb25zLCBjaGVja0tleXM6IG9wdGlvbnMuY2hlY2tLZXlzID8/IGZhbHNlIH07XG4gICAgICAgIHRoaXMubnMgPSBucztcbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBkb2N1bWVudHM7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdpbnNlcnQnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zID8/IHt9O1xuICAgICAgICBjb25zdCBvcmRlcmVkID0gdHlwZW9mIG9wdGlvbnMub3JkZXJlZCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5vcmRlcmVkIDogdHJ1ZTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHtcbiAgICAgICAgICAgIGluc2VydDogdGhpcy5ucy5jb2xsZWN0aW9uLFxuICAgICAgICAgICAgZG9jdW1lbnRzOiB0aGlzLmRvY3VtZW50cyxcbiAgICAgICAgICAgIG9yZGVyZWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBjb21tYW5kLmJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiA9IG9wdGlvbnMuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAob3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY29tbWVudCA9IG9wdGlvbnMuY29tbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZUNvbW1hbmQoc2VydmVyLCBzZXNzaW9uLCBjb21tYW5kKTtcbiAgICB9XG59XG5leHBvcnRzLkluc2VydE9wZXJhdGlvbiA9IEluc2VydE9wZXJhdGlvbjtcbmNsYXNzIEluc2VydE9uZU9wZXJhdGlvbiBleHRlbmRzIEluc2VydE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgZG9jLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24ucy5uYW1lc3BhY2UsICgwLCBjb21tb25fZnVuY3Rpb25zXzEubWF5YmVBZGRJZFRvRG9jdW1lbnRzKShjb2xsZWN0aW9uLCBbZG9jXSwgb3B0aW9ucyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzdXBlci5leGVjdXRlKHNlcnZlciwgc2Vzc2lvbik7XG4gICAgICAgIGlmIChyZXMuY29kZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzKTtcbiAgICAgICAgaWYgKHJlcy53cml0ZUVycm9ycykge1xuICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgYSBXcml0ZUVycm9yIGJ1dCB3ZSBjYW4ndCBjaGFuZ2UgaXQgbm93IGJlY2F1c2Ugb2YgZXJyb3IgaGllcmFyY2h5XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHJlcy53cml0ZUVycm9yc1swXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFja25vd2xlZGdlZDogdGhpcy53cml0ZUNvbmNlcm4/LncgIT09IDAsXG4gICAgICAgICAgICBpbnNlcnRlZElkOiB0aGlzLmRvY3VtZW50c1swXS5faWRcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLkluc2VydE9uZU9wZXJhdGlvbiA9IEluc2VydE9uZU9wZXJhdGlvbjtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEluc2VydE1hbnlPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgZG9jcywgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRvY3MpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdBcmd1bWVudCBcImRvY3NcIiBtdXN0IGJlIGFuIGFycmF5IG9mIGRvY3VtZW50cycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMuZG9jcyA9IGRvY3M7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdpbnNlcnQnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBjb2xsID0gdGhpcy5jb2xsZWN0aW9uO1xuICAgICAgICBjb25zdCBvcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLnRoaXMuYnNvbk9wdGlvbnMsIHJlYWRQcmVmZXJlbmNlOiB0aGlzLnJlYWRQcmVmZXJlbmNlIH07XG4gICAgICAgIGNvbnN0IHdyaXRlQ29uY2VybiA9IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGJ1bGtXcml0ZU9wZXJhdGlvbiA9IG5ldyBidWxrX3dyaXRlXzEuQnVsa1dyaXRlT3BlcmF0aW9uKGNvbGwsIHRoaXMuZG9jcy5tYXAoZG9jdW1lbnQgPT4gKHtcbiAgICAgICAgICAgIGluc2VydE9uZTogeyBkb2N1bWVudCB9XG4gICAgICAgIH0pKSwgb3B0aW9ucyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBidWxrV3JpdGVPcGVyYXRpb24uZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhY2tub3dsZWRnZWQ6IHdyaXRlQ29uY2Vybj8udyAhPT0gMCxcbiAgICAgICAgICAgICAgICBpbnNlcnRlZENvdW50OiByZXMuaW5zZXJ0ZWRDb3VudCxcbiAgICAgICAgICAgICAgICBpbnNlcnRlZElkczogcmVzLmluc2VydGVkSWRzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIgJiYgZXJyLm1lc3NhZ2UgPT09ICdPcGVyYXRpb24gbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhbiBvcGVyYXRpb24ga2V5Jykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0NvbGxlY3Rpb24uaW5zZXJ0TWFueSgpIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBhbiBhcnJheSB0aGF0IGhhcyBudWxsL3VuZGVmaW5lZCB2YWx1ZXMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuSW5zZXJ0TWFueU9wZXJhdGlvbiA9IEluc2VydE1hbnlPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoSW5zZXJ0T3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRSwgb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKEluc2VydE9uZU9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsIG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT05dKTtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShJbnNlcnRNYW55T3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5zZXJ0LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkluc2VydE1hbnlPcGVyYXRpb24iLCJJbnNlcnRPbmVPcGVyYXRpb24iLCJJbnNlcnRPcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsIndyaXRlX2NvbmNlcm5fMSIsImJ1bGtfd3JpdGVfMSIsImNvbW1hbmRfMSIsImNvbW1vbl9mdW5jdGlvbnNfMSIsIm9wZXJhdGlvbl8xIiwiQ29tbWFuZE9wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwibnMiLCJkb2N1bWVudHMiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwiY2hlY2tLZXlzIiwiY29tbWFuZE5hbWUiLCJleGVjdXRlIiwic2VydmVyIiwic2Vzc2lvbiIsIm9yZGVyZWQiLCJjb21tYW5kIiwiaW5zZXJ0IiwiY29sbGVjdGlvbiIsImJ5cGFzc0RvY3VtZW50VmFsaWRhdGlvbiIsImNvbW1lbnQiLCJleGVjdXRlQ29tbWFuZCIsImRvYyIsInMiLCJuYW1lc3BhY2UiLCJtYXliZUFkZElkVG9Eb2N1bWVudHMiLCJyZXMiLCJjb2RlIiwiTW9uZ29TZXJ2ZXJFcnJvciIsIndyaXRlRXJyb3JzIiwiYWNrbm93bGVkZ2VkIiwid3JpdGVDb25jZXJuIiwidyIsImluc2VydGVkSWQiLCJfaWQiLCJBYnN0cmFjdE9wZXJhdGlvbiIsImRvY3MiLCJBcnJheSIsImlzQXJyYXkiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiY29sbCIsImJzb25PcHRpb25zIiwicmVhZFByZWZlcmVuY2UiLCJXcml0ZUNvbmNlcm4iLCJmcm9tT3B0aW9ucyIsImJ1bGtXcml0ZU9wZXJhdGlvbiIsIkJ1bGtXcml0ZU9wZXJhdGlvbiIsIm1hcCIsImRvY3VtZW50IiwiaW5zZXJ0T25lIiwiaW5zZXJ0ZWRDb3VudCIsImluc2VydGVkSWRzIiwiZXJyIiwibWVzc2FnZSIsImRlZmluZUFzcGVjdHMiLCJBc3BlY3QiLCJSRVRSWUFCTEUiLCJXUklURV9PUEVSQVRJT04iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/insert.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/is_capped.js":
/*!**********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/is_capped.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.IsCappedOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class IsCappedOperation extends operation_1.AbstractOperation {\n    constructor(collection, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n    }\n    get commandName() {\n        return \"listCollections\";\n    }\n    async execute(server, session) {\n        const coll = this.collection;\n        const [collection] = await coll.s.db.listCollections({\n            name: coll.collectionName\n        }, {\n            ...this.options,\n            nameOnly: false,\n            readPreference: this.readPreference,\n            session\n        }).toArray();\n        if (collection == null || collection.options == null) {\n            throw new error_1.MongoAPIError(`collection ${coll.namespace} not found`);\n        }\n        return !!collection.options?.capped;\n    }\n}\nexports.IsCappedOperation = IsCappedOperation; //# sourceMappingURL=is_capped.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9pc19jYXBwZWQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlCQUF5QixHQUFHLEtBQUs7QUFDakMsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsY0FBY0QsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLDBCQUEwQkcsWUFBWUMsaUJBQWlCO0lBQ3pEQyxZQUFZQyxVQUFVLEVBQUVDLE9BQU8sQ0FBRTtRQUM3QixLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDRCxVQUFVLEdBQUdBO0lBQ3RCO0lBQ0EsSUFBSUUsY0FBYztRQUNkLE9BQU87SUFDWDtJQUNBLE1BQU1DLFFBQVFDLE1BQU0sRUFBRUMsT0FBTyxFQUFFO1FBQzNCLE1BQU1DLE9BQU8sSUFBSSxDQUFDTixVQUFVO1FBQzVCLE1BQU0sQ0FBQ0EsV0FBVyxHQUFHLE1BQU1NLEtBQUtDLENBQUMsQ0FBQ0MsRUFBRSxDQUMvQkMsZUFBZSxDQUFDO1lBQUVDLE1BQU1KLEtBQUtLLGNBQWM7UUFBQyxHQUFHO1lBQUUsR0FBRyxJQUFJLENBQUNWLE9BQU87WUFBRVcsVUFBVTtZQUFPQyxnQkFBZ0IsSUFBSSxDQUFDQSxjQUFjO1lBQUVSO1FBQVEsR0FDaElTLE9BQU87UUFDWixJQUFJZCxjQUFjLFFBQVFBLFdBQVdDLE9BQU8sSUFBSSxNQUFNO1lBQ2xELE1BQU0sSUFBSU4sUUFBUW9CLGFBQWEsQ0FBQyxDQUFDLFdBQVcsRUFBRVQsS0FBS1UsU0FBUyxDQUFDLFVBQVUsQ0FBQztRQUM1RTtRQUNBLE9BQU8sQ0FBQyxDQUFDaEIsV0FBV0MsT0FBTyxFQUFFZ0I7SUFDakM7QUFDSjtBQUNBekIseUJBQXlCLEdBQUdFLG1CQUM1QixxQ0FBcUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvaXNfY2FwcGVkLmpzP2YwNmYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLklzQ2FwcGVkT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgSXNDYXBwZWRPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2xpc3RDb2xsZWN0aW9ucyc7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IGNvbGwgPSB0aGlzLmNvbGxlY3Rpb247XG4gICAgICAgIGNvbnN0IFtjb2xsZWN0aW9uXSA9IGF3YWl0IGNvbGwucy5kYlxuICAgICAgICAgICAgLmxpc3RDb2xsZWN0aW9ucyh7IG5hbWU6IGNvbGwuY29sbGVjdGlvbk5hbWUgfSwgeyAuLi50aGlzLm9wdGlvbnMsIG5hbWVPbmx5OiBmYWxzZSwgcmVhZFByZWZlcmVuY2U6IHRoaXMucmVhZFByZWZlcmVuY2UsIHNlc3Npb24gfSlcbiAgICAgICAgICAgIC50b0FycmF5KCk7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uID09IG51bGwgfHwgY29sbGVjdGlvbi5vcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQVBJRXJyb3IoYGNvbGxlY3Rpb24gJHtjb2xsLm5hbWVzcGFjZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEhY29sbGVjdGlvbi5vcHRpb25zPy5jYXBwZWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Jc0NhcHBlZE9wZXJhdGlvbiA9IElzQ2FwcGVkT3BlcmF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNfY2FwcGVkLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIklzQ2FwcGVkT3BlcmF0aW9uIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJvcGVyYXRpb25fMSIsIkFic3RyYWN0T3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwib3B0aW9ucyIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJjb2xsIiwicyIsImRiIiwibGlzdENvbGxlY3Rpb25zIiwibmFtZSIsImNvbGxlY3Rpb25OYW1lIiwibmFtZU9ubHkiLCJyZWFkUHJlZmVyZW5jZSIsInRvQXJyYXkiLCJNb25nb0FQSUVycm9yIiwibmFtZXNwYWNlIiwiY2FwcGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/is_capped.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/kill_cursors.js":
/*!*************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/kill_cursors.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.KillCursorsOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\nclass KillCursorsOperation extends operation_1.AbstractOperation {\n    constructor(cursorId, ns, server, options){\n        super(options);\n        this.ns = ns;\n        this.cursorId = cursorId;\n        this.server = server;\n    }\n    get commandName() {\n        return \"killCursors\";\n    }\n    async execute(server, session) {\n        if (server !== this.server) {\n            throw new error_1.MongoRuntimeError(\"Killcursor must run on the same server operation began on\");\n        }\n        const killCursors = this.ns.collection;\n        if (killCursors == null) {\n            // Cursors should have adopted the namespace returned by MongoDB\n            // which should always defined a collection name (even a pseudo one, ex. db.aggregate())\n            throw new error_1.MongoRuntimeError(\"A collection name must be determined before killCursors\");\n        }\n        const killCursorsCommand = {\n            killCursors,\n            cursors: [\n                this.cursorId\n            ]\n        };\n        try {\n            await server.command(this.ns, killCursorsCommand, {\n                session\n            });\n        } catch  {\n        // The driver should never emit errors from killCursors, this is spec-ed behavior\n        }\n    }\n}\nexports.KillCursorsOperation = KillCursorsOperation;\n(0, operation_1.defineAspects)(KillCursorsOperation, [\n    operation_1.Aspect.MUST_SELECT_SAME_SERVER\n]); //# sourceMappingURL=kill_cursors.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9raWxsX2N1cnNvcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDRCQUE0QixHQUFHLEtBQUs7QUFDcEMsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsY0FBY0QsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsTUFBTUYsNkJBQTZCRyxZQUFZQyxpQkFBaUI7SUFDNURDLFlBQVlDLFFBQVEsRUFBRUMsRUFBRSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUN2QyxLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDRixFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDRCxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0UsTUFBTSxHQUFHQTtJQUNsQjtJQUNBLElBQUlFLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRSCxNQUFNLEVBQUVJLE9BQU8sRUFBRTtRQUMzQixJQUFJSixXQUFXLElBQUksQ0FBQ0EsTUFBTSxFQUFFO1lBQ3hCLE1BQU0sSUFBSVAsUUFBUVksaUJBQWlCLENBQUM7UUFDeEM7UUFDQSxNQUFNQyxjQUFjLElBQUksQ0FBQ1AsRUFBRSxDQUFDUSxVQUFVO1FBQ3RDLElBQUlELGVBQWUsTUFBTTtZQUNyQixnRUFBZ0U7WUFDaEUsd0ZBQXdGO1lBQ3hGLE1BQU0sSUFBSWIsUUFBUVksaUJBQWlCLENBQUM7UUFDeEM7UUFDQSxNQUFNRyxxQkFBcUI7WUFDdkJGO1lBQ0FHLFNBQVM7Z0JBQUMsSUFBSSxDQUFDWCxRQUFRO2FBQUM7UUFDNUI7UUFDQSxJQUFJO1lBQ0EsTUFBTUUsT0FBT1UsT0FBTyxDQUFDLElBQUksQ0FBQ1gsRUFBRSxFQUFFUyxvQkFBb0I7Z0JBQUVKO1lBQVE7UUFDaEUsRUFDQSxPQUFNO1FBQ0YsaUZBQWlGO1FBQ3JGO0lBQ0o7QUFDSjtBQUNBZCw0QkFBNEIsR0FBR0U7QUFDOUIsSUFBR0csWUFBWWdCLGFBQWEsRUFBRW5CLHNCQUFzQjtJQUFDRyxZQUFZaUIsTUFBTSxDQUFDQyx1QkFBdUI7Q0FBQyxHQUNqRyx3Q0FBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMva2lsbF9jdXJzb3JzLmpzPzhiYzUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLktpbGxDdXJzb3JzT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuY2xhc3MgS2lsbEN1cnNvcnNPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY3Vyc29ySWQsIG5zLCBzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMubnMgPSBucztcbiAgICAgICAgdGhpcy5jdXJzb3JJZCA9IGN1cnNvcklkO1xuICAgICAgICB0aGlzLnNlcnZlciA9IHNlcnZlcjtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2tpbGxDdXJzb3JzJztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgaWYgKHNlcnZlciAhPT0gdGhpcy5zZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdLaWxsY3Vyc29yIG11c3QgcnVuIG9uIHRoZSBzYW1lIHNlcnZlciBvcGVyYXRpb24gYmVnYW4gb24nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBraWxsQ3Vyc29ycyA9IHRoaXMubnMuY29sbGVjdGlvbjtcbiAgICAgICAgaWYgKGtpbGxDdXJzb3JzID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIEN1cnNvcnMgc2hvdWxkIGhhdmUgYWRvcHRlZCB0aGUgbmFtZXNwYWNlIHJldHVybmVkIGJ5IE1vbmdvREJcbiAgICAgICAgICAgIC8vIHdoaWNoIHNob3VsZCBhbHdheXMgZGVmaW5lZCBhIGNvbGxlY3Rpb24gbmFtZSAoZXZlbiBhIHBzZXVkbyBvbmUsIGV4LiBkYi5hZ2dyZWdhdGUoKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdBIGNvbGxlY3Rpb24gbmFtZSBtdXN0IGJlIGRldGVybWluZWQgYmVmb3JlIGtpbGxDdXJzb3JzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2lsbEN1cnNvcnNDb21tYW5kID0ge1xuICAgICAgICAgICAga2lsbEN1cnNvcnMsXG4gICAgICAgICAgICBjdXJzb3JzOiBbdGhpcy5jdXJzb3JJZF1cbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHNlcnZlci5jb21tYW5kKHRoaXMubnMsIGtpbGxDdXJzb3JzQ29tbWFuZCwgeyBzZXNzaW9uIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIC8vIFRoZSBkcml2ZXIgc2hvdWxkIG5ldmVyIGVtaXQgZXJyb3JzIGZyb20ga2lsbEN1cnNvcnMsIHRoaXMgaXMgc3BlYy1lZCBiZWhhdmlvclxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5LaWxsQ3Vyc29yc09wZXJhdGlvbiA9IEtpbGxDdXJzb3JzT3BlcmF0aW9uO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKEtpbGxDdXJzb3JzT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0Lk1VU1RfU0VMRUNUX1NBTUVfU0VSVkVSXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1raWxsX2N1cnNvcnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiS2lsbEN1cnNvcnNPcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsIm9wZXJhdGlvbl8xIiwiQWJzdHJhY3RPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImN1cnNvcklkIiwibnMiLCJzZXJ2ZXIiLCJvcHRpb25zIiwiY29tbWFuZE5hbWUiLCJleGVjdXRlIiwic2Vzc2lvbiIsIk1vbmdvUnVudGltZUVycm9yIiwia2lsbEN1cnNvcnMiLCJjb2xsZWN0aW9uIiwia2lsbEN1cnNvcnNDb21tYW5kIiwiY3Vyc29ycyIsImNvbW1hbmQiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiTVVTVF9TRUxFQ1RfU0FNRV9TRVJWRVIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/kill_cursors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/list_collections.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/list_collections.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListCollectionsOperation = void 0;\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class ListCollectionsOperation extends command_1.CommandOperation {\n    constructor(db, filter, options){\n        super(db, options);\n        this.options = {\n            ...options\n        };\n        delete this.options.writeConcern;\n        this.db = db;\n        this.filter = filter;\n        this.nameOnly = !!this.options.nameOnly;\n        this.authorizedCollections = !!this.options.authorizedCollections;\n        if (typeof this.options.batchSize === \"number\") {\n            this.batchSize = this.options.batchSize;\n        }\n    }\n    get commandName() {\n        return \"listCollections\";\n    }\n    async execute(server, session) {\n        return super.executeCommand(server, session, this.generateCommand((0, utils_1.maxWireVersion)(server)));\n    }\n    /* This is here for the purpose of unit testing the final command that gets sent. */ generateCommand(wireVersion) {\n        const command = {\n            listCollections: 1,\n            filter: this.filter,\n            cursor: this.batchSize ? {\n                batchSize: this.batchSize\n            } : {},\n            nameOnly: this.nameOnly,\n            authorizedCollections: this.authorizedCollections\n        };\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (wireVersion >= 9 && this.options.comment !== undefined) {\n            command.comment = this.options.comment;\n        }\n        return command;\n    }\n}\nexports.ListCollectionsOperation = ListCollectionsOperation;\n(0, operation_1.defineAspects)(ListCollectionsOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.CURSOR_CREATING\n]); //# sourceMappingURL=list_collections.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9saXN0X2NvbGxlY3Rpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxnQ0FBZ0MsR0FBRyxLQUFLO0FBQ3hDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLFlBQVlELG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLE1BQU1FLGNBQWNGLG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDLGNBQWMsR0FDZCxNQUFNRixpQ0FBaUNHLFVBQVVFLGdCQUFnQjtJQUM3REMsWUFBWUMsRUFBRSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUM3QixLQUFLLENBQUNGLElBQUlFO1FBQ1YsSUFBSSxDQUFDQSxPQUFPLEdBQUc7WUFBRSxHQUFHQSxPQUFPO1FBQUM7UUFDNUIsT0FBTyxJQUFJLENBQUNBLE9BQU8sQ0FBQ0MsWUFBWTtRQUNoQyxJQUFJLENBQUNILEVBQUUsR0FBR0E7UUFDVixJQUFJLENBQUNDLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNHLFFBQVEsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDRixPQUFPLENBQUNFLFFBQVE7UUFDdkMsSUFBSSxDQUFDQyxxQkFBcUIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDSCxPQUFPLENBQUNHLHFCQUFxQjtRQUNqRSxJQUFJLE9BQU8sSUFBSSxDQUFDSCxPQUFPLENBQUNJLFNBQVMsS0FBSyxVQUFVO1lBQzVDLElBQUksQ0FBQ0EsU0FBUyxHQUFHLElBQUksQ0FBQ0osT0FBTyxDQUFDSSxTQUFTO1FBQzNDO0lBQ0o7SUFDQSxJQUFJQyxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsT0FBTyxLQUFLLENBQUNDLGVBQWVGLFFBQVFDLFNBQVMsSUFBSSxDQUFDRSxlQUFlLENBQUMsQ0FBQyxHQUFHbEIsUUFBUW1CLGNBQWMsRUFBRUo7SUFDbEc7SUFDQSxrRkFBa0YsR0FDbEZHLGdCQUFnQkUsV0FBVyxFQUFFO1FBQ3pCLE1BQU1DLFVBQVU7WUFDWkMsaUJBQWlCO1lBQ2pCZixRQUFRLElBQUksQ0FBQ0EsTUFBTTtZQUNuQmdCLFFBQVEsSUFBSSxDQUFDWCxTQUFTLEdBQUc7Z0JBQUVBLFdBQVcsSUFBSSxDQUFDQSxTQUFTO1lBQUMsSUFBSSxDQUFDO1lBQzFERixVQUFVLElBQUksQ0FBQ0EsUUFBUTtZQUN2QkMsdUJBQXVCLElBQUksQ0FBQ0EscUJBQXFCO1FBQ3JEO1FBQ0EsaUVBQWlFO1FBQ2pFLGdEQUFnRDtRQUNoRCxJQUFJUyxlQUFlLEtBQUssSUFBSSxDQUFDWixPQUFPLENBQUNnQixPQUFPLEtBQUtDLFdBQVc7WUFDeERKLFFBQVFHLE9BQU8sR0FBRyxJQUFJLENBQUNoQixPQUFPLENBQUNnQixPQUFPO1FBQzFDO1FBQ0EsT0FBT0g7SUFDWDtBQUNKO0FBQ0F4QixnQ0FBZ0MsR0FBR0U7QUFDbEMsSUFBR0ksWUFBWXVCLGFBQWEsRUFBRTNCLDBCQUEwQjtJQUNyREksWUFBWXdCLE1BQU0sQ0FBQ0MsY0FBYztJQUNqQ3pCLFlBQVl3QixNQUFNLENBQUNFLFNBQVM7SUFDNUIxQixZQUFZd0IsTUFBTSxDQUFDRyxlQUFlO0NBQ3JDLEdBQ0QsNENBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2xpc3RfY29sbGVjdGlvbnMuanM/MDIyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTGlzdENvbGxlY3Rpb25zT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIExpc3RDb2xsZWN0aW9uc09wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGRiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgICAgIGRlbGV0ZSB0aGlzLm9wdGlvbnMud3JpdGVDb25jZXJuO1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMuZmlsdGVyID0gZmlsdGVyO1xuICAgICAgICB0aGlzLm5hbWVPbmx5ID0gISF0aGlzLm9wdGlvbnMubmFtZU9ubHk7XG4gICAgICAgIHRoaXMuYXV0aG9yaXplZENvbGxlY3Rpb25zID0gISF0aGlzLm9wdGlvbnMuYXV0aG9yaXplZENvbGxlY3Rpb25zO1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5iYXRjaFNpemUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzLmJhdGNoU2l6ZSA9IHRoaXMub3B0aW9ucy5iYXRjaFNpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2xpc3RDb2xsZWN0aW9ucyc7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5leGVjdXRlQ29tbWFuZChzZXJ2ZXIsIHNlc3Npb24sIHRoaXMuZ2VuZXJhdGVDb21tYW5kKCgwLCB1dGlsc18xLm1heFdpcmVWZXJzaW9uKShzZXJ2ZXIpKSk7XG4gICAgfVxuICAgIC8qIFRoaXMgaXMgaGVyZSBmb3IgdGhlIHB1cnBvc2Ugb2YgdW5pdCB0ZXN0aW5nIHRoZSBmaW5hbCBjb21tYW5kIHRoYXQgZ2V0cyBzZW50LiAqL1xuICAgIGdlbmVyYXRlQ29tbWFuZCh3aXJlVmVyc2lvbikge1xuICAgICAgICBjb25zdCBjb21tYW5kID0ge1xuICAgICAgICAgICAgbGlzdENvbGxlY3Rpb25zOiAxLFxuICAgICAgICAgICAgZmlsdGVyOiB0aGlzLmZpbHRlcixcbiAgICAgICAgICAgIGN1cnNvcjogdGhpcy5iYXRjaFNpemUgPyB7IGJhdGNoU2l6ZTogdGhpcy5iYXRjaFNpemUgfSA6IHt9LFxuICAgICAgICAgICAgbmFtZU9ubHk6IHRoaXMubmFtZU9ubHksXG4gICAgICAgICAgICBhdXRob3JpemVkQ29sbGVjdGlvbnM6IHRoaXMuYXV0aG9yaXplZENvbGxlY3Rpb25zXG4gICAgICAgIH07XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAod2lyZVZlcnNpb24gPj0gOSAmJiB0aGlzLm9wdGlvbnMuY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb21tYW5kLmNvbW1lbnQgPSB0aGlzLm9wdGlvbnMuY29tbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tbWFuZDtcbiAgICB9XG59XG5leHBvcnRzLkxpc3RDb2xsZWN0aW9uc09wZXJhdGlvbiA9IExpc3RDb2xsZWN0aW9uc09wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShMaXN0Q29sbGVjdGlvbnNPcGVyYXRpb24sIFtcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT04sXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRSxcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuQ1VSU09SX0NSRUFUSU5HXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpc3RfY29sbGVjdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiTGlzdENvbGxlY3Rpb25zT3BlcmF0aW9uIiwidXRpbHNfMSIsInJlcXVpcmUiLCJjb21tYW5kXzEiLCJvcGVyYXRpb25fMSIsIkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImRiIiwiZmlsdGVyIiwib3B0aW9ucyIsIndyaXRlQ29uY2VybiIsIm5hbWVPbmx5IiwiYXV0aG9yaXplZENvbGxlY3Rpb25zIiwiYmF0Y2hTaXplIiwiY29tbWFuZE5hbWUiLCJleGVjdXRlIiwic2VydmVyIiwic2Vzc2lvbiIsImV4ZWN1dGVDb21tYW5kIiwiZ2VuZXJhdGVDb21tYW5kIiwibWF4V2lyZVZlcnNpb24iLCJ3aXJlVmVyc2lvbiIsImNvbW1hbmQiLCJsaXN0Q29sbGVjdGlvbnMiLCJjdXJzb3IiLCJjb21tZW50IiwidW5kZWZpbmVkIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIlJFQURfT1BFUkFUSU9OIiwiUkVUUllBQkxFIiwiQ1VSU09SX0NSRUFUSU5HIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/list_collections.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/list_databases.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/list_databases.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ListDatabasesOperation = void 0;\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class ListDatabasesOperation extends command_1.CommandOperation {\n    constructor(db, options){\n        super(db, options);\n        this.options = options ?? {};\n        this.ns = new utils_1.MongoDBNamespace(\"admin\", \"$cmd\");\n    }\n    get commandName() {\n        return \"listDatabases\";\n    }\n    async execute(server, session) {\n        const cmd = {\n            listDatabases: 1\n        };\n        if (typeof this.options.nameOnly === \"boolean\") {\n            cmd.nameOnly = this.options.nameOnly;\n        }\n        if (this.options.filter) {\n            cmd.filter = this.options.filter;\n        }\n        if (typeof this.options.authorizedDatabases === \"boolean\") {\n            cmd.authorizedDatabases = this.options.authorizedDatabases;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if ((0, utils_1.maxWireVersion)(server) >= 9 && this.options.comment !== undefined) {\n            cmd.comment = this.options.comment;\n        }\n        return super.executeCommand(server, session, cmd);\n    }\n}\nexports.ListDatabasesOperation = ListDatabasesOperation;\n(0, operation_1.defineAspects)(ListDatabasesOperation, [\n    operation_1.Aspect.READ_OPERATION,\n    operation_1.Aspect.RETRYABLE\n]); //# sourceMappingURL=list_databases.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9saXN0X2RhdGFiYXNlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsOEJBQThCLEdBQUcsS0FBSztBQUN0QyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNRSxjQUFjRixtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsK0JBQStCRyxVQUFVRSxnQkFBZ0I7SUFDM0RDLFlBQVlDLEVBQUUsRUFBRUMsT0FBTyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0QsSUFBSUM7UUFDVixJQUFJLENBQUNBLE9BQU8sR0FBR0EsV0FBVyxDQUFDO1FBQzNCLElBQUksQ0FBQ0MsRUFBRSxHQUFHLElBQUlSLFFBQVFTLGdCQUFnQixDQUFDLFNBQVM7SUFDcEQ7SUFDQSxJQUFJQyxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsTUFBTUMsTUFBTTtZQUFFQyxlQUFlO1FBQUU7UUFDL0IsSUFBSSxPQUFPLElBQUksQ0FBQ1IsT0FBTyxDQUFDUyxRQUFRLEtBQUssV0FBVztZQUM1Q0YsSUFBSUUsUUFBUSxHQUFHLElBQUksQ0FBQ1QsT0FBTyxDQUFDUyxRQUFRO1FBQ3hDO1FBQ0EsSUFBSSxJQUFJLENBQUNULE9BQU8sQ0FBQ1UsTUFBTSxFQUFFO1lBQ3JCSCxJQUFJRyxNQUFNLEdBQUcsSUFBSSxDQUFDVixPQUFPLENBQUNVLE1BQU07UUFDcEM7UUFDQSxJQUFJLE9BQU8sSUFBSSxDQUFDVixPQUFPLENBQUNXLG1CQUFtQixLQUFLLFdBQVc7WUFDdkRKLElBQUlJLG1CQUFtQixHQUFHLElBQUksQ0FBQ1gsT0FBTyxDQUFDVyxtQkFBbUI7UUFDOUQ7UUFDQSxpRUFBaUU7UUFDakUsZ0RBQWdEO1FBQ2hELElBQUksQ0FBQyxHQUFHbEIsUUFBUW1CLGNBQWMsRUFBRVAsV0FBVyxLQUFLLElBQUksQ0FBQ0wsT0FBTyxDQUFDYSxPQUFPLEtBQUtDLFdBQVc7WUFDaEZQLElBQUlNLE9BQU8sR0FBRyxJQUFJLENBQUNiLE9BQU8sQ0FBQ2EsT0FBTztRQUN0QztRQUNBLE9BQU8sS0FBSyxDQUFDRSxlQUFlVixRQUFRQyxTQUFTQztJQUNqRDtBQUNKO0FBQ0FqQiw4QkFBOEIsR0FBR0U7QUFDaEMsSUFBR0ksWUFBWW9CLGFBQWEsRUFBRXhCLHdCQUF3QjtJQUFDSSxZQUFZcUIsTUFBTSxDQUFDQyxjQUFjO0lBQUV0QixZQUFZcUIsTUFBTSxDQUFDRSxTQUFTO0NBQUMsR0FDeEgsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL2xpc3RfZGF0YWJhc2VzLmpzPzMwZjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkxpc3REYXRhYmFzZXNPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgTGlzdERhdGFiYXNlc09wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihkYiwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihkYiwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHRoaXMubnMgPSBuZXcgdXRpbHNfMS5Nb25nb0RCTmFtZXNwYWNlKCdhZG1pbicsICckY21kJyk7XG4gICAgfVxuICAgIGdldCBjb21tYW5kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdsaXN0RGF0YWJhc2VzJztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgY21kID0geyBsaXN0RGF0YWJhc2VzOiAxIH07XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm5hbWVPbmx5ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGNtZC5uYW1lT25seSA9IHRoaXMub3B0aW9ucy5uYW1lT25seTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZpbHRlcikge1xuICAgICAgICAgICAgY21kLmZpbHRlciA9IHRoaXMub3B0aW9ucy5maWx0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuYXV0aG9yaXplZERhdGFiYXNlcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBjbWQuYXV0aG9yaXplZERhdGFiYXNlcyA9IHRoaXMub3B0aW9ucy5hdXRob3JpemVkRGF0YWJhc2VzO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAoKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHNlcnZlcikgPj0gOSAmJiB0aGlzLm9wdGlvbnMuY29tbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjbWQuY29tbWVudCA9IHRoaXMub3B0aW9ucy5jb21tZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5leGVjdXRlQ29tbWFuZChzZXJ2ZXIsIHNlc3Npb24sIGNtZCk7XG4gICAgfVxufVxuZXhwb3J0cy5MaXN0RGF0YWJhc2VzT3BlcmF0aW9uID0gTGlzdERhdGFiYXNlc09wZXJhdGlvbjtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShMaXN0RGF0YWJhc2VzT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LlJFQURfT1BFUkFUSU9OLCBvcGVyYXRpb25fMS5Bc3BlY3QuUkVUUllBQkxFXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXN0X2RhdGFiYXNlcy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJMaXN0RGF0YWJhc2VzT3BlcmF0aW9uIiwidXRpbHNfMSIsInJlcXVpcmUiLCJjb21tYW5kXzEiLCJvcGVyYXRpb25fMSIsIkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImRiIiwib3B0aW9ucyIsIm5zIiwiTW9uZ29EQk5hbWVzcGFjZSIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJjbWQiLCJsaXN0RGF0YWJhc2VzIiwibmFtZU9ubHkiLCJmaWx0ZXIiLCJhdXRob3JpemVkRGF0YWJhc2VzIiwibWF4V2lyZVZlcnNpb24iLCJjb21tZW50IiwidW5kZWZpbmVkIiwiZXhlY3V0ZUNvbW1hbmQiLCJkZWZpbmVBc3BlY3RzIiwiQXNwZWN0IiwiUkVBRF9PUEVSQVRJT04iLCJSRVRSWUFCTEUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/list_databases.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/operation.js":
/*!**********************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/operation.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.defineAspects = exports.AbstractOperation = exports.Aspect = void 0;\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nexports.Aspect = {\n    READ_OPERATION: Symbol(\"READ_OPERATION\"),\n    WRITE_OPERATION: Symbol(\"WRITE_OPERATION\"),\n    RETRYABLE: Symbol(\"RETRYABLE\"),\n    EXPLAINABLE: Symbol(\"EXPLAINABLE\"),\n    SKIP_COLLATION: Symbol(\"SKIP_COLLATION\"),\n    CURSOR_CREATING: Symbol(\"CURSOR_CREATING\"),\n    MUST_SELECT_SAME_SERVER: Symbol(\"MUST_SELECT_SAME_SERVER\")\n};\n/** @internal */ const kSession = Symbol(\"session\");\n/**\n * This class acts as a parent class for any operation and is responsible for setting this.options,\n * as well as setting and getting a session.\n * Additionally, this class implements `hasAspect`, which determines whether an operation has\n * a specific aspect.\n * @internal\n */ class AbstractOperation {\n    constructor(options = {}){\n        this.readPreference = this.hasAspect(exports.Aspect.WRITE_OPERATION) ? read_preference_1.ReadPreference.primary : read_preference_1.ReadPreference.fromOptions(options) ?? read_preference_1.ReadPreference.primary;\n        // Pull the BSON serialize options from the already-resolved options\n        this.bsonOptions = (0, bson_1.resolveBSONOptions)(options);\n        this[kSession] = options.session != null ? options.session : undefined;\n        this.options = options;\n        this.bypassPinningCheck = !!options.bypassPinningCheck;\n        this.trySecondaryWrite = false;\n    }\n    hasAspect(aspect) {\n        const ctor = this.constructor;\n        if (ctor.aspects == null) {\n            return false;\n        }\n        return ctor.aspects.has(aspect);\n    }\n    get session() {\n        return this[kSession];\n    }\n    clearSession() {\n        this[kSession] = undefined;\n    }\n    get canRetryRead() {\n        return true;\n    }\n    get canRetryWrite() {\n        return true;\n    }\n}\nexports.AbstractOperation = AbstractOperation;\nfunction defineAspects(operation, aspects) {\n    if (!Array.isArray(aspects) && !(aspects instanceof Set)) {\n        aspects = [\n            aspects\n        ];\n    }\n    aspects = new Set(aspects);\n    Object.defineProperty(operation, \"aspects\", {\n        value: aspects,\n        writable: false\n    });\n    return aspects;\n}\nexports.defineAspects = defineAspects; //# sourceMappingURL=operation.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9vcGVyYXRpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHFCQUFxQixHQUFHQSx5QkFBeUIsR0FBR0EsY0FBYyxHQUFHLEtBQUs7QUFDMUUsTUFBTUssU0FBU0MsbUJBQU9BLENBQUMseURBQVM7QUFDaEMsTUFBTUMsb0JBQW9CRCxtQkFBT0EsQ0FBQywrRUFBb0I7QUFDdEROLGNBQWMsR0FBRztJQUNiUSxnQkFBZ0JDLE9BQU87SUFDdkJDLGlCQUFpQkQsT0FBTztJQUN4QkUsV0FBV0YsT0FBTztJQUNsQkcsYUFBYUgsT0FBTztJQUNwQkksZ0JBQWdCSixPQUFPO0lBQ3ZCSyxpQkFBaUJMLE9BQU87SUFDeEJNLHlCQUF5Qk4sT0FBTztBQUNwQztBQUNBLGNBQWMsR0FDZCxNQUFNTyxXQUFXUCxPQUFPO0FBQ3hCOzs7Ozs7Q0FNQyxHQUNELE1BQU1OO0lBQ0ZjLFlBQVlDLFVBQVUsQ0FBQyxDQUFDLENBQUU7UUFDdEIsSUFBSSxDQUFDQyxjQUFjLEdBQUcsSUFBSSxDQUFDQyxTQUFTLENBQUNwQixRQUFRSSxNQUFNLENBQUNNLGVBQWUsSUFDN0RILGtCQUFrQmMsY0FBYyxDQUFDQyxPQUFPLEdBQ3hDZixrQkFBa0JjLGNBQWMsQ0FBQ0UsV0FBVyxDQUFDTCxZQUFZWCxrQkFBa0JjLGNBQWMsQ0FBQ0MsT0FBTztRQUN2RyxvRUFBb0U7UUFDcEUsSUFBSSxDQUFDRSxXQUFXLEdBQUcsQ0FBQyxHQUFHbkIsT0FBT29CLGtCQUFrQixFQUFFUDtRQUNsRCxJQUFJLENBQUNGLFNBQVMsR0FBR0UsUUFBUVEsT0FBTyxJQUFJLE9BQU9SLFFBQVFRLE9BQU8sR0FBR0M7UUFDN0QsSUFBSSxDQUFDVCxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDVSxrQkFBa0IsR0FBRyxDQUFDLENBQUNWLFFBQVFVLGtCQUFrQjtRQUN0RCxJQUFJLENBQUNDLGlCQUFpQixHQUFHO0lBQzdCO0lBQ0FULFVBQVVVLE1BQU0sRUFBRTtRQUNkLE1BQU1DLE9BQU8sSUFBSSxDQUFDZCxXQUFXO1FBQzdCLElBQUljLEtBQUtDLE9BQU8sSUFBSSxNQUFNO1lBQ3RCLE9BQU87UUFDWDtRQUNBLE9BQU9ELEtBQUtDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSDtJQUM1QjtJQUNBLElBQUlKLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQ1YsU0FBUztJQUN6QjtJQUNBa0IsZUFBZTtRQUNYLElBQUksQ0FBQ2xCLFNBQVMsR0FBR1c7SUFDckI7SUFDQSxJQUFJUSxlQUFlO1FBQ2YsT0FBTztJQUNYO0lBQ0EsSUFBSUMsZ0JBQWdCO1FBQ2hCLE9BQU87SUFDWDtBQUNKO0FBQ0FwQyx5QkFBeUIsR0FBR0c7QUFDNUIsU0FBU0QsY0FBY21DLFNBQVMsRUFBRUwsT0FBTztJQUNyQyxJQUFJLENBQUNNLE1BQU1DLE9BQU8sQ0FBQ1AsWUFBWSxDQUFFQSxDQUFBQSxtQkFBbUJRLEdBQUUsR0FBSTtRQUN0RFIsVUFBVTtZQUFDQTtTQUFRO0lBQ3ZCO0lBQ0FBLFVBQVUsSUFBSVEsSUFBSVI7SUFDbEJsQyxPQUFPQyxjQUFjLENBQUNzQyxXQUFXLFdBQVc7UUFDeENwQyxPQUFPK0I7UUFDUFMsVUFBVTtJQUNkO0lBQ0EsT0FBT1Q7QUFDWDtBQUNBaEMscUJBQXFCLEdBQUdFLGVBQ3hCLHFDQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9vcGVyYXRpb24uanM/NDdiOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmaW5lQXNwZWN0cyA9IGV4cG9ydHMuQWJzdHJhY3RPcGVyYXRpb24gPSBleHBvcnRzLkFzcGVjdCA9IHZvaWQgMDtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuLi9ic29uXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuZXhwb3J0cy5Bc3BlY3QgPSB7XG4gICAgUkVBRF9PUEVSQVRJT046IFN5bWJvbCgnUkVBRF9PUEVSQVRJT04nKSxcbiAgICBXUklURV9PUEVSQVRJT046IFN5bWJvbCgnV1JJVEVfT1BFUkFUSU9OJyksXG4gICAgUkVUUllBQkxFOiBTeW1ib2woJ1JFVFJZQUJMRScpLFxuICAgIEVYUExBSU5BQkxFOiBTeW1ib2woJ0VYUExBSU5BQkxFJyksXG4gICAgU0tJUF9DT0xMQVRJT046IFN5bWJvbCgnU0tJUF9DT0xMQVRJT04nKSxcbiAgICBDVVJTT1JfQ1JFQVRJTkc6IFN5bWJvbCgnQ1VSU09SX0NSRUFUSU5HJyksXG4gICAgTVVTVF9TRUxFQ1RfU0FNRV9TRVJWRVI6IFN5bWJvbCgnTVVTVF9TRUxFQ1RfU0FNRV9TRVJWRVInKVxufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXNzaW9uID0gU3ltYm9sKCdzZXNzaW9uJyk7XG4vKipcbiAqIFRoaXMgY2xhc3MgYWN0cyBhcyBhIHBhcmVudCBjbGFzcyBmb3IgYW55IG9wZXJhdGlvbiBhbmQgaXMgcmVzcG9uc2libGUgZm9yIHNldHRpbmcgdGhpcy5vcHRpb25zLFxuICogYXMgd2VsbCBhcyBzZXR0aW5nIGFuZCBnZXR0aW5nIGEgc2Vzc2lvbi5cbiAqIEFkZGl0aW9uYWxseSwgdGhpcyBjbGFzcyBpbXBsZW1lbnRzIGBoYXNBc3BlY3RgLCB3aGljaCBkZXRlcm1pbmVzIHdoZXRoZXIgYW4gb3BlcmF0aW9uIGhhc1xuICogYSBzcGVjaWZpYyBhc3BlY3QuXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQWJzdHJhY3RPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLnJlYWRQcmVmZXJlbmNlID0gdGhpcy5oYXNBc3BlY3QoZXhwb3J0cy5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OKVxuICAgICAgICAgICAgPyByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5XG4gICAgICAgICAgICA6IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21PcHRpb25zKG9wdGlvbnMpID8/IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnk7XG4gICAgICAgIC8vIFB1bGwgdGhlIEJTT04gc2VyaWFsaXplIG9wdGlvbnMgZnJvbSB0aGUgYWxyZWFkeS1yZXNvbHZlZCBvcHRpb25zXG4gICAgICAgIHRoaXMuYnNvbk9wdGlvbnMgPSAoMCwgYnNvbl8xLnJlc29sdmVCU09OT3B0aW9ucykob3B0aW9ucyk7XG4gICAgICAgIHRoaXNba1Nlc3Npb25dID0gb3B0aW9ucy5zZXNzaW9uICE9IG51bGwgPyBvcHRpb25zLnNlc3Npb24gOiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuYnlwYXNzUGlubmluZ0NoZWNrID0gISFvcHRpb25zLmJ5cGFzc1Bpbm5pbmdDaGVjaztcbiAgICAgICAgdGhpcy50cnlTZWNvbmRhcnlXcml0ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBoYXNBc3BlY3QoYXNwZWN0KSB7XG4gICAgICAgIGNvbnN0IGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBpZiAoY3Rvci5hc3BlY3RzID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3Rvci5hc3BlY3RzLmhhcyhhc3BlY3QpO1xuICAgIH1cbiAgICBnZXQgc2Vzc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNba1Nlc3Npb25dO1xuICAgIH1cbiAgICBjbGVhclNlc3Npb24oKSB7XG4gICAgICAgIHRoaXNba1Nlc3Npb25dID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgY2FuUmV0cnlSZWFkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IGNhblJldHJ5V3JpdGUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydHMuQWJzdHJhY3RPcGVyYXRpb24gPSBBYnN0cmFjdE9wZXJhdGlvbjtcbmZ1bmN0aW9uIGRlZmluZUFzcGVjdHMob3BlcmF0aW9uLCBhc3BlY3RzKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFzcGVjdHMpICYmICEoYXNwZWN0cyBpbnN0YW5jZW9mIFNldCkpIHtcbiAgICAgICAgYXNwZWN0cyA9IFthc3BlY3RzXTtcbiAgICB9XG4gICAgYXNwZWN0cyA9IG5ldyBTZXQoYXNwZWN0cyk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wZXJhdGlvbiwgJ2FzcGVjdHMnLCB7XG4gICAgICAgIHZhbHVlOiBhc3BlY3RzLFxuICAgICAgICB3cml0YWJsZTogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gYXNwZWN0cztcbn1cbmV4cG9ydHMuZGVmaW5lQXNwZWN0cyA9IGRlZmluZUFzcGVjdHM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVyYXRpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmaW5lQXNwZWN0cyIsIkFic3RyYWN0T3BlcmF0aW9uIiwiQXNwZWN0IiwiYnNvbl8xIiwicmVxdWlyZSIsInJlYWRfcHJlZmVyZW5jZV8xIiwiUkVBRF9PUEVSQVRJT04iLCJTeW1ib2wiLCJXUklURV9PUEVSQVRJT04iLCJSRVRSWUFCTEUiLCJFWFBMQUlOQUJMRSIsIlNLSVBfQ09MTEFUSU9OIiwiQ1VSU09SX0NSRUFUSU5HIiwiTVVTVF9TRUxFQ1RfU0FNRV9TRVJWRVIiLCJrU2Vzc2lvbiIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInJlYWRQcmVmZXJlbmNlIiwiaGFzQXNwZWN0IiwiUmVhZFByZWZlcmVuY2UiLCJwcmltYXJ5IiwiZnJvbU9wdGlvbnMiLCJic29uT3B0aW9ucyIsInJlc29sdmVCU09OT3B0aW9ucyIsInNlc3Npb24iLCJ1bmRlZmluZWQiLCJieXBhc3NQaW5uaW5nQ2hlY2siLCJ0cnlTZWNvbmRhcnlXcml0ZSIsImFzcGVjdCIsImN0b3IiLCJhc3BlY3RzIiwiaGFzIiwiY2xlYXJTZXNzaW9uIiwiY2FuUmV0cnlSZWFkIiwiY2FuUmV0cnlXcml0ZSIsIm9wZXJhdGlvbiIsIkFycmF5IiwiaXNBcnJheSIsIlNldCIsIndyaXRhYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/operation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/options_operation.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/options_operation.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.OptionsOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class OptionsOperation extends operation_1.AbstractOperation {\n    constructor(collection, options){\n        super(options);\n        this.options = options;\n        this.collection = collection;\n    }\n    get commandName() {\n        return \"listCollections\";\n    }\n    async execute(server, session) {\n        const coll = this.collection;\n        const [collection] = await coll.s.db.listCollections({\n            name: coll.collectionName\n        }, {\n            ...this.options,\n            nameOnly: false,\n            readPreference: this.readPreference,\n            session\n        }).toArray();\n        if (collection == null || collection.options == null) {\n            throw new error_1.MongoAPIError(`collection ${coll.namespace} not found`);\n        }\n        return collection.options;\n    }\n}\nexports.OptionsOperation = OptionsOperation; //# sourceMappingURL=options_operation.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9vcHRpb25zX29wZXJhdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYseUJBQXlCRyxZQUFZQyxpQkFBaUI7SUFDeERDLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxDQUFFO1FBQzdCLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNELFVBQVUsR0FBR0E7SUFDdEI7SUFDQSxJQUFJRSxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsTUFBTUMsT0FBTyxJQUFJLENBQUNOLFVBQVU7UUFDNUIsTUFBTSxDQUFDQSxXQUFXLEdBQUcsTUFBTU0sS0FBS0MsQ0FBQyxDQUFDQyxFQUFFLENBQy9CQyxlQUFlLENBQUM7WUFBRUMsTUFBTUosS0FBS0ssY0FBYztRQUFDLEdBQUc7WUFBRSxHQUFHLElBQUksQ0FBQ1YsT0FBTztZQUFFVyxVQUFVO1lBQU9DLGdCQUFnQixJQUFJLENBQUNBLGNBQWM7WUFBRVI7UUFBUSxHQUNoSVMsT0FBTztRQUNaLElBQUlkLGNBQWMsUUFBUUEsV0FBV0MsT0FBTyxJQUFJLE1BQU07WUFDbEQsTUFBTSxJQUFJTixRQUFRb0IsYUFBYSxDQUFDLENBQUMsV0FBVyxFQUFFVCxLQUFLVSxTQUFTLENBQUMsVUFBVSxDQUFDO1FBQzVFO1FBQ0EsT0FBT2hCLFdBQVdDLE9BQU87SUFDN0I7QUFDSjtBQUNBVCx3QkFBd0IsR0FBR0Usa0JBQzNCLDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9vcHRpb25zX29wZXJhdGlvbi5qcz83MmY2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5PcHRpb25zT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgT3B0aW9uc09wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnbGlzdENvbGxlY3Rpb25zJztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgY29sbCA9IHRoaXMuY29sbGVjdGlvbjtcbiAgICAgICAgY29uc3QgW2NvbGxlY3Rpb25dID0gYXdhaXQgY29sbC5zLmRiXG4gICAgICAgICAgICAubGlzdENvbGxlY3Rpb25zKHsgbmFtZTogY29sbC5jb2xsZWN0aW9uTmFtZSB9LCB7IC4uLnRoaXMub3B0aW9ucywgbmFtZU9ubHk6IGZhbHNlLCByZWFkUHJlZmVyZW5jZTogdGhpcy5yZWFkUHJlZmVyZW5jZSwgc2Vzc2lvbiB9KVxuICAgICAgICAgICAgLnRvQXJyYXkoKTtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24gPT0gbnVsbCB8fCBjb2xsZWN0aW9uLm9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcihgY29sbGVjdGlvbiAke2NvbGwubmFtZXNwYWNlfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5vcHRpb25zO1xuICAgIH1cbn1cbmV4cG9ydHMuT3B0aW9uc09wZXJhdGlvbiA9IE9wdGlvbnNPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcHRpb25zX29wZXJhdGlvbi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJPcHRpb25zT3BlcmF0aW9uIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJvcGVyYXRpb25fMSIsIkFic3RyYWN0T3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwib3B0aW9ucyIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJjb2xsIiwicyIsImRiIiwibGlzdENvbGxlY3Rpb25zIiwibmFtZSIsImNvbGxlY3Rpb25OYW1lIiwibmFtZU9ubHkiLCJyZWFkUHJlZmVyZW5jZSIsInRvQXJyYXkiLCJNb25nb0FQSUVycm9yIiwibmFtZXNwYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/options_operation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/profiling_level.js":
/*!****************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/profiling_level.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ProfilingLevelOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\n/** @internal */ class ProfilingLevelOperation extends command_1.CommandOperation {\n    constructor(db, options){\n        super(db, options);\n        this.options = options;\n    }\n    get commandName() {\n        return \"profile\";\n    }\n    async execute(server, session) {\n        const doc = await super.executeCommand(server, session, {\n            profile: -1\n        });\n        if (doc.ok === 1) {\n            const was = doc.was;\n            if (was === 0) return \"off\";\n            if (was === 1) return \"slow_only\";\n            if (was === 2) return \"all\";\n            throw new error_1.MongoUnexpectedServerResponseError(`Illegal profiling level value ${was}`);\n        } else {\n            throw new error_1.MongoUnexpectedServerResponseError(\"Error with profile command\");\n        }\n    }\n}\nexports.ProfilingLevelOperation = ProfilingLevelOperation; //# sourceMappingURL=profiling_level.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9wcm9maWxpbmdfbGV2ZWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELCtCQUErQixHQUFHLEtBQUs7QUFDdkMsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsWUFBWUQsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsY0FBYyxHQUNkLE1BQU1GLGdDQUFnQ0csVUFBVUMsZ0JBQWdCO0lBQzVEQyxZQUFZQyxFQUFFLEVBQUVDLE9BQU8sQ0FBRTtRQUNyQixLQUFLLENBQUNELElBQUlDO1FBQ1YsSUFBSSxDQUFDQSxPQUFPLEdBQUdBO0lBQ25CO0lBQ0EsSUFBSUMsY0FBYztRQUNkLE9BQU87SUFDWDtJQUNBLE1BQU1DLFFBQVFDLE1BQU0sRUFBRUMsT0FBTyxFQUFFO1FBQzNCLE1BQU1DLE1BQU0sTUFBTSxLQUFLLENBQUNDLGVBQWVILFFBQVFDLFNBQVM7WUFBRUcsU0FBUyxDQUFDO1FBQUU7UUFDdEUsSUFBSUYsSUFBSUcsRUFBRSxLQUFLLEdBQUc7WUFDZCxNQUFNQyxNQUFNSixJQUFJSSxHQUFHO1lBQ25CLElBQUlBLFFBQVEsR0FDUixPQUFPO1lBQ1gsSUFBSUEsUUFBUSxHQUNSLE9BQU87WUFDWCxJQUFJQSxRQUFRLEdBQ1IsT0FBTztZQUNYLE1BQU0sSUFBSWYsUUFBUWdCLGtDQUFrQyxDQUFDLENBQUMsOEJBQThCLEVBQUVELElBQUksQ0FBQztRQUMvRixPQUNLO1lBQ0QsTUFBTSxJQUFJZixRQUFRZ0Isa0NBQWtDLENBQUM7UUFDekQ7SUFDSjtBQUNKO0FBQ0FuQiwrQkFBK0IsR0FBR0UseUJBQ2xDLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9wcm9maWxpbmdfbGV2ZWwuanM/MmU5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgY29tbWFuZF8xID0gcmVxdWlyZShcIi4vY29tbWFuZFwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFByb2ZpbGluZ0xldmVsT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGRiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ3Byb2ZpbGUnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBkb2MgPSBhd2FpdCBzdXBlci5leGVjdXRlQ29tbWFuZChzZXJ2ZXIsIHNlc3Npb24sIHsgcHJvZmlsZTogLTEgfSk7XG4gICAgICAgIGlmIChkb2Mub2sgPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHdhcyA9IGRvYy53YXM7XG4gICAgICAgICAgICBpZiAod2FzID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiAnb2ZmJztcbiAgICAgICAgICAgIGlmICh3YXMgPT09IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuICdzbG93X29ubHknO1xuICAgICAgICAgICAgaWYgKHdhcyA9PT0gMilcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FsbCc7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yKGBJbGxlZ2FsIHByb2ZpbGluZyBsZXZlbCB2YWx1ZSAke3dhc31gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IoJ0Vycm9yIHdpdGggcHJvZmlsZSBjb21tYW5kJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLlByb2ZpbGluZ0xldmVsT3BlcmF0aW9uID0gUHJvZmlsaW5nTGV2ZWxPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9maWxpbmdfbGV2ZWwuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsImNvbW1hbmRfMSIsIkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImRiIiwib3B0aW9ucyIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJkb2MiLCJleGVjdXRlQ29tbWFuZCIsInByb2ZpbGUiLCJvayIsIndhcyIsIk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/profiling_level.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/remove_user.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/remove_user.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RemoveUserOperation = void 0;\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class RemoveUserOperation extends command_1.CommandOperation {\n    constructor(db, username, options){\n        super(db, options);\n        this.options = options;\n        this.username = username;\n    }\n    get commandName() {\n        return \"dropUser\";\n    }\n    async execute(server, session) {\n        await super.executeCommand(server, session, {\n            dropUser: this.username\n        });\n        return true;\n    }\n}\nexports.RemoveUserOperation = RemoveUserOperation;\n(0, operation_1.defineAspects)(RemoveUserOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=remove_user.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9yZW1vdmVfdXNlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkJBQTJCLEdBQUcsS0FBSztBQUNuQyxNQUFNRyxZQUFZQyxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYsNEJBQTRCQyxVQUFVRyxnQkFBZ0I7SUFDeERDLFlBQVlDLEVBQUUsRUFBRUMsUUFBUSxFQUFFQyxPQUFPLENBQUU7UUFDL0IsS0FBSyxDQUFDRixJQUFJRTtRQUNWLElBQUksQ0FBQ0EsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0QsUUFBUSxHQUFHQTtJQUNwQjtJQUNBLElBQUlFLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixNQUFNLEtBQUssQ0FBQ0MsZUFBZUYsUUFBUUMsU0FBUztZQUFFRSxVQUFVLElBQUksQ0FBQ1AsUUFBUTtRQUFDO1FBQ3RFLE9BQU87SUFDWDtBQUNKO0FBQ0FULDJCQUEyQixHQUFHRTtBQUM3QixJQUFHRyxZQUFZWSxhQUFhLEVBQUVmLHFCQUFxQjtJQUFDRyxZQUFZYSxNQUFNLENBQUNDLGVBQWU7Q0FBQyxHQUN4Rix1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvcmVtb3ZlX3VzZXIuanM/OThjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUmVtb3ZlVXNlck9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFJlbW92ZVVzZXJPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZGIsIHVzZXJuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGRiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnZHJvcFVzZXInO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBhd2FpdCBzdXBlci5leGVjdXRlQ29tbWFuZChzZXJ2ZXIsIHNlc3Npb24sIHsgZHJvcFVzZXI6IHRoaXMudXNlcm5hbWUgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydHMuUmVtb3ZlVXNlck9wZXJhdGlvbiA9IFJlbW92ZVVzZXJPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoUmVtb3ZlVXNlck9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT05dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbW92ZV91c2VyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlJlbW92ZVVzZXJPcGVyYXRpb24iLCJjb21tYW5kXzEiLCJyZXF1aXJlIiwib3BlcmF0aW9uXzEiLCJDb21tYW5kT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJkYiIsInVzZXJuYW1lIiwib3B0aW9ucyIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJleGVjdXRlQ29tbWFuZCIsImRyb3BVc2VyIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIldSSVRFX09QRVJBVElPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/remove_user.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/rename.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/rename.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RenameOperation = void 0;\nconst collection_1 = __webpack_require__(/*! ../collection */ \"(ssr)/./node_modules/mongodb/lib/collection.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class RenameOperation extends command_1.CommandOperation {\n    constructor(collection, newName, options){\n        super(collection, options);\n        this.collection = collection;\n        this.newName = newName;\n        this.options = options;\n        this.ns = new utils_1.MongoDBNamespace(\"admin\", \"$cmd\");\n    }\n    get commandName() {\n        return \"renameCollection\";\n    }\n    async execute(server, session) {\n        // Build the command\n        const renameCollection = this.collection.namespace;\n        const toCollection = this.collection.s.namespace.withCollection(this.newName).toString();\n        const dropTarget = typeof this.options.dropTarget === \"boolean\" ? this.options.dropTarget : false;\n        const command = {\n            renameCollection: renameCollection,\n            to: toCollection,\n            dropTarget: dropTarget\n        };\n        await super.executeCommand(server, session, command);\n        return new collection_1.Collection(this.collection.s.db, this.newName, this.collection.s.options);\n    }\n}\nexports.RenameOperation = RenameOperation;\n(0, operation_1.defineAspects)(RenameOperation, [\n    operation_1.Aspect.WRITE_OPERATION\n]); //# sourceMappingURL=rename.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9yZW5hbWUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVCQUF1QixHQUFHLEtBQUs7QUFDL0IsTUFBTUcsZUFBZUMsbUJBQU9BLENBQUMscUVBQWU7QUFDNUMsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUUsWUFBWUYsbUJBQU9BLENBQUMseUVBQVc7QUFDckMsTUFBTUcsY0FBY0gsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLHdCQUF3QkksVUFBVUUsZ0JBQWdCO0lBQ3BEQyxZQUFZQyxVQUFVLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxDQUFFO1FBQ3RDLEtBQUssQ0FBQ0YsWUFBWUU7UUFDbEIsSUFBSSxDQUFDRixVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0MsRUFBRSxHQUFHLElBQUlSLFFBQVFTLGdCQUFnQixDQUFDLFNBQVM7SUFDcEQ7SUFDQSxJQUFJQyxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0Isb0JBQW9CO1FBQ3BCLE1BQU1DLG1CQUFtQixJQUFJLENBQUNULFVBQVUsQ0FBQ1UsU0FBUztRQUNsRCxNQUFNQyxlQUFlLElBQUksQ0FBQ1gsVUFBVSxDQUFDWSxDQUFDLENBQUNGLFNBQVMsQ0FBQ0csY0FBYyxDQUFDLElBQUksQ0FBQ1osT0FBTyxFQUFFYSxRQUFRO1FBQ3RGLE1BQU1DLGFBQWEsT0FBTyxJQUFJLENBQUNiLE9BQU8sQ0FBQ2EsVUFBVSxLQUFLLFlBQVksSUFBSSxDQUFDYixPQUFPLENBQUNhLFVBQVUsR0FBRztRQUM1RixNQUFNQyxVQUFVO1lBQ1pQLGtCQUFrQkE7WUFDbEJRLElBQUlOO1lBQ0pJLFlBQVlBO1FBQ2hCO1FBQ0EsTUFBTSxLQUFLLENBQUNHLGVBQWVYLFFBQVFDLFNBQVNRO1FBQzVDLE9BQU8sSUFBSXZCLGFBQWEwQixVQUFVLENBQUMsSUFBSSxDQUFDbkIsVUFBVSxDQUFDWSxDQUFDLENBQUNRLEVBQUUsRUFBRSxJQUFJLENBQUNuQixPQUFPLEVBQUUsSUFBSSxDQUFDRCxVQUFVLENBQUNZLENBQUMsQ0FBQ1YsT0FBTztJQUNwRztBQUNKO0FBQ0FaLHVCQUF1QixHQUFHRTtBQUN6QixJQUFHSyxZQUFZd0IsYUFBYSxFQUFFN0IsaUJBQWlCO0lBQUNLLFlBQVl5QixNQUFNLENBQUNDLGVBQWU7Q0FBQyxHQUNwRixrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvcmVuYW1lLmpzPzA2MjgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJlbmFtZU9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGNvbGxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuLi9jb2xsZWN0aW9uXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFJlbmFtZU9wZXJhdGlvbiBleHRlbmRzIGNvbW1hbmRfMS5Db21tYW5kT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBuZXdOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLm5ld05hbWUgPSBuZXdOYW1lO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLm5zID0gbmV3IHV0aWxzXzEuTW9uZ29EQk5hbWVzcGFjZSgnYWRtaW4nLCAnJGNtZCcpO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAncmVuYW1lQ29sbGVjdGlvbic7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIC8vIEJ1aWxkIHRoZSBjb21tYW5kXG4gICAgICAgIGNvbnN0IHJlbmFtZUNvbGxlY3Rpb24gPSB0aGlzLmNvbGxlY3Rpb24ubmFtZXNwYWNlO1xuICAgICAgICBjb25zdCB0b0NvbGxlY3Rpb24gPSB0aGlzLmNvbGxlY3Rpb24ucy5uYW1lc3BhY2Uud2l0aENvbGxlY3Rpb24odGhpcy5uZXdOYW1lKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBkcm9wVGFyZ2V0ID0gdHlwZW9mIHRoaXMub3B0aW9ucy5kcm9wVGFyZ2V0ID09PSAnYm9vbGVhbicgPyB0aGlzLm9wdGlvbnMuZHJvcFRhcmdldCA6IGZhbHNlO1xuICAgICAgICBjb25zdCBjb21tYW5kID0ge1xuICAgICAgICAgICAgcmVuYW1lQ29sbGVjdGlvbjogcmVuYW1lQ29sbGVjdGlvbixcbiAgICAgICAgICAgIHRvOiB0b0NvbGxlY3Rpb24sXG4gICAgICAgICAgICBkcm9wVGFyZ2V0OiBkcm9wVGFyZ2V0XG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHN1cGVyLmV4ZWN1dGVDb21tYW5kKHNlcnZlciwgc2Vzc2lvbiwgY29tbWFuZCk7XG4gICAgICAgIHJldHVybiBuZXcgY29sbGVjdGlvbl8xLkNvbGxlY3Rpb24odGhpcy5jb2xsZWN0aW9uLnMuZGIsIHRoaXMubmV3TmFtZSwgdGhpcy5jb2xsZWN0aW9uLnMub3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0cy5SZW5hbWVPcGVyYXRpb24gPSBSZW5hbWVPcGVyYXRpb247XG4oMCwgb3BlcmF0aW9uXzEuZGVmaW5lQXNwZWN0cykoUmVuYW1lT3BlcmF0aW9uLCBbb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVuYW1lLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlJlbmFtZU9wZXJhdGlvbiIsImNvbGxlY3Rpb25fMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwiY29tbWFuZF8xIiwib3BlcmF0aW9uXzEiLCJDb21tYW5kT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwibmV3TmFtZSIsIm9wdGlvbnMiLCJucyIsIk1vbmdvREJOYW1lc3BhY2UiLCJjb21tYW5kTmFtZSIsImV4ZWN1dGUiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwicmVuYW1lQ29sbGVjdGlvbiIsIm5hbWVzcGFjZSIsInRvQ29sbGVjdGlvbiIsInMiLCJ3aXRoQ29sbGVjdGlvbiIsInRvU3RyaW5nIiwiZHJvcFRhcmdldCIsImNvbW1hbmQiLCJ0byIsImV4ZWN1dGVDb21tYW5kIiwiQ29sbGVjdGlvbiIsImRiIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIldSSVRFX09QRVJBVElPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/rename.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/run_command.js":
/*!************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/run_command.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RunAdminCommandOperation = exports.RunCommandOperation = void 0;\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class RunCommandOperation extends operation_1.AbstractOperation {\n    constructor(parent, command, options){\n        super(options);\n        this.command = command;\n        this.options = options;\n        this.ns = parent.s.namespace.withCollection(\"$cmd\");\n    }\n    get commandName() {\n        return \"runCommand\";\n    }\n    async execute(server, session) {\n        this.server = server;\n        return server.command(this.ns, this.command, {\n            ...this.options,\n            readPreference: this.readPreference,\n            session\n        });\n    }\n}\nexports.RunCommandOperation = RunCommandOperation;\nclass RunAdminCommandOperation extends operation_1.AbstractOperation {\n    constructor(command, options){\n        super(options);\n        this.command = command;\n        this.options = options;\n        this.ns = new utils_1.MongoDBNamespace(\"admin\", \"$cmd\");\n    }\n    get commandName() {\n        return \"runCommand\";\n    }\n    async execute(server, session) {\n        this.server = server;\n        return server.command(this.ns, this.command, {\n            ...this.options,\n            readPreference: this.readPreference,\n            session\n        });\n    }\n}\nexports.RunAdminCommandOperation = RunAdminCommandOperation; //# sourceMappingURL=run_command.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9ydW5fY29tbWFuZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZ0NBQWdDLEdBQUdBLDJCQUEyQixHQUFHLEtBQUs7QUFDdEUsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUMsY0FBY0QsbUJBQU9BLENBQUMsNkVBQWE7QUFDekMsY0FBYyxHQUNkLE1BQU1GLDRCQUE0QkcsWUFBWUMsaUJBQWlCO0lBQzNEQyxZQUFZQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxDQUFFO1FBQ2xDLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNELE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLEVBQUUsR0FBR0gsT0FBT0ksQ0FBQyxDQUFDQyxTQUFTLENBQUNDLGNBQWMsQ0FBQztJQUNoRDtJQUNBLElBQUlDLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixJQUFJLENBQUNELE1BQU0sR0FBR0E7UUFDZCxPQUFPQSxPQUFPUixPQUFPLENBQUMsSUFBSSxDQUFDRSxFQUFFLEVBQUUsSUFBSSxDQUFDRixPQUFPLEVBQUU7WUFDekMsR0FBRyxJQUFJLENBQUNDLE9BQU87WUFDZlMsZ0JBQWdCLElBQUksQ0FBQ0EsY0FBYztZQUNuQ0Q7UUFDSjtJQUNKO0FBQ0o7QUFDQW5CLDJCQUEyQixHQUFHRztBQUM5QixNQUFNRCxpQ0FBaUNJLFlBQVlDLGlCQUFpQjtJQUNoRUMsWUFBWUUsT0FBTyxFQUFFQyxPQUFPLENBQUU7UUFDMUIsS0FBSyxDQUFDQTtRQUNOLElBQUksQ0FBQ0QsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0MsRUFBRSxHQUFHLElBQUlSLFFBQVFpQixnQkFBZ0IsQ0FBQyxTQUFTO0lBQ3BEO0lBQ0EsSUFBSUwsY0FBYztRQUNkLE9BQU87SUFDWDtJQUNBLE1BQU1DLFFBQVFDLE1BQU0sRUFBRUMsT0FBTyxFQUFFO1FBQzNCLElBQUksQ0FBQ0QsTUFBTSxHQUFHQTtRQUNkLE9BQU9BLE9BQU9SLE9BQU8sQ0FBQyxJQUFJLENBQUNFLEVBQUUsRUFBRSxJQUFJLENBQUNGLE9BQU8sRUFBRTtZQUN6QyxHQUFHLElBQUksQ0FBQ0MsT0FBTztZQUNmUyxnQkFBZ0IsSUFBSSxDQUFDQSxjQUFjO1lBQ25DRDtRQUNKO0lBQ0o7QUFDSjtBQUNBbkIsZ0NBQWdDLEdBQUdFLDBCQUNuQyx1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvcnVuX2NvbW1hbmQuanM/NmZmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uID0gZXhwb3J0cy5SdW5Db21tYW5kT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgUnVuQ29tbWFuZE9wZXJhdGlvbiBleHRlbmRzIG9wZXJhdGlvbl8xLkFic3RyYWN0T3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGNvbW1hbmQsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuY29tbWFuZCA9IGNvbW1hbmQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMubnMgPSBwYXJlbnQucy5uYW1lc3BhY2Uud2l0aENvbGxlY3Rpb24oJyRjbWQnKTtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ3J1bkNvbW1hbmQnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICB0aGlzLnNlcnZlciA9IHNlcnZlcjtcbiAgICAgICAgcmV0dXJuIHNlcnZlci5jb21tYW5kKHRoaXMubnMsIHRoaXMuY29tbWFuZCwge1xuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHRoaXMucmVhZFByZWZlcmVuY2UsXG4gICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuUnVuQ29tbWFuZE9wZXJhdGlvbiA9IFJ1bkNvbW1hbmRPcGVyYXRpb247XG5jbGFzcyBSdW5BZG1pbkNvbW1hbmRPcGVyYXRpb24gZXh0ZW5kcyBvcGVyYXRpb25fMS5BYnN0cmFjdE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29tbWFuZCwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5jb21tYW5kID0gY29tbWFuZDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5ucyA9IG5ldyB1dGlsc18xLk1vbmdvREJOYW1lc3BhY2UoJ2FkbWluJywgJyRjbWQnKTtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ3J1bkNvbW1hbmQnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICB0aGlzLnNlcnZlciA9IHNlcnZlcjtcbiAgICAgICAgcmV0dXJuIHNlcnZlci5jb21tYW5kKHRoaXMubnMsIHRoaXMuY29tbWFuZCwge1xuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHRoaXMucmVhZFByZWZlcmVuY2UsXG4gICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uID0gUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuX2NvbW1hbmQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uIiwiUnVuQ29tbWFuZE9wZXJhdGlvbiIsInV0aWxzXzEiLCJyZXF1aXJlIiwib3BlcmF0aW9uXzEiLCJBYnN0cmFjdE9wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwicGFyZW50IiwiY29tbWFuZCIsIm9wdGlvbnMiLCJucyIsInMiLCJuYW1lc3BhY2UiLCJ3aXRoQ29sbGVjdGlvbiIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJyZWFkUHJlZmVyZW5jZSIsIk1vbmdvREJOYW1lc3BhY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/run_command.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/search_indexes/create.js":
/*!**********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/search_indexes/create.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.CreateSearchIndexesOperation = void 0;\nconst operation_1 = __webpack_require__(/*! ../operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class CreateSearchIndexesOperation extends operation_1.AbstractOperation {\n    constructor(collection, descriptions){\n        super();\n        this.collection = collection;\n        this.descriptions = descriptions;\n    }\n    get commandName() {\n        return \"createSearchIndexes\";\n    }\n    async execute(server, session) {\n        const namespace = this.collection.fullNamespace;\n        const command = {\n            createSearchIndexes: namespace.collection,\n            indexes: this.descriptions\n        };\n        const res = await server.command(namespace, command, {\n            session\n        });\n        const indexesCreated = res?.indexesCreated ?? [];\n        return indexesCreated.map(({ name })=>name);\n    }\n}\nexports.CreateSearchIndexesOperation = CreateSearchIndexesOperation; //# sourceMappingURL=create.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zZWFyY2hfaW5kZXhlcy9jcmVhdGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9DQUFvQyxHQUFHLEtBQUs7QUFDNUMsTUFBTUcsY0FBY0MsbUJBQU9BLENBQUMsOEVBQWM7QUFDMUMsY0FBYyxHQUNkLE1BQU1GLHFDQUFxQ0MsWUFBWUUsaUJBQWlCO0lBQ3BFQyxZQUFZQyxVQUFVLEVBQUVDLFlBQVksQ0FBRTtRQUNsQyxLQUFLO1FBQ0wsSUFBSSxDQUFDRCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsWUFBWSxHQUFHQTtJQUN4QjtJQUNBLElBQUlDLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixNQUFNQyxZQUFZLElBQUksQ0FBQ04sVUFBVSxDQUFDTyxhQUFhO1FBQy9DLE1BQU1DLFVBQVU7WUFDWkMscUJBQXFCSCxVQUFVTixVQUFVO1lBQ3pDVSxTQUFTLElBQUksQ0FBQ1QsWUFBWTtRQUM5QjtRQUNBLE1BQU1VLE1BQU0sTUFBTVAsT0FBT0ksT0FBTyxDQUFDRixXQUFXRSxTQUFTO1lBQUVIO1FBQVE7UUFDL0QsTUFBTU8saUJBQWlCRCxLQUFLQyxrQkFBa0IsRUFBRTtRQUNoRCxPQUFPQSxlQUFlQyxHQUFHLENBQUMsQ0FBQyxFQUFFQyxJQUFJLEVBQUUsR0FBS0E7SUFDNUM7QUFDSjtBQUNBckIsb0NBQW9DLEdBQUdFLDhCQUN2QyxrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvc2VhcmNoX2luZGV4ZXMvY3JlYXRlLmpzP2RjMDAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNyZWF0ZVNlYXJjaEluZGV4ZXNPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBvcGVyYXRpb25fMSA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBDcmVhdGVTZWFyY2hJbmRleGVzT3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIGRlc2NyaXB0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9ucyA9IGRlc2NyaXB0aW9ucztcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2NyZWF0ZVNlYXJjaEluZGV4ZXMnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSB0aGlzLmNvbGxlY3Rpb24uZnVsbE5hbWVzcGFjZTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHtcbiAgICAgICAgICAgIGNyZWF0ZVNlYXJjaEluZGV4ZXM6IG5hbWVzcGFjZS5jb2xsZWN0aW9uLFxuICAgICAgICAgICAgaW5kZXhlczogdGhpcy5kZXNjcmlwdGlvbnNcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgc2VydmVyLmNvbW1hbmQobmFtZXNwYWNlLCBjb21tYW5kLCB7IHNlc3Npb24gfSk7XG4gICAgICAgIGNvbnN0IGluZGV4ZXNDcmVhdGVkID0gcmVzPy5pbmRleGVzQ3JlYXRlZCA/PyBbXTtcbiAgICAgICAgcmV0dXJuIGluZGV4ZXNDcmVhdGVkLm1hcCgoeyBuYW1lIH0pID0+IG5hbWUpO1xuICAgIH1cbn1cbmV4cG9ydHMuQ3JlYXRlU2VhcmNoSW5kZXhlc09wZXJhdGlvbiA9IENyZWF0ZVNlYXJjaEluZGV4ZXNPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ3JlYXRlU2VhcmNoSW5kZXhlc09wZXJhdGlvbiIsIm9wZXJhdGlvbl8xIiwicmVxdWlyZSIsIkFic3RyYWN0T3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJjb2xsZWN0aW9uIiwiZGVzY3JpcHRpb25zIiwiY29tbWFuZE5hbWUiLCJleGVjdXRlIiwic2VydmVyIiwic2Vzc2lvbiIsIm5hbWVzcGFjZSIsImZ1bGxOYW1lc3BhY2UiLCJjb21tYW5kIiwiY3JlYXRlU2VhcmNoSW5kZXhlcyIsImluZGV4ZXMiLCJyZXMiLCJpbmRleGVzQ3JlYXRlZCIsIm1hcCIsIm5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/search_indexes/create.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/search_indexes/drop.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/search_indexes/drop.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DropSearchIndexOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst operation_1 = __webpack_require__(/*! ../operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class DropSearchIndexOperation extends operation_1.AbstractOperation {\n    constructor(collection, name){\n        super();\n        this.collection = collection;\n        this.name = name;\n    }\n    get commandName() {\n        return \"dropSearchIndex\";\n    }\n    async execute(server, session) {\n        const namespace = this.collection.fullNamespace;\n        const command = {\n            dropSearchIndex: namespace.collection\n        };\n        if (typeof this.name === \"string\") {\n            command.name = this.name;\n        }\n        try {\n            await server.command(namespace, command, {\n                session\n            });\n        } catch (error) {\n            const isNamespaceNotFoundError = error instanceof error_1.MongoServerError && error.code === error_1.MONGODB_ERROR_CODES.NamespaceNotFound;\n            if (!isNamespaceNotFoundError) {\n                throw error;\n            }\n        }\n    }\n}\nexports.DropSearchIndexOperation = DropSearchIndexOperation; //# sourceMappingURL=drop.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zZWFyY2hfaW5kZXhlcy9kcm9wLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxnQ0FBZ0MsR0FBRyxLQUFLO0FBQ3hDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDhEQUFhO0FBQ3JDLE1BQU1DLGNBQWNELG1CQUFPQSxDQUFDLDhFQUFjO0FBQzFDLGNBQWMsR0FDZCxNQUFNRixpQ0FBaUNHLFlBQVlDLGlCQUFpQjtJQUNoRUMsWUFBWUMsVUFBVSxFQUFFQyxJQUFJLENBQUU7UUFDMUIsS0FBSztRQUNMLElBQUksQ0FBQ0QsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLElBQUksR0FBR0E7SUFDaEI7SUFDQSxJQUFJQyxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsTUFBTUMsWUFBWSxJQUFJLENBQUNOLFVBQVUsQ0FBQ08sYUFBYTtRQUMvQyxNQUFNQyxVQUFVO1lBQ1pDLGlCQUFpQkgsVUFBVU4sVUFBVTtRQUN6QztRQUNBLElBQUksT0FBTyxJQUFJLENBQUNDLElBQUksS0FBSyxVQUFVO1lBQy9CTyxRQUFRUCxJQUFJLEdBQUcsSUFBSSxDQUFDQSxJQUFJO1FBQzVCO1FBQ0EsSUFBSTtZQUNBLE1BQU1HLE9BQU9JLE9BQU8sQ0FBQ0YsV0FBV0UsU0FBUztnQkFBRUg7WUFBUTtRQUN2RCxFQUNBLE9BQU9LLE9BQU87WUFDVixNQUFNQywyQkFBMkJELGlCQUFpQmYsUUFBUWlCLGdCQUFnQixJQUFJRixNQUFNRyxJQUFJLEtBQUtsQixRQUFRbUIsbUJBQW1CLENBQUNDLGlCQUFpQjtZQUMxSSxJQUFJLENBQUNKLDBCQUEwQjtnQkFDM0IsTUFBTUQ7WUFDVjtRQUNKO0lBQ0o7QUFDSjtBQUNBbEIsZ0NBQWdDLEdBQUdFLDBCQUNuQyxnQ0FBZ0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvc2VhcmNoX2luZGV4ZXMvZHJvcC5qcz9lYjkxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Ecm9wU2VhcmNoSW5kZXhPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uLy4uL2Vycm9yXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vb3BlcmF0aW9uXCIpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgRHJvcFNlYXJjaEluZGV4T3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG5hbWUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2Ryb3BTZWFyY2hJbmRleCc7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IHRoaXMuY29sbGVjdGlvbi5mdWxsTmFtZXNwYWNlO1xuICAgICAgICBjb25zdCBjb21tYW5kID0ge1xuICAgICAgICAgICAgZHJvcFNlYXJjaEluZGV4OiBuYW1lc3BhY2UuY29sbGVjdGlvblxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMubmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbW1hbmQubmFtZSA9IHRoaXMubmFtZTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgc2VydmVyLmNvbW1hbmQobmFtZXNwYWNlLCBjb21tYW5kLCB7IHNlc3Npb24gfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBpc05hbWVzcGFjZU5vdEZvdW5kRXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvciAmJiBlcnJvci5jb2RlID09PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuTmFtZXNwYWNlTm90Rm91bmQ7XG4gICAgICAgICAgICBpZiAoIWlzTmFtZXNwYWNlTm90Rm91bmRFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5Ecm9wU2VhcmNoSW5kZXhPcGVyYXRpb24gPSBEcm9wU2VhcmNoSW5kZXhPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kcm9wLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkRyb3BTZWFyY2hJbmRleE9wZXJhdGlvbiIsImVycm9yXzEiLCJyZXF1aXJlIiwib3BlcmF0aW9uXzEiLCJBYnN0cmFjdE9wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsIm5hbWUiLCJjb21tYW5kTmFtZSIsImV4ZWN1dGUiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwibmFtZXNwYWNlIiwiZnVsbE5hbWVzcGFjZSIsImNvbW1hbmQiLCJkcm9wU2VhcmNoSW5kZXgiLCJlcnJvciIsImlzTmFtZXNwYWNlTm90Rm91bmRFcnJvciIsIk1vbmdvU2VydmVyRXJyb3IiLCJjb2RlIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIk5hbWVzcGFjZU5vdEZvdW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/search_indexes/drop.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/search_indexes/update.js":
/*!**********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/search_indexes/update.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.UpdateSearchIndexOperation = void 0;\nconst operation_1 = __webpack_require__(/*! ../operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class UpdateSearchIndexOperation extends operation_1.AbstractOperation {\n    constructor(collection, name, definition){\n        super();\n        this.collection = collection;\n        this.name = name;\n        this.definition = definition;\n    }\n    get commandName() {\n        return \"updateSearchIndex\";\n    }\n    async execute(server, session) {\n        const namespace = this.collection.fullNamespace;\n        const command = {\n            updateSearchIndex: namespace.collection,\n            name: this.name,\n            definition: this.definition\n        };\n        await server.command(namespace, command, {\n            session\n        });\n        return;\n    }\n}\nexports.UpdateSearchIndexOperation = UpdateSearchIndexOperation; //# sourceMappingURL=update.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zZWFyY2hfaW5kZXhlcy91cGRhdGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGtDQUFrQyxHQUFHLEtBQUs7QUFDMUMsTUFBTUcsY0FBY0MsbUJBQU9BLENBQUMsOEVBQWM7QUFDMUMsY0FBYyxHQUNkLE1BQU1GLG1DQUFtQ0MsWUFBWUUsaUJBQWlCO0lBQ2xFQyxZQUFZQyxVQUFVLEVBQUVDLElBQUksRUFBRUMsVUFBVSxDQUFFO1FBQ3RDLEtBQUs7UUFDTCxJQUFJLENBQUNGLFVBQVUsR0FBR0E7UUFDbEIsSUFBSSxDQUFDQyxJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDQyxVQUFVLEdBQUdBO0lBQ3RCO0lBQ0EsSUFBSUMsY0FBYztRQUNkLE9BQU87SUFDWDtJQUNBLE1BQU1DLFFBQVFDLE1BQU0sRUFBRUMsT0FBTyxFQUFFO1FBQzNCLE1BQU1DLFlBQVksSUFBSSxDQUFDUCxVQUFVLENBQUNRLGFBQWE7UUFDL0MsTUFBTUMsVUFBVTtZQUNaQyxtQkFBbUJILFVBQVVQLFVBQVU7WUFDdkNDLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZDLFlBQVksSUFBSSxDQUFDQSxVQUFVO1FBQy9CO1FBQ0EsTUFBTUcsT0FBT0ksT0FBTyxDQUFDRixXQUFXRSxTQUFTO1lBQUVIO1FBQVE7UUFDbkQ7SUFDSjtBQUNKO0FBQ0FiLGtDQUFrQyxHQUFHRSw0QkFDckMsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL3NlYXJjaF9pbmRleGVzL3VwZGF0ZS5qcz9mMzYxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5VcGRhdGVTZWFyY2hJbmRleE9wZXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IG9wZXJhdGlvbl8xID0gcmVxdWlyZShcIi4uL29wZXJhdGlvblwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFVwZGF0ZVNlYXJjaEluZGV4T3BlcmF0aW9uIGV4dGVuZHMgb3BlcmF0aW9uXzEuQWJzdHJhY3RPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG5hbWUsIGRlZmluaXRpb24pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9uID0gZGVmaW5pdGlvbjtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ3VwZGF0ZVNlYXJjaEluZGV4JztcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlID0gdGhpcy5jb2xsZWN0aW9uLmZ1bGxOYW1lc3BhY2U7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB7XG4gICAgICAgICAgICB1cGRhdGVTZWFyY2hJbmRleDogbmFtZXNwYWNlLmNvbGxlY3Rpb24sXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBkZWZpbml0aW9uOiB0aGlzLmRlZmluaXRpb25cbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgc2VydmVyLmNvbW1hbmQobmFtZXNwYWNlLCBjb21tYW5kLCB7IHNlc3Npb24gfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG5leHBvcnRzLlVwZGF0ZVNlYXJjaEluZGV4T3BlcmF0aW9uID0gVXBkYXRlU2VhcmNoSW5kZXhPcGVyYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiVXBkYXRlU2VhcmNoSW5kZXhPcGVyYXRpb24iLCJvcGVyYXRpb25fMSIsInJlcXVpcmUiLCJBYnN0cmFjdE9wZXJhdGlvbiIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsIm5hbWUiLCJkZWZpbml0aW9uIiwiY29tbWFuZE5hbWUiLCJleGVjdXRlIiwic2VydmVyIiwic2Vzc2lvbiIsIm5hbWVzcGFjZSIsImZ1bGxOYW1lc3BhY2UiLCJjb21tYW5kIiwidXBkYXRlU2VhcmNoSW5kZXgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/search_indexes/update.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/set_profiling_level.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/set_profiling_level.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SetProfilingLevelOperation = exports.ProfilingLevel = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst levelValues = new Set([\n    \"off\",\n    \"slow_only\",\n    \"all\"\n]);\n/** @public */ exports.ProfilingLevel = Object.freeze({\n    off: \"off\",\n    slowOnly: \"slow_only\",\n    all: \"all\"\n});\n/** @internal */ class SetProfilingLevelOperation extends command_1.CommandOperation {\n    constructor(db, level, options){\n        super(db, options);\n        this.options = options;\n        switch(level){\n            case exports.ProfilingLevel.off:\n                this.profile = 0;\n                break;\n            case exports.ProfilingLevel.slowOnly:\n                this.profile = 1;\n                break;\n            case exports.ProfilingLevel.all:\n                this.profile = 2;\n                break;\n            default:\n                this.profile = 0;\n                break;\n        }\n        this.level = level;\n    }\n    get commandName() {\n        return \"profile\";\n    }\n    async execute(server, session) {\n        const level = this.level;\n        if (!levelValues.has(level)) {\n            throw new error_1.MongoInvalidArgumentError(`Profiling level must be one of \"${(0, utils_1.enumToString)(exports.ProfilingLevel)}\"`);\n        }\n        // TODO(NODE-3483): Determine error to put here\n        await super.executeCommand(server, session, {\n            profile: this.profile\n        });\n        return level;\n    }\n}\nexports.SetProfilingLevelOperation = SetProfilingLevelOperation; //# sourceMappingURL=set_profiling_level.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zZXRfcHJvZmlsaW5nX2xldmVsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQ0FBa0MsR0FBR0Esc0JBQXNCLEdBQUcsS0FBSztBQUNuRSxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxZQUFZRixtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNRyxjQUFjLElBQUlDLElBQUk7SUFBQztJQUFPO0lBQWE7Q0FBTTtBQUN2RCxZQUFZLEdBQ1pULHNCQUFzQixHQUFHRixPQUFPWSxNQUFNLENBQUM7SUFDbkNDLEtBQUs7SUFDTEMsVUFBVTtJQUNWQyxLQUFLO0FBQ1Q7QUFDQSxjQUFjLEdBQ2QsTUFBTVgsbUNBQW1DSyxVQUFVTyxnQkFBZ0I7SUFDL0RDLFlBQVlDLEVBQUUsRUFBRUMsS0FBSyxFQUFFQyxPQUFPLENBQUU7UUFDNUIsS0FBSyxDQUFDRixJQUFJRTtRQUNWLElBQUksQ0FBQ0EsT0FBTyxHQUFHQTtRQUNmLE9BQVFEO1lBQ0osS0FBS2pCLFFBQVFHLGNBQWMsQ0FBQ1EsR0FBRztnQkFDM0IsSUFBSSxDQUFDUSxPQUFPLEdBQUc7Z0JBQ2Y7WUFDSixLQUFLbkIsUUFBUUcsY0FBYyxDQUFDUyxRQUFRO2dCQUNoQyxJQUFJLENBQUNPLE9BQU8sR0FBRztnQkFDZjtZQUNKLEtBQUtuQixRQUFRRyxjQUFjLENBQUNVLEdBQUc7Z0JBQzNCLElBQUksQ0FBQ00sT0FBTyxHQUFHO2dCQUNmO1lBQ0o7Z0JBQ0ksSUFBSSxDQUFDQSxPQUFPLEdBQUc7Z0JBQ2Y7UUFDUjtRQUNBLElBQUksQ0FBQ0YsS0FBSyxHQUFHQTtJQUNqQjtJQUNBLElBQUlHLGNBQWM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNQyxRQUFRQyxNQUFNLEVBQUVDLE9BQU8sRUFBRTtRQUMzQixNQUFNTixRQUFRLElBQUksQ0FBQ0EsS0FBSztRQUN4QixJQUFJLENBQUNULFlBQVlnQixHQUFHLENBQUNQLFFBQVE7WUFDekIsTUFBTSxJQUFJYixRQUFRcUIseUJBQXlCLENBQUMsQ0FBQyxnQ0FBZ0MsRUFBRSxDQUFDLEdBQUduQixRQUFRb0IsWUFBWSxFQUFFMUIsUUFBUUcsY0FBYyxFQUFFLENBQUMsQ0FBQztRQUN2STtRQUNBLCtDQUErQztRQUMvQyxNQUFNLEtBQUssQ0FBQ3dCLGVBQWVMLFFBQVFDLFNBQVM7WUFBRUosU0FBUyxJQUFJLENBQUNBLE9BQU87UUFBQztRQUNwRSxPQUFPRjtJQUNYO0FBQ0o7QUFDQWpCLGtDQUFrQyxHQUFHRSw0QkFDckMsK0NBQStDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL3NldF9wcm9maWxpbmdfbGV2ZWwuanM/YWRjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU2V0UHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24gPSBleHBvcnRzLlByb2ZpbGluZ0xldmVsID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3QgbGV2ZWxWYWx1ZXMgPSBuZXcgU2V0KFsnb2ZmJywgJ3Nsb3dfb25seScsICdhbGwnXSk7XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5Qcm9maWxpbmdMZXZlbCA9IE9iamVjdC5mcmVlemUoe1xuICAgIG9mZjogJ29mZicsXG4gICAgc2xvd09ubHk6ICdzbG93X29ubHknLFxuICAgIGFsbDogJ2FsbCdcbn0pO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgU2V0UHJvZmlsaW5nTGV2ZWxPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZGIsIGxldmVsLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGRiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgc3dpdGNoIChsZXZlbCkge1xuICAgICAgICAgICAgY2FzZSBleHBvcnRzLlByb2ZpbGluZ0xldmVsLm9mZjpcbiAgICAgICAgICAgICAgICB0aGlzLnByb2ZpbGUgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBleHBvcnRzLlByb2ZpbGluZ0xldmVsLnNsb3dPbmx5OlxuICAgICAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGV4cG9ydHMuUHJvZmlsaW5nTGV2ZWwuYWxsOlxuICAgICAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAncHJvZmlsZSc7XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IGxldmVsID0gdGhpcy5sZXZlbDtcbiAgICAgICAgaWYgKCFsZXZlbFZhbHVlcy5oYXMobGV2ZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBQcm9maWxpbmcgbGV2ZWwgbXVzdCBiZSBvbmUgb2YgXCIkeygwLCB1dGlsc18xLmVudW1Ub1N0cmluZykoZXhwb3J0cy5Qcm9maWxpbmdMZXZlbCl9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IERldGVybWluZSBlcnJvciB0byBwdXQgaGVyZVxuICAgICAgICBhd2FpdCBzdXBlci5leGVjdXRlQ29tbWFuZChzZXJ2ZXIsIHNlc3Npb24sIHsgcHJvZmlsZTogdGhpcy5wcm9maWxlIH0pO1xuICAgICAgICByZXR1cm4gbGV2ZWw7XG4gICAgfVxufVxuZXhwb3J0cy5TZXRQcm9maWxpbmdMZXZlbE9wZXJhdGlvbiA9IFNldFByb2ZpbGluZ0xldmVsT3BlcmF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0X3Byb2ZpbGluZ19sZXZlbC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTZXRQcm9maWxpbmdMZXZlbE9wZXJhdGlvbiIsIlByb2ZpbGluZ0xldmVsIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwiY29tbWFuZF8xIiwibGV2ZWxWYWx1ZXMiLCJTZXQiLCJmcmVlemUiLCJvZmYiLCJzbG93T25seSIsImFsbCIsIkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImRiIiwibGV2ZWwiLCJvcHRpb25zIiwicHJvZmlsZSIsImNvbW1hbmROYW1lIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJoYXMiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiZW51bVRvU3RyaW5nIiwiZXhlY3V0ZUNvbW1hbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/set_profiling_level.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/stats.js":
/*!******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/stats.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DbStatsOperation = void 0;\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/** @internal */ class DbStatsOperation extends command_1.CommandOperation {\n    constructor(db, options){\n        super(db, options);\n        this.options = options;\n    }\n    get commandName() {\n        return \"dbStats\";\n    }\n    async execute(server, session) {\n        const command = {\n            dbStats: true\n        };\n        if (this.options.scale != null) {\n            command.scale = this.options.scale;\n        }\n        return super.executeCommand(server, session, command);\n    }\n}\nexports.DbStatsOperation = DbStatsOperation;\n(0, operation_1.defineAspects)(DbStatsOperation, [\n    operation_1.Aspect.READ_OPERATION\n]); //# sourceMappingURL=stats.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy9zdGF0cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUcsS0FBSztBQUNoQyxNQUFNRyxZQUFZQyxtQkFBT0EsQ0FBQyx5RUFBVztBQUNyQyxNQUFNQyxjQUFjRCxtQkFBT0EsQ0FBQyw2RUFBYTtBQUN6QyxjQUFjLEdBQ2QsTUFBTUYseUJBQXlCQyxVQUFVRyxnQkFBZ0I7SUFDckRDLFlBQVlDLEVBQUUsRUFBRUMsT0FBTyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0QsSUFBSUM7UUFDVixJQUFJLENBQUNBLE9BQU8sR0FBR0E7SUFDbkI7SUFDQSxJQUFJQyxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsTUFBTUMsVUFBVTtZQUFFQyxTQUFTO1FBQUs7UUFDaEMsSUFBSSxJQUFJLENBQUNOLE9BQU8sQ0FBQ08sS0FBSyxJQUFJLE1BQU07WUFDNUJGLFFBQVFFLEtBQUssR0FBRyxJQUFJLENBQUNQLE9BQU8sQ0FBQ08sS0FBSztRQUN0QztRQUNBLE9BQU8sS0FBSyxDQUFDQyxlQUFlTCxRQUFRQyxTQUFTQztJQUNqRDtBQUNKO0FBQ0FkLHdCQUF3QixHQUFHRTtBQUMxQixJQUFHRyxZQUFZYSxhQUFhLEVBQUVoQixrQkFBa0I7SUFBQ0csWUFBWWMsTUFBTSxDQUFDQyxjQUFjO0NBQUMsR0FDcEYsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL3N0YXRzLmpzPzQ0MDEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRiU3RhdHNPcGVyYXRpb24gPSB2b2lkIDA7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBEYlN0YXRzT3BlcmF0aW9uIGV4dGVuZHMgY29tbWFuZF8xLkNvbW1hbmRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGRiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2RiU3RhdHMnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBjb21tYW5kID0geyBkYlN0YXRzOiB0cnVlIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2NhbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29tbWFuZC5zY2FsZSA9IHRoaXMub3B0aW9ucy5zY2FsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZUNvbW1hbmQoc2VydmVyLCBzZXNzaW9uLCBjb21tYW5kKTtcbiAgICB9XG59XG5leHBvcnRzLkRiU3RhdHNPcGVyYXRpb24gPSBEYlN0YXRzT3BlcmF0aW9uO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKERiU3RhdHNPcGVyYXRpb24sIFtvcGVyYXRpb25fMS5Bc3BlY3QuUkVBRF9PUEVSQVRJT05dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkRiU3RhdHNPcGVyYXRpb24iLCJjb21tYW5kXzEiLCJyZXF1aXJlIiwib3BlcmF0aW9uXzEiLCJDb21tYW5kT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJkYiIsIm9wdGlvbnMiLCJjb21tYW5kTmFtZSIsImV4ZWN1dGUiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiY29tbWFuZCIsImRiU3RhdHMiLCJzY2FsZSIsImV4ZWN1dGVDb21tYW5kIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIlJFQURfT1BFUkFUSU9OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/stats.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/update.js":
/*!*******************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/update.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.makeUpdateStatement = exports.ReplaceOneOperation = exports.UpdateManyOperation = exports.UpdateOneOperation = exports.UpdateOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\nconst operation_1 = __webpack_require__(/*! ./operation */ \"(ssr)/./node_modules/mongodb/lib/operations/operation.js\");\n/**\n * @internal\n * UpdateOperation is used in bulk write, while UpdateOneOperation and UpdateManyOperation are only used in the collections API\n */ class UpdateOperation extends command_1.CommandOperation {\n    constructor(ns, statements, options){\n        super(undefined, options);\n        this.options = options;\n        this.ns = ns;\n        this.statements = statements;\n    }\n    get commandName() {\n        return \"update\";\n    }\n    get canRetryWrite() {\n        if (super.canRetryWrite === false) {\n            return false;\n        }\n        return this.statements.every((op)=>op.multi == null || op.multi === false);\n    }\n    async execute(server, session) {\n        const options = this.options ?? {};\n        const ordered = typeof options.ordered === \"boolean\" ? options.ordered : true;\n        const command = {\n            update: this.ns.collection,\n            updates: this.statements,\n            ordered\n        };\n        if (typeof options.bypassDocumentValidation === \"boolean\") {\n            command.bypassDocumentValidation = options.bypassDocumentValidation;\n        }\n        if (options.let) {\n            command.let = options.let;\n        }\n        // we check for undefined specifically here to allow falsy values\n        // eslint-disable-next-line no-restricted-syntax\n        if (options.comment !== undefined) {\n            command.comment = options.comment;\n        }\n        const unacknowledgedWrite = this.writeConcern && this.writeConcern.w === 0;\n        if (unacknowledgedWrite) {\n            if (this.statements.find((o)=>o.hint)) {\n                // TODO(NODE-3541): fix error for hint with unacknowledged writes\n                throw new error_1.MongoCompatibilityError(`hint is not supported with unacknowledged writes`);\n            }\n        }\n        return super.executeCommand(server, session, command);\n    }\n}\nexports.UpdateOperation = UpdateOperation;\n/** @internal */ class UpdateOneOperation extends UpdateOperation {\n    constructor(collection, filter, update, options){\n        super(collection.s.namespace, [\n            makeUpdateStatement(filter, update, {\n                ...options,\n                multi: false\n            })\n        ], options);\n        if (!(0, utils_1.hasAtomicOperators)(update)) {\n            throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n        }\n    }\n    async execute(server, session) {\n        const res = await super.execute(server, session);\n        if (this.explain != null) return res;\n        if (res.code) throw new error_1.MongoServerError(res);\n        if (res.writeErrors) throw new error_1.MongoServerError(res.writeErrors[0]);\n        return {\n            acknowledged: this.writeConcern?.w !== 0,\n            modifiedCount: res.nModified ?? res.n,\n            upsertedId: Array.isArray(res.upserted) && res.upserted.length > 0 ? res.upserted[0]._id : null,\n            upsertedCount: Array.isArray(res.upserted) && res.upserted.length ? res.upserted.length : 0,\n            matchedCount: Array.isArray(res.upserted) && res.upserted.length > 0 ? 0 : res.n\n        };\n    }\n}\nexports.UpdateOneOperation = UpdateOneOperation;\n/** @internal */ class UpdateManyOperation extends UpdateOperation {\n    constructor(collection, filter, update, options){\n        super(collection.s.namespace, [\n            makeUpdateStatement(filter, update, {\n                ...options,\n                multi: true\n            })\n        ], options);\n        if (!(0, utils_1.hasAtomicOperators)(update)) {\n            throw new error_1.MongoInvalidArgumentError(\"Update document requires atomic operators\");\n        }\n    }\n    async execute(server, session) {\n        const res = await super.execute(server, session);\n        if (this.explain != null) return res;\n        if (res.code) throw new error_1.MongoServerError(res);\n        if (res.writeErrors) throw new error_1.MongoServerError(res.writeErrors[0]);\n        return {\n            acknowledged: this.writeConcern?.w !== 0,\n            modifiedCount: res.nModified ?? res.n,\n            upsertedId: Array.isArray(res.upserted) && res.upserted.length > 0 ? res.upserted[0]._id : null,\n            upsertedCount: Array.isArray(res.upserted) && res.upserted.length ? res.upserted.length : 0,\n            matchedCount: Array.isArray(res.upserted) && res.upserted.length > 0 ? 0 : res.n\n        };\n    }\n}\nexports.UpdateManyOperation = UpdateManyOperation;\n/** @internal */ class ReplaceOneOperation extends UpdateOperation {\n    constructor(collection, filter, replacement, options){\n        super(collection.s.namespace, [\n            makeUpdateStatement(filter, replacement, {\n                ...options,\n                multi: false\n            })\n        ], options);\n        if ((0, utils_1.hasAtomicOperators)(replacement)) {\n            throw new error_1.MongoInvalidArgumentError(\"Replacement document must not contain atomic operators\");\n        }\n    }\n    async execute(server, session) {\n        const res = await super.execute(server, session);\n        if (this.explain != null) return res;\n        if (res.code) throw new error_1.MongoServerError(res);\n        if (res.writeErrors) throw new error_1.MongoServerError(res.writeErrors[0]);\n        return {\n            acknowledged: this.writeConcern?.w !== 0,\n            modifiedCount: res.nModified ?? res.n,\n            upsertedId: Array.isArray(res.upserted) && res.upserted.length > 0 ? res.upserted[0]._id : null,\n            upsertedCount: Array.isArray(res.upserted) && res.upserted.length ? res.upserted.length : 0,\n            matchedCount: Array.isArray(res.upserted) && res.upserted.length > 0 ? 0 : res.n\n        };\n    }\n}\nexports.ReplaceOneOperation = ReplaceOneOperation;\nfunction makeUpdateStatement(filter, update, options) {\n    if (filter == null || typeof filter !== \"object\") {\n        throw new error_1.MongoInvalidArgumentError(\"Selector must be a valid JavaScript object\");\n    }\n    if (update == null || typeof update !== \"object\") {\n        throw new error_1.MongoInvalidArgumentError(\"Document must be a valid JavaScript object\");\n    }\n    const op = {\n        q: filter,\n        u: update\n    };\n    if (typeof options.upsert === \"boolean\") {\n        op.upsert = options.upsert;\n    }\n    if (options.multi) {\n        op.multi = options.multi;\n    }\n    if (options.hint) {\n        op.hint = options.hint;\n    }\n    if (options.arrayFilters) {\n        op.arrayFilters = options.arrayFilters;\n    }\n    if (options.collation) {\n        op.collation = options.collation;\n    }\n    return op;\n}\nexports.makeUpdateStatement = makeUpdateStatement;\n(0, operation_1.defineAspects)(UpdateOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.SKIP_COLLATION\n]);\n(0, operation_1.defineAspects)(UpdateOneOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.SKIP_COLLATION\n]);\n(0, operation_1.defineAspects)(UpdateManyOperation, [\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.EXPLAINABLE,\n    operation_1.Aspect.SKIP_COLLATION\n]);\n(0, operation_1.defineAspects)(ReplaceOneOperation, [\n    operation_1.Aspect.RETRYABLE,\n    operation_1.Aspect.WRITE_OPERATION,\n    operation_1.Aspect.SKIP_COLLATION\n]); //# sourceMappingURL=update.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy91cGRhdGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDJCQUEyQixHQUFHQSwyQkFBMkIsR0FBR0EsMkJBQTJCLEdBQUdBLDBCQUEwQixHQUFHQSx1QkFBdUIsR0FBRyxLQUFLO0FBQ3RKLE1BQU1PLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1FLFlBQVlGLG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLE1BQU1HLGNBQWNILG1CQUFPQSxDQUFDLDZFQUFhO0FBQ3pDOzs7Q0FHQyxHQUNELE1BQU1GLHdCQUF3QkksVUFBVUUsZ0JBQWdCO0lBQ3BEQyxZQUFZQyxFQUFFLEVBQUVDLFVBQVUsRUFBRUMsT0FBTyxDQUFFO1FBQ2pDLEtBQUssQ0FBQ0MsV0FBV0Q7UUFDakIsSUFBSSxDQUFDQSxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDRixFQUFFLEdBQUdBO1FBQ1YsSUFBSSxDQUFDQyxVQUFVLEdBQUdBO0lBQ3RCO0lBQ0EsSUFBSUcsY0FBYztRQUNkLE9BQU87SUFDWDtJQUNBLElBQUlDLGdCQUFnQjtRQUNoQixJQUFJLEtBQUssQ0FBQ0Esa0JBQWtCLE9BQU87WUFDL0IsT0FBTztRQUNYO1FBQ0EsT0FBTyxJQUFJLENBQUNKLFVBQVUsQ0FBQ0ssS0FBSyxDQUFDQyxDQUFBQSxLQUFNQSxHQUFHQyxLQUFLLElBQUksUUFBUUQsR0FBR0MsS0FBSyxLQUFLO0lBQ3hFO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsTUFBTVQsVUFBVSxJQUFJLENBQUNBLE9BQU8sSUFBSSxDQUFDO1FBQ2pDLE1BQU1VLFVBQVUsT0FBT1YsUUFBUVUsT0FBTyxLQUFLLFlBQVlWLFFBQVFVLE9BQU8sR0FBRztRQUN6RSxN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Q0FBQ0csY0FBYztDQUFDO0FBQ3BKLElBQUcvRCxZQUFZMkQsYUFBYSxFQUFFakUsb0JBQW9CO0lBQy9DTSxZQUFZNEQsTUFBTSxDQUFDQyxTQUFTO0lBQzVCN0QsWUFBWTRELE1BQU0sQ0FBQ0UsZUFBZTtJQUNsQzlELFlBQVk0RCxNQUFNLENBQUNJLFdBQVc7SUFDOUJoRSxZQUFZNEQsTUFBTSxDQUFDRyxjQUFjO0NBQ3BDO0FBQ0EsSUFBRy9ELFlBQVkyRCxhQUFhLEVBQUVsRSxxQkFBcUI7SUFDaERPLFlBQVk0RCxNQUFNLENBQUNFLGVBQWU7SUFDbEM5RCxZQUFZNEQsTUFBTSxDQUFDSSxXQUFXO0lBQzlCaEUsWUFBWTRELE1BQU0sQ0FBQ0csY0FBYztDQUNwQztBQUNBLElBQUcvRCxZQUFZMkQsYUFBYSxFQUFFbkUscUJBQXFCO0lBQ2hEUSxZQUFZNEQsTUFBTSxDQUFDQyxTQUFTO0lBQzVCN0QsWUFBWTRELE1BQU0sQ0FBQ0UsZUFBZTtJQUNsQzlELFlBQVk0RCxNQUFNLENBQUNHLGNBQWM7Q0FDcEMsR0FDRCxrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL29wZXJhdGlvbnMvdXBkYXRlLmpzP2YwN2UiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1ha2VVcGRhdGVTdGF0ZW1lbnQgPSBleHBvcnRzLlJlcGxhY2VPbmVPcGVyYXRpb24gPSBleHBvcnRzLlVwZGF0ZU1hbnlPcGVyYXRpb24gPSBleHBvcnRzLlVwZGF0ZU9uZU9wZXJhdGlvbiA9IGV4cG9ydHMuVXBkYXRlT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tYW5kXzEgPSByZXF1aXJlKFwiLi9jb21tYW5kXCIpO1xuY29uc3Qgb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25cIik7XG4vKipcbiAqIEBpbnRlcm5hbFxuICogVXBkYXRlT3BlcmF0aW9uIGlzIHVzZWQgaW4gYnVsayB3cml0ZSwgd2hpbGUgVXBkYXRlT25lT3BlcmF0aW9uIGFuZCBVcGRhdGVNYW55T3BlcmF0aW9uIGFyZSBvbmx5IHVzZWQgaW4gdGhlIGNvbGxlY3Rpb25zIEFQSVxuICovXG5jbGFzcyBVcGRhdGVPcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IobnMsIHN0YXRlbWVudHMsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIodW5kZWZpbmVkLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5ucyA9IG5zO1xuICAgICAgICB0aGlzLnN0YXRlbWVudHMgPSBzdGF0ZW1lbnRzO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAndXBkYXRlJztcbiAgICB9XG4gICAgZ2V0IGNhblJldHJ5V3JpdGUoKSB7XG4gICAgICAgIGlmIChzdXBlci5jYW5SZXRyeVdyaXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlbWVudHMuZXZlcnkob3AgPT4gb3AubXVsdGkgPT0gbnVsbCB8fCBvcC5tdWx0aSA9PT0gZmFsc2UpO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zID8/IHt9O1xuICAgICAgICBjb25zdCBvcmRlcmVkID0gdHlwZW9mIG9wdGlvbnMub3JkZXJlZCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5vcmRlcmVkIDogdHJ1ZTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHtcbiAgICAgICAgICAgIHVwZGF0ZTogdGhpcy5ucy5jb2xsZWN0aW9uLFxuICAgICAgICAgICAgdXBkYXRlczogdGhpcy5zdGF0ZW1lbnRzLFxuICAgICAgICAgICAgb3JkZXJlZFxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uID0gb3B0aW9ucy5ieXBhc3NEb2N1bWVudFZhbGlkYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubGV0KSB7XG4gICAgICAgICAgICBjb21tYW5kLmxldCA9IG9wdGlvbnMubGV0O1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGNoZWNrIGZvciB1bmRlZmluZWQgc3BlY2lmaWNhbGx5IGhlcmUgdG8gYWxsb3cgZmFsc3kgdmFsdWVzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgICBpZiAob3B0aW9ucy5jb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY29tbWVudCA9IG9wdGlvbnMuY29tbWVudDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1bmFja25vd2xlZGdlZFdyaXRlID0gdGhpcy53cml0ZUNvbmNlcm4gJiYgdGhpcy53cml0ZUNvbmNlcm4udyA9PT0gMDtcbiAgICAgICAgaWYgKHVuYWNrbm93bGVkZ2VkV3JpdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlbWVudHMuZmluZCgobykgPT4gby5oaW50KSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNTQxKTogZml4IGVycm9yIGZvciBoaW50IHdpdGggdW5hY2tub3dsZWRnZWQgd3JpdGVzXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoYGhpbnQgaXMgbm90IHN1cHBvcnRlZCB3aXRoIHVuYWNrbm93bGVkZ2VkIHdyaXRlc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5leGVjdXRlQ29tbWFuZChzZXJ2ZXIsIHNlc3Npb24sIGNvbW1hbmQpO1xuICAgIH1cbn1cbmV4cG9ydHMuVXBkYXRlT3BlcmF0aW9uID0gVXBkYXRlT3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgVXBkYXRlT25lT3BlcmF0aW9uIGV4dGVuZHMgVXBkYXRlT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBmaWx0ZXIsIHVwZGF0ZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLnMubmFtZXNwYWNlLCBbbWFrZVVwZGF0ZVN0YXRlbWVudChmaWx0ZXIsIHVwZGF0ZSwgeyAuLi5vcHRpb25zLCBtdWx0aTogZmFsc2UgfSldLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCEoMCwgdXRpbHNfMS5oYXNBdG9taWNPcGVyYXRvcnMpKHVwZGF0ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1VwZGF0ZSBkb2N1bWVudCByZXF1aXJlcyBhdG9taWMgb3BlcmF0b3JzJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgc3VwZXIuZXhlY3V0ZShzZXJ2ZXIsIHNlc3Npb24pO1xuICAgICAgICBpZiAodGhpcy5leHBsYWluICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICBpZiAocmVzLmNvZGUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHJlcyk7XG4gICAgICAgIGlmIChyZXMud3JpdGVFcnJvcnMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1NlcnZlckVycm9yKHJlcy53cml0ZUVycm9yc1swXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2tub3dsZWRnZWQ6IHRoaXMud3JpdGVDb25jZXJuPy53ICE9PSAwLFxuICAgICAgICAgICAgbW9kaWZpZWRDb3VudDogcmVzLm5Nb2RpZmllZCA/PyByZXMubixcbiAgICAgICAgICAgIHVwc2VydGVkSWQ6IEFycmF5LmlzQXJyYXkocmVzLnVwc2VydGVkKSAmJiByZXMudXBzZXJ0ZWQubGVuZ3RoID4gMCA/IHJlcy51cHNlcnRlZFswXS5faWQgOiBudWxsLFxuICAgICAgICAgICAgdXBzZXJ0ZWRDb3VudDogQXJyYXkuaXNBcnJheShyZXMudXBzZXJ0ZWQpICYmIHJlcy51cHNlcnRlZC5sZW5ndGggPyByZXMudXBzZXJ0ZWQubGVuZ3RoIDogMCxcbiAgICAgICAgICAgIG1hdGNoZWRDb3VudDogQXJyYXkuaXNBcnJheShyZXMudXBzZXJ0ZWQpICYmIHJlcy51cHNlcnRlZC5sZW5ndGggPiAwID8gMCA6IHJlcy5uXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0cy5VcGRhdGVPbmVPcGVyYXRpb24gPSBVcGRhdGVPbmVPcGVyYXRpb247XG4vKiogQGludGVybmFsICovXG5jbGFzcyBVcGRhdGVNYW55T3BlcmF0aW9uIGV4dGVuZHMgVXBkYXRlT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBmaWx0ZXIsIHVwZGF0ZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLnMubmFtZXNwYWNlLCBbbWFrZVVwZGF0ZVN0YXRlbWVudChmaWx0ZXIsIHVwZGF0ZSwgeyAuLi5vcHRpb25zLCBtdWx0aTogdHJ1ZSB9KV0sIG9wdGlvbnMpO1xuICAgICAgICBpZiAoISgwLCB1dGlsc18xLmhhc0F0b21pY09wZXJhdG9ycykodXBkYXRlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignVXBkYXRlIGRvY3VtZW50IHJlcXVpcmVzIGF0b21pYyBvcGVyYXRvcnMnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzdXBlci5leGVjdXRlKHNlcnZlciwgc2Vzc2lvbik7XG4gICAgICAgIGlmICh0aGlzLmV4cGxhaW4gIT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIGlmIChyZXMuY29kZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzKTtcbiAgICAgICAgaWYgKHJlcy53cml0ZUVycm9ycylcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IocmVzLndyaXRlRXJyb3JzWzBdKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFja25vd2xlZGdlZDogdGhpcy53cml0ZUNvbmNlcm4/LncgIT09IDAsXG4gICAgICAgICAgICBtb2RpZmllZENvdW50OiByZXMubk1vZGlmaWVkID8/IHJlcy5uLFxuICAgICAgICAgICAgdXBzZXJ0ZWRJZDogQXJyYXkuaXNBcnJheShyZXMudXBzZXJ0ZWQpICYmIHJlcy51cHNlcnRlZC5sZW5ndGggPiAwID8gcmVzLnVwc2VydGVkWzBdLl9pZCA6IG51bGwsXG4gICAgICAgICAgICB1cHNlcnRlZENvdW50OiBBcnJheS5pc0FycmF5KHJlcy51cHNlcnRlZCkgJiYgcmVzLnVwc2VydGVkLmxlbmd0aCA/IHJlcy51cHNlcnRlZC5sZW5ndGggOiAwLFxuICAgICAgICAgICAgbWF0Y2hlZENvdW50OiBBcnJheS5pc0FycmF5KHJlcy51cHNlcnRlZCkgJiYgcmVzLnVwc2VydGVkLmxlbmd0aCA+IDAgPyAwIDogcmVzLm5cbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLlVwZGF0ZU1hbnlPcGVyYXRpb24gPSBVcGRhdGVNYW55T3BlcmF0aW9uO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgUmVwbGFjZU9uZU9wZXJhdGlvbiBleHRlbmRzIFVwZGF0ZU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29sbGVjdGlvbiwgZmlsdGVyLCByZXBsYWNlbWVudCwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihjb2xsZWN0aW9uLnMubmFtZXNwYWNlLCBbbWFrZVVwZGF0ZVN0YXRlbWVudChmaWx0ZXIsIHJlcGxhY2VtZW50LCB7IC4uLm9wdGlvbnMsIG11bHRpOiBmYWxzZSB9KV0sIG9wdGlvbnMpO1xuICAgICAgICBpZiAoKDAsIHV0aWxzXzEuaGFzQXRvbWljT3BlcmF0b3JzKShyZXBsYWNlbWVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1JlcGxhY2VtZW50IGRvY3VtZW50IG11c3Qgbm90IGNvbnRhaW4gYXRvbWljIG9wZXJhdG9ycycpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHN1cGVyLmV4ZWN1dGUoc2VydmVyLCBzZXNzaW9uKTtcbiAgICAgICAgaWYgKHRoaXMuZXhwbGFpbiAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgaWYgKHJlcy5jb2RlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvcihyZXMpO1xuICAgICAgICBpZiAocmVzLndyaXRlRXJyb3JzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvcihyZXMud3JpdGVFcnJvcnNbMF0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWNrbm93bGVkZ2VkOiB0aGlzLndyaXRlQ29uY2Vybj8udyAhPT0gMCxcbiAgICAgICAgICAgIG1vZGlmaWVkQ291bnQ6IHJlcy5uTW9kaWZpZWQgPz8gcmVzLm4sXG4gICAgICAgICAgICB1cHNlcnRlZElkOiBBcnJheS5pc0FycmF5KHJlcy51cHNlcnRlZCkgJiYgcmVzLnVwc2VydGVkLmxlbmd0aCA+IDAgPyByZXMudXBzZXJ0ZWRbMF0uX2lkIDogbnVsbCxcbiAgICAgICAgICAgIHVwc2VydGVkQ291bnQ6IEFycmF5LmlzQXJyYXkocmVzLnVwc2VydGVkKSAmJiByZXMudXBzZXJ0ZWQubGVuZ3RoID8gcmVzLnVwc2VydGVkLmxlbmd0aCA6IDAsXG4gICAgICAgICAgICBtYXRjaGVkQ291bnQ6IEFycmF5LmlzQXJyYXkocmVzLnVwc2VydGVkKSAmJiByZXMudXBzZXJ0ZWQubGVuZ3RoID4gMCA/IDAgOiByZXMublxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydHMuUmVwbGFjZU9uZU9wZXJhdGlvbiA9IFJlcGxhY2VPbmVPcGVyYXRpb247XG5mdW5jdGlvbiBtYWtlVXBkYXRlU3RhdGVtZW50KGZpbHRlciwgdXBkYXRlLCBvcHRpb25zKSB7XG4gICAgaWYgKGZpbHRlciA9PSBudWxsIHx8IHR5cGVvZiBmaWx0ZXIgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ1NlbGVjdG9yIG11c3QgYmUgYSB2YWxpZCBKYXZhU2NyaXB0IG9iamVjdCcpO1xuICAgIH1cbiAgICBpZiAodXBkYXRlID09IG51bGwgfHwgdHlwZW9mIHVwZGF0ZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignRG9jdW1lbnQgbXVzdCBiZSBhIHZhbGlkIEphdmFTY3JpcHQgb2JqZWN0Jyk7XG4gICAgfVxuICAgIGNvbnN0IG9wID0geyBxOiBmaWx0ZXIsIHU6IHVwZGF0ZSB9O1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy51cHNlcnQgPT09ICdib29sZWFuJykge1xuICAgICAgICBvcC51cHNlcnQgPSBvcHRpb25zLnVwc2VydDtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubXVsdGkpIHtcbiAgICAgICAgb3AubXVsdGkgPSBvcHRpb25zLm11bHRpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5oaW50KSB7XG4gICAgICAgIG9wLmhpbnQgPSBvcHRpb25zLmhpbnQ7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmFycmF5RmlsdGVycykge1xuICAgICAgICBvcC5hcnJheUZpbHRlcnMgPSBvcHRpb25zLmFycmF5RmlsdGVycztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuY29sbGF0aW9uKSB7XG4gICAgICAgIG9wLmNvbGxhdGlvbiA9IG9wdGlvbnMuY29sbGF0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gb3A7XG59XG5leHBvcnRzLm1ha2VVcGRhdGVTdGF0ZW1lbnQgPSBtYWtlVXBkYXRlU3RhdGVtZW50O1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKFVwZGF0ZU9wZXJhdGlvbiwgW29wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsIG9wZXJhdGlvbl8xLkFzcGVjdC5XUklURV9PUEVSQVRJT04sIG9wZXJhdGlvbl8xLkFzcGVjdC5TS0lQX0NPTExBVElPTl0pO1xuKDAsIG9wZXJhdGlvbl8xLmRlZmluZUFzcGVjdHMpKFVwZGF0ZU9uZU9wZXJhdGlvbiwgW1xuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5SRVRSWUFCTEUsXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTixcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuRVhQTEFJTkFCTEUsXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlNLSVBfQ09MTEFUSU9OXG5dKTtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShVcGRhdGVNYW55T3BlcmF0aW9uLCBbXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LldSSVRFX09QRVJBVElPTixcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuRVhQTEFJTkFCTEUsXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlNLSVBfQ09MTEFUSU9OXG5dKTtcbigwLCBvcGVyYXRpb25fMS5kZWZpbmVBc3BlY3RzKShSZXBsYWNlT25lT3BlcmF0aW9uLCBbXG4gICAgb3BlcmF0aW9uXzEuQXNwZWN0LlJFVFJZQUJMRSxcbiAgICBvcGVyYXRpb25fMS5Bc3BlY3QuV1JJVEVfT1BFUkFUSU9OLFxuICAgIG9wZXJhdGlvbl8xLkFzcGVjdC5TS0lQX0NPTExBVElPTlxuXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwibWFrZVVwZGF0ZVN0YXRlbWVudCIsIlJlcGxhY2VPbmVPcGVyYXRpb24iLCJVcGRhdGVNYW55T3BlcmF0aW9uIiwiVXBkYXRlT25lT3BlcmF0aW9uIiwiVXBkYXRlT3BlcmF0aW9uIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwiY29tbWFuZF8xIiwib3BlcmF0aW9uXzEiLCJDb21tYW5kT3BlcmF0aW9uIiwiY29uc3RydWN0b3IiLCJucyIsInN0YXRlbWVudHMiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwiY29tbWFuZE5hbWUiLCJjYW5SZXRyeVdyaXRlIiwiZXZlcnkiLCJvcCIsIm11bHRpIiwiZXhlY3V0ZSIsInNlcnZlciIsInNlc3Npb24iLCJvcmRlcmVkIiwiY29tbWFuZCIsInVwZGF0ZSIsImNvbGxlY3Rpb24iLCJ1cGRhdGVzIiwiYnlwYXNzRG9jdW1lbnRWYWxpZGF0aW9uIiwibGV0IiwiY29tbWVudCIsInVuYWNrbm93bGVkZ2VkV3JpdGUiLCJ3cml0ZUNvbmNlcm4iLCJ3IiwiZmluZCIsIm8iLCJoaW50IiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJleGVjdXRlQ29tbWFuZCIsImZpbHRlciIsInMiLCJuYW1lc3BhY2UiLCJoYXNBdG9taWNPcGVyYXRvcnMiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwicmVzIiwiZXhwbGFpbiIsImNvZGUiLCJNb25nb1NlcnZlckVycm9yIiwid3JpdGVFcnJvcnMiLCJhY2tub3dsZWRnZWQiLCJtb2RpZmllZENvdW50Iiwibk1vZGlmaWVkIiwibiIsInVwc2VydGVkSWQiLCJBcnJheSIsImlzQXJyYXkiLCJ1cHNlcnRlZCIsImxlbmd0aCIsIl9pZCIsInVwc2VydGVkQ291bnQiLCJtYXRjaGVkQ291bnQiLCJyZXBsYWNlbWVudCIsInEiLCJ1IiwidXBzZXJ0IiwiYXJyYXlGaWx0ZXJzIiwiY29sbGF0aW9uIiwiZGVmaW5lQXNwZWN0cyIsIkFzcGVjdCIsIlJFVFJZQUJMRSIsIldSSVRFX09QRVJBVElPTiIsIlNLSVBfQ09MTEFUSU9OIiwiRVhQTEFJTkFCTEUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/update.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/operations/validate_collection.js":
/*!********************************************************************!*\
  !*** ./node_modules/mongodb/lib/operations/validate_collection.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ValidateCollectionOperation = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst command_1 = __webpack_require__(/*! ./command */ \"(ssr)/./node_modules/mongodb/lib/operations/command.js\");\n/** @internal */ class ValidateCollectionOperation extends command_1.CommandOperation {\n    constructor(admin, collectionName, options){\n        // Decorate command with extra options\n        const command = {\n            validate: collectionName\n        };\n        const keys = Object.keys(options);\n        for(let i = 0; i < keys.length; i++){\n            if (Object.prototype.hasOwnProperty.call(options, keys[i]) && keys[i] !== \"session\") {\n                command[keys[i]] = options[keys[i]];\n            }\n        }\n        super(admin.s.db, options);\n        this.options = options;\n        this.command = command;\n        this.collectionName = collectionName;\n    }\n    get commandName() {\n        return \"validate\";\n    }\n    async execute(server, session) {\n        const collectionName = this.collectionName;\n        const doc = await super.executeCommand(server, session, this.command);\n        if (doc.result != null && typeof doc.result !== \"string\") throw new error_1.MongoUnexpectedServerResponseError(\"Error with validation data\");\n        if (doc.result != null && doc.result.match(/exception|corrupt/) != null) throw new error_1.MongoUnexpectedServerResponseError(`Invalid collection ${collectionName}`);\n        if (doc.valid != null && !doc.valid) throw new error_1.MongoUnexpectedServerResponseError(`Invalid collection ${collectionName}`);\n        return doc;\n    }\n}\nexports.ValidateCollectionOperation = ValidateCollectionOperation; //# sourceMappingURL=validate_collection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvb3BlcmF0aW9ucy92YWxpZGF0ZV9jb2xsZWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQ0FBbUMsR0FBRyxLQUFLO0FBQzNDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJEQUFVO0FBQ2xDLE1BQU1DLFlBQVlELG1CQUFPQSxDQUFDLHlFQUFXO0FBQ3JDLGNBQWMsR0FDZCxNQUFNRixvQ0FBb0NHLFVBQVVDLGdCQUFnQjtJQUNoRUMsWUFBWUMsS0FBSyxFQUFFQyxjQUFjLEVBQUVDLE9BQU8sQ0FBRTtRQUN4QyxzQ0FBc0M7UUFDdEMsTUFBTUMsVUFBVTtZQUFFQyxVQUFVSDtRQUFlO1FBQzNDLE1BQU1JLE9BQU9mLE9BQU9lLElBQUksQ0FBQ0g7UUFDekIsSUFBSyxJQUFJSSxJQUFJLEdBQUdBLElBQUlELEtBQUtFLE1BQU0sRUFBRUQsSUFBSztZQUNsQyxJQUFJaEIsT0FBT2tCLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNSLFNBQVNHLElBQUksQ0FBQ0MsRUFBRSxLQUFLRCxJQUFJLENBQUNDLEVBQUUsS0FBSyxXQUFXO2dCQUNqRkgsT0FBTyxDQUFDRSxJQUFJLENBQUNDLEVBQUUsQ0FBQyxHQUFHSixPQUFPLENBQUNHLElBQUksQ0FBQ0MsRUFBRSxDQUFDO1lBQ3ZDO1FBQ0o7UUFDQSxLQUFLLENBQUNOLE1BQU1XLENBQUMsQ0FBQ0MsRUFBRSxFQUFFVjtRQUNsQixJQUFJLENBQUNBLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNGLGNBQWMsR0FBR0E7SUFDMUI7SUFDQSxJQUFJWSxjQUFjO1FBQ2QsT0FBTztJQUNYO0lBQ0EsTUFBTUMsUUFBUUMsTUFBTSxFQUFFQyxPQUFPLEVBQUU7UUFDM0IsTUFBTWYsaUJBQWlCLElBQUksQ0FBQ0EsY0FBYztRQUMxQyxNQUFNZ0IsTUFBTSxNQUFNLEtBQUssQ0FBQ0MsZUFBZUgsUUFBUUMsU0FBUyxJQUFJLENBQUNiLE9BQU87UUFDcEUsSUFBSWMsSUFBSUUsTUFBTSxJQUFJLFFBQVEsT0FBT0YsSUFBSUUsTUFBTSxLQUFLLFVBQzVDLE1BQU0sSUFBSXhCLFFBQVF5QixrQ0FBa0MsQ0FBQztRQUN6RCxJQUFJSCxJQUFJRSxNQUFNLElBQUksUUFBUUYsSUFBSUUsTUFBTSxDQUFDRSxLQUFLLENBQUMsd0JBQXdCLE1BQy9ELE1BQU0sSUFBSTFCLFFBQVF5QixrQ0FBa0MsQ0FBQyxDQUFDLG1CQUFtQixFQUFFbkIsZUFBZSxDQUFDO1FBQy9GLElBQUlnQixJQUFJSyxLQUFLLElBQUksUUFBUSxDQUFDTCxJQUFJSyxLQUFLLEVBQy9CLE1BQU0sSUFBSTNCLFFBQVF5QixrQ0FBa0MsQ0FBQyxDQUFDLG1CQUFtQixFQUFFbkIsZUFBZSxDQUFDO1FBQy9GLE9BQU9nQjtJQUNYO0FBQ0o7QUFDQXpCLG1DQUFtQyxHQUFHRSw2QkFDdEMsK0NBQStDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9vcGVyYXRpb25zL3ZhbGlkYXRlX2NvbGxlY3Rpb24uanM/YmE5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVmFsaWRhdGVDb2xsZWN0aW9uT3BlcmF0aW9uID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IGNvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL2NvbW1hbmRcIik7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBWYWxpZGF0ZUNvbGxlY3Rpb25PcGVyYXRpb24gZXh0ZW5kcyBjb21tYW5kXzEuQ29tbWFuZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoYWRtaW4sIGNvbGxlY3Rpb25OYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIERlY29yYXRlIGNvbW1hbmQgd2l0aCBleHRyYSBvcHRpb25zXG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB7IHZhbGlkYXRlOiBjb2xsZWN0aW9uTmFtZSB9O1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvcHRpb25zLCBrZXlzW2ldKSAmJiBrZXlzW2ldICE9PSAnc2Vzc2lvbicpIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kW2tleXNbaV1dID0gb3B0aW9uc1trZXlzW2ldXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdXBlcihhZG1pbi5zLmRiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5jb21tYW5kID0gY29tbWFuZDtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uTmFtZSA9IGNvbGxlY3Rpb25OYW1lO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAndmFsaWRhdGUnO1xuICAgIH1cbiAgICBhc3luYyBleGVjdXRlKHNlcnZlciwgc2Vzc2lvbikge1xuICAgICAgICBjb25zdCBjb2xsZWN0aW9uTmFtZSA9IHRoaXMuY29sbGVjdGlvbk5hbWU7XG4gICAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IHN1cGVyLmV4ZWN1dGVDb21tYW5kKHNlcnZlciwgc2Vzc2lvbiwgdGhpcy5jb21tYW5kKTtcbiAgICAgICAgaWYgKGRvYy5yZXN1bHQgIT0gbnVsbCAmJiB0eXBlb2YgZG9jLnJlc3VsdCAhPT0gJ3N0cmluZycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yKCdFcnJvciB3aXRoIHZhbGlkYXRpb24gZGF0YScpO1xuICAgICAgICBpZiAoZG9jLnJlc3VsdCAhPSBudWxsICYmIGRvYy5yZXN1bHQubWF0Y2goL2V4Y2VwdGlvbnxjb3JydXB0LykgIT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IoYEludmFsaWQgY29sbGVjdGlvbiAke2NvbGxlY3Rpb25OYW1lfWApO1xuICAgICAgICBpZiAoZG9jLnZhbGlkICE9IG51bGwgJiYgIWRvYy52YWxpZClcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVW5leHBlY3RlZFNlcnZlclJlc3BvbnNlRXJyb3IoYEludmFsaWQgY29sbGVjdGlvbiAke2NvbGxlY3Rpb25OYW1lfWApO1xuICAgICAgICByZXR1cm4gZG9jO1xuICAgIH1cbn1cbmV4cG9ydHMuVmFsaWRhdGVDb2xsZWN0aW9uT3BlcmF0aW9uID0gVmFsaWRhdGVDb2xsZWN0aW9uT3BlcmF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmFsaWRhdGVfY29sbGVjdGlvbi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJWYWxpZGF0ZUNvbGxlY3Rpb25PcGVyYXRpb24iLCJlcnJvcl8xIiwicmVxdWlyZSIsImNvbW1hbmRfMSIsIkNvbW1hbmRPcGVyYXRpb24iLCJjb25zdHJ1Y3RvciIsImFkbWluIiwiY29sbGVjdGlvbk5hbWUiLCJvcHRpb25zIiwiY29tbWFuZCIsInZhbGlkYXRlIiwia2V5cyIsImkiLCJsZW5ndGgiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzIiwiZGIiLCJjb21tYW5kTmFtZSIsImV4ZWN1dGUiLCJzZXJ2ZXIiLCJzZXNzaW9uIiwiZG9jIiwiZXhlY3V0ZUNvbW1hbmQiLCJyZXN1bHQiLCJNb25nb1VuZXhwZWN0ZWRTZXJ2ZXJSZXNwb25zZUVycm9yIiwibWF0Y2giLCJ2YWxpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/operations/validate_collection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/read_concern.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/read_concern.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ReadConcern = exports.ReadConcernLevel = void 0;\n/** @public */ exports.ReadConcernLevel = Object.freeze({\n    local: \"local\",\n    majority: \"majority\",\n    linearizable: \"linearizable\",\n    available: \"available\",\n    snapshot: \"snapshot\"\n});\n/**\n * The MongoDB ReadConcern, which allows for control of the consistency and isolation properties\n * of the data read from replica sets and replica set shards.\n * @public\n *\n * @see https://www.mongodb.com/docs/manual/reference/read-concern/index.html\n */ class ReadConcern {\n    /** Constructs a ReadConcern from the read concern level.*/ constructor(level){\n        /**\n         * A spec test exists that allows level to be any string.\n         * \"invalid readConcern with out stage\"\n         * @see ./test/spec/crud/v2/aggregate-out-readConcern.json\n         * @see https://github.com/mongodb/specifications/blob/master/source/read-write-concern/read-write-concern.rst#unknown-levels-and-additional-options-for-string-based-readconcerns\n         */ this.level = exports.ReadConcernLevel[level] ?? level;\n    }\n    /**\n     * Construct a ReadConcern given an options object.\n     *\n     * @param options - The options object from which to extract the write concern.\n     */ static fromOptions(options) {\n        if (options == null) {\n            return;\n        }\n        if (options.readConcern) {\n            const { readConcern } = options;\n            if (readConcern instanceof ReadConcern) {\n                return readConcern;\n            } else if (typeof readConcern === \"string\") {\n                return new ReadConcern(readConcern);\n            } else if (\"level\" in readConcern && readConcern.level) {\n                return new ReadConcern(readConcern.level);\n            }\n        }\n        if (options.level) {\n            return new ReadConcern(options.level);\n        }\n        return;\n    }\n    static get MAJORITY() {\n        return exports.ReadConcernLevel.majority;\n    }\n    static get AVAILABLE() {\n        return exports.ReadConcernLevel.available;\n    }\n    static get LINEARIZABLE() {\n        return exports.ReadConcernLevel.linearizable;\n    }\n    static get SNAPSHOT() {\n        return exports.ReadConcernLevel.snapshot;\n    }\n    toJSON() {\n        return {\n            level: this.level\n        };\n    }\n}\nexports.ReadConcern = ReadConcern; //# sourceMappingURL=read_concern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvcmVhZF9jb25jZXJuLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBR0Esd0JBQXdCLEdBQUcsS0FBSztBQUN0RCxZQUFZLEdBQ1pBLHdCQUF3QixHQUFHRixPQUFPTSxNQUFNLENBQUM7SUFDckNDLE9BQU87SUFDUEMsVUFBVTtJQUNWQyxjQUFjO0lBQ2RDLFdBQVc7SUFDWEMsVUFBVTtBQUNkO0FBQ0E7Ozs7OztDQU1DLEdBQ0QsTUFBTVA7SUFDRix5REFBeUQsR0FDekRRLFlBQVlDLEtBQUssQ0FBRTtRQUNmOzs7OztTQUtDLEdBQ0QsSUFBSSxDQUFDQSxLQUFLLEdBQUdYLFFBQVFHLGdCQUFnQixDQUFDUSxNQUFNLElBQUlBO0lBQ3BEO0lBQ0E7Ozs7S0FJQyxHQUNELE9BQU9DLFlBQVlDLE9BQU8sRUFBRTtRQUN4QixJQUFJQSxXQUFXLE1BQU07WUFDakI7UUFDSjtRQUNBLElBQUlBLFFBQVFDLFdBQVcsRUFBRTtZQUNyQixNQUFNLEVBQUVBLFdBQVcsRUFBRSxHQUFHRDtZQUN4QixJQUFJQyx1QkFBdUJaLGFBQWE7Z0JBQ3BDLE9BQU9ZO1lBQ1gsT0FDSyxJQUFJLE9BQU9BLGdCQUFnQixVQUFVO2dCQUN0QyxPQUFPLElBQUlaLFlBQVlZO1lBQzNCLE9BQ0ssSUFBSSxXQUFXQSxlQUFlQSxZQUFZSCxLQUFLLEVBQUU7Z0JBQ2xELE9BQU8sSUFBSVQsWUFBWVksWUFBWUgsS0FBSztZQUM1QztRQUNKO1FBQ0EsSUFBSUUsUUFBUUYsS0FBSyxFQUFFO1lBQ2YsT0FBTyxJQUFJVCxZQUFZVyxRQUFRRixLQUFLO1FBQ3hDO1FBQ0E7SUFDSjtJQUNBLFdBQVdJLFdBQVc7UUFDbEIsT0FBT2YsUUFBUUcsZ0JBQWdCLENBQUNHLFFBQVE7SUFDNUM7SUFDQSxXQUFXVSxZQUFZO1FBQ25CLE9BQU9oQixRQUFRRyxnQkFBZ0IsQ0FBQ0ssU0FBUztJQUM3QztJQUNBLFdBQVdTLGVBQWU7UUFDdEIsT0FBT2pCLFFBQVFHLGdCQUFnQixDQUFDSSxZQUFZO0lBQ2hEO0lBQ0EsV0FBV1csV0FBVztRQUNsQixPQUFPbEIsUUFBUUcsZ0JBQWdCLENBQUNNLFFBQVE7SUFDNUM7SUFDQVUsU0FBUztRQUNMLE9BQU87WUFBRVIsT0FBTyxJQUFJLENBQUNBLEtBQUs7UUFBQztJQUMvQjtBQUNKO0FBQ0FYLG1CQUFtQixHQUFHRSxhQUN0Qix3Q0FBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3JlYWRfY29uY2Vybi5qcz85NWNiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5SZWFkQ29uY2VybiA9IGV4cG9ydHMuUmVhZENvbmNlcm5MZXZlbCA9IHZvaWQgMDtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLlJlYWRDb25jZXJuTGV2ZWwgPSBPYmplY3QuZnJlZXplKHtcbiAgICBsb2NhbDogJ2xvY2FsJyxcbiAgICBtYWpvcml0eTogJ21ham9yaXR5JyxcbiAgICBsaW5lYXJpemFibGU6ICdsaW5lYXJpemFibGUnLFxuICAgIGF2YWlsYWJsZTogJ2F2YWlsYWJsZScsXG4gICAgc25hcHNob3Q6ICdzbmFwc2hvdCdcbn0pO1xuLyoqXG4gKiBUaGUgTW9uZ29EQiBSZWFkQ29uY2Vybiwgd2hpY2ggYWxsb3dzIGZvciBjb250cm9sIG9mIHRoZSBjb25zaXN0ZW5jeSBhbmQgaXNvbGF0aW9uIHByb3BlcnRpZXNcbiAqIG9mIHRoZSBkYXRhIHJlYWQgZnJvbSByZXBsaWNhIHNldHMgYW5kIHJlcGxpY2Egc2V0IHNoYXJkcy5cbiAqIEBwdWJsaWNcbiAqXG4gKiBAc2VlIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2RvY3MvbWFudWFsL3JlZmVyZW5jZS9yZWFkLWNvbmNlcm4vaW5kZXguaHRtbFxuICovXG5jbGFzcyBSZWFkQ29uY2VybiB7XG4gICAgLyoqIENvbnN0cnVjdHMgYSBSZWFkQ29uY2VybiBmcm9tIHRoZSByZWFkIGNvbmNlcm4gbGV2ZWwuKi9cbiAgICBjb25zdHJ1Y3RvcihsZXZlbCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBzcGVjIHRlc3QgZXhpc3RzIHRoYXQgYWxsb3dzIGxldmVsIHRvIGJlIGFueSBzdHJpbmcuXG4gICAgICAgICAqIFwiaW52YWxpZCByZWFkQ29uY2VybiB3aXRoIG91dCBzdGFnZVwiXG4gICAgICAgICAqIEBzZWUgLi90ZXN0L3NwZWMvY3J1ZC92Mi9hZ2dyZWdhdGUtb3V0LXJlYWRDb25jZXJuLmpzb25cbiAgICAgICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL21hc3Rlci9zb3VyY2UvcmVhZC13cml0ZS1jb25jZXJuL3JlYWQtd3JpdGUtY29uY2Vybi5yc3QjdW5rbm93bi1sZXZlbHMtYW5kLWFkZGl0aW9uYWwtb3B0aW9ucy1mb3Itc3RyaW5nLWJhc2VkLXJlYWRjb25jZXJuc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sZXZlbCA9IGV4cG9ydHMuUmVhZENvbmNlcm5MZXZlbFtsZXZlbF0gPz8gbGV2ZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBhIFJlYWRDb25jZXJuIGdpdmVuIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBvYmplY3QgZnJvbSB3aGljaCB0byBleHRyYWN0IHRoZSB3cml0ZSBjb25jZXJuLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5yZWFkQ29uY2Vybikge1xuICAgICAgICAgICAgY29uc3QgeyByZWFkQ29uY2VybiB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIGlmIChyZWFkQ29uY2VybiBpbnN0YW5jZW9mIFJlYWRDb25jZXJuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRDb25jZXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlYWRDb25jZXJuID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVhZENvbmNlcm4ocmVhZENvbmNlcm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoJ2xldmVsJyBpbiByZWFkQ29uY2VybiAmJiByZWFkQ29uY2Vybi5sZXZlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVhZENvbmNlcm4ocmVhZENvbmNlcm4ubGV2ZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmxldmVsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRDb25jZXJuKG9wdGlvbnMubGV2ZWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3RhdGljIGdldCBNQUpPUklUWSgpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuUmVhZENvbmNlcm5MZXZlbC5tYWpvcml0eTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBBVkFJTEFCTEUoKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLlJlYWRDb25jZXJuTGV2ZWwuYXZhaWxhYmxlO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IExJTkVBUklaQUJMRSgpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuUmVhZENvbmNlcm5MZXZlbC5saW5lYXJpemFibGU7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgU05BUFNIT1QoKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLlJlYWRDb25jZXJuTGV2ZWwuc25hcHNob3Q7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgbGV2ZWw6IHRoaXMubGV2ZWwgfTtcbiAgICB9XG59XG5leHBvcnRzLlJlYWRDb25jZXJuID0gUmVhZENvbmNlcm47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFkX2NvbmNlcm4uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUmVhZENvbmNlcm4iLCJSZWFkQ29uY2VybkxldmVsIiwiZnJlZXplIiwibG9jYWwiLCJtYWpvcml0eSIsImxpbmVhcml6YWJsZSIsImF2YWlsYWJsZSIsInNuYXBzaG90IiwiY29uc3RydWN0b3IiLCJsZXZlbCIsImZyb21PcHRpb25zIiwib3B0aW9ucyIsInJlYWRDb25jZXJuIiwiTUFKT1JJVFkiLCJBVkFJTEFCTEUiLCJMSU5FQVJJWkFCTEUiLCJTTkFQU0hPVCIsInRvSlNPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/read_concern.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/read_preference.js":
/*!*****************************************************!*\
  !*** ./node_modules/mongodb/lib/read_preference.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ReadPreference = exports.ReadPreferenceMode = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/** @public */ exports.ReadPreferenceMode = Object.freeze({\n    primary: \"primary\",\n    primaryPreferred: \"primaryPreferred\",\n    secondary: \"secondary\",\n    secondaryPreferred: \"secondaryPreferred\",\n    nearest: \"nearest\"\n});\n/**\n * The **ReadPreference** class is a class that represents a MongoDB ReadPreference and is\n * used to construct connections.\n * @public\n *\n * @see https://www.mongodb.com/docs/manual/core/read-preference/\n */ class ReadPreference {\n    /**\n     * @param mode - A string describing the read preference mode (primary|primaryPreferred|secondary|secondaryPreferred|nearest)\n     * @param tags - A tag set used to target reads to members with the specified tag(s). tagSet is not available if using read preference mode primary.\n     * @param options - Additional read preference options\n     */ constructor(mode, tags, options){\n        if (!ReadPreference.isValid(mode)) {\n            throw new error_1.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(mode)}`);\n        }\n        if (options == null && typeof tags === \"object\" && !Array.isArray(tags)) {\n            options = tags;\n            tags = undefined;\n        } else if (tags && !Array.isArray(tags)) {\n            throw new error_1.MongoInvalidArgumentError(\"ReadPreference tags must be an array\");\n        }\n        this.mode = mode;\n        this.tags = tags;\n        this.hedge = options?.hedge;\n        this.maxStalenessSeconds = undefined;\n        this.minWireVersion = undefined;\n        options = options ?? {};\n        if (options.maxStalenessSeconds != null) {\n            if (options.maxStalenessSeconds <= 0) {\n                throw new error_1.MongoInvalidArgumentError(\"maxStalenessSeconds must be a positive integer\");\n            }\n            this.maxStalenessSeconds = options.maxStalenessSeconds;\n            // NOTE: The minimum required wire version is 5 for this read preference. If the existing\n            //       topology has a lower value then a MongoError will be thrown during server selection.\n            this.minWireVersion = 5;\n        }\n        if (this.mode === ReadPreference.PRIMARY) {\n            if (this.tags && Array.isArray(this.tags) && this.tags.length > 0) {\n                throw new error_1.MongoInvalidArgumentError(\"Primary read preference cannot be combined with tags\");\n            }\n            if (this.maxStalenessSeconds) {\n                throw new error_1.MongoInvalidArgumentError(\"Primary read preference cannot be combined with maxStalenessSeconds\");\n            }\n            if (this.hedge) {\n                throw new error_1.MongoInvalidArgumentError(\"Primary read preference cannot be combined with hedge\");\n            }\n        }\n    }\n    // Support the deprecated `preference` property introduced in the porcelain layer\n    get preference() {\n        return this.mode;\n    }\n    static fromString(mode) {\n        return new ReadPreference(mode);\n    }\n    /**\n     * Construct a ReadPreference given an options object.\n     *\n     * @param options - The options object from which to extract the read preference.\n     */ static fromOptions(options) {\n        if (!options) return;\n        const readPreference = options.readPreference ?? options.session?.transaction.options.readPreference;\n        const readPreferenceTags = options.readPreferenceTags;\n        if (readPreference == null) {\n            return;\n        }\n        if (typeof readPreference === \"string\") {\n            return new ReadPreference(readPreference, readPreferenceTags, {\n                maxStalenessSeconds: options.maxStalenessSeconds,\n                hedge: options.hedge\n            });\n        } else if (!(readPreference instanceof ReadPreference) && typeof readPreference === \"object\") {\n            const mode = readPreference.mode || readPreference.preference;\n            if (mode && typeof mode === \"string\") {\n                return new ReadPreference(mode, readPreference.tags ?? readPreferenceTags, {\n                    maxStalenessSeconds: readPreference.maxStalenessSeconds,\n                    hedge: options.hedge\n                });\n            }\n        }\n        if (readPreferenceTags) {\n            readPreference.tags = readPreferenceTags;\n        }\n        return readPreference;\n    }\n    /**\n     * Replaces options.readPreference with a ReadPreference instance\n     */ static translate(options) {\n        if (options.readPreference == null) return options;\n        const r = options.readPreference;\n        if (typeof r === \"string\") {\n            options.readPreference = new ReadPreference(r);\n        } else if (r && !(r instanceof ReadPreference) && typeof r === \"object\") {\n            const mode = r.mode || r.preference;\n            if (mode && typeof mode === \"string\") {\n                options.readPreference = new ReadPreference(mode, r.tags, {\n                    maxStalenessSeconds: r.maxStalenessSeconds\n                });\n            }\n        } else if (!(r instanceof ReadPreference)) {\n            throw new error_1.MongoInvalidArgumentError(`Invalid read preference: ${r}`);\n        }\n        return options;\n    }\n    /**\n     * Validate if a mode is legal\n     *\n     * @param mode - The string representing the read preference mode.\n     */ static isValid(mode) {\n        const VALID_MODES = new Set([\n            ReadPreference.PRIMARY,\n            ReadPreference.PRIMARY_PREFERRED,\n            ReadPreference.SECONDARY,\n            ReadPreference.SECONDARY_PREFERRED,\n            ReadPreference.NEAREST,\n            null\n        ]);\n        return VALID_MODES.has(mode);\n    }\n    /**\n     * Validate if a mode is legal\n     *\n     * @param mode - The string representing the read preference mode.\n     */ isValid(mode) {\n        return ReadPreference.isValid(typeof mode === \"string\" ? mode : this.mode);\n    }\n    /**\n     * Indicates that this readPreference needs the \"SecondaryOk\" bit when sent over the wire\n     * @see https://www.mongodb.com/docs/manual/reference/mongodb-wire-protocol/#op-query\n     */ secondaryOk() {\n        const NEEDS_SECONDARYOK = new Set([\n            ReadPreference.PRIMARY_PREFERRED,\n            ReadPreference.SECONDARY,\n            ReadPreference.SECONDARY_PREFERRED,\n            ReadPreference.NEAREST\n        ]);\n        return NEEDS_SECONDARYOK.has(this.mode);\n    }\n    /**\n     * Check if the two ReadPreferences are equivalent\n     *\n     * @param readPreference - The read preference with which to check equality\n     */ equals(readPreference) {\n        return readPreference.mode === this.mode;\n    }\n    /** Return JSON representation */ toJSON() {\n        const readPreference = {\n            mode: this.mode\n        };\n        if (Array.isArray(this.tags)) readPreference.tags = this.tags;\n        if (this.maxStalenessSeconds) readPreference.maxStalenessSeconds = this.maxStalenessSeconds;\n        if (this.hedge) readPreference.hedge = this.hedge;\n        return readPreference;\n    }\n}\nReadPreference.PRIMARY = exports.ReadPreferenceMode.primary;\nReadPreference.PRIMARY_PREFERRED = exports.ReadPreferenceMode.primaryPreferred;\nReadPreference.SECONDARY = exports.ReadPreferenceMode.secondary;\nReadPreference.SECONDARY_PREFERRED = exports.ReadPreferenceMode.secondaryPreferred;\nReadPreference.NEAREST = exports.ReadPreferenceMode.nearest;\nReadPreference.primary = new ReadPreference(exports.ReadPreferenceMode.primary);\nReadPreference.primaryPreferred = new ReadPreference(exports.ReadPreferenceMode.primaryPreferred);\nReadPreference.secondary = new ReadPreference(exports.ReadPreferenceMode.secondary);\nReadPreference.secondaryPreferred = new ReadPreference(exports.ReadPreferenceMode.secondaryPreferred);\nReadPreference.nearest = new ReadPreference(exports.ReadPreferenceMode.nearest);\nexports.ReadPreference = ReadPreference; //# sourceMappingURL=read_preference.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvcmVhZF9wcmVmZXJlbmNlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxzQkFBc0IsR0FBR0EsMEJBQTBCLEdBQUcsS0FBSztBQUMzRCxNQUFNSSxVQUFVQyxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxZQUFZLEdBQ1pMLDBCQUEwQixHQUFHRixPQUFPUSxNQUFNLENBQUM7SUFDdkNDLFNBQVM7SUFDVEMsa0JBQWtCO0lBQ2xCQyxXQUFXO0lBQ1hDLG9CQUFvQjtJQUNwQkMsU0FBUztBQUNiO0FBQ0E7Ozs7OztDQU1DLEdBQ0QsTUFBTVQ7SUFDRjs7OztLQUlDLEdBQ0RVLFlBQVlDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxPQUFPLENBQUU7UUFDN0IsSUFBSSxDQUFDYixlQUFlYyxPQUFPLENBQUNILE9BQU87WUFDL0IsTUFBTSxJQUFJVCxRQUFRYSx5QkFBeUIsQ0FBQyxDQUFDLDZCQUE2QixFQUFFQyxLQUFLQyxTQUFTLENBQUNOLE1BQU0sQ0FBQztRQUN0RztRQUNBLElBQUlFLFdBQVcsUUFBUSxPQUFPRCxTQUFTLFlBQVksQ0FBQ00sTUFBTUMsT0FBTyxDQUFDUCxPQUFPO1lBQ3JFQyxVQUFVRDtZQUNWQSxPQUFPUTtRQUNYLE9BQ0ssSUFBSVIsUUFBUSxDQUFDTSxNQUFNQyxPQUFPLENBQUNQLE9BQU87WUFDbkMsTUFBTSxJQUFJVixRQUFRYSx5QkFBeUIsQ0FBQztRQUNoRDtRQUNBLElBQUksQ0FBQ0osSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0MsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ1MsS0FBSyxHQUFHUixTQUFTUTtRQUN0QixJQUFJLENBQUNDLG1CQUFtQixHQUFHRjtRQUMzQixJQUFJLENBQUNHLGNBQWMsR0FBR0g7UUFDdEJQLFVBQVVBLFdBQVcsQ0FBQztRQUN0QixJQUFJQSxRQUFRUyxtQkFBbUIsSUFB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QUN4Qk8sZUFBZVAsbUJBQW1CLEdBQUcsSUFBSSxDQUFDQSxtQkFBbUI7UUFDakUsSUFBSSxJQUFJLENBQUNELEtBQUssRUFDVlEsZUFBZVIsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSztRQUNyQyxPQUFPUTtJQUNYO0FBQ0o7QUFDQTdCLGVBQWV3QixPQUFPLEdBQUcxQixRQUFRRyxrQkFBa0IsQ0FBQ0ksT0FBTztBQUMzREwsZUFBZXFDLGlCQUFpQixHQUFHdkMsUUFBUUcsa0JBQWtCLENBQUNLLGdCQUFnQjtBQUM5RU4sZUFBZXNDLFNBQVMsR0FBR3hDLFFBQVFHLGtCQUFrQixDQUFDTSxTQUFTO0FBQy9EUCxlQUFldUMsbUJBQW1CLEdBQUd6QyxRQUFRRyxrQkFBa0IsQ0FBQ08sa0JBQWtCO0FBQ2xGUixlQUFld0MsT0FBTyxHQUFHMUMsUUFBUUcsa0JBQWtCLENBQUNRLE9BQU87QUFDM0RULGVBQWVLLE9BQU8sR0FBRyxJQUFJTCxlQUFlRixRQUFRRyxrQkFBa0IsQ0FBQ0ksT0FBTztBQUM5RUwsZUFBZU0sZ0JBQWdCLEdBQUcsSUFBSU4sZUFBZUYsUUFBUUcsa0JBQWtCLENBQUNLLGdCQUFnQjtBQUNoR04sZUFBZU8sU0FBUyxHQUFHLElBQUlQLGVBQWVGLFFBQVFHLGtCQUFrQixDQUFDTSxTQUFTO0FBQ2xGUCxlQUFlUSxrQkFBa0IsR0FBRyxJQUFJUixlQUFlRixRQUFRRyxrQkFBa0IsQ0FBQ08sa0JBQWtCO0FBQ3BHUixlQUFlUyxPQUFPLEdBQUcsSUFBSVQsZUFBZUYsUUFBUUcsa0JBQWtCLENBQUNRLE9BQU87QUFDOUVYLHNCQUFzQixHQUFHRSxnQkFDekIsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9yZWFkX3ByZWZlcmVuY2UuanM/MmI1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUmVhZFByZWZlcmVuY2UgPSBleHBvcnRzLlJlYWRQcmVmZXJlbmNlTW9kZSA9IHZvaWQgMDtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbi8qKiBAcHVibGljICovXG5leHBvcnRzLlJlYWRQcmVmZXJlbmNlTW9kZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIHByaW1hcnk6ICdwcmltYXJ5JyxcbiAgICBwcmltYXJ5UHJlZmVycmVkOiAncHJpbWFyeVByZWZlcnJlZCcsXG4gICAgc2Vjb25kYXJ5OiAnc2Vjb25kYXJ5JyxcbiAgICBzZWNvbmRhcnlQcmVmZXJyZWQ6ICdzZWNvbmRhcnlQcmVmZXJyZWQnLFxuICAgIG5lYXJlc3Q6ICduZWFyZXN0J1xufSk7XG4vKipcbiAqIFRoZSAqKlJlYWRQcmVmZXJlbmNlKiogY2xhc3MgaXMgYSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBNb25nb0RCIFJlYWRQcmVmZXJlbmNlIGFuZCBpc1xuICogdXNlZCB0byBjb25zdHJ1Y3QgY29ubmVjdGlvbnMuXG4gKiBAcHVibGljXG4gKlxuICogQHNlZSBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9jb3JlL3JlYWQtcHJlZmVyZW5jZS9cbiAqL1xuY2xhc3MgUmVhZFByZWZlcmVuY2Uge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBtb2RlIC0gQSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgcmVhZCBwcmVmZXJlbmNlIG1vZGUgKHByaW1hcnl8cHJpbWFyeVByZWZlcnJlZHxzZWNvbmRhcnl8c2Vjb25kYXJ5UHJlZmVycmVkfG5lYXJlc3QpXG4gICAgICogQHBhcmFtIHRhZ3MgLSBBIHRhZyBzZXQgdXNlZCB0byB0YXJnZXQgcmVhZHMgdG8gbWVtYmVycyB3aXRoIHRoZSBzcGVjaWZpZWQgdGFnKHMpLiB0YWdTZXQgaXMgbm90IGF2YWlsYWJsZSBpZiB1c2luZyByZWFkIHByZWZlcmVuY2UgbW9kZSBwcmltYXJ5LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCByZWFkIHByZWZlcmVuY2Ugb3B0aW9uc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1vZGUsIHRhZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFSZWFkUHJlZmVyZW5jZS5pc1ZhbGlkKG1vZGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBJbnZhbGlkIHJlYWQgcHJlZmVyZW5jZSBtb2RlICR7SlNPTi5zdHJpbmdpZnkobW9kZSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCAmJiB0eXBlb2YgdGFncyA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodGFncykpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB0YWdzO1xuICAgICAgICAgICAgdGFncyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YWdzICYmICFBcnJheS5pc0FycmF5KHRhZ3MpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdSZWFkUHJlZmVyZW5jZSB0YWdzIG11c3QgYmUgYW4gYXJyYXknKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgICAgICB0aGlzLnRhZ3MgPSB0YWdzO1xuICAgICAgICB0aGlzLmhlZGdlID0gb3B0aW9ucz8uaGVkZ2U7XG4gICAgICAgIHRoaXMubWF4U3RhbGVuZXNzU2Vjb25kcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5taW5XaXJlVmVyc2lvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGlmIChvcHRpb25zLm1heFN0YWxlbmVzc1NlY29uZHMgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4U3RhbGVuZXNzU2Vjb25kcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignbWF4U3RhbGVuZXNzU2Vjb25kcyBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXhTdGFsZW5lc3NTZWNvbmRzID0gb3B0aW9ucy5tYXhTdGFsZW5lc3NTZWNvbmRzO1xuICAgICAgICAgICAgLy8gTk9URTogVGhlIG1pbmltdW0gcmVxdWlyZWQgd2lyZSB2ZXJzaW9uIGlzIDUgZm9yIHRoaXMgcmVhZCBwcmVmZXJlbmNlLiBJZiB0aGUgZXhpc3RpbmdcbiAgICAgICAgICAgIC8vICAgICAgIHRvcG9sb2d5IGhhcyBhIGxvd2VyIHZhbHVlIHRoZW4gYSBNb25nb0Vycm9yIHdpbGwgYmUgdGhyb3duIGR1cmluZyBzZXJ2ZXIgc2VsZWN0aW9uLlxuICAgICAgICAgICAgdGhpcy5taW5XaXJlVmVyc2lvbiA9IDU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gUmVhZFByZWZlcmVuY2UuUFJJTUFSWSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFncyAmJiBBcnJheS5pc0FycmF5KHRoaXMudGFncykgJiYgdGhpcy50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdQcmltYXJ5IHJlYWQgcHJlZmVyZW5jZSBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCB0YWdzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tYXhTdGFsZW5lc3NTZWNvbmRzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignUHJpbWFyeSByZWFkIHByZWZlcmVuY2UgY2Fubm90IGJlIGNvbWJpbmVkIHdpdGggbWF4U3RhbGVuZXNzU2Vjb25kcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaGVkZ2UpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdQcmltYXJ5IHJlYWQgcHJlZmVyZW5jZSBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCBoZWRnZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFN1cHBvcnQgdGhlIGRlcHJlY2F0ZWQgYHByZWZlcmVuY2VgIHByb3BlcnR5IGludHJvZHVjZWQgaW4gdGhlIHBvcmNlbGFpbiBsYXllclxuICAgIGdldCBwcmVmZXJlbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2RlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVN0cmluZyhtb2RlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVhZFByZWZlcmVuY2UobW9kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBhIFJlYWRQcmVmZXJlbmNlIGdpdmVuIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBvYmplY3QgZnJvbSB3aGljaCB0byBleHRyYWN0IHRoZSByZWFkIHByZWZlcmVuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21PcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCByZWFkUHJlZmVyZW5jZSA9IG9wdGlvbnMucmVhZFByZWZlcmVuY2UgPz8gb3B0aW9ucy5zZXNzaW9uPy50cmFuc2FjdGlvbi5vcHRpb25zLnJlYWRQcmVmZXJlbmNlO1xuICAgICAgICBjb25zdCByZWFkUHJlZmVyZW5jZVRhZ3MgPSBvcHRpb25zLnJlYWRQcmVmZXJlbmNlVGFncztcbiAgICAgICAgaWYgKHJlYWRQcmVmZXJlbmNlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlYWRQcmVmZXJlbmNlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkUHJlZmVyZW5jZShyZWFkUHJlZmVyZW5jZSwgcmVhZFByZWZlcmVuY2VUYWdzLCB7XG4gICAgICAgICAgICAgICAgbWF4U3RhbGVuZXNzU2Vjb25kczogb3B0aW9ucy5tYXhTdGFsZW5lc3NTZWNvbmRzLFxuICAgICAgICAgICAgICAgIGhlZGdlOiBvcHRpb25zLmhlZGdlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghKHJlYWRQcmVmZXJlbmNlIGluc3RhbmNlb2YgUmVhZFByZWZlcmVuY2UpICYmIHR5cGVvZiByZWFkUHJlZmVyZW5jZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGUgPSByZWFkUHJlZmVyZW5jZS5tb2RlIHx8IHJlYWRQcmVmZXJlbmNlLnByZWZlcmVuY2U7XG4gICAgICAgICAgICBpZiAobW9kZSAmJiB0eXBlb2YgbW9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRQcmVmZXJlbmNlKG1vZGUsIHJlYWRQcmVmZXJlbmNlLnRhZ3MgPz8gcmVhZFByZWZlcmVuY2VUYWdzLCB7XG4gICAgICAgICAgICAgICAgICAgIG1heFN0YWxlbmVzc1NlY29uZHM6IHJlYWRQcmVmZXJlbmNlLm1heFN0YWxlbmVzc1NlY29uZHMsXG4gICAgICAgICAgICAgICAgICAgIGhlZGdlOiBvcHRpb25zLmhlZGdlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlYWRQcmVmZXJlbmNlVGFncykge1xuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2UudGFncyA9IHJlYWRQcmVmZXJlbmNlVGFncztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVhZFByZWZlcmVuY2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIG9wdGlvbnMucmVhZFByZWZlcmVuY2Ugd2l0aCBhIFJlYWRQcmVmZXJlbmNlIGluc3RhbmNlXG4gICAgICovXG4gICAgc3RhdGljIHRyYW5zbGF0ZShvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zLnJlYWRQcmVmZXJlbmNlID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICAgICAgY29uc3QgciA9IG9wdGlvbnMucmVhZFByZWZlcmVuY2U7XG4gICAgICAgIGlmICh0eXBlb2YgciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucmVhZFByZWZlcmVuY2UgPSBuZXcgUmVhZFByZWZlcmVuY2Uocik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAociAmJiAhKHIgaW5zdGFuY2VvZiBSZWFkUHJlZmVyZW5jZSkgJiYgdHlwZW9mIHIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBtb2RlID0gci5tb2RlIHx8IHIucHJlZmVyZW5jZTtcbiAgICAgICAgICAgIGlmIChtb2RlICYmIHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucmVhZFByZWZlcmVuY2UgPSBuZXcgUmVhZFByZWZlcmVuY2UobW9kZSwgci50YWdzLCB7XG4gICAgICAgICAgICAgICAgICAgIG1heFN0YWxlbmVzc1NlY29uZHM6IHIubWF4U3RhbGVuZXNzU2Vjb25kc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCEociBpbnN0YW5jZW9mIFJlYWRQcmVmZXJlbmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgSW52YWxpZCByZWFkIHByZWZlcmVuY2U6ICR7cn1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgaWYgYSBtb2RlIGlzIGxlZ2FsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbW9kZSAtIFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSByZWFkIHByZWZlcmVuY2UgbW9kZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgaXNWYWxpZChtb2RlKSB7XG4gICAgICAgIGNvbnN0IFZBTElEX01PREVTID0gbmV3IFNldChbXG4gICAgICAgICAgICBSZWFkUHJlZmVyZW5jZS5QUklNQVJZLFxuICAgICAgICAgICAgUmVhZFByZWZlcmVuY2UuUFJJTUFSWV9QUkVGRVJSRUQsXG4gICAgICAgICAgICBSZWFkUHJlZmVyZW5jZS5TRUNPTkRBUlksXG4gICAgICAgICAgICBSZWFkUHJlZmVyZW5jZS5TRUNPTkRBUllfUFJFRkVSUkVELFxuICAgICAgICAgICAgUmVhZFByZWZlcmVuY2UuTkVBUkVTVCxcbiAgICAgICAgICAgIG51bGxcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBWQUxJRF9NT0RFUy5oYXMobW9kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIGlmIGEgbW9kZSBpcyBsZWdhbFxuICAgICAqXG4gICAgICogQHBhcmFtIG1vZGUgLSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcmVhZCBwcmVmZXJlbmNlIG1vZGUuXG4gICAgICovXG4gICAgaXNWYWxpZChtb2RlKSB7XG4gICAgICAgIHJldHVybiBSZWFkUHJlZmVyZW5jZS5pc1ZhbGlkKHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJyA/IG1vZGUgOiB0aGlzLm1vZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGlzIHJlYWRQcmVmZXJlbmNlIG5lZWRzIHRoZSBcIlNlY29uZGFyeU9rXCIgYml0IHdoZW4gc2VudCBvdmVyIHRoZSB3aXJlXG4gICAgICogQHNlZSBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2UvbW9uZ29kYi13aXJlLXByb3RvY29sLyNvcC1xdWVyeVxuICAgICAqL1xuICAgIHNlY29uZGFyeU9rKCkge1xuICAgICAgICBjb25zdCBORUVEU19TRUNPTkRBUllPSyA9IG5ldyBTZXQoW1xuICAgICAgICAgICAgUmVhZFByZWZlcmVuY2UuUFJJTUFSWV9QUkVGRVJSRUQsXG4gICAgICAgICAgICBSZWFkUHJlZmVyZW5jZS5TRUNPTkRBUlksXG4gICAgICAgICAgICBSZWFkUHJlZmVyZW5jZS5TRUNPTkRBUllfUFJFRkVSUkVELFxuICAgICAgICAgICAgUmVhZFByZWZlcmVuY2UuTkVBUkVTVFxuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIE5FRURTX1NFQ09OREFSWU9LLmhhcyh0aGlzLm1vZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgdHdvIFJlYWRQcmVmZXJlbmNlcyBhcmUgZXF1aXZhbGVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHJlYWRQcmVmZXJlbmNlIC0gVGhlIHJlYWQgcHJlZmVyZW5jZSB3aXRoIHdoaWNoIHRvIGNoZWNrIGVxdWFsaXR5XG4gICAgICovXG4gICAgZXF1YWxzKHJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgIHJldHVybiByZWFkUHJlZmVyZW5jZS5tb2RlID09PSB0aGlzLm1vZGU7XG4gICAgfVxuICAgIC8qKiBSZXR1cm4gSlNPTiByZXByZXNlbnRhdGlvbiAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgcmVhZFByZWZlcmVuY2UgPSB7IG1vZGU6IHRoaXMubW9kZSB9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnRhZ3MpKVxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2UudGFncyA9IHRoaXMudGFncztcbiAgICAgICAgaWYgKHRoaXMubWF4U3RhbGVuZXNzU2Vjb25kcylcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlLm1heFN0YWxlbmVzc1NlY29uZHMgPSB0aGlzLm1heFN0YWxlbmVzc1NlY29uZHM7XG4gICAgICAgIGlmICh0aGlzLmhlZGdlKVxuICAgICAgICAgICAgcmVhZFByZWZlcmVuY2UuaGVkZ2UgPSB0aGlzLmhlZGdlO1xuICAgICAgICByZXR1cm4gcmVhZFByZWZlcmVuY2U7XG4gICAgfVxufVxuUmVhZFByZWZlcmVuY2UuUFJJTUFSWSA9IGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlLnByaW1hcnk7XG5SZWFkUHJlZmVyZW5jZS5QUklNQVJZX1BSRUZFUlJFRCA9IGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlLnByaW1hcnlQcmVmZXJyZWQ7XG5SZWFkUHJlZmVyZW5jZS5TRUNPTkRBUlkgPSBleHBvcnRzLlJlYWRQcmVmZXJlbmNlTW9kZS5zZWNvbmRhcnk7XG5SZWFkUHJlZmVyZW5jZS5TRUNPTkRBUllfUFJFRkVSUkVEID0gZXhwb3J0cy5SZWFkUHJlZmVyZW5jZU1vZGUuc2Vjb25kYXJ5UHJlZmVycmVkO1xuUmVhZFByZWZlcmVuY2UuTkVBUkVTVCA9IGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlLm5lYXJlc3Q7XG5SZWFkUHJlZmVyZW5jZS5wcmltYXJ5ID0gbmV3IFJlYWRQcmVmZXJlbmNlKGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlLnByaW1hcnkpO1xuUmVhZFByZWZlcmVuY2UucHJpbWFyeVByZWZlcnJlZCA9IG5ldyBSZWFkUHJlZmVyZW5jZShleHBvcnRzLlJlYWRQcmVmZXJlbmNlTW9kZS5wcmltYXJ5UHJlZmVycmVkKTtcblJlYWRQcmVmZXJlbmNlLnNlY29uZGFyeSA9IG5ldyBSZWFkUHJlZmVyZW5jZShleHBvcnRzLlJlYWRQcmVmZXJlbmNlTW9kZS5zZWNvbmRhcnkpO1xuUmVhZFByZWZlcmVuY2Uuc2Vjb25kYXJ5UHJlZmVycmVkID0gbmV3IFJlYWRQcmVmZXJlbmNlKGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlLnNlY29uZGFyeVByZWZlcnJlZCk7XG5SZWFkUHJlZmVyZW5jZS5uZWFyZXN0ID0gbmV3IFJlYWRQcmVmZXJlbmNlKGV4cG9ydHMuUmVhZFByZWZlcmVuY2VNb2RlLm5lYXJlc3QpO1xuZXhwb3J0cy5SZWFkUHJlZmVyZW5jZSA9IFJlYWRQcmVmZXJlbmNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhZF9wcmVmZXJlbmNlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlJlYWRQcmVmZXJlbmNlIiwiUmVhZFByZWZlcmVuY2VNb2RlIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJmcmVlemUiLCJwcmltYXJ5IiwicHJpbWFyeVByZWZlcnJlZCIsInNlY29uZGFyeSIsInNlY29uZGFyeVByZWZlcnJlZCIsIm5lYXJlc3QiLCJjb25zdHJ1Y3RvciIsIm1vZGUiLCJ0YWdzIiwib3B0aW9ucyIsImlzVmFsaWQiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsIkFycmF5IiwiaXNBcnJheSIsInVuZGVmaW5lZCIsImhlZGdlIiwibWF4U3RhbGVuZXNzU2Vjb25kcyIsIm1pbldpcmVWZXJzaW9uIiwiUFJJTUFSWSIsImxlbmd0aCIsInByZWZlcmVuY2UiLCJmcm9tU3RyaW5nIiwiZnJvbU9wdGlvbnMiLCJyZWFkUHJlZmVyZW5jZSIsInNlc3Npb24iLCJ0cmFuc2FjdGlvbiIsInJlYWRQcmVmZXJlbmNlVGFncyIsInRyYW5zbGF0ZSIsInIiLCJWQUxJRF9NT0RFUyIsIlNldCIsIlBSSU1BUllfUFJFRkVSUkVEIiwiU0VDT05EQVJZIiwiU0VDT05EQVJZX1BSRUZFUlJFRCIsIk5FQVJFU1QiLCJoYXMiLCJzZWNvbmRhcnlPayIsIk5FRURTX1NFQ09OREFSWU9LIiwiZXF1YWxzIiwidG9KU09OIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/read_preference.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/common.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/common.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports._advanceClusterTime = exports.drainTimerQueue = exports.ServerType = exports.TopologyType = exports.STATE_CONNECTED = exports.STATE_CONNECTING = exports.STATE_CLOSED = exports.STATE_CLOSING = void 0;\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\n// shared state names\nexports.STATE_CLOSING = \"closing\";\nexports.STATE_CLOSED = \"closed\";\nexports.STATE_CONNECTING = \"connecting\";\nexports.STATE_CONNECTED = \"connected\";\n/**\n * An enumeration of topology types we know about\n * @public\n */ exports.TopologyType = Object.freeze({\n    Single: \"Single\",\n    ReplicaSetNoPrimary: \"ReplicaSetNoPrimary\",\n    ReplicaSetWithPrimary: \"ReplicaSetWithPrimary\",\n    Sharded: \"Sharded\",\n    Unknown: \"Unknown\",\n    LoadBalanced: \"LoadBalanced\"\n});\n/**\n * An enumeration of server types we know about\n * @public\n */ exports.ServerType = Object.freeze({\n    Standalone: \"Standalone\",\n    Mongos: \"Mongos\",\n    PossiblePrimary: \"PossiblePrimary\",\n    RSPrimary: \"RSPrimary\",\n    RSSecondary: \"RSSecondary\",\n    RSArbiter: \"RSArbiter\",\n    RSOther: \"RSOther\",\n    RSGhost: \"RSGhost\",\n    Unknown: \"Unknown\",\n    LoadBalancer: \"LoadBalancer\"\n});\n/** @internal */ function drainTimerQueue(queue) {\n    queue.forEach(timers_1.clearTimeout);\n    queue.clear();\n}\nexports.drainTimerQueue = drainTimerQueue;\n/** Shared function to determine clusterTime for a given topology or session */ function _advanceClusterTime(entity, $clusterTime) {\n    if (entity.clusterTime == null) {\n        entity.clusterTime = $clusterTime;\n    } else {\n        if ($clusterTime.clusterTime.greaterThan(entity.clusterTime.clusterTime)) {\n            entity.clusterTime = $clusterTime;\n        }\n    }\n}\nexports._advanceClusterTime = _advanceClusterTime; //# sourceMappingURL=common.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9jb21tb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDJCQUEyQixHQUFHQSx1QkFBdUIsR0FBR0Esa0JBQWtCLEdBQUdBLG9CQUFvQixHQUFHQSx1QkFBdUIsR0FBR0Esd0JBQXdCLEdBQUdBLG9CQUFvQixHQUFHQSxxQkFBcUIsR0FBRyxLQUFLO0FBQzdNLE1BQU1VLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLHFCQUFxQjtBQUNyQlgscUJBQXFCLEdBQUc7QUFDeEJBLG9CQUFvQixHQUFHO0FBQ3ZCQSx3QkFBd0IsR0FBRztBQUMzQkEsdUJBQXVCLEdBQUc7QUFDMUI7OztDQUdDLEdBQ0RBLG9CQUFvQixHQUFHRixPQUFPYyxNQUFNLENBQUM7SUFDakNDLFFBQVE7SUFDUkMscUJBQXFCO0lBQ3JCQyx1QkFBdUI7SUFDdkJDLFNBQVM7SUFDVEMsU0FBUztJQUNUQyxjQUFjO0FBQ2xCO0FBQ0E7OztDQUdDLEdBQ0RsQixrQkFBa0IsR0FBR0YsT0FBT2MsTUFBTSxDQUFDO0lBQy9CTyxZQUFZO0lBQ1pDLFFBQVE7SUFDUkMsaUJBQWlCO0lBQ2pCQyxXQUFXO0lBQ1hDLGFBQWE7SUFDYkMsV0FBVztJQUNYQyxTQUFTO0lBQ1RDLFNBQVM7SUFDVFQsU0FBUztJQUNUVSxjQUFjO0FBQ2xCO0FBQ0EsY0FBYyxHQUNkLFNBQVN4QixnQkFBZ0J5QixLQUFLO0lBQzFCQSxNQUFNQyxPQUFPLENBQUNuQixTQUFTb0IsWUFBWTtJQUNuQ0YsTUFBTUcsS0FBSztBQUNmO0FBQ0EvQix1QkFBdUIsR0FBR0c7QUFDMUIsNkVBQTZFLEdBQzdFLFNBQVNELG9CQUFvQjhCLE1BQU0sRUFBRUMsWUFBWTtJQUM3QyxJQUFJRCxPQUFPRSxXQUFXLElBQUksTUFBTTtRQUM1QkYsT0FBT0UsV0FBVyxHQUFHRDtJQUN6QixPQUNLO1FBQ0QsSUFBSUEsYUFBYUMsV0FBVyxDQUFDQyxXQUFXLENBQUNILE9BQU9FLFdBQVcsQ0FBQ0EsV0FBVyxHQUFHO1lBQ3RFRixPQUFPRSxXQUFXLEdBQUdEO1FBQ3pCO0lBQ0o7QUFDSjtBQUNBakMsMkJBQTJCLEdBQUdFLHFCQUM5QixrQ0FBa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3NkYW0vY29tbW9uLmpzP2ZhNzMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLl9hZHZhbmNlQ2x1c3RlclRpbWUgPSBleHBvcnRzLmRyYWluVGltZXJRdWV1ZSA9IGV4cG9ydHMuU2VydmVyVHlwZSA9IGV4cG9ydHMuVG9wb2xvZ3lUeXBlID0gZXhwb3J0cy5TVEFURV9DT05ORUNURUQgPSBleHBvcnRzLlNUQVRFX0NPTk5FQ1RJTkcgPSBleHBvcnRzLlNUQVRFX0NMT1NFRCA9IGV4cG9ydHMuU1RBVEVfQ0xPU0lORyA9IHZvaWQgMDtcbmNvbnN0IHRpbWVyc18xID0gcmVxdWlyZShcInRpbWVyc1wiKTtcbi8vIHNoYXJlZCBzdGF0ZSBuYW1lc1xuZXhwb3J0cy5TVEFURV9DTE9TSU5HID0gJ2Nsb3NpbmcnO1xuZXhwb3J0cy5TVEFURV9DTE9TRUQgPSAnY2xvc2VkJztcbmV4cG9ydHMuU1RBVEVfQ09OTkVDVElORyA9ICdjb25uZWN0aW5nJztcbmV4cG9ydHMuU1RBVEVfQ09OTkVDVEVEID0gJ2Nvbm5lY3RlZCc7XG4vKipcbiAqIEFuIGVudW1lcmF0aW9uIG9mIHRvcG9sb2d5IHR5cGVzIHdlIGtub3cgYWJvdXRcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0cy5Ub3BvbG9neVR5cGUgPSBPYmplY3QuZnJlZXplKHtcbiAgICBTaW5nbGU6ICdTaW5nbGUnLFxuICAgIFJlcGxpY2FTZXROb1ByaW1hcnk6ICdSZXBsaWNhU2V0Tm9QcmltYXJ5JyxcbiAgICBSZXBsaWNhU2V0V2l0aFByaW1hcnk6ICdSZXBsaWNhU2V0V2l0aFByaW1hcnknLFxuICAgIFNoYXJkZWQ6ICdTaGFyZGVkJyxcbiAgICBVbmtub3duOiAnVW5rbm93bicsXG4gICAgTG9hZEJhbGFuY2VkOiAnTG9hZEJhbGFuY2VkJ1xufSk7XG4vKipcbiAqIEFuIGVudW1lcmF0aW9uIG9mIHNlcnZlciB0eXBlcyB3ZSBrbm93IGFib3V0XG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydHMuU2VydmVyVHlwZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIFN0YW5kYWxvbmU6ICdTdGFuZGFsb25lJyxcbiAgICBNb25nb3M6ICdNb25nb3MnLFxuICAgIFBvc3NpYmxlUHJpbWFyeTogJ1Bvc3NpYmxlUHJpbWFyeScsXG4gICAgUlNQcmltYXJ5OiAnUlNQcmltYXJ5JyxcbiAgICBSU1NlY29uZGFyeTogJ1JTU2Vjb25kYXJ5JyxcbiAgICBSU0FyYml0ZXI6ICdSU0FyYml0ZXInLFxuICAgIFJTT3RoZXI6ICdSU090aGVyJyxcbiAgICBSU0dob3N0OiAnUlNHaG9zdCcsXG4gICAgVW5rbm93bjogJ1Vua25vd24nLFxuICAgIExvYWRCYWxhbmNlcjogJ0xvYWRCYWxhbmNlcidcbn0pO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gZHJhaW5UaW1lclF1ZXVlKHF1ZXVlKSB7XG4gICAgcXVldWUuZm9yRWFjaCh0aW1lcnNfMS5jbGVhclRpbWVvdXQpO1xuICAgIHF1ZXVlLmNsZWFyKCk7XG59XG5leHBvcnRzLmRyYWluVGltZXJRdWV1ZSA9IGRyYWluVGltZXJRdWV1ZTtcbi8qKiBTaGFyZWQgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGNsdXN0ZXJUaW1lIGZvciBhIGdpdmVuIHRvcG9sb2d5IG9yIHNlc3Npb24gKi9cbmZ1bmN0aW9uIF9hZHZhbmNlQ2x1c3RlclRpbWUoZW50aXR5LCAkY2x1c3RlclRpbWUpIHtcbiAgICBpZiAoZW50aXR5LmNsdXN0ZXJUaW1lID09IG51bGwpIHtcbiAgICAgICAgZW50aXR5LmNsdXN0ZXJUaW1lID0gJGNsdXN0ZXJUaW1lO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCRjbHVzdGVyVGltZS5jbHVzdGVyVGltZS5ncmVhdGVyVGhhbihlbnRpdHkuY2x1c3RlclRpbWUuY2x1c3RlclRpbWUpKSB7XG4gICAgICAgICAgICBlbnRpdHkuY2x1c3RlclRpbWUgPSAkY2x1c3RlclRpbWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLl9hZHZhbmNlQ2x1c3RlclRpbWUgPSBfYWR2YW5jZUNsdXN0ZXJUaW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9hZHZhbmNlQ2x1c3RlclRpbWUiLCJkcmFpblRpbWVyUXVldWUiLCJTZXJ2ZXJUeXBlIiwiVG9wb2xvZ3lUeXBlIiwiU1RBVEVfQ09OTkVDVEVEIiwiU1RBVEVfQ09OTkVDVElORyIsIlNUQVRFX0NMT1NFRCIsIlNUQVRFX0NMT1NJTkciLCJ0aW1lcnNfMSIsInJlcXVpcmUiLCJmcmVlemUiLCJTaW5nbGUiLCJSZXBsaWNhU2V0Tm9QcmltYXJ5IiwiUmVwbGljYVNldFdpdGhQcmltYXJ5IiwiU2hhcmRlZCIsIlVua25vd24iLCJMb2FkQmFsYW5jZWQiLCJTdGFuZGFsb25lIiwiTW9uZ29zIiwiUG9zc2libGVQcmltYXJ5IiwiUlNQcmltYXJ5IiwiUlNTZWNvbmRhcnkiLCJSU0FyYml0ZXIiLCJSU090aGVyIiwiUlNHaG9zdCIsIkxvYWRCYWxhbmNlciIsInF1ZXVlIiwiZm9yRWFjaCIsImNsZWFyVGltZW91dCIsImNsZWFyIiwiZW50aXR5IiwiJGNsdXN0ZXJUaW1lIiwiY2x1c3RlclRpbWUiLCJncmVhdGVyVGhhbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/common.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/events.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/events.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ServerHeartbeatFailedEvent = exports.ServerHeartbeatSucceededEvent = exports.ServerHeartbeatStartedEvent = exports.TopologyClosedEvent = exports.TopologyOpeningEvent = exports.TopologyDescriptionChangedEvent = exports.ServerClosedEvent = exports.ServerOpeningEvent = exports.ServerDescriptionChangedEvent = void 0;\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\n/**\n * Emitted when server description changes, but does NOT include changes to the RTT.\n * @public\n * @category Event\n */ class ServerDescriptionChangedEvent {\n    /** @internal */ constructor(topologyId, address, previousDescription, newDescription){\n        this.name = constants_1.SERVER_DESCRIPTION_CHANGED;\n        this.topologyId = topologyId;\n        this.address = address;\n        this.previousDescription = previousDescription;\n        this.newDescription = newDescription;\n    }\n}\nexports.ServerDescriptionChangedEvent = ServerDescriptionChangedEvent;\n/**\n * Emitted when server is initialized.\n * @public\n * @category Event\n */ class ServerOpeningEvent {\n    /** @internal */ constructor(topologyId, address){\n        /** @internal */ this.name = constants_1.SERVER_OPENING;\n        this.topologyId = topologyId;\n        this.address = address;\n    }\n}\nexports.ServerOpeningEvent = ServerOpeningEvent;\n/**\n * Emitted when server is closed.\n * @public\n * @category Event\n */ class ServerClosedEvent {\n    /** @internal */ constructor(topologyId, address){\n        /** @internal */ this.name = constants_1.SERVER_CLOSED;\n        this.topologyId = topologyId;\n        this.address = address;\n    }\n}\nexports.ServerClosedEvent = ServerClosedEvent;\n/**\n * Emitted when topology description changes.\n * @public\n * @category Event\n */ class TopologyDescriptionChangedEvent {\n    /** @internal */ constructor(topologyId, previousDescription, newDescription){\n        /** @internal */ this.name = constants_1.TOPOLOGY_DESCRIPTION_CHANGED;\n        this.topologyId = topologyId;\n        this.previousDescription = previousDescription;\n        this.newDescription = newDescription;\n    }\n}\nexports.TopologyDescriptionChangedEvent = TopologyDescriptionChangedEvent;\n/**\n * Emitted when topology is initialized.\n * @public\n * @category Event\n */ class TopologyOpeningEvent {\n    /** @internal */ constructor(topologyId){\n        /** @internal */ this.name = constants_1.TOPOLOGY_OPENING;\n        this.topologyId = topologyId;\n    }\n}\nexports.TopologyOpeningEvent = TopologyOpeningEvent;\n/**\n * Emitted when topology is closed.\n * @public\n * @category Event\n */ class TopologyClosedEvent {\n    /** @internal */ constructor(topologyId){\n        /** @internal */ this.name = constants_1.TOPOLOGY_CLOSED;\n        this.topologyId = topologyId;\n    }\n}\nexports.TopologyClosedEvent = TopologyClosedEvent;\n/**\n * Emitted when the server monitors hello command is started - immediately before\n * the hello command is serialized into raw BSON and written to the socket.\n *\n * @public\n * @category Event\n */ class ServerHeartbeatStartedEvent {\n    /** @internal */ constructor(connectionId, awaited){\n        /** @internal */ this.name = constants_1.SERVER_HEARTBEAT_STARTED;\n        this.connectionId = connectionId;\n        this.awaited = awaited;\n    }\n}\nexports.ServerHeartbeatStartedEvent = ServerHeartbeatStartedEvent;\n/**\n * Emitted when the server monitors hello succeeds.\n * @public\n * @category Event\n */ class ServerHeartbeatSucceededEvent {\n    /** @internal */ constructor(connectionId, duration, reply, awaited){\n        /** @internal */ this.name = constants_1.SERVER_HEARTBEAT_SUCCEEDED;\n        this.connectionId = connectionId;\n        this.duration = duration;\n        this.reply = reply ?? {};\n        this.awaited = awaited;\n    }\n}\nexports.ServerHeartbeatSucceededEvent = ServerHeartbeatSucceededEvent;\n/**\n * Emitted when the server monitors hello fails, either with an ok: 0 or a socket exception.\n * @public\n * @category Event\n */ class ServerHeartbeatFailedEvent {\n    /** @internal */ constructor(connectionId, duration, failure, awaited){\n        /** @internal */ this.name = constants_1.SERVER_HEARTBEAT_FAILED;\n        this.connectionId = connectionId;\n        this.duration = duration;\n        this.failure = failure;\n        this.awaited = awaited;\n    }\n}\nexports.ServerHeartbeatFailedEvent = ServerHeartbeatFailedEvent; //# sourceMappingURL=events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9ldmVudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGtDQUFrQyxHQUFHQSxxQ0FBcUMsR0FBR0EsbUNBQW1DLEdBQUdBLDJCQUEyQixHQUFHQSw0QkFBNEIsR0FBR0EsdUNBQXVDLEdBQUdBLHlCQUF5QixHQUFHQSwwQkFBMEIsR0FBR0EscUNBQXFDLEdBQUcsS0FBSztBQUNoVSxNQUFNVyxjQUFjQyxtQkFBT0EsQ0FBQyxtRUFBYztBQUMxQzs7OztDQUlDLEdBQ0QsTUFBTUY7SUFDRixjQUFjLEdBQ2RHLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxtQkFBbUIsRUFBRUMsY0FBYyxDQUFFO1FBQ2xFLElBQUksQ0FBQ0MsSUFBSSxHQUFHUCxZQUFZUSwwQkFBMEI7UUFDbEQsSUFBSSxDQUFDTCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0MsbUJBQW1CLEdBQUdBO1FBQzNCLElBQUksQ0FBQ0MsY0FBYyxHQUFHQTtJQUMxQjtBQUNKO0FBQ0FqQixxQ0FBcUMsR0FBR1U7QUFDeEM7Ozs7Q0FJQyxHQUNELE1BQU1EO0lBQ0YsY0FBYyxHQUNkSSxZQUFZQyxVQUFVLEVBQUVDLE9BQU8sQ0FBRTtRQUM3QixjQUFjLEdBQ2QsSUFBSSxDQUFDRyxJQUFJLEdBQUdQLFlBQVlTLGNBQWM7UUFDdEMsSUFBSSxDQUFDTixVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtJQUNuQjtBQUNKO0FBQ0FmLDBCQUEwQixHQUFHUztBQUM3Qjs7OztDQUlDLEdBQ0QsTUFBTUQ7SUFDRixjQUFjLEdBQ2RLLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxDQUFFO1FBQzdCLGNBQWMsR0FDZCxJQUFJLENBQUNHLElBQUksR0FBR1AsWUFBWVUsYUFBYTtRQUNyQyxJQUFJLENBQUNQLFVBQVUsR0FBR0E7UUFDbEIsSUFBSSxDQUFDQyxPQUFPLEdBQUdBO0lBQ25CO0FBQ0o7QUFDQWYseUJBQXlCLEdBQUdRO0FBQzVCOzs7O0NBSUMsR0FDRCxNQUFNRDtJQUNGLGNBQWMsR0FDZE0sWUFBWUMsVUFBVSxFQUFFRSxtQkFBbUIsRUFBRUMsY0FBYyxDQUFFO1FBQ3pELGNBQWMsR0FDZCxJQUFJLENBQUNDLElBQUksR0FBR1AsWUFBWVcsNEJBQTRCO1FBQ3BELElBQUksQ0FBQ1IsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNFLG1CQUFtQixHQUFHQTtRQUMzQixJQUFJLENBQUNDLGNBQWMsR0FBR0E7SUFDMUI7QUFDSjtBQUNBakIsdUNBQXVDLEdBQUdPO0FBQzFDOzs7O0NBSUMsR0FDRCxNQUFNRDtJQUNGLGNBQWMsR0FDZE8sWUFBWUMsVUFBVSxDQUFFO1FBQ3BCLGNBQWMsR0FDZCxJQUFJLENBQUNJLElBQUksR0FBR1AsWUFBWVksZ0JBQWdCO1FBQ3hDLElBQUksQ0FBQ1QsVUFBVSxHQUFHQTtJQUN0QjtBQUNKO0FBQ0FkLDRCQUE0QixHQUFHTTtBQUMvQjs7OztDQUlDLEdBQ0QsTUFBTUQ7SUFDRixjQUFjLEdBQ2RRLFlBQVlDLFVBQVUsQ0FBRTtRQUNwQixjQUFjLEdBQ2QsSUFBSSxDQUFDSSxJQUFJLEdBQUdQLFlBQVlhLGVBQWU7UUFDdkMsSUFBSSxDQUFDVixVQUFVLEdBQUdBO0lBQ3RCO0FBQ0o7QUFDQWQsMkJBQTJCLEdBQUdLO0FBQzlCOzs7Ozs7Q0FNQyxHQUNELE1BQU1EO0lBQ0YsY0FBYyxHQUNkUyxZQUFZWSxZQUFZLEVBQUVDLE9BQU8sQ0FBRTtRQUMvQixjQUFjLEdBQ2QsSUFBSSxDQUFDUixJQUFJLEdBQUdQLFlBQVlnQix3QkFBd0I7UUFDaEQsSUFBSSxDQUFDRixZQUFZLEdBQUdBO1FBQ3BCLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtJQUNuQjtBQUNKO0FBQ0ExQixtQ0FBbUMsR0FBR0k7QUFDdEM7Ozs7Q0FJQyxHQUNELE1BQU1EO0lBQ0YsY0FBYyxHQUNkVSxZQUFZWSxZQUFZLEVBQUVHLFFBQVEsRUFBRUMsS0FBSyxFQUFFSCxPQUFPLENBQUU7UUFDaEQsY0FBYyxHQUNkLElBQUksQ0FBQ1IsSUFBSSxHQUFHUCxZQUFZbUIsMEJBQTBCO1FBQ2xELElBQUksQ0FBQ0wsWUFBWSxHQUFHQTtRQUNwQixJQUFJLENBQUNHLFFBQVEsR0FBR0E7UUFDaEIsSUFBSSxDQUFDQyxLQUFLLEdBQUdBLFNBQVMsQ0FBQztRQUN2QixJQUFJLENBQUNILE9BQU8sR0FBR0E7SUFDbkI7QUFDSjtBQUNBMUIscUNBQXFDLEdBQUdHO0FBQ3hDOzs7O0NBSUMsR0FDRCxNQUFNRDtJQUNGLGNBQWMsR0FDZFcsWUFBWVksWUFBWSxFQUFFRyxRQUFRLEVBQUVHLE9BQU8sRUFBRUwsT0FBTyxDQUFFO1FBQ2xELGNBQWMsR0FDZCxJQUFJLENBQUNSLElBQUksR0FBR1AsWUFBWXFCLHVCQUF1QjtRQUMvQyxJQUFJLENBQUNQLFlBQVksR0FBR0E7UUFDcEIsSUFBSSxDQUFDRyxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0csT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0wsT0FBTyxHQUFHQTtJQUNuQjtBQUNKO0FBQ0ExQixrQ0FBa0MsR0FBR0UsNEJBQ3JDLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9ldmVudHMuanM/OTU2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU2VydmVySGVhcnRiZWF0RmFpbGVkRXZlbnQgPSBleHBvcnRzLlNlcnZlckhlYXJ0YmVhdFN1Y2NlZWRlZEV2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJIZWFydGJlYXRTdGFydGVkRXZlbnQgPSBleHBvcnRzLlRvcG9sb2d5Q2xvc2VkRXZlbnQgPSBleHBvcnRzLlRvcG9sb2d5T3BlbmluZ0V2ZW50ID0gZXhwb3J0cy5Ub3BvbG9neURlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJDbG9zZWRFdmVudCA9IGV4cG9ydHMuU2VydmVyT3BlbmluZ0V2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJEZXNjcmlwdGlvbkNoYW5nZWRFdmVudCA9IHZvaWQgMDtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbi8qKlxuICogRW1pdHRlZCB3aGVuIHNlcnZlciBkZXNjcmlwdGlvbiBjaGFuZ2VzLCBidXQgZG9lcyBOT1QgaW5jbHVkZSBjaGFuZ2VzIHRvIHRoZSBSVFQuXG4gKiBAcHVibGljXG4gKiBAY2F0ZWdvcnkgRXZlbnRcbiAqL1xuY2xhc3MgU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcih0b3BvbG9neUlkLCBhZGRyZXNzLCBwcmV2aW91c0Rlc2NyaXB0aW9uLCBuZXdEZXNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5TRVJWRVJfREVTQ1JJUFRJT05fQ0hBTkdFRDtcbiAgICAgICAgdGhpcy50b3BvbG9neUlkID0gdG9wb2xvZ3lJZDtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgdGhpcy5wcmV2aW91c0Rlc2NyaXB0aW9uID0gcHJldmlvdXNEZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5uZXdEZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVyRGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQgPSBTZXJ2ZXJEZXNjcmlwdGlvbkNoYW5nZWRFdmVudDtcbi8qKlxuICogRW1pdHRlZCB3aGVuIHNlcnZlciBpcyBpbml0aWFsaXplZC5cbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBTZXJ2ZXJPcGVuaW5nRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcih0b3BvbG9neUlkLCBhZGRyZXNzKSB7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuU0VSVkVSX09QRU5JTkc7XG4gICAgICAgIHRoaXMudG9wb2xvZ3lJZCA9IHRvcG9sb2d5SWQ7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgfVxufVxuZXhwb3J0cy5TZXJ2ZXJPcGVuaW5nRXZlbnQgPSBTZXJ2ZXJPcGVuaW5nRXZlbnQ7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiBzZXJ2ZXIgaXMgY2xvc2VkLlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFNlcnZlckNsb3NlZEV2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IodG9wb2xvZ3lJZCwgYWRkcmVzcykge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLlNFUlZFUl9DTE9TRUQ7XG4gICAgICAgIHRoaXMudG9wb2xvZ3lJZCA9IHRvcG9sb2d5SWQ7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgfVxufVxuZXhwb3J0cy5TZXJ2ZXJDbG9zZWRFdmVudCA9IFNlcnZlckNsb3NlZEV2ZW50O1xuLyoqXG4gKiBFbWl0dGVkIHdoZW4gdG9wb2xvZ3kgZGVzY3JpcHRpb24gY2hhbmdlcy5cbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBUb3BvbG9neURlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IodG9wb2xvZ3lJZCwgcHJldmlvdXNEZXNjcmlwdGlvbiwgbmV3RGVzY3JpcHRpb24pIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VEO1xuICAgICAgICB0aGlzLnRvcG9sb2d5SWQgPSB0b3BvbG9neUlkO1xuICAgICAgICB0aGlzLnByZXZpb3VzRGVzY3JpcHRpb24gPSBwcmV2aW91c0Rlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLm5ld0Rlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgfVxufVxuZXhwb3J0cy5Ub3BvbG9neURlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50ID0gVG9wb2xvZ3lEZXNjcmlwdGlvbkNoYW5nZWRFdmVudDtcbi8qKlxuICogRW1pdHRlZCB3aGVuIHRvcG9sb2d5IGlzIGluaXRpYWxpemVkLlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFRvcG9sb2d5T3BlbmluZ0V2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IodG9wb2xvZ3lJZCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLlRPUE9MT0dZX09QRU5JTkc7XG4gICAgICAgIHRoaXMudG9wb2xvZ3lJZCA9IHRvcG9sb2d5SWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Ub3BvbG9neU9wZW5pbmdFdmVudCA9IFRvcG9sb2d5T3BlbmluZ0V2ZW50O1xuLyoqXG4gKiBFbWl0dGVkIHdoZW4gdG9wb2xvZ3kgaXMgY2xvc2VkLlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFRvcG9sb2d5Q2xvc2VkRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcih0b3BvbG9neUlkKSB7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RhbnRzXzEuVE9QT0xPR1lfQ0xPU0VEO1xuICAgICAgICB0aGlzLnRvcG9sb2d5SWQgPSB0b3BvbG9neUlkO1xuICAgIH1cbn1cbmV4cG9ydHMuVG9wb2xvZ3lDbG9zZWRFdmVudCA9IFRvcG9sb2d5Q2xvc2VkRXZlbnQ7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiB0aGUgc2VydmVyIG1vbml0b3LigJlzIGhlbGxvIGNvbW1hbmQgaXMgc3RhcnRlZCAtIGltbWVkaWF0ZWx5IGJlZm9yZVxuICogdGhlIGhlbGxvIGNvbW1hbmQgaXMgc2VyaWFsaXplZCBpbnRvIHJhdyBCU09OIGFuZCB3cml0dGVuIHRvIHRoZSBzb2NrZXQuXG4gKlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgYXdhaXRlZCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMuYXdhaXRlZCA9IGF3YWl0ZWQ7XG4gICAgfVxufVxuZXhwb3J0cy5TZXJ2ZXJIZWFydGJlYXRTdGFydGVkRXZlbnQgPSBTZXJ2ZXJIZWFydGJlYXRTdGFydGVkRXZlbnQ7XG4vKipcbiAqIEVtaXR0ZWQgd2hlbiB0aGUgc2VydmVyIG1vbml0b3LigJlzIGhlbGxvIHN1Y2NlZWRzLlxuICogQHB1YmxpY1xuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFNlcnZlckhlYXJ0YmVhdFN1Y2NlZWRlZEV2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCBkdXJhdGlvbiwgcmVwbHksIGF3YWl0ZWQpIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5TRVJWRVJfSEVBUlRCRUFUX1NVQ0NFRURFRDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbiAgICAgICAgdGhpcy5yZXBseSA9IHJlcGx5ID8/IHt9O1xuICAgICAgICB0aGlzLmF3YWl0ZWQgPSBhd2FpdGVkO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVySGVhcnRiZWF0U3VjY2VlZGVkRXZlbnQgPSBTZXJ2ZXJIZWFydGJlYXRTdWNjZWVkZWRFdmVudDtcbi8qKlxuICogRW1pdHRlZCB3aGVuIHRoZSBzZXJ2ZXIgbW9uaXRvcuKAmXMgaGVsbG8gZmFpbHMsIGVpdGhlciB3aXRoIGFuIOKAnG9rOiAw4oCdIG9yIGEgc29ja2V0IGV4Y2VwdGlvbi5cbiAqIEBwdWJsaWNcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBTZXJ2ZXJIZWFydGJlYXRGYWlsZWRFdmVudCB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgZHVyYXRpb24sIGZhaWx1cmUsIGF3YWl0ZWQpIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5TRVJWRVJfSEVBUlRCRUFUX0ZBSUxFRDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbiAgICAgICAgdGhpcy5mYWlsdXJlID0gZmFpbHVyZTtcbiAgICAgICAgdGhpcy5hd2FpdGVkID0gYXdhaXRlZDtcbiAgICB9XG59XG5leHBvcnRzLlNlcnZlckhlYXJ0YmVhdEZhaWxlZEV2ZW50ID0gU2VydmVySGVhcnRiZWF0RmFpbGVkRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiU2VydmVySGVhcnRiZWF0RmFpbGVkRXZlbnQiLCJTZXJ2ZXJIZWFydGJlYXRTdWNjZWVkZWRFdmVudCIsIlNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudCIsIlRvcG9sb2d5Q2xvc2VkRXZlbnQiLCJUb3BvbG9neU9wZW5pbmdFdmVudCIsIlRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQiLCJTZXJ2ZXJDbG9zZWRFdmVudCIsIlNlcnZlck9wZW5pbmdFdmVudCIsIlNlcnZlckRlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50IiwiY29uc3RhbnRzXzEiLCJyZXF1aXJlIiwiY29uc3RydWN0b3IiLCJ0b3BvbG9neUlkIiwiYWRkcmVzcyIsInByZXZpb3VzRGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsIm5hbWUiLCJTRVJWRVJfREVTQ1JJUFRJT05fQ0hBTkdFRCIsIlNFUlZFUl9PUEVOSU5HIiwiU0VSVkVSX0NMT1NFRCIsIlRPUE9MT0dZX0RFU0NSSVBUSU9OX0NIQU5HRUQiLCJUT1BPTE9HWV9PUEVOSU5HIiwiVE9QT0xPR1lfQ0xPU0VEIiwiY29ubmVjdGlvbklkIiwiYXdhaXRlZCIsIlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCIsImR1cmF0aW9uIiwicmVwbHkiLCJTRVJWRVJfSEVBUlRCRUFUX1NVQ0NFRURFRCIsImZhaWx1cmUiLCJTRVJWRVJfSEVBUlRCRUFUX0ZBSUxFRCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/monitor.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/monitor.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MonitorInterval = exports.RTTPinger = exports.Monitor = exports.ServerMonitoringMode = void 0;\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst connect_1 = __webpack_require__(/*! ../cmap/connect */ \"(ssr)/./node_modules/mongodb/lib/cmap/connect.js\");\nconst client_metadata_1 = __webpack_require__(/*! ../cmap/handshake/client_metadata */ \"(ssr)/./node_modules/mongodb/lib/cmap/handshake/client_metadata.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_logger_1 = __webpack_require__(/*! ../mongo_logger */ \"(ssr)/./node_modules/mongodb/lib/mongo_logger.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst events_1 = __webpack_require__(/*! ./events */ \"(ssr)/./node_modules/mongodb/lib/sdam/events.js\");\nconst server_1 = __webpack_require__(/*! ./server */ \"(ssr)/./node_modules/mongodb/lib/sdam/server.js\");\n/** @internal */ const kServer = Symbol(\"server\");\n/** @internal */ const kMonitorId = Symbol(\"monitorId\");\n/** @internal */ const kCancellationToken = Symbol(\"cancellationToken\");\n/** @internal */ const kRoundTripTime = Symbol(\"roundTripTime\");\nconst STATE_IDLE = \"idle\";\nconst STATE_MONITORING = \"monitoring\";\nconst stateTransition = (0, utils_1.makeStateMachine)({\n    [common_1.STATE_CLOSING]: [\n        common_1.STATE_CLOSING,\n        STATE_IDLE,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CLOSED]: [\n        common_1.STATE_CLOSED,\n        STATE_MONITORING\n    ],\n    [STATE_IDLE]: [\n        STATE_IDLE,\n        STATE_MONITORING,\n        common_1.STATE_CLOSING\n    ],\n    [STATE_MONITORING]: [\n        STATE_MONITORING,\n        STATE_IDLE,\n        common_1.STATE_CLOSING\n    ]\n});\nconst INVALID_REQUEST_CHECK_STATES = new Set([\n    common_1.STATE_CLOSING,\n    common_1.STATE_CLOSED,\n    STATE_MONITORING\n]);\nfunction isInCloseState(monitor) {\n    return monitor.s.state === common_1.STATE_CLOSED || monitor.s.state === common_1.STATE_CLOSING;\n}\n/** @public */ exports.ServerMonitoringMode = Object.freeze({\n    auto: \"auto\",\n    poll: \"poll\",\n    stream: \"stream\"\n});\n/** @internal */ class Monitor extends mongo_types_1.TypedEventEmitter {\n    constructor(server, options){\n        super();\n        /** @internal */ this.component = mongo_logger_1.MongoLoggableComponent.TOPOLOGY;\n        this[kServer] = server;\n        this.connection = null;\n        this[kCancellationToken] = new mongo_types_1.CancellationToken();\n        this[kCancellationToken].setMaxListeners(Infinity);\n        this[kMonitorId] = undefined;\n        this.s = {\n            state: common_1.STATE_CLOSED\n        };\n        this.address = server.description.address;\n        this.options = Object.freeze({\n            connectTimeoutMS: options.connectTimeoutMS ?? 10000,\n            heartbeatFrequencyMS: options.heartbeatFrequencyMS ?? 10000,\n            minHeartbeatFrequencyMS: options.minHeartbeatFrequencyMS ?? 500,\n            serverMonitoringMode: options.serverMonitoringMode\n        });\n        this.isRunningInFaasEnv = (0, client_metadata_1.getFAASEnv)() != null;\n        this.mongoLogger = this[kServer].topology.client?.mongoLogger;\n        const cancellationToken = this[kCancellationToken];\n        // TODO: refactor this to pull it directly from the pool, requires new ConnectionPool integration\n        const connectOptions = {\n            id: \"<monitor>\",\n            generation: server.pool.generation,\n            cancellationToken,\n            hostAddress: server.description.hostAddress,\n            ...options,\n            // force BSON serialization options\n            raw: false,\n            useBigInt64: false,\n            promoteLongs: true,\n            promoteValues: true,\n            promoteBuffers: true\n        };\n        // ensure no authentication is used for monitoring\n        delete connectOptions.credentials;\n        if (connectOptions.autoEncrypter) {\n            delete connectOptions.autoEncrypter;\n        }\n        this.connectOptions = Object.freeze(connectOptions);\n    }\n    connect() {\n        if (this.s.state !== common_1.STATE_CLOSED) {\n            return;\n        }\n        // start\n        const heartbeatFrequencyMS = this.options.heartbeatFrequencyMS;\n        const minHeartbeatFrequencyMS = this.options.minHeartbeatFrequencyMS;\n        this[kMonitorId] = new MonitorInterval(monitorServer(this), {\n            heartbeatFrequencyMS: heartbeatFrequencyMS,\n            minHeartbeatFrequencyMS: minHeartbeatFrequencyMS,\n            immediate: true\n        });\n    }\n    requestCheck() {\n        if (INVALID_REQUEST_CHECK_STATES.has(this.s.state)) {\n            return;\n        }\n        this[kMonitorId]?.wake();\n    }\n    reset() {\n        const topologyVersion = this[kServer].description.topologyVersion;\n        if (isInCloseState(this) || topologyVersion == null) {\n            return;\n        }\n        stateTransition(this, common_1.STATE_CLOSING);\n        resetMonitorState(this);\n        // restart monitor\n        stateTransition(this, STATE_IDLE);\n        // restart monitoring\n        const heartbeatFrequencyMS = this.options.heartbeatFrequencyMS;\n        const minHeartbeatFrequencyMS = this.options.minHeartbeatFrequencyMS;\n        this[kMonitorId] = new MonitorInterval(monitorServer(this), {\n            heartbeatFrequencyMS: heartbeatFrequencyMS,\n            minHeartbeatFrequencyMS: minHeartbeatFrequencyMS\n        });\n    }\n    close() {\n        if (isInCloseState(this)) {\n            return;\n        }\n        stateTransition(this, common_1.STATE_CLOSING);\n        resetMonitorState(this);\n        // close monitor\n        this.emit(\"close\");\n        stateTransition(this, common_1.STATE_CLOSED);\n    }\n}\nexports.Monitor = Monitor;\nfunction resetMonitorState(monitor) {\n    monitor[kMonitorId]?.stop();\n    monitor[kMonitorId] = undefined;\n    monitor.rttPinger?.close();\n    monitor.rttPinger = undefined;\n    monitor[kCancellationToken].emit(\"cancel\");\n    monitor.connection?.destroy();\n    monitor.connection = null;\n}\nfunction useStreamingProtocol(monitor, topologyVersion) {\n    // If we have no topology version we always poll no matter\n    // what the user provided, since the server does not support\n    // the streaming protocol.\n    if (topologyVersion == null) return false;\n    const serverMonitoringMode = monitor.options.serverMonitoringMode;\n    if (serverMonitoringMode === exports.ServerMonitoringMode.poll) return false;\n    if (serverMonitoringMode === exports.ServerMonitoringMode.stream) return true;\n    // If we are in auto mode, we need to figure out if we're in a FaaS\n    // environment or not and choose the appropriate mode.\n    if (monitor.isRunningInFaasEnv) return false;\n    return true;\n}\nfunction checkServer(monitor, callback) {\n    let start;\n    let awaited;\n    const topologyVersion = monitor[kServer].description.topologyVersion;\n    const isAwaitable = useStreamingProtocol(monitor, topologyVersion);\n    monitor.emitAndLogHeartbeat(server_1.Server.SERVER_HEARTBEAT_STARTED, monitor[kServer].topology.s.id, undefined, new events_1.ServerHeartbeatStartedEvent(monitor.address, isAwaitable));\n    function onHeartbeatFailed(err) {\n        monitor.connection?.destroy();\n        monitor.connection = null;\n        monitor.emitAndLogHeartbeat(server_1.Server.SERVER_HEARTBEAT_FAILED, monitor[kServer].topology.s.id, undefined, new events_1.ServerHeartbeatFailedEvent(monitor.address, (0, utils_1.calculateDurationInMs)(start), err, awaited));\n        const error = !(err instanceof error_1.MongoError) ? new error_1.MongoError(error_1.MongoError.buildErrorMessage(err), {\n            cause: err\n        }) : err;\n        error.addErrorLabel(error_1.MongoErrorLabel.ResetPool);\n        if (error instanceof error_1.MongoNetworkTimeoutError) {\n            error.addErrorLabel(error_1.MongoErrorLabel.InterruptInUseConnections);\n        }\n        monitor.emit(\"resetServer\", error);\n        callback(err);\n    }\n    function onHeartbeatSucceeded(hello) {\n        if (!(\"isWritablePrimary\" in hello)) {\n            // Provide hello-style response document.\n            hello.isWritablePrimary = hello[constants_1.LEGACY_HELLO_COMMAND];\n        }\n        const duration = isAwaitable && monitor.rttPinger ? monitor.rttPinger.roundTripTime : (0, utils_1.calculateDurationInMs)(start);\n        monitor.emitAndLogHeartbeat(server_1.Server.SERVER_HEARTBEAT_SUCCEEDED, monitor[kServer].topology.s.id, hello.connectionId, new events_1.ServerHeartbeatSucceededEvent(monitor.address, duration, hello, isAwaitable));\n        if (isAwaitable) {\n            // If we are using the streaming protocol then we immediately issue another 'started'\n            // event, otherwise the \"check\" is complete and return to the main monitor loop\n            monitor.emitAndLogHeartbeat(server_1.Server.SERVER_HEARTBEAT_STARTED, monitor[kServer].topology.s.id, undefined, new events_1.ServerHeartbeatStartedEvent(monitor.address, true));\n            // We have not actually sent an outgoing handshake, but when we get the next response we\n            // want the duration to reflect the time since we last heard from the server\n            start = (0, utils_1.now)();\n        } else {\n            monitor.rttPinger?.close();\n            monitor.rttPinger = undefined;\n            callback(undefined, hello);\n        }\n    }\n    const { connection } = monitor;\n    if (connection && !connection.closed) {\n        const { serverApi, helloOk } = connection;\n        const connectTimeoutMS = monitor.options.connectTimeoutMS;\n        const maxAwaitTimeMS = monitor.options.heartbeatFrequencyMS;\n        const cmd = {\n            [serverApi?.version || helloOk ? \"hello\" : constants_1.LEGACY_HELLO_COMMAND]: 1,\n            ...isAwaitable && topologyVersion ? {\n                maxAwaitTimeMS,\n                topologyVersion: makeTopologyVersion(topologyVersion)\n            } : {}\n        };\n        const options = isAwaitable ? {\n            socketTimeoutMS: connectTimeoutMS ? connectTimeoutMS + maxAwaitTimeMS : 0,\n            exhaustAllowed: true\n        } : {\n            socketTimeoutMS: connectTimeoutMS\n        };\n        if (isAwaitable && monitor.rttPinger == null) {\n            monitor.rttPinger = new RTTPinger(monitor[kCancellationToken], Object.assign({\n                heartbeatFrequencyMS: monitor.options.heartbeatFrequencyMS\n            }, monitor.connectOptions));\n        }\n        // Record new start time before sending handshake\n        start = (0, utils_1.now)();\n        if (isAwaitable) {\n            awaited = true;\n            return connection.exhaustCommand((0, utils_1.ns)(\"admin.$cmd\"), cmd, options, (error, hello)=>{\n                if (error) return onHeartbeatFailed(error);\n                return onHeartbeatSucceeded(hello);\n            });\n        }\n        awaited = false;\n        connection.command((0, utils_1.ns)(\"admin.$cmd\"), cmd, options).then(onHeartbeatSucceeded, onHeartbeatFailed);\n        return;\n    }\n    // connecting does an implicit `hello`\n    (async ()=>{\n        const socket = await (0, connect_1.makeSocket)(monitor.connectOptions);\n        const connection = (0, connect_1.makeConnection)(monitor.connectOptions, socket);\n        // The start time is after socket creation but before the handshake\n        start = (0, utils_1.now)();\n        try {\n            await (0, connect_1.performInitialHandshake)(connection, monitor.connectOptions);\n            return connection;\n        } catch (error) {\n            connection.destroy();\n            throw error;\n        }\n    })().then((connection)=>{\n        if (isInCloseState(monitor)) {\n            connection.destroy();\n            return;\n        }\n        monitor.connection = connection;\n        monitor.emitAndLogHeartbeat(server_1.Server.SERVER_HEARTBEAT_SUCCEEDED, monitor[kServer].topology.s.id, connection.hello?.connectionId, new events_1.ServerHeartbeatSucceededEvent(monitor.address, (0, utils_1.calculateDurationInMs)(start), connection.hello, useStreamingProtocol(monitor, connection.hello?.topologyVersion)));\n        callback(undefined, connection.hello);\n    }, (error)=>{\n        monitor.connection = null;\n        awaited = false;\n        onHeartbeatFailed(error);\n    });\n}\nfunction monitorServer(monitor) {\n    return (callback)=>{\n        if (monitor.s.state === STATE_MONITORING) {\n            process.nextTick(callback);\n            return;\n        }\n        stateTransition(monitor, STATE_MONITORING);\n        function done() {\n            if (!isInCloseState(monitor)) {\n                stateTransition(monitor, STATE_IDLE);\n            }\n            callback();\n        }\n        checkServer(monitor, (err, hello)=>{\n            if (err) {\n                // otherwise an error occurred on initial discovery, also bail\n                if (monitor[kServer].description.type === common_1.ServerType.Unknown) {\n                    return done();\n                }\n            }\n            // if the check indicates streaming is supported, immediately reschedule monitoring\n            if (useStreamingProtocol(monitor, hello?.topologyVersion)) {\n                (0, timers_1.setTimeout)(()=>{\n                    if (!isInCloseState(monitor)) {\n                        monitor[kMonitorId]?.wake();\n                    }\n                }, 0);\n            }\n            done();\n        });\n    };\n}\nfunction makeTopologyVersion(tv) {\n    return {\n        processId: tv.processId,\n        // tests mock counter as just number, but in a real situation counter should always be a Long\n        // TODO(NODE-2674): Preserve int64 sent from MongoDB\n        counter: bson_1.Long.isLong(tv.counter) ? tv.counter : bson_1.Long.fromNumber(tv.counter)\n    };\n}\n/** @internal */ class RTTPinger {\n    constructor(cancellationToken, options){\n        this.connection = undefined;\n        this[kCancellationToken] = cancellationToken;\n        this[kRoundTripTime] = 0;\n        this.closed = false;\n        const heartbeatFrequencyMS = options.heartbeatFrequencyMS;\n        this[kMonitorId] = (0, timers_1.setTimeout)(()=>measureRoundTripTime(this, options), heartbeatFrequencyMS);\n    }\n    get roundTripTime() {\n        return this[kRoundTripTime];\n    }\n    close() {\n        this.closed = true;\n        (0, timers_1.clearTimeout)(this[kMonitorId]);\n        this.connection?.destroy();\n        this.connection = undefined;\n    }\n}\nexports.RTTPinger = RTTPinger;\nfunction measureRoundTripTime(rttPinger, options) {\n    const start = (0, utils_1.now)();\n    options.cancellationToken = rttPinger[kCancellationToken];\n    const heartbeatFrequencyMS = options.heartbeatFrequencyMS;\n    if (rttPinger.closed) {\n        return;\n    }\n    function measureAndReschedule(conn) {\n        if (rttPinger.closed) {\n            conn?.destroy();\n            return;\n        }\n        if (rttPinger.connection == null) {\n            rttPinger.connection = conn;\n        }\n        rttPinger[kRoundTripTime] = (0, utils_1.calculateDurationInMs)(start);\n        rttPinger[kMonitorId] = (0, timers_1.setTimeout)(()=>measureRoundTripTime(rttPinger, options), heartbeatFrequencyMS);\n    }\n    const connection = rttPinger.connection;\n    if (connection == null) {\n        (0, connect_1.connect)(options).then((connection)=>{\n            measureAndReschedule(connection);\n        }, ()=>{\n            rttPinger.connection = undefined;\n            rttPinger[kRoundTripTime] = 0;\n        });\n        return;\n    }\n    const commandName = connection.serverApi?.version || connection.helloOk ? \"hello\" : constants_1.LEGACY_HELLO_COMMAND;\n    connection.command((0, utils_1.ns)(\"admin.$cmd\"), {\n        [commandName]: 1\n    }, undefined).then(()=>measureAndReschedule(), ()=>{\n        rttPinger.connection?.destroy();\n        rttPinger.connection = undefined;\n        rttPinger[kRoundTripTime] = 0;\n        return;\n    });\n}\n/**\n * @internal\n */ class MonitorInterval {\n    constructor(fn, options = {}){\n        this.isExpeditedCallToFnScheduled = false;\n        this.stopped = false;\n        this.isExecutionInProgress = false;\n        this.hasExecutedOnce = false;\n        this._executeAndReschedule = ()=>{\n            if (this.stopped) return;\n            if (this.timerId) {\n                (0, timers_1.clearTimeout)(this.timerId);\n            }\n            this.isExpeditedCallToFnScheduled = false;\n            this.isExecutionInProgress = true;\n            this.fn(()=>{\n                this.lastExecutionEnded = (0, utils_1.now)();\n                this.isExecutionInProgress = false;\n                this._reschedule(this.heartbeatFrequencyMS);\n            });\n        };\n        this.fn = fn;\n        this.lastExecutionEnded = -Infinity;\n        this.heartbeatFrequencyMS = options.heartbeatFrequencyMS ?? 1000;\n        this.minHeartbeatFrequencyMS = options.minHeartbeatFrequencyMS ?? 500;\n        if (options.immediate) {\n            this._executeAndReschedule();\n        } else {\n            this._reschedule(undefined);\n        }\n    }\n    wake() {\n        const currentTime = (0, utils_1.now)();\n        const timeSinceLastCall = currentTime - this.lastExecutionEnded;\n        // TODO(NODE-4674): Add error handling and logging to the monitor\n        if (timeSinceLastCall < 0) {\n            return this._executeAndReschedule();\n        }\n        if (this.isExecutionInProgress) {\n            return;\n        }\n        // debounce multiple calls to wake within the `minInterval`\n        if (this.isExpeditedCallToFnScheduled) {\n            return;\n        }\n        // reschedule a call as soon as possible, ensuring the call never happens\n        // faster than the `minInterval`\n        if (timeSinceLastCall < this.minHeartbeatFrequencyMS) {\n            this.isExpeditedCallToFnScheduled = true;\n            this._reschedule(this.minHeartbeatFrequencyMS - timeSinceLastCall);\n            return;\n        }\n        this._executeAndReschedule();\n    }\n    stop() {\n        this.stopped = true;\n        if (this.timerId) {\n            (0, timers_1.clearTimeout)(this.timerId);\n            this.timerId = undefined;\n        }\n        this.lastExecutionEnded = -Infinity;\n        this.isExpeditedCallToFnScheduled = false;\n    }\n    toString() {\n        return JSON.stringify(this);\n    }\n    toJSON() {\n        const currentTime = (0, utils_1.now)();\n        const timeSinceLastCall = currentTime - this.lastExecutionEnded;\n        return {\n            timerId: this.timerId != null ? \"set\" : \"cleared\",\n            lastCallTime: this.lastExecutionEnded,\n            isExpeditedCheckScheduled: this.isExpeditedCallToFnScheduled,\n            stopped: this.stopped,\n            heartbeatFrequencyMS: this.heartbeatFrequencyMS,\n            minHeartbeatFrequencyMS: this.minHeartbeatFrequencyMS,\n            currentTime,\n            timeSinceLastCall\n        };\n    }\n    _reschedule(ms) {\n        if (this.stopped) return;\n        if (this.timerId) {\n            (0, timers_1.clearTimeout)(this.timerId);\n        }\n        this.timerId = (0, timers_1.setTimeout)(this._executeAndReschedule, ms || this.heartbeatFrequencyMS);\n    }\n}\nexports.MonitorInterval = MonitorInterval; //# sourceMappingURL=monitor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9tb25pdG9yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx1QkFBdUIsR0FBR0EsaUJBQWlCLEdBQUdBLGVBQWUsR0FBR0EsNEJBQTRCLEdBQUcsS0FBSztBQUNwRyxNQUFNTSxXQUFXQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNRSxZQUFZRixtQkFBT0EsQ0FBQyx5RUFBaUI7QUFDM0MsTUFBTUcsb0JBQW9CSCxtQkFBT0EsQ0FBQyw2R0FBbUM7QUFDckUsTUFBTUksY0FBY0osbUJBQU9BLENBQUMsbUVBQWM7QUFDMUMsTUFBTUssVUFBVUwsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTU0saUJBQWlCTixtQkFBT0EsQ0FBQyx5RUFBaUI7QUFDaEQsTUFBTU8sZ0JBQWdCUCxtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDOUMsTUFBTVEsVUFBVVIsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTVMsV0FBV1QsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVUsV0FBV1YsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVcsV0FBV1gsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsY0FBYyxHQUNkLE1BQU1ZLFVBQVVDLE9BQU87QUFDdkIsY0FBYyxHQUNkLE1BQU1DLGFBQWFELE9BQU87QUFDMUIsY0FBYyxHQUNkLE1BQU1FLHFCQUFxQkYsT0FBTztBQUNsQyxjQUFjLEdBQ2QsTUFBTUcsaUJBQWlCSCxPQUFPO0FBQzlCLE1BQU1JLGFBQWE7QUFDbkIsTUFBTUMsbUJBQW1CO0FBQ3pCLE1BQU1DLGtCQUFrQixDQUFDLEdBQUdYLFFBQVFZLGdCQUFnQixFQUFFO0lBQ2xELENBQUNYLFNBQVNZLGFBQWEsQ0FBQyxFQUFFO1FBQUNaLFNBQVNZLGFBQWE7UUFBRUo7UUFBWVIsU0FBU2EsWUFBWTtLQUFDO0lBQ3JGLENBQUNiLFNBQVNhLFlBQVksQ0FBQyxFQUFFO1FBQUNiLFNBQVNhLFlBQVk7UUFBRUo7S0FBaUI7SUFDbEUsQ0FBQ0QsV0FBVyxFQUFFO1FBQUNBO1FBQVlDO1FBQWtCVCxTQUFTWSxhQUFhO0tBQUM7SUFDcEUsQ0FBQ0gsaUJBQWlCLEVBQUU7UUFBQ0E7UUFBa0JEO1FBQVlSLFNBQVNZLGFBQWE7S0FBQztBQUM5RTtBQUNBLE1BQU1FLCtCQUErQixJQUFJQyxJQUFJO0lBQUNmLFNBQVNZLGFBQWE7SUFBRVosU0FBU2EsWUFBWTtJQUFFSjtDQUFpQjtBQUM5RyxTQUFTTyxlQUFlQyxPQUFPO0lBQzNCLE9BQU9BLFFBQVFDLENBQUMsQ0FBQ0MsS0FBSyxLQUFLbkIsU0FBU2EsWUFBWSxJQUFJSSxRQUFRQyxDQUFDLENBQUNDLEtBQUssS0FBS25CLFNBQVNZLGFBQWE7QUFDbEc7QUFDQSxZQUFZLEdBQ1o1Qiw0QkFBNEIsR0FBR0YsT0FBT3NDLE1BQU0sQ0FBQztJQUN6Q0MsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLFFBQVE7QUFDWjtBQUNBLGNBQWMsR0FDZCxNQUFNbkMsZ0JBQWdCVSxjQUFjMEIsaUJBQWlCO0lBQ2pEQyxZQUFZQyxNQUFNLEVBQUVDLE9BQU8sQ0FBRTtRQUN6QixLQUFLO1FBQ0wsY0FBYyxHQUNkLElBQUksQ0FBQ0MsU0FBUyxHQUFHL0IsZUFBZWdDLHNCQUFzQixDQUFDQyxRQUFRO1FBQy9ELElBQUksQ0FBQzNCLFFBQVEsR0FBR3VCO1FBQ2hCLElBQUksQ0FBQ0ssVUFBVSxHQUFHO1FBQ2xCLElBQUksQ0FBQ3pCLG1CQUFtQixHQUFHLElBQUlSLGNBQWNrQyxpQkFBaUI7UUFDOUQsSUFBSSxDQUFDMUIsbUJBQW1CLENBQUMyQixlQUFlLENBQUNDO1FBQ3pDLElBQUksQ0FBQzdCLFdBQVcsR0FBRzhCO1FBQ25CLElBQUksQ0FBQ2pCLENBQUMsR0FBRztZQUNMQyxPQUFPbkIsU0FBU2EsWUFBWTtRQUNoQztRQUNBLElBQUksQ0FBQ3VCLE9BQU8sR0FBR1YsT0FBT1csV0FBVyxDQUFDRCxPQUFPO1FBQ3pDLElBQUksQ0FBQ1QsT0FBTyxHQUFHN0MsT0FBT3NDLE1BQU0sQ0FBQztZQUN6QmtCLGtCQUFrQlgsUUFBUVcsZ0JBQWdCLElBQUk7WUFDOUNDLHNCQUFzQlosUUFBUVksb0JBQW9CLElBQUk7WUFDdERDLHlCQUF5QmIsUUFBUWEsdUJBQXVCLElBQUk7WUFDNURDLHNCQUFzQmQsUUFBUWMsb0JBQW9CO1FBQ3REO1FBQ0EsSUFBSSxDQUFDQyxrQkFBa0IsR0FBRyxDQUFDLEdBQUdoRCxrQkFBa0JpRCxVQUFVLE9BQU87UUFDakUsSUFBSSxDQUFDQyxXQUFXLEdBQUcsSUFBSSxDQUFDekMsUUFBUSxDQUFDMEMsUUFBUSxDQUFDQyxNQUFNLEVBQUVGO1FBQ2xELE1BQU1HLG9CQUFvQixJQUFJLENBQUN6QyxtQkFBbUI7UUFDbEQsaUdBQWlHO1FBQ2pHLE1BQU0wQyxpQkFBaUI7WUFDbkJDLElBQUk7WUFDSkMsWUFBWXhCLE9BQU95QixJQUFJLENBQUNELFVBQVU7WUFDbENIO1lBQ0FLLGFBQWExQixPQUFPVyxXQUFXLENBQUNlLFdBQVc7WUFDM0MsR0FBR3pCLE9BQU87WUFDVixtQ0FBbUM7WUFDbkMwQixLQUFLO1lBQ0xDLGFBQWE7WUFDYkMsY0FBYztZQUNkQyxlQUFlO1lBQ2ZDLGdCQUFnQjtRQUNwQjtRQUNBLGtEQUFrRDtRQUNsRCxPQUFPVCxlQUFlVSxXQUFXO1FBQ2pDLElBQUlWLGVBQWVXLGFBQWEsRUFBRTtZQUM5QixPQUFPWCxlQUFlVyxhQUFhO1FBQ3ZDO1FBQ0EsSUFBSSxDQUFDWCxjQUFjLEdBQUdsRSxPQUFPc0MsTUFBTSxDQUFDNEI7SUFDeEM7SUFDQVksVUFBVTtRQUNOLElBQUksSUFBSSxDQUFDMUMsQ0FBQyxDQUFDQyxLQUFLLEtBQUtuQixTQUFTYSxZQUFZLEVBQUU7WUFDeEM7UUFDSjtRQUNBLFFBQVE7UUFDUixNQUFNMEIsdUJBQXVCLElBQUksQ0FBQ1osT0FBTyxDQUFDWSxvQkFBb0I7UUFDOUQsTUFBTUMsMEJBQTBCLElBQUksQ0FBQ2IsT0FBTyxDQUFDYSx1QkFBdUI7UUFDcEUsSUFBSSxDQUFDbkMsV0FBVyxHQUFHLElBQUluQixnQkFBZ0IyRSxjQUFjLElBQUksR0FBRztZQUN4RHRCLHNCQUFzQkE7WUFDdEJDLHlCQUF5QkE7WUFDekJzQixXQUFXO1FBQ2Y7SUFDSjtJQUNBQyxlQUFlO1FBQ1gsSUFBSWpELDZCQUE2QmtELEdBQUcsQ0FBQyxJQUFJLENBQUM5QyxDQUFDLENBQUNDLEtBQUssR0FBRztZQUNoRDtRQUNKO1FBQ0EsSUFBSSxDQUFDZCxXQUFXLEVBQUU0RDtJQUN0QjtJQUNBQyxRQUFRO1FBQ0osTUFBTUMsa0JBQWtCLElBQUksQ0FBQ2hFLFFBQVEsQ0FBQ2tDLFdBQVcsQ0FBQzhCLGVBQWU7UUFDakUsSUFBSW5ELGVBQWUsSUFBSSxLQUFLbUQsbUJBQW1CLE1BQU07WUFDakQ7UUFDSjtRQUNBekQsZ0JBQWdCLElBQUksRUFBRVYsU0FBU1ksYUFBYTtRQUM1Q3dELGtCQUFrQixJQUFJO1FBQ3RCLGtCQUFrQjtRQUNsQjFELGdCQUFnQixJQUFJLEVBQUVGO1FBQ3RCLHFCQUFxQjtRQUNyQixNQUFNK0IsdUJBQXVCLElBQUksQ0FBQ1osT0FBTyxDQUFDWSxvQkFBb0I7UUFDOUQsTUFBTUMsMEJBQTBCLElBQUksQ0FBQ2IsT0FBTyxDQUFDYSx1QkFBdUI7UUFDcEUsSUFBSSxDQUFDbkMsV0FBVyxHQUFHLElBQUluQixnQkFBZ0IyRSxjQUFjLElBQUksR0FBRztZQUN4RHRCLHNCQUFzQkE7WUFDdEJDLHlCQUF5QkE7UUFDN0I7SUFDSjtJQUNBNkIsUUFBUTtRQUNKLElBQUlyRCxlQUFlLElBQUksR0FBRztZQUN0QjtRQUNKO1FBQ0FOLGdCQUFnQixJQUFJLEVBQUVWLFNBQVNZLGFBQWE7UUFDNUN3RCxrQkFBa0IsSUFBSTtRQUN0QixnQkFBZ0I7UUFDaEIsSUFBSSxDQUFDRSxJQUFJLENBQUM7UUFDVjVELGdCQUFnQixJQUFJLEVBQUVWLFNBQVNhLFlBQVk7SUFDL0M7QUFDSjtBQUNBN0IsZUFBZSxHQUFHSTtBQUNsQixTQUFTZ0Ysa0JBQWtCbkQsT0FBTztJQUM5QkEsT0FBTyxDQUFDWixXQUFXLEVBQUVrRTtJQUNyQnRELE9BQU8sQ0FBQ1osV0FBVyxHQUFHOEI7SUFDdEJsQixRQUFRdUQsU0FBUyxFQUFFSDtJQUNuQnBELFFBQVF1RCxTQUFTLEdBQUdyQztJQUNwQmxCLE9BQU8sQ0FBQ1gsbUJBQW1CLENBQUNnRSxJQUFJLENBQUM7SUFDakNyRCxRQUFRYyxVQUFVLEVBQUUwQztJQUNwQnhELFFBQVFjLFVBQVUsR0FBRztBQUN6QjtBQUNBLFNBQVMyQyxxQkFBcUJ6RCxPQUFPLEVBQUVrRCxlQUFlO0lBQ2xELDBEQUEwRDtJQUMxRCw0REFBNEQ7SUFDNUQsMEJBQTBCO0lBQzFCLElBQUlBLG1CQUFtQixNQUNuQixPQUFPO0lBQ1gsTUFBTTFCLHVCQUF1QnhCLFFBQVFVLE9BQU8sQ0FBQ2Msb0JBQW9CO0lBQ2pFLElBQUlBLHlCQUF5QnpELFFBQVFLLG9CQUFvQixDQUFDaUMsSUFBSSxFQUMxRCxPQUFPO0lBQ1gsSUFBSW1CLHlCQUF5QnpELFFBQVFLLG9CQUFvQixDQUFDa0MsTUFBTSxFQUM1RCxPQUFPO0lBQ1gsbUVBQW1FO0lBQ25FLHNEQUFzRDtJQUN0RCxJQUFJTixRQUFReUIsa0JBQWtCLEVBQzFCLE9BQU87SUFDWCxPQUFPO0FBQ1g7QUFDQSxTQUFTaUMsWUFBWTFELE9BQU8sRUFBRTJELFFBQVE7SUFDbEMsSUFBSUM7SUFDSixJQUFJQztJQUNKLE1BQU1YLGtCQUFrQmxELE9BQU8sQ0FBQ2QsUUFBUSxDQUFDa0MsV0FBVyxDQUFDOEIsZUFBZTtJQUNwRSxNQUFNWSxjQUFjTCxxQkFBcUJ6RCxTQUFTa0Q7SUFDbERsRCxRQUFRK0QsbUJBQW1CLENBQUM5RSxTQUFTK0UsTUFBTSxDQUFDQyx3QkFBd0IsRUFBRWpFLE9BQU8sQ0FBQ2QsUUFBUSxDQUFDMEMsUUFBUSxDQUFDM0IsQ0FBQyxDQUFDK0IsRUFBRSxFQUFFZCxXQUFXLElBQUlsQyxTQUFTa0YsMkJBQTJCLENBQUNsRSxRQUFRbUIsT0FBTyxFQUFFMkM7SUFDM0ssU0FBU0ssa0JBQWtCQyxHQUFHO1FBQzFCcEUsUUFBUWMsVUFBVSxFQUFFMEM7UUFDcEJ4RCxRQUFRYyxVQUFVLEdBQUc7UUFDckJkLFFBQVErRCxtQkFBbUIsQ0FBQzlFLFNBQVMrRSxNQUFNLENBQUNLLHVCQUF1QixFQUFFckUsT0FBTyxDQUFDZCxRQUFRLENBQUMwQyxRQUFRLENBQUMzQixDQUFDLENBQUMrQixFQUFFLEVBQUVkLFdBQVcsSUFBSWxDLFNBQVNzRiwwQkFBMEIsQ0FBQ3RFLFFBQVFtQixPQUFPLEVBQUUsQ0FBQyxHQUFHckMsUUFBUXlGLHFCQUFxQixFQUFFWCxRQUFRUSxLQUFLUDtRQUN6TixNQUFNVyxRQUFRLENBQUVKLENBQUFBLGVBQWV6RixRQUFROEYsVUFBVSxJQUMzQyxJQUFJOUYsUUFBUThGLFVBQVUsQ0FBQzlGLFFBQVE4RixVQUFVLENBQUNDLGlCQUFpQixDQUFDTixNQUFNO1lBQUVPLE9BQU9QO1FBQUksS0FDL0VBO1FBQ05JLE1BQU1JLGFBQWEsQ0FBQ2pHLFFBQVFrRyxlQUFlLENBQUNDLFNBQVM7UUFDckQsSUFBSU4saUJBQWlCN0YsUUFBUW9HLHdCQUF3QixFQUFFO1lBQ25EUCxNQUFNSSxhQUFhLENBQUNqRyxRQUFRa0csZUFBZSxDQUFDRyx5QkFBeUI7UUFDekU7UUFDQWhGLFFBQVFxRCxJQUFJLENBQUMsZUFBZW1CO1FBQzVCYixTQUFTUztJQUNiO0lBQ0EsU0FBU2EscUJBQXFCQyxLQUFLO1FBQy9CLElBQUksQ0FBRSx3QkFBdUJBLEtBQUksR0FBSTtZQUNqQyx5Q0FBeUM7WUFDekNBLE1BQU1DLGlCQUFpQixHQUFHRCxLQUFLLENBQUN4RyxZQUFZMEcsb0JBQW9CLENBQUM7UUFDckU7UUFDQSxNQUFNQyxXQUFXdkIsZUFBZTlELFFBQVF1RCxTQUFTLEdBQzNDdkQsUUFBUXVELFNBQVMsQ0FBQytCLGFBQWEsR0FDL0IsQ0FBQyxHQUFHeEcsUUFBUXlGLHFCQUFxQixFQUFFWDtRQUN6QzVELFFBQVErRCxtQkFBbUIsQ0FBQzlFLFNBQVMrRSxNQUFNLENBQUN1QiwwQkFBMEIsRUFBRXZGLE9BQU8sQ0FBQ2QsUUFBUSxDQUFDMEMsUUFBUSxDQUFDM0IsQ0FBQyxDQUFDK0IsRUFBRSxFQUFFa0QsTUFBTU0sWUFBWSxFQUFFLElBQUl4RyxTQUFTeUcsNkJBQTZCLENBQUN6RixRQUFRbUIsT0FBTyxFQUFFa0UsVUFBVUgsT0FBT3BCO1FBQ3pNLElBQUlBLGFBQWE7WUFDYixxRkFBcUY7WUFDckYsK0VBQStFO1lBQy9FOUQsUUFBUStELG1CQUFtQixDQUFDOUUsU0FBUytFLE1BQU0sQ0FBQ0Msd0JBQXdCLEVBQUVqRSxPQUFPLENBQUNkLFFBQVEsQ0FBQzBDLFFBQVEsQ0FBQzNCLENBQUMsQ0FBQytCLEVBQUUsRUFBRWQsV0FBVyxJQUFJbEMsU0FBU2tGLDJCQUEyQixDQUFDbEUsUUFBUW1CLE9BQU8sRUFBRTtZQUMzSyx3RkFBd0Y7WUFDeEYsNEVBQTRFO1lBQzVFeUMsUUFBUSxDQUFDLEdBQUc5RSxRQUFRNEcsR0FBRztRQUMzQixPQUNLO1lBQ0QxRixRQUFRdUQsU0FBUyxFQUFFSDtZQUNuQnBELFFBQVF1RCxTQUFTLEdBQUdyQztZQUNwQnlDLFNBQVN6QyxXQUFXZ0U7UUFDeEI7SUFDSjtJQUNBLE1BQU0sRUFBRXBFLFVBQVUsRUFBRSxHQUFHZDtJQUN2QixJQUFJYyxjQUFjLENBQUNBLFdBQVc2RSxNQUFNLEVBQUU7UUFDbEMsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLE9BQU8sRUFBRSxHQUFHL0U7UUFDL0IsTUFBTU8sbUJBQW1CckIsUUFBUVUsT0FBTyxDQUFDVyxnQkFBZ0I7UUFDekQsTUFBTXlFLGlCQUFpQjlGLFFBQVFVLE9BQU8sQ0FBQ1ksb0JBQW9CO1FBQzNELE1BQU15RSxNQUFNO1lBQ1IsQ0FBQ0gsV0FBV0ksV0FBV0gsVUFBVSxVQUFVbkgsWUFBWTBHLG9CQUFvQixDQUFDLEVBQUU7WUFDOUUsR0FBSXRCLGVBQWVaLGtCQUNiO2dCQUFFNEM7Z0JBQWdCNUMsaUJBQWlCK0Msb0JBQW9CL0M7WUFBaUIsSUFDeEUsQ0FBQyxDQUFDO1FBQ1o7UUFDQSxNQUFNeEMsVUFBVW9ELGNBQ1Y7WUFDRW9DLGlCQUFpQjdFLG1CQUFtQkEsbUJBQW1CeUUsaUJBQWlCO1lBQ3hFSyxnQkFBZ0I7UUFDcEIsSUFDRTtZQUFFRCxpQkFBaUI3RTtRQUFpQjtRQUMxQyxJQUFJeUMsZUFBZTlELFFBQVF1RCxTQUFTLElBQUksTUFBTTtZQUMxQ3ZELFFBQVF1RCxTQUFTLEdBQUcsSUFBSXJGLFVBQVU4QixPQUFPLENBQUNYLG1CQUFtQixFQUFFeEIsT0FBT3VJLE1BQU0sQ0FBQztnQkFBRTlFLHNCQUFzQnRCLFFBQVFVLE9BQU8sQ0FBQ1ksb0JBQW9CO1lBQUMsR0FBR3RCLFFBQVErQixjQUFjO1FBQ3ZLO1FBQ0EsaURBQWlEO1FBQ2pENkIsUUFBUSxDQUFDLEdBQUc5RSxRQUFRNEcsR0FBRztRQUN2QixJQUFJNUIsYUFBYTtZQUNiRCxVQUFVO1lBQ1YsT0FBTy9DLFdBQVd1RixjQUFjLENBQUMsQ0FBQyxHQUFHdkgsUUFBUXdILEVBQUUsRUFBRSxlQUFlUCxLQUFLckYsU0FBUyxDQUFDOEQsT0FBT1U7Z0JBQ2xGLElBQUlWLE9BQ0EsT0FBT0wsa0JBQWtCSztnQkFDN0IsT0FBT1MscUJBQXFCQztZQUNoQztRQUNKO1FBQ0FyQixVQUFVO1FBQ1YvQyxXQUNLeUYsT0FBTyxDQUFDLENBQUMsR0FBR3pILFFBQVF3SCxFQUFFLEVBQUUsZUFBZVAsS0FBS3JGLFNBQzVDOEYsSUFBSSxDQUFDdkIsc0JBQXNCZDtRQUNoQztJQUNKO0lBQ0Esc0NBQXNDO0lBQ3JDO1FBQ0csTUFBTXNDLFNBQVMsTUFBTSxDQUFDLEdBQUdqSSxVQUFVa0ksVUFBVSxFQUFFMUcsUUFBUStCLGNBQWM7UUFDckUsTUFBTWpCLGFBQWEsQ0FBQyxHQUFHdEMsVUFBVW1JLGNBQWMsRUFBRTNHLFFBQVErQixjQUFjLEVBQUUwRTtRQUN6RSxtRUFBbUU7UUFDbkU3QyxRQUFRLENBQUMsR0FBRzlFLFFBQVE0RyxHQUFHO1FBQ3ZCLElBQUk7WUFDQSxNQUFNLENBQUMsR0FBR2xILFVBQVVvSSx1QkFBdUIsRUFBRTlGLFlBQVlkLFFBQVErQixjQUFjO1lBQy9FLE9BQU9qQjtRQUNYLEVBQ0EsT0FBTzBELE9BQU87WUFDVjFELFdBQVcwQyxPQUFPO1lBQ2xCLE1BQU1nQjtRQUNWO0lBQ0osS0FBS2dDLElBQUksQ0FBQzFGLENBQUFBO1FBQ04sSUFBSWYsZUFBZUMsVUFBVTtZQUN6QmMsV0FBVzBDLE9BQU87WUFDbEI7UUFDSjtRQUNBeEQsUUFBUWMsVUFBVSxHQUFHQTtRQUNyQmQsUUFBUStELG1CQUFtQixDQUFDOUUsU0FBUytFLE1BQU0sQ0FBQ3VCLDBCQUEwQixFQUFFdkYsT0FBTyxDQUFDZCxRQUFRLENBQUMwQyxRQUFRLENBQUMzQixDQUFDLENBQUMrQixFQUFFLEVBQUVsQixXQUFXb0UsS0FBSyxFQUFFTSxjQUFjLElBQUl4RyxTQUFTeUcsNkJBQTZCLENBQUN6RixRQUFRbUIsT0FBTyxFQUFFLENBQUMsR0FBR3JDLFFBQVF5RixxQkFBcUIsRUFBRVgsUUFBUTlDLFdBQVdvRSxLQUFLLEVBQUV6QixxQkFBcUJ6RCxTQUFTYyxXQUFXb0UsS0FBSyxFQUFFaEM7UUFDalRTLFNBQVN6QyxXQUFXSixXQUFXb0UsS0FBSztJQUN4QyxHQUFHVixDQUFBQTtRQUNDeEUsUUFBUWMsVUFBVSxHQUFHO1FBQ3JCK0MsVUFBVTtRQUNWTSxrQkFBa0JLO0lBQ3RCO0FBQ0o7QUFDQSxTQUFTNUIsY0FBYzVDLE9BQU87SUFDMUIsT0FBTyxDQUFDMkQ7UUFDSixJQUFJM0QsUUFBUUMsQ0FBQyxDQUFDQyxLQUFLLEtBQUtWLGtCQUFrQjtZQUN0Q3FILFFBQVFDLFFBQVEsQ0FBQ25EO1lBQ2pCO1FBQ0o7UUFDQWxFLGdCQUFnQk8sU0FBU1I7UUFDekIsU0FBU3VIO1lBQ0wsSUFBSSxDQUFDaEgsZUFBZUMsVUFBVTtnQkFDMUJQLGdCQUFnQk8sU0FBU1Q7WUFDN0I7WUFDQW9FO1FBQ0o7UUFDQUQsWUFBWTFELFNBQVMsQ0FBQ29FLEtBQUtjO1lBQ3ZCLElBQUlkLEtBQUs7Z0JBQ0wsOERBQThEO2dCQUM5RCxJQUFJcEUsT0FBTyxDQUFDZCxRQUFRLENBQUNrQyxXQUFXLENBQUM0RixJQUFJLEtBQUtqSSxTQUFTa0ksVUFBVSxDQUFDQyxPQUFPLEVBQUU7b0JBQ25FLE9BQU9IO2dCQUNYO1lBQ0o7WUFDQSxtRkFBbUY7WUFDbkYsSUFBSXRELHFCQUFxQnpELFNBQVNrRixPQUFPaEMsa0JBQWtCO2dCQUN0RCxJQUFHN0UsU0FBUzhJLFVBQVUsRUFBRTtvQkFDckIsSUFBSSxDQUFDcEgsZUFBZUMsVUFBVTt3QkFDMUJBLE9BQU8sQ0FBQ1osV0FBVyxFQUFFNEQ7b0JBQ3pCO2dCQUNKLEdBQUc7WUFDUDtZQUNBK0Q7UUFDSjtJQUNKO0FBQ0o7QUFDQSxTQUFTZCxvQkFBb0JtQixFQUFFO0lBQzNCLE9BQU87UUFDSEMsV0FBV0QsR0FBR0MsU0FBUztRQUN2Qiw2RkFBNkY7UUFDN0Ysb0RBQW9EO1FBQ3BEQyxTQUFTL0ksT0FBT2dKLElBQUksQ0FBQ0MsTUFBTSxDQUFDSixHQUFHRSxPQUFPLElBQUlGLEdBQUdFLE9BQU8sR0FBRy9JLE9BQU9nSixJQUFJLENBQUNFLFVBQVUsQ0FBQ0wsR0FBR0UsT0FBTztJQUM1RjtBQUNKO0FBQ0EsY0FBYyxHQUNkLE1BQU1wSjtJQUNGc0MsWUFBWXNCLGlCQUFpQixFQUFFcEIsT0FBTyxDQUFFO1FBQ3BDLElBQUksQ0FBQ0ksVUFBVSxHQUFHSTtRQUNsQixJQUFJLENBQUM3QixtQkFBbUIsR0FBR3lDO1FBQzNCLElBQUksQ0FBQ3hDLGVBQWUsR0FBRztRQUN2QixJQUFJLENBQUNxRyxNQUFNLEdBQUc7UUFDZCxNQUFNckUsdUJBQXVCWixRQUFRWSxvQkFBb0I7UUFDekQsSUFBSSxDQUFDbEMsV0FBVyxHQUFHLENBQUMsR0FBR2YsU0FBUzhJLFVBQVUsRUFBRSxJQUFNTyxxQkFBcUIsSUFBSSxFQUFFaEgsVUFBVVk7SUFDM0Y7SUFDQSxJQUFJZ0UsZ0JBQWdCO1FBQ2hCLE9BQU8sSUFBSSxDQUFDaEcsZUFBZTtJQUMvQjtJQUNBOEQsUUFBUTtRQUNKLElBQUksQ0FBQ3VDLE1BQU0sR0FBRztRQUNiLElBQUd0SCxTQUFTc0osWUFBWSxFQUFFLElBQUksQ0FBQ3ZJLFdBQVc7UUFDM0MsSUFBSSxDQUFDMEIsVUFBVSxFQUFFMEM7UUFDakIsSUFBSSxDQUFDMUMsVUFBVSxHQUFHSTtJQUN0QjtBQUNKO0FBQ0FuRCxpQkFBaUIsR0FBR0c7QUFDcEIsU0FBU3dKLHFCQUFxQm5FLFNBQVMsRUFBRTdDLE9BQU87SUFDNUMsTUFBTWtELFFBQVEsQ0FBQyxHQUFHOUUsUUFBUTRHLEdBQUc7SUFDN0JoRixRQUFRb0IsaUJBQWlCLEdBQUd5QixTQUFTLENBQUNsRSxtQkFBbUI7SUFDekQsTUFBTWlDLHVCQUF1QlosUUFBUVksb0JBQW9CO0lBQ3pELElBQUlpQyxVQUFVb0MsTUFBTSxFQUFFO1FBQ2xCO0lBQ0o7SUFDQSxTQUFTaUMscUJBQXFCQyxJQUFJO1FBQzlCLElBQUl0RSxVQUFVb0MsTUFBTSxFQUFFO1lBQ2xCa0MsTUFBTXJFO1lBQ047UUFDSjtRQUNBLElBQUlELFVBQVV6QyxVQUFVLElBQUksTUFBTTtZQUM5QnlDLFVBQVV6QyxVQUFVLEdBQUcrRztRQUMzQjtRQUNBdEUsU0FBUyxDQUFDakUsZUFBZSxHQUFHLENBQUMsR0FBR1IsUUFBUXlGLHFCQUFxQixFQUFFWDtRQUMvREwsU0FBUyxDQUFDbkUsV0FBVyxHQUFHLENBQUMsR0FBR2YsU0FBUzhJLFVBQVUsRUFBRSxJQUFNTyxxQkFBcUJuRSxXQUFXN0MsVUFBVVk7SUFDckc7SUFDQSxNQUFNUixhQUFheUMsVUFBVXpDLFVBQVU7SUFDdkMsSUFBSUEsY0FBYyxNQUFNO1FBQ25CLElBQUd0QyxVQUFVbUUsT0FBTyxFQUFFakMsU0FBUzhGLElBQUksQ0FBQzFGLENBQUFBO1lBQ2pDOEcscUJBQXFCOUc7UUFDekIsR0FBRztZQUNDeUMsVUFBVXpDLFVBQVUsR0FBR0k7WUFDdkJxQyxTQUFTLENBQUNqRSxlQUFlLEdBQUc7UUFDaEM7UUFDQTtJQUNKO0lBQ0EsTUFBTXdJLGNBQWNoSCxXQUFXOEUsU0FBUyxFQUFFSSxXQUFXbEYsV0FBVytFLE9BQU8sR0FBRyxVQUFVbkgsWUFBWTBHLG9CQUFvQjtJQUNwSHRFLFdBQVd5RixPQUFPLENBQUMsQ0FBQyxHQUFHekgsUUFBUXdILEVBQUUsRUFBRSxlQUFlO1FBQUUsQ0FBQ3dCLFlBQVksRUFBRTtJQUFFLEdBQUc1RyxXQUFXc0YsSUFBSSxDQUFDLElBQU1vQix3QkFBd0I7UUFDbEhyRSxVQUFVekMsVUFBVSxFQUFFMEM7UUFDdEJELFVBQVV6QyxVQUFVLEdBQUdJO1FBQ3ZCcUMsU0FBUyxDQUFDakUsZUFBZSxHQUFHO1FBQzVCO0lBQ0o7QUFDSjtBQUNBOztDQUVDLEdBQ0QsTUFBTXJCO0lBQ0Z1QyxZQUFZdUgsRUFBRSxFQUFFckgsVUFBVSxDQUFDLENBQUMsQ0FBRTtRQUMxQixJQUFJLENBQUNzSCw0QkFBNEIsR0FBRztRQUNwQyxJQUFJLENBQUNDLE9BQU8sR0FBRztRQUNmLElBQUksQ0FBQ0MscUJBQXFCLEdBQUc7UUFDN0IsSUFBSSxDQUFDQyxlQUFlLEdBQUc7UUFDdkIsSUFBSSxDQUFDQyxxQkFBcUIsR0FBRztZQUN6QixJQUFJLElBQUksQ0FBQ0gsT0FBTyxFQUNaO1lBQ0osSUFBSSxJQUFJLENBQUNJLE9BQU8sRUFBRTtnQkFDYixJQUFHaEssU0FBU3NKLFlBQVksRUFBRSxJQUFJLENBQUNVLE9BQU87WUFDM0M7WUFDQSxJQUFJLENBQUNMLDRCQUE0QixHQUFHO1lBQ3BDLElBQUksQ0FBQ0UscUJBQXFCLEdBQUc7WUFDN0IsSUFBSSxDQUFDSCxFQUFFLENBQUM7Z0JBQ0osSUFBSSxDQUFDTyxrQkFBa0IsR0FBRyxDQUFDLEdBQUd4SixRQUFRNEcsR0FBRztnQkFDekMsSUFBSSxDQUFDd0MscUJBQXFCLEdBQUc7Z0JBQzdCLElBQUksQ0FBQ0ssV0FBVyxDQUFDLElBQUksQ0FBQ2pILG9CQUFvQjtZQUM5QztRQUNKO1FBQ0EsSUFBSSxDQUFDeUcsRUFBRSxHQUFHQTtRQUNWLElBQUksQ0FBQ08sa0JBQWtCLEdBQUcsQ0FBQ3JIO1FBQzNCLElBQUksQ0FBQ0ssb0JBQW9CLEdBQUdaLFFBQVFZLG9CQUFvQixJQUFJO1FBQzVELElBQUksQ0FBQ0MsdUJBQXVCLEdBQUdiLFFBQVFhLHVCQUF1QixJQUFJO1FBQ2xFLElBQUliLFFBQVFtQyxTQUFTLEVBQUU7WUFDbkIsSUFBSSxDQUFDdUYscUJBQXFCO1FBQzlCLE9BQ0s7WUFDRCxJQUFJLENBQUNHLFdBQVcsQ0FBQ3JIO1FBQ3JCO0lBQ0o7SUFDQThCLE9BQU87UUFDSCxNQUFNd0YsY0FBYyxDQUFDLEdBQUcxSixRQUFRNEcsR0FBRztRQUNuQyxNQUFNK0Msb0JBQW9CRCxjQUFjLElBQUksQ0FBQ0Ysa0JBQWtCO1FBQy9ELGlFQUFpRTtRQUNqRSxJQUFJRyxvQkFBb0IsR0FBRztZQUN2QixPQUFPLElBQUksQ0FBQ0wscUJBQXFCO1FBQ3JDO1FBQ0EsSUFBSSxJQUFJLENBQUNGLHFCQUFxQixFQUFFO1lBQzVCO1FBQ0o7UUFDQSwyREFBMkQ7UUFDM0QsSUFBSSxJQUFJLENBQUNGLDRCQUE0QixFQUFFO1lBQ25DO1FBQ0o7UUFDQSx5RUFBeUU7UUFDekUsZ0NBQWdDO1FBQ2hDLElBQUlTLG9CQUFvQixJQUFJLENBQUNsSCx1QkFBdUIsRUFBRTtZQUNsRCxJQUFJLENBQUN5Ryw0QkFBNEIsR0FBRztZQUNwQyxJQUFJLENBQUNPLFdBQVcsQ0FBQyxJQUFJLENBQUNoSCx1QkFBdUIsR0FBR2tIO1lBQ2hEO1FBQ0o7UUFDQSxJQUFJLENBQUNMLHFCQUFxQjtJQUM5QjtJQUNBOUUsT0FBTztRQUNILElBQUksQ0FBQzJFLE9BQU8sR0FBRztRQUNmLElBQUksSUFBSSxDQUFDSSxPQUFPLEVBQUU7WUFDYixJQUFHaEssU0FBU3NKLFlBQVksRUFBRSxJQUFJLENBQUNVLE9BQU87WUFDdkMsSUFBSSxDQUFDQSxPQUFPLEdBQUduSDtRQUNuQjtRQUNBLElBQUksQ0FBQ29ILGtCQUFrQixHQUFHLENBQUNySDtRQUMzQixJQUFJLENBQUMrRyw0QkFBNEIsR0FBRztJQUN4QztJQUNBVSxXQUFXO1FBQ1AsT0FBT0MsS0FBS0MsU0FBUyxDQUFDLElBQUk7SUFDOUI7SUFDQUMsU0FBUztRQUNMLE1BQU1MLGNBQWMsQ0FBQyxHQUFHMUosUUFBUTRHLEdBQUc7UUFDbkMsTUFBTStDLG9CQUFvQkQsY0FBYyxJQUFJLENBQUNGLGtCQUFrQjtRQUMvRCxPQUFPO1lBQ0hELFNBQVMsSUFBSSxDQUFDQSxPQUFPLElBQUksT0FBTyxRQUFRO1lBQ3hDUyxjQUFjLElBQUksQ0FBQ1Isa0JBQWtCO1lBQ3JDUywyQkFBMkIsSUFBSSxDQUFDZiw0QkFBNEI7WUFDNURDLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1lBQ3JCM0csc0JBQXNCLElBQUksQ0FBQ0Esb0JBQW9CO1lBQy9DQyx5QkFBeUIsSUFBSSxDQUFDQSx1QkFBdUI7WUFDckRpSDtZQUNBQztRQUNKO0lBQ0o7SUFDQUYsWUFBWVMsRUFBRSxFQUFFO1FBQ1osSUFBSSxJQUFJLENBQUNmLE9BQU8sRUFDWjtRQUNKLElBQUksSUFBSSxDQUFDSSxPQUFPLEVBQUU7WUFDYixJQUFHaEssU0FBU3NKLFlBQVksRUFBRSxJQUFJLENBQUNVLE9BQU87UUFDM0M7UUFDQSxJQUFJLENBQUNBLE9BQU8sR0FBRyxDQUFDLEdBQUdoSyxTQUFTOEksVUFBVSxFQUFFLElBQUksQ0FBQ2lCLHFCQUFxQixFQUFFWSxNQUFNLElBQUksQ0FBQzFILG9CQUFvQjtJQUN2RztBQUNKO0FBQ0F2RCx1QkFBdUIsR0FBR0UsaUJBQzFCLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9tb25pdG9yLmpzP2IyNGQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1vbml0b3JJbnRlcnZhbCA9IGV4cG9ydHMuUlRUUGluZ2VyID0gZXhwb3J0cy5Nb25pdG9yID0gZXhwb3J0cy5TZXJ2ZXJNb25pdG9yaW5nTW9kZSA9IHZvaWQgMDtcbmNvbnN0IHRpbWVyc18xID0gcmVxdWlyZShcInRpbWVyc1wiKTtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuLi9ic29uXCIpO1xuY29uc3QgY29ubmVjdF8xID0gcmVxdWlyZShcIi4uL2NtYXAvY29ubmVjdFwiKTtcbmNvbnN0IGNsaWVudF9tZXRhZGF0YV8xID0gcmVxdWlyZShcIi4uL2NtYXAvaGFuZHNoYWtlL2NsaWVudF9tZXRhZGF0YVwiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCBtb25nb19sb2dnZXJfMSA9IHJlcXVpcmUoXCIuLi9tb25nb19sb2dnZXJcIik7XG5jb25zdCBtb25nb190eXBlc18xID0gcmVxdWlyZShcIi4uL21vbmdvX3R5cGVzXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4vY29tbW9uXCIpO1xuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiLi9ldmVudHNcIik7XG5jb25zdCBzZXJ2ZXJfMSA9IHJlcXVpcmUoXCIuL3NlcnZlclwiKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtTZXJ2ZXIgPSBTeW1ib2woJ3NlcnZlcicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga01vbml0b3JJZCA9IFN5bWJvbCgnbW9uaXRvcklkJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrQ2FuY2VsbGF0aW9uVG9rZW4gPSBTeW1ib2woJ2NhbmNlbGxhdGlvblRva2VuJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrUm91bmRUcmlwVGltZSA9IFN5bWJvbCgncm91bmRUcmlwVGltZScpO1xuY29uc3QgU1RBVEVfSURMRSA9ICdpZGxlJztcbmNvbnN0IFNUQVRFX01PTklUT1JJTkcgPSAnbW9uaXRvcmluZyc7XG5jb25zdCBzdGF0ZVRyYW5zaXRpb24gPSAoMCwgdXRpbHNfMS5tYWtlU3RhdGVNYWNoaW5lKSh7XG4gICAgW2NvbW1vbl8xLlNUQVRFX0NMT1NJTkddOiBbY29tbW9uXzEuU1RBVEVfQ0xPU0lORywgU1RBVEVfSURMRSwgY29tbW9uXzEuU1RBVEVfQ0xPU0VEXSxcbiAgICBbY29tbW9uXzEuU1RBVEVfQ0xPU0VEXTogW2NvbW1vbl8xLlNUQVRFX0NMT1NFRCwgU1RBVEVfTU9OSVRPUklOR10sXG4gICAgW1NUQVRFX0lETEVdOiBbU1RBVEVfSURMRSwgU1RBVEVfTU9OSVRPUklORywgY29tbW9uXzEuU1RBVEVfQ0xPU0lOR10sXG4gICAgW1NUQVRFX01PTklUT1JJTkddOiBbU1RBVEVfTU9OSVRPUklORywgU1RBVEVfSURMRSwgY29tbW9uXzEuU1RBVEVfQ0xPU0lOR11cbn0pO1xuY29uc3QgSU5WQUxJRF9SRVFVRVNUX0NIRUNLX1NUQVRFUyA9IG5ldyBTZXQoW2NvbW1vbl8xLlNUQVRFX0NMT1NJTkcsIGNvbW1vbl8xLlNUQVRFX0NMT1NFRCwgU1RBVEVfTU9OSVRPUklOR10pO1xuZnVuY3Rpb24gaXNJbkNsb3NlU3RhdGUobW9uaXRvcikge1xuICAgIHJldHVybiBtb25pdG9yLnMuc3RhdGUgPT09IGNvbW1vbl8xLlNUQVRFX0NMT1NFRCB8fCBtb25pdG9yLnMuc3RhdGUgPT09IGNvbW1vbl8xLlNUQVRFX0NMT1NJTkc7XG59XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0cy5TZXJ2ZXJNb25pdG9yaW5nTW9kZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIGF1dG86ICdhdXRvJyxcbiAgICBwb2xsOiAncG9sbCcsXG4gICAgc3RyZWFtOiAnc3RyZWFtJ1xufSk7XG4vKiogQGludGVybmFsICovXG5jbGFzcyBNb25pdG9yIGV4dGVuZHMgbW9uZ29fdHlwZXNfMS5UeXBlZEV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3Ioc2VydmVyLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBtb25nb19sb2dnZXJfMS5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50LlRPUE9MT0dZO1xuICAgICAgICB0aGlzW2tTZXJ2ZXJdID0gc2VydmVyO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICB0aGlzW2tDYW5jZWxsYXRpb25Ub2tlbl0gPSBuZXcgbW9uZ29fdHlwZXNfMS5DYW5jZWxsYXRpb25Ub2tlbigpO1xuICAgICAgICB0aGlzW2tDYW5jZWxsYXRpb25Ub2tlbl0uc2V0TWF4TGlzdGVuZXJzKEluZmluaXR5KTtcbiAgICAgICAgdGhpc1trTW9uaXRvcklkXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zID0ge1xuICAgICAgICAgICAgc3RhdGU6IGNvbW1vbl8xLlNUQVRFX0NMT1NFRFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBzZXJ2ZXIuZGVzY3JpcHRpb24uYWRkcmVzcztcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgICAgICBjb25uZWN0VGltZW91dE1TOiBvcHRpb25zLmNvbm5lY3RUaW1lb3V0TVMgPz8gMTAwMDAsXG4gICAgICAgICAgICBoZWFydGJlYXRGcmVxdWVuY3lNUzogb3B0aW9ucy5oZWFydGJlYXRGcmVxdWVuY3lNUyA/PyAxMDAwMCxcbiAgICAgICAgICAgIG1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiBvcHRpb25zLm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TID8/IDUwMCxcbiAgICAgICAgICAgIHNlcnZlck1vbml0b3JpbmdNb2RlOiBvcHRpb25zLnNlcnZlck1vbml0b3JpbmdNb2RlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmlzUnVubmluZ0luRmFhc0VudiA9ICgwLCBjbGllbnRfbWV0YWRhdGFfMS5nZXRGQUFTRW52KSgpICE9IG51bGw7XG4gICAgICAgIHRoaXMubW9uZ29Mb2dnZXIgPSB0aGlzW2tTZXJ2ZXJdLnRvcG9sb2d5LmNsaWVudD8ubW9uZ29Mb2dnZXI7XG4gICAgICAgIGNvbnN0IGNhbmNlbGxhdGlvblRva2VuID0gdGhpc1trQ2FuY2VsbGF0aW9uVG9rZW5dO1xuICAgICAgICAvLyBUT0RPOiByZWZhY3RvciB0aGlzIHRvIHB1bGwgaXQgZGlyZWN0bHkgZnJvbSB0aGUgcG9vbCwgcmVxdWlyZXMgbmV3IENvbm5lY3Rpb25Qb29sIGludGVncmF0aW9uXG4gICAgICAgIGNvbnN0IGNvbm5lY3RPcHRpb25zID0ge1xuICAgICAgICAgICAgaWQ6ICc8bW9uaXRvcj4nLFxuICAgICAgICAgICAgZ2VuZXJhdGlvbjogc2VydmVyLnBvb2wuZ2VuZXJhdGlvbixcbiAgICAgICAgICAgIGNhbmNlbGxhdGlvblRva2VuLFxuICAgICAgICAgICAgaG9zdEFkZHJlc3M6IHNlcnZlci5kZXNjcmlwdGlvbi5ob3N0QWRkcmVzcyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAvLyBmb3JjZSBCU09OIHNlcmlhbGl6YXRpb24gb3B0aW9uc1xuICAgICAgICAgICAgcmF3OiBmYWxzZSxcbiAgICAgICAgICAgIHVzZUJpZ0ludDY0OiBmYWxzZSxcbiAgICAgICAgICAgIHByb21vdGVMb25nczogdHJ1ZSxcbiAgICAgICAgICAgIHByb21vdGVWYWx1ZXM6IHRydWUsXG4gICAgICAgICAgICBwcm9tb3RlQnVmZmVyczogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICAvLyBlbnN1cmUgbm8gYXV0aGVudGljYXRpb24gaXMgdXNlZCBmb3IgbW9uaXRvcmluZ1xuICAgICAgICBkZWxldGUgY29ubmVjdE9wdGlvbnMuY3JlZGVudGlhbHM7XG4gICAgICAgIGlmIChjb25uZWN0T3B0aW9ucy5hdXRvRW5jcnlwdGVyKSB7XG4gICAgICAgICAgICBkZWxldGUgY29ubmVjdE9wdGlvbnMuYXV0b0VuY3J5cHRlcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbm5lY3RPcHRpb25zID0gT2JqZWN0LmZyZWV6ZShjb25uZWN0T3B0aW9ucyk7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLnMuc3RhdGUgIT09IGNvbW1vbl8xLlNUQVRFX0NMT1NFRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN0YXJ0XG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdEZyZXF1ZW5jeU1TID0gdGhpcy5vcHRpb25zLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TO1xuICAgICAgICBjb25zdCBtaW5IZWFydGJlYXRGcmVxdWVuY3lNUyA9IHRoaXMub3B0aW9ucy5taW5IZWFydGJlYXRGcmVxdWVuY3lNUztcbiAgICAgICAgdGhpc1trTW9uaXRvcklkXSA9IG5ldyBNb25pdG9ySW50ZXJ2YWwobW9uaXRvclNlcnZlcih0aGlzKSwge1xuICAgICAgICAgICAgaGVhcnRiZWF0RnJlcXVlbmN5TVM6IGhlYXJ0YmVhdEZyZXF1ZW5jeU1TLFxuICAgICAgICAgICAgbWluSGVhcnRiZWF0RnJlcXVlbmN5TVM6IG1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TLFxuICAgICAgICAgICAgaW1tZWRpYXRlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXF1ZXN0Q2hlY2soKSB7XG4gICAgICAgIGlmIChJTlZBTElEX1JFUVVFU1RfQ0hFQ0tfU1RBVEVTLmhhcyh0aGlzLnMuc3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trTW9uaXRvcklkXT8ud2FrZSgpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgY29uc3QgdG9wb2xvZ3lWZXJzaW9uID0gdGhpc1trU2VydmVyXS5kZXNjcmlwdGlvbi50b3BvbG9neVZlcnNpb247XG4gICAgICAgIGlmIChpc0luQ2xvc2VTdGF0ZSh0aGlzKSB8fCB0b3BvbG9neVZlcnNpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlVHJhbnNpdGlvbih0aGlzLCBjb21tb25fMS5TVEFURV9DTE9TSU5HKTtcbiAgICAgICAgcmVzZXRNb25pdG9yU3RhdGUodGhpcyk7XG4gICAgICAgIC8vIHJlc3RhcnQgbW9uaXRvclxuICAgICAgICBzdGF0ZVRyYW5zaXRpb24odGhpcywgU1RBVEVfSURMRSk7XG4gICAgICAgIC8vIHJlc3RhcnQgbW9uaXRvcmluZ1xuICAgICAgICBjb25zdCBoZWFydGJlYXRGcmVxdWVuY3lNUyA9IHRoaXMub3B0aW9ucy5oZWFydGJlYXRGcmVxdWVuY3lNUztcbiAgICAgICAgY29uc3QgbWluSGVhcnRiZWF0RnJlcXVlbmN5TVMgPSB0aGlzLm9wdGlvbnMubWluSGVhcnRiZWF0RnJlcXVlbmN5TVM7XG4gICAgICAgIHRoaXNba01vbml0b3JJZF0gPSBuZXcgTW9uaXRvckludGVydmFsKG1vbml0b3JTZXJ2ZXIodGhpcyksIHtcbiAgICAgICAgICAgIGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiBoZWFydGJlYXRGcmVxdWVuY3lNUyxcbiAgICAgICAgICAgIG1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiBtaW5IZWFydGJlYXRGcmVxdWVuY3lNU1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmIChpc0luQ2xvc2VTdGF0ZSh0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlVHJhbnNpdGlvbih0aGlzLCBjb21tb25fMS5TVEFURV9DTE9TSU5HKTtcbiAgICAgICAgcmVzZXRNb25pdG9yU3RhdGUodGhpcyk7XG4gICAgICAgIC8vIGNsb3NlIG1vbml0b3JcbiAgICAgICAgdGhpcy5lbWl0KCdjbG9zZScpO1xuICAgICAgICBzdGF0ZVRyYW5zaXRpb24odGhpcywgY29tbW9uXzEuU1RBVEVfQ0xPU0VEKTtcbiAgICB9XG59XG5leHBvcnRzLk1vbml0b3IgPSBNb25pdG9yO1xuZnVuY3Rpb24gcmVzZXRNb25pdG9yU3RhdGUobW9uaXRvcikge1xuICAgIG1vbml0b3Jba01vbml0b3JJZF0/LnN0b3AoKTtcbiAgICBtb25pdG9yW2tNb25pdG9ySWRdID0gdW5kZWZpbmVkO1xuICAgIG1vbml0b3IucnR0UGluZ2VyPy5jbG9zZSgpO1xuICAgIG1vbml0b3IucnR0UGluZ2VyID0gdW5kZWZpbmVkO1xuICAgIG1vbml0b3Jba0NhbmNlbGxhdGlvblRva2VuXS5lbWl0KCdjYW5jZWwnKTtcbiAgICBtb25pdG9yLmNvbm5lY3Rpb24/LmRlc3Ryb3koKTtcbiAgICBtb25pdG9yLmNvbm5lY3Rpb24gPSBudWxsO1xufVxuZnVuY3Rpb24gdXNlU3RyZWFtaW5nUHJvdG9jb2wobW9uaXRvciwgdG9wb2xvZ3lWZXJzaW9uKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBubyB0b3BvbG9neSB2ZXJzaW9uIHdlIGFsd2F5cyBwb2xsIG5vIG1hdHRlclxuICAgIC8vIHdoYXQgdGhlIHVzZXIgcHJvdmlkZWQsIHNpbmNlIHRoZSBzZXJ2ZXIgZG9lcyBub3Qgc3VwcG9ydFxuICAgIC8vIHRoZSBzdHJlYW1pbmcgcHJvdG9jb2wuXG4gICAgaWYgKHRvcG9sb2d5VmVyc2lvbiA9PSBudWxsKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgY29uc3Qgc2VydmVyTW9uaXRvcmluZ01vZGUgPSBtb25pdG9yLm9wdGlvbnMuc2VydmVyTW9uaXRvcmluZ01vZGU7XG4gICAgaWYgKHNlcnZlck1vbml0b3JpbmdNb2RlID09PSBleHBvcnRzLlNlcnZlck1vbml0b3JpbmdNb2RlLnBvbGwpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoc2VydmVyTW9uaXRvcmluZ01vZGUgPT09IGV4cG9ydHMuU2VydmVyTW9uaXRvcmluZ01vZGUuc3RyZWFtKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAvLyBJZiB3ZSBhcmUgaW4gYXV0byBtb2RlLCB3ZSBuZWVkIHRvIGZpZ3VyZSBvdXQgaWYgd2UncmUgaW4gYSBGYWFTXG4gICAgLy8gZW52aXJvbm1lbnQgb3Igbm90IGFuZCBjaG9vc2UgdGhlIGFwcHJvcHJpYXRlIG1vZGUuXG4gICAgaWYgKG1vbml0b3IuaXNSdW5uaW5nSW5GYWFzRW52KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBjaGVja1NlcnZlcihtb25pdG9yLCBjYWxsYmFjaykge1xuICAgIGxldCBzdGFydDtcbiAgICBsZXQgYXdhaXRlZDtcbiAgICBjb25zdCB0b3BvbG9neVZlcnNpb24gPSBtb25pdG9yW2tTZXJ2ZXJdLmRlc2NyaXB0aW9uLnRvcG9sb2d5VmVyc2lvbjtcbiAgICBjb25zdCBpc0F3YWl0YWJsZSA9IHVzZVN0cmVhbWluZ1Byb3RvY29sKG1vbml0b3IsIHRvcG9sb2d5VmVyc2lvbik7XG4gICAgbW9uaXRvci5lbWl0QW5kTG9nSGVhcnRiZWF0KHNlcnZlcl8xLlNlcnZlci5TRVJWRVJfSEVBUlRCRUFUX1NUQVJURUQsIG1vbml0b3Jba1NlcnZlcl0udG9wb2xvZ3kucy5pZCwgdW5kZWZpbmVkLCBuZXcgZXZlbnRzXzEuU2VydmVySGVhcnRiZWF0U3RhcnRlZEV2ZW50KG1vbml0b3IuYWRkcmVzcywgaXNBd2FpdGFibGUpKTtcbiAgICBmdW5jdGlvbiBvbkhlYXJ0YmVhdEZhaWxlZChlcnIpIHtcbiAgICAgICAgbW9uaXRvci5jb25uZWN0aW9uPy5kZXN0cm95KCk7XG4gICAgICAgIG1vbml0b3IuY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICAgIG1vbml0b3IuZW1pdEFuZExvZ0hlYXJ0YmVhdChzZXJ2ZXJfMS5TZXJ2ZXIuU0VSVkVSX0hFQVJUQkVBVF9GQUlMRUQsIG1vbml0b3Jba1NlcnZlcl0udG9wb2xvZ3kucy5pZCwgdW5kZWZpbmVkLCBuZXcgZXZlbnRzXzEuU2VydmVySGVhcnRiZWF0RmFpbGVkRXZlbnQobW9uaXRvci5hZGRyZXNzLCAoMCwgdXRpbHNfMS5jYWxjdWxhdGVEdXJhdGlvbkluTXMpKHN0YXJ0KSwgZXJyLCBhd2FpdGVkKSk7XG4gICAgICAgIGNvbnN0IGVycm9yID0gIShlcnIgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IpXG4gICAgICAgICAgICA/IG5ldyBlcnJvcl8xLk1vbmdvRXJyb3IoZXJyb3JfMS5Nb25nb0Vycm9yLmJ1aWxkRXJyb3JNZXNzYWdlKGVyciksIHsgY2F1c2U6IGVyciB9KVxuICAgICAgICAgICAgOiBlcnI7XG4gICAgICAgIGVycm9yLmFkZEVycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuUmVzZXRQb29sKTtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yLmFkZEVycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgbW9uaXRvci5lbWl0KCdyZXNldFNlcnZlcicsIGVycm9yKTtcbiAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25IZWFydGJlYXRTdWNjZWVkZWQoaGVsbG8pIHtcbiAgICAgICAgaWYgKCEoJ2lzV3JpdGFibGVQcmltYXJ5JyBpbiBoZWxsbykpIHtcbiAgICAgICAgICAgIC8vIFByb3ZpZGUgaGVsbG8tc3R5bGUgcmVzcG9uc2UgZG9jdW1lbnQuXG4gICAgICAgICAgICBoZWxsby5pc1dyaXRhYmxlUHJpbWFyeSA9IGhlbGxvW2NvbnN0YW50c18xLkxFR0FDWV9IRUxMT19DT01NQU5EXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGlzQXdhaXRhYmxlICYmIG1vbml0b3IucnR0UGluZ2VyXG4gICAgICAgICAgICA/IG1vbml0b3IucnR0UGluZ2VyLnJvdW5kVHJpcFRpbWVcbiAgICAgICAgICAgIDogKDAsIHV0aWxzXzEuY2FsY3VsYXRlRHVyYXRpb25Jbk1zKShzdGFydCk7XG4gICAgICAgIG1vbml0b3IuZW1pdEFuZExvZ0hlYXJ0YmVhdChzZXJ2ZXJfMS5TZXJ2ZXIuU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQsIG1vbml0b3Jba1NlcnZlcl0udG9wb2xvZ3kucy5pZCwgaGVsbG8uY29ubmVjdGlvbklkLCBuZXcgZXZlbnRzXzEuU2VydmVySGVhcnRiZWF0U3VjY2VlZGVkRXZlbnQobW9uaXRvci5hZGRyZXNzLCBkdXJhdGlvbiwgaGVsbG8sIGlzQXdhaXRhYmxlKSk7XG4gICAgICAgIGlmIChpc0F3YWl0YWJsZSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIHRoZSBzdHJlYW1pbmcgcHJvdG9jb2wgdGhlbiB3ZSBpbW1lZGlhdGVseSBpc3N1ZSBhbm90aGVyICdzdGFydGVkJ1xuICAgICAgICAgICAgLy8gZXZlbnQsIG90aGVyd2lzZSB0aGUgXCJjaGVja1wiIGlzIGNvbXBsZXRlIGFuZCByZXR1cm4gdG8gdGhlIG1haW4gbW9uaXRvciBsb29wXG4gICAgICAgICAgICBtb25pdG9yLmVtaXRBbmRMb2dIZWFydGJlYXQoc2VydmVyXzEuU2VydmVyLlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCwgbW9uaXRvcltrU2VydmVyXS50b3BvbG9neS5zLmlkLCB1bmRlZmluZWQsIG5ldyBldmVudHNfMS5TZXJ2ZXJIZWFydGJlYXRTdGFydGVkRXZlbnQobW9uaXRvci5hZGRyZXNzLCB0cnVlKSk7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG5vdCBhY3R1YWxseSBzZW50IGFuIG91dGdvaW5nIGhhbmRzaGFrZSwgYnV0IHdoZW4gd2UgZ2V0IHRoZSBuZXh0IHJlc3BvbnNlIHdlXG4gICAgICAgICAgICAvLyB3YW50IHRoZSBkdXJhdGlvbiB0byByZWZsZWN0IHRoZSB0aW1lIHNpbmNlIHdlIGxhc3QgaGVhcmQgZnJvbSB0aGUgc2VydmVyXG4gICAgICAgICAgICBzdGFydCA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1vbml0b3IucnR0UGluZ2VyPy5jbG9zZSgpO1xuICAgICAgICAgICAgbW9uaXRvci5ydHRQaW5nZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIGhlbGxvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB7IGNvbm5lY3Rpb24gfSA9IG1vbml0b3I7XG4gICAgaWYgKGNvbm5lY3Rpb24gJiYgIWNvbm5lY3Rpb24uY2xvc2VkKSB7XG4gICAgICAgIGNvbnN0IHsgc2VydmVyQXBpLCBoZWxsb09rIH0gPSBjb25uZWN0aW9uO1xuICAgICAgICBjb25zdCBjb25uZWN0VGltZW91dE1TID0gbW9uaXRvci5vcHRpb25zLmNvbm5lY3RUaW1lb3V0TVM7XG4gICAgICAgIGNvbnN0IG1heEF3YWl0VGltZU1TID0gbW9uaXRvci5vcHRpb25zLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TO1xuICAgICAgICBjb25zdCBjbWQgPSB7XG4gICAgICAgICAgICBbc2VydmVyQXBpPy52ZXJzaW9uIHx8IGhlbGxvT2sgPyAnaGVsbG8nIDogY29uc3RhbnRzXzEuTEVHQUNZX0hFTExPX0NPTU1BTkRdOiAxLFxuICAgICAgICAgICAgLi4uKGlzQXdhaXRhYmxlICYmIHRvcG9sb2d5VmVyc2lvblxuICAgICAgICAgICAgICAgID8geyBtYXhBd2FpdFRpbWVNUywgdG9wb2xvZ3lWZXJzaW9uOiBtYWtlVG9wb2xvZ3lWZXJzaW9uKHRvcG9sb2d5VmVyc2lvbikgfVxuICAgICAgICAgICAgICAgIDoge30pXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBpc0F3YWl0YWJsZVxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgc29ja2V0VGltZW91dE1TOiBjb25uZWN0VGltZW91dE1TID8gY29ubmVjdFRpbWVvdXRNUyArIG1heEF3YWl0VGltZU1TIDogMCxcbiAgICAgICAgICAgICAgICBleGhhdXN0QWxsb3dlZDogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7IHNvY2tldFRpbWVvdXRNUzogY29ubmVjdFRpbWVvdXRNUyB9O1xuICAgICAgICBpZiAoaXNBd2FpdGFibGUgJiYgbW9uaXRvci5ydHRQaW5nZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgbW9uaXRvci5ydHRQaW5nZXIgPSBuZXcgUlRUUGluZ2VyKG1vbml0b3Jba0NhbmNlbGxhdGlvblRva2VuXSwgT2JqZWN0LmFzc2lnbih7IGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiBtb25pdG9yLm9wdGlvbnMuaGVhcnRiZWF0RnJlcXVlbmN5TVMgfSwgbW9uaXRvci5jb25uZWN0T3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlY29yZCBuZXcgc3RhcnQgdGltZSBiZWZvcmUgc2VuZGluZyBoYW5kc2hha2VcbiAgICAgICAgc3RhcnQgPSAoMCwgdXRpbHNfMS5ub3cpKCk7XG4gICAgICAgIGlmIChpc0F3YWl0YWJsZSkge1xuICAgICAgICAgICAgYXdhaXRlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5leGhhdXN0Q29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJ2FkbWluLiRjbWQnKSwgY21kLCBvcHRpb25zLCAoZXJyb3IsIGhlbGxvKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25IZWFydGJlYXRGYWlsZWQoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvbkhlYXJ0YmVhdFN1Y2NlZWRlZChoZWxsbyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdGVkID0gZmFsc2U7XG4gICAgICAgIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIC5jb21tYW5kKCgwLCB1dGlsc18xLm5zKSgnYWRtaW4uJGNtZCcpLCBjbWQsIG9wdGlvbnMpXG4gICAgICAgICAgICAudGhlbihvbkhlYXJ0YmVhdFN1Y2NlZWRlZCwgb25IZWFydGJlYXRGYWlsZWQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGNvbm5lY3RpbmcgZG9lcyBhbiBpbXBsaWNpdCBgaGVsbG9gXG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gYXdhaXQgKDAsIGNvbm5lY3RfMS5tYWtlU29ja2V0KShtb25pdG9yLmNvbm5lY3RPcHRpb25zKTtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9ICgwLCBjb25uZWN0XzEubWFrZUNvbm5lY3Rpb24pKG1vbml0b3IuY29ubmVjdE9wdGlvbnMsIHNvY2tldCk7XG4gICAgICAgIC8vIFRoZSBzdGFydCB0aW1lIGlzIGFmdGVyIHNvY2tldCBjcmVhdGlvbiBidXQgYmVmb3JlIHRoZSBoYW5kc2hha2VcbiAgICAgICAgc3RhcnQgPSAoMCwgdXRpbHNfMS5ub3cpKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCAoMCwgY29ubmVjdF8xLnBlcmZvcm1Jbml0aWFsSGFuZHNoYWtlKShjb25uZWN0aW9uLCBtb25pdG9yLmNvbm5lY3RPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29ubmVjdGlvbi5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH0pKCkudGhlbihjb25uZWN0aW9uID0+IHtcbiAgICAgICAgaWYgKGlzSW5DbG9zZVN0YXRlKG1vbml0b3IpKSB7XG4gICAgICAgICAgICBjb25uZWN0aW9uLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBtb25pdG9yLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICBtb25pdG9yLmVtaXRBbmRMb2dIZWFydGJlYXQoc2VydmVyXzEuU2VydmVyLlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVELCBtb25pdG9yW2tTZXJ2ZXJdLnRvcG9sb2d5LnMuaWQsIGNvbm5lY3Rpb24uaGVsbG8/LmNvbm5lY3Rpb25JZCwgbmV3IGV2ZW50c18xLlNlcnZlckhlYXJ0YmVhdFN1Y2NlZWRlZEV2ZW50KG1vbml0b3IuYWRkcmVzcywgKDAsIHV0aWxzXzEuY2FsY3VsYXRlRHVyYXRpb25Jbk1zKShzdGFydCksIGNvbm5lY3Rpb24uaGVsbG8sIHVzZVN0cmVhbWluZ1Byb3RvY29sKG1vbml0b3IsIGNvbm5lY3Rpb24uaGVsbG8/LnRvcG9sb2d5VmVyc2lvbikpKTtcbiAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCBjb25uZWN0aW9uLmhlbGxvKTtcbiAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgIG1vbml0b3IuY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICAgIGF3YWl0ZWQgPSBmYWxzZTtcbiAgICAgICAgb25IZWFydGJlYXRGYWlsZWQoZXJyb3IpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gbW9uaXRvclNlcnZlcihtb25pdG9yKSB7XG4gICAgcmV0dXJuIChjYWxsYmFjaykgPT4ge1xuICAgICAgICBpZiAobW9uaXRvci5zLnN0YXRlID09PSBTVEFURV9NT05JVE9SSU5HKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZVRyYW5zaXRpb24obW9uaXRvciwgU1RBVEVfTU9OSVRPUklORyk7XG4gICAgICAgIGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgICAgICAgICBpZiAoIWlzSW5DbG9zZVN0YXRlKG1vbml0b3IpKSB7XG4gICAgICAgICAgICAgICAgc3RhdGVUcmFuc2l0aW9uKG1vbml0b3IsIFNUQVRFX0lETEUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBjaGVja1NlcnZlcihtb25pdG9yLCAoZXJyLCBoZWxsbykgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBhbiBlcnJvciBvY2N1cnJlZCBvbiBpbml0aWFsIGRpc2NvdmVyeSwgYWxzbyBiYWlsXG4gICAgICAgICAgICAgICAgaWYgKG1vbml0b3Jba1NlcnZlcl0uZGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb25lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgdGhlIGNoZWNrIGluZGljYXRlcyBzdHJlYW1pbmcgaXMgc3VwcG9ydGVkLCBpbW1lZGlhdGVseSByZXNjaGVkdWxlIG1vbml0b3JpbmdcbiAgICAgICAgICAgIGlmICh1c2VTdHJlYW1pbmdQcm90b2NvbChtb25pdG9yLCBoZWxsbz8udG9wb2xvZ3lWZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICgwLCB0aW1lcnNfMS5zZXRUaW1lb3V0KSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNJbkNsb3NlU3RhdGUobW9uaXRvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbml0b3Jba01vbml0b3JJZF0/Lndha2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbWFrZVRvcG9sb2d5VmVyc2lvbih0dikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb2Nlc3NJZDogdHYucHJvY2Vzc0lkLFxuICAgICAgICAvLyB0ZXN0cyBtb2NrIGNvdW50ZXIgYXMganVzdCBudW1iZXIsIGJ1dCBpbiBhIHJlYWwgc2l0dWF0aW9uIGNvdW50ZXIgc2hvdWxkIGFsd2F5cyBiZSBhIExvbmdcbiAgICAgICAgLy8gVE9ETyhOT0RFLTI2NzQpOiBQcmVzZXJ2ZSBpbnQ2NCBzZW50IGZyb20gTW9uZ29EQlxuICAgICAgICBjb3VudGVyOiBic29uXzEuTG9uZy5pc0xvbmcodHYuY291bnRlcikgPyB0di5jb3VudGVyIDogYnNvbl8xLkxvbmcuZnJvbU51bWJlcih0di5jb3VudGVyKVxuICAgIH07XG59XG4vKiogQGludGVybmFsICovXG5jbGFzcyBSVFRQaW5nZXIge1xuICAgIGNvbnN0cnVjdG9yKGNhbmNlbGxhdGlvblRva2VuLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpc1trQ2FuY2VsbGF0aW9uVG9rZW5dID0gY2FuY2VsbGF0aW9uVG9rZW47XG4gICAgICAgIHRoaXNba1JvdW5kVHJpcFRpbWVdID0gMDtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RnJlcXVlbmN5TVMgPSBvcHRpb25zLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TO1xuICAgICAgICB0aGlzW2tNb25pdG9ySWRdID0gKDAsIHRpbWVyc18xLnNldFRpbWVvdXQpKCgpID0+IG1lYXN1cmVSb3VuZFRyaXBUaW1lKHRoaXMsIG9wdGlvbnMpLCBoZWFydGJlYXRGcmVxdWVuY3lNUyk7XG4gICAgfVxuICAgIGdldCByb3VuZFRyaXBUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trUm91bmRUcmlwVGltZV07XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgICgwLCB0aW1lcnNfMS5jbGVhclRpbWVvdXQpKHRoaXNba01vbml0b3JJZF0pO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24/LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbmV4cG9ydHMuUlRUUGluZ2VyID0gUlRUUGluZ2VyO1xuZnVuY3Rpb24gbWVhc3VyZVJvdW5kVHJpcFRpbWUocnR0UGluZ2VyLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgc3RhcnQgPSAoMCwgdXRpbHNfMS5ub3cpKCk7XG4gICAgb3B0aW9ucy5jYW5jZWxsYXRpb25Ub2tlbiA9IHJ0dFBpbmdlcltrQ2FuY2VsbGF0aW9uVG9rZW5dO1xuICAgIGNvbnN0IGhlYXJ0YmVhdEZyZXF1ZW5jeU1TID0gb3B0aW9ucy5oZWFydGJlYXRGcmVxdWVuY3lNUztcbiAgICBpZiAocnR0UGluZ2VyLmNsb3NlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1lYXN1cmVBbmRSZXNjaGVkdWxlKGNvbm4pIHtcbiAgICAgICAgaWYgKHJ0dFBpbmdlci5jbG9zZWQpIHtcbiAgICAgICAgICAgIGNvbm4/LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocnR0UGluZ2VyLmNvbm5lY3Rpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgcnR0UGluZ2VyLmNvbm5lY3Rpb24gPSBjb25uO1xuICAgICAgICB9XG4gICAgICAgIHJ0dFBpbmdlcltrUm91bmRUcmlwVGltZV0gPSAoMCwgdXRpbHNfMS5jYWxjdWxhdGVEdXJhdGlvbkluTXMpKHN0YXJ0KTtcbiAgICAgICAgcnR0UGluZ2VyW2tNb25pdG9ySWRdID0gKDAsIHRpbWVyc18xLnNldFRpbWVvdXQpKCgpID0+IG1lYXN1cmVSb3VuZFRyaXBUaW1lKHJ0dFBpbmdlciwgb3B0aW9ucyksIGhlYXJ0YmVhdEZyZXF1ZW5jeU1TKTtcbiAgICB9XG4gICAgY29uc3QgY29ubmVjdGlvbiA9IHJ0dFBpbmdlci5jb25uZWN0aW9uO1xuICAgIGlmIChjb25uZWN0aW9uID09IG51bGwpIHtcbiAgICAgICAgKDAsIGNvbm5lY3RfMS5jb25uZWN0KShvcHRpb25zKS50aGVuKGNvbm5lY3Rpb24gPT4ge1xuICAgICAgICAgICAgbWVhc3VyZUFuZFJlc2NoZWR1bGUoY29ubmVjdGlvbik7XG4gICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgIHJ0dFBpbmdlci5jb25uZWN0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcnR0UGluZ2VyW2tSb3VuZFRyaXBUaW1lXSA9IDA7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbW1hbmROYW1lID0gY29ubmVjdGlvbi5zZXJ2ZXJBcGk/LnZlcnNpb24gfHwgY29ubmVjdGlvbi5oZWxsb09rID8gJ2hlbGxvJyA6IGNvbnN0YW50c18xLkxFR0FDWV9IRUxMT19DT01NQU5EO1xuICAgIGNvbm5lY3Rpb24uY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJ2FkbWluLiRjbWQnKSwgeyBbY29tbWFuZE5hbWVdOiAxIH0sIHVuZGVmaW5lZCkudGhlbigoKSA9PiBtZWFzdXJlQW5kUmVzY2hlZHVsZSgpLCAoKSA9PiB7XG4gICAgICAgIHJ0dFBpbmdlci5jb25uZWN0aW9uPy5kZXN0cm95KCk7XG4gICAgICAgIHJ0dFBpbmdlci5jb25uZWN0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICBydHRQaW5nZXJba1JvdW5kVHJpcFRpbWVdID0gMDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0pO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgTW9uaXRvckludGVydmFsIHtcbiAgICBjb25zdHJ1Y3Rvcihmbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMuaXNFeHBlZGl0ZWRDYWxsVG9GblNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0V4ZWN1dGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oYXNFeGVjdXRlZE9uY2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZXhlY3V0ZUFuZFJlc2NoZWR1bGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWVySWQpIHtcbiAgICAgICAgICAgICAgICAoMCwgdGltZXJzXzEuY2xlYXJUaW1lb3V0KSh0aGlzLnRpbWVySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0V4cGVkaXRlZENhbGxUb0ZuU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzRXhlY3V0aW9uSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmZuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RFeGVjdXRpb25FbmRlZCA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRXhlY3V0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2NoZWR1bGUodGhpcy5oZWFydGJlYXRGcmVxdWVuY3lNUyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mbiA9IGZuO1xuICAgICAgICB0aGlzLmxhc3RFeGVjdXRpb25FbmRlZCA9IC1JbmZpbml0eTtcbiAgICAgICAgdGhpcy5oZWFydGJlYXRGcmVxdWVuY3lNUyA9IG9wdGlvbnMuaGVhcnRiZWF0RnJlcXVlbmN5TVMgPz8gMTAwMDtcbiAgICAgICAgdGhpcy5taW5IZWFydGJlYXRGcmVxdWVuY3lNUyA9IG9wdGlvbnMubWluSGVhcnRiZWF0RnJlcXVlbmN5TVMgPz8gNTAwO1xuICAgICAgICBpZiAob3B0aW9ucy5pbW1lZGlhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2V4ZWN1dGVBbmRSZXNjaGVkdWxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNjaGVkdWxlKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2FrZSgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSAoMCwgdXRpbHNfMS5ub3cpKCk7XG4gICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RDYWxsID0gY3VycmVudFRpbWUgLSB0aGlzLmxhc3RFeGVjdXRpb25FbmRlZDtcbiAgICAgICAgLy8gVE9ETyhOT0RFLTQ2NzQpOiBBZGQgZXJyb3IgaGFuZGxpbmcgYW5kIGxvZ2dpbmcgdG8gdGhlIG1vbml0b3JcbiAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGVBbmRSZXNjaGVkdWxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNFeGVjdXRpb25JblByb2dyZXNzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGVib3VuY2UgbXVsdGlwbGUgY2FsbHMgdG8gd2FrZSB3aXRoaW4gdGhlIGBtaW5JbnRlcnZhbGBcbiAgICAgICAgaWYgKHRoaXMuaXNFeHBlZGl0ZWRDYWxsVG9GblNjaGVkdWxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlc2NoZWR1bGUgYSBjYWxsIGFzIHNvb24gYXMgcG9zc2libGUsIGVuc3VyaW5nIHRoZSBjYWxsIG5ldmVyIGhhcHBlbnNcbiAgICAgICAgLy8gZmFzdGVyIHRoYW4gdGhlIGBtaW5JbnRlcnZhbGBcbiAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsIDwgdGhpcy5taW5IZWFydGJlYXRGcmVxdWVuY3lNUykge1xuICAgICAgICAgICAgdGhpcy5pc0V4cGVkaXRlZENhbGxUb0ZuU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc2NoZWR1bGUodGhpcy5taW5IZWFydGJlYXRGcmVxdWVuY3lNUyAtIHRpbWVTaW5jZUxhc3RDYWxsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9leGVjdXRlQW5kUmVzY2hlZHVsZSgpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XG4gICAgICAgICAgICAoMCwgdGltZXJzXzEuY2xlYXJUaW1lb3V0KSh0aGlzLnRpbWVySWQpO1xuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEV4ZWN1dGlvbkVuZGVkID0gLUluZmluaXR5O1xuICAgICAgICB0aGlzLmlzRXhwZWRpdGVkQ2FsbFRvRm5TY2hlZHVsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGwgPSBjdXJyZW50VGltZSAtIHRoaXMubGFzdEV4ZWN1dGlvbkVuZGVkO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGltZXJJZDogdGhpcy50aW1lcklkICE9IG51bGwgPyAnc2V0JyA6ICdjbGVhcmVkJyxcbiAgICAgICAgICAgIGxhc3RDYWxsVGltZTogdGhpcy5sYXN0RXhlY3V0aW9uRW5kZWQsXG4gICAgICAgICAgICBpc0V4cGVkaXRlZENoZWNrU2NoZWR1bGVkOiB0aGlzLmlzRXhwZWRpdGVkQ2FsbFRvRm5TY2hlZHVsZWQsXG4gICAgICAgICAgICBzdG9wcGVkOiB0aGlzLnN0b3BwZWQsXG4gICAgICAgICAgICBoZWFydGJlYXRGcmVxdWVuY3lNUzogdGhpcy5oZWFydGJlYXRGcmVxdWVuY3lNUyxcbiAgICAgICAgICAgIG1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiB0aGlzLm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TLFxuICAgICAgICAgICAgY3VycmVudFRpbWUsXG4gICAgICAgICAgICB0aW1lU2luY2VMYXN0Q2FsbFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfcmVzY2hlZHVsZShtcykge1xuICAgICAgICBpZiAodGhpcy5zdG9wcGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XG4gICAgICAgICAgICAoMCwgdGltZXJzXzEuY2xlYXJUaW1lb3V0KSh0aGlzLnRpbWVySWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGltZXJJZCA9ICgwLCB0aW1lcnNfMS5zZXRUaW1lb3V0KSh0aGlzLl9leGVjdXRlQW5kUmVzY2hlZHVsZSwgbXMgfHwgdGhpcy5oZWFydGJlYXRGcmVxdWVuY3lNUyk7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25pdG9ySW50ZXJ2YWwgPSBNb25pdG9ySW50ZXJ2YWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb25pdG9yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1vbml0b3JJbnRlcnZhbCIsIlJUVFBpbmdlciIsIk1vbml0b3IiLCJTZXJ2ZXJNb25pdG9yaW5nTW9kZSIsInRpbWVyc18xIiwicmVxdWlyZSIsImJzb25fMSIsImNvbm5lY3RfMSIsImNsaWVudF9tZXRhZGF0YV8xIiwiY29uc3RhbnRzXzEiLCJlcnJvcl8xIiwibW9uZ29fbG9nZ2VyXzEiLCJtb25nb190eXBlc18xIiwidXRpbHNfMSIsImNvbW1vbl8xIiwiZXZlbnRzXzEiLCJzZXJ2ZXJfMSIsImtTZXJ2ZXIiLCJTeW1ib2wiLCJrTW9uaXRvcklkIiwia0NhbmNlbGxhdGlvblRva2VuIiwia1JvdW5kVHJpcFRpbWUiLCJTVEFURV9JRExFIiwiU1RBVEVfTU9OSVRPUklORyIsInN0YXRlVHJhbnNpdGlvbiIsIm1ha2VTdGF0ZU1hY2hpbmUiLCJTVEFURV9DTE9TSU5HIiwiU1RBVEVfQ0xPU0VEIiwiSU5WQUxJRF9SRVFVRVNUX0NIRUNLX1NUQVRFUyIsIlNldCIsImlzSW5DbG9zZVN0YXRlIiwibW9uaXRvciIsInMiLCJzdGF0ZSIsImZyZWV6ZSIsImF1dG8iLCJwb2xsIiwic3RyZWFtIiwiVHlwZWRFdmVudEVtaXR0ZXIiLCJjb25zdHJ1Y3RvciIsInNlcnZlciIsIm9wdGlvbnMiLCJjb21wb25lbnQiLCJNb25nb0xvZ2dhYmxlQ29tcG9uZW50IiwiVE9QT0xPR1kiLCJjb25uZWN0aW9uIiwiQ2FuY2VsbGF0aW9uVG9rZW4iLCJzZXRNYXhMaXN0ZW5lcnMiLCJJbmZpbml0eSIsInVuZGVmaW5lZCIsImFkZHJlc3MiLCJkZXNjcmlwdGlvbiIsImNvbm5lY3RUaW1lb3V0TVMiLCJoZWFydGJlYXRGcmVxdWVuY3lNUyIsIm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TIiwic2VydmVyTW9uaXRvcmluZ01vZGUiLCJpc1J1bm5pbmdJbkZhYXNFbnYiLCJnZXRGQUFTRW52IiwibW9uZ29Mb2dnZXIiLCJ0b3BvbG9neSIsImNsaWVudCIsImNhbmNlbGxhdGlvblRva2VuIiwiY29ubmVjdE9wdGlvbnMiLCJpZCIsImdlbmVyYXRpb24iLCJwb29sIiwiaG9zdEFkZHJlc3MiLCJyYXciLCJ1c2VCaWdJbnQ2NCIsInByb21vdGVMb25ncyIsInByb21vdGVWYWx1ZXMiLCJwcm9tb3RlQnVmZmVycyIsImNyZWRlbnRpYWxzIiwiYXV0b0VuY3J5cHRlciIsImNvbm5lY3QiLCJtb25pdG9yU2VydmVyIiwiaW1tZWRpYXRlIiwicmVxdWVzdENoZWNrIiwiaGFzIiwid2FrZSIsInJlc2V0IiwidG9wb2xvZ3lWZXJzaW9uIiwicmVzZXRNb25pdG9yU3RhdGUiLCJjbG9zZSIsImVtaXQiLCJzdG9wIiwicnR0UGluZ2VyIiwiZGVzdHJveSIsInVzZVN0cmVhbWluZ1Byb3RvY29sIiwiY2hlY2tTZXJ2ZXIiLCJjYWxsYmFjayIsInN0YXJ0IiwiYXdhaXRlZCIsImlzQXdhaXRhYmxlIiwiZW1pdEFuZExvZ0hlYXJ0YmVhdCIsIlNlcnZlciIsIlNFUlZFUl9IRUFSVEJFQVRfU1RBUlRFRCIsIlNlcnZlckhlYXJ0YmVhdFN0YXJ0ZWRFdmVudCIsIm9uSGVhcnRiZWF0RmFpbGVkIiwiZXJyIiwiU0VSVkVSX0hFQVJUQkVBVF9GQUlMRUQiLCJTZXJ2ZXJIZWFydGJlYXRGYWlsZWRFdmVudCIsImNhbGN1bGF0ZUR1cmF0aW9uSW5NcyIsImVycm9yIiwiTW9uZ29FcnJvciIsImJ1aWxkRXJyb3JNZXNzYWdlIiwiY2F1c2UiLCJhZGRFcnJvckxhYmVsIiwiTW9uZ29FcnJvckxhYmVsIiwiUmVzZXRQb29sIiwiTW9uZ29OZXR3b3JrVGltZW91dEVycm9yIiwiSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyIsIm9uSGVhcnRiZWF0U3VjY2VlZGVkIiwiaGVsbG8iLCJpc1dyaXRhYmxlUHJpbWFyeSIsIkxFR0FDWV9IRUxMT19DT01NQU5EIiwiZHVyYXRpb24iLCJyb3VuZFRyaXBUaW1lIiwiU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQiLCJjb25uZWN0aW9uSWQiLCJTZXJ2ZXJIZWFydGJlYXRTdWNjZWVkZWRFdmVudCIsIm5vdyIsImNsb3NlZCIsInNlcnZlckFwaSIsImhlbGxvT2siLCJtYXhBd2FpdFRpbWVNUyIsImNtZCIsInZlcnNpb24iLCJtYWtlVG9wb2xvZ3lWZXJzaW9uIiwic29ja2V0VGltZW91dE1TIiwiZXhoYXVzdEFsbG93ZWQiLCJhc3NpZ24iLCJleGhhdXN0Q29tbWFuZCIsIm5zIiwiY29tbWFuZCIsInRoZW4iLCJzb2NrZXQiLCJtYWtlU29ja2V0IiwibWFrZUNvbm5lY3Rpb24iLCJwZXJmb3JtSW5pdGlhbEhhbmRzaGFrZSIsInByb2Nlc3MiLCJuZXh0VGljayIsImRvbmUiLCJ0eXBlIiwiU2VydmVyVHlwZSIsIlVua25vd24iLCJzZXRUaW1lb3V0IiwidHYiLCJwcm9jZXNzSWQiLCJjb3VudGVyIiwiTG9uZyIsImlzTG9uZyIsImZyb21OdW1iZXIiLCJtZWFzdXJlUm91bmRUcmlwVGltZSIsImNsZWFyVGltZW91dCIsIm1lYXN1cmVBbmRSZXNjaGVkdWxlIiwiY29ubiIsImNvbW1hbmROYW1lIiwiZm4iLCJpc0V4cGVkaXRlZENhbGxUb0ZuU2NoZWR1bGVkIiwic3RvcHBlZCIsImlzRXhlY3V0aW9uSW5Qcm9ncmVzcyIsImhhc0V4ZWN1dGVkT25jZSIsIl9leGVjdXRlQW5kUmVzY2hlZHVsZSIsInRpbWVySWQiLCJsYXN0RXhlY3V0aW9uRW5kZWQiLCJfcmVzY2hlZHVsZSIsImN1cnJlbnRUaW1lIiwidGltZVNpbmNlTGFzdENhbGwiLCJ0b1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b0pTT04iLCJsYXN0Q2FsbFRpbWUiLCJpc0V4cGVkaXRlZENoZWNrU2NoZWR1bGVkIiwibXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/monitor.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/server.js":
/*!*************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/server.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Server = void 0;\nconst connection_1 = __webpack_require__(/*! ../cmap/connection */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection.js\");\nconst connection_pool_1 = __webpack_require__(/*! ../cmap/connection_pool */ \"(ssr)/./node_modules/mongodb/lib/cmap/connection_pool.js\");\nconst errors_1 = __webpack_require__(/*! ../cmap/errors */ \"(ssr)/./node_modules/mongodb/lib/cmap/errors.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst transactions_1 = __webpack_require__(/*! ../transactions */ \"(ssr)/./node_modules/mongodb/lib/transactions.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst monitor_1 = __webpack_require__(/*! ./monitor */ \"(ssr)/./node_modules/mongodb/lib/sdam/monitor.js\");\nconst server_description_1 = __webpack_require__(/*! ./server_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\");\nconst stateTransition = (0, utils_1.makeStateMachine)({\n    [common_1.STATE_CLOSED]: [\n        common_1.STATE_CLOSED,\n        common_1.STATE_CONNECTING\n    ],\n    [common_1.STATE_CONNECTING]: [\n        common_1.STATE_CONNECTING,\n        common_1.STATE_CLOSING,\n        common_1.STATE_CONNECTED,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CONNECTED]: [\n        common_1.STATE_CONNECTED,\n        common_1.STATE_CLOSING,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CLOSING]: [\n        common_1.STATE_CLOSING,\n        common_1.STATE_CLOSED\n    ]\n});\n/** @internal */ class Server extends mongo_types_1.TypedEventEmitter {\n    /**\n     * Create a server\n     */ constructor(topology, description, options){\n        super();\n        this.serverApi = options.serverApi;\n        const poolOptions = {\n            hostAddress: description.hostAddress,\n            ...options\n        };\n        this.topology = topology;\n        this.pool = new connection_pool_1.ConnectionPool(this, poolOptions);\n        this.s = {\n            description,\n            options,\n            state: common_1.STATE_CLOSED,\n            operationCount: 0\n        };\n        for (const event of [\n            ...constants_1.CMAP_EVENTS,\n            ...constants_1.APM_EVENTS\n        ]){\n            this.pool.on(event, (e)=>this.emit(event, e));\n        }\n        this.pool.on(connection_1.Connection.CLUSTER_TIME_RECEIVED, (clusterTime)=>{\n            this.clusterTime = clusterTime;\n        });\n        if (this.loadBalanced) {\n            this.monitor = null;\n            // monitoring is disabled in load balancing mode\n            return;\n        }\n        // create the monitor\n        this.monitor = new monitor_1.Monitor(this, this.s.options);\n        for (const event of constants_1.HEARTBEAT_EVENTS){\n            this.monitor.on(event, (e)=>this.emit(event, e));\n        }\n        this.monitor.on(\"resetServer\", (error)=>markServerUnknown(this, error));\n        this.monitor.on(Server.SERVER_HEARTBEAT_SUCCEEDED, (event)=>{\n            this.emit(Server.DESCRIPTION_RECEIVED, new server_description_1.ServerDescription(this.description.hostAddress, event.reply, {\n                roundTripTime: calculateRoundTripTime(this.description.roundTripTime, event.duration)\n            }));\n            if (this.s.state === common_1.STATE_CONNECTING) {\n                stateTransition(this, common_1.STATE_CONNECTED);\n                this.emit(Server.CONNECT, this);\n            }\n        });\n    }\n    get clusterTime() {\n        return this.topology.clusterTime;\n    }\n    set clusterTime(clusterTime) {\n        this.topology.clusterTime = clusterTime;\n    }\n    get description() {\n        return this.s.description;\n    }\n    get name() {\n        return this.s.description.address;\n    }\n    get autoEncrypter() {\n        if (this.s.options && this.s.options.autoEncrypter) {\n            return this.s.options.autoEncrypter;\n        }\n        return;\n    }\n    get loadBalanced() {\n        return this.topology.description.type === common_1.TopologyType.LoadBalanced;\n    }\n    /**\n     * Initiate server connect\n     */ connect() {\n        if (this.s.state !== common_1.STATE_CLOSED) {\n            return;\n        }\n        stateTransition(this, common_1.STATE_CONNECTING);\n        // If in load balancer mode we automatically set the server to\n        // a load balancer. It never transitions out of this state and\n        // has no monitor.\n        if (!this.loadBalanced) {\n            this.monitor?.connect();\n        } else {\n            stateTransition(this, common_1.STATE_CONNECTED);\n            this.emit(Server.CONNECT, this);\n        }\n    }\n    /** Destroy the server connection */ destroy() {\n        if (this.s.state === common_1.STATE_CLOSED) {\n            return;\n        }\n        stateTransition(this, common_1.STATE_CLOSING);\n        if (!this.loadBalanced) {\n            this.monitor?.close();\n        }\n        this.pool.close();\n        stateTransition(this, common_1.STATE_CLOSED);\n        this.emit(\"closed\");\n    }\n    /**\n     * Immediately schedule monitoring of this server. If there already an attempt being made\n     * this will be a no-op.\n     */ requestCheck() {\n        if (!this.loadBalanced) {\n            this.monitor?.requestCheck();\n        }\n    }\n    /**\n     * Execute a command\n     * @internal\n     */ async command(ns, cmd, options) {\n        if (ns.db == null || typeof ns === \"string\") {\n            throw new error_1.MongoInvalidArgumentError(\"Namespace must not be a string\");\n        }\n        if (this.s.state === common_1.STATE_CLOSING || this.s.state === common_1.STATE_CLOSED) {\n            throw new error_1.MongoServerClosedError();\n        }\n        // Clone the options\n        const finalOptions = Object.assign({}, options, {\n            wireProtocolCommand: false,\n            directConnection: this.topology.s.options.directConnection\n        });\n        // There are cases where we need to flag the read preference not to get sent in\n        // the command, such as pre-5.0 servers attempting to perform an aggregate write\n        // with a non-primary read preference. In this case the effective read preference\n        // (primary) is not the same as the provided and must be removed completely.\n        if (finalOptions.omitReadPreference) {\n            delete finalOptions.readPreference;\n        }\n        const session = finalOptions.session;\n        let conn = session?.pinnedConnection;\n        this.incrementOperationCount();\n        if (conn == null) {\n            try {\n                conn = await this.pool.checkOut();\n                if (this.loadBalanced && isPinnableCommand(cmd, session)) {\n                    session?.pin(conn);\n                }\n            } catch (checkoutError) {\n                this.decrementOperationCount();\n                if (!(checkoutError instanceof errors_1.PoolClearedError)) this.handleError(checkoutError);\n                throw checkoutError;\n            }\n        }\n        try {\n            try {\n                return await conn.command(ns, cmd, finalOptions);\n            } catch (commandError) {\n                throw this.decorateCommandError(conn, cmd, finalOptions, commandError);\n            }\n        } catch (operationError) {\n            if (operationError instanceof error_1.MongoError && operationError.code === error_1.MONGODB_ERROR_CODES.Reauthenticate) {\n                await this.pool.reauthenticate(conn);\n                try {\n                    return await conn.command(ns, cmd, finalOptions);\n                } catch (commandError) {\n                    throw this.decorateCommandError(conn, cmd, finalOptions, commandError);\n                }\n            } else {\n                throw operationError;\n            }\n        } finally{\n            this.decrementOperationCount();\n            if (session?.pinnedConnection !== conn) {\n                this.pool.checkIn(conn);\n            }\n        }\n    }\n    /**\n     * Handle SDAM error\n     * @internal\n     */ handleError(error, connection) {\n        if (!(error instanceof error_1.MongoError)) {\n            return;\n        }\n        const isStaleError = error.connectionGeneration && error.connectionGeneration < this.pool.generation;\n        if (isStaleError) {\n            return;\n        }\n        const isNetworkNonTimeoutError = error instanceof error_1.MongoNetworkError && !(error instanceof error_1.MongoNetworkTimeoutError);\n        const isNetworkTimeoutBeforeHandshakeError = (0, error_1.isNetworkErrorBeforeHandshake)(error);\n        const isAuthHandshakeError = error.hasErrorLabel(error_1.MongoErrorLabel.HandshakeError);\n        if (isNetworkNonTimeoutError || isNetworkTimeoutBeforeHandshakeError || isAuthHandshakeError) {\n            // In load balanced mode we never mark the server as unknown and always\n            // clear for the specific service id.\n            if (!this.loadBalanced) {\n                error.addErrorLabel(error_1.MongoErrorLabel.ResetPool);\n                markServerUnknown(this, error);\n            } else if (connection) {\n                this.pool.clear({\n                    serviceId: connection.serviceId\n                });\n            }\n        } else {\n            if ((0, error_1.isSDAMUnrecoverableError)(error)) {\n                if (shouldHandleStateChangeError(this, error)) {\n                    const shouldClearPool = (0, utils_1.maxWireVersion)(this) <= 7 || (0, error_1.isNodeShuttingDownError)(error);\n                    if (this.loadBalanced && connection && shouldClearPool) {\n                        this.pool.clear({\n                            serviceId: connection.serviceId\n                        });\n                    }\n                    if (!this.loadBalanced) {\n                        if (shouldClearPool) {\n                            error.addErrorLabel(error_1.MongoErrorLabel.ResetPool);\n                        }\n                        markServerUnknown(this, error);\n                        process.nextTick(()=>this.requestCheck());\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Ensure that error is properly decorated and internal state is updated before throwing\n     * @internal\n     */ decorateCommandError(connection, cmd, options, error) {\n        if (typeof error !== \"object\" || error == null || !(\"name\" in error)) {\n            throw new error_1.MongoRuntimeError(\"An unexpected error type: \" + typeof error);\n        }\n        if (error.name === \"AbortError\" && \"cause\" in error && error.cause instanceof error_1.MongoError) {\n            error = error.cause;\n        }\n        if (!(error instanceof error_1.MongoError)) {\n            // Node.js or some other error we have not special handling for\n            return error;\n        }\n        if (connectionIsStale(this.pool, connection)) {\n            return error;\n        }\n        const session = options?.session;\n        if (error instanceof error_1.MongoNetworkError) {\n            if (session && !session.hasEnded && session.serverSession) {\n                session.serverSession.isDirty = true;\n            }\n            // inActiveTransaction check handles commit and abort.\n            if (inActiveTransaction(session, cmd) && !error.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n                error.addErrorLabel(error_1.MongoErrorLabel.TransientTransactionError);\n            }\n            if ((isRetryableWritesEnabled(this.topology) || (0, transactions_1.isTransactionCommand)(cmd)) && (0, utils_1.supportsRetryableWrites)(this) && !inActiveTransaction(session, cmd)) {\n                error.addErrorLabel(error_1.MongoErrorLabel.RetryableWriteError);\n            }\n        } else {\n            if ((isRetryableWritesEnabled(this.topology) || (0, transactions_1.isTransactionCommand)(cmd)) && (0, error_1.needsRetryableWriteLabel)(error, (0, utils_1.maxWireVersion)(this)) && !inActiveTransaction(session, cmd)) {\n                error.addErrorLabel(error_1.MongoErrorLabel.RetryableWriteError);\n            }\n        }\n        if (session && session.isPinned && error.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n            session.unpin({\n                force: true\n            });\n        }\n        this.handleError(error, connection);\n        return error;\n    }\n    /**\n     * Decrement the operation count, returning the new count.\n     */ decrementOperationCount() {\n        return this.s.operationCount -= 1;\n    }\n    /**\n     * Increment the operation count, returning the new count.\n     */ incrementOperationCount() {\n        return this.s.operationCount += 1;\n    }\n}\n/** @event */ Server.SERVER_HEARTBEAT_STARTED = constants_1.SERVER_HEARTBEAT_STARTED;\n/** @event */ Server.SERVER_HEARTBEAT_SUCCEEDED = constants_1.SERVER_HEARTBEAT_SUCCEEDED;\n/** @event */ Server.SERVER_HEARTBEAT_FAILED = constants_1.SERVER_HEARTBEAT_FAILED;\n/** @event */ Server.CONNECT = constants_1.CONNECT;\n/** @event */ Server.DESCRIPTION_RECEIVED = constants_1.DESCRIPTION_RECEIVED;\n/** @event */ Server.CLOSED = constants_1.CLOSED;\n/** @event */ Server.ENDED = constants_1.ENDED;\nexports.Server = Server;\nfunction calculateRoundTripTime(oldRtt, duration) {\n    if (oldRtt === -1) {\n        return duration;\n    }\n    const alpha = 0.2;\n    return alpha * duration + (1 - alpha) * oldRtt;\n}\nfunction markServerUnknown(server, error) {\n    // Load balancer servers can never be marked unknown.\n    if (server.loadBalanced) {\n        return;\n    }\n    if (error instanceof error_1.MongoNetworkError && !(error instanceof error_1.MongoNetworkTimeoutError)) {\n        server.monitor?.reset();\n    }\n    server.emit(Server.DESCRIPTION_RECEIVED, new server_description_1.ServerDescription(server.description.hostAddress, undefined, {\n        error\n    }));\n}\nfunction isPinnableCommand(cmd, session) {\n    if (session) {\n        return session.inTransaction() || session.transaction.isCommitted && \"commitTransaction\" in cmd || \"aggregate\" in cmd || \"find\" in cmd || \"getMore\" in cmd || \"listCollections\" in cmd || \"listIndexes\" in cmd;\n    }\n    return false;\n}\nfunction connectionIsStale(pool, connection) {\n    if (connection.serviceId) {\n        return connection.generation !== pool.serviceGenerations.get(connection.serviceId.toHexString());\n    }\n    return connection.generation !== pool.generation;\n}\nfunction shouldHandleStateChangeError(server, err) {\n    const etv = err.topologyVersion;\n    const stv = server.description.topologyVersion;\n    return (0, server_description_1.compareTopologyVersion)(stv, etv) < 0;\n}\nfunction inActiveTransaction(session, cmd) {\n    return session && session.inTransaction() && !(0, transactions_1.isTransactionCommand)(cmd);\n}\n/** this checks the retryWrites option passed down from the client options, it\n * does not check if the server supports retryable writes */ function isRetryableWritesEnabled(topology) {\n    return topology.s.options.retryWrites !== false;\n} //# sourceMappingURL=server.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGNBQWMsR0FBRyxLQUFLO0FBQ3RCLE1BQU1HLGVBQWVDLG1CQUFPQSxDQUFDLCtFQUFvQjtBQUNqRCxNQUFNQyxvQkFBb0JELG1CQUFPQSxDQUFDLHlGQUF5QjtBQUMzRCxNQUFNRSxXQUFXRixtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDekMsTUFBTUcsY0FBY0gsbUJBQU9BLENBQUMsbUVBQWM7QUFDMUMsTUFBTUksVUFBVUosbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUssZ0JBQWdCTCxtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDOUMsTUFBTU0saUJBQWlCTixtQkFBT0EsQ0FBQyx5RUFBaUI7QUFDaEQsTUFBTU8sVUFBVVAsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTVEsV0FBV1IsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVMsWUFBWVQsbUJBQU9BLENBQUMsbUVBQVc7QUFDckMsTUFBTVUsdUJBQXVCVixtQkFBT0EsQ0FBQyx5RkFBc0I7QUFDM0QsTUFBTVcsa0JBQWtCLENBQUMsR0FBR0osUUFBUUssZ0JBQWdCLEVBQUU7SUFDbEQsQ0FBQ0osU0FBU0ssWUFBWSxDQUFDLEVBQUU7UUFBQ0wsU0FBU0ssWUFBWTtRQUFFTCxTQUFTTSxnQkFBZ0I7S0FBQztJQUMzRSxDQUFDTixTQUFTTSxnQkFBZ0IsQ0FBQyxFQUFFO1FBQUNOLFNBQVNNLGdCQUFnQjtRQUFFTixTQUFTTyxhQUFhO1FBQUVQLFNBQVNRLGVBQWU7UUFBRVIsU0FBU0ssWUFBWTtLQUFDO0lBQ2pJLENBQUNMLFNBQVNRLGVBQWUsQ0FBQyxFQUFFO1FBQUNSLFNBQVNRLGVBQWU7UUFBRVIsU0FBU08sYUFBYTtRQUFFUCxTQUFTSyxZQUFZO0tBQUM7SUFDckcsQ0FBQ0wsU0FBU08sYUFB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QkFBa0JmLEdBQUcsRUFBRVUsT0FBTztJQUNuQyxJQUFJQSxTQUFTO1FBQ1QsT0FBUUEsUUFBUXFFLGFBQWEsTUFDeEJyRSxRQUFRc0UsV0FBVyxDQUFDQyxXQUFXLElBQUksdUJBQXVCakYsT0FDM0QsZUFBZUEsT0FDZixVQUFVQSxPQUNWLGFBQWFBLE9BQ2IscUJBQXFCQSxPQUNyQixpQkFBaUJBO0lBQ3pCO0lBQ0EsT0FBTztBQUNYO0FBQ0EsU0FBU3dELGtCQUFrQmhHLElBQUksRUFBRXNFLFVBQVU7SUFDdkMsSUFBSUEsV0FBV2dCLFNBQVMsRUFBRTtRQUN0QixPQUFRaEIsV0FBV0csVUFBVSxLQUFLekUsS0FBSzBILGtCQUFrQixDQUFDQyxHQUFHLENBQUNyRCxXQUFXZ0IsU0FBUyxDQUFDc0MsV0FBVztJQUNsRztJQUNBLE9BQU90RCxXQUFXRyxVQUFVLEtBQUt6RSxLQUFLeUUsVUFBVTtBQUNwRDtBQUNBLFNBQVNlLDZCQUE2QjRCLE1BQU0sRUFBRVMsR0FBRztJQUM3QyxNQUFNQyxNQUFNRCxJQUFJRSxlQUFlO0lBQy9CLE1BQU1DLE1BQU1aLE9BQU96SCxXQUFXLENBQUNvSSxlQUFlO0lBQzlDLE9BQU8sQ0FBQyxHQUFHOUkscUJBQXFCZ0osc0JBQXNCLEVBQUVELEtBQUtGLE9BQU87QUFDeEU7QUFDQSxTQUFTMUIsb0JBQW9CbEQsT0FBTyxFQUFFVixHQUFHO0lBQ3JDLE9BQU9VLFdBQVdBLFFBQVFxRSxhQUFhLE1BQU0sQ0FBQyxDQUFDLEdBQUcxSSxlQUFlMEgsb0JBQW9CLEVBQUUvRDtBQUMzRjtBQUNBOzBEQUMwRCxHQUMxRCxTQUFTOEQseUJBQXlCNUcsUUFBUTtJQUN0QyxPQUFPQSxTQUFTUSxDQUFDLENBQUNOLE9BQU8sQ0FBQ3NJLFdBQVcsS0FBSztBQUM5QyxFQUNBLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXIuanM/MjUwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU2VydmVyID0gdm9pZCAwO1xuY29uc3QgY29ubmVjdGlvbl8xID0gcmVxdWlyZShcIi4uL2NtYXAvY29ubmVjdGlvblwiKTtcbmNvbnN0IGNvbm5lY3Rpb25fcG9vbF8xID0gcmVxdWlyZShcIi4uL2NtYXAvY29ubmVjdGlvbl9wb29sXCIpO1xuY29uc3QgZXJyb3JzXzEgPSByZXF1aXJlKFwiLi4vY21hcC9lcnJvcnNcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgbW9uZ29fdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9tb25nb190eXBlc1wiKTtcbmNvbnN0IHRyYW5zYWN0aW9uc18xID0gcmVxdWlyZShcIi4uL3RyYW5zYWN0aW9uc1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKTtcbmNvbnN0IG1vbml0b3JfMSA9IHJlcXVpcmUoXCIuL21vbml0b3JcIik7XG5jb25zdCBzZXJ2ZXJfZGVzY3JpcHRpb25fMSA9IHJlcXVpcmUoXCIuL3NlcnZlcl9kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHN0YXRlVHJhbnNpdGlvbiA9ICgwLCB1dGlsc18xLm1ha2VTdGF0ZU1hY2hpbmUpKHtcbiAgICBbY29tbW9uXzEuU1RBVEVfQ0xPU0VEXTogW2NvbW1vbl8xLlNUQVRFX0NMT1NFRCwgY29tbW9uXzEuU1RBVEVfQ09OTkVDVElOR10sXG4gICAgW2NvbW1vbl8xLlNUQVRFX0NPTk5FQ1RJTkddOiBbY29tbW9uXzEuU1RBVEVfQ09OTkVDVElORywgY29tbW9uXzEuU1RBVEVfQ0xPU0lORywgY29tbW9uXzEuU1RBVEVfQ09OTkVDVEVELCBjb21tb25fMS5TVEFURV9DTE9TRURdLFxuICAgIFtjb21tb25fMS5TVEFURV9DT05ORUNURURdOiBbY29tbW9uXzEuU1RBVEVfQ09OTkVDVEVELCBjb21tb25fMS5TVEFURV9DTE9TSU5HLCBjb21tb25fMS5TVEFURV9DTE9TRURdLFxuICAgIFtjb21tb25fMS5TVEFURV9DTE9TSU5HXTogW2NvbW1vbl8xLlNUQVRFX0NMT1NJTkcsIGNvbW1vbl8xLlNUQVRFX0NMT1NFRF1cbn0pO1xuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgU2VydmVyIGV4dGVuZHMgbW9uZ29fdHlwZXNfMS5UeXBlZEV2ZW50RW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2VydmVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodG9wb2xvZ3ksIGRlc2NyaXB0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2VydmVyQXBpID0gb3B0aW9ucy5zZXJ2ZXJBcGk7XG4gICAgICAgIGNvbnN0IHBvb2xPcHRpb25zID0geyBob3N0QWRkcmVzczogZGVzY3JpcHRpb24uaG9zdEFkZHJlc3MsIC4uLm9wdGlvbnMgfTtcbiAgICAgICAgdGhpcy50b3BvbG9neSA9IHRvcG9sb2d5O1xuICAgICAgICB0aGlzLnBvb2wgPSBuZXcgY29ubmVjdGlvbl9wb29sXzEuQ29ubmVjdGlvblBvb2wodGhpcywgcG9vbE9wdGlvbnMpO1xuICAgICAgICB0aGlzLnMgPSB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBzdGF0ZTogY29tbW9uXzEuU1RBVEVfQ0xPU0VELFxuICAgICAgICAgICAgb3BlcmF0aW9uQ291bnQ6IDBcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBldmVudCBvZiBbLi4uY29uc3RhbnRzXzEuQ01BUF9FVkVOVFMsIC4uLmNvbnN0YW50c18xLkFQTV9FVkVOVFNdKSB7XG4gICAgICAgICAgICB0aGlzLnBvb2wub24oZXZlbnQsIChlKSA9PiB0aGlzLmVtaXQoZXZlbnQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvb2wub24oY29ubmVjdGlvbl8xLkNvbm5lY3Rpb24uQ0xVU1RFUl9USU1FX1JFQ0VJVkVELCAoY2x1c3RlclRpbWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2x1c3RlclRpbWUgPSBjbHVzdGVyVGltZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgdGhpcy5tb25pdG9yID0gbnVsbDtcbiAgICAgICAgICAgIC8vIG1vbml0b3JpbmcgaXMgZGlzYWJsZWQgaW4gbG9hZCBiYWxhbmNpbmcgbW9kZVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgbW9uaXRvclxuICAgICAgICB0aGlzLm1vbml0b3IgPSBuZXcgbW9uaXRvcl8xLk1vbml0b3IodGhpcywgdGhpcy5zLm9wdGlvbnMpO1xuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGNvbnN0YW50c18xLkhFQVJUQkVBVF9FVkVOVFMpIHtcbiAgICAgICAgICAgIHRoaXMubW9uaXRvci5vbihldmVudCwgKGUpID0+IHRoaXMuZW1pdChldmVudCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubW9uaXRvci5vbigncmVzZXRTZXJ2ZXInLCAoZXJyb3IpID0+IG1hcmtTZXJ2ZXJVbmtub3duKHRoaXMsIGVycm9yKSk7XG4gICAgICAgIHRoaXMubW9uaXRvci5vbihTZXJ2ZXIuU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KFNlcnZlci5ERVNDUklQVElPTl9SRUNFSVZFRCwgbmV3IHNlcnZlcl9kZXNjcmlwdGlvbl8xLlNlcnZlckRlc2NyaXB0aW9uKHRoaXMuZGVzY3JpcHRpb24uaG9zdEFkZHJlc3MsIGV2ZW50LnJlcGx5LCB7XG4gICAgICAgICAgICAgICAgcm91bmRUcmlwVGltZTogY2FsY3VsYXRlUm91bmRUcmlwVGltZSh0aGlzLmRlc2NyaXB0aW9uLnJvdW5kVHJpcFRpbWUsIGV2ZW50LmR1cmF0aW9uKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKHRoaXMucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ09OTkVDVElORykge1xuICAgICAgICAgICAgICAgIHN0YXRlVHJhbnNpdGlvbih0aGlzLCBjb21tb25fMS5TVEFURV9DT05ORUNURUQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChTZXJ2ZXIuQ09OTkVDVCwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgY2x1c3RlclRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvcG9sb2d5LmNsdXN0ZXJUaW1lO1xuICAgIH1cbiAgICBzZXQgY2x1c3RlclRpbWUoY2x1c3RlclRpbWUpIHtcbiAgICAgICAgdGhpcy50b3BvbG9neS5jbHVzdGVyVGltZSA9IGNsdXN0ZXJUaW1lO1xuICAgIH1cbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLmRlc2NyaXB0aW9uLmFkZHJlc3M7XG4gICAgfVxuICAgIGdldCBhdXRvRW5jcnlwdGVyKCkge1xuICAgICAgICBpZiAodGhpcy5zLm9wdGlvbnMgJiYgdGhpcy5zLm9wdGlvbnMuYXV0b0VuY3J5cHRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucy5vcHRpb25zLmF1dG9FbmNyeXB0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnZXQgbG9hZEJhbGFuY2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b3BvbG9neS5kZXNjcmlwdGlvbi50eXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuTG9hZEJhbGFuY2VkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWF0ZSBzZXJ2ZXIgY29ubmVjdFxuICAgICAqL1xuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLnMuc3RhdGUgIT09IGNvbW1vbl8xLlNUQVRFX0NMT1NFRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlVHJhbnNpdGlvbih0aGlzLCBjb21tb25fMS5TVEFURV9DT05ORUNUSU5HKTtcbiAgICAgICAgLy8gSWYgaW4gbG9hZCBiYWxhbmNlciBtb2RlIHdlIGF1dG9tYXRpY2FsbHkgc2V0IHRoZSBzZXJ2ZXIgdG9cbiAgICAgICAgLy8gYSBsb2FkIGJhbGFuY2VyLiBJdCBuZXZlciB0cmFuc2l0aW9ucyBvdXQgb2YgdGhpcyBzdGF0ZSBhbmRcbiAgICAgICAgLy8gaGFzIG5vIG1vbml0b3IuXG4gICAgICAgIGlmICghdGhpcy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgIHRoaXMubW9uaXRvcj8uY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoU2VydmVyLkNPTk5FQ1QsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBEZXN0cm95IHRoZSBzZXJ2ZXIgY29ubmVjdGlvbiAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLnMuc3RhdGUgPT09IGNvbW1vbl8xLlNUQVRFX0NMT1NFRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlVHJhbnNpdGlvbih0aGlzLCBjb21tb25fMS5TVEFURV9DTE9TSU5HKTtcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgdGhpcy5tb25pdG9yPy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9vbC5jbG9zZSgpO1xuICAgICAgICBzdGF0ZVRyYW5zaXRpb24odGhpcywgY29tbW9uXzEuU1RBVEVfQ0xPU0VEKTtcbiAgICAgICAgdGhpcy5lbWl0KCdjbG9zZWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1tZWRpYXRlbHkgc2NoZWR1bGUgbW9uaXRvcmluZyBvZiB0aGlzIHNlcnZlci4gSWYgdGhlcmUgYWxyZWFkeSBhbiBhdHRlbXB0IGJlaW5nIG1hZGVcbiAgICAgKiB0aGlzIHdpbGwgYmUgYSBuby1vcC5cbiAgICAgKi9cbiAgICByZXF1ZXN0Q2hlY2soKSB7XG4gICAgICAgIGlmICghdGhpcy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgIHRoaXMubW9uaXRvcj8ucmVxdWVzdENoZWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBhIGNvbW1hbmRcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyBjb21tYW5kKG5zLCBjbWQsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG5zLmRiID09IG51bGwgfHwgdHlwZW9mIG5zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcignTmFtZXNwYWNlIG11c3Qgbm90IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ0xPU0lORyB8fCB0aGlzLnMuc3RhdGUgPT09IGNvbW1vbl8xLlNUQVRFX0NMT1NFRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29TZXJ2ZXJDbG9zZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsb25lIHRoZSBvcHRpb25zXG4gICAgICAgIGNvbnN0IGZpbmFsT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMsIHtcbiAgICAgICAgICAgIHdpcmVQcm90b2NvbENvbW1hbmQ6IGZhbHNlLFxuICAgICAgICAgICAgZGlyZWN0Q29ubmVjdGlvbjogdGhpcy50b3BvbG9neS5zLm9wdGlvbnMuZGlyZWN0Q29ubmVjdGlvblxuICAgICAgICB9KTtcbiAgICAgICAgLy8gVGhlcmUgYXJlIGNhc2VzIHdoZXJlIHdlIG5lZWQgdG8gZmxhZyB0aGUgcmVhZCBwcmVmZXJlbmNlIG5vdCB0byBnZXQgc2VudCBpblxuICAgICAgICAvLyB0aGUgY29tbWFuZCwgc3VjaCBhcyBwcmUtNS4wIHNlcnZlcnMgYXR0ZW1wdGluZyB0byBwZXJmb3JtIGFuIGFnZ3JlZ2F0ZSB3cml0ZVxuICAgICAgICAvLyB3aXRoIGEgbm9uLXByaW1hcnkgcmVhZCBwcmVmZXJlbmNlLiBJbiB0aGlzIGNhc2UgdGhlIGVmZmVjdGl2ZSByZWFkIHByZWZlcmVuY2VcbiAgICAgICAgLy8gKHByaW1hcnkpIGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgcHJvdmlkZWQgYW5kIG11c3QgYmUgcmVtb3ZlZCBjb21wbGV0ZWx5LlxuICAgICAgICBpZiAoZmluYWxPcHRpb25zLm9taXRSZWFkUHJlZmVyZW5jZSkge1xuICAgICAgICAgICAgZGVsZXRlIGZpbmFsT3B0aW9ucy5yZWFkUHJlZmVyZW5jZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXNzaW9uID0gZmluYWxPcHRpb25zLnNlc3Npb247XG4gICAgICAgIGxldCBjb25uID0gc2Vzc2lvbj8ucGlubmVkQ29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRPcGVyYXRpb25Db3VudCgpO1xuICAgICAgICBpZiAoY29ubiA9PSBudWxsKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbm4gPSBhd2FpdCB0aGlzLnBvb2wuY2hlY2tPdXQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkQmFsYW5jZWQgJiYgaXNQaW5uYWJsZUNvbW1hbmQoY21kLCBzZXNzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uPy5waW4oY29ubik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGNoZWNrb3V0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlY3JlbWVudE9wZXJhdGlvbkNvdW50KCk7XG4gICAgICAgICAgICAgICAgaWYgKCEoY2hlY2tvdXRFcnJvciBpbnN0YW5jZW9mIGVycm9yc18xLlBvb2xDbGVhcmVkRXJyb3IpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGNoZWNrb3V0RXJyb3IpO1xuICAgICAgICAgICAgICAgIHRocm93IGNoZWNrb3V0RXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGNvbm4uY29tbWFuZChucywgY21kLCBmaW5hbE9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGNvbW1hbmRFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuZGVjb3JhdGVDb21tYW5kRXJyb3IoY29ubiwgY21kLCBmaW5hbE9wdGlvbnMsIGNvbW1hbmRFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKG9wZXJhdGlvbkVycm9yKSB7XG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uRXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IgJiZcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25FcnJvci5jb2RlID09PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuUmVhdXRoZW50aWNhdGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBvb2wucmVhdXRoZW50aWNhdGUoY29ubik7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGNvbm4uY29tbWFuZChucywgY21kLCBmaW5hbE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoY29tbWFuZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHRoaXMuZGVjb3JhdGVDb21tYW5kRXJyb3IoY29ubiwgY21kLCBmaW5hbE9wdGlvbnMsIGNvbW1hbmRFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgb3BlcmF0aW9uRXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmRlY3JlbWVudE9wZXJhdGlvbkNvdW50KCk7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbj8ucGlubmVkQ29ubmVjdGlvbiAhPT0gY29ubikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9vbC5jaGVja0luKGNvbm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBTREFNIGVycm9yXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgaGFuZGxlRXJyb3IoZXJyb3IsIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNTdGFsZUVycm9yID0gZXJyb3IuY29ubmVjdGlvbkdlbmVyYXRpb24gJiYgZXJyb3IuY29ubmVjdGlvbkdlbmVyYXRpb24gPCB0aGlzLnBvb2wuZ2VuZXJhdGlvbjtcbiAgICAgICAgaWYgKGlzU3RhbGVFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzTmV0d29ya05vblRpbWVvdXRFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb05ldHdvcmtFcnJvciAmJiAhKGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb05ldHdvcmtUaW1lb3V0RXJyb3IpO1xuICAgICAgICBjb25zdCBpc05ldHdvcmtUaW1lb3V0QmVmb3JlSGFuZHNoYWtlRXJyb3IgPSAoMCwgZXJyb3JfMS5pc05ldHdvcmtFcnJvckJlZm9yZUhhbmRzaGFrZSkoZXJyb3IpO1xuICAgICAgICBjb25zdCBpc0F1dGhIYW5kc2hha2VFcnJvciA9IGVycm9yLmhhc0Vycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuSGFuZHNoYWtlRXJyb3IpO1xuICAgICAgICBpZiAoaXNOZXR3b3JrTm9uVGltZW91dEVycm9yIHx8IGlzTmV0d29ya1RpbWVvdXRCZWZvcmVIYW5kc2hha2VFcnJvciB8fCBpc0F1dGhIYW5kc2hha2VFcnJvcikge1xuICAgICAgICAgICAgLy8gSW4gbG9hZCBiYWxhbmNlZCBtb2RlIHdlIG5ldmVyIG1hcmsgdGhlIHNlcnZlciBhcyB1bmtub3duIGFuZCBhbHdheXNcbiAgICAgICAgICAgIC8vIGNsZWFyIGZvciB0aGUgc3BlY2lmaWMgc2VydmljZSBpZC5cbiAgICAgICAgICAgIGlmICghdGhpcy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgICAgICBlcnJvci5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJlc2V0UG9vbCk7XG4gICAgICAgICAgICAgICAgbWFya1NlcnZlclVua25vd24odGhpcywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9vbC5jbGVhcih7IHNlcnZpY2VJZDogY29ubmVjdGlvbi5zZXJ2aWNlSWQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoKDAsIGVycm9yXzEuaXNTREFNVW5yZWNvdmVyYWJsZUVycm9yKShlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkSGFuZGxlU3RhdGVDaGFuZ2VFcnJvcih0aGlzLCBlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkQ2xlYXJQb29sID0gKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHRoaXMpIDw9IDcgfHwgKDAsIGVycm9yXzEuaXNOb2RlU2h1dHRpbmdEb3duRXJyb3IpKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZEJhbGFuY2VkICYmIGNvbm5lY3Rpb24gJiYgc2hvdWxkQ2xlYXJQb29sKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvb2wuY2xlYXIoeyBzZXJ2aWNlSWQ6IGNvbm5lY3Rpb24uc2VydmljZUlkIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRDbGVhclBvb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJlc2V0UG9vbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrU2VydmVyVW5rbm93bih0aGlzLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHRoaXMucmVxdWVzdENoZWNrKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZSB0aGF0IGVycm9yIGlzIHByb3Blcmx5IGRlY29yYXRlZCBhbmQgaW50ZXJuYWwgc3RhdGUgaXMgdXBkYXRlZCBiZWZvcmUgdGhyb3dpbmdcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBkZWNvcmF0ZUNvbW1hbmRFcnJvcihjb25uZWN0aW9uLCBjbWQsIG9wdGlvbnMsIGVycm9yKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZXJyb3IgIT09ICdvYmplY3QnIHx8IGVycm9yID09IG51bGwgfHwgISgnbmFtZScgaW4gZXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignQW4gdW5leHBlY3RlZCBlcnJvciB0eXBlOiAnICsgdHlwZW9mIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InICYmICdjYXVzZScgaW4gZXJyb3IgJiYgZXJyb3IuY2F1c2UgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yID0gZXJyb3IuY2F1c2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IpKSB7XG4gICAgICAgICAgICAvLyBOb2RlLmpzIG9yIHNvbWUgb3RoZXIgZXJyb3Igd2UgaGF2ZSBub3Qgc3BlY2lhbCBoYW5kbGluZyBmb3JcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29ubmVjdGlvbklzU3RhbGUodGhpcy5wb29sLCBjb25uZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBvcHRpb25zPy5zZXNzaW9uO1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvTmV0d29ya0Vycm9yKSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbiAmJiAhc2Vzc2lvbi5oYXNFbmRlZCAmJiBzZXNzaW9uLnNlcnZlclNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLnNlcnZlclNlc3Npb24uaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpbkFjdGl2ZVRyYW5zYWN0aW9uIGNoZWNrIGhhbmRsZXMgY29tbWl0IGFuZCBhYm9ydC5cbiAgICAgICAgICAgIGlmIChpbkFjdGl2ZVRyYW5zYWN0aW9uKHNlc3Npb24sIGNtZCkgJiZcbiAgICAgICAgICAgICAgICAhZXJyb3IuaGFzRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5UcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yKSkge1xuICAgICAgICAgICAgICAgIGVycm9yLmFkZEVycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuVHJhbnNpZW50VHJhbnNhY3Rpb25FcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGlzUmV0cnlhYmxlV3JpdGVzRW5hYmxlZCh0aGlzLnRvcG9sb2d5KSB8fCAoMCwgdHJhbnNhY3Rpb25zXzEuaXNUcmFuc2FjdGlvbkNvbW1hbmQpKGNtZCkpICYmXG4gICAgICAgICAgICAgICAgKDAsIHV0aWxzXzEuc3VwcG9ydHNSZXRyeWFibGVXcml0ZXMpKHRoaXMpICYmXG4gICAgICAgICAgICAgICAgIWluQWN0aXZlVHJhbnNhY3Rpb24oc2Vzc2lvbiwgY21kKSkge1xuICAgICAgICAgICAgICAgIGVycm9yLmFkZEVycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuUmV0cnlhYmxlV3JpdGVFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoKGlzUmV0cnlhYmxlV3JpdGVzRW5hYmxlZCh0aGlzLnRvcG9sb2d5KSB8fCAoMCwgdHJhbnNhY3Rpb25zXzEuaXNUcmFuc2FjdGlvbkNvbW1hbmQpKGNtZCkpICYmXG4gICAgICAgICAgICAgICAgKDAsIGVycm9yXzEubmVlZHNSZXRyeWFibGVXcml0ZUxhYmVsKShlcnJvciwgKDAsIHV0aWxzXzEubWF4V2lyZVZlcnNpb24pKHRoaXMpKSAmJlxuICAgICAgICAgICAgICAgICFpbkFjdGl2ZVRyYW5zYWN0aW9uKHNlc3Npb24sIGNtZCkpIHtcbiAgICAgICAgICAgICAgICBlcnJvci5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlJldHJ5YWJsZVdyaXRlRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZXNzaW9uICYmXG4gICAgICAgICAgICBzZXNzaW9uLmlzUGlubmVkICYmXG4gICAgICAgICAgICBlcnJvci5oYXNFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlRyYW5zaWVudFRyYW5zYWN0aW9uRXJyb3IpKSB7XG4gICAgICAgICAgICBzZXNzaW9uLnVucGluKHsgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgY29ubmVjdGlvbik7XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjcmVtZW50IHRoZSBvcGVyYXRpb24gY291bnQsIHJldHVybmluZyB0aGUgbmV3IGNvdW50LlxuICAgICAqL1xuICAgIGRlY3JlbWVudE9wZXJhdGlvbkNvdW50KCkge1xuICAgICAgICByZXR1cm4gKHRoaXMucy5vcGVyYXRpb25Db3VudCAtPSAxKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSBvcGVyYXRpb24gY291bnQsIHJldHVybmluZyB0aGUgbmV3IGNvdW50LlxuICAgICAqL1xuICAgIGluY3JlbWVudE9wZXJhdGlvbkNvdW50KCkge1xuICAgICAgICByZXR1cm4gKHRoaXMucy5vcGVyYXRpb25Db3VudCArPSAxKTtcbiAgICB9XG59XG4vKiogQGV2ZW50ICovXG5TZXJ2ZXIuU0VSVkVSX0hFQVJUQkVBVF9TVEFSVEVEID0gY29uc3RhbnRzXzEuU0VSVkVSX0hFQVJUQkVBVF9TVEFSVEVEO1xuLyoqIEBldmVudCAqL1xuU2VydmVyLlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVEID0gY29uc3RhbnRzXzEuU0VSVkVSX0hFQVJUQkVBVF9TVUNDRUVERUQ7XG4vKiogQGV2ZW50ICovXG5TZXJ2ZXIuU0VSVkVSX0hFQVJUQkVBVF9GQUlMRUQgPSBjb25zdGFudHNfMS5TRVJWRVJfSEVBUlRCRUFUX0ZBSUxFRDtcbi8qKiBAZXZlbnQgKi9cblNlcnZlci5DT05ORUNUID0gY29uc3RhbnRzXzEuQ09OTkVDVDtcbi8qKiBAZXZlbnQgKi9cblNlcnZlci5ERVNDUklQVElPTl9SRUNFSVZFRCA9IGNvbnN0YW50c18xLkRFU0NSSVBUSU9OX1JFQ0VJVkVEO1xuLyoqIEBldmVudCAqL1xuU2VydmVyLkNMT1NFRCA9IGNvbnN0YW50c18xLkNMT1NFRDtcbi8qKiBAZXZlbnQgKi9cblNlcnZlci5FTkRFRCA9IGNvbnN0YW50c18xLkVOREVEO1xuZXhwb3J0cy5TZXJ2ZXIgPSBTZXJ2ZXI7XG5mdW5jdGlvbiBjYWxjdWxhdGVSb3VuZFRyaXBUaW1lKG9sZFJ0dCwgZHVyYXRpb24pIHtcbiAgICBpZiAob2xkUnR0ID09PSAtMSkge1xuICAgICAgICByZXR1cm4gZHVyYXRpb247XG4gICAgfVxuICAgIGNvbnN0IGFscGhhID0gMC4yO1xuICAgIHJldHVybiBhbHBoYSAqIGR1cmF0aW9uICsgKDEgLSBhbHBoYSkgKiBvbGRSdHQ7XG59XG5mdW5jdGlvbiBtYXJrU2VydmVyVW5rbm93bihzZXJ2ZXIsIGVycm9yKSB7XG4gICAgLy8gTG9hZCBiYWxhbmNlciBzZXJ2ZXJzIGNhbiBuZXZlciBiZSBtYXJrZWQgdW5rbm93bi5cbiAgICBpZiAoc2VydmVyLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29OZXR3b3JrRXJyb3IgJiYgIShlcnJvciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29OZXR3b3JrVGltZW91dEVycm9yKSkge1xuICAgICAgICBzZXJ2ZXIubW9uaXRvcj8ucmVzZXQoKTtcbiAgICB9XG4gICAgc2VydmVyLmVtaXQoU2VydmVyLkRFU0NSSVBUSU9OX1JFQ0VJVkVELCBuZXcgc2VydmVyX2Rlc2NyaXB0aW9uXzEuU2VydmVyRGVzY3JpcHRpb24oc2VydmVyLmRlc2NyaXB0aW9uLmhvc3RBZGRyZXNzLCB1bmRlZmluZWQsIHsgZXJyb3IgfSkpO1xufVxuZnVuY3Rpb24gaXNQaW5uYWJsZUNvbW1hbmQoY21kLCBzZXNzaW9uKSB7XG4gICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuIChzZXNzaW9uLmluVHJhbnNhY3Rpb24oKSB8fFxuICAgICAgICAgICAgKHNlc3Npb24udHJhbnNhY3Rpb24uaXNDb21taXR0ZWQgJiYgJ2NvbW1pdFRyYW5zYWN0aW9uJyBpbiBjbWQpIHx8XG4gICAgICAgICAgICAnYWdncmVnYXRlJyBpbiBjbWQgfHxcbiAgICAgICAgICAgICdmaW5kJyBpbiBjbWQgfHxcbiAgICAgICAgICAgICdnZXRNb3JlJyBpbiBjbWQgfHxcbiAgICAgICAgICAgICdsaXN0Q29sbGVjdGlvbnMnIGluIGNtZCB8fFxuICAgICAgICAgICAgJ2xpc3RJbmRleGVzJyBpbiBjbWQpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBjb25uZWN0aW9uSXNTdGFsZShwb29sLCBjb25uZWN0aW9uKSB7XG4gICAgaWYgKGNvbm5lY3Rpb24uc2VydmljZUlkKSB7XG4gICAgICAgIHJldHVybiAoY29ubmVjdGlvbi5nZW5lcmF0aW9uICE9PSBwb29sLnNlcnZpY2VHZW5lcmF0aW9ucy5nZXQoY29ubmVjdGlvbi5zZXJ2aWNlSWQudG9IZXhTdHJpbmcoKSkpO1xuICAgIH1cbiAgICByZXR1cm4gY29ubmVjdGlvbi5nZW5lcmF0aW9uICE9PSBwb29sLmdlbmVyYXRpb247XG59XG5mdW5jdGlvbiBzaG91bGRIYW5kbGVTdGF0ZUNoYW5nZUVycm9yKHNlcnZlciwgZXJyKSB7XG4gICAgY29uc3QgZXR2ID0gZXJyLnRvcG9sb2d5VmVyc2lvbjtcbiAgICBjb25zdCBzdHYgPSBzZXJ2ZXIuZGVzY3JpcHRpb24udG9wb2xvZ3lWZXJzaW9uO1xuICAgIHJldHVybiAoMCwgc2VydmVyX2Rlc2NyaXB0aW9uXzEuY29tcGFyZVRvcG9sb2d5VmVyc2lvbikoc3R2LCBldHYpIDwgMDtcbn1cbmZ1bmN0aW9uIGluQWN0aXZlVHJhbnNhY3Rpb24oc2Vzc2lvbiwgY21kKSB7XG4gICAgcmV0dXJuIHNlc3Npb24gJiYgc2Vzc2lvbi5pblRyYW5zYWN0aW9uKCkgJiYgISgwLCB0cmFuc2FjdGlvbnNfMS5pc1RyYW5zYWN0aW9uQ29tbWFuZCkoY21kKTtcbn1cbi8qKiB0aGlzIGNoZWNrcyB0aGUgcmV0cnlXcml0ZXMgb3B0aW9uIHBhc3NlZCBkb3duIGZyb20gdGhlIGNsaWVudCBvcHRpb25zLCBpdFxuICogZG9lcyBub3QgY2hlY2sgaWYgdGhlIHNlcnZlciBzdXBwb3J0cyByZXRyeWFibGUgd3JpdGVzICovXG5mdW5jdGlvbiBpc1JldHJ5YWJsZVdyaXRlc0VuYWJsZWQodG9wb2xvZ3kpIHtcbiAgICByZXR1cm4gdG9wb2xvZ3kucy5vcHRpb25zLnJldHJ5V3JpdGVzICE9PSBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcnZlci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTZXJ2ZXIiLCJjb25uZWN0aW9uXzEiLCJyZXF1aXJlIiwiY29ubmVjdGlvbl9wb29sXzEiLCJlcnJvcnNfMSIsImNvbnN0YW50c18xIiwiZXJyb3JfMSIsIm1vbmdvX3R5cGVzXzEiLCJ0cmFuc2FjdGlvbnNfMSIsInV0aWxzXzEiLCJjb21tb25fMSIsIm1vbml0b3JfMSIsInNlcnZlcl9kZXNjcmlwdGlvbl8xIiwic3RhdGVUcmFuc2l0aW9uIiwibWFrZVN0YXRlTWFjaGluZSIsIlNUQVRFX0NMT1NFRCIsIlNUQVRFX0NPTk5FQ1RJTkciLCJTVEFURV9DTE9TSU5HIiwiU1RBVEVfQ09OTkVDVEVEIiwiVHlwZWRFdmVudEVtaXR0ZXIiLCJjb25zdHJ1Y3RvciIsInRvcG9sb2d5IiwiZGVzY3JpcHRpb24iLCJvcHRpb25zIiwic2VydmVyQXBpIiwicG9vbE9wdGlvbnMiLCJob3N0QWRkcmVzcyIsInBvb2wiLCJDb25uZWN0aW9uUG9vbCIsInMiLCJzdGF0ZSIsIm9wZXJhdGlvbkNvdW50IiwiZXZlbnQiLCJDTUFQX0VWRU5UUyIsIkFQTV9FVkVOVFMiLCJvbiIsImUiLCJlbWl0IiwiQ29ubmVjdGlvbiIsIkNMVVNURVJfVElNRV9SRUNFSVZFRCIsImNsdXN0ZXJUaW1lIiwibG9hZEJhbGFuY2VkIiwibW9uaXRvciIsIk1vbml0b3IiLCJIRUFSVEJFQVRfRVZFTlRTIiwiZXJyb3IiLCJtYXJrU2VydmVyVW5rbm93biIsIlNFUlZFUl9IRUFSVEJFQVRfU1VDQ0VFREVEIiwiREVTQ1JJUFRJT05fUkVDRUlWRUQiLCJTZXJ2ZXJEZXNjcmlwdGlvbiIsInJlcGx5Iiwicm91bmRUcmlwVGltZSIsImNhbGN1bGF0ZVJvdW5kVHJpcFRpbWUiLCJkdXJhdGlvbiIsIkNPTk5FQ1QiLCJuYW1lIiwiYWRkcmVzcyIsImF1dG9FbmNyeXB0ZXIiLCJ0eXBlIiwiVG9wb2xvZ3lUeXBlIiwiTG9hZEJhbGFuY2VkIiwiY29ubmVjdCIsImRlc3Ryb3kiLCJjbG9zZSIsInJlcXVlc3RDaGVjayIsImNvbW1hbmQiLCJucyIsImNtZCIsImRiIiwiTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvciIsIk1vbmdvU2VydmVyQ2xvc2VkRXJyb3IiLCJmaW5hbE9wdGlvbnMiLCJhc3NpZ24iLCJ3aXJlUHJvdG9jb2xDb21tYW5kIiwiZGlyZWN0Q29ubmVjdGlvbiIsIm9taXRSZWFkUHJlZmVyZW5jZSIsInJlYWRQcmVmZXJlbmNlIiwic2Vzc2lvbiIsImNvbm4iLCJwaW5uZWRDb25uZWN0aW9uIiwiaW5jcmVtZW50T3BlcmF0aW9uQ291bnQiLCJjaGVja091dCIsImlzUGlubmFibGVDb21tYW5kIiwicGluIiwiY2hlY2tvdXRFcnJvciIsImRlY3JlbWVudE9wZXJhdGlvbkNvdW50IiwiUG9vbENsZWFyZWRFcnJvciIsImhhbmRsZUVycm9yIiwiY29tbWFuZEVycm9yIiwiZGVjb3JhdGVDb21tYW5kRXJyb3IiLCJvcGVyYXRpb25FcnJvciIsIk1vbmdvRXJyb3IiLCJjb2RlIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIlJlYXV0aGVudGljYXRlIiwicmVhdXRoZW50aWNhdGUiLCJjaGVja0luIiwiY29ubmVjdGlvbiIsImlzU3RhbGVFcnJvciIsImNvbm5lY3Rpb25HZW5lcmF0aW9uIiwiZ2VuZXJhdGlvbiIsImlzTmV0d29ya05vblRpbWVvdXRFcnJvciIsIk1vbmdvTmV0d29ya0Vycm9yIiwiTW9uZ29OZXR3b3JrVGltZW91dEVycm9yIiwiaXNOZXR3b3JrVGltZW91dEJlZm9yZUhhbmRzaGFrZUVycm9yIiwiaXNOZXR3b3JrRXJyb3JCZWZvcmVIYW5kc2hha2UiLCJpc0F1dGhIYW5kc2hha2VFcnJvciIsImhhc0Vycm9yTGFiZWwiLCJNb25nb0Vycm9yTGFiZWwiLCJIYW5kc2hha2VFcnJvciIsImFkZEVycm9yTGFiZWwiLCJSZXNldFBvb2wiLCJjbGVhciIsInNlcnZpY2VJZCIsImlzU0RBTVVucmVjb3ZlcmFibGVFcnJvciIsInNob3VsZEhhbmRsZVN0YXRlQ2hhbmdlRXJyb3IiLCJzaG91bGRDbGVhclBvb2wiLCJtYXhXaXJlVmVyc2lvbiIsImlzTm9kZVNodXR0aW5nRG93bkVycm9yIiwicHJvY2VzcyIsIm5leHRUaWNrIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJjYXVzZSIsImNvbm5lY3Rpb25Jc1N0YWxlIiwiaGFzRW5kZWQiLCJzZXJ2ZXJTZXNzaW9uIiwiaXNEaXJ0eSIsImluQWN0aXZlVHJhbnNhY3Rpb24iLCJUcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yIiwiaXNSZXRyeWFibGVXcml0ZXNFbmFibGVkIiwiaXNUcmFuc2FjdGlvbkNvbW1hbmQiLCJzdXBwb3J0c1JldHJ5YWJsZVdyaXRlcyIsIlJldHJ5YWJsZVdyaXRlRXJyb3IiLCJuZWVkc1JldHJ5YWJsZVdyaXRlTGFiZWwiLCJpc1Bpbm5lZCIsInVucGluIiwiZm9yY2UiLCJTRVJWRVJfSEVBUlRCRUFUX1NUQVJURUQiLCJTRVJWRVJfSEVBUlRCRUFUX0ZBSUxFRCIsIkNMT1NFRCIsIkVOREVEIiwib2xkUnR0IiwiYWxwaGEiLCJzZXJ2ZXIiLCJyZXNldCIsInVuZGVmaW5lZCIsImluVHJhbnNhY3Rpb24iLCJ0cmFuc2FjdGlvbiIsImlzQ29tbWl0dGVkIiwic2VydmljZUdlbmVyYXRpb25zIiwiZ2V0IiwidG9IZXhTdHJpbmciLCJlcnIiLCJldHYiLCJ0b3BvbG9neVZlcnNpb24iLCJzdHYiLCJjb21wYXJlVG9wb2xvZ3lWZXJzaW9uIiwicmV0cnlXcml0ZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/server.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/server_description.js":
/*!*************************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/server_description.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.compareTopologyVersion = exports.parseServerType = exports.ServerDescription = void 0;\nconst bson_1 = __webpack_require__(/*! ../bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst WRITABLE_SERVER_TYPES = new Set([\n    common_1.ServerType.RSPrimary,\n    common_1.ServerType.Standalone,\n    common_1.ServerType.Mongos,\n    common_1.ServerType.LoadBalancer\n]);\nconst DATA_BEARING_SERVER_TYPES = new Set([\n    common_1.ServerType.RSPrimary,\n    common_1.ServerType.RSSecondary,\n    common_1.ServerType.Mongos,\n    common_1.ServerType.Standalone,\n    common_1.ServerType.LoadBalancer\n]);\n/**\n * The client's view of a single server, based on the most recent hello outcome.\n *\n * Internal type, not meant to be directly instantiated\n * @public\n */ class ServerDescription {\n    /**\n     * Create a ServerDescription\n     * @internal\n     *\n     * @param address - The address of the server\n     * @param hello - An optional hello response for this server\n     */ constructor(address, hello, options = {}){\n        if (address == null || address === \"\") {\n            throw new error_1.MongoRuntimeError(\"ServerDescription must be provided with a non-empty address\");\n        }\n        this.address = typeof address === \"string\" ? utils_1.HostAddress.fromString(address).toString() // Use HostAddress to normalize\n         : address.toString();\n        this.type = parseServerType(hello, options);\n        this.hosts = hello?.hosts?.map((host)=>host.toLowerCase()) ?? [];\n        this.passives = hello?.passives?.map((host)=>host.toLowerCase()) ?? [];\n        this.arbiters = hello?.arbiters?.map((host)=>host.toLowerCase()) ?? [];\n        this.tags = hello?.tags ?? {};\n        this.minWireVersion = hello?.minWireVersion ?? 0;\n        this.maxWireVersion = hello?.maxWireVersion ?? 0;\n        this.roundTripTime = options?.roundTripTime ?? -1;\n        this.lastUpdateTime = (0, utils_1.now)();\n        this.lastWriteDate = hello?.lastWrite?.lastWriteDate ?? 0;\n        this.error = options.error ?? null;\n        // TODO(NODE-2674): Preserve int64 sent from MongoDB\n        this.topologyVersion = this.error?.topologyVersion ?? hello?.topologyVersion ?? null;\n        this.setName = hello?.setName ?? null;\n        this.setVersion = hello?.setVersion ?? null;\n        this.electionId = hello?.electionId ?? null;\n        this.logicalSessionTimeoutMinutes = hello?.logicalSessionTimeoutMinutes ?? null;\n        this.primary = hello?.primary ?? null;\n        this.me = hello?.me?.toLowerCase() ?? null;\n        this.$clusterTime = hello?.$clusterTime ?? null;\n    }\n    get hostAddress() {\n        return utils_1.HostAddress.fromString(this.address);\n    }\n    get allHosts() {\n        return this.hosts.concat(this.arbiters).concat(this.passives);\n    }\n    /** Is this server available for reads*/ get isReadable() {\n        return this.type === common_1.ServerType.RSSecondary || this.isWritable;\n    }\n    /** Is this server data bearing */ get isDataBearing() {\n        return DATA_BEARING_SERVER_TYPES.has(this.type);\n    }\n    /** Is this server available for writes */ get isWritable() {\n        return WRITABLE_SERVER_TYPES.has(this.type);\n    }\n    get host() {\n        const chopLength = `:${this.port}`.length;\n        return this.address.slice(0, -chopLength);\n    }\n    get port() {\n        const port = this.address.split(\":\").pop();\n        return port ? Number.parseInt(port, 10) : 27017;\n    }\n    /**\n     * Determines if another `ServerDescription` is equal to this one per the rules defined\n     * in the {@link https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#serverdescription|SDAM spec}\n     */ equals(other) {\n        // Despite using the comparator that would determine a nullish topologyVersion as greater than\n        // for equality we should only always perform direct equality comparison\n        const topologyVersionsEqual = this.topologyVersion === other?.topologyVersion || compareTopologyVersion(this.topologyVersion, other?.topologyVersion) === 0;\n        const electionIdsEqual = this.electionId != null && other?.electionId != null ? (0, utils_1.compareObjectId)(this.electionId, other.electionId) === 0 : this.electionId === other?.electionId;\n        return other != null && (0, utils_1.errorStrictEqual)(this.error, other.error) && this.type === other.type && this.minWireVersion === other.minWireVersion && (0, utils_1.arrayStrictEqual)(this.hosts, other.hosts) && tagsStrictEqual(this.tags, other.tags) && this.setName === other.setName && this.setVersion === other.setVersion && electionIdsEqual && this.primary === other.primary && this.logicalSessionTimeoutMinutes === other.logicalSessionTimeoutMinutes && topologyVersionsEqual;\n    }\n}\nexports.ServerDescription = ServerDescription;\n// Parses a `hello` message and determines the server type\nfunction parseServerType(hello, options) {\n    if (options?.loadBalanced) {\n        return common_1.ServerType.LoadBalancer;\n    }\n    if (!hello || !hello.ok) {\n        return common_1.ServerType.Unknown;\n    }\n    if (hello.isreplicaset) {\n        return common_1.ServerType.RSGhost;\n    }\n    if (hello.msg && hello.msg === \"isdbgrid\") {\n        return common_1.ServerType.Mongos;\n    }\n    if (hello.setName) {\n        if (hello.hidden) {\n            return common_1.ServerType.RSOther;\n        } else if (hello.isWritablePrimary) {\n            return common_1.ServerType.RSPrimary;\n        } else if (hello.secondary) {\n            return common_1.ServerType.RSSecondary;\n        } else if (hello.arbiterOnly) {\n            return common_1.ServerType.RSArbiter;\n        } else {\n            return common_1.ServerType.RSOther;\n        }\n    }\n    return common_1.ServerType.Standalone;\n}\nexports.parseServerType = parseServerType;\nfunction tagsStrictEqual(tags, tags2) {\n    const tagsKeys = Object.keys(tags);\n    const tags2Keys = Object.keys(tags2);\n    return tagsKeys.length === tags2Keys.length && tagsKeys.every((key)=>tags2[key] === tags[key]);\n}\n/**\n * Compares two topology versions.\n *\n * 1. If the response topologyVersion is unset or the ServerDescription's\n *    topologyVersion is null, the client MUST assume the response is more recent.\n * 1. If the response's topologyVersion.processId is not equal to the\n *    ServerDescription's, the client MUST assume the response is more recent.\n * 1. If the response's topologyVersion.processId is equal to the\n *    ServerDescription's, the client MUST use the counter field to determine\n *    which topologyVersion is more recent.\n *\n * ```ts\n * currentTv <   newTv === -1\n * currentTv === newTv === 0\n * currentTv >   newTv === 1\n * ```\n */ function compareTopologyVersion(currentTv, newTv) {\n    if (currentTv == null || newTv == null) {\n        return -1;\n    }\n    if (!currentTv.processId.equals(newTv.processId)) {\n        return -1;\n    }\n    // TODO(NODE-2674): Preserve int64 sent from MongoDB\n    const currentCounter = bson_1.Long.isLong(currentTv.counter) ? currentTv.counter : bson_1.Long.fromNumber(currentTv.counter);\n    const newCounter = bson_1.Long.isLong(newTv.counter) ? newTv.counter : bson_1.Long.fromNumber(newTv.counter);\n    return currentCounter.compare(newCounter);\n}\nexports.compareTopologyVersion = compareTopologyVersion; //# sourceMappingURL=server_description.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXJfZGVzY3JpcHRpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDhCQUE4QixHQUFHQSx1QkFBdUIsR0FBR0EseUJBQXlCLEdBQUcsS0FBSztBQUM1RixNQUFNSyxTQUFTQyxtQkFBT0EsQ0FBQyx5REFBUztBQUNoQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyxpRUFBVTtBQUNuQyxNQUFNSSx3QkFBd0IsSUFBSUMsSUFBSTtJQUNsQ0YsU0FBU0csVUFBVSxDQUFDQyxTQUFTO0lBQzdCSixTQUFTRyxVQUFVLENBQUNFLFVBQVU7SUFDOUJMLFNBQVNHLFVBQVUsQ0FBQ0csTUFBTTtJQUMxQk4sU0FBU0csVUFBVSxDQUFDSSxZQUFZO0NBQ25DO0FBQ0QsTUFBTUMsNEJBQTRCLElBQUlOLElBQUk7SUFDdENGLFNBQVNHLFVBQVUsQ0FBQ0MsU0FBUztJQUM3QkosU0FBU0csVUFBVSxDQUFDTSxXQUFXO0lBQy9CVCxTQUFTRyxVQUFVLENBQUNHLE1BQU07SUFDMUJOLFNBQVNHLFVBQVUsQ0FBQ0UsVUFBVTtJQUM5QkwsU0FBU0csVUFBVSxDQUFDSSxZQUFZO0NBQ25DO0FBQ0Q7Ozs7O0NBS0MsR0FDRCxNQUFNWjtJQUNGOzs7Ozs7S0FNQyxHQUNEZSxZQUFZQyxPQUFPLEVBQUVDLEtBQUssRUFBRUMsVUFBVSxDQUFDLENBQUMsQ0FBRTtRQUN0QyxJQUFJRixXQUFXLFFBQVFBLFlBQVksSUFBSTtZQUNuQyxNQUFNLElBQUliLFFBQVFnQixpQkFBaUIsQ0FBQztRQUN4QztRQUNBLElBQUksQ0FBQ0gsT0FBTyxHQUNSLE9BQU9BLFlBQVksV0FDYlosUUFBUWdCLFdBQVcsQ0FBQ0MsVUFBVSxD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Q0FBQyxDQUFDQyxNQUFRTCxLQUFLLENBQUNLLElBQUksS0FBS3pELElBQUksQ0FBQ3lELElBQUk7QUFDeEQ7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztDQWdCQyxHQUNELFNBQVN6Rix1QkFBdUIwRixTQUFTLEVBQUVDLEtBQUs7SUFDNUMsSUFBSUQsYUFBYSxRQUFRQyxTQUFTLE1BQU07UUFDcEMsT0FBTyxDQUFDO0lBQ1o7SUFDQSxJQUFJLENBQUNELFVBQVVFLFNBQVMsQ0FBQzVCLE1BQU0sQ0FBQzJCLE1BQU1DLFNBQVMsR0FBRztRQUM5QyxPQUFPLENBQUM7SUFDWjtJQUNBLG9EQUFvRDtJQUNwRCxNQUFNQyxpQkFBaUIxRixPQUFPMkYsSUFBSSxDQUFDQyxNQUFNLENBQUNMLFVBQVVNLE9BQU8sSUFDckROLFVBQVVNLE9BQU8sR0FDakI3RixPQUFPMkYsSUFBSSxDQUFDRyxVQUFVLENBQUNQLFVBQVVNLE9BQU87SUFDOUMsTUFBTUUsYUFBYS9GLE9BQU8yRixJQUFJLENBQUNDLE1BQU0sQ0FBQ0osTUFBTUssT0FBTyxJQUFJTCxNQUFNSyxPQUFPLEdBQUc3RixPQUFPMkYsSUFBSSxDQUFDRyxVQUFVLENBQUNOLE1BQU1LLE9BQU87SUFDM0csT0FBT0gsZUFBZU0sT0FBTyxDQUFDRDtBQUNsQztBQUNBcEcsOEJBQThCLEdBQUdFLHdCQUNqQyw4Q0FBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3NkYW0vc2VydmVyX2Rlc2NyaXB0aW9uLmpzPzRmNzAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNvbXBhcmVUb3BvbG9neVZlcnNpb24gPSBleHBvcnRzLnBhcnNlU2VydmVyVHlwZSA9IGV4cG9ydHMuU2VydmVyRGVzY3JpcHRpb24gPSB2b2lkIDA7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi4vYnNvblwiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi9jb21tb25cIik7XG5jb25zdCBXUklUQUJMRV9TRVJWRVJfVFlQRVMgPSBuZXcgU2V0KFtcbiAgICBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTUHJpbWFyeSxcbiAgICBjb21tb25fMS5TZXJ2ZXJUeXBlLlN0YW5kYWxvbmUsXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5Nb25nb3MsXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5Mb2FkQmFsYW5jZXJcbl0pO1xuY29uc3QgREFUQV9CRUFSSU5HX1NFUlZFUl9UWVBFUyA9IG5ldyBTZXQoW1xuICAgIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNQcmltYXJ5LFxuICAgIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNTZWNvbmRhcnksXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5Nb25nb3MsXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5TdGFuZGFsb25lLFxuICAgIGNvbW1vbl8xLlNlcnZlclR5cGUuTG9hZEJhbGFuY2VyXG5dKTtcbi8qKlxuICogVGhlIGNsaWVudCdzIHZpZXcgb2YgYSBzaW5nbGUgc2VydmVyLCBiYXNlZCBvbiB0aGUgbW9zdCByZWNlbnQgaGVsbG8gb3V0Y29tZS5cbiAqXG4gKiBJbnRlcm5hbCB0eXBlLCBub3QgbWVhbnQgdG8gYmUgZGlyZWN0bHkgaW5zdGFudGlhdGVkXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIFNlcnZlckRlc2NyaXB0aW9uIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBTZXJ2ZXJEZXNjcmlwdGlvblxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogQHBhcmFtIGFkZHJlc3MgLSBUaGUgYWRkcmVzcyBvZiB0aGUgc2VydmVyXG4gICAgICogQHBhcmFtIGhlbGxvIC0gQW4gb3B0aW9uYWwgaGVsbG8gcmVzcG9uc2UgZm9yIHRoaXMgc2VydmVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWRkcmVzcywgaGVsbG8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAoYWRkcmVzcyA9PSBudWxsIHx8IGFkZHJlc3MgPT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignU2VydmVyRGVzY3JpcHRpb24gbXVzdCBiZSBwcm92aWRlZCB3aXRoIGEgbm9uLWVtcHR5IGFkZHJlc3MnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZHJlc3MgPVxuICAgICAgICAgICAgdHlwZW9mIGFkZHJlc3MgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcoYWRkcmVzcykudG9TdHJpbmcoKSAvLyBVc2UgSG9zdEFkZHJlc3MgdG8gbm9ybWFsaXplXG4gICAgICAgICAgICAgICAgOiBhZGRyZXNzLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMudHlwZSA9IHBhcnNlU2VydmVyVHlwZShoZWxsbywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuaG9zdHMgPSBoZWxsbz8uaG9zdHM/Lm1hcCgoaG9zdCkgPT4gaG9zdC50b0xvd2VyQ2FzZSgpKSA/PyBbXTtcbiAgICAgICAgdGhpcy5wYXNzaXZlcyA9IGhlbGxvPy5wYXNzaXZlcz8ubWFwKChob3N0KSA9PiBob3N0LnRvTG93ZXJDYXNlKCkpID8/IFtdO1xuICAgICAgICB0aGlzLmFyYml0ZXJzID0gaGVsbG8/LmFyYml0ZXJzPy5tYXAoKGhvc3QpID0+IGhvc3QudG9Mb3dlckNhc2UoKSkgPz8gW107XG4gICAgICAgIHRoaXMudGFncyA9IGhlbGxvPy50YWdzID8/IHt9O1xuICAgICAgICB0aGlzLm1pbldpcmVWZXJzaW9uID0gaGVsbG8/Lm1pbldpcmVWZXJzaW9uID8/IDA7XG4gICAgICAgIHRoaXMubWF4V2lyZVZlcnNpb24gPSBoZWxsbz8ubWF4V2lyZVZlcnNpb24gPz8gMDtcbiAgICAgICAgdGhpcy5yb3VuZFRyaXBUaW1lID0gb3B0aW9ucz8ucm91bmRUcmlwVGltZSA/PyAtMTtcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlVGltZSA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICAgICAgdGhpcy5sYXN0V3JpdGVEYXRlID0gaGVsbG8/Lmxhc3RXcml0ZT8ubGFzdFdyaXRlRGF0ZSA/PyAwO1xuICAgICAgICB0aGlzLmVycm9yID0gb3B0aW9ucy5lcnJvciA/PyBudWxsO1xuICAgICAgICAvLyBUT0RPKE5PREUtMjY3NCk6IFByZXNlcnZlIGludDY0IHNlbnQgZnJvbSBNb25nb0RCXG4gICAgICAgIHRoaXMudG9wb2xvZ3lWZXJzaW9uID0gdGhpcy5lcnJvcj8udG9wb2xvZ3lWZXJzaW9uID8/IGhlbGxvPy50b3BvbG9neVZlcnNpb24gPz8gbnVsbDtcbiAgICAgICAgdGhpcy5zZXROYW1lID0gaGVsbG8/LnNldE5hbWUgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5zZXRWZXJzaW9uID0gaGVsbG8/LnNldFZlcnNpb24gPz8gbnVsbDtcbiAgICAgICAgdGhpcy5lbGVjdGlvbklkID0gaGVsbG8/LmVsZWN0aW9uSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzID0gaGVsbG8/LmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5wcmltYXJ5ID0gaGVsbG8/LnByaW1hcnkgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tZSA9IGhlbGxvPy5tZT8udG9Mb3dlckNhc2UoKSA/PyBudWxsO1xuICAgICAgICB0aGlzLiRjbHVzdGVyVGltZSA9IGhlbGxvPy4kY2x1c3RlclRpbWUgPz8gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGhvc3RBZGRyZXNzKCkge1xuICAgICAgICByZXR1cm4gdXRpbHNfMS5Ib3N0QWRkcmVzcy5mcm9tU3RyaW5nKHRoaXMuYWRkcmVzcyk7XG4gICAgfVxuICAgIGdldCBhbGxIb3N0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdHMuY29uY2F0KHRoaXMuYXJiaXRlcnMpLmNvbmNhdCh0aGlzLnBhc3NpdmVzKTtcbiAgICB9XG4gICAgLyoqIElzIHRoaXMgc2VydmVyIGF2YWlsYWJsZSBmb3IgcmVhZHMqL1xuICAgIGdldCBpc1JlYWRhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTU2Vjb25kYXJ5IHx8IHRoaXMuaXNXcml0YWJsZTtcbiAgICB9XG4gICAgLyoqIElzIHRoaXMgc2VydmVyIGRhdGEgYmVhcmluZyAqL1xuICAgIGdldCBpc0RhdGFCZWFyaW5nKCkge1xuICAgICAgICByZXR1cm4gREFUQV9CRUFSSU5HX1NFUlZFUl9UWVBFUy5oYXModGhpcy50eXBlKTtcbiAgICB9XG4gICAgLyoqIElzIHRoaXMgc2VydmVyIGF2YWlsYWJsZSBmb3Igd3JpdGVzICovXG4gICAgZ2V0IGlzV3JpdGFibGUoKSB7XG4gICAgICAgIHJldHVybiBXUklUQUJMRV9TRVJWRVJfVFlQRVMuaGFzKHRoaXMudHlwZSk7XG4gICAgfVxuICAgIGdldCBob3N0KCkge1xuICAgICAgICBjb25zdCBjaG9wTGVuZ3RoID0gYDoke3RoaXMucG9ydH1gLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkcmVzcy5zbGljZSgwLCAtY2hvcExlbmd0aCk7XG4gICAgfVxuICAgIGdldCBwb3J0KCkge1xuICAgICAgICBjb25zdCBwb3J0ID0gdGhpcy5hZGRyZXNzLnNwbGl0KCc6JykucG9wKCk7XG4gICAgICAgIHJldHVybiBwb3J0ID8gTnVtYmVyLnBhcnNlSW50KHBvcnQsIDEwKSA6IDI3MDE3O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGFub3RoZXIgYFNlcnZlckRlc2NyaXB0aW9uYCBpcyBlcXVhbCB0byB0aGlzIG9uZSBwZXIgdGhlIHJ1bGVzIGRlZmluZWRcbiAgICAgKiBpbiB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tb25nb2RiL3NwZWNpZmljYXRpb25zL2Jsb2IvbWFzdGVyL3NvdXJjZS9zZXJ2ZXItZGlzY292ZXJ5LWFuZC1tb25pdG9yaW5nL3NlcnZlci1kaXNjb3ZlcnktYW5kLW1vbml0b3JpbmcucnN0I3NlcnZlcmRlc2NyaXB0aW9ufFNEQU0gc3BlY31cbiAgICAgKi9cbiAgICBlcXVhbHMob3RoZXIpIHtcbiAgICAgICAgLy8gRGVzcGl0ZSB1c2luZyB0aGUgY29tcGFyYXRvciB0aGF0IHdvdWxkIGRldGVybWluZSBhIG51bGxpc2ggdG9wb2xvZ3lWZXJzaW9uIGFzIGdyZWF0ZXIgdGhhblxuICAgICAgICAvLyBmb3IgZXF1YWxpdHkgd2Ugc2hvdWxkIG9ubHkgYWx3YXlzIHBlcmZvcm0gZGlyZWN0IGVxdWFsaXR5IGNvbXBhcmlzb25cbiAgICAgICAgY29uc3QgdG9wb2xvZ3lWZXJzaW9uc0VxdWFsID0gdGhpcy50b3BvbG9neVZlcnNpb24gPT09IG90aGVyPy50b3BvbG9neVZlcnNpb24gfHxcbiAgICAgICAgICAgIGNvbXBhcmVUb3BvbG9neVZlcnNpb24odGhpcy50b3BvbG9neVZlcnNpb24sIG90aGVyPy50b3BvbG9neVZlcnNpb24pID09PSAwO1xuICAgICAgICBjb25zdCBlbGVjdGlvbklkc0VxdWFsID0gdGhpcy5lbGVjdGlvbklkICE9IG51bGwgJiYgb3RoZXI/LmVsZWN0aW9uSWQgIT0gbnVsbFxuICAgICAgICAgICAgPyAoMCwgdXRpbHNfMS5jb21wYXJlT2JqZWN0SWQpKHRoaXMuZWxlY3Rpb25JZCwgb3RoZXIuZWxlY3Rpb25JZCkgPT09IDBcbiAgICAgICAgICAgIDogdGhpcy5lbGVjdGlvbklkID09PSBvdGhlcj8uZWxlY3Rpb25JZDtcbiAgICAgICAgcmV0dXJuIChvdGhlciAhPSBudWxsICYmXG4gICAgICAgICAgICAoMCwgdXRpbHNfMS5lcnJvclN0cmljdEVxdWFsKSh0aGlzLmVycm9yLCBvdGhlci5lcnJvcikgJiZcbiAgICAgICAgICAgIHRoaXMudHlwZSA9PT0gb3RoZXIudHlwZSAmJlxuICAgICAgICAgICAgdGhpcy5taW5XaXJlVmVyc2lvbiA9PT0gb3RoZXIubWluV2lyZVZlcnNpb24gJiZcbiAgICAgICAgICAgICgwLCB1dGlsc18xLmFycmF5U3RyaWN0RXF1YWwpKHRoaXMuaG9zdHMsIG90aGVyLmhvc3RzKSAmJlxuICAgICAgICAgICAgdGFnc1N0cmljdEVxdWFsKHRoaXMudGFncywgb3RoZXIudGFncykgJiZcbiAgICAgICAgICAgIHRoaXMuc2V0TmFtZSA9PT0gb3RoZXIuc2V0TmFtZSAmJlxuICAgICAgICAgICAgdGhpcy5zZXRWZXJzaW9uID09PSBvdGhlci5zZXRWZXJzaW9uICYmXG4gICAgICAgICAgICBlbGVjdGlvbklkc0VxdWFsICYmXG4gICAgICAgICAgICB0aGlzLnByaW1hcnkgPT09IG90aGVyLnByaW1hcnkgJiZcbiAgICAgICAgICAgIHRoaXMubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyA9PT0gb3RoZXIubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyAmJlxuICAgICAgICAgICAgdG9wb2xvZ3lWZXJzaW9uc0VxdWFsKTtcbiAgICB9XG59XG5leHBvcnRzLlNlcnZlckRlc2NyaXB0aW9uID0gU2VydmVyRGVzY3JpcHRpb247XG4vLyBQYXJzZXMgYSBgaGVsbG9gIG1lc3NhZ2UgYW5kIGRldGVybWluZXMgdGhlIHNlcnZlciB0eXBlXG5mdW5jdGlvbiBwYXJzZVNlcnZlclR5cGUoaGVsbG8sIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucz8ubG9hZEJhbGFuY2VkKSB7XG4gICAgICAgIHJldHVybiBjb21tb25fMS5TZXJ2ZXJUeXBlLkxvYWRCYWxhbmNlcjtcbiAgICB9XG4gICAgaWYgKCFoZWxsbyB8fCAhaGVsbG8ub2spIHtcbiAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlNlcnZlclR5cGUuVW5rbm93bjtcbiAgICB9XG4gICAgaWYgKGhlbGxvLmlzcmVwbGljYXNldCkge1xuICAgICAgICByZXR1cm4gY29tbW9uXzEuU2VydmVyVHlwZS5SU0dob3N0O1xuICAgIH1cbiAgICBpZiAoaGVsbG8ubXNnICYmIGhlbGxvLm1zZyA9PT0gJ2lzZGJncmlkJykge1xuICAgICAgICByZXR1cm4gY29tbW9uXzEuU2VydmVyVHlwZS5Nb25nb3M7XG4gICAgfVxuICAgIGlmIChoZWxsby5zZXROYW1lKSB7XG4gICAgICAgIGlmIChoZWxsby5oaWRkZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTT3RoZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaGVsbG8uaXNXcml0YWJsZVByaW1hcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTUHJpbWFyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoZWxsby5zZWNvbmRhcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTU2Vjb25kYXJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhlbGxvLmFyYml0ZXJPbmx5KSB7XG4gICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuU2VydmVyVHlwZS5SU0FyYml0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuU2VydmVyVHlwZS5SU090aGVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb21tb25fMS5TZXJ2ZXJUeXBlLlN0YW5kYWxvbmU7XG59XG5leHBvcnRzLnBhcnNlU2VydmVyVHlwZSA9IHBhcnNlU2VydmVyVHlwZTtcbmZ1bmN0aW9uIHRhZ3NTdHJpY3RFcXVhbCh0YWdzLCB0YWdzMikge1xuICAgIGNvbnN0IHRhZ3NLZXlzID0gT2JqZWN0LmtleXModGFncyk7XG4gICAgY29uc3QgdGFnczJLZXlzID0gT2JqZWN0LmtleXModGFnczIpO1xuICAgIHJldHVybiAodGFnc0tleXMubGVuZ3RoID09PSB0YWdzMktleXMubGVuZ3RoICYmXG4gICAgICAgIHRhZ3NLZXlzLmV2ZXJ5KChrZXkpID0+IHRhZ3MyW2tleV0gPT09IHRhZ3Nba2V5XSkpO1xufVxuLyoqXG4gKiBDb21wYXJlcyB0d28gdG9wb2xvZ3kgdmVyc2lvbnMuXG4gKlxuICogMS4gSWYgdGhlIHJlc3BvbnNlIHRvcG9sb2d5VmVyc2lvbiBpcyB1bnNldCBvciB0aGUgU2VydmVyRGVzY3JpcHRpb24nc1xuICogICAgdG9wb2xvZ3lWZXJzaW9uIGlzIG51bGwsIHRoZSBjbGllbnQgTVVTVCBhc3N1bWUgdGhlIHJlc3BvbnNlIGlzIG1vcmUgcmVjZW50LlxuICogMS4gSWYgdGhlIHJlc3BvbnNlJ3MgdG9wb2xvZ3lWZXJzaW9uLnByb2Nlc3NJZCBpcyBub3QgZXF1YWwgdG8gdGhlXG4gKiAgICBTZXJ2ZXJEZXNjcmlwdGlvbidzLCB0aGUgY2xpZW50IE1VU1QgYXNzdW1lIHRoZSByZXNwb25zZSBpcyBtb3JlIHJlY2VudC5cbiAqIDEuIElmIHRoZSByZXNwb25zZSdzIHRvcG9sb2d5VmVyc2lvbi5wcm9jZXNzSWQgaXMgZXF1YWwgdG8gdGhlXG4gKiAgICBTZXJ2ZXJEZXNjcmlwdGlvbidzLCB0aGUgY2xpZW50IE1VU1QgdXNlIHRoZSBjb3VudGVyIGZpZWxkIHRvIGRldGVybWluZVxuICogICAgd2hpY2ggdG9wb2xvZ3lWZXJzaW9uIGlzIG1vcmUgcmVjZW50LlxuICpcbiAqIGBgYHRzXG4gKiBjdXJyZW50VHYgPCAgIG5ld1R2ID09PSAtMVxuICogY3VycmVudFR2ID09PSBuZXdUdiA9PT0gMFxuICogY3VycmVudFR2ID4gICBuZXdUdiA9PT0gMVxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVUb3BvbG9neVZlcnNpb24oY3VycmVudFR2LCBuZXdUdikge1xuICAgIGlmIChjdXJyZW50VHYgPT0gbnVsbCB8fCBuZXdUdiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaWYgKCFjdXJyZW50VHYucHJvY2Vzc0lkLmVxdWFscyhuZXdUdi5wcm9jZXNzSWQpKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgLy8gVE9ETyhOT0RFLTI2NzQpOiBQcmVzZXJ2ZSBpbnQ2NCBzZW50IGZyb20gTW9uZ29EQlxuICAgIGNvbnN0IGN1cnJlbnRDb3VudGVyID0gYnNvbl8xLkxvbmcuaXNMb25nKGN1cnJlbnRUdi5jb3VudGVyKVxuICAgICAgICA/IGN1cnJlbnRUdi5jb3VudGVyXG4gICAgICAgIDogYnNvbl8xLkxvbmcuZnJvbU51bWJlcihjdXJyZW50VHYuY291bnRlcik7XG4gICAgY29uc3QgbmV3Q291bnRlciA9IGJzb25fMS5Mb25nLmlzTG9uZyhuZXdUdi5jb3VudGVyKSA/IG5ld1R2LmNvdW50ZXIgOiBic29uXzEuTG9uZy5mcm9tTnVtYmVyKG5ld1R2LmNvdW50ZXIpO1xuICAgIHJldHVybiBjdXJyZW50Q291bnRlci5jb21wYXJlKG5ld0NvdW50ZXIpO1xufVxuZXhwb3J0cy5jb21wYXJlVG9wb2xvZ3lWZXJzaW9uID0gY29tcGFyZVRvcG9sb2d5VmVyc2lvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcnZlcl9kZXNjcmlwdGlvbi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJjb21wYXJlVG9wb2xvZ3lWZXJzaW9uIiwicGFyc2VTZXJ2ZXJUeXBlIiwiU2VydmVyRGVzY3JpcHRpb24iLCJic29uXzEiLCJyZXF1aXJlIiwiZXJyb3JfMSIsInV0aWxzXzEiLCJjb21tb25fMSIsIldSSVRBQkxFX1NFUlZFUl9UWVBFUyIsIlNldCIsIlNlcnZlclR5cGUiLCJSU1ByaW1hcnkiLCJTdGFuZGFsb25lIiwiTW9uZ29zIiwiTG9hZEJhbGFuY2VyIiwiREFUQV9CRUFSSU5HX1NFUlZFUl9UWVBFUyIsIlJTU2Vjb25kYXJ5IiwiY29uc3RydWN0b3IiLCJhZGRyZXNzIiwiaGVsbG8iLCJvcHRpb25zIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJIb3N0QWRkcmVzcyIsImZyb21TdHJpbmciLCJ0b1N0cmluZyIsInR5cGUiLCJob3N0cyIsIm1hcCIsImhvc3QiLCJ0b0xvd2VyQ2FzZSIsInBhc3NpdmVzIiwiYXJiaXRlcnMiLCJ0YWdzIiwibWluV2lyZVZlcnNpb24iLCJtYXhXaXJlVmVyc2lvbiIsInJvdW5kVHJpcFRpbWUiLCJsYXN0VXBkYXRlVGltZSIsIm5vdyIsImxhc3RXcml0ZURhdGUiLCJsYXN0V3JpdGUiLCJlcnJvciIsInRvcG9sb2d5VmVyc2lvbiIsInNldE5hbWUiLCJzZXRWZXJzaW9uIiwiZWxlY3Rpb25JZCIsImxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMiLCJwcmltYXJ5IiwibWUiLCIkY2x1c3RlclRpbWUiLCJob3N0QWRkcmVzcyIsImFsbEhvc3RzIiwiY29uY2F0IiwiaXNSZWFkYWJsZSIsImlzV3JpdGFibGUiLCJpc0RhdGFCZWFyaW5nIiwiaGFzIiwiY2hvcExlbmd0aCIsInBvcnQiLCJsZW5ndGgiLCJzbGljZSIsInNwbGl0IiwicG9wIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJlcXVhbHMiLCJvdGhlciIsInRvcG9sb2d5VmVyc2lvbnNFcXVhbCIsImVsZWN0aW9uSWRzRXF1YWwiLCJjb21wYXJlT2JqZWN0SWQiLCJlcnJvclN0cmljdEVxdWFsIiwiYXJyYXlTdHJpY3RFcXVhbCIsInRhZ3NTdHJpY3RFcXVhbCIsImxvYWRCYWxhbmNlZCIsIm9rIiwiVW5rbm93biIsImlzcmVwbGljYXNldCIsIlJTR2hvc3QiLCJtc2ciLCJoaWRkZW4iLCJSU090aGVyIiwiaXNXcml0YWJsZVByaW1hcnkiLCJzZWNvbmRhcnkiLCJhcmJpdGVyT25seSIsIlJTQXJiaXRlciIsInRhZ3MyIiwidGFnc0tleXMiLCJrZXlzIiwidGFnczJLZXlzIiwiZXZlcnkiLCJrZXkiLCJjdXJyZW50VHYiLCJuZXdUdiIsInByb2Nlc3NJZCIsImN1cnJlbnRDb3VudGVyIiwiTG9uZyIsImlzTG9uZyIsImNvdW50ZXIiLCJmcm9tTnVtYmVyIiwibmV3Q291bnRlciIsImNvbXBhcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js":
/*!***********************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/server_selection.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.readPreferenceServerSelector = exports.secondaryWritableServerSelector = exports.sameServerSelector = exports.writableServerSelector = exports.MIN_SECONDARY_WRITE_WIRE_VERSION = void 0;\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\n// max staleness constants\nconst IDLE_WRITE_PERIOD = 10000;\nconst SMALLEST_MAX_STALENESS_SECONDS = 90;\n//  Minimum version to try writes on secondaries.\nexports.MIN_SECONDARY_WRITE_WIRE_VERSION = 13;\n/**\n * Returns a server selector that selects for writable servers\n */ function writableServerSelector() {\n    return function writableServer(topologyDescription, servers) {\n        return latencyWindowReducer(topologyDescription, servers.filter((s)=>s.isWritable));\n    };\n}\nexports.writableServerSelector = writableServerSelector;\n/**\n * The purpose of this selector is to select the same server, only\n * if it is in a state that it can have commands sent to it.\n */ function sameServerSelector(description) {\n    return function sameServerSelector(topologyDescription, servers) {\n        if (!description) return [];\n        // Filter the servers to match the provided description only if\n        // the type is not unknown.\n        return servers.filter((sd)=>{\n            return sd.address === description.address && sd.type !== common_1.ServerType.Unknown;\n        });\n    };\n}\nexports.sameServerSelector = sameServerSelector;\n/**\n * Returns a server selector that uses a read preference to select a\n * server potentially for a write on a secondary.\n */ function secondaryWritableServerSelector(wireVersion, readPreference) {\n    // If server version < 5.0, read preference always primary.\n    // If server version >= 5.0...\n    // - If read preference is supplied, use that.\n    // - If no read preference is supplied, use primary.\n    if (!readPreference || !wireVersion || wireVersion && wireVersion < exports.MIN_SECONDARY_WRITE_WIRE_VERSION) {\n        return readPreferenceServerSelector(read_preference_1.ReadPreference.primary);\n    }\n    return readPreferenceServerSelector(readPreference);\n}\nexports.secondaryWritableServerSelector = secondaryWritableServerSelector;\n/**\n * Reduces the passed in array of servers by the rules of the \"Max Staleness\" specification\n * found here: https://github.com/mongodb/specifications/blob/master/source/max-staleness/max-staleness.rst\n *\n * @param readPreference - The read preference providing max staleness guidance\n * @param topologyDescription - The topology description\n * @param servers - The list of server descriptions to be reduced\n * @returns The list of servers that satisfy the requirements of max staleness\n */ function maxStalenessReducer(readPreference, topologyDescription, servers) {\n    if (readPreference.maxStalenessSeconds == null || readPreference.maxStalenessSeconds < 0) {\n        return servers;\n    }\n    const maxStaleness = readPreference.maxStalenessSeconds;\n    const maxStalenessVariance = (topologyDescription.heartbeatFrequencyMS + IDLE_WRITE_PERIOD) / 1000;\n    if (maxStaleness < maxStalenessVariance) {\n        throw new error_1.MongoInvalidArgumentError(`Option \"maxStalenessSeconds\" must be at least ${maxStalenessVariance} seconds`);\n    }\n    if (maxStaleness < SMALLEST_MAX_STALENESS_SECONDS) {\n        throw new error_1.MongoInvalidArgumentError(`Option \"maxStalenessSeconds\" must be at least ${SMALLEST_MAX_STALENESS_SECONDS} seconds`);\n    }\n    if (topologyDescription.type === common_1.TopologyType.ReplicaSetWithPrimary) {\n        const primary = Array.from(topologyDescription.servers.values()).filter(primaryFilter)[0];\n        return servers.reduce((result, server)=>{\n            const stalenessMS = server.lastUpdateTime - server.lastWriteDate - (primary.lastUpdateTime - primary.lastWriteDate) + topologyDescription.heartbeatFrequencyMS;\n            const staleness = stalenessMS / 1000;\n            const maxStalenessSeconds = readPreference.maxStalenessSeconds ?? 0;\n            if (staleness <= maxStalenessSeconds) {\n                result.push(server);\n            }\n            return result;\n        }, []);\n    }\n    if (topologyDescription.type === common_1.TopologyType.ReplicaSetNoPrimary) {\n        if (servers.length === 0) {\n            return servers;\n        }\n        const sMax = servers.reduce((max, s)=>s.lastWriteDate > max.lastWriteDate ? s : max);\n        return servers.reduce((result, server)=>{\n            const stalenessMS = sMax.lastWriteDate - server.lastWriteDate + topologyDescription.heartbeatFrequencyMS;\n            const staleness = stalenessMS / 1000;\n            const maxStalenessSeconds = readPreference.maxStalenessSeconds ?? 0;\n            if (staleness <= maxStalenessSeconds) {\n                result.push(server);\n            }\n            return result;\n        }, []);\n    }\n    return servers;\n}\n/**\n * Determines whether a server's tags match a given set of tags\n *\n * @param tagSet - The requested tag set to match\n * @param serverTags - The server's tags\n */ function tagSetMatch(tagSet, serverTags) {\n    const keys = Object.keys(tagSet);\n    const serverTagKeys = Object.keys(serverTags);\n    for(let i = 0; i < keys.length; ++i){\n        const key = keys[i];\n        if (serverTagKeys.indexOf(key) === -1 || serverTags[key] !== tagSet[key]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Reduces a set of server descriptions based on tags requested by the read preference\n *\n * @param readPreference - The read preference providing the requested tags\n * @param servers - The list of server descriptions to reduce\n * @returns The list of servers matching the requested tags\n */ function tagSetReducer(readPreference, servers) {\n    if (readPreference.tags == null || Array.isArray(readPreference.tags) && readPreference.tags.length === 0) {\n        return servers;\n    }\n    for(let i = 0; i < readPreference.tags.length; ++i){\n        const tagSet = readPreference.tags[i];\n        const serversMatchingTagset = servers.reduce((matched, server)=>{\n            if (tagSetMatch(tagSet, server.tags)) matched.push(server);\n            return matched;\n        }, []);\n        if (serversMatchingTagset.length) {\n            return serversMatchingTagset;\n        }\n    }\n    return [];\n}\n/**\n * Reduces a list of servers to ensure they fall within an acceptable latency window. This is\n * further specified in the \"Server Selection\" specification, found here:\n * https://github.com/mongodb/specifications/blob/master/source/server-selection/server-selection.rst\n *\n * @param topologyDescription - The topology description\n * @param servers - The list of servers to reduce\n * @returns The servers which fall within an acceptable latency window\n */ function latencyWindowReducer(topologyDescription, servers) {\n    const low = servers.reduce((min, server)=>min === -1 ? server.roundTripTime : Math.min(server.roundTripTime, min), -1);\n    const high = low + topologyDescription.localThresholdMS;\n    return servers.reduce((result, server)=>{\n        if (server.roundTripTime <= high && server.roundTripTime >= low) result.push(server);\n        return result;\n    }, []);\n}\n// filters\nfunction primaryFilter(server) {\n    return server.type === common_1.ServerType.RSPrimary;\n}\nfunction secondaryFilter(server) {\n    return server.type === common_1.ServerType.RSSecondary;\n}\nfunction nearestFilter(server) {\n    return server.type === common_1.ServerType.RSSecondary || server.type === common_1.ServerType.RSPrimary;\n}\nfunction knownFilter(server) {\n    return server.type !== common_1.ServerType.Unknown;\n}\nfunction loadBalancerFilter(server) {\n    return server.type === common_1.ServerType.LoadBalancer;\n}\n/**\n * Returns a function which selects servers based on a provided read preference\n *\n * @param readPreference - The read preference to select with\n */ function readPreferenceServerSelector(readPreference) {\n    if (!readPreference.isValid()) {\n        throw new error_1.MongoInvalidArgumentError(\"Invalid read preference specified\");\n    }\n    return function readPreferenceServers(topologyDescription, servers, deprioritized = []) {\n        const commonWireVersion = topologyDescription.commonWireVersion;\n        if (commonWireVersion && readPreference.minWireVersion && readPreference.minWireVersion > commonWireVersion) {\n            throw new error_1.MongoCompatibilityError(`Minimum wire version '${readPreference.minWireVersion}' required, but found '${commonWireVersion}'`);\n        }\n        if (topologyDescription.type === common_1.TopologyType.LoadBalanced) {\n            return servers.filter(loadBalancerFilter);\n        }\n        if (topologyDescription.type === common_1.TopologyType.Unknown) {\n            return [];\n        }\n        if (topologyDescription.type === common_1.TopologyType.Single) {\n            return latencyWindowReducer(topologyDescription, servers.filter(knownFilter));\n        }\n        if (topologyDescription.type === common_1.TopologyType.Sharded) {\n            const filtered = servers.filter((server)=>{\n                return !deprioritized.includes(server);\n            });\n            const selectable = filtered.length > 0 ? filtered : deprioritized;\n            return latencyWindowReducer(topologyDescription, selectable.filter(knownFilter));\n        }\n        const mode = readPreference.mode;\n        if (mode === read_preference_1.ReadPreference.PRIMARY) {\n            return servers.filter(primaryFilter);\n        }\n        if (mode === read_preference_1.ReadPreference.PRIMARY_PREFERRED) {\n            const result = servers.filter(primaryFilter);\n            if (result.length) {\n                return result;\n            }\n        }\n        const filter = mode === read_preference_1.ReadPreference.NEAREST ? nearestFilter : secondaryFilter;\n        const selectedServers = latencyWindowReducer(topologyDescription, tagSetReducer(readPreference, maxStalenessReducer(readPreference, topologyDescription, servers.filter(filter))));\n        if (mode === read_preference_1.ReadPreference.SECONDARY_PREFERRED && selectedServers.length === 0) {\n            return servers.filter(primaryFilter);\n        }\n        return selectedServers;\n    };\n}\nexports.readPreferenceServerSelector = readPreferenceServerSelector; //# sourceMappingURL=server_selection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXJfc2VsZWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxvQ0FBb0MsR0FBR0EsdUNBQXVDLEdBQUdBLDBCQUEwQixHQUFHQSw4QkFBOEIsR0FBR0Esd0NBQXdDLEdBQUcsS0FBSztBQUMvTCxNQUFNTyxVQUFVQyxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNQyxvQkFBb0JELG1CQUFPQSxDQUFDLCtFQUFvQjtBQUN0RCxNQUFNRSxXQUFXRixtQkFBT0EsQ0FBQyxpRUFBVTtBQUNuQywwQkFBMEI7QUFDMUIsTUFBTUcsb0JBQW9CO0FBQzFCLE1BQU1DLGlDQUFpQztBQUN2QyxpREFBaUQ7QUFDakRaLHdDQUF3QyxHQUFHO0FBQzNDOztDQUVDLEdBQ0QsU0FBU0s7SUFDTCxPQUFPLFNBQVNRLGVBQWVDLG1CQUFtQixFQUFFQyxPQUFPO1FBQ3ZELE9BQU9DLHFCQUFxQkYscUJBQXFCQyxRQUFRRSxNQUFNLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsVUFBVTtJQUN2RjtBQUNKO0FBQ0FuQiw4QkFBOEIsR0FBR0s7QUFDakM7OztDQUdDLEdBQ0QsU0FBU0QsbUJBQW1CZ0IsV0FBVztJQUNuQyxPQUFPLFNBQVNoQixtQkFBbUJVLG1CQUFtQixFQUFFQyxPQUFPO1FBQzNELElBQUksQ0FBQ0ssYUFDRCxPQUFPLEVBQUU7UUFDYiwrREFBK0Q7UUFDL0QsMkJBQTJCO1FBQzNCLE9BQU9MLFFBQVFFLE1BQU0sQ0FBQ0ksQ0FBQUE7WUFDbEIsT0FBT0EsR0FBR0MsT0FBTyxLQUFLRixZQUFZRSxPQUFPLElBQUlELEdBQUdFLElBQUksS0FBS2IsU0FBU2MsVUFBVSxDQUFDQyxPQUFPO1FBQ3hGO0lBQ0o7QUFDSjtBQUNBekIsMEJBQTBCLEdBQUdJO0FBQzdCOzs7Q0FHQyxHQUNELFNBQVNELGdDQUFnQ3VCLFdBQVcs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QU9SO1lBQ1g7UUFDSjtRQUNBLE1BQU0xQixTQUFTMkUsU0FBU25GLGtCQUFrQm1CLGNBQWMsQ0FBQ21FLE9BQU8sR0FBR25CLGdCQUFnQkY7UUFDbkYsTUFBTXNCLGtCQUFrQmhGLHFCQUFxQkYscUJBQXFCZ0QsY0FBY25DLGdCQUFnQkcsb0JBQW9CSCxnQkFBZ0JiLHFCQUFxQkMsUUFBUUUsTUFBTSxDQUFDQTtRQUN4SyxJQUFJMkUsU0FBU25GLGtCQUFrQm1CLGNBQWMsQ0FBQ3FFLG1CQUFtQixJQUFJRCxnQkFBZ0I3QyxNQUFNLEtBQUssR0FBRztZQUMvRixPQUFPcEMsUUFBUUUsTUFBTSxDQUFDd0I7UUFDMUI7UUFDQSxPQUFPdUQ7SUFDWDtBQUNKO0FBQ0FoRyxvQ0FBb0MsR0FBR0UsOEJBQ3ZDLDRDQUE0QyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXJfc2VsZWN0aW9uLmpzP2E4OTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IgPSBleHBvcnRzLnNlY29uZGFyeVdyaXRhYmxlU2VydmVyU2VsZWN0b3IgPSBleHBvcnRzLnNhbWVTZXJ2ZXJTZWxlY3RvciA9IGV4cG9ydHMud3JpdGFibGVTZXJ2ZXJTZWxlY3RvciA9IGV4cG9ydHMuTUlOX1NFQ09OREFSWV9XUklURV9XSVJFX1ZFUlNJT04gPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgcmVhZF9wcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi9jb21tb25cIik7XG4vLyBtYXggc3RhbGVuZXNzIGNvbnN0YW50c1xuY29uc3QgSURMRV9XUklURV9QRVJJT0QgPSAxMDAwMDtcbmNvbnN0IFNNQUxMRVNUX01BWF9TVEFMRU5FU1NfU0VDT05EUyA9IDkwO1xuLy8gIE1pbmltdW0gdmVyc2lvbiB0byB0cnkgd3JpdGVzIG9uIHNlY29uZGFyaWVzLlxuZXhwb3J0cy5NSU5fU0VDT05EQVJZX1dSSVRFX1dJUkVfVkVSU0lPTiA9IDEzO1xuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmVyIHNlbGVjdG9yIHRoYXQgc2VsZWN0cyBmb3Igd3JpdGFibGUgc2VydmVyc1xuICovXG5mdW5jdGlvbiB3cml0YWJsZVNlcnZlclNlbGVjdG9yKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiB3cml0YWJsZVNlcnZlcih0b3BvbG9neURlc2NyaXB0aW9uLCBzZXJ2ZXJzKSB7XG4gICAgICAgIHJldHVybiBsYXRlbmN5V2luZG93UmVkdWNlcih0b3BvbG9neURlc2NyaXB0aW9uLCBzZXJ2ZXJzLmZpbHRlcigocykgPT4gcy5pc1dyaXRhYmxlKSk7XG4gICAgfTtcbn1cbmV4cG9ydHMud3JpdGFibGVTZXJ2ZXJTZWxlY3RvciA9IHdyaXRhYmxlU2VydmVyU2VsZWN0b3I7XG4vKipcbiAqIFRoZSBwdXJwb3NlIG9mIHRoaXMgc2VsZWN0b3IgaXMgdG8gc2VsZWN0IHRoZSBzYW1lIHNlcnZlciwgb25seVxuICogaWYgaXQgaXMgaW4gYSBzdGF0ZSB0aGF0IGl0IGNhbiBoYXZlIGNvbW1hbmRzIHNlbnQgdG8gaXQuXG4gKi9cbmZ1bmN0aW9uIHNhbWVTZXJ2ZXJTZWxlY3RvcihkZXNjcmlwdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiBzYW1lU2VydmVyU2VsZWN0b3IodG9wb2xvZ3lEZXNjcmlwdGlvbiwgc2VydmVycykge1xuICAgICAgICBpZiAoIWRlc2NyaXB0aW9uKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAvLyBGaWx0ZXIgdGhlIHNlcnZlcnMgdG8gbWF0Y2ggdGhlIHByb3ZpZGVkIGRlc2NyaXB0aW9uIG9ubHkgaWZcbiAgICAgICAgLy8gdGhlIHR5cGUgaXMgbm90IHVua25vd24uXG4gICAgICAgIHJldHVybiBzZXJ2ZXJzLmZpbHRlcihzZCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc2QuYWRkcmVzcyA9PT0gZGVzY3JpcHRpb24uYWRkcmVzcyAmJiBzZC50eXBlICE9PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlVua25vd247XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5leHBvcnRzLnNhbWVTZXJ2ZXJTZWxlY3RvciA9IHNhbWVTZXJ2ZXJTZWxlY3Rvcjtcbi8qKlxuICogUmV0dXJucyBhIHNlcnZlciBzZWxlY3RvciB0aGF0IHVzZXMgYSByZWFkIHByZWZlcmVuY2UgdG8gc2VsZWN0IGFcbiAqIHNlcnZlciBwb3RlbnRpYWxseSBmb3IgYSB3cml0ZSBvbiBhIHNlY29uZGFyeS5cbiAqL1xuZnVuY3Rpb24gc2Vjb25kYXJ5V3JpdGFibGVTZXJ2ZXJTZWxlY3Rvcih3aXJlVmVyc2lvbiwgcmVhZFByZWZlcmVuY2UpIHtcbiAgICAvLyBJZiBzZXJ2ZXIgdmVyc2lvbiA8IDUuMCwgcmVhZCBwcmVmZXJlbmNlIGFsd2F5cyBwcmltYXJ5LlxuICAgIC8vIElmIHNlcnZlciB2ZXJzaW9uID49IDUuMC4uLlxuICAgIC8vIC0gSWYgcmVhZCBwcmVmZXJlbmNlIGlzIHN1cHBsaWVkLCB1c2UgdGhhdC5cbiAgICAvLyAtIElmIG5vIHJlYWQgcHJlZmVyZW5jZSBpcyBzdXBwbGllZCwgdXNlIHByaW1hcnkuXG4gICAgaWYgKCFyZWFkUHJlZmVyZW5jZSB8fFxuICAgICAgICAhd2lyZVZlcnNpb24gfHxcbiAgICAgICAgKHdpcmVWZXJzaW9uICYmIHdpcmVWZXJzaW9uIDwgZXhwb3J0cy5NSU5fU0VDT05EQVJZX1dSSVRFX1dJUkVfVkVSU0lPTikpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IocmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeSk7XG4gICAgfVxuICAgIHJldHVybiByZWFkUHJlZmVyZW5jZVNlcnZlclNlbGVjdG9yKHJlYWRQcmVmZXJlbmNlKTtcbn1cbmV4cG9ydHMuc2Vjb25kYXJ5V3JpdGFibGVTZXJ2ZXJTZWxlY3RvciA9IHNlY29uZGFyeVdyaXRhYmxlU2VydmVyU2VsZWN0b3I7XG4vKipcbiAqIFJlZHVjZXMgdGhlIHBhc3NlZCBpbiBhcnJheSBvZiBzZXJ2ZXJzIGJ5IHRoZSBydWxlcyBvZiB0aGUgXCJNYXggU3RhbGVuZXNzXCIgc3BlY2lmaWNhdGlvblxuICogZm91bmQgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi9tYXN0ZXIvc291cmNlL21heC1zdGFsZW5lc3MvbWF4LXN0YWxlbmVzcy5yc3RcbiAqXG4gKiBAcGFyYW0gcmVhZFByZWZlcmVuY2UgLSBUaGUgcmVhZCBwcmVmZXJlbmNlIHByb3ZpZGluZyBtYXggc3RhbGVuZXNzIGd1aWRhbmNlXG4gKiBAcGFyYW0gdG9wb2xvZ3lEZXNjcmlwdGlvbiAtIFRoZSB0b3BvbG9neSBkZXNjcmlwdGlvblxuICogQHBhcmFtIHNlcnZlcnMgLSBUaGUgbGlzdCBvZiBzZXJ2ZXIgZGVzY3JpcHRpb25zIHRvIGJlIHJlZHVjZWRcbiAqIEByZXR1cm5zIFRoZSBsaXN0IG9mIHNlcnZlcnMgdGhhdCBzYXRpc2Z5IHRoZSByZXF1aXJlbWVudHMgb2YgbWF4IHN0YWxlbmVzc1xuICovXG5mdW5jdGlvbiBtYXhTdGFsZW5lc3NSZWR1Y2VyKHJlYWRQcmVmZXJlbmNlLCB0b3BvbG9neURlc2NyaXB0aW9uLCBzZXJ2ZXJzKSB7XG4gICAgaWYgKHJlYWRQcmVmZXJlbmNlLm1heFN0YWxlbmVzc1NlY29uZHMgPT0gbnVsbCB8fCByZWFkUHJlZmVyZW5jZS5tYXhTdGFsZW5lc3NTZWNvbmRzIDwgMCkge1xuICAgICAgICByZXR1cm4gc2VydmVycztcbiAgICB9XG4gICAgY29uc3QgbWF4U3RhbGVuZXNzID0gcmVhZFByZWZlcmVuY2UubWF4U3RhbGVuZXNzU2Vjb25kcztcbiAgICBjb25zdCBtYXhTdGFsZW5lc3NWYXJpYW5jZSA9ICh0b3BvbG9neURlc2NyaXB0aW9uLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TICsgSURMRV9XUklURV9QRVJJT0QpIC8gMTAwMDtcbiAgICBpZiAobWF4U3RhbGVuZXNzIDwgbWF4U3RhbGVuZXNzVmFyaWFuY2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29JbnZhbGlkQXJndW1lbnRFcnJvcihgT3B0aW9uIFwibWF4U3RhbGVuZXNzU2Vjb25kc1wiIG11c3QgYmUgYXQgbGVhc3QgJHttYXhTdGFsZW5lc3NWYXJpYW5jZX0gc2Vjb25kc2ApO1xuICAgIH1cbiAgICBpZiAobWF4U3RhbGVuZXNzIDwgU01BTExFU1RfTUFYX1NUQUxFTkVTU19TRUNPTkRTKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYE9wdGlvbiBcIm1heFN0YWxlbmVzc1NlY29uZHNcIiBtdXN0IGJlIGF0IGxlYXN0ICR7U01BTExFU1RfTUFYX1NUQUxFTkVTU19TRUNPTkRTfSBzZWNvbmRzYCk7XG4gICAgfVxuICAgIGlmICh0b3BvbG9neURlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0V2l0aFByaW1hcnkpIHtcbiAgICAgICAgY29uc3QgcHJpbWFyeSA9IEFycmF5LmZyb20odG9wb2xvZ3lEZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKS5maWx0ZXIocHJpbWFyeUZpbHRlcilbMF07XG4gICAgICAgIHJldHVybiBzZXJ2ZXJzLnJlZHVjZSgocmVzdWx0LCBzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YWxlbmVzc01TID0gc2VydmVyLmxhc3RVcGRhdGVUaW1lIC1cbiAgICAgICAgICAgICAgICBzZXJ2ZXIubGFzdFdyaXRlRGF0ZSAtXG4gICAgICAgICAgICAgICAgKHByaW1hcnkubGFzdFVwZGF0ZVRpbWUgLSBwcmltYXJ5Lmxhc3RXcml0ZURhdGUpICtcbiAgICAgICAgICAgICAgICB0b3BvbG9neURlc2NyaXB0aW9uLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TO1xuICAgICAgICAgICAgY29uc3Qgc3RhbGVuZXNzID0gc3RhbGVuZXNzTVMgLyAxMDAwO1xuICAgICAgICAgICAgY29uc3QgbWF4U3RhbGVuZXNzU2Vjb25kcyA9IHJlYWRQcmVmZXJlbmNlLm1heFN0YWxlbmVzc1NlY29uZHMgPz8gMDtcbiAgICAgICAgICAgIGlmIChzdGFsZW5lc3MgPD0gbWF4U3RhbGVuZXNzU2Vjb25kcykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCBbXSk7XG4gICAgfVxuICAgIGlmICh0b3BvbG9neURlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0Tm9QcmltYXJ5KSB7XG4gICAgICAgIGlmIChzZXJ2ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZlcnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc01heCA9IHNlcnZlcnMucmVkdWNlKChtYXgsIHMpID0+IHMubGFzdFdyaXRlRGF0ZSA+IG1heC5sYXN0V3JpdGVEYXRlID8gcyA6IG1heCk7XG4gICAgICAgIHJldHVybiBzZXJ2ZXJzLnJlZHVjZSgocmVzdWx0LCBzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YWxlbmVzc01TID0gc01heC5sYXN0V3JpdGVEYXRlIC0gc2VydmVyLmxhc3RXcml0ZURhdGUgKyB0b3BvbG9neURlc2NyaXB0aW9uLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TO1xuICAgICAgICAgICAgY29uc3Qgc3RhbGVuZXNzID0gc3RhbGVuZXNzTVMgLyAxMDAwO1xuICAgICAgICAgICAgY29uc3QgbWF4U3RhbGVuZXNzU2Vjb25kcyA9IHJlYWRQcmVmZXJlbmNlLm1heFN0YWxlbmVzc1NlY29uZHMgPz8gMDtcbiAgICAgICAgICAgIGlmIChzdGFsZW5lc3MgPD0gbWF4U3RhbGVuZXNzU2Vjb25kcykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCBbXSk7XG4gICAgfVxuICAgIHJldHVybiBzZXJ2ZXJzO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBzZXJ2ZXIncyB0YWdzIG1hdGNoIGEgZ2l2ZW4gc2V0IG9mIHRhZ3NcbiAqXG4gKiBAcGFyYW0gdGFnU2V0IC0gVGhlIHJlcXVlc3RlZCB0YWcgc2V0IHRvIG1hdGNoXG4gKiBAcGFyYW0gc2VydmVyVGFncyAtIFRoZSBzZXJ2ZXIncyB0YWdzXG4gKi9cbmZ1bmN0aW9uIHRhZ1NldE1hdGNoKHRhZ1NldCwgc2VydmVyVGFncykge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0YWdTZXQpO1xuICAgIGNvbnN0IHNlcnZlclRhZ0tleXMgPSBPYmplY3Qua2V5cyhzZXJ2ZXJUYWdzKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgaWYgKHNlcnZlclRhZ0tleXMuaW5kZXhPZihrZXkpID09PSAtMSB8fCBzZXJ2ZXJUYWdzW2tleV0gIT09IHRhZ1NldFtrZXldKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIFJlZHVjZXMgYSBzZXQgb2Ygc2VydmVyIGRlc2NyaXB0aW9ucyBiYXNlZCBvbiB0YWdzIHJlcXVlc3RlZCBieSB0aGUgcmVhZCBwcmVmZXJlbmNlXG4gKlxuICogQHBhcmFtIHJlYWRQcmVmZXJlbmNlIC0gVGhlIHJlYWQgcHJlZmVyZW5jZSBwcm92aWRpbmcgdGhlIHJlcXVlc3RlZCB0YWdzXG4gKiBAcGFyYW0gc2VydmVycyAtIFRoZSBsaXN0IG9mIHNlcnZlciBkZXNjcmlwdGlvbnMgdG8gcmVkdWNlXG4gKiBAcmV0dXJucyBUaGUgbGlzdCBvZiBzZXJ2ZXJzIG1hdGNoaW5nIHRoZSByZXF1ZXN0ZWQgdGFnc1xuICovXG5mdW5jdGlvbiB0YWdTZXRSZWR1Y2VyKHJlYWRQcmVmZXJlbmNlLCBzZXJ2ZXJzKSB7XG4gICAgaWYgKHJlYWRQcmVmZXJlbmNlLnRhZ3MgPT0gbnVsbCB8fFxuICAgICAgICAoQXJyYXkuaXNBcnJheShyZWFkUHJlZmVyZW5jZS50YWdzKSAmJiByZWFkUHJlZmVyZW5jZS50YWdzLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuIHNlcnZlcnM7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVhZFByZWZlcmVuY2UudGFncy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCB0YWdTZXQgPSByZWFkUHJlZmVyZW5jZS50YWdzW2ldO1xuICAgICAgICBjb25zdCBzZXJ2ZXJzTWF0Y2hpbmdUYWdzZXQgPSBzZXJ2ZXJzLnJlZHVjZSgobWF0Y2hlZCwgc2VydmVyKSA9PiB7XG4gICAgICAgICAgICBpZiAodGFnU2V0TWF0Y2godGFnU2V0LCBzZXJ2ZXIudGFncykpXG4gICAgICAgICAgICAgICAgbWF0Y2hlZC5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlZDtcbiAgICAgICAgfSwgW10pO1xuICAgICAgICBpZiAoc2VydmVyc01hdGNoaW5nVGFnc2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZlcnNNYXRjaGluZ1RhZ3NldDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW107XG59XG4vKipcbiAqIFJlZHVjZXMgYSBsaXN0IG9mIHNlcnZlcnMgdG8gZW5zdXJlIHRoZXkgZmFsbCB3aXRoaW4gYW4gYWNjZXB0YWJsZSBsYXRlbmN5IHdpbmRvdy4gVGhpcyBpc1xuICogZnVydGhlciBzcGVjaWZpZWQgaW4gdGhlIFwiU2VydmVyIFNlbGVjdGlvblwiIHNwZWNpZmljYXRpb24sIGZvdW5kIGhlcmU6XG4gKiBodHRwczovL2dpdGh1Yi5jb20vbW9uZ29kYi9zcGVjaWZpY2F0aW9ucy9ibG9iL21hc3Rlci9zb3VyY2Uvc2VydmVyLXNlbGVjdGlvbi9zZXJ2ZXItc2VsZWN0aW9uLnJzdFxuICpcbiAqIEBwYXJhbSB0b3BvbG9neURlc2NyaXB0aW9uIC0gVGhlIHRvcG9sb2d5IGRlc2NyaXB0aW9uXG4gKiBAcGFyYW0gc2VydmVycyAtIFRoZSBsaXN0IG9mIHNlcnZlcnMgdG8gcmVkdWNlXG4gKiBAcmV0dXJucyBUaGUgc2VydmVycyB3aGljaCBmYWxsIHdpdGhpbiBhbiBhY2NlcHRhYmxlIGxhdGVuY3kgd2luZG93XG4gKi9cbmZ1bmN0aW9uIGxhdGVuY3lXaW5kb3dSZWR1Y2VyKHRvcG9sb2d5RGVzY3JpcHRpb24sIHNlcnZlcnMpIHtcbiAgICBjb25zdCBsb3cgPSBzZXJ2ZXJzLnJlZHVjZSgobWluLCBzZXJ2ZXIpID0+IG1pbiA9PT0gLTEgPyBzZXJ2ZXIucm91bmRUcmlwVGltZSA6IE1hdGgubWluKHNlcnZlci5yb3VuZFRyaXBUaW1lLCBtaW4pLCAtMSk7XG4gICAgY29uc3QgaGlnaCA9IGxvdyArIHRvcG9sb2d5RGVzY3JpcHRpb24ubG9jYWxUaHJlc2hvbGRNUztcbiAgICByZXR1cm4gc2VydmVycy5yZWR1Y2UoKHJlc3VsdCwgc2VydmVyKSA9PiB7XG4gICAgICAgIGlmIChzZXJ2ZXIucm91bmRUcmlwVGltZSA8PSBoaWdoICYmIHNlcnZlci5yb3VuZFRyaXBUaW1lID49IGxvdylcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlcnZlcik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwgW10pO1xufVxuLy8gZmlsdGVyc1xuZnVuY3Rpb24gcHJpbWFyeUZpbHRlcihzZXJ2ZXIpIHtcbiAgICByZXR1cm4gc2VydmVyLnR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuUlNQcmltYXJ5O1xufVxuZnVuY3Rpb24gc2Vjb25kYXJ5RmlsdGVyKHNlcnZlcikge1xuICAgIHJldHVybiBzZXJ2ZXIudHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5SU1NlY29uZGFyeTtcbn1cbmZ1bmN0aW9uIG5lYXJlc3RGaWx0ZXIoc2VydmVyKSB7XG4gICAgcmV0dXJuIHNlcnZlci50eXBlID09PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTU2Vjb25kYXJ5IHx8IHNlcnZlci50eXBlID09PSBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTUHJpbWFyeTtcbn1cbmZ1bmN0aW9uIGtub3duRmlsdGVyKHNlcnZlcikge1xuICAgIHJldHVybiBzZXJ2ZXIudHlwZSAhPT0gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duO1xufVxuZnVuY3Rpb24gbG9hZEJhbGFuY2VyRmlsdGVyKHNlcnZlcikge1xuICAgIHJldHVybiBzZXJ2ZXIudHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5Mb2FkQmFsYW5jZXI7XG59XG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBzZWxlY3RzIHNlcnZlcnMgYmFzZWQgb24gYSBwcm92aWRlZCByZWFkIHByZWZlcmVuY2VcbiAqXG4gKiBAcGFyYW0gcmVhZFByZWZlcmVuY2UgLSBUaGUgcmVhZCBwcmVmZXJlbmNlIHRvIHNlbGVjdCB3aXRoXG4gKi9cbmZ1bmN0aW9uIHJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IocmVhZFByZWZlcmVuY2UpIHtcbiAgICBpZiAoIXJlYWRQcmVmZXJlbmNlLmlzVmFsaWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdJbnZhbGlkIHJlYWQgcHJlZmVyZW5jZSBzcGVjaWZpZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlYWRQcmVmZXJlbmNlU2VydmVycyh0b3BvbG9neURlc2NyaXB0aW9uLCBzZXJ2ZXJzLCBkZXByaW9yaXRpemVkID0gW10pIHtcbiAgICAgICAgY29uc3QgY29tbW9uV2lyZVZlcnNpb24gPSB0b3BvbG9neURlc2NyaXB0aW9uLmNvbW1vbldpcmVWZXJzaW9uO1xuICAgICAgICBpZiAoY29tbW9uV2lyZVZlcnNpb24gJiZcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlLm1pbldpcmVWZXJzaW9uICYmXG4gICAgICAgICAgICByZWFkUHJlZmVyZW5jZS5taW5XaXJlVmVyc2lvbiA+IGNvbW1vbldpcmVWZXJzaW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcihgTWluaW11bSB3aXJlIHZlcnNpb24gJyR7cmVhZFByZWZlcmVuY2UubWluV2lyZVZlcnNpb259JyByZXF1aXJlZCwgYnV0IGZvdW5kICcke2NvbW1vbldpcmVWZXJzaW9ufSdgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9wb2xvZ3lEZXNjcmlwdGlvbi50eXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuTG9hZEJhbGFuY2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VydmVycy5maWx0ZXIobG9hZEJhbGFuY2VyRmlsdGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9wb2xvZ3lEZXNjcmlwdGlvbi50eXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuVW5rbm93bikge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b3BvbG9neURlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5TaW5nbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXRlbmN5V2luZG93UmVkdWNlcih0b3BvbG9neURlc2NyaXB0aW9uLCBzZXJ2ZXJzLmZpbHRlcihrbm93bkZpbHRlcikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b3BvbG9neURlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5TaGFyZGVkKSB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHNlcnZlcnMuZmlsdGVyKHNlcnZlciA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFkZXByaW9yaXRpemVkLmluY2x1ZGVzKHNlcnZlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGFibGUgPSBmaWx0ZXJlZC5sZW5ndGggPiAwID8gZmlsdGVyZWQgOiBkZXByaW9yaXRpemVkO1xuICAgICAgICAgICAgcmV0dXJuIGxhdGVuY3lXaW5kb3dSZWR1Y2VyKHRvcG9sb2d5RGVzY3JpcHRpb24sIHNlbGVjdGFibGUuZmlsdGVyKGtub3duRmlsdGVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kZSA9IHJlYWRQcmVmZXJlbmNlLm1vZGU7XG4gICAgICAgIGlmIChtb2RlID09PSByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5QUklNQVJZKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VydmVycy5maWx0ZXIocHJpbWFyeUZpbHRlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vZGUgPT09IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLlBSSU1BUllfUFJFRkVSUkVEKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBzZXJ2ZXJzLmZpbHRlcihwcmltYXJ5RmlsdGVyKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWx0ZXIgPSBtb2RlID09PSByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5ORUFSRVNUID8gbmVhcmVzdEZpbHRlciA6IHNlY29uZGFyeUZpbHRlcjtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRTZXJ2ZXJzID0gbGF0ZW5jeVdpbmRvd1JlZHVjZXIodG9wb2xvZ3lEZXNjcmlwdGlvbiwgdGFnU2V0UmVkdWNlcihyZWFkUHJlZmVyZW5jZSwgbWF4U3RhbGVuZXNzUmVkdWNlcihyZWFkUHJlZmVyZW5jZSwgdG9wb2xvZ3lEZXNjcmlwdGlvbiwgc2VydmVycy5maWx0ZXIoZmlsdGVyKSkpKTtcbiAgICAgICAgaWYgKG1vZGUgPT09IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLlNFQ09OREFSWV9QUkVGRVJSRUQgJiYgc2VsZWN0ZWRTZXJ2ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlcnZlcnMuZmlsdGVyKHByaW1hcnlGaWx0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxlY3RlZFNlcnZlcnM7XG4gICAgfTtcbn1cbmV4cG9ydHMucmVhZFByZWZlcmVuY2VTZXJ2ZXJTZWxlY3RvciA9IHJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXJ2ZXJfc2VsZWN0aW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IiLCJzZWNvbmRhcnlXcml0YWJsZVNlcnZlclNlbGVjdG9yIiwic2FtZVNlcnZlclNlbGVjdG9yIiwid3JpdGFibGVTZXJ2ZXJTZWxlY3RvciIsIk1JTl9TRUNPTkRBUllfV1JJVEVfV0lSRV9WRVJTSU9OIiwiZXJyb3JfMSIsInJlcXVpcmUiLCJyZWFkX3ByZWZlcmVuY2VfMSIsImNvbW1vbl8xIiwiSURMRV9XUklURV9QRVJJT0QiLCJTTUFMTEVTVF9NQVhfU1RBTEVORVNTX1NFQ09ORFMiLCJ3cml0YWJsZVNlcnZlciIsInRvcG9sb2d5RGVzY3JpcHRpb24iLCJzZXJ2ZXJzIiwibGF0ZW5jeVdpbmRvd1JlZHVjZXIiLCJmaWx0ZXIiLCJzIiwiaXNXcml0YWJsZSIsImRlc2NyaXB0aW9uIiwic2QiLCJhZGRyZXNzIiwidHlwZSIsIlNlcnZlclR5cGUiLCJVbmtub3duIiwid2lyZVZlcnNpb24iLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsIm1heFN0YWxlbmVzc1JlZHVjZXIiLCJtYXhTdGFsZW5lc3NTZWNvbmRzIiwibWF4U3RhbGVuZXNzIiwibWF4U3RhbGVuZXNzVmFyaWFuY2UiLCJoZWFydGJlYXRGcmVxdWVuY3lNUyIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJUb3BvbG9neVR5cGUiLCJSZXBsaWNhU2V0V2l0aFByaW1hcnkiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJwcmltYXJ5RmlsdGVyIiwicmVkdWNlIiwicmVzdWx0Iiwic2VydmVyIiwic3RhbGVuZXNzTVMiLCJsYXN0VXBkYXRlVGltZSIsImxhc3RXcml0ZURhdGUiLCJzdGFsZW5lc3MiLCJwdXNoIiwiUmVwbGljYVNldE5vUHJpbWFyeSIsImxlbmd0aCIsInNNYXgiLCJtYXgiLCJ0YWdTZXRNYXRjaCIsInRhZ1NldCIsInNlcnZlclRhZ3MiLCJrZXlzIiwic2VydmVyVGFnS2V5cyIsImkiLCJrZXkiLCJpbmRleE9mIiwidGFnU2V0UmVkdWNlciIsInRhZ3MiLCJpc0FycmF5Iiwic2VydmVyc01hdGNoaW5nVGFnc2V0IiwibWF0Y2hlZCIsImxvdyIsIm1pbiIsInJvdW5kVHJpcFRpbWUiLCJNYXRoIiwiaGlnaCIsImxvY2FsVGhyZXNob2xkTVMiLCJSU1ByaW1hcnkiLCJzZWNvbmRhcnlGaWx0ZXIiLCJSU1NlY29uZGFyeSIsIm5lYXJlc3RGaWx0ZXIiLCJrbm93bkZpbHRlciIsImxvYWRCYWxhbmNlckZpbHRlciIsIkxvYWRCYWxhbmNlciIsImlzVmFsaWQiLCJyZWFkUHJlZmVyZW5jZVNlcnZlcnMiLCJkZXByaW9yaXRpemVkIiwiY29tbW9uV2lyZVZlcnNpb24iLCJtaW5XaXJlVmVyc2lvbiIsIk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yIiwiTG9hZEJhbGFuY2VkIiwiU2luZ2xlIiwiU2hhcmRlZCIsImZpbHRlcmVkIiwiaW5jbHVkZXMiLCJzZWxlY3RhYmxlIiwibW9kZSIsIlBSSU1BUlkiLCJQUklNQVJZX1BSRUZFUlJFRCIsIk5FQVJFU1QiLCJzZWxlY3RlZFNlcnZlcnMiLCJTRUNPTkRBUllfUFJFRkVSUkVEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/server_selection_events.js":
/*!******************************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/server_selection_events.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WaitingForSuitableServerEvent = exports.ServerSelectionSucceededEvent = exports.ServerSelectionFailedEvent = exports.ServerSelectionStartedEvent = exports.ServerSelectionEvent = void 0;\nconst utils_1 = __webpack_require__(/*! .././utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\n/**\n * The base export class for all logs published from server selection\n * @internal\n * @category Log Type\n */ class ServerSelectionEvent {\n    /** @internal */ constructor(selector, topologyDescription, operation){\n        this.selector = selector;\n        this.operation = operation;\n        this.topologyDescription = topologyDescription;\n    }\n}\nexports.ServerSelectionEvent = ServerSelectionEvent;\n/**\n * An event published when server selection starts\n * @internal\n * @category Event\n */ class ServerSelectionStartedEvent extends ServerSelectionEvent {\n    /** @internal */ constructor(selector, topologyDescription, operation){\n        super(selector, topologyDescription, operation);\n        /** @internal */ this.name = constants_1.SERVER_SELECTION_STARTED;\n        this.message = \"Server selection started\";\n    }\n}\nexports.ServerSelectionStartedEvent = ServerSelectionStartedEvent;\n/**\n * An event published when a server selection fails\n * @internal\n * @category Event\n */ class ServerSelectionFailedEvent extends ServerSelectionEvent {\n    /** @internal */ constructor(selector, topologyDescription, error, operation){\n        super(selector, topologyDescription, operation);\n        /** @internal */ this.name = constants_1.SERVER_SELECTION_FAILED;\n        this.message = \"Server selection failed\";\n        this.failure = error;\n    }\n}\nexports.ServerSelectionFailedEvent = ServerSelectionFailedEvent;\n/**\n * An event published when server selection succeeds\n * @internal\n * @category Event\n */ class ServerSelectionSucceededEvent extends ServerSelectionEvent {\n    /** @internal */ constructor(selector, topologyDescription, address, operation){\n        super(selector, topologyDescription, operation);\n        /** @internal */ this.name = constants_1.SERVER_SELECTION_SUCCEEDED;\n        this.message = \"Server selection succeeded\";\n        const { host, port } = utils_1.HostAddress.fromString(address).toHostPort();\n        this.serverHost = host;\n        this.serverPort = port;\n    }\n}\nexports.ServerSelectionSucceededEvent = ServerSelectionSucceededEvent;\n/**\n * An event published when server selection is waiting for a suitable server to become available\n * @internal\n * @category Event\n */ class WaitingForSuitableServerEvent extends ServerSelectionEvent {\n    /** @internal */ constructor(selector, topologyDescription, remainingTimeMS, operation){\n        super(selector, topologyDescription, operation);\n        /** @internal */ this.name = constants_1.WAITING_FOR_SUITABLE_SERVER;\n        this.message = \"Waiting for suitable server to become available\";\n        this.remainingTimeMS = remainingTimeMS;\n    }\n}\nexports.WaitingForSuitableServerEvent = WaitingForSuitableServerEvent; //# sourceMappingURL=server_selection_events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQscUNBQXFDLEdBQUdBLHFDQUFxQyxHQUFHQSxrQ0FBa0MsR0FBR0EsbUNBQW1DLEdBQUdBLDRCQUE0QixHQUFHLEtBQUs7QUFDL0wsTUFBTU8sVUFBVUMsbUJBQU9BLENBQUMsNkRBQVk7QUFDcEMsTUFBTUMsY0FBY0QsbUJBQU9BLENBQUMsbUVBQWM7QUFDMUM7Ozs7Q0FJQyxHQUNELE1BQU1GO0lBQ0YsY0FBYyxHQUNkSSxZQUFZQyxRQUFRLEVBQUVDLG1CQUFtQixFQUFFQyxTQUFTLENBQUU7UUFDbEQsSUFBSSxDQUFDRixRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0UsU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNELG1CQUFtQixHQUFHQTtJQUMvQjtBQUNKO0FBQ0FaLDRCQUE0QixHQUFHTTtBQUMvQjs7OztDQUlDLEdBQ0QsTUFBTUQsb0NBQW9DQztJQUN0QyxjQUFjLEdBQ2RJLFlBQVlDLFFBQVEsRUFBRUMsbUJBQW1CLEVBQUVDLFNBQVMsQ0FBRTtRQUNsRCxLQUFLLENBQUNGLFVBQVVDLHFCQUFxQkM7UUFDckMsY0FBYyxHQUNkLElBQUksQ0FBQ0MsSUFBSSxHQUFHTCxZQUFZTSx3QkFBd0I7UUFDaEQsSUFBSSxDQUFDQyxPQUFPLEdBQUc7SUFDbkI7QUFDSjtBQUNBaEIsbUNBQW1DLEdBQUdLO0FBQ3RDOzs7O0NBSUMsR0FDRCxNQUFNRCxtQ0FBbUNFO0lBQ3JDLGNBQWMsR0FDZEksWUFBWUMsUUFBUSxFQUFFQyxtQkFBbUIsRUFBRUssS0FBSyxFQUFFSixTQUFTLENBQUU7UUFDekQsS0FBSyxDQUFDRixVQUFVQyxxQkFBcUJDO1FBQ3JDLGNBQWMsR0FDZCxJQUFJLENBQUNDLElBQUksR0FBR0wsWUFBWVMsdUJBQXVCO1FBQy9DLElBQUksQ0FBQ0YsT0FBTyxHQUFHO1FBQ2YsSUFBSSxDQUFDRyxPQUFPLEdBQUdGO0lBQ25CO0FBQ0o7QUFDQWpCLGtDQUFrQyxHQUFHSTtBQUNyQzs7OztDQUlDLEdBQ0QsTUFBTUQsc0NBQXNDRztJQUN4QyxjQUFjLEdBQ2RJLFlBQVlDLFFBQVEsRUFBRUMsbUJBQW1CLEVBQUVRLE9BQU8sRUFBRVAsU0FBUyxDQUFFO1FBQzNELEtBQUssQ0FBQ0YsVUFBVUMscUJBQXFCQztRQUNyQyxjQUFjLEdBQ2QsSUFBSSxDQUFDQyxJQUFJLEdBQUdMLFlBQVlZLDBCQUEwQjtRQUNsRCxJQUFJLENBQUNMLE9BQU8sR0FBRztRQUNmLE1BQU0sRUFBRU0sSUFBSSxFQUFFQyxJQUFJLEVBQUUsR0FBR2hCLFFBQVFpQixXQUFXLENBQUNDLFVBQVUsQ0FBQ0wsU0FBU00sVUFBVTtRQUN6RSxJQUFJLENBQUNDLFVBQVUsR0FBR0w7UUFDbEIsSUFBSSxDQUFDTSxVQUFVLEdBQUdMO0lBQ3RCO0FBQ0o7QUFDQXZCLHFDQUFxQyxHQUFHRztBQUN4Qzs7OztDQUlDLEdBQ0QsTUFBTUQsc0NBQXNDSTtJQUN4QyxjQUFjLEdBQ2RJLFlBQVlDLFFBQVEsRUFBRUMsbUJBQW1CLEVBQUVpQixlQUFlLEVBQUVoQixTQUFTLENBQUU7UUFDbkUsS0FBSyxDQUFDRixVQUFVQyxxQkFBcUJDO1FBQ3JDLGNBQWMsR0FDZCxJQUFJLENBQUNDLElBQUksR0FBR0wsWUFBWXFCLDJCQUEyQjtRQUNuRCxJQUFJLENBQUNkLE9BQU8sR0FBRztRQUNmLElBQUksQ0FBQ2EsZUFBZSxHQUFHQTtJQUMzQjtBQUNKO0FBQ0E3QixxQ0FBcUMsR0FBR0UsK0JBQ3hDLG1EQUFtRCIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50cy5qcz85NThjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5XYWl0aW5nRm9yU3VpdGFibGVTZXJ2ZXJFdmVudCA9IGV4cG9ydHMuU2VydmVyU2VsZWN0aW9uU3VjY2VlZGVkRXZlbnQgPSBleHBvcnRzLlNlcnZlclNlbGVjdGlvbkZhaWxlZEV2ZW50ID0gZXhwb3J0cy5TZXJ2ZXJTZWxlY3Rpb25TdGFydGVkRXZlbnQgPSBleHBvcnRzLlNlcnZlclNlbGVjdGlvbkV2ZW50ID0gdm9pZCAwO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uL3V0aWxzXCIpO1xuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xuLyoqXG4gKiBUaGUgYmFzZSBleHBvcnQgY2xhc3MgZm9yIGFsbCBsb2dzIHB1Ymxpc2hlZCBmcm9tIHNlcnZlciBzZWxlY3Rpb25cbiAqIEBpbnRlcm5hbFxuICogQGNhdGVnb3J5IExvZyBUeXBlXG4gKi9cbmNsYXNzIFNlcnZlclNlbGVjdGlvbkV2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHRvcG9sb2d5RGVzY3JpcHRpb24sIG9wZXJhdGlvbikge1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uO1xuICAgICAgICB0aGlzLnRvcG9sb2d5RGVzY3JpcHRpb24gPSB0b3BvbG9neURlc2NyaXB0aW9uO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVyU2VsZWN0aW9uRXZlbnQgPSBTZXJ2ZXJTZWxlY3Rpb25FdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gc2VydmVyIHNlbGVjdGlvbiBzdGFydHNcbiAqIEBpbnRlcm5hbFxuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFNlcnZlclNlbGVjdGlvblN0YXJ0ZWRFdmVudCBleHRlbmRzIFNlcnZlclNlbGVjdGlvbkV2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHRvcG9sb2d5RGVzY3JpcHRpb24sIG9wZXJhdGlvbikge1xuICAgICAgICBzdXBlcihzZWxlY3RvciwgdG9wb2xvZ3lEZXNjcmlwdGlvbiwgb3BlcmF0aW9uKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5TRVJWRVJfU0VMRUNUSU9OX1NUQVJURUQ7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9ICdTZXJ2ZXIgc2VsZWN0aW9uIHN0YXJ0ZWQnO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVyU2VsZWN0aW9uU3RhcnRlZEV2ZW50ID0gU2VydmVyU2VsZWN0aW9uU3RhcnRlZEV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBwdWJsaXNoZWQgd2hlbiBhIHNlcnZlciBzZWxlY3Rpb24gZmFpbHNcbiAqIEBpbnRlcm5hbFxuICogQGNhdGVnb3J5IEV2ZW50XG4gKi9cbmNsYXNzIFNlcnZlclNlbGVjdGlvbkZhaWxlZEV2ZW50IGV4dGVuZHMgU2VydmVyU2VsZWN0aW9uRXZlbnQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgdG9wb2xvZ3lEZXNjcmlwdGlvbiwgZXJyb3IsIG9wZXJhdGlvbikge1xuICAgICAgICBzdXBlcihzZWxlY3RvciwgdG9wb2xvZ3lEZXNjcmlwdGlvbiwgb3BlcmF0aW9uKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5TRVJWRVJfU0VMRUNUSU9OX0ZBSUxFRDtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gJ1NlcnZlciBzZWxlY3Rpb24gZmFpbGVkJztcbiAgICAgICAgdGhpcy5mYWlsdXJlID0gZXJyb3I7XG4gICAgfVxufVxuZXhwb3J0cy5TZXJ2ZXJTZWxlY3Rpb25GYWlsZWRFdmVudCA9IFNlcnZlclNlbGVjdGlvbkZhaWxlZEV2ZW50O1xuLyoqXG4gKiBBbiBldmVudCBwdWJsaXNoZWQgd2hlbiBzZXJ2ZXIgc2VsZWN0aW9uIHN1Y2NlZWRzXG4gKiBAaW50ZXJuYWxcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBTZXJ2ZXJTZWxlY3Rpb25TdWNjZWVkZWRFdmVudCBleHRlbmRzIFNlcnZlclNlbGVjdGlvbkV2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHRvcG9sb2d5RGVzY3JpcHRpb24sIGFkZHJlc3MsIG9wZXJhdGlvbikge1xuICAgICAgICBzdXBlcihzZWxlY3RvciwgdG9wb2xvZ3lEZXNjcmlwdGlvbiwgb3BlcmF0aW9uKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBjb25zdGFudHNfMS5TRVJWRVJfU0VMRUNUSU9OX1NVQ0NFRURFRDtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gJ1NlcnZlciBzZWxlY3Rpb24gc3VjY2VlZGVkJztcbiAgICAgICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSB1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcoYWRkcmVzcykudG9Ib3N0UG9ydCgpO1xuICAgICAgICB0aGlzLnNlcnZlckhvc3QgPSBob3N0O1xuICAgICAgICB0aGlzLnNlcnZlclBvcnQgPSBwb3J0O1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVyU2VsZWN0aW9uU3VjY2VlZGVkRXZlbnQgPSBTZXJ2ZXJTZWxlY3Rpb25TdWNjZWVkZWRFdmVudDtcbi8qKlxuICogQW4gZXZlbnQgcHVibGlzaGVkIHdoZW4gc2VydmVyIHNlbGVjdGlvbiBpcyB3YWl0aW5nIGZvciBhIHN1aXRhYmxlIHNlcnZlciB0byBiZWNvbWUgYXZhaWxhYmxlXG4gKiBAaW50ZXJuYWxcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBXYWl0aW5nRm9yU3VpdGFibGVTZXJ2ZXJFdmVudCBleHRlbmRzIFNlcnZlclNlbGVjdGlvbkV2ZW50IHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHRvcG9sb2d5RGVzY3JpcHRpb24sIHJlbWFpbmluZ1RpbWVNUywgb3BlcmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKHNlbGVjdG9yLCB0b3BvbG9neURlc2NyaXB0aW9uLCBvcGVyYXRpb24pO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmFtZSA9IGNvbnN0YW50c18xLldBSVRJTkdfRk9SX1NVSVRBQkxFX1NFUlZFUjtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gJ1dhaXRpbmcgZm9yIHN1aXRhYmxlIHNlcnZlciB0byBiZWNvbWUgYXZhaWxhYmxlJztcbiAgICAgICAgdGhpcy5yZW1haW5pbmdUaW1lTVMgPSByZW1haW5pbmdUaW1lTVM7XG4gICAgfVxufVxuZXhwb3J0cy5XYWl0aW5nRm9yU3VpdGFibGVTZXJ2ZXJFdmVudCA9IFdhaXRpbmdGb3JTdWl0YWJsZVNlcnZlckV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VydmVyX3NlbGVjdGlvbl9ldmVudHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiV2FpdGluZ0ZvclN1aXRhYmxlU2VydmVyRXZlbnQiLCJTZXJ2ZXJTZWxlY3Rpb25TdWNjZWVkZWRFdmVudCIsIlNlcnZlclNlbGVjdGlvbkZhaWxlZEV2ZW50IiwiU2VydmVyU2VsZWN0aW9uU3RhcnRlZEV2ZW50IiwiU2VydmVyU2VsZWN0aW9uRXZlbnQiLCJ1dGlsc18xIiwicmVxdWlyZSIsImNvbnN0YW50c18xIiwiY29uc3RydWN0b3IiLCJzZWxlY3RvciIsInRvcG9sb2d5RGVzY3JpcHRpb24iLCJvcGVyYXRpb24iLCJuYW1lIiwiU0VSVkVSX1NFTEVDVElPTl9TVEFSVEVEIiwibWVzc2FnZSIsImVycm9yIiwiU0VSVkVSX1NFTEVDVElPTl9GQUlMRUQiLCJmYWlsdXJlIiwiYWRkcmVzcyIsIlNFUlZFUl9TRUxFQ1RJT05fU1VDQ0VFREVEIiwiaG9zdCIsInBvcnQiLCJIb3N0QWRkcmVzcyIsImZyb21TdHJpbmciLCJ0b0hvc3RQb3J0Iiwic2VydmVySG9zdCIsInNlcnZlclBvcnQiLCJyZW1haW5pbmdUaW1lTVMiLCJXQUlUSU5HX0ZPUl9TVUlUQUJMRV9TRVJWRVIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/server_selection_events.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/srv_polling.js":
/*!******************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/srv_polling.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SrvPoller = exports.SrvPollingEvent = void 0;\nconst dns = __webpack_require__(/*! dns */ \"dns\");\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\n/**\n * @internal\n * @category Event\n */ class SrvPollingEvent {\n    constructor(srvRecords){\n        this.srvRecords = srvRecords;\n    }\n    hostnames() {\n        return new Set(this.srvRecords.map((r)=>utils_1.HostAddress.fromSrvRecord(r).toString()));\n    }\n}\nexports.SrvPollingEvent = SrvPollingEvent;\n/** @internal */ class SrvPoller extends mongo_types_1.TypedEventEmitter {\n    constructor(options){\n        super();\n        if (!options || !options.srvHost) {\n            throw new error_1.MongoRuntimeError(\"Options for SrvPoller must exist and include srvHost\");\n        }\n        this.srvHost = options.srvHost;\n        this.srvMaxHosts = options.srvMaxHosts ?? 0;\n        this.srvServiceName = options.srvServiceName ?? \"mongodb\";\n        this.rescanSrvIntervalMS = 60000;\n        this.heartbeatFrequencyMS = options.heartbeatFrequencyMS ?? 10000;\n        this.haMode = false;\n        this.generation = 0;\n        this._timeout = undefined;\n    }\n    get srvAddress() {\n        return `_${this.srvServiceName}._tcp.${this.srvHost}`;\n    }\n    get intervalMS() {\n        return this.haMode ? this.heartbeatFrequencyMS : this.rescanSrvIntervalMS;\n    }\n    start() {\n        if (!this._timeout) {\n            this.schedule();\n        }\n    }\n    stop() {\n        if (this._timeout) {\n            (0, timers_1.clearTimeout)(this._timeout);\n            this.generation += 1;\n            this._timeout = undefined;\n        }\n    }\n    // TODO(NODE-4994): implement new logging logic for SrvPoller failures\n    schedule() {\n        if (this._timeout) {\n            (0, timers_1.clearTimeout)(this._timeout);\n        }\n        this._timeout = (0, timers_1.setTimeout)(()=>{\n            this._poll().catch(()=>null);\n        }, this.intervalMS);\n    }\n    success(srvRecords) {\n        this.haMode = false;\n        this.schedule();\n        this.emit(SrvPoller.SRV_RECORD_DISCOVERY, new SrvPollingEvent(srvRecords));\n    }\n    failure() {\n        this.haMode = true;\n        this.schedule();\n    }\n    async _poll() {\n        const generation = this.generation;\n        let srvRecords;\n        try {\n            srvRecords = await dns.promises.resolveSrv(this.srvAddress);\n        } catch (dnsError) {\n            this.failure();\n            return;\n        }\n        if (generation !== this.generation) {\n            return;\n        }\n        const finalAddresses = [];\n        for (const record of srvRecords){\n            if ((0, utils_1.matchesParentDomain)(record.name, this.srvHost)) {\n                finalAddresses.push(record);\n            }\n        }\n        if (!finalAddresses.length) {\n            this.failure();\n            return;\n        }\n        this.success(finalAddresses);\n    }\n}\n/** @event */ SrvPoller.SRV_RECORD_DISCOVERY = \"srvRecordDiscovery\";\nexports.SrvPoller = SrvPoller; //# sourceMappingURL=srv_polling.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS9zcnZfcG9sbGluZy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUJBQWlCLEdBQUdBLHVCQUF1QixHQUFHLEtBQUs7QUFDbkQsTUFBTUksTUFBTUMsbUJBQU9BLENBQUMsZ0JBQUs7QUFDekIsTUFBTUMsV0FBV0QsbUJBQU9BLENBQUMsc0JBQVE7QUFDakMsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUcsZ0JBQWdCSCxtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDOUMsTUFBTUksVUFBVUosbUJBQU9BLENBQUMsMkRBQVU7QUFDbEM7OztDQUdDLEdBQ0QsTUFBTUY7SUFDRk8sWUFBWUMsVUFBVSxDQUFFO1FBQ3BCLElBQUksQ0FBQ0EsVUFBVSxHQUFHQTtJQUN0QjtJQUNBQyxZQUFZO1FBQ1IsT0FBTyxJQUFJQyxJQUFJLElBQUksQ0FBQ0YsVUFBVSxDQUFDRyxHQUFHLENBQUNDLENBQUFBLElBQUtOLFFBQVFPLFdBQVcsQ0FBQ0MsYUFBYSxDQUFDRixHQUFHRyxRQUFRO0lBQ3pGO0FBQ0o7QUFDQWxCLHVCQUF1QixHQUFHRztBQUMxQixjQUFjLEdBQ2QsTUFBTUQsa0JBQWtCTSxjQUFjVyxpQkFBaUI7SUFDbkRULFlBQVlVLE9BQU8sQ0FBRTtRQUNqQixLQUFLO1FBQ0wsSUFBSSxDQUFDQSxXQUFXLENBQUNBLFFBQVFDLE9BQU8sRUFBRTtZQUM5QixNQUFNLElBQUlkLFFBQVFlLGlCQUFpQixDQUFDO1FBQ3hDO1FBQ0EsSUFBSSxDQUFDRCxPQUFPLEdBQUdELFFBQVFDLE9BQU87UUFDOUIsSUFBSSxDQUFDRSxXQUFXLEdBQUdILFFBQVFHLFdBQVcsSUFBSTtRQUMxQyxJQUFJLENBQUNDLGNBQWMsR0FBR0osUUFBUUksY0FBYyxJQUFJO1FBQ2hELElBQUksQ0FBQ0MsbUJBQW1CLEdBQUc7UUFDM0IsSUFBSSxDQUFDQyxvQkFBb0IsR0FBR04sUUFBUU0sb0JBQW9CLElBQUk7UUFDNUQsSUFBSSxDQUFDQyxNQUFNLEdBQUc7UUFDZCxJQUFJLENBQUNDLFVBQVUsR0FBRztRQUNsQixJQUFJLENBQUNDLFFBQVEsR0FBR0M7SUFDcEI7SUFDQSxJQUFJQyxhQUFhO1FBQ2IsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNQLGNBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDSCxPQUFPLENBQUMsQ0FBQztJQUN6RDtJQUNBLElBQUlXLGFBQWE7UUFDYixPQUFPLElBQUksQ0FBQ0wsTUFBTSxHQUFHLElBQUksQ0FBQ0Qsb0JBQW9CLEdBQUcsSUFBSSxDQUFDRCxtQkFBbUI7SUFDN0U7SUFDQVEsUUFBUTtRQUNKLElBQUksQ0FBQyxJQUFJLENBQUNKLFFBQVEsRUFBRTtZQUNoQixJQUFJLENBQUNLLFFBQVE7UUFDakI7SUFDSjtJQUNBQyxPQUFPO1FBQ0gsSUFBSSxJQUFJLENBQUNOLFFBQVEsRUFBRTtZQUNkLElBQUd2QixTQUFTOEIsWUFBWSxFQUFFLElBQUksQ0FBQ1AsUUFBUTtZQUN4QyxJQUFJLENBQUNELFVBQVUsSUFBSTtZQUNuQixJQUFJLENBQUNDLFFBQVEsR0FBR0M7UUFDcEI7SUFDSjtJQUNBLHNFQUFzRTtJQUN0RUksV0FBVztRQUNQLElBQUksSUFBSSxDQUFDTCxRQUFRLEVBQUU7WUFDZCxJQUFHdkIsU0FBUzhCLFlBQVksRUFBRSxJQUFJLENBQUNQLFFBQVE7UUFDNUM7UUFDQSxJQUFJLENBQUNBLFFBQVEsR0FBRyxDQUFDLEdBQUd2QixTQUFTK0IsVUFBVSxFQUFFO1lBQ3JDLElBQUksQ0FBQ0MsS0FBSyxHQUFHQyxLQUFLLENBQUMsSUFBTTtRQUM3QixHQUFHLElBQUksQ0FBQ1AsVUFBVTtJQUN0QjtJQUNBUSxRQUFRN0IsVUFBVSxFQUFFO1FBQ2hCLElBQUksQ0FBQ2dCLE1BQU0sR0FBRztRQUNkLElBQUksQ0FBQ08sUUFBUTtRQUNiLElBQUksQ0FBQ08sSUFBSSxDQUFDdkMsVUFBVXdDLG9CQUFvQixFQUFFLElBQUl2QyxnQkFBZ0JRO0lBQ2xFO0lBQ0FnQyxVQUFVO1FBQ04sSUFBSSxDQUFDaEIsTUFBTSxHQUFHO1FBQ2QsSUFBSSxDQUFDTyxRQUFRO0lBQ2pCO0lBQ0EsTUFBTUksUUFBUTtRQUNWLE1BQU1WLGFBQWEsSUFBSSxDQUFDQSxVQUFVO1FBQ2xDLElBQUlqQjtRQUNKLElBQUk7WUFDQUEsYUFBYSxNQUFNUCxJQUFJd0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDZCxVQUFVO1FBQzlELEVBQ0EsT0FBT2UsVUFBVTtZQUNiLElBQUksQ0FBQ0gsT0FBTztZQUNaO1FBQ0o7UUFDQSxJQUFJZixlQUFlLElBQUksQ0FBQ0EsVUFBVSxFQUFFO1lBQ2hDO1FBQ0o7UUFDQSxNQUFNbUIsaUJBQWlCLEVBQUU7UUFDekIsS0FBSyxNQUFNQyxVQUFVckMsV0FBWTtZQUM3QixJQUFJLENBQUMsR0FBR0YsUUFBUXdDLG1CQUFtQixFQUFFRCxPQUFPRSxJQUFJLEVBQUUsSUFBSSxDQUFDN0IsT0FBTyxHQUFHO2dCQUM3RDBCLGVBQWVJLElBQUksQ0FBQ0g7WUFDeEI7UUFDSjtRQUNBLElBQUksQ0FBQ0QsZUFBZUssTUFBTSxFQUFFO1lBQ3hCLElBQUksQ0FBQ1QsT0FBTztZQUNaO1FBQ0o7UUFDQSxJQUFJLENBQUNILE9BQU8sQ0FBQ087SUFDakI7QUFDSjtBQUNBLFdBQVcsR0FDWDdDLFVBQVV3QyxvQkFBb0IsR0FBRztBQUNqQzFDLGlCQUFpQixHQUFHRSxXQUNwQix1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3NkYW0vc3J2X3BvbGxpbmcuanM/ODAzZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU3J2UG9sbGVyID0gZXhwb3J0cy5TcnZQb2xsaW5nRXZlbnQgPSB2b2lkIDA7XG5jb25zdCBkbnMgPSByZXF1aXJlKFwiZG5zXCIpO1xuY29uc3QgdGltZXJzXzEgPSByZXF1aXJlKFwidGltZXJzXCIpO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuLi9lcnJvclwiKTtcbmNvbnN0IG1vbmdvX3R5cGVzXzEgPSByZXF1aXJlKFwiLi4vbW9uZ29fdHlwZXNcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEBjYXRlZ29yeSBFdmVudFxuICovXG5jbGFzcyBTcnZQb2xsaW5nRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHNydlJlY29yZHMpIHtcbiAgICAgICAgdGhpcy5zcnZSZWNvcmRzID0gc3J2UmVjb3JkcztcbiAgICB9XG4gICAgaG9zdG5hbWVzKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNldCh0aGlzLnNydlJlY29yZHMubWFwKHIgPT4gdXRpbHNfMS5Ib3N0QWRkcmVzcy5mcm9tU3J2UmVjb3JkKHIpLnRvU3RyaW5nKCkpKTtcbiAgICB9XG59XG5leHBvcnRzLlNydlBvbGxpbmdFdmVudCA9IFNydlBvbGxpbmdFdmVudDtcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFNydlBvbGxlciBleHRlbmRzIG1vbmdvX3R5cGVzXzEuVHlwZWRFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8ICFvcHRpb25zLnNydkhvc3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdPcHRpb25zIGZvciBTcnZQb2xsZXIgbXVzdCBleGlzdCBhbmQgaW5jbHVkZSBzcnZIb3N0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zcnZIb3N0ID0gb3B0aW9ucy5zcnZIb3N0O1xuICAgICAgICB0aGlzLnNydk1heEhvc3RzID0gb3B0aW9ucy5zcnZNYXhIb3N0cyA/PyAwO1xuICAgICAgICB0aGlzLnNydlNlcnZpY2VOYW1lID0gb3B0aW9ucy5zcnZTZXJ2aWNlTmFtZSA/PyAnbW9uZ29kYic7XG4gICAgICAgIHRoaXMucmVzY2FuU3J2SW50ZXJ2YWxNUyA9IDYwMDAwO1xuICAgICAgICB0aGlzLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TID0gb3B0aW9ucy5oZWFydGJlYXRGcmVxdWVuY3lNUyA/PyAxMDAwMDtcbiAgICAgICAgdGhpcy5oYU1vZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nZW5lcmF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5fdGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IHNydkFkZHJlc3MoKSB7XG4gICAgICAgIHJldHVybiBgXyR7dGhpcy5zcnZTZXJ2aWNlTmFtZX0uX3RjcC4ke3RoaXMuc3J2SG9zdH1gO1xuICAgIH1cbiAgICBnZXQgaW50ZXJ2YWxNUygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFNb2RlID8gdGhpcy5oZWFydGJlYXRGcmVxdWVuY3lNUyA6IHRoaXMucmVzY2FuU3J2SW50ZXJ2YWxNUztcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5fdGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLl90aW1lb3V0KSB7XG4gICAgICAgICAgICAoMCwgdGltZXJzXzEuY2xlYXJUaW1lb3V0KSh0aGlzLl90aW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGlvbiArPSAxO1xuICAgICAgICAgICAgdGhpcy5fdGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBUT0RPKE5PREUtNDk5NCk6IGltcGxlbWVudCBuZXcgbG9nZ2luZyBsb2dpYyBmb3IgU3J2UG9sbGVyIGZhaWx1cmVzXG4gICAgc2NoZWR1bGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl90aW1lb3V0KSB7XG4gICAgICAgICAgICAoMCwgdGltZXJzXzEuY2xlYXJUaW1lb3V0KSh0aGlzLl90aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90aW1lb3V0ID0gKDAsIHRpbWVyc18xLnNldFRpbWVvdXQpKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3BvbGwoKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICAgICAgfSwgdGhpcy5pbnRlcnZhbE1TKTtcbiAgICB9XG4gICAgc3VjY2VzcyhzcnZSZWNvcmRzKSB7XG4gICAgICAgIHRoaXMuaGFNb2RlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcbiAgICAgICAgdGhpcy5lbWl0KFNydlBvbGxlci5TUlZfUkVDT1JEX0RJU0NPVkVSWSwgbmV3IFNydlBvbGxpbmdFdmVudChzcnZSZWNvcmRzKSk7XG4gICAgfVxuICAgIGZhaWx1cmUoKSB7XG4gICAgICAgIHRoaXMuaGFNb2RlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZSgpO1xuICAgIH1cbiAgICBhc3luYyBfcG9sbCgpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbiA9IHRoaXMuZ2VuZXJhdGlvbjtcbiAgICAgICAgbGV0IHNydlJlY29yZHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzcnZSZWNvcmRzID0gYXdhaXQgZG5zLnByb21pc2VzLnJlc29sdmVTcnYodGhpcy5zcnZBZGRyZXNzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZG5zRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZW5lcmF0aW9uICE9PSB0aGlzLmdlbmVyYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaW5hbEFkZHJlc3NlcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBzcnZSZWNvcmRzKSB7XG4gICAgICAgICAgICBpZiAoKDAsIHV0aWxzXzEubWF0Y2hlc1BhcmVudERvbWFpbikocmVjb3JkLm5hbWUsIHRoaXMuc3J2SG9zdCkpIHtcbiAgICAgICAgICAgICAgICBmaW5hbEFkZHJlc3Nlcy5wdXNoKHJlY29yZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmaW5hbEFkZHJlc3Nlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3VjY2VzcyhmaW5hbEFkZHJlc3Nlcyk7XG4gICAgfVxufVxuLyoqIEBldmVudCAqL1xuU3J2UG9sbGVyLlNSVl9SRUNPUkRfRElTQ09WRVJZID0gJ3NydlJlY29yZERpc2NvdmVyeSc7XG5leHBvcnRzLlNydlBvbGxlciA9IFNydlBvbGxlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNydl9wb2xsaW5nLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlNydlBvbGxlciIsIlNydlBvbGxpbmdFdmVudCIsImRucyIsInJlcXVpcmUiLCJ0aW1lcnNfMSIsImVycm9yXzEiLCJtb25nb190eXBlc18xIiwidXRpbHNfMSIsImNvbnN0cnVjdG9yIiwic3J2UmVjb3JkcyIsImhvc3RuYW1lcyIsIlNldCIsIm1hcCIsInIiLCJIb3N0QWRkcmVzcyIsImZyb21TcnZSZWNvcmQiLCJ0b1N0cmluZyIsIlR5cGVkRXZlbnRFbWl0dGVyIiwib3B0aW9ucyIsInNydkhvc3QiLCJNb25nb1J1bnRpbWVFcnJvciIsInNydk1heEhvc3RzIiwic3J2U2VydmljZU5hbWUiLCJyZXNjYW5TcnZJbnRlcnZhbE1TIiwiaGVhcnRiZWF0RnJlcXVlbmN5TVMiLCJoYU1vZGUiLCJnZW5lcmF0aW9uIiwiX3RpbWVvdXQiLCJ1bmRlZmluZWQiLCJzcnZBZGRyZXNzIiwiaW50ZXJ2YWxNUyIsInN0YXJ0Iiwic2NoZWR1bGUiLCJzdG9wIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIl9wb2xsIiwiY2F0Y2giLCJzdWNjZXNzIiwiZW1pdCIsIlNSVl9SRUNPUkRfRElTQ09WRVJZIiwiZmFpbHVyZSIsInByb21pc2VzIiwicmVzb2x2ZVNydiIsImRuc0Vycm9yIiwiZmluYWxBZGRyZXNzZXMiLCJyZWNvcmQiLCJtYXRjaGVzUGFyZW50RG9tYWluIiwibmFtZSIsInB1c2giLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/srv_polling.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/topology.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/topology.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ServerCapabilities = exports.Topology = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst connection_string_1 = __webpack_require__(/*! ../connection_string */ \"(ssr)/./node_modules/mongodb/lib/connection_string.js\");\nconst constants_1 = __webpack_require__(/*! ../constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_logger_1 = __webpack_require__(/*! ../mongo_logger */ \"(ssr)/./node_modules/mongodb/lib/mongo_logger.js\");\nconst mongo_types_1 = __webpack_require__(/*! ../mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst read_preference_1 = __webpack_require__(/*! ../read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst events_1 = __webpack_require__(/*! ./events */ \"(ssr)/./node_modules/mongodb/lib/sdam/events.js\");\nconst server_1 = __webpack_require__(/*! ./server */ \"(ssr)/./node_modules/mongodb/lib/sdam/server.js\");\nconst server_description_1 = __webpack_require__(/*! ./server_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\");\nconst server_selection_1 = __webpack_require__(/*! ./server_selection */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection.js\");\nconst server_selection_events_1 = __webpack_require__(/*! ./server_selection_events */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_selection_events.js\");\nconst srv_polling_1 = __webpack_require__(/*! ./srv_polling */ \"(ssr)/./node_modules/mongodb/lib/sdam/srv_polling.js\");\nconst topology_description_1 = __webpack_require__(/*! ./topology_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/topology_description.js\");\n// Global state\nlet globalTopologyCounter = 0;\nconst stateTransition = (0, utils_1.makeStateMachine)({\n    [common_1.STATE_CLOSED]: [\n        common_1.STATE_CLOSED,\n        common_1.STATE_CONNECTING\n    ],\n    [common_1.STATE_CONNECTING]: [\n        common_1.STATE_CONNECTING,\n        common_1.STATE_CLOSING,\n        common_1.STATE_CONNECTED,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CONNECTED]: [\n        common_1.STATE_CONNECTED,\n        common_1.STATE_CLOSING,\n        common_1.STATE_CLOSED\n    ],\n    [common_1.STATE_CLOSING]: [\n        common_1.STATE_CLOSING,\n        common_1.STATE_CLOSED\n    ]\n});\n/** @internal */ const kCancelled = Symbol(\"cancelled\");\n/** @internal */ const kWaitQueue = Symbol(\"waitQueue\");\n/**\n * A container of server instances representing a connection to a MongoDB topology.\n * @internal\n */ class Topology extends mongo_types_1.TypedEventEmitter {\n    /**\n     * @param seedlist - a list of HostAddress instances to connect to\n     */ constructor(client, seeds, options){\n        super();\n        this.client = client;\n        this.selectServerAsync = (0, util_1.promisify)((selector, options, callback)=>this.selectServer(selector, options, callback));\n        // Options should only be undefined in tests, MongoClient will always have defined options\n        options = options ?? {\n            hosts: [\n                utils_1.HostAddress.fromString(\"localhost:27017\")\n            ],\n            ...Object.fromEntries(connection_string_1.DEFAULT_OPTIONS.entries()),\n            ...Object.fromEntries(connection_string_1.FEATURE_FLAGS.entries())\n        };\n        if (typeof seeds === \"string\") {\n            seeds = [\n                utils_1.HostAddress.fromString(seeds)\n            ];\n        } else if (!Array.isArray(seeds)) {\n            seeds = [\n                seeds\n            ];\n        }\n        const seedlist = [];\n        for (const seed of seeds){\n            if (typeof seed === \"string\") {\n                seedlist.push(utils_1.HostAddress.fromString(seed));\n            } else if (seed instanceof utils_1.HostAddress) {\n                seedlist.push(seed);\n            } else {\n                // FIXME(NODE-3483): May need to be a MongoParseError\n                throw new error_1.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(seed)}`);\n            }\n        }\n        const topologyType = topologyTypeFromOptions(options);\n        const topologyId = globalTopologyCounter++;\n        const selectedHosts = options.srvMaxHosts == null || options.srvMaxHosts === 0 || options.srvMaxHosts >= seedlist.length ? seedlist : (0, utils_1.shuffle)(seedlist, options.srvMaxHosts);\n        const serverDescriptions = new Map();\n        for (const hostAddress of selectedHosts){\n            serverDescriptions.set(hostAddress.toString(), new server_description_1.ServerDescription(hostAddress));\n        }\n        this[kWaitQueue] = new utils_1.List();\n        this.s = {\n            // the id of this topology\n            id: topologyId,\n            // passed in options\n            options,\n            // initial seedlist of servers to connect to\n            seedlist,\n            // initial state\n            state: common_1.STATE_CLOSED,\n            // the topology description\n            description: new topology_description_1.TopologyDescription(topologyType, serverDescriptions, options.replicaSet, undefined, undefined, undefined, options),\n            serverSelectionTimeoutMS: options.serverSelectionTimeoutMS,\n            heartbeatFrequencyMS: options.heartbeatFrequencyMS,\n            minHeartbeatFrequencyMS: options.minHeartbeatFrequencyMS,\n            // a map of server instances to normalized addresses\n            servers: new Map(),\n            credentials: options?.credentials,\n            clusterTime: undefined,\n            // timer management\n            connectionTimers: new Set(),\n            detectShardedTopology: (ev)=>this.detectShardedTopology(ev),\n            detectSrvRecords: (ev)=>this.detectSrvRecords(ev)\n        };\n        this.mongoLogger = client.mongoLogger;\n        this.component = \"topology\";\n        if (options.srvHost && !options.loadBalanced) {\n            this.s.srvPoller = options.srvPoller ?? new srv_polling_1.SrvPoller({\n                heartbeatFrequencyMS: this.s.heartbeatFrequencyMS,\n                srvHost: options.srvHost,\n                srvMaxHosts: options.srvMaxHosts,\n                srvServiceName: options.srvServiceName\n            });\n            this.on(Topology.TOPOLOGY_DESCRIPTION_CHANGED, this.s.detectShardedTopology);\n        }\n    }\n    detectShardedTopology(event) {\n        const previousType = event.previousDescription.type;\n        const newType = event.newDescription.type;\n        const transitionToSharded = previousType !== common_1.TopologyType.Sharded && newType === common_1.TopologyType.Sharded;\n        const srvListeners = this.s.srvPoller?.listeners(srv_polling_1.SrvPoller.SRV_RECORD_DISCOVERY);\n        const listeningToSrvPolling = !!srvListeners?.includes(this.s.detectSrvRecords);\n        if (transitionToSharded && !listeningToSrvPolling) {\n            this.s.srvPoller?.on(srv_polling_1.SrvPoller.SRV_RECORD_DISCOVERY, this.s.detectSrvRecords);\n            this.s.srvPoller?.start();\n        }\n    }\n    detectSrvRecords(ev) {\n        const previousTopologyDescription = this.s.description;\n        this.s.description = this.s.description.updateFromSrvPollingEvent(ev, this.s.options.srvMaxHosts);\n        if (this.s.description === previousTopologyDescription) {\n            // Nothing changed, so return\n            return;\n        }\n        updateServers(this);\n        this.emitAndLog(Topology.TOPOLOGY_DESCRIPTION_CHANGED, new events_1.TopologyDescriptionChangedEvent(this.s.id, previousTopologyDescription, this.s.description));\n    }\n    /**\n     * @returns A `TopologyDescription` for this topology\n     */ get description() {\n        return this.s.description;\n    }\n    get loadBalanced() {\n        return this.s.options.loadBalanced;\n    }\n    get serverApi() {\n        return this.s.options.serverApi;\n    }\n    get capabilities() {\n        return new ServerCapabilities(this.lastHello());\n    }\n    connect(options, callback) {\n        if (typeof options === \"function\") callback = options, options = {};\n        options = options ?? {};\n        if (this.s.state === common_1.STATE_CONNECTED) {\n            if (typeof callback === \"function\") {\n                callback();\n            }\n            return;\n        }\n        stateTransition(this, common_1.STATE_CONNECTING);\n        // emit SDAM monitoring events\n        this.emitAndLog(Topology.TOPOLOGY_OPENING, new events_1.TopologyOpeningEvent(this.s.id));\n        // emit an event for the topology change\n        this.emitAndLog(Topology.TOPOLOGY_DESCRIPTION_CHANGED, new events_1.TopologyDescriptionChangedEvent(this.s.id, new topology_description_1.TopologyDescription(common_1.TopologyType.Unknown), this.s.description));\n        // connect all known servers, then attempt server selection to connect\n        const serverDescriptions = Array.from(this.s.description.servers.values());\n        this.s.servers = new Map(serverDescriptions.map((serverDescription)=>[\n                serverDescription.address,\n                createAndConnectServer(this, serverDescription)\n            ]));\n        // In load balancer mode we need to fake a server description getting\n        // emitted from the monitor, since the monitor doesn't exist.\n        if (this.s.options.loadBalanced) {\n            for (const description of serverDescriptions){\n                const newDescription = new server_description_1.ServerDescription(description.hostAddress, undefined, {\n                    loadBalanced: this.s.options.loadBalanced\n                });\n                this.serverUpdateHandler(newDescription);\n            }\n        }\n        const exitWithError = (error)=>callback ? callback(error) : this.emit(Topology.ERROR, error);\n        const readPreference = options.readPreference ?? read_preference_1.ReadPreference.primary;\n        const selectServerOptions = {\n            operationName: \"ping\",\n            ...options\n        };\n        this.selectServer((0, server_selection_1.readPreferenceServerSelector)(readPreference), selectServerOptions, (err, server)=>{\n            if (err) {\n                this.close();\n                return exitWithError(err);\n            }\n            const skipPingOnConnect = this.s.options[Symbol.for(\"@@mdb.skipPingOnConnect\")] === true;\n            if (!skipPingOnConnect && server && this.s.credentials) {\n                server.command((0, utils_1.ns)(\"admin.$cmd\"), {\n                    ping: 1\n                }, {}).then(()=>{\n                    stateTransition(this, common_1.STATE_CONNECTED);\n                    this.emit(Topology.OPEN, this);\n                    this.emit(Topology.CONNECT, this);\n                    callback?.(undefined, this);\n                }, exitWithError);\n                return;\n            }\n            stateTransition(this, common_1.STATE_CONNECTED);\n            this.emit(Topology.OPEN, this);\n            this.emit(Topology.CONNECT, this);\n            callback?.(undefined, this);\n        });\n    }\n    /** Close this topology */ close() {\n        if (this.s.state === common_1.STATE_CLOSED || this.s.state === common_1.STATE_CLOSING) {\n            return;\n        }\n        for (const server of this.s.servers.values()){\n            destroyServer(server, this);\n        }\n        this.s.servers.clear();\n        stateTransition(this, common_1.STATE_CLOSING);\n        drainWaitQueue(this[kWaitQueue], new error_1.MongoTopologyClosedError());\n        (0, common_1.drainTimerQueue)(this.s.connectionTimers);\n        if (this.s.srvPoller) {\n            this.s.srvPoller.stop();\n            this.s.srvPoller.removeListener(srv_polling_1.SrvPoller.SRV_RECORD_DISCOVERY, this.s.detectSrvRecords);\n        }\n        this.removeListener(Topology.TOPOLOGY_DESCRIPTION_CHANGED, this.s.detectShardedTopology);\n        stateTransition(this, common_1.STATE_CLOSED);\n        // emit an event for close\n        this.emitAndLog(Topology.TOPOLOGY_CLOSED, new events_1.TopologyClosedEvent(this.s.id));\n    }\n    /**\n     * Selects a server according to the selection predicate provided\n     *\n     * @param selector - An optional selector to select servers by, defaults to a random selection within a latency window\n     * @param options - Optional settings related to server selection\n     * @param callback - The callback used to indicate success or failure\n     * @returns An instance of a `Server` meeting the criteria of the predicate provided\n     */ selectServer(selector, options, callback) {\n        let serverSelector;\n        if (typeof selector !== \"function\") {\n            if (typeof selector === \"string\") {\n                serverSelector = (0, server_selection_1.readPreferenceServerSelector)(read_preference_1.ReadPreference.fromString(selector));\n            } else {\n                let readPreference;\n                if (selector instanceof read_preference_1.ReadPreference) {\n                    readPreference = selector;\n                } else {\n                    read_preference_1.ReadPreference.translate(options);\n                    readPreference = options.readPreference || read_preference_1.ReadPreference.primary;\n                }\n                serverSelector = (0, server_selection_1.readPreferenceServerSelector)(readPreference);\n            }\n        } else {\n            serverSelector = selector;\n        }\n        options = {\n            serverSelectionTimeoutMS: this.s.serverSelectionTimeoutMS,\n            ...options\n        };\n        if (this.client.mongoLogger?.willLog(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, mongo_logger_1.SeverityLevel.DEBUG)) {\n            this.client.mongoLogger?.debug(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, new server_selection_events_1.ServerSelectionStartedEvent(selector, this.description, options.operationName));\n        }\n        const isSharded = this.description.type === common_1.TopologyType.Sharded;\n        const session = options.session;\n        const transaction = session && session.transaction;\n        if (isSharded && transaction && transaction.server) {\n            if (this.client.mongoLogger?.willLog(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, mongo_logger_1.SeverityLevel.DEBUG)) {\n                this.client.mongoLogger?.debug(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, new server_selection_events_1.ServerSelectionSucceededEvent(selector, this.description, transaction.server.pool.address, options.operationName));\n            }\n            callback(undefined, transaction.server);\n            return;\n        }\n        const waitQueueMember = {\n            serverSelector,\n            topologyDescription: this.description,\n            mongoLogger: this.client.mongoLogger,\n            transaction,\n            callback,\n            timeoutController: new utils_1.TimeoutController(options.serverSelectionTimeoutMS),\n            startTime: (0, utils_1.now)(),\n            operationName: options.operationName,\n            waitingLogged: false,\n            previousServer: options.previousServer\n        };\n        waitQueueMember.timeoutController.signal.addEventListener(\"abort\", ()=>{\n            waitQueueMember[kCancelled] = true;\n            waitQueueMember.timeoutController.clear();\n            const timeoutError = new error_1.MongoServerSelectionError(`Server selection timed out after ${options.serverSelectionTimeoutMS} ms`, this.description);\n            if (this.client.mongoLogger?.willLog(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, mongo_logger_1.SeverityLevel.DEBUG)) {\n                this.client.mongoLogger?.debug(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, new server_selection_events_1.ServerSelectionFailedEvent(selector, this.description, timeoutError, options.operationName));\n            }\n            waitQueueMember.callback(timeoutError);\n        });\n        this[kWaitQueue].push(waitQueueMember);\n        processWaitQueue(this);\n    }\n    /**\n     * Update the internal TopologyDescription with a ServerDescription\n     *\n     * @param serverDescription - The server to update in the internal list of server descriptions\n     */ serverUpdateHandler(serverDescription) {\n        if (!this.s.description.hasServer(serverDescription.address)) {\n            return;\n        }\n        // ignore this server update if its from an outdated topologyVersion\n        if (isStaleServerDescription(this.s.description, serverDescription)) {\n            return;\n        }\n        // these will be used for monitoring events later\n        const previousTopologyDescription = this.s.description;\n        const previousServerDescription = this.s.description.servers.get(serverDescription.address);\n        if (!previousServerDescription) {\n            return;\n        }\n        // Driver Sessions Spec: \"Whenever a driver receives a cluster time from\n        // a server it MUST compare it to the current highest seen cluster time\n        // for the deployment. If the new cluster time is higher than the\n        // highest seen cluster time it MUST become the new highest seen cluster\n        // time. Two cluster times are compared using only the BsonTimestamp\n        // value of the clusterTime embedded field.\"\n        const clusterTime = serverDescription.$clusterTime;\n        if (clusterTime) {\n            (0, common_1._advanceClusterTime)(this, clusterTime);\n        }\n        // If we already know all the information contained in this updated description, then\n        // we don't need to emit SDAM events, but still need to update the description, in order\n        // to keep client-tracked attributes like last update time and round trip time up to date\n        const equalDescriptions = previousServerDescription && previousServerDescription.equals(serverDescription);\n        // first update the TopologyDescription\n        this.s.description = this.s.description.update(serverDescription);\n        if (this.s.description.compatibilityError) {\n            this.emit(Topology.ERROR, new error_1.MongoCompatibilityError(this.s.description.compatibilityError));\n            return;\n        }\n        // emit monitoring events for this change\n        if (!equalDescriptions) {\n            const newDescription = this.s.description.servers.get(serverDescription.address);\n            if (newDescription) {\n                this.emit(Topology.SERVER_DESCRIPTION_CHANGED, new events_1.ServerDescriptionChangedEvent(this.s.id, serverDescription.address, previousServerDescription, newDescription));\n            }\n        }\n        // update server list from updated descriptions\n        updateServers(this, serverDescription);\n        // attempt to resolve any outstanding server selection attempts\n        if (this[kWaitQueue].length > 0) {\n            processWaitQueue(this);\n        }\n        if (!equalDescriptions) {\n            this.emitAndLog(Topology.TOPOLOGY_DESCRIPTION_CHANGED, new events_1.TopologyDescriptionChangedEvent(this.s.id, previousTopologyDescription, this.s.description));\n        }\n    }\n    auth(credentials, callback) {\n        if (typeof credentials === \"function\") callback = credentials, credentials = undefined;\n        if (typeof callback === \"function\") callback(undefined, true);\n    }\n    get clientMetadata() {\n        return this.s.options.metadata;\n    }\n    isConnected() {\n        return this.s.state === common_1.STATE_CONNECTED;\n    }\n    isDestroyed() {\n        return this.s.state === common_1.STATE_CLOSED;\n    }\n    // NOTE: There are many places in code where we explicitly check the last hello\n    //       to do feature support detection. This should be done any other way, but for\n    //       now we will just return the first hello seen, which should suffice.\n    lastHello() {\n        const serverDescriptions = Array.from(this.description.servers.values());\n        if (serverDescriptions.length === 0) return {};\n        const sd = serverDescriptions.filter((sd)=>sd.type !== common_1.ServerType.Unknown)[0];\n        const result = sd || {\n            maxWireVersion: this.description.commonWireVersion\n        };\n        return result;\n    }\n    get commonWireVersion() {\n        return this.description.commonWireVersion;\n    }\n    get logicalSessionTimeoutMinutes() {\n        return this.description.logicalSessionTimeoutMinutes;\n    }\n    get clusterTime() {\n        return this.s.clusterTime;\n    }\n    set clusterTime(clusterTime) {\n        this.s.clusterTime = clusterTime;\n    }\n}\n/** @event */ Topology.SERVER_OPENING = constants_1.SERVER_OPENING;\n/** @event */ Topology.SERVER_CLOSED = constants_1.SERVER_CLOSED;\n/** @event */ Topology.SERVER_DESCRIPTION_CHANGED = constants_1.SERVER_DESCRIPTION_CHANGED;\n/** @event */ Topology.TOPOLOGY_OPENING = constants_1.TOPOLOGY_OPENING;\n/** @event */ Topology.TOPOLOGY_CLOSED = constants_1.TOPOLOGY_CLOSED;\n/** @event */ Topology.TOPOLOGY_DESCRIPTION_CHANGED = constants_1.TOPOLOGY_DESCRIPTION_CHANGED;\n/** @event */ Topology.ERROR = constants_1.ERROR;\n/** @event */ Topology.OPEN = constants_1.OPEN;\n/** @event */ Topology.CONNECT = constants_1.CONNECT;\n/** @event */ Topology.CLOSE = constants_1.CLOSE;\n/** @event */ Topology.TIMEOUT = constants_1.TIMEOUT;\nexports.Topology = Topology;\n/** Destroys a server, and removes all event listeners from the instance */ function destroyServer(server, topology) {\n    for (const event of constants_1.LOCAL_SERVER_EVENTS){\n        server.removeAllListeners(event);\n    }\n    server.destroy();\n    topology.emitAndLog(Topology.SERVER_CLOSED, new events_1.ServerClosedEvent(topology.s.id, server.description.address));\n    for (const event of constants_1.SERVER_RELAY_EVENTS){\n        server.removeAllListeners(event);\n    }\n}\n/** Predicts the TopologyType from options */ function topologyTypeFromOptions(options) {\n    if (options?.directConnection) {\n        return common_1.TopologyType.Single;\n    }\n    if (options?.replicaSet) {\n        return common_1.TopologyType.ReplicaSetNoPrimary;\n    }\n    if (options?.loadBalanced) {\n        return common_1.TopologyType.LoadBalanced;\n    }\n    return common_1.TopologyType.Unknown;\n}\n/**\n * Creates new server instances and attempts to connect them\n *\n * @param topology - The topology that this server belongs to\n * @param serverDescription - The description for the server to initialize and connect to\n */ function createAndConnectServer(topology, serverDescription) {\n    topology.emitAndLog(Topology.SERVER_OPENING, new events_1.ServerOpeningEvent(topology.s.id, serverDescription.address));\n    const server = new server_1.Server(topology, serverDescription, topology.s.options);\n    for (const event of constants_1.SERVER_RELAY_EVENTS){\n        server.on(event, (e)=>topology.emit(event, e));\n    }\n    server.on(server_1.Server.DESCRIPTION_RECEIVED, (description)=>topology.serverUpdateHandler(description));\n    server.connect();\n    return server;\n}\n/**\n * @param topology - Topology to update.\n * @param incomingServerDescription - New server description.\n */ function updateServers(topology, incomingServerDescription) {\n    // update the internal server's description\n    if (incomingServerDescription && topology.s.servers.has(incomingServerDescription.address)) {\n        const server = topology.s.servers.get(incomingServerDescription.address);\n        if (server) {\n            server.s.description = incomingServerDescription;\n            if (incomingServerDescription.error instanceof error_1.MongoError && incomingServerDescription.error.hasErrorLabel(error_1.MongoErrorLabel.ResetPool)) {\n                const interruptInUseConnections = incomingServerDescription.error.hasErrorLabel(error_1.MongoErrorLabel.InterruptInUseConnections);\n                server.pool.clear({\n                    interruptInUseConnections\n                });\n            } else if (incomingServerDescription.error == null) {\n                const newTopologyType = topology.s.description.type;\n                const shouldMarkPoolReady = incomingServerDescription.isDataBearing || incomingServerDescription.type !== common_1.ServerType.Unknown && newTopologyType === common_1.TopologyType.Single;\n                if (shouldMarkPoolReady) {\n                    server.pool.ready();\n                }\n            }\n        }\n    }\n    // add new servers for all descriptions we currently don't know about locally\n    for (const serverDescription of topology.description.servers.values()){\n        if (!topology.s.servers.has(serverDescription.address)) {\n            const server = createAndConnectServer(topology, serverDescription);\n            topology.s.servers.set(serverDescription.address, server);\n        }\n    }\n    // for all servers no longer known, remove their descriptions and destroy their instances\n    for (const entry of topology.s.servers){\n        const serverAddress = entry[0];\n        if (topology.description.hasServer(serverAddress)) {\n            continue;\n        }\n        if (!topology.s.servers.has(serverAddress)) {\n            continue;\n        }\n        const server = topology.s.servers.get(serverAddress);\n        topology.s.servers.delete(serverAddress);\n        // prepare server for garbage collection\n        if (server) {\n            destroyServer(server, topology);\n        }\n    }\n}\nfunction drainWaitQueue(queue, err) {\n    while(queue.length){\n        const waitQueueMember = queue.shift();\n        if (!waitQueueMember) {\n            continue;\n        }\n        waitQueueMember.timeoutController.clear();\n        if (!waitQueueMember[kCancelled]) {\n            if (err) {\n                if (waitQueueMember.mongoLogger?.willLog(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, mongo_logger_1.SeverityLevel.DEBUG)) {\n                    waitQueueMember.mongoLogger?.debug(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, new server_selection_events_1.ServerSelectionFailedEvent(waitQueueMember.serverSelector, waitQueueMember.topologyDescription, err, waitQueueMember.operationName));\n                }\n            }\n            waitQueueMember.callback(err);\n        }\n    }\n}\nfunction processWaitQueue(topology) {\n    if (topology.s.state === common_1.STATE_CLOSED) {\n        drainWaitQueue(topology[kWaitQueue], new error_1.MongoTopologyClosedError());\n        return;\n    }\n    const isSharded = topology.description.type === common_1.TopologyType.Sharded;\n    const serverDescriptions = Array.from(topology.description.servers.values());\n    const membersToProcess = topology[kWaitQueue].length;\n    for(let i = 0; i < membersToProcess; ++i){\n        const waitQueueMember = topology[kWaitQueue].shift();\n        if (!waitQueueMember) {\n            continue;\n        }\n        if (waitQueueMember[kCancelled]) {\n            continue;\n        }\n        let selectedDescriptions;\n        try {\n            const serverSelector = waitQueueMember.serverSelector;\n            const previousServer = waitQueueMember.previousServer;\n            selectedDescriptions = serverSelector ? serverSelector(topology.description, serverDescriptions, previousServer ? [\n                previousServer\n            ] : []) : serverDescriptions;\n        } catch (e) {\n            waitQueueMember.timeoutController.clear();\n            if (topology.client.mongoLogger?.willLog(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, mongo_logger_1.SeverityLevel.DEBUG)) {\n                topology.client.mongoLogger?.debug(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, new server_selection_events_1.ServerSelectionFailedEvent(waitQueueMember.serverSelector, topology.description, e, waitQueueMember.operationName));\n            }\n            waitQueueMember.callback(e);\n            continue;\n        }\n        let selectedServer;\n        if (selectedDescriptions.length === 0) {\n            if (!waitQueueMember.waitingLogged) {\n                if (topology.client.mongoLogger?.willLog(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, mongo_logger_1.SeverityLevel.INFORMATIONAL)) {\n                    topology.client.mongoLogger?.info(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, new server_selection_events_1.WaitingForSuitableServerEvent(waitQueueMember.serverSelector, topology.description, topology.s.serverSelectionTimeoutMS !== 0 ? topology.s.serverSelectionTimeoutMS - ((0, utils_1.now)() - waitQueueMember.startTime) : -1, waitQueueMember.operationName));\n                }\n                waitQueueMember.waitingLogged = true;\n            }\n            topology[kWaitQueue].push(waitQueueMember);\n            continue;\n        } else if (selectedDescriptions.length === 1) {\n            selectedServer = topology.s.servers.get(selectedDescriptions[0].address);\n        } else {\n            const descriptions = (0, utils_1.shuffle)(selectedDescriptions, 2);\n            const server1 = topology.s.servers.get(descriptions[0].address);\n            const server2 = topology.s.servers.get(descriptions[1].address);\n            selectedServer = server1 && server2 && server1.s.operationCount < server2.s.operationCount ? server1 : server2;\n        }\n        if (!selectedServer) {\n            const error = new error_1.MongoServerSelectionError(\"server selection returned a server description but the server was not found in the topology\", topology.description);\n            if (topology.client.mongoLogger?.willLog(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, mongo_logger_1.SeverityLevel.DEBUG)) {\n                topology.client.mongoLogger?.debug(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, new server_selection_events_1.ServerSelectionFailedEvent(waitQueueMember.serverSelector, topology.description, error, waitQueueMember.operationName));\n            }\n            waitQueueMember.callback(error);\n            return;\n        }\n        const transaction = waitQueueMember.transaction;\n        if (isSharded && transaction && transaction.isActive && selectedServer) {\n            transaction.pinServer(selectedServer);\n        }\n        waitQueueMember.timeoutController.clear();\n        if (topology.client.mongoLogger?.willLog(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, mongo_logger_1.SeverityLevel.DEBUG)) {\n            topology.client.mongoLogger?.debug(mongo_logger_1.MongoLoggableComponent.SERVER_SELECTION, new server_selection_events_1.ServerSelectionSucceededEvent(waitQueueMember.serverSelector, waitQueueMember.topologyDescription, selectedServer.pool.address, waitQueueMember.operationName));\n        }\n        waitQueueMember.callback(undefined, selectedServer);\n    }\n    if (topology[kWaitQueue].length > 0) {\n        // ensure all server monitors attempt monitoring soon\n        for (const [, server] of topology.s.servers){\n            process.nextTick(function scheduleServerCheck() {\n                return server.requestCheck();\n            });\n        }\n    }\n}\nfunction isStaleServerDescription(topologyDescription, incomingServerDescription) {\n    const currentServerDescription = topologyDescription.servers.get(incomingServerDescription.address);\n    const currentTopologyVersion = currentServerDescription?.topologyVersion;\n    return (0, server_description_1.compareTopologyVersion)(currentTopologyVersion, incomingServerDescription.topologyVersion) > 0;\n}\n/** @public */ class ServerCapabilities {\n    constructor(hello){\n        this.minWireVersion = hello.minWireVersion || 0;\n        this.maxWireVersion = hello.maxWireVersion || 0;\n    }\n    get hasAggregationCursor() {\n        return this.maxWireVersion >= 1;\n    }\n    get hasWriteCommands() {\n        return this.maxWireVersion >= 2;\n    }\n    get hasTextSearch() {\n        return this.minWireVersion >= 0;\n    }\n    get hasAuthCommands() {\n        return this.maxWireVersion >= 1;\n    }\n    get hasListCollectionsCommand() {\n        return this.maxWireVersion >= 3;\n    }\n    get hasListIndexesCommand() {\n        return this.maxWireVersion >= 3;\n    }\n    get supportsSnapshotReads() {\n        return this.maxWireVersion >= 13;\n    }\n    get commandsTakeWriteConcern() {\n        return this.maxWireVersion >= 5;\n    }\n    get commandsTakeCollation() {\n        return this.maxWireVersion >= 5;\n    }\n}\nexports.ServerCapabilities = ServerCapabilities; //# sourceMappingURL=topology.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS90b3BvbG9neS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMEJBQTBCLEdBQUdBLGdCQUFnQixHQUFHLEtBQUs7QUFDckQsTUFBTUksU0FBU0MsbUJBQU9BLENBQUMsa0JBQU07QUFDN0IsTUFBTUMsc0JBQXNCRCxtQkFBT0EsQ0FBQyxtRkFBc0I7QUFDMUQsTUFBTUUsY0FBY0YsbUJBQU9BLENBQUMsbUVBQWM7QUFDMUMsTUFBTUcsVUFBVUgsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTUksaUJBQWlCSixtQkFBT0EsQ0FBQyx5RUFBaUI7QUFDaEQsTUFBTUssZ0JBQWdCTCxtQkFBT0EsQ0FBQyx1RUFBZ0I7QUFDOUMsTUFBTU0sb0JBQW9CTixtQkFBT0EsQ0FBQywrRUFBb0I7QUFDdEQsTUFBTU8sVUFBVVAsbUJBQU9BLENBQUMsMkRBQVU7QUFDbEMsTUFBTVEsV0FBV1IsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVMsV0FBV1QsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVUsV0FBV1YsbUJBQU9BLENBQUMsaUVBQVU7QUFDbkMsTUFBTVcsdUJBQXVCWCxtQkFBT0EsQ0FBQyx5RkFBc0I7QUFDM0QsTUFBTVkscUJBQXFCWixtQkFBT0EsQ0FBQyxxRkFBb0I7QUFDdkQsTUFBTWEsNEJBQTRCYixtQkFBT0EsQ0FBQyxtR0FBMkI7QUFDckUsTUFBTWMsZ0JBQWdCZCxtQkFBT0EsQ0FBQywyRUFBZTtBQUM3QyxNQUFNZSx5QkFBeUJmLG1CQUFPQSxDQUFDLDZGQUF3QjtBQUMvRCxlQUFlO0FBQ2YsSUFBSWdCLHdCQUF3QjtBQUM1QixNQUFNQyxrQkFBa0IsQ0FBQyxHQUFHVixRQUFRVyxnQkFBZ0IsRUFBRTtJQUNsRCxDQUFDVixTQUFTVyxZQUFZLENBQUMsRUFBRTtRQUFDWCxTQUFTVyxZQUFZO1FBQUVY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Q3pELE9BQVEsQ0FBQyxHQUFHNVAscUJBQXFCNlAsc0JBQXNCLEVBQUVGLHdCQUF3Qm5DLDBCQUEwQm9DLGVBQWUsSUFBSTtBQUNsSTtBQUNBLFlBQVksR0FDWixNQUFNMVE7SUFDRjhCLFlBQVk4TyxLQUFLLENBQUU7UUFDZixJQUFJLENBQUNDLGNBQWMsR0FBR0QsTUFBTUMsY0FBYyxJQUFJO1FBQzlDLElBQUksQ0FBQzVELGNBQWMsR0FBRzJELE1BQU0zRCxjQUFjLElBQUk7SUFDbEQ7SUFDQSxJQUFJNkQsdUJBQXVCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDN0QsY0FBYyxJQUFJO0lBQ2xDO0lBQ0EsSUFBSThELG1CQUFtQjtRQUNuQixPQUFPLElBQUksQ0FBQzlELGNBQWMsSUFBSTtJQUNsQztJQUNBLElBQUkrRCxnQkFBZ0I7UUFDaEIsT0FBTyxJQUFJLENBQUNILGNBQWMsSUFBSTtJQUNsQztJQUNBLElBQUlJLGtCQUFrQjtRQUNsQixPQUFPLElBQUksQ0FBQ2hFLGNBQWMsSUFBSTtJQUNsQztJQUNBLElBQUlpRSw0QkFBNEI7UUFDNUIsT0FBTyxJQUFJLENBQUNqRSxjQUFjLElBQUk7SUFDbEM7SUFDQSxJQUFJa0Usd0JBQXdCO1FBQ3hCLE9BQU8sSUFBSSxDQUFDbEUsY0FBYyxJQUFJO0lBQ2xDO0lBQ0EsSUFBSW1FLHdCQUF3QjtRQUN4QixPQUFPLElBQUksQ0FBQ25FLGNBQWMsSUFBSTtJQUNsQztJQUNBLElBQUlvRSwyQkFBMkI7UUFDM0IsT0FBTyxJQUFJLENBQUNwRSxjQUFjLElBQUk7SUFDbEM7SUFDQSxJQUFJcUUsd0JBQXdCO1FBQ3hCLE9BQU8sSUFBSSxDQUFDckUsY0FBYyxJQUFJO0lBQ2xDO0FBQ0o7QUFDQW5OLDBCQUEwQixHQUFHRSxvQkFDN0Isb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9zZGFtL3RvcG9sb2d5LmpzP2IzMGQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNlcnZlckNhcGFiaWxpdGllcyA9IGV4cG9ydHMuVG9wb2xvZ3kgPSB2b2lkIDA7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwidXRpbFwiKTtcbmNvbnN0IGNvbm5lY3Rpb25fc3RyaW5nXzEgPSByZXF1aXJlKFwiLi4vY29ubmVjdGlvbl9zdHJpbmdcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4uL2Vycm9yXCIpO1xuY29uc3QgbW9uZ29fbG9nZ2VyXzEgPSByZXF1aXJlKFwiLi4vbW9uZ29fbG9nZ2VyXCIpO1xuY29uc3QgbW9uZ29fdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9tb25nb190eXBlc1wiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4uL3JlYWRfcHJlZmVyZW5jZVwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKTtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcIi4vZXZlbnRzXCIpO1xuY29uc3Qgc2VydmVyXzEgPSByZXF1aXJlKFwiLi9zZXJ2ZXJcIik7XG5jb25zdCBzZXJ2ZXJfZGVzY3JpcHRpb25fMSA9IHJlcXVpcmUoXCIuL3NlcnZlcl9kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHNlcnZlcl9zZWxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuL3NlcnZlcl9zZWxlY3Rpb25cIik7XG5jb25zdCBzZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50c18xID0gcmVxdWlyZShcIi4vc2VydmVyX3NlbGVjdGlvbl9ldmVudHNcIik7XG5jb25zdCBzcnZfcG9sbGluZ18xID0gcmVxdWlyZShcIi4vc3J2X3BvbGxpbmdcIik7XG5jb25zdCB0b3BvbG9neV9kZXNjcmlwdGlvbl8xID0gcmVxdWlyZShcIi4vdG9wb2xvZ3lfZGVzY3JpcHRpb25cIik7XG4vLyBHbG9iYWwgc3RhdGVcbmxldCBnbG9iYWxUb3BvbG9neUNvdW50ZXIgPSAwO1xuY29uc3Qgc3RhdGVUcmFuc2l0aW9uID0gKDAsIHV0aWxzXzEubWFrZVN0YXRlTWFjaGluZSkoe1xuICAgIFtjb21tb25fMS5TVEFURV9DTE9TRURdOiBbY29tbW9uXzEuU1RBVEVfQ0xPU0VELCBjb21tb25fMS5TVEFURV9DT05ORUNUSU5HXSxcbiAgICBbY29tbW9uXzEuU1RBVEVfQ09OTkVDVElOR106IFtjb21tb25fMS5TVEFURV9DT05ORUNUSU5HLCBjb21tb25fMS5TVEFURV9DTE9TSU5HLCBjb21tb25fMS5TVEFURV9DT05ORUNURUQsIGNvbW1vbl8xLlNUQVRFX0NMT1NFRF0sXG4gICAgW2NvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRF06IFtjb21tb25fMS5TVEFURV9DT05ORUNURUQsIGNvbW1vbl8xLlNUQVRFX0NMT1NJTkcsIGNvbW1vbl8xLlNUQVRFX0NMT1NFRF0sXG4gICAgW2NvbW1vbl8xLlNUQVRFX0NMT1NJTkddOiBbY29tbW9uXzEuU1RBVEVfQ0xPU0lORywgY29tbW9uXzEuU1RBVEVfQ0xPU0VEXVxufSk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrQ2FuY2VsbGVkID0gU3ltYm9sKCdjYW5jZWxsZWQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtXYWl0UXVldWUgPSBTeW1ib2woJ3dhaXRRdWV1ZScpO1xuLyoqXG4gKiBBIGNvbnRhaW5lciBvZiBzZXJ2ZXIgaW5zdGFuY2VzIHJlcHJlc2VudGluZyBhIGNvbm5lY3Rpb24gdG8gYSBNb25nb0RCIHRvcG9sb2d5LlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFRvcG9sb2d5IGV4dGVuZHMgbW9uZ29fdHlwZXNfMS5UeXBlZEV2ZW50RW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlZWRsaXN0IC0gYSBsaXN0IG9mIEhvc3RBZGRyZXNzIGluc3RhbmNlcyB0byBjb25uZWN0IHRvXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2xpZW50LCBzZWVkcywgb3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgICAgICAgdGhpcy5zZWxlY3RTZXJ2ZXJBc3luYyA9ICgwLCB1dGlsXzEucHJvbWlzaWZ5KSgoc2VsZWN0b3IsIG9wdGlvbnMsIGNhbGxiYWNrKSA9PiB0aGlzLnNlbGVjdFNlcnZlcihzZWxlY3Rvciwgb3B0aW9ucywgY2FsbGJhY2spKTtcbiAgICAgICAgLy8gT3B0aW9ucyBzaG91bGQgb25seSBiZSB1bmRlZmluZWQgaW4gdGVzdHMsIE1vbmdvQ2xpZW50IHdpbGwgYWx3YXlzIGhhdmUgZGVmaW5lZCBvcHRpb25zXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8/IHtcbiAgICAgICAgICAgIGhvc3RzOiBbdXRpbHNfMS5Ib3N0QWRkcmVzcy5mcm9tU3RyaW5nKCdsb2NhbGhvc3Q6MjcwMTcnKV0sXG4gICAgICAgICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMoY29ubmVjdGlvbl9zdHJpbmdfMS5ERUZBVUxUX09QVElPTlMuZW50cmllcygpKSxcbiAgICAgICAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhjb25uZWN0aW9uX3N0cmluZ18xLkZFQVRVUkVfRkxBR1MuZW50cmllcygpKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHNlZWRzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2VlZHMgPSBbdXRpbHNfMS5Ib3N0QWRkcmVzcy5mcm9tU3RyaW5nKHNlZWRzKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoc2VlZHMpKSB7XG4gICAgICAgICAgICBzZWVkcyA9IFtzZWVkc107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VlZGxpc3QgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzZWVkIG9mIHNlZWRzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNlZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgc2VlZGxpc3QucHVzaCh1dGlsc18xLkhvc3RBZGRyZXNzLmZyb21TdHJpbmcoc2VlZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VlZCBpbnN0YW5jZW9mIHV0aWxzXzEuSG9zdEFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICBzZWVkbGlzdC5wdXNoKHNlZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRklYTUUoTk9ERS0zNDgzKTogTWF5IG5lZWQgdG8gYmUgYSBNb25nb1BhcnNlRXJyb3JcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgVG9wb2xvZ3kgY2Fubm90IGJlIGNvbnN0cnVjdGVkIGZyb20gJHtKU09OLnN0cmluZ2lmeShzZWVkKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b3BvbG9neVR5cGUgPSB0b3BvbG9neVR5cGVGcm9tT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgdG9wb2xvZ3lJZCA9IGdsb2JhbFRvcG9sb2d5Q291bnRlcisrO1xuICAgICAgICBjb25zdCBzZWxlY3RlZEhvc3RzID0gb3B0aW9ucy5zcnZNYXhIb3N0cyA9PSBudWxsIHx8XG4gICAgICAgICAgICBvcHRpb25zLnNydk1heEhvc3RzID09PSAwIHx8XG4gICAgICAgICAgICBvcHRpb25zLnNydk1heEhvc3RzID49IHNlZWRsaXN0Lmxlbmd0aFxuICAgICAgICAgICAgPyBzZWVkbGlzdFxuICAgICAgICAgICAgOiAoMCwgdXRpbHNfMS5zaHVmZmxlKShzZWVkbGlzdCwgb3B0aW9ucy5zcnZNYXhIb3N0cyk7XG4gICAgICAgIGNvbnN0IHNlcnZlckRlc2NyaXB0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChjb25zdCBob3N0QWRkcmVzcyBvZiBzZWxlY3RlZEhvc3RzKSB7XG4gICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuc2V0KGhvc3RBZGRyZXNzLnRvU3RyaW5nKCksIG5ldyBzZXJ2ZXJfZGVzY3JpcHRpb25fMS5TZXJ2ZXJEZXNjcmlwdGlvbihob3N0QWRkcmVzcykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNba1dhaXRRdWV1ZV0gPSBuZXcgdXRpbHNfMS5MaXN0KCk7XG4gICAgICAgIHRoaXMucyA9IHtcbiAgICAgICAgICAgIC8vIHRoZSBpZCBvZiB0aGlzIHRvcG9sb2d5XG4gICAgICAgICAgICBpZDogdG9wb2xvZ3lJZCxcbiAgICAgICAgICAgIC8vIHBhc3NlZCBpbiBvcHRpb25zXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgLy8gaW5pdGlhbCBzZWVkbGlzdCBvZiBzZXJ2ZXJzIHRvIGNvbm5lY3QgdG9cbiAgICAgICAgICAgIHNlZWRsaXN0LFxuICAgICAgICAgICAgLy8gaW5pdGlhbCBzdGF0ZVxuICAgICAgICAgICAgc3RhdGU6IGNvbW1vbl8xLlNUQVRFX0NMT1NFRCxcbiAgICAgICAgICAgIC8vIHRoZSB0b3BvbG9neSBkZXNjcmlwdGlvblxuICAgICAgICAgICAgZGVzY3JpcHRpb246IG5ldyB0b3BvbG9neV9kZXNjcmlwdGlvbl8xLlRvcG9sb2d5RGVzY3JpcHRpb24odG9wb2xvZ3lUeXBlLCBzZXJ2ZXJEZXNjcmlwdGlvbnMsIG9wdGlvbnMucmVwbGljYVNldCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3B0aW9ucyksXG4gICAgICAgICAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IG9wdGlvbnMuc2VydmVyU2VsZWN0aW9uVGltZW91dE1TLFxuICAgICAgICAgICAgaGVhcnRiZWF0RnJlcXVlbmN5TVM6IG9wdGlvbnMuaGVhcnRiZWF0RnJlcXVlbmN5TVMsXG4gICAgICAgICAgICBtaW5IZWFydGJlYXRGcmVxdWVuY3lNUzogb3B0aW9ucy5taW5IZWFydGJlYXRGcmVxdWVuY3lNUyxcbiAgICAgICAgICAgIC8vIGEgbWFwIG9mIHNlcnZlciBpbnN0YW5jZXMgdG8gbm9ybWFsaXplZCBhZGRyZXNzZXNcbiAgICAgICAgICAgIHNlcnZlcnM6IG5ldyBNYXAoKSxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBvcHRpb25zPy5jcmVkZW50aWFscyxcbiAgICAgICAgICAgIGNsdXN0ZXJUaW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAvLyB0aW1lciBtYW5hZ2VtZW50XG4gICAgICAgICAgICBjb25uZWN0aW9uVGltZXJzOiBuZXcgU2V0KCksXG4gICAgICAgICAgICBkZXRlY3RTaGFyZGVkVG9wb2xvZ3k6IGV2ID0+IHRoaXMuZGV0ZWN0U2hhcmRlZFRvcG9sb2d5KGV2KSxcbiAgICAgICAgICAgIGRldGVjdFNydlJlY29yZHM6IGV2ID0+IHRoaXMuZGV0ZWN0U3J2UmVjb3JkcyhldilcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tb25nb0xvZ2dlciA9IGNsaWVudC5tb25nb0xvZ2dlcjtcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSAndG9wb2xvZ3knO1xuICAgICAgICBpZiAob3B0aW9ucy5zcnZIb3N0ICYmICFvcHRpb25zLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgdGhpcy5zLnNydlBvbGxlciA9XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5zcnZQb2xsZXIgPz9cbiAgICAgICAgICAgICAgICAgICAgbmV3IHNydl9wb2xsaW5nXzEuU3J2UG9sbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEZyZXF1ZW5jeU1TOiB0aGlzLnMuaGVhcnRiZWF0RnJlcXVlbmN5TVMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzcnZIb3N0OiBvcHRpb25zLnNydkhvc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBzcnZNYXhIb3N0czogb3B0aW9ucy5zcnZNYXhIb3N0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNydlNlcnZpY2VOYW1lOiBvcHRpb25zLnNydlNlcnZpY2VOYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vbihUb3BvbG9neS5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VELCB0aGlzLnMuZGV0ZWN0U2hhcmRlZFRvcG9sb2d5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRlY3RTaGFyZGVkVG9wb2xvZ3koZXZlbnQpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNUeXBlID0gZXZlbnQucHJldmlvdXNEZXNjcmlwdGlvbi50eXBlO1xuICAgICAgICBjb25zdCBuZXdUeXBlID0gZXZlbnQubmV3RGVzY3JpcHRpb24udHlwZTtcbiAgICAgICAgY29uc3QgdHJhbnNpdGlvblRvU2hhcmRlZCA9IHByZXZpb3VzVHlwZSAhPT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNoYXJkZWQgJiYgbmV3VHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNoYXJkZWQ7XG4gICAgICAgIGNvbnN0IHNydkxpc3RlbmVycyA9IHRoaXMucy5zcnZQb2xsZXI/Lmxpc3RlbmVycyhzcnZfcG9sbGluZ18xLlNydlBvbGxlci5TUlZfUkVDT1JEX0RJU0NPVkVSWSk7XG4gICAgICAgIGNvbnN0IGxpc3RlbmluZ1RvU3J2UG9sbGluZyA9ICEhc3J2TGlzdGVuZXJzPy5pbmNsdWRlcyh0aGlzLnMuZGV0ZWN0U3J2UmVjb3Jkcyk7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uVG9TaGFyZGVkICYmICFsaXN0ZW5pbmdUb1NydlBvbGxpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucy5zcnZQb2xsZXI/Lm9uKHNydl9wb2xsaW5nXzEuU3J2UG9sbGVyLlNSVl9SRUNPUkRfRElTQ09WRVJZLCB0aGlzLnMuZGV0ZWN0U3J2UmVjb3Jkcyk7XG4gICAgICAgICAgICB0aGlzLnMuc3J2UG9sbGVyPy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRldGVjdFNydlJlY29yZHMoZXYpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNUb3BvbG9neURlc2NyaXB0aW9uID0gdGhpcy5zLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnMuZGVzY3JpcHRpb24gPSB0aGlzLnMuZGVzY3JpcHRpb24udXBkYXRlRnJvbVNydlBvbGxpbmdFdmVudChldiwgdGhpcy5zLm9wdGlvbnMuc3J2TWF4SG9zdHMpO1xuICAgICAgICBpZiAodGhpcy5zLmRlc2NyaXB0aW9uID09PSBwcmV2aW91c1RvcG9sb2d5RGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIC8vIE5vdGhpbmcgY2hhbmdlZCwgc28gcmV0dXJuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlU2VydmVycyh0aGlzKTtcbiAgICAgICAgdGhpcy5lbWl0QW5kTG9nKFRvcG9sb2d5LlRPUE9MT0dZX0RFU0NSSVBUSU9OX0NIQU5HRUQsIG5ldyBldmVudHNfMS5Ub3BvbG9neURlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50KHRoaXMucy5pZCwgcHJldmlvdXNUb3BvbG9neURlc2NyaXB0aW9uLCB0aGlzLnMuZGVzY3JpcHRpb24pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgQSBgVG9wb2xvZ3lEZXNjcmlwdGlvbmAgZm9yIHRoaXMgdG9wb2xvZ3lcbiAgICAgKi9cbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIGdldCBsb2FkQmFsYW5jZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMub3B0aW9ucy5sb2FkQmFsYW5jZWQ7XG4gICAgfVxuICAgIGdldCBzZXJ2ZXJBcGkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMub3B0aW9ucy5zZXJ2ZXJBcGk7XG4gICAgfVxuICAgIGdldCBjYXBhYmlsaXRpZXMoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VydmVyQ2FwYWJpbGl0aWVzKHRoaXMubGFzdEhlbGxvKCkpO1xuICAgIH1cbiAgICBjb25uZWN0KG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIChjYWxsYmFjayA9IG9wdGlvbnMpLCAob3B0aW9ucyA9IHt9KTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGlmICh0aGlzLnMuc3RhdGUgPT09IGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RJTkcpO1xuICAgICAgICAvLyBlbWl0IFNEQU0gbW9uaXRvcmluZyBldmVudHNcbiAgICAgICAgdGhpcy5lbWl0QW5kTG9nKFRvcG9sb2d5LlRPUE9MT0dZX09QRU5JTkcsIG5ldyBldmVudHNfMS5Ub3BvbG9neU9wZW5pbmdFdmVudCh0aGlzLnMuaWQpKTtcbiAgICAgICAgLy8gZW1pdCBhbiBldmVudCBmb3IgdGhlIHRvcG9sb2d5IGNoYW5nZVxuICAgICAgICB0aGlzLmVtaXRBbmRMb2coVG9wb2xvZ3kuVE9QT0xPR1lfREVTQ1JJUFRJT05fQ0hBTkdFRCwgbmV3IGV2ZW50c18xLlRvcG9sb2d5RGVzY3JpcHRpb25DaGFuZ2VkRXZlbnQodGhpcy5zLmlkLCBuZXcgdG9wb2xvZ3lfZGVzY3JpcHRpb25fMS5Ub3BvbG9neURlc2NyaXB0aW9uKGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5Vbmtub3duKSwgLy8gaW5pdGlhbCBpcyBhbHdheXMgVW5rbm93blxuICAgICAgICB0aGlzLnMuZGVzY3JpcHRpb24pKTtcbiAgICAgICAgLy8gY29ubmVjdCBhbGwga25vd24gc2VydmVycywgdGhlbiBhdHRlbXB0IHNlcnZlciBzZWxlY3Rpb24gdG8gY29ubmVjdFxuICAgICAgICBjb25zdCBzZXJ2ZXJEZXNjcmlwdGlvbnMgPSBBcnJheS5mcm9tKHRoaXMucy5kZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKTtcbiAgICAgICAgdGhpcy5zLnNlcnZlcnMgPSBuZXcgTWFwKHNlcnZlckRlc2NyaXB0aW9ucy5tYXAoc2VydmVyRGVzY3JpcHRpb24gPT4gW1xuICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcyxcbiAgICAgICAgICAgIGNyZWF0ZUFuZENvbm5lY3RTZXJ2ZXIodGhpcywgc2VydmVyRGVzY3JpcHRpb24pXG4gICAgICAgIF0pKTtcbiAgICAgICAgLy8gSW4gbG9hZCBiYWxhbmNlciBtb2RlIHdlIG5lZWQgdG8gZmFrZSBhIHNlcnZlciBkZXNjcmlwdGlvbiBnZXR0aW5nXG4gICAgICAgIC8vIGVtaXR0ZWQgZnJvbSB0aGUgbW9uaXRvciwgc2luY2UgdGhlIG1vbml0b3IgZG9lc24ndCBleGlzdC5cbiAgICAgICAgaWYgKHRoaXMucy5vcHRpb25zLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBkZXNjcmlwdGlvbiBvZiBzZXJ2ZXJEZXNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdEZXNjcmlwdGlvbiA9IG5ldyBzZXJ2ZXJfZGVzY3JpcHRpb25fMS5TZXJ2ZXJEZXNjcmlwdGlvbihkZXNjcmlwdGlvbi5ob3N0QWRkcmVzcywgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRCYWxhbmNlZDogdGhpcy5zLm9wdGlvbnMubG9hZEJhbGFuY2VkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJVcGRhdGVIYW5kbGVyKG5ld0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleGl0V2l0aEVycm9yID0gKGVycm9yKSA9PiBjYWxsYmFjayA/IGNhbGxiYWNrKGVycm9yKSA6IHRoaXMuZW1pdChUb3BvbG9neS5FUlJPUiwgZXJyb3IpO1xuICAgICAgICBjb25zdCByZWFkUHJlZmVyZW5jZSA9IG9wdGlvbnMucmVhZFByZWZlcmVuY2UgPz8gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeTtcbiAgICAgICAgY29uc3Qgc2VsZWN0U2VydmVyT3B0aW9ucyA9IHsgb3BlcmF0aW9uTmFtZTogJ3BpbmcnLCAuLi5vcHRpb25zIH07XG4gICAgICAgIHRoaXMuc2VsZWN0U2VydmVyKCgwLCBzZXJ2ZXJfc2VsZWN0aW9uXzEucmVhZFByZWZlcmVuY2VTZXJ2ZXJTZWxlY3RvcikocmVhZFByZWZlcmVuY2UpLCBzZWxlY3RTZXJ2ZXJPcHRpb25zLCAoZXJyLCBzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4aXRXaXRoRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNraXBQaW5nT25Db25uZWN0ID0gdGhpcy5zLm9wdGlvbnNbU3ltYm9sLmZvcignQEBtZGIuc2tpcFBpbmdPbkNvbm5lY3QnKV0gPT09IHRydWU7XG4gICAgICAgICAgICBpZiAoIXNraXBQaW5nT25Db25uZWN0ICYmIHNlcnZlciAmJiB0aGlzLnMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXIuY29tbWFuZCgoMCwgdXRpbHNfMS5ucykoJ2FkbWluLiRjbWQnKSwgeyBwaW5nOiAxIH0sIHt9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChUb3BvbG9neS5PUEVOLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KFRvcG9sb2d5LkNPTk5FQ1QsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaz8uKHVuZGVmaW5lZCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfSwgZXhpdFdpdGhFcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIGNvbW1vbl8xLlNUQVRFX0NPTk5FQ1RFRCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVG9wb2xvZ3kuT1BFTiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoVG9wb2xvZ3kuQ09OTkVDVCwgdGhpcyk7XG4gICAgICAgICAgICBjYWxsYmFjaz8uKHVuZGVmaW5lZCwgdGhpcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQ2xvc2UgdGhpcyB0b3BvbG9neSAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5zLnN0YXRlID09PSBjb21tb25fMS5TVEFURV9DTE9TRUQgfHwgdGhpcy5zLnN0YXRlID09PSBjb21tb25fMS5TVEFURV9DTE9TSU5HKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBzZXJ2ZXIgb2YgdGhpcy5zLnNlcnZlcnMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIGRlc3Ryb3lTZXJ2ZXIoc2VydmVyLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnMuc2VydmVycy5jbGVhcigpO1xuICAgICAgICBzdGF0ZVRyYW5zaXRpb24odGhpcywgY29tbW9uXzEuU1RBVEVfQ0xPU0lORyk7XG4gICAgICAgIGRyYWluV2FpdFF1ZXVlKHRoaXNba1dhaXRRdWV1ZV0sIG5ldyBlcnJvcl8xLk1vbmdvVG9wb2xvZ3lDbG9zZWRFcnJvcigpKTtcbiAgICAgICAgKDAsIGNvbW1vbl8xLmRyYWluVGltZXJRdWV1ZSkodGhpcy5zLmNvbm5lY3Rpb25UaW1lcnMpO1xuICAgICAgICBpZiAodGhpcy5zLnNydlBvbGxlcikge1xuICAgICAgICAgICAgdGhpcy5zLnNydlBvbGxlci5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLnMuc3J2UG9sbGVyLnJlbW92ZUxpc3RlbmVyKHNydl9wb2xsaW5nXzEuU3J2UG9sbGVyLlNSVl9SRUNPUkRfRElTQ09WRVJZLCB0aGlzLnMuZGV0ZWN0U3J2UmVjb3Jkcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihUb3BvbG9neS5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VELCB0aGlzLnMuZGV0ZWN0U2hhcmRlZFRvcG9sb2d5KTtcbiAgICAgICAgc3RhdGVUcmFuc2l0aW9uKHRoaXMsIGNvbW1vbl8xLlNUQVRFX0NMT1NFRCk7XG4gICAgICAgIC8vIGVtaXQgYW4gZXZlbnQgZm9yIGNsb3NlXG4gICAgICAgIHRoaXMuZW1pdEFuZExvZyhUb3BvbG9neS5UT1BPTE9HWV9DTE9TRUQsIG5ldyBldmVudHNfMS5Ub3BvbG9neUNsb3NlZEV2ZW50KHRoaXMucy5pZCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWxlY3RzIGEgc2VydmVyIGFjY29yZGluZyB0byB0aGUgc2VsZWN0aW9uIHByZWRpY2F0ZSBwcm92aWRlZFxuICAgICAqXG4gICAgICogQHBhcmFtIHNlbGVjdG9yIC0gQW4gb3B0aW9uYWwgc2VsZWN0b3IgdG8gc2VsZWN0IHNlcnZlcnMgYnksIGRlZmF1bHRzIHRvIGEgcmFuZG9tIHNlbGVjdGlvbiB3aXRoaW4gYSBsYXRlbmN5IHdpbmRvd1xuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgcmVsYXRlZCB0byBzZXJ2ZXIgc2VsZWN0aW9uXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIHVzZWQgdG8gaW5kaWNhdGUgc3VjY2VzcyBvciBmYWlsdXJlXG4gICAgICogQHJldHVybnMgQW4gaW5zdGFuY2Ugb2YgYSBgU2VydmVyYCBtZWV0aW5nIHRoZSBjcml0ZXJpYSBvZiB0aGUgcHJlZGljYXRlIHByb3ZpZGVkXG4gICAgICovXG4gICAgc2VsZWN0U2VydmVyKHNlbGVjdG9yLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgICBsZXQgc2VydmVyU2VsZWN0b3I7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgc2VydmVyU2VsZWN0b3IgPSAoMCwgc2VydmVyX3NlbGVjdGlvbl8xLnJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IpKHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLmZyb21TdHJpbmcoc2VsZWN0b3IpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCByZWFkUHJlZmVyZW5jZTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZSkge1xuICAgICAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZSA9IHNlbGVjdG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UudHJhbnNsYXRlKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICByZWFkUHJlZmVyZW5jZSA9IG9wdGlvbnMucmVhZFByZWZlcmVuY2UgfHwgcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VydmVyU2VsZWN0b3IgPSAoMCwgc2VydmVyX3NlbGVjdGlvbl8xLnJlYWRQcmVmZXJlbmNlU2VydmVyU2VsZWN0b3IpKHJlYWRQcmVmZXJlbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlcnZlclNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IHsgc2VydmVyU2VsZWN0aW9uVGltZW91dE1TOiB0aGlzLnMuc2VydmVyU2VsZWN0aW9uVGltZW91dE1TLCAuLi5vcHRpb25zIH07XG4gICAgICAgIGlmICh0aGlzLmNsaWVudC5tb25nb0xvZ2dlcj8ud2lsbExvZyhtb25nb19sb2dnZXJfMS5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50LlNFUlZFUl9TRUxFQ1RJT04sIG1vbmdvX2xvZ2dlcl8xLlNldmVyaXR5TGV2ZWwuREVCVUcpKSB7XG4gICAgICAgICAgICB0aGlzLmNsaWVudC5tb25nb0xvZ2dlcj8uZGVidWcobW9uZ29fbG9nZ2VyXzEuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudC5TRVJWRVJfU0VMRUNUSU9OLCBuZXcgc2VydmVyX3NlbGVjdGlvbl9ldmVudHNfMS5TZXJ2ZXJTZWxlY3Rpb25TdGFydGVkRXZlbnQoc2VsZWN0b3IsIHRoaXMuZGVzY3JpcHRpb24sIG9wdGlvbnMub3BlcmF0aW9uTmFtZSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzU2hhcmRlZCA9IHRoaXMuZGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNoYXJkZWQ7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBvcHRpb25zLnNlc3Npb247XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gc2Vzc2lvbiAmJiBzZXNzaW9uLnRyYW5zYWN0aW9uO1xuICAgICAgICBpZiAoaXNTaGFyZGVkICYmIHRyYW5zYWN0aW9uICYmIHRyYW5zYWN0aW9uLnNlcnZlcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50Lm1vbmdvTG9nZ2VyPy53aWxsTG9nKG1vbmdvX2xvZ2dlcl8xLk1vbmdvTG9nZ2FibGVDb21wb25lbnQuU0VSVkVSX1NFTEVDVElPTiwgbW9uZ29fbG9nZ2VyXzEuU2V2ZXJpdHlMZXZlbC5ERUJVRykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5tb25nb0xvZ2dlcj8uZGVidWcobW9uZ29fbG9nZ2VyXzEuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudC5TRVJWRVJfU0VMRUNUSU9OLCBuZXcgc2VydmVyX3NlbGVjdGlvbl9ldmVudHNfMS5TZXJ2ZXJTZWxlY3Rpb25TdWNjZWVkZWRFdmVudChzZWxlY3RvciwgdGhpcy5kZXNjcmlwdGlvbiwgdHJhbnNhY3Rpb24uc2VydmVyLnBvb2wuYWRkcmVzcywgb3B0aW9ucy5vcGVyYXRpb25OYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHRyYW5zYWN0aW9uLnNlcnZlcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2FpdFF1ZXVlTWVtYmVyID0ge1xuICAgICAgICAgICAgc2VydmVyU2VsZWN0b3IsXG4gICAgICAgICAgICB0b3BvbG9neURlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbW9uZ29Mb2dnZXI6IHRoaXMuY2xpZW50Lm1vbmdvTG9nZ2VyLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb24sXG4gICAgICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgICAgIHRpbWVvdXRDb250cm9sbGVyOiBuZXcgdXRpbHNfMS5UaW1lb3V0Q29udHJvbGxlcihvcHRpb25zLnNlcnZlclNlbGVjdGlvblRpbWVvdXRNUyksXG4gICAgICAgICAgICBzdGFydFRpbWU6ICgwLCB1dGlsc18xLm5vdykoKSxcbiAgICAgICAgICAgIG9wZXJhdGlvbk5hbWU6IG9wdGlvbnMub3BlcmF0aW9uTmFtZSxcbiAgICAgICAgICAgIHdhaXRpbmdMb2dnZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcHJldmlvdXNTZXJ2ZXI6IG9wdGlvbnMucHJldmlvdXNTZXJ2ZXJcbiAgICAgICAgfTtcbiAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLnRpbWVvdXRDb250cm9sbGVyLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHtcbiAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlcltrQ2FuY2VsbGVkXSA9IHRydWU7XG4gICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIudGltZW91dENvbnRyb2xsZXIuY2xlYXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRFcnJvciA9IG5ldyBlcnJvcl8xLk1vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3IoYFNlcnZlciBzZWxlY3Rpb24gdGltZWQgb3V0IGFmdGVyICR7b3B0aW9ucy5zZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVN9IG1zYCwgdGhpcy5kZXNjcmlwdGlvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5jbGllbnQubW9uZ29Mb2dnZXI/LndpbGxMb2cobW9uZ29fbG9nZ2VyXzEuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudC5TRVJWRVJfU0VMRUNUSU9OLCBtb25nb19sb2dnZXJfMS5TZXZlcml0eUxldmVsLkRFQlVHKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50Lm1vbmdvTG9nZ2VyPy5kZWJ1Zyhtb25nb19sb2dnZXJfMS5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50LlNFUlZFUl9TRUxFQ1RJT04sIG5ldyBzZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50c18xLlNlcnZlclNlbGVjdGlvbkZhaWxlZEV2ZW50KHNlbGVjdG9yLCB0aGlzLmRlc2NyaXB0aW9uLCB0aW1lb3V0RXJyb3IsIG9wdGlvbnMub3BlcmF0aW9uTmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLmNhbGxiYWNrKHRpbWVvdXRFcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzW2tXYWl0UXVldWVdLnB1c2god2FpdFF1ZXVlTWVtYmVyKTtcbiAgICAgICAgcHJvY2Vzc1dhaXRRdWV1ZSh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbnRlcm5hbCBUb3BvbG9neURlc2NyaXB0aW9uIHdpdGggYSBTZXJ2ZXJEZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHNlcnZlckRlc2NyaXB0aW9uIC0gVGhlIHNlcnZlciB0byB1cGRhdGUgaW4gdGhlIGludGVybmFsIGxpc3Qgb2Ygc2VydmVyIGRlc2NyaXB0aW9uc1xuICAgICAqL1xuICAgIHNlcnZlclVwZGF0ZUhhbmRsZXIoc2VydmVyRGVzY3JpcHRpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLnMuZGVzY3JpcHRpb24uaGFzU2VydmVyKHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWdub3JlIHRoaXMgc2VydmVyIHVwZGF0ZSBpZiBpdHMgZnJvbSBhbiBvdXRkYXRlZCB0b3BvbG9neVZlcnNpb25cbiAgICAgICAgaWYgKGlzU3RhbGVTZXJ2ZXJEZXNjcmlwdGlvbih0aGlzLnMuZGVzY3JpcHRpb24sIHNlcnZlckRlc2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoZXNlIHdpbGwgYmUgdXNlZCBmb3IgbW9uaXRvcmluZyBldmVudHMgbGF0ZXJcbiAgICAgICAgY29uc3QgcHJldmlvdXNUb3BvbG9neURlc2NyaXB0aW9uID0gdGhpcy5zLmRlc2NyaXB0aW9uO1xuICAgICAgICBjb25zdCBwcmV2aW91c1NlcnZlckRlc2NyaXB0aW9uID0gdGhpcy5zLmRlc2NyaXB0aW9uLnNlcnZlcnMuZ2V0KHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpO1xuICAgICAgICBpZiAoIXByZXZpb3VzU2VydmVyRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBEcml2ZXIgU2Vzc2lvbnMgU3BlYzogXCJXaGVuZXZlciBhIGRyaXZlciByZWNlaXZlcyBhIGNsdXN0ZXIgdGltZSBmcm9tXG4gICAgICAgIC8vIGEgc2VydmVyIGl0IE1VU1QgY29tcGFyZSBpdCB0byB0aGUgY3VycmVudCBoaWdoZXN0IHNlZW4gY2x1c3RlciB0aW1lXG4gICAgICAgIC8vIGZvciB0aGUgZGVwbG95bWVudC4gSWYgdGhlIG5ldyBjbHVzdGVyIHRpbWUgaXMgaGlnaGVyIHRoYW4gdGhlXG4gICAgICAgIC8vIGhpZ2hlc3Qgc2VlbiBjbHVzdGVyIHRpbWUgaXQgTVVTVCBiZWNvbWUgdGhlIG5ldyBoaWdoZXN0IHNlZW4gY2x1c3RlclxuICAgICAgICAvLyB0aW1lLiBUd28gY2x1c3RlciB0aW1lcyBhcmUgY29tcGFyZWQgdXNpbmcgb25seSB0aGUgQnNvblRpbWVzdGFtcFxuICAgICAgICAvLyB2YWx1ZSBvZiB0aGUgY2x1c3RlclRpbWUgZW1iZWRkZWQgZmllbGQuXCJcbiAgICAgICAgY29uc3QgY2x1c3RlclRpbWUgPSBzZXJ2ZXJEZXNjcmlwdGlvbi4kY2x1c3RlclRpbWU7XG4gICAgICAgIGlmIChjbHVzdGVyVGltZSkge1xuICAgICAgICAgICAgKDAsIGNvbW1vbl8xLl9hZHZhbmNlQ2x1c3RlclRpbWUpKHRoaXMsIGNsdXN0ZXJUaW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGtub3cgYWxsIHRoZSBpbmZvcm1hdGlvbiBjb250YWluZWQgaW4gdGhpcyB1cGRhdGVkIGRlc2NyaXB0aW9uLCB0aGVuXG4gICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gZW1pdCBTREFNIGV2ZW50cywgYnV0IHN0aWxsIG5lZWQgdG8gdXBkYXRlIHRoZSBkZXNjcmlwdGlvbiwgaW4gb3JkZXJcbiAgICAgICAgLy8gdG8ga2VlcCBjbGllbnQtdHJhY2tlZCBhdHRyaWJ1dGVzIGxpa2UgbGFzdCB1cGRhdGUgdGltZSBhbmQgcm91bmQgdHJpcCB0aW1lIHVwIHRvIGRhdGVcbiAgICAgICAgY29uc3QgZXF1YWxEZXNjcmlwdGlvbnMgPSBwcmV2aW91c1NlcnZlckRlc2NyaXB0aW9uICYmIHByZXZpb3VzU2VydmVyRGVzY3JpcHRpb24uZXF1YWxzKHNlcnZlckRlc2NyaXB0aW9uKTtcbiAgICAgICAgLy8gZmlyc3QgdXBkYXRlIHRoZSBUb3BvbG9neURlc2NyaXB0aW9uXG4gICAgICAgIHRoaXMucy5kZXNjcmlwdGlvbiA9IHRoaXMucy5kZXNjcmlwdGlvbi51cGRhdGUoc2VydmVyRGVzY3JpcHRpb24pO1xuICAgICAgICBpZiAodGhpcy5zLmRlc2NyaXB0aW9uLmNvbXBhdGliaWxpdHlFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5lbWl0KFRvcG9sb2d5LkVSUk9SLCBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcih0aGlzLnMuZGVzY3JpcHRpb24uY29tcGF0aWJpbGl0eUVycm9yKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZW1pdCBtb25pdG9yaW5nIGV2ZW50cyBmb3IgdGhpcyBjaGFuZ2VcbiAgICAgICAgaWYgKCFlcXVhbERlc2NyaXB0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgbmV3RGVzY3JpcHRpb24gPSB0aGlzLnMuZGVzY3JpcHRpb24uc2VydmVycy5nZXQoc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcyk7XG4gICAgICAgICAgICBpZiAobmV3RGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoVG9wb2xvZ3kuU0VSVkVSX0RFU0NSSVBUSU9OX0NIQU5HRUQsIG5ldyBldmVudHNfMS5TZXJ2ZXJEZXNjcmlwdGlvbkNoYW5nZWRFdmVudCh0aGlzLnMuaWQsIHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MsIHByZXZpb3VzU2VydmVyRGVzY3JpcHRpb24sIG5ld0Rlc2NyaXB0aW9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIHNlcnZlciBsaXN0IGZyb20gdXBkYXRlZCBkZXNjcmlwdGlvbnNcbiAgICAgICAgdXBkYXRlU2VydmVycyh0aGlzLCBzZXJ2ZXJEZXNjcmlwdGlvbik7XG4gICAgICAgIC8vIGF0dGVtcHQgdG8gcmVzb2x2ZSBhbnkgb3V0c3RhbmRpbmcgc2VydmVyIHNlbGVjdGlvbiBhdHRlbXB0c1xuICAgICAgICBpZiAodGhpc1trV2FpdFF1ZXVlXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBwcm9jZXNzV2FpdFF1ZXVlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXF1YWxEZXNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdEFuZExvZyhUb3BvbG9neS5UT1BPTE9HWV9ERVNDUklQVElPTl9DSEFOR0VELCBuZXcgZXZlbnRzXzEuVG9wb2xvZ3lEZXNjcmlwdGlvbkNoYW5nZWRFdmVudCh0aGlzLnMuaWQsIHByZXZpb3VzVG9wb2xvZ3lEZXNjcmlwdGlvbiwgdGhpcy5zLmRlc2NyaXB0aW9uKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXV0aChjcmVkZW50aWFscywgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjcmVkZW50aWFscyA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIChjYWxsYmFjayA9IGNyZWRlbnRpYWxzKSwgKGNyZWRlbnRpYWxzID0gdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgfVxuICAgIGdldCBjbGllbnRNZXRhZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5vcHRpb25zLm1ldGFkYXRhO1xuICAgIH1cbiAgICBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ09OTkVDVEVEO1xuICAgIH1cbiAgICBpc0Rlc3Ryb3llZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ0xPU0VEO1xuICAgIH1cbiAgICAvLyBOT1RFOiBUaGVyZSBhcmUgbWFueSBwbGFjZXMgaW4gY29kZSB3aGVyZSB3ZSBleHBsaWNpdGx5IGNoZWNrIHRoZSBsYXN0IGhlbGxvXG4gICAgLy8gICAgICAgdG8gZG8gZmVhdHVyZSBzdXBwb3J0IGRldGVjdGlvbi4gVGhpcyBzaG91bGQgYmUgZG9uZSBhbnkgb3RoZXIgd2F5LCBidXQgZm9yXG4gICAgLy8gICAgICAgbm93IHdlIHdpbGwganVzdCByZXR1cm4gdGhlIGZpcnN0IGhlbGxvIHNlZW4sIHdoaWNoIHNob3VsZCBzdWZmaWNlLlxuICAgIGxhc3RIZWxsbygpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyRGVzY3JpcHRpb25zID0gQXJyYXkuZnJvbSh0aGlzLmRlc2NyaXB0aW9uLnNlcnZlcnMudmFsdWVzKCkpO1xuICAgICAgICBpZiAoc2VydmVyRGVzY3JpcHRpb25zLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgY29uc3Qgc2QgPSBzZXJ2ZXJEZXNjcmlwdGlvbnMuZmlsdGVyKChzZCkgPT4gc2QudHlwZSAhPT0gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duKVswXTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc2QgfHwgeyBtYXhXaXJlVmVyc2lvbjogdGhpcy5kZXNjcmlwdGlvbi5jb21tb25XaXJlVmVyc2lvbiB9O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBnZXQgY29tbW9uV2lyZVZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uLmNvbW1vbldpcmVWZXJzaW9uO1xuICAgIH1cbiAgICBnZXQgbG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRpb24ubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcztcbiAgICB9XG4gICAgZ2V0IGNsdXN0ZXJUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zLmNsdXN0ZXJUaW1lO1xuICAgIH1cbiAgICBzZXQgY2x1c3RlclRpbWUoY2x1c3RlclRpbWUpIHtcbiAgICAgICAgdGhpcy5zLmNsdXN0ZXJUaW1lID0gY2x1c3RlclRpbWU7XG4gICAgfVxufVxuLyoqIEBldmVudCAqL1xuVG9wb2xvZ3kuU0VSVkVSX09QRU5JTkcgPSBjb25zdGFudHNfMS5TRVJWRVJfT1BFTklORztcbi8qKiBAZXZlbnQgKi9cblRvcG9sb2d5LlNFUlZFUl9DTE9TRUQgPSBjb25zdGFudHNfMS5TRVJWRVJfQ0xPU0VEO1xuLyoqIEBldmVudCAqL1xuVG9wb2xvZ3kuU0VSVkVSX0RFU0NSSVBUSU9OX0NIQU5HRUQgPSBjb25zdGFudHNfMS5TRVJWRVJfREVTQ1JJUFRJT05fQ0hBTkdFRDtcbi8qKiBAZXZlbnQgKi9cblRvcG9sb2d5LlRPUE9MT0dZX09QRU5JTkcgPSBjb25zdGFudHNfMS5UT1BPTE9HWV9PUEVOSU5HO1xuLyoqIEBldmVudCAqL1xuVG9wb2xvZ3kuVE9QT0xPR1lfQ0xPU0VEID0gY29uc3RhbnRzXzEuVE9QT0xPR1lfQ0xPU0VEO1xuLyoqIEBldmVudCAqL1xuVG9wb2xvZ3kuVE9QT0xPR1lfREVTQ1JJUFRJT05fQ0hBTkdFRCA9IGNvbnN0YW50c18xLlRPUE9MT0dZX0RFU0NSSVBUSU9OX0NIQU5HRUQ7XG4vKiogQGV2ZW50ICovXG5Ub3BvbG9neS5FUlJPUiA9IGNvbnN0YW50c18xLkVSUk9SO1xuLyoqIEBldmVudCAqL1xuVG9wb2xvZ3kuT1BFTiA9IGNvbnN0YW50c18xLk9QRU47XG4vKiogQGV2ZW50ICovXG5Ub3BvbG9neS5DT05ORUNUID0gY29uc3RhbnRzXzEuQ09OTkVDVDtcbi8qKiBAZXZlbnQgKi9cblRvcG9sb2d5LkNMT1NFID0gY29uc3RhbnRzXzEuQ0xPU0U7XG4vKiogQGV2ZW50ICovXG5Ub3BvbG9neS5USU1FT1VUID0gY29uc3RhbnRzXzEuVElNRU9VVDtcbmV4cG9ydHMuVG9wb2xvZ3kgPSBUb3BvbG9neTtcbi8qKiBEZXN0cm95cyBhIHNlcnZlciwgYW5kIHJlbW92ZXMgYWxsIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSBpbnN0YW5jZSAqL1xuZnVuY3Rpb24gZGVzdHJveVNlcnZlcihzZXJ2ZXIsIHRvcG9sb2d5KSB7XG4gICAgZm9yIChjb25zdCBldmVudCBvZiBjb25zdGFudHNfMS5MT0NBTF9TRVJWRVJfRVZFTlRTKSB7XG4gICAgICAgIHNlcnZlci5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpO1xuICAgIH1cbiAgICBzZXJ2ZXIuZGVzdHJveSgpO1xuICAgIHRvcG9sb2d5LmVtaXRBbmRMb2coVG9wb2xvZ3kuU0VSVkVSX0NMT1NFRCwgbmV3IGV2ZW50c18xLlNlcnZlckNsb3NlZEV2ZW50KHRvcG9sb2d5LnMuaWQsIHNlcnZlci5kZXNjcmlwdGlvbi5hZGRyZXNzKSk7XG4gICAgZm9yIChjb25zdCBldmVudCBvZiBjb25zdGFudHNfMS5TRVJWRVJfUkVMQVlfRVZFTlRTKSB7XG4gICAgICAgIHNlcnZlci5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpO1xuICAgIH1cbn1cbi8qKiBQcmVkaWN0cyB0aGUgVG9wb2xvZ3lUeXBlIGZyb20gb3B0aW9ucyAqL1xuZnVuY3Rpb24gdG9wb2xvZ3lUeXBlRnJvbU9wdGlvbnMob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zPy5kaXJlY3RDb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb21tb25fMS5Ub3BvbG9neVR5cGUuU2luZ2xlO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucz8ucmVwbGljYVNldCkge1xuICAgICAgICByZXR1cm4gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlJlcGxpY2FTZXROb1ByaW1hcnk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zPy5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5Mb2FkQmFsYW5jZWQ7XG4gICAgfVxuICAgIHJldHVybiBjb21tb25fMS5Ub3BvbG9neVR5cGUuVW5rbm93bjtcbn1cbi8qKlxuICogQ3JlYXRlcyBuZXcgc2VydmVyIGluc3RhbmNlcyBhbmQgYXR0ZW1wdHMgdG8gY29ubmVjdCB0aGVtXG4gKlxuICogQHBhcmFtIHRvcG9sb2d5IC0gVGhlIHRvcG9sb2d5IHRoYXQgdGhpcyBzZXJ2ZXIgYmVsb25ncyB0b1xuICogQHBhcmFtIHNlcnZlckRlc2NyaXB0aW9uIC0gVGhlIGRlc2NyaXB0aW9uIGZvciB0aGUgc2VydmVyIHRvIGluaXRpYWxpemUgYW5kIGNvbm5lY3QgdG9cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQW5kQ29ubmVjdFNlcnZlcih0b3BvbG9neSwgc2VydmVyRGVzY3JpcHRpb24pIHtcbiAgICB0b3BvbG9neS5lbWl0QW5kTG9nKFRvcG9sb2d5LlNFUlZFUl9PUEVOSU5HLCBuZXcgZXZlbnRzXzEuU2VydmVyT3BlbmluZ0V2ZW50KHRvcG9sb2d5LnMuaWQsIHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpKTtcbiAgICBjb25zdCBzZXJ2ZXIgPSBuZXcgc2VydmVyXzEuU2VydmVyKHRvcG9sb2d5LCBzZXJ2ZXJEZXNjcmlwdGlvbiwgdG9wb2xvZ3kucy5vcHRpb25zKTtcbiAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGNvbnN0YW50c18xLlNFUlZFUl9SRUxBWV9FVkVOVFMpIHtcbiAgICAgICAgc2VydmVyLm9uKGV2ZW50LCAoZSkgPT4gdG9wb2xvZ3kuZW1pdChldmVudCwgZSkpO1xuICAgIH1cbiAgICBzZXJ2ZXIub24oc2VydmVyXzEuU2VydmVyLkRFU0NSSVBUSU9OX1JFQ0VJVkVELCBkZXNjcmlwdGlvbiA9PiB0b3BvbG9neS5zZXJ2ZXJVcGRhdGVIYW5kbGVyKGRlc2NyaXB0aW9uKSk7XG4gICAgc2VydmVyLmNvbm5lY3QoKTtcbiAgICByZXR1cm4gc2VydmVyO1xufVxuLyoqXG4gKiBAcGFyYW0gdG9wb2xvZ3kgLSBUb3BvbG9neSB0byB1cGRhdGUuXG4gKiBAcGFyYW0gaW5jb21pbmdTZXJ2ZXJEZXNjcmlwdGlvbiAtIE5ldyBzZXJ2ZXIgZGVzY3JpcHRpb24uXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVNlcnZlcnModG9wb2xvZ3ksIGluY29taW5nU2VydmVyRGVzY3JpcHRpb24pIHtcbiAgICAvLyB1cGRhdGUgdGhlIGludGVybmFsIHNlcnZlcidzIGRlc2NyaXB0aW9uXG4gICAgaWYgKGluY29taW5nU2VydmVyRGVzY3JpcHRpb24gJiYgdG9wb2xvZ3kucy5zZXJ2ZXJzLmhhcyhpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MpKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlciA9IHRvcG9sb2d5LnMuc2VydmVycy5nZXQoaW5jb21pbmdTZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKTtcbiAgICAgICAgaWYgKHNlcnZlcikge1xuICAgICAgICAgICAgc2VydmVyLnMuZGVzY3JpcHRpb24gPSBpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgaWYgKGluY29taW5nU2VydmVyRGVzY3JpcHRpb24uZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IgJiZcbiAgICAgICAgICAgICAgICBpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uLmVycm9yLmhhc0Vycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuUmVzZXRQb29sKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGludGVycnVwdEluVXNlQ29ubmVjdGlvbnMgPSBpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uLmVycm9yLmhhc0Vycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgc2VydmVyLnBvb2wuY2xlYXIoeyBpbnRlcnJ1cHRJblVzZUNvbm5lY3Rpb25zIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW5jb21pbmdTZXJ2ZXJEZXNjcmlwdGlvbi5lcnJvciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VG9wb2xvZ3lUeXBlID0gdG9wb2xvZ3kucy5kZXNjcmlwdGlvbi50eXBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZE1hcmtQb29sUmVhZHkgPSBpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uLmlzRGF0YUJlYXJpbmcgfHxcbiAgICAgICAgICAgICAgICAgICAgKGluY29taW5nU2VydmVyRGVzY3JpcHRpb24udHlwZSAhPT0gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUb3BvbG9neVR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5TaW5nbGUpO1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRNYXJrUG9vbFJlYWR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlci5wb29sLnJlYWR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGFkZCBuZXcgc2VydmVycyBmb3IgYWxsIGRlc2NyaXB0aW9ucyB3ZSBjdXJyZW50bHkgZG9uJ3Qga25vdyBhYm91dCBsb2NhbGx5XG4gICAgZm9yIChjb25zdCBzZXJ2ZXJEZXNjcmlwdGlvbiBvZiB0b3BvbG9neS5kZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKSB7XG4gICAgICAgIGlmICghdG9wb2xvZ3kucy5zZXJ2ZXJzLmhhcyhzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKSkge1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyID0gY3JlYXRlQW5kQ29ubmVjdFNlcnZlcih0b3BvbG9neSwgc2VydmVyRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgdG9wb2xvZ3kucy5zZXJ2ZXJzLnNldChzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzLCBzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGZvciBhbGwgc2VydmVycyBubyBsb25nZXIga25vd24sIHJlbW92ZSB0aGVpciBkZXNjcmlwdGlvbnMgYW5kIGRlc3Ryb3kgdGhlaXIgaW5zdGFuY2VzXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0b3BvbG9neS5zLnNlcnZlcnMpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyQWRkcmVzcyA9IGVudHJ5WzBdO1xuICAgICAgICBpZiAodG9wb2xvZ3kuZGVzY3JpcHRpb24uaGFzU2VydmVyKHNlcnZlckFkZHJlc3MpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRvcG9sb2d5LnMuc2VydmVycy5oYXMoc2VydmVyQWRkcmVzcykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcnZlciA9IHRvcG9sb2d5LnMuc2VydmVycy5nZXQoc2VydmVyQWRkcmVzcyk7XG4gICAgICAgIHRvcG9sb2d5LnMuc2VydmVycy5kZWxldGUoc2VydmVyQWRkcmVzcyk7XG4gICAgICAgIC8vIHByZXBhcmUgc2VydmVyIGZvciBnYXJiYWdlIGNvbGxlY3Rpb25cbiAgICAgICAgaWYgKHNlcnZlcikge1xuICAgICAgICAgICAgZGVzdHJveVNlcnZlcihzZXJ2ZXIsIHRvcG9sb2d5KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGRyYWluV2FpdFF1ZXVlKHF1ZXVlLCBlcnIpIHtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHdhaXRRdWV1ZU1lbWJlciA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmICghd2FpdFF1ZXVlTWVtYmVyKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB3YWl0UXVldWVNZW1iZXIudGltZW91dENvbnRyb2xsZXIuY2xlYXIoKTtcbiAgICAgICAgaWYgKCF3YWl0UXVldWVNZW1iZXJba0NhbmNlbGxlZF0pIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAod2FpdFF1ZXVlTWVtYmVyLm1vbmdvTG9nZ2VyPy53aWxsTG9nKG1vbmdvX2xvZ2dlcl8xLk1vbmdvTG9nZ2FibGVDb21wb25lbnQuU0VSVkVSX1NFTEVDVElPTiwgbW9uZ29fbG9nZ2VyXzEuU2V2ZXJpdHlMZXZlbC5ERUJVRykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLm1vbmdvTG9nZ2VyPy5kZWJ1Zyhtb25nb19sb2dnZXJfMS5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50LlNFUlZFUl9TRUxFQ1RJT04sIG5ldyBzZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50c18xLlNlcnZlclNlbGVjdGlvbkZhaWxlZEV2ZW50KHdhaXRRdWV1ZU1lbWJlci5zZXJ2ZXJTZWxlY3Rvciwgd2FpdFF1ZXVlTWVtYmVyLnRvcG9sb2d5RGVzY3JpcHRpb24sIGVyciwgd2FpdFF1ZXVlTWVtYmVyLm9wZXJhdGlvbk5hbWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIuY2FsbGJhY2soZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHByb2Nlc3NXYWl0UXVldWUodG9wb2xvZ3kpIHtcbiAgICBpZiAodG9wb2xvZ3kucy5zdGF0ZSA9PT0gY29tbW9uXzEuU1RBVEVfQ0xPU0VEKSB7XG4gICAgICAgIGRyYWluV2FpdFF1ZXVlKHRvcG9sb2d5W2tXYWl0UXVldWVdLCBuZXcgZXJyb3JfMS5Nb25nb1RvcG9sb2d5Q2xvc2VkRXJyb3IoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaXNTaGFyZGVkID0gdG9wb2xvZ3kuZGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNoYXJkZWQ7XG4gICAgY29uc3Qgc2VydmVyRGVzY3JpcHRpb25zID0gQXJyYXkuZnJvbSh0b3BvbG9neS5kZXNjcmlwdGlvbi5zZXJ2ZXJzLnZhbHVlcygpKTtcbiAgICBjb25zdCBtZW1iZXJzVG9Qcm9jZXNzID0gdG9wb2xvZ3lba1dhaXRRdWV1ZV0ubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVtYmVyc1RvUHJvY2VzczsgKytpKSB7XG4gICAgICAgIGNvbnN0IHdhaXRRdWV1ZU1lbWJlciA9IHRvcG9sb2d5W2tXYWl0UXVldWVdLnNoaWZ0KCk7XG4gICAgICAgIGlmICghd2FpdFF1ZXVlTWVtYmVyKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2FpdFF1ZXVlTWVtYmVyW2tDYW5jZWxsZWRdKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2VsZWN0ZWREZXNjcmlwdGlvbnM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzZXJ2ZXJTZWxlY3RvciA9IHdhaXRRdWV1ZU1lbWJlci5zZXJ2ZXJTZWxlY3RvcjtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzU2VydmVyID0gd2FpdFF1ZXVlTWVtYmVyLnByZXZpb3VzU2VydmVyO1xuICAgICAgICAgICAgc2VsZWN0ZWREZXNjcmlwdGlvbnMgPSBzZXJ2ZXJTZWxlY3RvclxuICAgICAgICAgICAgICAgID8gc2VydmVyU2VsZWN0b3IodG9wb2xvZ3kuZGVzY3JpcHRpb24sIHNlcnZlckRlc2NyaXB0aW9ucywgcHJldmlvdXNTZXJ2ZXIgPyBbcHJldmlvdXNTZXJ2ZXJdIDogW10pXG4gICAgICAgICAgICAgICAgOiBzZXJ2ZXJEZXNjcmlwdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlci50aW1lb3V0Q29udHJvbGxlci5jbGVhcigpO1xuICAgICAgICAgICAgaWYgKHRvcG9sb2d5LmNsaWVudC5tb25nb0xvZ2dlcj8ud2lsbExvZyhtb25nb19sb2dnZXJfMS5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50LlNFUlZFUl9TRUxFQ1RJT04sIG1vbmdvX2xvZ2dlcl8xLlNldmVyaXR5TGV2ZWwuREVCVUcpKSB7XG4gICAgICAgICAgICAgICAgdG9wb2xvZ3kuY2xpZW50Lm1vbmdvTG9nZ2VyPy5kZWJ1Zyhtb25nb19sb2dnZXJfMS5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50LlNFUlZFUl9TRUxFQ1RJT04sIG5ldyBzZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50c18xLlNlcnZlclNlbGVjdGlvbkZhaWxlZEV2ZW50KHdhaXRRdWV1ZU1lbWJlci5zZXJ2ZXJTZWxlY3RvciwgdG9wb2xvZ3kuZGVzY3JpcHRpb24sIGUsIHdhaXRRdWV1ZU1lbWJlci5vcGVyYXRpb25OYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3YWl0UXVldWVNZW1iZXIuY2FsbGJhY2soZSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2VsZWN0ZWRTZXJ2ZXI7XG4gICAgICAgIGlmIChzZWxlY3RlZERlc2NyaXB0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICghd2FpdFF1ZXVlTWVtYmVyLndhaXRpbmdMb2dnZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9wb2xvZ3kuY2xpZW50Lm1vbmdvTG9nZ2VyPy53aWxsTG9nKG1vbmdvX2xvZ2dlcl8xLk1vbmdvTG9nZ2FibGVDb21wb25lbnQuU0VSVkVSX1NFTEVDVElPTiwgbW9uZ29fbG9nZ2VyXzEuU2V2ZXJpdHlMZXZlbC5JTkZPUk1BVElPTkFMKSkge1xuICAgICAgICAgICAgICAgICAgICB0b3BvbG9neS5jbGllbnQubW9uZ29Mb2dnZXI/LmluZm8obW9uZ29fbG9nZ2VyXzEuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudC5TRVJWRVJfU0VMRUNUSU9OLCBuZXcgc2VydmVyX3NlbGVjdGlvbl9ldmVudHNfMS5XYWl0aW5nRm9yU3VpdGFibGVTZXJ2ZXJFdmVudCh3YWl0UXVldWVNZW1iZXIuc2VydmVyU2VsZWN0b3IsIHRvcG9sb2d5LmRlc2NyaXB0aW9uLCB0b3BvbG9neS5zLnNlcnZlclNlbGVjdGlvblRpbWVvdXRNUyAhPT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0b3BvbG9neS5zLnNlcnZlclNlbGVjdGlvblRpbWVvdXRNUyAtICgoMCwgdXRpbHNfMS5ub3cpKCkgLSB3YWl0UXVldWVNZW1iZXIuc3RhcnRUaW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAtMSwgd2FpdFF1ZXVlTWVtYmVyLm9wZXJhdGlvbk5hbWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLndhaXRpbmdMb2dnZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9wb2xvZ3lba1dhaXRRdWV1ZV0ucHVzaCh3YWl0UXVldWVNZW1iZXIpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWREZXNjcmlwdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBzZWxlY3RlZFNlcnZlciA9IHRvcG9sb2d5LnMuc2VydmVycy5nZXQoc2VsZWN0ZWREZXNjcmlwdGlvbnNbMF0uYWRkcmVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbnMgPSAoMCwgdXRpbHNfMS5zaHVmZmxlKShzZWxlY3RlZERlc2NyaXB0aW9ucywgMik7XG4gICAgICAgICAgICBjb25zdCBzZXJ2ZXIxID0gdG9wb2xvZ3kucy5zZXJ2ZXJzLmdldChkZXNjcmlwdGlvbnNbMF0uYWRkcmVzcyk7XG4gICAgICAgICAgICBjb25zdCBzZXJ2ZXIyID0gdG9wb2xvZ3kucy5zZXJ2ZXJzLmdldChkZXNjcmlwdGlvbnNbMV0uYWRkcmVzcyk7XG4gICAgICAgICAgICBzZWxlY3RlZFNlcnZlciA9XG4gICAgICAgICAgICAgICAgc2VydmVyMSAmJiBzZXJ2ZXIyICYmIHNlcnZlcjEucy5vcGVyYXRpb25Db3VudCA8IHNlcnZlcjIucy5vcGVyYXRpb25Db3VudFxuICAgICAgICAgICAgICAgICAgICA/IHNlcnZlcjFcbiAgICAgICAgICAgICAgICAgICAgOiBzZXJ2ZXIyO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZWN0ZWRTZXJ2ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IGVycm9yXzEuTW9uZ29TZXJ2ZXJTZWxlY3Rpb25FcnJvcignc2VydmVyIHNlbGVjdGlvbiByZXR1cm5lZCBhIHNlcnZlciBkZXNjcmlwdGlvbiBidXQgdGhlIHNlcnZlciB3YXMgbm90IGZvdW5kIGluIHRoZSB0b3BvbG9neScsIHRvcG9sb2d5LmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGlmICh0b3BvbG9neS5jbGllbnQubW9uZ29Mb2dnZXI/LndpbGxMb2cobW9uZ29fbG9nZ2VyXzEuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudC5TRVJWRVJfU0VMRUNUSU9OLCBtb25nb19sb2dnZXJfMS5TZXZlcml0eUxldmVsLkRFQlVHKSkge1xuICAgICAgICAgICAgICAgIHRvcG9sb2d5LmNsaWVudC5tb25nb0xvZ2dlcj8uZGVidWcobW9uZ29fbG9nZ2VyXzEuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudC5TRVJWRVJfU0VMRUNUSU9OLCBuZXcgc2VydmVyX3NlbGVjdGlvbl9ldmVudHNfMS5TZXJ2ZXJTZWxlY3Rpb25GYWlsZWRFdmVudCh3YWl0UXVldWVNZW1iZXIuc2VydmVyU2VsZWN0b3IsIHRvcG9sb2d5LmRlc2NyaXB0aW9uLCBlcnJvciwgd2FpdFF1ZXVlTWVtYmVyLm9wZXJhdGlvbk5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdhaXRRdWV1ZU1lbWJlci5jYWxsYmFjayhlcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB3YWl0UXVldWVNZW1iZXIudHJhbnNhY3Rpb247XG4gICAgICAgIGlmIChpc1NoYXJkZWQgJiYgdHJhbnNhY3Rpb24gJiYgdHJhbnNhY3Rpb24uaXNBY3RpdmUgJiYgc2VsZWN0ZWRTZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLnBpblNlcnZlcihzZWxlY3RlZFNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgICAgd2FpdFF1ZXVlTWVtYmVyLnRpbWVvdXRDb250cm9sbGVyLmNsZWFyKCk7XG4gICAgICAgIGlmICh0b3BvbG9neS5jbGllbnQubW9uZ29Mb2dnZXI/LndpbGxMb2cobW9uZ29fbG9nZ2VyXzEuTW9uZ29Mb2dnYWJsZUNvbXBvbmVudC5TRVJWRVJfU0VMRUNUSU9OLCBtb25nb19sb2dnZXJfMS5TZXZlcml0eUxldmVsLkRFQlVHKSkge1xuICAgICAgICAgICAgdG9wb2xvZ3kuY2xpZW50Lm1vbmdvTG9nZ2VyPy5kZWJ1Zyhtb25nb19sb2dnZXJfMS5Nb25nb0xvZ2dhYmxlQ29tcG9uZW50LlNFUlZFUl9TRUxFQ1RJT04sIG5ldyBzZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50c18xLlNlcnZlclNlbGVjdGlvblN1Y2NlZWRlZEV2ZW50KHdhaXRRdWV1ZU1lbWJlci5zZXJ2ZXJTZWxlY3Rvciwgd2FpdFF1ZXVlTWVtYmVyLnRvcG9sb2d5RGVzY3JpcHRpb24sIHNlbGVjdGVkU2VydmVyLnBvb2wuYWRkcmVzcywgd2FpdFF1ZXVlTWVtYmVyLm9wZXJhdGlvbk5hbWUpKTtcbiAgICAgICAgfVxuICAgICAgICB3YWl0UXVldWVNZW1iZXIuY2FsbGJhY2sodW5kZWZpbmVkLCBzZWxlY3RlZFNlcnZlcik7XG4gICAgfVxuICAgIGlmICh0b3BvbG9neVtrV2FpdFF1ZXVlXS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIGVuc3VyZSBhbGwgc2VydmVyIG1vbml0b3JzIGF0dGVtcHQgbW9uaXRvcmluZyBzb29uXG4gICAgICAgIGZvciAoY29uc3QgWywgc2VydmVyXSBvZiB0b3BvbG9neS5zLnNlcnZlcnMpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gc2NoZWR1bGVTZXJ2ZXJDaGVjaygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmVyLnJlcXVlc3RDaGVjaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc1N0YWxlU2VydmVyRGVzY3JpcHRpb24odG9wb2xvZ3lEZXNjcmlwdGlvbiwgaW5jb21pbmdTZXJ2ZXJEZXNjcmlwdGlvbikge1xuICAgIGNvbnN0IGN1cnJlbnRTZXJ2ZXJEZXNjcmlwdGlvbiA9IHRvcG9sb2d5RGVzY3JpcHRpb24uc2VydmVycy5nZXQoaW5jb21pbmdTZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKTtcbiAgICBjb25zdCBjdXJyZW50VG9wb2xvZ3lWZXJzaW9uID0gY3VycmVudFNlcnZlckRlc2NyaXB0aW9uPy50b3BvbG9neVZlcnNpb247XG4gICAgcmV0dXJuICgoMCwgc2VydmVyX2Rlc2NyaXB0aW9uXzEuY29tcGFyZVRvcG9sb2d5VmVyc2lvbikoY3VycmVudFRvcG9sb2d5VmVyc2lvbiwgaW5jb21pbmdTZXJ2ZXJEZXNjcmlwdGlvbi50b3BvbG9neVZlcnNpb24pID4gMCk7XG59XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgU2VydmVyQ2FwYWJpbGl0aWVzIHtcbiAgICBjb25zdHJ1Y3RvcihoZWxsbykge1xuICAgICAgICB0aGlzLm1pbldpcmVWZXJzaW9uID0gaGVsbG8ubWluV2lyZVZlcnNpb24gfHwgMDtcbiAgICAgICAgdGhpcy5tYXhXaXJlVmVyc2lvbiA9IGhlbGxvLm1heFdpcmVWZXJzaW9uIHx8IDA7XG4gICAgfVxuICAgIGdldCBoYXNBZ2dyZWdhdGlvbkN1cnNvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4V2lyZVZlcnNpb24gPj0gMTtcbiAgICB9XG4gICAgZ2V0IGhhc1dyaXRlQ29tbWFuZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFdpcmVWZXJzaW9uID49IDI7XG4gICAgfVxuICAgIGdldCBoYXNUZXh0U2VhcmNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5XaXJlVmVyc2lvbiA+PSAwO1xuICAgIH1cbiAgICBnZXQgaGFzQXV0aENvbW1hbmRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhXaXJlVmVyc2lvbiA+PSAxO1xuICAgIH1cbiAgICBnZXQgaGFzTGlzdENvbGxlY3Rpb25zQ29tbWFuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4V2lyZVZlcnNpb24gPj0gMztcbiAgICB9XG4gICAgZ2V0IGhhc0xpc3RJbmRleGVzQ29tbWFuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4V2lyZVZlcnNpb24gPj0gMztcbiAgICB9XG4gICAgZ2V0IHN1cHBvcnRzU25hcHNob3RSZWFkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4V2lyZVZlcnNpb24gPj0gMTM7XG4gICAgfVxuICAgIGdldCBjb21tYW5kc1Rha2VXcml0ZUNvbmNlcm4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFdpcmVWZXJzaW9uID49IDU7XG4gICAgfVxuICAgIGdldCBjb21tYW5kc1Rha2VDb2xsYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFdpcmVWZXJzaW9uID49IDU7XG4gICAgfVxufVxuZXhwb3J0cy5TZXJ2ZXJDYXBhYmlsaXRpZXMgPSBTZXJ2ZXJDYXBhYmlsaXRpZXM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b3BvbG9neS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTZXJ2ZXJDYXBhYmlsaXRpZXMiLCJUb3BvbG9neSIsInV0aWxfMSIsInJlcXVpcmUiLCJjb25uZWN0aW9uX3N0cmluZ18xIiwiY29uc3RhbnRzXzEiLCJlcnJvcl8xIiwibW9uZ29fbG9nZ2VyXzEiLCJtb25nb190eXBlc18xIiwicmVhZF9wcmVmZXJlbmNlXzEiLCJ1dGlsc18xIiwiY29tbW9uXzEiLCJldmVudHNfMSIsInNlcnZlcl8xIiwic2VydmVyX2Rlc2NyaXB0aW9uXzEiLCJzZXJ2ZXJfc2VsZWN0aW9uXzEiLCJzZXJ2ZXJfc2VsZWN0aW9uX2V2ZW50c18xIiwic3J2X3BvbGxpbmdfMSIsInRvcG9sb2d5X2Rlc2NyaXB0aW9uXzEiLCJnbG9iYWxUb3BvbG9neUNvdW50ZXIiLCJzdGF0ZVRyYW5zaXRpb24iLCJtYWtlU3RhdGVNYWNoaW5lIiwiU1RBVEVfQ0xPU0VEIiwiU1RBVEVfQ09OTkVDVElORyIsIlNUQVRFX0NMT1NJTkciLCJTVEFURV9DT05ORUNURUQiLCJrQ2FuY2VsbGVkIiwiU3ltYm9sIiwia1dhaXRRdWV1ZSIsIlR5cGVkRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJzZWVkcyIsIm9wdGlvbnMiLCJzZWxlY3RTZXJ2ZXJBc3luYyIsInByb21pc2lmeSIsInNlbGVjdG9yIiwiY2FsbGJhY2siLCJzZWxlY3RTZXJ2ZXIiLCJob3N0cyIsIkhvc3RBZGRyZXNzIiwiZnJvbVN0cmluZyIsImZyb21FbnRyaWVzIiwiREVGQVVMVF9PUFRJT05TIiwiZW50cmllcyIsIkZFQVRVUkVfRkxBR1MiLCJBcnJheSIsImlzQXJyYXkiLCJzZWVkbGlzdCIsInNlZWQiLCJwdXNoIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwidG9wb2xvZ3lUeXBlIiwidG9wb2xvZ3lUeXBlRnJvbU9wdGlvbnMiLCJ0b3BvbG9neUlkIiwic2VsZWN0ZWRIb3N0cyIsInNydk1heEhvc3RzIiwibGVuZ3RoIiwic2h1ZmZsZSIsInNlcnZlckRlc2NyaXB0aW9ucyIsIk1hcCIsImhvc3RBZGRyZXNzIiwic2V0IiwidG9TdHJpbmciLCJTZXJ2ZXJEZXNjcmlwdGlvbiIsIkxpc3QiLCJzIiwiaWQiLCJzdGF0ZSIsImRlc2NyaXB0aW9uIiwiVG9wb2xvZ3lEZXNjcmlwdGlvbiIsInJlcGxpY2FTZXQiLCJ1bmRlZmluZWQiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJoZWFydGJlYXRGcmVxdWVuY3lNUyIsIm1pbkhlYXJ0YmVhdEZyZXF1ZW5jeU1TIiwic2VydmVycyIsImNyZWRlbnRpYWxzIiwiY2x1c3RlclRpbWUiLCJjb25uZWN0aW9uVGltZXJzIiwiU2V0IiwiZGV0ZWN0U2hhcmRlZFRvcG9sb2d5IiwiZXYiLCJkZXRlY3RTcnZSZWNvcmRzIiwibW9uZ29Mb2dnZXIiLCJjb21wb25lbnQiLCJzcnZIb3N0IiwibG9hZEJhbGFuY2VkIiwic3J2UG9sbGVyIiwiU3J2UG9sbGVyIiwic3J2U2VydmljZU5hbWUiLCJvbiIsIlRPUE9MT0dZX0RFU0NSSVBUSU9OX0NIQU5HRUQiLCJldmVudCIsInByZXZpb3VzVHlwZSIsInByZXZpb3VzRGVzY3JpcHRpb24iLCJ0eXBlIiwibmV3VHlwZSIsIm5ld0Rlc2NyaXB0aW9uIiwidHJhbnNpdGlvblRvU2hhcmRlZCIsIlRvcG9sb2d5VHlwZSIsIlNoYXJkZWQiLCJzcnZMaXN0ZW5lcnMiLCJsaXN0ZW5lcnMiLCJTUlZfUkVDT1JEX0RJU0NPVkVSWSIsImxpc3RlbmluZ1RvU3J2UG9sbGluZyIsImluY2x1ZGVzIiwic3RhcnQiLCJwcmV2aW91c1RvcG9sb2d5RGVzY3JpcHRpb24iLCJ1cGRhdGVGcm9tU3J2UG9sbGluZ0V2ZW50IiwidXBkYXRlU2VydmVycyIsImVtaXRBbmRMb2ciLCJUb3BvbG9neURlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50Iiwic2VydmVyQXBpIiwiY2FwYWJpbGl0aWVzIiwibGFzdEhlbGxvIiwiY29ubmVjdCIsIlRPUE9MT0dZX09QRU5JTkciLCJUb3BvbG9neU9wZW5pbmdFdmVudCIsIlVua25vd24iLCJmcm9tIiwidmFsdWVzIiwibWFwIiwic2VydmVyRGVzY3JpcHRpb24iLCJhZGRyZXNzIiwiY3JlYXRlQW5kQ29ubmVjdFNlcnZlciIsInNlcnZlclVwZGF0ZUhhbmRsZXIiLCJleGl0V2l0aEVycm9yIiwiZXJyb3IiLCJlbWl0IiwiRVJST1IiLCJyZWFkUHJlZmVyZW5jZSIsIlJlYWRQcmVmZXJlbmNlIiwicHJpbWFyeSIsInNlbGVjdFNlcnZlck9wdGlvbnMiLCJvcGVyYXRpb25OYW1lIiwicmVhZFByZWZlcmVuY2VTZXJ2ZXJTZWxlY3RvciIsImVyciIsInNlcnZlciIsImNsb3NlIiwic2tpcFBpbmdPbkNvbm5lY3QiLCJmb3IiLCJjb21tYW5kIiwibnMiLCJwaW5nIiwidGhlbiIsIk9QRU4iLCJDT05ORUNUIiwiZGVzdHJveVNlcnZlciIsImNsZWFyIiwiZHJhaW5XYWl0UXVldWUiLCJNb25nb1RvcG9sb2d5Q2xvc2VkRXJyb3IiLCJkcmFpblRpbWVyUXVldWUiLCJzdG9wIiwicmVtb3ZlTGlzdGVuZXIiLCJUT1BPTE9HWV9DTE9TRUQiLCJUb3BvbG9neUNsb3NlZEV2ZW50Iiwic2VydmVyU2VsZWN0b3IiLCJ0cmFuc2xhdGUiLCJ3aWxsTG9nIiwiTW9uZ29Mb2dnYWJsZUNvbXBvbmVudCIsIlNFUlZFUl9TRUxFQ1RJT04iLCJTZXZlcml0eUxldmVsIiwiREVCVUciLCJkZWJ1ZyIsIlNlcnZlclNlbGVjdGlvblN0YXJ0ZWRFdmVudCIsImlzU2hhcmRlZCIsInNlc3Npb24iLCJ0cmFuc2FjdGlvbiIsIlNlcnZlclNlbGVjdGlvblN1Y2NlZWRlZEV2ZW50IiwicG9vbCIsIndhaXRRdWV1ZU1lbWJlciIsInRvcG9sb2d5RGVzY3JpcHRpb24iLCJ0aW1lb3V0Q29udHJvbGxlciIsIlRpbWVvdXRDb250cm9sbGVyIiwic3RhcnRUaW1lIiwibm93Iiwid2FpdGluZ0xvZ2dlZCIsInByZXZpb3VzU2VydmVyIiwic2lnbmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRpbWVvdXRFcnJvciIsIk1vbmdvU2VydmVyU2VsZWN0aW9uRXJyb3IiLCJTZXJ2ZXJTZWxlY3Rpb25GYWlsZWRFdmVudCIsInByb2Nlc3NXYWl0UXVldWUiLCJoYXNTZXJ2ZXIiLCJpc1N0YWxlU2VydmVyRGVzY3JpcHRpb24iLCJwcmV2aW91c1NlcnZlckRlc2NyaXB0aW9uIiwiZ2V0IiwiJGNsdXN0ZXJUaW1lIiwiX2FkdmFuY2VDbHVzdGVyVGltZSIsImVxdWFsRGVzY3JpcHRpb25zIiwiZXF1YWxzIiwidXBkYXRlIiwiY29tcGF0aWJpbGl0eUVycm9yIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJTRVJWRVJfREVTQ1JJUFRJT05fQ0hBTkdFRCIsIlNlcnZlckRlc2NyaXB0aW9uQ2hhbmdlZEV2ZW50IiwiYXV0aCIsImNsaWVudE1ldGFkYXRhIiwibWV0YWRhdGEiLCJpc0Nvbm5lY3RlZCIsImlzRGVzdHJveWVkIiwic2QiLCJmaWx0ZXIiLCJTZXJ2ZXJUeXBlIiwicmVzdWx0IiwibWF4V2lyZVZlcnNpb24iLCJjb21tb25XaXJlVmVyc2lvbiIsImxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMiLCJTRVJWRVJfT1BFTklORyIsIlNFUlZFUl9DTE9TRUQiLCJDTE9TRSIsIlRJTUVPVVQiLCJ0b3BvbG9neSIsIkxPQ0FMX1NFUlZFUl9FVkVOVFMiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJkZXN0cm95IiwiU2VydmVyQ2xvc2VkRXZlbnQiLCJTRVJWRVJfUkVMQVlfRVZFTlRTIiwiZGlyZWN0Q29ubmVjdGlvbiIsIlNpbmdsZSIsIlJlcGxpY2FTZXROb1ByaW1hcnkiLCJMb2FkQmFsYW5jZWQiLCJTZXJ2ZXJPcGVuaW5nRXZlbnQiLCJTZXJ2ZXIiLCJlIiwiREVTQ1JJUFRJT05fUkVDRUlWRUQiLCJpbmNvbWluZ1NlcnZlckRlc2NyaXB0aW9uIiwiaGFzIiwiTW9uZ29FcnJvciIsImhhc0Vycm9yTGFiZWwiLCJNb25nb0Vycm9yTGFiZWwiLCJSZXNldFBvb2wiLCJpbnRlcnJ1cHRJblVzZUNvbm5lY3Rpb25zIiwiSW50ZXJydXB0SW5Vc2VDb25uZWN0aW9ucyIsIm5ld1RvcG9sb2d5VHlwZSIsInNob3VsZE1hcmtQb29sUmVhZHkiLCJpc0RhdGFCZWFyaW5nIiwicmVhZHkiLCJlbnRyeSIsInNlcnZlckFkZHJlc3MiLCJkZWxldGUiLCJxdWV1ZSIsInNoaWZ0IiwibWVtYmVyc1RvUHJvY2VzcyIsImkiLCJzZWxlY3RlZERlc2NyaXB0aW9ucyIsInNlbGVjdGVkU2VydmVyIiwiSU5GT1JNQVRJT05BTCIsImluZm8iLCJXYWl0aW5nRm9yU3VpdGFibGVTZXJ2ZXJFdmVudCIsImRlc2NyaXB0aW9ucyIsInNlcnZlcjEiLCJzZXJ2ZXIyIiwib3BlcmF0aW9uQ291bnQiLCJpc0FjdGl2ZSIsInBpblNlcnZlciIsInByb2Nlc3MiLCJuZXh0VGljayIsInNjaGVkdWxlU2VydmVyQ2hlY2siLCJyZXF1ZXN0Q2hlY2siLCJjdXJyZW50U2VydmVyRGVzY3JpcHRpb24iLCJjdXJyZW50VG9wb2xvZ3lWZXJzaW9uIiwidG9wb2xvZ3lWZXJzaW9uIiwiY29tcGFyZVRvcG9sb2d5VmVyc2lvbiIsImhlbGxvIiwibWluV2lyZVZlcnNpb24iLCJoYXNBZ2dyZWdhdGlvbkN1cnNvciIsImhhc1dyaXRlQ29tbWFuZHMiLCJoYXNUZXh0U2VhcmNoIiwiaGFzQXV0aENvbW1hbmRzIiwiaGFzTGlzdENvbGxlY3Rpb25zQ29tbWFuZCIsImhhc0xpc3RJbmRleGVzQ29tbWFuZCIsInN1cHBvcnRzU25hcHNob3RSZWFkcyIsImNvbW1hbmRzVGFrZVdyaXRlQ29uY2VybiIsImNvbW1hbmRzVGFrZUNvbGxhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/topology.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sdam/topology_description.js":
/*!***************************************************************!*\
  !*** ./node_modules/mongodb/lib/sdam/topology_description.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TopologyDescription = void 0;\nconst WIRE_CONSTANTS = __webpack_require__(/*! ../cmap/wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\nconst error_1 = __webpack_require__(/*! ../error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst common_1 = __webpack_require__(/*! ./common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst server_description_1 = __webpack_require__(/*! ./server_description */ \"(ssr)/./node_modules/mongodb/lib/sdam/server_description.js\");\n// constants related to compatibility checks\nconst MIN_SUPPORTED_SERVER_VERSION = WIRE_CONSTANTS.MIN_SUPPORTED_SERVER_VERSION;\nconst MAX_SUPPORTED_SERVER_VERSION = WIRE_CONSTANTS.MAX_SUPPORTED_SERVER_VERSION;\nconst MIN_SUPPORTED_WIRE_VERSION = WIRE_CONSTANTS.MIN_SUPPORTED_WIRE_VERSION;\nconst MAX_SUPPORTED_WIRE_VERSION = WIRE_CONSTANTS.MAX_SUPPORTED_WIRE_VERSION;\nconst MONGOS_OR_UNKNOWN = new Set([\n    common_1.ServerType.Mongos,\n    common_1.ServerType.Unknown\n]);\nconst MONGOS_OR_STANDALONE = new Set([\n    common_1.ServerType.Mongos,\n    common_1.ServerType.Standalone\n]);\nconst NON_PRIMARY_RS_MEMBERS = new Set([\n    common_1.ServerType.RSSecondary,\n    common_1.ServerType.RSArbiter,\n    common_1.ServerType.RSOther\n]);\n/**\n * Representation of a deployment of servers\n * @public\n */ class TopologyDescription {\n    /**\n     * Create a TopologyDescription\n     */ constructor(topologyType, serverDescriptions = null, setName = null, maxSetVersion = null, maxElectionId = null, commonWireVersion = null, options = null){\n        options = options ?? {};\n        this.type = topologyType ?? common_1.TopologyType.Unknown;\n        this.servers = serverDescriptions ?? new Map();\n        this.stale = false;\n        this.compatible = true;\n        this.heartbeatFrequencyMS = options.heartbeatFrequencyMS ?? 0;\n        this.localThresholdMS = options.localThresholdMS ?? 15;\n        this.setName = setName ?? null;\n        this.maxElectionId = maxElectionId ?? null;\n        this.maxSetVersion = maxSetVersion ?? null;\n        this.commonWireVersion = commonWireVersion ?? 0;\n        // determine server compatibility\n        for (const serverDescription of this.servers.values()){\n            // Load balancer mode is always compatible.\n            if (serverDescription.type === common_1.ServerType.Unknown || serverDescription.type === common_1.ServerType.LoadBalancer) {\n                continue;\n            }\n            if (serverDescription.minWireVersion > MAX_SUPPORTED_WIRE_VERSION) {\n                this.compatible = false;\n                this.compatibilityError = `Server at ${serverDescription.address} requires wire version ${serverDescription.minWireVersion}, but this version of the driver only supports up to ${MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${MAX_SUPPORTED_SERVER_VERSION})`;\n            }\n            if (serverDescription.maxWireVersion < MIN_SUPPORTED_WIRE_VERSION) {\n                this.compatible = false;\n                this.compatibilityError = `Server at ${serverDescription.address} reports wire version ${serverDescription.maxWireVersion}, but this version of the driver requires at least ${MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${MIN_SUPPORTED_SERVER_VERSION}).`;\n                break;\n            }\n        }\n        // Whenever a client updates the TopologyDescription from a hello response, it MUST set\n        // TopologyDescription.logicalSessionTimeoutMinutes to the smallest logicalSessionTimeoutMinutes\n        // value among ServerDescriptions of all data-bearing server types. If any have a null\n        // logicalSessionTimeoutMinutes, then TopologyDescription.logicalSessionTimeoutMinutes MUST be\n        // set to null.\n        this.logicalSessionTimeoutMinutes = null;\n        for (const [, server] of this.servers){\n            if (server.isReadable) {\n                if (server.logicalSessionTimeoutMinutes == null) {\n                    // If any of the servers have a null logicalSessionsTimeout, then the whole topology does\n                    this.logicalSessionTimeoutMinutes = null;\n                    break;\n                }\n                if (this.logicalSessionTimeoutMinutes == null) {\n                    // First server with a non null logicalSessionsTimeout\n                    this.logicalSessionTimeoutMinutes = server.logicalSessionTimeoutMinutes;\n                    continue;\n                }\n                // Always select the smaller of the:\n                // current server logicalSessionsTimeout and the topologies logicalSessionsTimeout\n                this.logicalSessionTimeoutMinutes = Math.min(this.logicalSessionTimeoutMinutes, server.logicalSessionTimeoutMinutes);\n            }\n        }\n    }\n    /**\n     * Returns a new TopologyDescription based on the SrvPollingEvent\n     * @internal\n     */ updateFromSrvPollingEvent(ev, srvMaxHosts = 0) {\n        /** The SRV addresses defines the set of addresses we should be using */ const incomingHostnames = ev.hostnames();\n        const currentHostnames = new Set(this.servers.keys());\n        const hostnamesToAdd = new Set(incomingHostnames);\n        const hostnamesToRemove = new Set();\n        for (const hostname of currentHostnames){\n            // filter hostnamesToAdd (made from incomingHostnames) down to what is *not* present in currentHostnames\n            hostnamesToAdd.delete(hostname);\n            if (!incomingHostnames.has(hostname)) {\n                // If the SRV Records no longer include this hostname\n                // we have to stop using it\n                hostnamesToRemove.add(hostname);\n            }\n        }\n        if (hostnamesToAdd.size === 0 && hostnamesToRemove.size === 0) {\n            // No new hosts to add and none to remove\n            return this;\n        }\n        const serverDescriptions = new Map(this.servers);\n        for (const removedHost of hostnamesToRemove){\n            serverDescriptions.delete(removedHost);\n        }\n        if (hostnamesToAdd.size > 0) {\n            if (srvMaxHosts === 0) {\n                // Add all!\n                for (const hostToAdd of hostnamesToAdd){\n                    serverDescriptions.set(hostToAdd, new server_description_1.ServerDescription(hostToAdd));\n                }\n            } else if (serverDescriptions.size < srvMaxHosts) {\n                // Add only the amount needed to get us back to srvMaxHosts\n                const selectedHosts = (0, utils_1.shuffle)(hostnamesToAdd, srvMaxHosts - serverDescriptions.size);\n                for (const selectedHostToAdd of selectedHosts){\n                    serverDescriptions.set(selectedHostToAdd, new server_description_1.ServerDescription(selectedHostToAdd));\n                }\n            }\n        }\n        return new TopologyDescription(this.type, serverDescriptions, this.setName, this.maxSetVersion, this.maxElectionId, this.commonWireVersion, {\n            heartbeatFrequencyMS: this.heartbeatFrequencyMS,\n            localThresholdMS: this.localThresholdMS\n        });\n    }\n    /**\n     * Returns a copy of this description updated with a given ServerDescription\n     * @internal\n     */ update(serverDescription) {\n        const address = serverDescription.address;\n        // potentially mutated values\n        let { type: topologyType, setName, maxSetVersion, maxElectionId, commonWireVersion } = this;\n        const serverType = serverDescription.type;\n        const serverDescriptions = new Map(this.servers);\n        // update common wire version\n        if (serverDescription.maxWireVersion !== 0) {\n            if (commonWireVersion == null) {\n                commonWireVersion = serverDescription.maxWireVersion;\n            } else {\n                commonWireVersion = Math.min(commonWireVersion, serverDescription.maxWireVersion);\n            }\n        }\n        if (typeof serverDescription.setName === \"string\" && typeof setName === \"string\" && serverDescription.setName !== setName) {\n            if (topologyType === common_1.TopologyType.Single) {\n                // \"Single\" Topology with setName mismatch is direct connection usage, mark unknown do not remove\n                serverDescription = new server_description_1.ServerDescription(address);\n            } else {\n                serverDescriptions.delete(address);\n            }\n        }\n        // update the actual server description\n        serverDescriptions.set(address, serverDescription);\n        if (topologyType === common_1.TopologyType.Single) {\n            // once we are defined as single, that never changes\n            return new TopologyDescription(common_1.TopologyType.Single, serverDescriptions, setName, maxSetVersion, maxElectionId, commonWireVersion, {\n                heartbeatFrequencyMS: this.heartbeatFrequencyMS,\n                localThresholdMS: this.localThresholdMS\n            });\n        }\n        if (topologyType === common_1.TopologyType.Unknown) {\n            if (serverType === common_1.ServerType.Standalone && this.servers.size !== 1) {\n                serverDescriptions.delete(address);\n            } else {\n                topologyType = topologyTypeForServerType(serverType);\n            }\n        }\n        if (topologyType === common_1.TopologyType.Sharded) {\n            if (!MONGOS_OR_UNKNOWN.has(serverType)) {\n                serverDescriptions.delete(address);\n            }\n        }\n        if (topologyType === common_1.TopologyType.ReplicaSetNoPrimary) {\n            if (MONGOS_OR_STANDALONE.has(serverType)) {\n                serverDescriptions.delete(address);\n            }\n            if (serverType === common_1.ServerType.RSPrimary) {\n                const result = updateRsFromPrimary(serverDescriptions, serverDescription, setName, maxSetVersion, maxElectionId);\n                topologyType = result[0];\n                setName = result[1];\n                maxSetVersion = result[2];\n                maxElectionId = result[3];\n            } else if (NON_PRIMARY_RS_MEMBERS.has(serverType)) {\n                const result = updateRsNoPrimaryFromMember(serverDescriptions, serverDescription, setName);\n                topologyType = result[0];\n                setName = result[1];\n            }\n        }\n        if (topologyType === common_1.TopologyType.ReplicaSetWithPrimary) {\n            if (MONGOS_OR_STANDALONE.has(serverType)) {\n                serverDescriptions.delete(address);\n                topologyType = checkHasPrimary(serverDescriptions);\n            } else if (serverType === common_1.ServerType.RSPrimary) {\n                const result = updateRsFromPrimary(serverDescriptions, serverDescription, setName, maxSetVersion, maxElectionId);\n                topologyType = result[0];\n                setName = result[1];\n                maxSetVersion = result[2];\n                maxElectionId = result[3];\n            } else if (NON_PRIMARY_RS_MEMBERS.has(serverType)) {\n                topologyType = updateRsWithPrimaryFromMember(serverDescriptions, serverDescription, setName);\n            } else {\n                topologyType = checkHasPrimary(serverDescriptions);\n            }\n        }\n        return new TopologyDescription(topologyType, serverDescriptions, setName, maxSetVersion, maxElectionId, commonWireVersion, {\n            heartbeatFrequencyMS: this.heartbeatFrequencyMS,\n            localThresholdMS: this.localThresholdMS\n        });\n    }\n    get error() {\n        const descriptionsWithError = Array.from(this.servers.values()).filter((sd)=>sd.error);\n        if (descriptionsWithError.length > 0) {\n            return descriptionsWithError[0].error;\n        }\n        return null;\n    }\n    /**\n     * Determines if the topology description has any known servers\n     */ get hasKnownServers() {\n        return Array.from(this.servers.values()).some((sd)=>sd.type !== common_1.ServerType.Unknown);\n    }\n    /**\n     * Determines if this topology description has a data-bearing server available.\n     */ get hasDataBearingServers() {\n        return Array.from(this.servers.values()).some((sd)=>sd.isDataBearing);\n    }\n    /**\n     * Determines if the topology has a definition for the provided address\n     * @internal\n     */ hasServer(address) {\n        return this.servers.has(address);\n    }\n}\nexports.TopologyDescription = TopologyDescription;\nfunction topologyTypeForServerType(serverType) {\n    switch(serverType){\n        case common_1.ServerType.Standalone:\n            return common_1.TopologyType.Single;\n        case common_1.ServerType.Mongos:\n            return common_1.TopologyType.Sharded;\n        case common_1.ServerType.RSPrimary:\n            return common_1.TopologyType.ReplicaSetWithPrimary;\n        case common_1.ServerType.RSOther:\n        case common_1.ServerType.RSSecondary:\n            return common_1.TopologyType.ReplicaSetNoPrimary;\n        default:\n            return common_1.TopologyType.Unknown;\n    }\n}\nfunction updateRsFromPrimary(serverDescriptions, serverDescription, setName = null, maxSetVersion = null, maxElectionId = null) {\n    setName = setName || serverDescription.setName;\n    if (setName !== serverDescription.setName) {\n        serverDescriptions.delete(serverDescription.address);\n        return [\n            checkHasPrimary(serverDescriptions),\n            setName,\n            maxSetVersion,\n            maxElectionId\n        ];\n    }\n    if (serverDescription.maxWireVersion >= 17) {\n        const electionIdComparison = (0, utils_1.compareObjectId)(maxElectionId, serverDescription.electionId);\n        const maxElectionIdIsEqual = electionIdComparison === 0;\n        const maxElectionIdIsLess = electionIdComparison === -1;\n        const maxSetVersionIsLessOrEqual = (maxSetVersion ?? -1) <= (serverDescription.setVersion ?? -1);\n        if (maxElectionIdIsLess || maxElectionIdIsEqual && maxSetVersionIsLessOrEqual) {\n            // The reported electionId was greater\n            // or the electionId was equal and reported setVersion was greater\n            // Always update both values, they are a tuple\n            maxElectionId = serverDescription.electionId;\n            maxSetVersion = serverDescription.setVersion;\n        } else {\n            // Stale primary\n            // replace serverDescription with a default ServerDescription of type \"Unknown\"\n            serverDescriptions.set(serverDescription.address, new server_description_1.ServerDescription(serverDescription.address));\n            return [\n                checkHasPrimary(serverDescriptions),\n                setName,\n                maxSetVersion,\n                maxElectionId\n            ];\n        }\n    } else {\n        const electionId = serverDescription.electionId ? serverDescription.electionId : null;\n        if (serverDescription.setVersion && electionId) {\n            if (maxSetVersion && maxElectionId) {\n                if (maxSetVersion > serverDescription.setVersion || (0, utils_1.compareObjectId)(maxElectionId, electionId) > 0) {\n                    // this primary is stale, we must remove it\n                    serverDescriptions.set(serverDescription.address, new server_description_1.ServerDescription(serverDescription.address));\n                    return [\n                        checkHasPrimary(serverDescriptions),\n                        setName,\n                        maxSetVersion,\n                        maxElectionId\n                    ];\n                }\n            }\n            maxElectionId = serverDescription.electionId;\n        }\n        if (serverDescription.setVersion != null && (maxSetVersion == null || serverDescription.setVersion > maxSetVersion)) {\n            maxSetVersion = serverDescription.setVersion;\n        }\n    }\n    // We've heard from the primary. Is it the same primary as before?\n    for (const [address, server] of serverDescriptions){\n        if (server.type === common_1.ServerType.RSPrimary && server.address !== serverDescription.address) {\n            // Reset old primary's type to Unknown.\n            serverDescriptions.set(address, new server_description_1.ServerDescription(server.address));\n            break;\n        }\n    }\n    // Discover new hosts from this primary's response.\n    serverDescription.allHosts.forEach((address)=>{\n        if (!serverDescriptions.has(address)) {\n            serverDescriptions.set(address, new server_description_1.ServerDescription(address));\n        }\n    });\n    // Remove hosts not in the response.\n    const currentAddresses = Array.from(serverDescriptions.keys());\n    const responseAddresses = serverDescription.allHosts;\n    currentAddresses.filter((addr)=>responseAddresses.indexOf(addr) === -1).forEach((address)=>{\n        serverDescriptions.delete(address);\n    });\n    return [\n        checkHasPrimary(serverDescriptions),\n        setName,\n        maxSetVersion,\n        maxElectionId\n    ];\n}\nfunction updateRsWithPrimaryFromMember(serverDescriptions, serverDescription, setName = null) {\n    if (setName == null) {\n        // TODO(NODE-3483): should be an appropriate runtime error\n        throw new error_1.MongoRuntimeError('Argument \"setName\" is required if connected to a replica set');\n    }\n    if (setName !== serverDescription.setName || serverDescription.me && serverDescription.address !== serverDescription.me) {\n        serverDescriptions.delete(serverDescription.address);\n    }\n    return checkHasPrimary(serverDescriptions);\n}\nfunction updateRsNoPrimaryFromMember(serverDescriptions, serverDescription, setName = null) {\n    const topologyType = common_1.TopologyType.ReplicaSetNoPrimary;\n    setName = setName ?? serverDescription.setName;\n    if (setName !== serverDescription.setName) {\n        serverDescriptions.delete(serverDescription.address);\n        return [\n            topologyType,\n            setName\n        ];\n    }\n    serverDescription.allHosts.forEach((address)=>{\n        if (!serverDescriptions.has(address)) {\n            serverDescriptions.set(address, new server_description_1.ServerDescription(address));\n        }\n    });\n    if (serverDescription.me && serverDescription.address !== serverDescription.me) {\n        serverDescriptions.delete(serverDescription.address);\n    }\n    return [\n        topologyType,\n        setName\n    ];\n}\nfunction checkHasPrimary(serverDescriptions) {\n    for (const serverDescription of serverDescriptions.values()){\n        if (serverDescription.type === common_1.ServerType.RSPrimary) {\n            return common_1.TopologyType.ReplicaSetWithPrimary;\n        }\n    }\n    return common_1.TopologyType.ReplicaSetNoPrimary;\n} //# sourceMappingURL=topology_description.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS90b3BvbG9neV9kZXNjcmlwdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkJBQTJCLEdBQUcsS0FBSztBQUNuQyxNQUFNRyxpQkFBaUJDLG1CQUFPQSxDQUFDLHlHQUFpQztBQUNoRSxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQywyREFBVTtBQUNsQyxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyxpRUFBVTtBQUNuQyxNQUFNSSx1QkFBdUJKLG1CQUFPQSxDQUFDLHlGQUFzQjtBQUMzRCw0Q0FBNEM7QUFDNUMsTUFBTUssK0JBQStCTixlQUFlTSw0QkFBNEI7QUFDaEYsTUFBTUMsK0JBQStCUCxlQUFlTyw0QkFBNEI7QUFDaEYsTUFBTUMsNkJBQTZCUixlQUFlUSwwQkFBMEI7QUFDNUUsTUFBTUMsNkJBQTZCVCxlQUFlUywwQkFBMEI7QUFDNUUsTUFBTUMsb0JBQW9CLElBQUlDLElBQUk7SUFBQ1AsU0FBU1EsVUFBVSxDQUFDQyxNQUFNO0lBQUVULFNBQVNRLFVBQVUsQ0FBQ0UsT0FBTztDQUFDO0FBQzNGLE1BQU1DLHVCQUF1QixJQUFJSixJQUFJO0lBQUNQLFNBQVNRLFVBQVUsQ0FBQ0MsTUFBTTtJQUFFVCxTQUFTUSxVQUFVLENBQUNJLFVBQVU7Q0FBQztBQUNqRyxNQUFNQyx5QkFBeUIsSUFBSU4sSUFBSTtJQUNuQ1AsU0FBU1EsVUFBVSxDQUFDTSxXQUFXO0lBQy9CZCxTQUFTUSxVQUFVLENBQUNPLFNBQVM7SUFDN0JmLFNBQVNRLFVBQVUsQ0FBQ1EsT0FBTztDQUM5QjtBQUNEOzs7Q0FHQyxHQUNELE1BQU1yQjtJQUNGOztLQUVDLEdBQ0RzQixZQUFZQyxZQUFZLEVBQUVDLHFCQUFxQixJQUFJLEVBQUVDLFVBQVUsSUFBSSxFQUFFQyxnQkFBZ0Is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aUUsUUFBUSxDQUFDQyxPQUFPLENBQUMsQ0FBQzdEO1FBQ2hDLElBQUksQ0FBQ25CLG1CQUFtQnFDLEdBQUcsQ0FBQ2xCLFVBQVU7WUFDbENuQixtQkFBbUIwQyxHQUFHLENBQUN2QixTQUFTLElBQUlyQyxxQkFBcUI2RCxpQkFBaUIsQ0FBQ3hCO1FBQy9FO0lBQ0o7SUFDQSxJQUFJTCxrQkFBa0J3RSxFQUFFLElBQUl4RSxrQkFBa0JLLE9BQU8sS0FBS0wsa0JBQWtCd0UsRUFBRSxFQUFFO1FBQzVFdEYsbUJBQW1Cb0MsTUFBTSxDQUFDdEIsa0JBQWtCSyxPQUFPO0lBQ3ZEO0lBQ0EsT0FBTztRQUFDcEI7UUFBY0U7S0FBUTtBQUNsQztBQUNBLFNBQVN5RCxnQkFBZ0IxRCxrQkFBa0I7SUFDdkMsS0FBSyxNQUFNYyxxQkFBcUJkLG1CQUFtQmUsTUFBTSxHQUFJO1FBQ3pELElBQUlELGtCQUFrQlIsSUFBSSxLQUFLekIsU0FBU1EsVUFBVSxDQUFDZ0UsU0FBUyxFQUFFO1lBQzFELE9BQU94RSxTQUFTMEIsWUFBWSxDQUFDa0QscUJBQXFCO1FBQ3REO0lBQ0o7SUFDQSxPQUFPNUUsU0FBUzBCLFlBQVksQ0FBQzZDLG1CQUFtQjtBQUNwRCxFQUNBLGdEQUFnRCIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2RhbS90b3BvbG9neV9kZXNjcmlwdGlvbi5qcz8xYmVjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Ub3BvbG9neURlc2NyaXB0aW9uID0gdm9pZCAwO1xuY29uc3QgV0lSRV9DT05TVEFOVFMgPSByZXF1aXJlKFwiLi4vY21hcC93aXJlX3Byb3RvY29sL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi4vZXJyb3JcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi9jb21tb25cIik7XG5jb25zdCBzZXJ2ZXJfZGVzY3JpcHRpb25fMSA9IHJlcXVpcmUoXCIuL3NlcnZlcl9kZXNjcmlwdGlvblwiKTtcbi8vIGNvbnN0YW50cyByZWxhdGVkIHRvIGNvbXBhdGliaWxpdHkgY2hlY2tzXG5jb25zdCBNSU5fU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OID0gV0lSRV9DT05TVEFOVFMuTUlOX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTjtcbmNvbnN0IE1BWF9TVVBQT1JURURfU0VSVkVSX1ZFUlNJT04gPSBXSVJFX0NPTlNUQU5UUy5NQVhfU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OO1xuY29uc3QgTUlOX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04gPSBXSVJFX0NPTlNUQU5UUy5NSU5fU1VQUE9SVEVEX1dJUkVfVkVSU0lPTjtcbmNvbnN0IE1BWF9TVVBQT1JURURfV0lSRV9WRVJTSU9OID0gV0lSRV9DT05TVEFOVFMuTUFYX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT047XG5jb25zdCBNT05HT1NfT1JfVU5LTk9XTiA9IG5ldyBTZXQoW2NvbW1vbl8xLlNlcnZlclR5cGUuTW9uZ29zLCBjb21tb25fMS5TZXJ2ZXJUeXBlLlVua25vd25dKTtcbmNvbnN0IE1PTkdPU19PUl9TVEFOREFMT05FID0gbmV3IFNldChbY29tbW9uXzEuU2VydmVyVHlwZS5Nb25nb3MsIGNvbW1vbl8xLlNlcnZlclR5cGUuU3RhbmRhbG9uZV0pO1xuY29uc3QgTk9OX1BSSU1BUllfUlNfTUVNQkVSUyA9IG5ldyBTZXQoW1xuICAgIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNTZWNvbmRhcnksXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5SU0FyYml0ZXIsXG4gICAgY29tbW9uXzEuU2VydmVyVHlwZS5SU090aGVyXG5dKTtcbi8qKlxuICogUmVwcmVzZW50YXRpb24gb2YgYSBkZXBsb3ltZW50IG9mIHNlcnZlcnNcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgVG9wb2xvZ3lEZXNjcmlwdGlvbiB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVG9wb2xvZ3lEZXNjcmlwdGlvblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRvcG9sb2d5VHlwZSwgc2VydmVyRGVzY3JpcHRpb25zID0gbnVsbCwgc2V0TmFtZSA9IG51bGwsIG1heFNldFZlcnNpb24gPSBudWxsLCBtYXhFbGVjdGlvbklkID0gbnVsbCwgY29tbW9uV2lyZVZlcnNpb24gPSBudWxsLCBvcHRpb25zID0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgdGhpcy50eXBlID0gdG9wb2xvZ3lUeXBlID8/IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5Vbmtub3duO1xuICAgICAgICB0aGlzLnNlcnZlcnMgPSBzZXJ2ZXJEZXNjcmlwdGlvbnMgPz8gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnN0YWxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29tcGF0aWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaGVhcnRiZWF0RnJlcXVlbmN5TVMgPSBvcHRpb25zLmhlYXJ0YmVhdEZyZXF1ZW5jeU1TID8/IDA7XG4gICAgICAgIHRoaXMubG9jYWxUaHJlc2hvbGRNUyA9IG9wdGlvbnMubG9jYWxUaHJlc2hvbGRNUyA/PyAxNTtcbiAgICAgICAgdGhpcy5zZXROYW1lID0gc2V0TmFtZSA/PyBudWxsO1xuICAgICAgICB0aGlzLm1heEVsZWN0aW9uSWQgPSBtYXhFbGVjdGlvbklkID8/IG51bGw7XG4gICAgICAgIHRoaXMubWF4U2V0VmVyc2lvbiA9IG1heFNldFZlcnNpb24gPz8gbnVsbDtcbiAgICAgICAgdGhpcy5jb21tb25XaXJlVmVyc2lvbiA9IGNvbW1vbldpcmVWZXJzaW9uID8/IDA7XG4gICAgICAgIC8vIGRldGVybWluZSBzZXJ2ZXIgY29tcGF0aWJpbGl0eVxuICAgICAgICBmb3IgKGNvbnN0IHNlcnZlckRlc2NyaXB0aW9uIG9mIHRoaXMuc2VydmVycy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgLy8gTG9hZCBiYWxhbmNlciBtb2RlIGlzIGFsd2F5cyBjb21wYXRpYmxlLlxuICAgICAgICAgICAgaWYgKHNlcnZlckRlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuVW5rbm93biB8fFxuICAgICAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9uLnR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuTG9hZEJhbGFuY2VyKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VydmVyRGVzY3JpcHRpb24ubWluV2lyZVZlcnNpb24gPiBNQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcGF0aWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcGF0aWJpbGl0eUVycm9yID0gYFNlcnZlciBhdCAke3NlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3N9IHJlcXVpcmVzIHdpcmUgdmVyc2lvbiAke3NlcnZlckRlc2NyaXB0aW9uLm1pbldpcmVWZXJzaW9ufSwgYnV0IHRoaXMgdmVyc2lvbiBvZiB0aGUgZHJpdmVyIG9ubHkgc3VwcG9ydHMgdXAgdG8gJHtNQVhfU1VQUE9SVEVEX1dJUkVfVkVSU0lPTn0gKE1vbmdvREIgJHtNQVhfU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OfSlgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcnZlckRlc2NyaXB0aW9uLm1heFdpcmVWZXJzaW9uIDwgTUlOX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBhdGliaWxpdHlFcnJvciA9IGBTZXJ2ZXIgYXQgJHtzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzfSByZXBvcnRzIHdpcmUgdmVyc2lvbiAke3NlcnZlckRlc2NyaXB0aW9uLm1heFdpcmVWZXJzaW9ufSwgYnV0IHRoaXMgdmVyc2lvbiBvZiB0aGUgZHJpdmVyIHJlcXVpcmVzIGF0IGxlYXN0ICR7TUlOX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT059IChNb25nb0RCICR7TUlOX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTn0pLmA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbmV2ZXIgYSBjbGllbnQgdXBkYXRlcyB0aGUgVG9wb2xvZ3lEZXNjcmlwdGlvbiBmcm9tIGEgaGVsbG8gcmVzcG9uc2UsIGl0IE1VU1Qgc2V0XG4gICAgICAgIC8vIFRvcG9sb2d5RGVzY3JpcHRpb24ubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyB0byB0aGUgc21hbGxlc3QgbG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlc1xuICAgICAgICAvLyB2YWx1ZSBhbW9uZyBTZXJ2ZXJEZXNjcmlwdGlvbnMgb2YgYWxsIGRhdGEtYmVhcmluZyBzZXJ2ZXIgdHlwZXMuIElmIGFueSBoYXZlIGEgbnVsbFxuICAgICAgICAvLyBsb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzLCB0aGVuIFRvcG9sb2d5RGVzY3JpcHRpb24ubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyBNVVNUIGJlXG4gICAgICAgIC8vIHNldCB0byBudWxsLlxuICAgICAgICB0aGlzLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMgPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IFssIHNlcnZlcl0gb2YgdGhpcy5zZXJ2ZXJzKSB7XG4gICAgICAgICAgICBpZiAoc2VydmVyLmlzUmVhZGFibGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VydmVyLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbnkgb2YgdGhlIHNlcnZlcnMgaGF2ZSBhIG51bGwgbG9naWNhbFNlc3Npb25zVGltZW91dCwgdGhlbiB0aGUgd2hvbGUgdG9wb2xvZ3kgZG9lc1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IHNlcnZlciB3aXRoIGEgbm9uIG51bGwgbG9naWNhbFNlc3Npb25zVGltZW91dFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMgPSBzZXJ2ZXIubG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcztcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBzZWxlY3QgdGhlIHNtYWxsZXIgb2YgdGhlOlxuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgc2VydmVyIGxvZ2ljYWxTZXNzaW9uc1RpbWVvdXQgYW5kIHRoZSB0b3BvbG9naWVzIGxvZ2ljYWxTZXNzaW9uc1RpbWVvdXRcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMgPSBNYXRoLm1pbih0aGlzLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMsIHNlcnZlci5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IFRvcG9sb2d5RGVzY3JpcHRpb24gYmFzZWQgb24gdGhlIFNydlBvbGxpbmdFdmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZUZyb21TcnZQb2xsaW5nRXZlbnQoZXYsIHNydk1heEhvc3RzID0gMCkge1xuICAgICAgICAvKiogVGhlIFNSViBhZGRyZXNzZXMgZGVmaW5lcyB0aGUgc2V0IG9mIGFkZHJlc3NlcyB3ZSBzaG91bGQgYmUgdXNpbmcgKi9cbiAgICAgICAgY29uc3QgaW5jb21pbmdIb3N0bmFtZXMgPSBldi5ob3N0bmFtZXMoKTtcbiAgICAgICAgY29uc3QgY3VycmVudEhvc3RuYW1lcyA9IG5ldyBTZXQodGhpcy5zZXJ2ZXJzLmtleXMoKSk7XG4gICAgICAgIGNvbnN0IGhvc3RuYW1lc1RvQWRkID0gbmV3IFNldChpbmNvbWluZ0hvc3RuYW1lcyk7XG4gICAgICAgIGNvbnN0IGhvc3RuYW1lc1RvUmVtb3ZlID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGhvc3RuYW1lIG9mIGN1cnJlbnRIb3N0bmFtZXMpIHtcbiAgICAgICAgICAgIC8vIGZpbHRlciBob3N0bmFtZXNUb0FkZCAobWFkZSBmcm9tIGluY29taW5nSG9zdG5hbWVzKSBkb3duIHRvIHdoYXQgaXMgKm5vdCogcHJlc2VudCBpbiBjdXJyZW50SG9zdG5hbWVzXG4gICAgICAgICAgICBob3N0bmFtZXNUb0FkZC5kZWxldGUoaG9zdG5hbWUpO1xuICAgICAgICAgICAgaWYgKCFpbmNvbWluZ0hvc3RuYW1lcy5oYXMoaG9zdG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIFNSViBSZWNvcmRzIG5vIGxvbmdlciBpbmNsdWRlIHRoaXMgaG9zdG5hbWVcbiAgICAgICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIHN0b3AgdXNpbmcgaXRcbiAgICAgICAgICAgICAgICBob3N0bmFtZXNUb1JlbW92ZS5hZGQoaG9zdG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChob3N0bmFtZXNUb0FkZC5zaXplID09PSAwICYmIGhvc3RuYW1lc1RvUmVtb3ZlLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIC8vIE5vIG5ldyBob3N0cyB0byBhZGQgYW5kIG5vbmUgdG8gcmVtb3ZlXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXJ2ZXJEZXNjcmlwdGlvbnMgPSBuZXcgTWFwKHRoaXMuc2VydmVycyk7XG4gICAgICAgIGZvciAoY29uc3QgcmVtb3ZlZEhvc3Qgb2YgaG9zdG5hbWVzVG9SZW1vdmUpIHtcbiAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5kZWxldGUocmVtb3ZlZEhvc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChob3N0bmFtZXNUb0FkZC5zaXplID4gMCkge1xuICAgICAgICAgICAgaWYgKHNydk1heEhvc3RzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIGFsbCFcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGhvc3RUb0FkZCBvZiBob3N0bmFtZXNUb0FkZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuc2V0KGhvc3RUb0FkZCwgbmV3IHNlcnZlcl9kZXNjcmlwdGlvbl8xLlNlcnZlckRlc2NyaXB0aW9uKGhvc3RUb0FkZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlcnZlckRlc2NyaXB0aW9ucy5zaXplIDwgc3J2TWF4SG9zdHMpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgb25seSB0aGUgYW1vdW50IG5lZWRlZCB0byBnZXQgdXMgYmFjayB0byBzcnZNYXhIb3N0c1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSG9zdHMgPSAoMCwgdXRpbHNfMS5zaHVmZmxlKShob3N0bmFtZXNUb0FkZCwgc3J2TWF4SG9zdHMgLSBzZXJ2ZXJEZXNjcmlwdGlvbnMuc2l6ZSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzZWxlY3RlZEhvc3RUb0FkZCBvZiBzZWxlY3RlZEhvc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5zZXQoc2VsZWN0ZWRIb3N0VG9BZGQsIG5ldyBzZXJ2ZXJfZGVzY3JpcHRpb25fMS5TZXJ2ZXJEZXNjcmlwdGlvbihzZWxlY3RlZEhvc3RUb0FkZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFRvcG9sb2d5RGVzY3JpcHRpb24odGhpcy50eXBlLCBzZXJ2ZXJEZXNjcmlwdGlvbnMsIHRoaXMuc2V0TmFtZSwgdGhpcy5tYXhTZXRWZXJzaW9uLCB0aGlzLm1heEVsZWN0aW9uSWQsIHRoaXMuY29tbW9uV2lyZVZlcnNpb24sIHsgaGVhcnRiZWF0RnJlcXVlbmN5TVM6IHRoaXMuaGVhcnRiZWF0RnJlcXVlbmN5TVMsIGxvY2FsVGhyZXNob2xkTVM6IHRoaXMubG9jYWxUaHJlc2hvbGRNUyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyBkZXNjcmlwdGlvbiB1cGRhdGVkIHdpdGggYSBnaXZlbiBTZXJ2ZXJEZXNjcmlwdGlvblxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZShzZXJ2ZXJEZXNjcmlwdGlvbikge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcztcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgbXV0YXRlZCB2YWx1ZXNcbiAgICAgICAgbGV0IHsgdHlwZTogdG9wb2xvZ3lUeXBlLCBzZXROYW1lLCBtYXhTZXRWZXJzaW9uLCBtYXhFbGVjdGlvbklkLCBjb21tb25XaXJlVmVyc2lvbiB9ID0gdGhpcztcbiAgICAgICAgY29uc3Qgc2VydmVyVHlwZSA9IHNlcnZlckRlc2NyaXB0aW9uLnR5cGU7XG4gICAgICAgIGNvbnN0IHNlcnZlckRlc2NyaXB0aW9ucyA9IG5ldyBNYXAodGhpcy5zZXJ2ZXJzKTtcbiAgICAgICAgLy8gdXBkYXRlIGNvbW1vbiB3aXJlIHZlcnNpb25cbiAgICAgICAgaWYgKHNlcnZlckRlc2NyaXB0aW9uLm1heFdpcmVWZXJzaW9uICE9PSAwKSB7XG4gICAgICAgICAgICBpZiAoY29tbW9uV2lyZVZlcnNpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbW1vbldpcmVWZXJzaW9uID0gc2VydmVyRGVzY3JpcHRpb24ubWF4V2lyZVZlcnNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21tb25XaXJlVmVyc2lvbiA9IE1hdGgubWluKGNvbW1vbldpcmVWZXJzaW9uLCBzZXJ2ZXJEZXNjcmlwdGlvbi5tYXhXaXJlVmVyc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBzZXJ2ZXJEZXNjcmlwdGlvbi5zZXROYW1lID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgdHlwZW9mIHNldE5hbWUgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbi5zZXROYW1lICE9PSBzZXROYW1lKSB7XG4gICAgICAgICAgICBpZiAodG9wb2xvZ3lUeXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuU2luZ2xlKSB7XG4gICAgICAgICAgICAgICAgLy8gXCJTaW5nbGVcIiBUb3BvbG9neSB3aXRoIHNldE5hbWUgbWlzbWF0Y2ggaXMgZGlyZWN0IGNvbm5lY3Rpb24gdXNhZ2UsIG1hcmsgdW5rbm93biBkbyBub3QgcmVtb3ZlXG4gICAgICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb24gPSBuZXcgc2VydmVyX2Rlc2NyaXB0aW9uXzEuU2VydmVyRGVzY3JpcHRpb24oYWRkcmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuZGVsZXRlKGFkZHJlc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgYWN0dWFsIHNlcnZlciBkZXNjcmlwdGlvblxuICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuc2V0KGFkZHJlc3MsIHNlcnZlckRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKHRvcG9sb2d5VHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNpbmdsZSkge1xuICAgICAgICAgICAgLy8gb25jZSB3ZSBhcmUgZGVmaW5lZCBhcyBzaW5nbGUsIHRoYXQgbmV2ZXIgY2hhbmdlc1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUb3BvbG9neURlc2NyaXB0aW9uKGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5TaW5nbGUsIHNlcnZlckRlc2NyaXB0aW9ucywgc2V0TmFtZSwgbWF4U2V0VmVyc2lvbiwgbWF4RWxlY3Rpb25JZCwgY29tbW9uV2lyZVZlcnNpb24sIHsgaGVhcnRiZWF0RnJlcXVlbmN5TVM6IHRoaXMuaGVhcnRiZWF0RnJlcXVlbmN5TVMsIGxvY2FsVGhyZXNob2xkTVM6IHRoaXMubG9jYWxUaHJlc2hvbGRNUyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9wb2xvZ3lUeXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuVW5rbm93bikge1xuICAgICAgICAgICAgaWYgKHNlcnZlclR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuU3RhbmRhbG9uZSAmJiB0aGlzLnNlcnZlcnMuc2l6ZSAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5kZWxldGUoYWRkcmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b3BvbG9neVR5cGUgPSB0b3BvbG9neVR5cGVGb3JTZXJ2ZXJUeXBlKHNlcnZlclR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0b3BvbG9neVR5cGUgPT09IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5TaGFyZGVkKSB7XG4gICAgICAgICAgICBpZiAoIU1PTkdPU19PUl9VTktOT1dOLmhhcyhzZXJ2ZXJUeXBlKSkge1xuICAgICAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5kZWxldGUoYWRkcmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcG9sb2d5VHlwZSA9PT0gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlJlcGxpY2FTZXROb1ByaW1hcnkpIHtcbiAgICAgICAgICAgIGlmIChNT05HT1NfT1JfU1RBTkRBTE9ORS5oYXMoc2VydmVyVHlwZSkpIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuZGVsZXRlKGFkZHJlc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcnZlclR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuUlNQcmltYXJ5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdXBkYXRlUnNGcm9tUHJpbWFyeShzZXJ2ZXJEZXNjcmlwdGlvbnMsIHNlcnZlckRlc2NyaXB0aW9uLCBzZXROYW1lLCBtYXhTZXRWZXJzaW9uLCBtYXhFbGVjdGlvbklkKTtcbiAgICAgICAgICAgICAgICB0b3BvbG9neVR5cGUgPSByZXN1bHRbMF07XG4gICAgICAgICAgICAgICAgc2V0TmFtZSA9IHJlc3VsdFsxXTtcbiAgICAgICAgICAgICAgICBtYXhTZXRWZXJzaW9uID0gcmVzdWx0WzJdO1xuICAgICAgICAgICAgICAgIG1heEVsZWN0aW9uSWQgPSByZXN1bHRbM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChOT05fUFJJTUFSWV9SU19NRU1CRVJTLmhhcyhzZXJ2ZXJUeXBlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHVwZGF0ZVJzTm9QcmltYXJ5RnJvbU1lbWJlcihzZXJ2ZXJEZXNjcmlwdGlvbnMsIHNlcnZlckRlc2NyaXB0aW9uLCBzZXROYW1lKTtcbiAgICAgICAgICAgICAgICB0b3BvbG9neVR5cGUgPSByZXN1bHRbMF07XG4gICAgICAgICAgICAgICAgc2V0TmFtZSA9IHJlc3VsdFsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodG9wb2xvZ3lUeXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuUmVwbGljYVNldFdpdGhQcmltYXJ5KSB7XG4gICAgICAgICAgICBpZiAoTU9OR09TX09SX1NUQU5EQUxPTkUuaGFzKHNlcnZlclR5cGUpKSB7XG4gICAgICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLmRlbGV0ZShhZGRyZXNzKTtcbiAgICAgICAgICAgICAgICB0b3BvbG9neVR5cGUgPSBjaGVja0hhc1ByaW1hcnkoc2VydmVyRGVzY3JpcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlcnZlclR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuUlNQcmltYXJ5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdXBkYXRlUnNGcm9tUHJpbWFyeShzZXJ2ZXJEZXNjcmlwdGlvbnMsIHNlcnZlckRlc2NyaXB0aW9uLCBzZXROYW1lLCBtYXhTZXRWZXJzaW9uLCBtYXhFbGVjdGlvbklkKTtcbiAgICAgICAgICAgICAgICB0b3BvbG9neVR5cGUgPSByZXN1bHRbMF07XG4gICAgICAgICAgICAgICAgc2V0TmFtZSA9IHJlc3VsdFsxXTtcbiAgICAgICAgICAgICAgICBtYXhTZXRWZXJzaW9uID0gcmVzdWx0WzJdO1xuICAgICAgICAgICAgICAgIG1heEVsZWN0aW9uSWQgPSByZXN1bHRbM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChOT05fUFJJTUFSWV9SU19NRU1CRVJTLmhhcyhzZXJ2ZXJUeXBlKSkge1xuICAgICAgICAgICAgICAgIHRvcG9sb2d5VHlwZSA9IHVwZGF0ZVJzV2l0aFByaW1hcnlGcm9tTWVtYmVyKHNlcnZlckRlc2NyaXB0aW9ucywgc2VydmVyRGVzY3JpcHRpb24sIHNldE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9wb2xvZ3lUeXBlID0gY2hlY2tIYXNQcmltYXJ5KHNlcnZlckRlc2NyaXB0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUb3BvbG9neURlc2NyaXB0aW9uKHRvcG9sb2d5VHlwZSwgc2VydmVyRGVzY3JpcHRpb25zLCBzZXROYW1lLCBtYXhTZXRWZXJzaW9uLCBtYXhFbGVjdGlvbklkLCBjb21tb25XaXJlVmVyc2lvbiwgeyBoZWFydGJlYXRGcmVxdWVuY3lNUzogdGhpcy5oZWFydGJlYXRGcmVxdWVuY3lNUywgbG9jYWxUaHJlc2hvbGRNUzogdGhpcy5sb2NhbFRocmVzaG9sZE1TIH0pO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uc1dpdGhFcnJvciA9IEFycmF5LmZyb20odGhpcy5zZXJ2ZXJzLnZhbHVlcygpKS5maWx0ZXIoKHNkKSA9PiBzZC5lcnJvcik7XG4gICAgICAgIGlmIChkZXNjcmlwdGlvbnNXaXRoRXJyb3IubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uc1dpdGhFcnJvclswXS5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgdG9wb2xvZ3kgZGVzY3JpcHRpb24gaGFzIGFueSBrbm93biBzZXJ2ZXJzXG4gICAgICovXG4gICAgZ2V0IGhhc0tub3duU2VydmVycygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zZXJ2ZXJzLnZhbHVlcygpKS5zb21lKChzZCkgPT4gc2QudHlwZSAhPT0gY29tbW9uXzEuU2VydmVyVHlwZS5Vbmtub3duKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIHRvcG9sb2d5IGRlc2NyaXB0aW9uIGhhcyBhIGRhdGEtYmVhcmluZyBzZXJ2ZXIgYXZhaWxhYmxlLlxuICAgICAqL1xuICAgIGdldCBoYXNEYXRhQmVhcmluZ1NlcnZlcnMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuc2VydmVycy52YWx1ZXMoKSkuc29tZSgoc2QpID0+IHNkLmlzRGF0YUJlYXJpbmcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSB0b3BvbG9neSBoYXMgYSBkZWZpbml0aW9uIGZvciB0aGUgcHJvdmlkZWQgYWRkcmVzc1xuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGhhc1NlcnZlcihhZGRyZXNzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcnZlcnMuaGFzKGFkZHJlc3MpO1xuICAgIH1cbn1cbmV4cG9ydHMuVG9wb2xvZ3lEZXNjcmlwdGlvbiA9IFRvcG9sb2d5RGVzY3JpcHRpb247XG5mdW5jdGlvbiB0b3BvbG9neVR5cGVGb3JTZXJ2ZXJUeXBlKHNlcnZlclR5cGUpIHtcbiAgICBzd2l0Y2ggKHNlcnZlclR5cGUpIHtcbiAgICAgICAgY2FzZSBjb21tb25fMS5TZXJ2ZXJUeXBlLlN0YW5kYWxvbmU6XG4gICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuVG9wb2xvZ3lUeXBlLlNpbmdsZTtcbiAgICAgICAgY2FzZSBjb21tb25fMS5TZXJ2ZXJUeXBlLk1vbmdvczpcbiAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5Ub3BvbG9neVR5cGUuU2hhcmRlZDtcbiAgICAgICAgY2FzZSBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTUHJpbWFyeTpcbiAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5Ub3BvbG9neVR5cGUuUmVwbGljYVNldFdpdGhQcmltYXJ5O1xuICAgICAgICBjYXNlIGNvbW1vbl8xLlNlcnZlclR5cGUuUlNPdGhlcjpcbiAgICAgICAgY2FzZSBjb21tb25fMS5TZXJ2ZXJUeXBlLlJTU2Vjb25kYXJ5OlxuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0Tm9QcmltYXJ5O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5Vbmtub3duO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZVJzRnJvbVByaW1hcnkoc2VydmVyRGVzY3JpcHRpb25zLCBzZXJ2ZXJEZXNjcmlwdGlvbiwgc2V0TmFtZSA9IG51bGwsIG1heFNldFZlcnNpb24gPSBudWxsLCBtYXhFbGVjdGlvbklkID0gbnVsbCkge1xuICAgIHNldE5hbWUgPSBzZXROYW1lIHx8IHNlcnZlckRlc2NyaXB0aW9uLnNldE5hbWU7XG4gICAgaWYgKHNldE5hbWUgIT09IHNlcnZlckRlc2NyaXB0aW9uLnNldE5hbWUpIHtcbiAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLmRlbGV0ZShzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKTtcbiAgICAgICAgcmV0dXJuIFtjaGVja0hhc1ByaW1hcnkoc2VydmVyRGVzY3JpcHRpb25zKSwgc2V0TmFtZSwgbWF4U2V0VmVyc2lvbiwgbWF4RWxlY3Rpb25JZF07XG4gICAgfVxuICAgIGlmIChzZXJ2ZXJEZXNjcmlwdGlvbi5tYXhXaXJlVmVyc2lvbiA+PSAxNykge1xuICAgICAgICBjb25zdCBlbGVjdGlvbklkQ29tcGFyaXNvbiA9ICgwLCB1dGlsc18xLmNvbXBhcmVPYmplY3RJZCkobWF4RWxlY3Rpb25JZCwgc2VydmVyRGVzY3JpcHRpb24uZWxlY3Rpb25JZCk7XG4gICAgICAgIGNvbnN0IG1heEVsZWN0aW9uSWRJc0VxdWFsID0gZWxlY3Rpb25JZENvbXBhcmlzb24gPT09IDA7XG4gICAgICAgIGNvbnN0IG1heEVsZWN0aW9uSWRJc0xlc3MgPSBlbGVjdGlvbklkQ29tcGFyaXNvbiA9PT0gLTE7XG4gICAgICAgIGNvbnN0IG1heFNldFZlcnNpb25Jc0xlc3NPckVxdWFsID0gKG1heFNldFZlcnNpb24gPz8gLTEpIDw9IChzZXJ2ZXJEZXNjcmlwdGlvbi5zZXRWZXJzaW9uID8/IC0xKTtcbiAgICAgICAgaWYgKG1heEVsZWN0aW9uSWRJc0xlc3MgfHwgKG1heEVsZWN0aW9uSWRJc0VxdWFsICYmIG1heFNldFZlcnNpb25Jc0xlc3NPckVxdWFsKSkge1xuICAgICAgICAgICAgLy8gVGhlIHJlcG9ydGVkIGVsZWN0aW9uSWQgd2FzIGdyZWF0ZXJcbiAgICAgICAgICAgIC8vIG9yIHRoZSBlbGVjdGlvbklkIHdhcyBlcXVhbCBhbmQgcmVwb3J0ZWQgc2V0VmVyc2lvbiB3YXMgZ3JlYXRlclxuICAgICAgICAgICAgLy8gQWx3YXlzIHVwZGF0ZSBib3RoIHZhbHVlcywgdGhleSBhcmUgYSB0dXBsZVxuICAgICAgICAgICAgbWF4RWxlY3Rpb25JZCA9IHNlcnZlckRlc2NyaXB0aW9uLmVsZWN0aW9uSWQ7XG4gICAgICAgICAgICBtYXhTZXRWZXJzaW9uID0gc2VydmVyRGVzY3JpcHRpb24uc2V0VmVyc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFN0YWxlIHByaW1hcnlcbiAgICAgICAgICAgIC8vIHJlcGxhY2Ugc2VydmVyRGVzY3JpcHRpb24gd2l0aCBhIGRlZmF1bHQgU2VydmVyRGVzY3JpcHRpb24gb2YgdHlwZSBcIlVua25vd25cIlxuICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLnNldChzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzLCBuZXcgc2VydmVyX2Rlc2NyaXB0aW9uXzEuU2VydmVyRGVzY3JpcHRpb24oc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcykpO1xuICAgICAgICAgICAgcmV0dXJuIFtjaGVja0hhc1ByaW1hcnkoc2VydmVyRGVzY3JpcHRpb25zKSwgc2V0TmFtZSwgbWF4U2V0VmVyc2lvbiwgbWF4RWxlY3Rpb25JZF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGVsZWN0aW9uSWQgPSBzZXJ2ZXJEZXNjcmlwdGlvbi5lbGVjdGlvbklkID8gc2VydmVyRGVzY3JpcHRpb24uZWxlY3Rpb25JZCA6IG51bGw7XG4gICAgICAgIGlmIChzZXJ2ZXJEZXNjcmlwdGlvbi5zZXRWZXJzaW9uICYmIGVsZWN0aW9uSWQpIHtcbiAgICAgICAgICAgIGlmIChtYXhTZXRWZXJzaW9uICYmIG1heEVsZWN0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4U2V0VmVyc2lvbiA+IHNlcnZlckRlc2NyaXB0aW9uLnNldFZlcnNpb24gfHxcbiAgICAgICAgICAgICAgICAgICAgKDAsIHV0aWxzXzEuY29tcGFyZU9iamVjdElkKShtYXhFbGVjdGlvbklkLCBlbGVjdGlvbklkKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBwcmltYXJ5IGlzIHN0YWxlLCB3ZSBtdXN0IHJlbW92ZSBpdFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEZXNjcmlwdGlvbnMuc2V0KHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MsIG5ldyBzZXJ2ZXJfZGVzY3JpcHRpb25fMS5TZXJ2ZXJEZXNjcmlwdGlvbihzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbY2hlY2tIYXNQcmltYXJ5KHNlcnZlckRlc2NyaXB0aW9ucyksIHNldE5hbWUsIG1heFNldFZlcnNpb24sIG1heEVsZWN0aW9uSWRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1heEVsZWN0aW9uSWQgPSBzZXJ2ZXJEZXNjcmlwdGlvbi5lbGVjdGlvbklkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXJ2ZXJEZXNjcmlwdGlvbi5zZXRWZXJzaW9uICE9IG51bGwgJiZcbiAgICAgICAgICAgIChtYXhTZXRWZXJzaW9uID09IG51bGwgfHwgc2VydmVyRGVzY3JpcHRpb24uc2V0VmVyc2lvbiA+IG1heFNldFZlcnNpb24pKSB7XG4gICAgICAgICAgICBtYXhTZXRWZXJzaW9uID0gc2VydmVyRGVzY3JpcHRpb24uc2V0VmVyc2lvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBXZSd2ZSBoZWFyZCBmcm9tIHRoZSBwcmltYXJ5LiBJcyBpdCB0aGUgc2FtZSBwcmltYXJ5IGFzIGJlZm9yZT9cbiAgICBmb3IgKGNvbnN0IFthZGRyZXNzLCBzZXJ2ZXJdIG9mIHNlcnZlckRlc2NyaXB0aW9ucykge1xuICAgICAgICBpZiAoc2VydmVyLnR5cGUgPT09IGNvbW1vbl8xLlNlcnZlclR5cGUuUlNQcmltYXJ5ICYmIHNlcnZlci5hZGRyZXNzICE9PSBzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKSB7XG4gICAgICAgICAgICAvLyBSZXNldCBvbGQgcHJpbWFyeSdzIHR5cGUgdG8gVW5rbm93bi5cbiAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5zZXQoYWRkcmVzcywgbmV3IHNlcnZlcl9kZXNjcmlwdGlvbl8xLlNlcnZlckRlc2NyaXB0aW9uKHNlcnZlci5hZGRyZXNzKSk7XG4gICAgICAgICAgICAvLyBUaGVyZSBjYW4gb25seSBiZSBvbmUgcHJpbWFyeVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRGlzY292ZXIgbmV3IGhvc3RzIGZyb20gdGhpcyBwcmltYXJ5J3MgcmVzcG9uc2UuXG4gICAgc2VydmVyRGVzY3JpcHRpb24uYWxsSG9zdHMuZm9yRWFjaCgoYWRkcmVzcykgPT4ge1xuICAgICAgICBpZiAoIXNlcnZlckRlc2NyaXB0aW9ucy5oYXMoYWRkcmVzcykpIHtcbiAgICAgICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5zZXQoYWRkcmVzcywgbmV3IHNlcnZlcl9kZXNjcmlwdGlvbl8xLlNlcnZlckRlc2NyaXB0aW9uKGFkZHJlc3MpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIFJlbW92ZSBob3N0cyBub3QgaW4gdGhlIHJlc3BvbnNlLlxuICAgIGNvbnN0IGN1cnJlbnRBZGRyZXNzZXMgPSBBcnJheS5mcm9tKHNlcnZlckRlc2NyaXB0aW9ucy5rZXlzKCkpO1xuICAgIGNvbnN0IHJlc3BvbnNlQWRkcmVzc2VzID0gc2VydmVyRGVzY3JpcHRpb24uYWxsSG9zdHM7XG4gICAgY3VycmVudEFkZHJlc3Nlc1xuICAgICAgICAuZmlsdGVyKChhZGRyKSA9PiByZXNwb25zZUFkZHJlc3Nlcy5pbmRleE9mKGFkZHIpID09PSAtMSlcbiAgICAgICAgLmZvckVhY2goKGFkZHJlc3MpID0+IHtcbiAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLmRlbGV0ZShhZGRyZXNzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NoZWNrSGFzUHJpbWFyeShzZXJ2ZXJEZXNjcmlwdGlvbnMpLCBzZXROYW1lLCBtYXhTZXRWZXJzaW9uLCBtYXhFbGVjdGlvbklkXTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZVJzV2l0aFByaW1hcnlGcm9tTWVtYmVyKHNlcnZlckRlc2NyaXB0aW9ucywgc2VydmVyRGVzY3JpcHRpb24sIHNldE5hbWUgPSBudWxsKSB7XG4gICAgaWYgKHNldE5hbWUgPT0gbnVsbCkge1xuICAgICAgICAvLyBUT0RPKE5PREUtMzQ4Myk6IHNob3VsZCBiZSBhbiBhcHByb3ByaWF0ZSBydW50aW1lIGVycm9yXG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdBcmd1bWVudCBcInNldE5hbWVcIiBpcyByZXF1aXJlZCBpZiBjb25uZWN0ZWQgdG8gYSByZXBsaWNhIHNldCcpO1xuICAgIH1cbiAgICBpZiAoc2V0TmFtZSAhPT0gc2VydmVyRGVzY3JpcHRpb24uc2V0TmFtZSB8fFxuICAgICAgICAoc2VydmVyRGVzY3JpcHRpb24ubWUgJiYgc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcyAhPT0gc2VydmVyRGVzY3JpcHRpb24ubWUpKSB7XG4gICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5kZWxldGUoc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcyk7XG4gICAgfVxuICAgIHJldHVybiBjaGVja0hhc1ByaW1hcnkoc2VydmVyRGVzY3JpcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZVJzTm9QcmltYXJ5RnJvbU1lbWJlcihzZXJ2ZXJEZXNjcmlwdGlvbnMsIHNlcnZlckRlc2NyaXB0aW9uLCBzZXROYW1lID0gbnVsbCkge1xuICAgIGNvbnN0IHRvcG9sb2d5VHlwZSA9IGNvbW1vbl8xLlRvcG9sb2d5VHlwZS5SZXBsaWNhU2V0Tm9QcmltYXJ5O1xuICAgIHNldE5hbWUgPSBzZXROYW1lID8/IHNlcnZlckRlc2NyaXB0aW9uLnNldE5hbWU7XG4gICAgaWYgKHNldE5hbWUgIT09IHNlcnZlckRlc2NyaXB0aW9uLnNldE5hbWUpIHtcbiAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLmRlbGV0ZShzZXJ2ZXJEZXNjcmlwdGlvbi5hZGRyZXNzKTtcbiAgICAgICAgcmV0dXJuIFt0b3BvbG9neVR5cGUsIHNldE5hbWVdO1xuICAgIH1cbiAgICBzZXJ2ZXJEZXNjcmlwdGlvbi5hbGxIb3N0cy5mb3JFYWNoKChhZGRyZXNzKSA9PiB7XG4gICAgICAgIGlmICghc2VydmVyRGVzY3JpcHRpb25zLmhhcyhhZGRyZXNzKSkge1xuICAgICAgICAgICAgc2VydmVyRGVzY3JpcHRpb25zLnNldChhZGRyZXNzLCBuZXcgc2VydmVyX2Rlc2NyaXB0aW9uXzEuU2VydmVyRGVzY3JpcHRpb24oYWRkcmVzcykpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHNlcnZlckRlc2NyaXB0aW9uLm1lICYmIHNlcnZlckRlc2NyaXB0aW9uLmFkZHJlc3MgIT09IHNlcnZlckRlc2NyaXB0aW9uLm1lKSB7XG4gICAgICAgIHNlcnZlckRlc2NyaXB0aW9ucy5kZWxldGUoc2VydmVyRGVzY3JpcHRpb24uYWRkcmVzcyk7XG4gICAgfVxuICAgIHJldHVybiBbdG9wb2xvZ3lUeXBlLCBzZXROYW1lXTtcbn1cbmZ1bmN0aW9uIGNoZWNrSGFzUHJpbWFyeShzZXJ2ZXJEZXNjcmlwdGlvbnMpIHtcbiAgICBmb3IgKGNvbnN0IHNlcnZlckRlc2NyaXB0aW9uIG9mIHNlcnZlckRlc2NyaXB0aW9ucy52YWx1ZXMoKSkge1xuICAgICAgICBpZiAoc2VydmVyRGVzY3JpcHRpb24udHlwZSA9PT0gY29tbW9uXzEuU2VydmVyVHlwZS5SU1ByaW1hcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5Ub3BvbG9neVR5cGUuUmVwbGljYVNldFdpdGhQcmltYXJ5O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb21tb25fMS5Ub3BvbG9neVR5cGUuUmVwbGljYVNldE5vUHJpbWFyeTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvcG9sb2d5X2Rlc2NyaXB0aW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlRvcG9sb2d5RGVzY3JpcHRpb24iLCJXSVJFX0NPTlNUQU5UUyIsInJlcXVpcmUiLCJlcnJvcl8xIiwidXRpbHNfMSIsImNvbW1vbl8xIiwic2VydmVyX2Rlc2NyaXB0aW9uXzEiLCJNSU5fU1VQUE9SVEVEX1NFUlZFUl9WRVJTSU9OIiwiTUFYX1NVUFBPUlRFRF9TRVJWRVJfVkVSU0lPTiIsIk1JTl9TVVBQT1JURURfV0lSRV9WRVJTSU9OIiwiTUFYX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04iLCJNT05HT1NfT1JfVU5LTk9XTiIsIlNldCIsIlNlcnZlclR5cGUiLCJNb25nb3MiLCJVbmtub3duIiwiTU9OR09TX09SX1NUQU5EQUxPTkUiLCJTdGFuZGFsb25lIiwiTk9OX1BSSU1BUllfUlNfTUVNQkVSUyIsIlJTU2Vjb25kYXJ5IiwiUlNBcmJpdGVyIiwiUlNPdGhlciIsImNvbnN0cnVjdG9yIiwidG9wb2xvZ3lUeXBlIiwic2VydmVyRGVzY3JpcHRpb25zIiwic2V0TmFtZSIsIm1heFNldFZlcnNpb24iLCJtYXhFbGVjdGlvbklkIiwiY29tbW9uV2lyZVZlcnNpb24iLCJvcHRpb25zIiwidHlwZSIsIlRvcG9sb2d5VHlwZSIsInNlcnZlcnMiLCJNYXAiLCJzdGFsZSIsImNvbXBhdGlibGUiLCJoZWFydGJlYXRGcmVxdWVuY3lNUyIsImxvY2FsVGhyZXNob2xkTVMiLCJzZXJ2ZXJEZXNjcmlwdGlvbiIsInZhbHVlcyIsIkxvYWRCYWxhbmNlciIsIm1pbldpcmVWZXJzaW9uIiwiY29tcGF0aWJpbGl0eUVycm9yIiwiYWRkcmVzcyIsIm1heFdpcmVWZXJzaW9uIiwibG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlcyIsInNlcnZlciIsImlzUmVhZGFibGUiLCJNYXRoIiwibWluIiwidXBkYXRlRnJvbVNydlBvbGxpbmdFdmVudCIsImV2Iiwic3J2TWF4SG9zdHMiLCJpbmNvbWluZ0hvc3RuYW1lcyIsImhvc3RuYW1lcyIsImN1cnJlbnRIb3N0bmFtZXMiLCJrZXlzIiwiaG9zdG5hbWVzVG9BZGQiLCJob3N0bmFtZXNUb1JlbW92ZSIsImhvc3RuYW1lIiwiZGVsZXRlIiwiaGFzIiwiYWRkIiwic2l6ZSIsInJlbW92ZWRIb3N0IiwiaG9zdFRvQWRkIiwic2V0IiwiU2VydmVyRGVzY3JpcHRpb24iLCJzZWxlY3RlZEhvc3RzIiwic2h1ZmZsZSIsInNlbGVjdGVkSG9zdFRvQWRkIiwidXBkYXRlIiwic2VydmVyVHlwZSIsIlNpbmdsZSIsInRvcG9sb2d5VHlwZUZvclNlcnZlclR5cGUiLCJTaGFyZGVkIiwiUmVwbGljYVNldE5vUHJpbWFyeSIsIlJTUHJpbWFyeSIsInJlc3VsdCIsInVwZGF0ZVJzRnJvbVByaW1hcnkiLCJ1cGRhdGVSc05vUHJpbWFyeUZyb21NZW1iZXIiLCJSZXBsaWNhU2V0V2l0aFByaW1hcnkiLCJjaGVja0hhc1ByaW1hcnkiLCJ1cGRhdGVSc1dpdGhQcmltYXJ5RnJvbU1lbWJlciIsImVycm9yIiwiZGVzY3JpcHRpb25zV2l0aEVycm9yIiwiQXJyYXkiLCJmcm9tIiwiZmlsdGVyIiwic2QiLCJsZW5ndGgiLCJoYXNLbm93blNlcnZlcnMiLCJzb21lIiwiaGFzRGF0YUJlYXJpbmdTZXJ2ZXJzIiwiaXNEYXRhQmVhcmluZyIsImhhc1NlcnZlciIsImVsZWN0aW9uSWRDb21wYXJpc29uIiwiY29tcGFyZU9iamVjdElkIiwiZWxlY3Rpb25JZCIsIm1heEVsZWN0aW9uSWRJc0VxdWFsIiwibWF4RWxlY3Rpb25JZElzTGVzcyIsIm1heFNldFZlcnNpb25Jc0xlc3NPckVxdWFsIiwic2V0VmVyc2lvbiIsImFsbEhvc3RzIiwiZm9yRWFjaCIsImN1cnJlbnRBZGRyZXNzZXMiLCJyZXNwb25zZUFkZHJlc3NlcyIsImFkZHIiLCJpbmRleE9mIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sdam/topology_description.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sessions.js":
/*!**********************************************!*\
  !*** ./node_modules/mongodb/lib/sessions.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar _a;\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.updateSessionFromResponse = exports.applySession = exports.ServerSessionPool = exports.ServerSession = exports.maybeClearPinnedConnection = exports.ClientSession = void 0;\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst metrics_1 = __webpack_require__(/*! ./cmap/metrics */ \"(ssr)/./node_modules/mongodb/lib/cmap/metrics.js\");\nconst shared_1 = __webpack_require__(/*! ./cmap/wire_protocol/shared */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/shared.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst mongo_types_1 = __webpack_require__(/*! ./mongo_types */ \"(ssr)/./node_modules/mongodb/lib/mongo_types.js\");\nconst execute_operation_1 = __webpack_require__(/*! ./operations/execute_operation */ \"(ssr)/./node_modules/mongodb/lib/operations/execute_operation.js\");\nconst run_command_1 = __webpack_require__(/*! ./operations/run_command */ \"(ssr)/./node_modules/mongodb/lib/operations/run_command.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst common_1 = __webpack_require__(/*! ./sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst transactions_1 = __webpack_require__(/*! ./transactions */ \"(ssr)/./node_modules/mongodb/lib/transactions.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/mongodb/lib/utils.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nconst minWireVersionForShardedTransactions = 8;\n/** @internal */ const kServerSession = Symbol(\"serverSession\");\n/** @internal */ const kSnapshotTime = Symbol(\"snapshotTime\");\n/** @internal */ const kSnapshotEnabled = Symbol(\"snapshotEnabled\");\n/** @internal */ const kPinnedConnection = Symbol(\"pinnedConnection\");\n/** @internal Accumulates total number of increments to add to txnNumber when applying session to command */ const kTxnNumberIncrement = Symbol(\"txnNumberIncrement\");\n/**\n * A class representing a client session on the server\n *\n * NOTE: not meant to be instantiated directly.\n * @public\n */ class ClientSession extends mongo_types_1.TypedEventEmitter {\n    /**\n     * Create a client session.\n     * @internal\n     * @param client - The current client\n     * @param sessionPool - The server session pool (Internal Class)\n     * @param options - Optional settings\n     * @param clientOptions - Optional settings provided when creating a MongoClient\n     */ constructor(client, sessionPool, options, clientOptions){\n        super();\n        /** @internal */ this[_a] = false;\n        if (client == null) {\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(\"ClientSession requires a MongoClient\");\n        }\n        if (sessionPool == null || !(sessionPool instanceof ServerSessionPool)) {\n            // TODO(NODE-3483)\n            throw new error_1.MongoRuntimeError(\"ClientSession requires a ServerSessionPool\");\n        }\n        options = options ?? {};\n        if (options.snapshot === true) {\n            this[kSnapshotEnabled] = true;\n            if (options.causalConsistency === true) {\n                throw new error_1.MongoInvalidArgumentError('Properties \"causalConsistency\" and \"snapshot\" are mutually exclusive');\n            }\n        }\n        this.client = client;\n        this.sessionPool = sessionPool;\n        this.hasEnded = false;\n        this.clientOptions = clientOptions;\n        this.explicit = !!options.explicit;\n        this[kServerSession] = this.explicit ? this.sessionPool.acquire() : null;\n        this[kTxnNumberIncrement] = 0;\n        const defaultCausalConsistencyValue = this.explicit && options.snapshot !== true;\n        this.supports = {\n            // if we can enable causal consistency, do so by default\n            causalConsistency: options.causalConsistency ?? defaultCausalConsistencyValue\n        };\n        this.clusterTime = options.initialClusterTime;\n        this.operationTime = undefined;\n        this.owner = options.owner;\n        this.defaultTransactionOptions = Object.assign({}, options.defaultTransactionOptions);\n        this.transaction = new transactions_1.Transaction();\n    }\n    /** The server id associated with this session */ get id() {\n        return this[kServerSession]?.id;\n    }\n    get serverSession() {\n        let serverSession = this[kServerSession];\n        if (serverSession == null) {\n            if (this.explicit) {\n                throw new error_1.MongoRuntimeError(\"Unexpected null serverSession for an explicit session\");\n            }\n            if (this.hasEnded) {\n                throw new error_1.MongoRuntimeError(\"Unexpected null serverSession for an ended implicit session\");\n            }\n            serverSession = this.sessionPool.acquire();\n            this[kServerSession] = serverSession;\n        }\n        return serverSession;\n    }\n    /** Whether or not this session is configured for snapshot reads */ get snapshotEnabled() {\n        return this[kSnapshotEnabled];\n    }\n    get loadBalanced() {\n        return this.client.topology?.description.type === common_1.TopologyType.LoadBalanced;\n    }\n    /** @internal */ get pinnedConnection() {\n        return this[kPinnedConnection];\n    }\n    /** @internal */ pin(conn) {\n        if (this[kPinnedConnection]) {\n            throw TypeError(\"Cannot pin multiple connections to the same session\");\n        }\n        this[kPinnedConnection] = conn;\n        conn.emit(constants_1.PINNED, this.inTransaction() ? metrics_1.ConnectionPoolMetrics.TXN : metrics_1.ConnectionPoolMetrics.CURSOR);\n    }\n    /** @internal */ unpin(options) {\n        if (this.loadBalanced) {\n            return maybeClearPinnedConnection(this, options);\n        }\n        this.transaction.unpinServer();\n    }\n    get isPinned() {\n        return this.loadBalanced ? !!this[kPinnedConnection] : this.transaction.isPinned;\n    }\n    /**\n     * Ends this session on the server\n     *\n     * @param options - Optional settings. Currently reserved for future use\n     */ async endSession(options) {\n        try {\n            if (this.inTransaction()) {\n                await this.abortTransaction();\n            }\n            if (!this.hasEnded) {\n                const serverSession = this[kServerSession];\n                if (serverSession != null) {\n                    // release the server session back to the pool\n                    this.sessionPool.release(serverSession);\n                    // Make sure a new serverSession never makes it onto this ClientSession\n                    Object.defineProperty(this, kServerSession, {\n                        value: ServerSession.clone(serverSession),\n                        writable: false\n                    });\n                }\n                // mark the session as ended, and emit a signal\n                this.hasEnded = true;\n                this.emit(\"ended\", this);\n            }\n        } catch  {\n        // spec indicates that we should ignore all errors for `endSessions`\n        } finally{\n            maybeClearPinnedConnection(this, {\n                force: true,\n                ...options\n            });\n        }\n    }\n    /**\n     * Advances the operationTime for a ClientSession.\n     *\n     * @param operationTime - the `BSON.Timestamp` of the operation type it is desired to advance to\n     */ advanceOperationTime(operationTime) {\n        if (this.operationTime == null) {\n            this.operationTime = operationTime;\n            return;\n        }\n        if (operationTime.greaterThan(this.operationTime)) {\n            this.operationTime = operationTime;\n        }\n    }\n    /**\n     * Advances the clusterTime for a ClientSession to the provided clusterTime of another ClientSession\n     *\n     * @param clusterTime - the $clusterTime returned by the server from another session in the form of a document containing the `BSON.Timestamp` clusterTime and signature\n     */ advanceClusterTime(clusterTime) {\n        if (!clusterTime || typeof clusterTime !== \"object\") {\n            throw new error_1.MongoInvalidArgumentError(\"input cluster time must be an object\");\n        }\n        if (!clusterTime.clusterTime || clusterTime.clusterTime._bsontype !== \"Timestamp\") {\n            throw new error_1.MongoInvalidArgumentError('input cluster time \"clusterTime\" property must be a valid BSON Timestamp');\n        }\n        if (!clusterTime.signature || clusterTime.signature.hash?._bsontype !== \"Binary\" || typeof clusterTime.signature.keyId !== \"bigint\" && typeof clusterTime.signature.keyId !== \"number\" && clusterTime.signature.keyId?._bsontype !== \"Long\" // apparently we decode the key to number?\n        ) {\n            throw new error_1.MongoInvalidArgumentError('input cluster time must have a valid \"signature\" property with BSON Binary hash and BSON Long keyId');\n        }\n        (0, common_1._advanceClusterTime)(this, clusterTime);\n    }\n    /**\n     * Used to determine if this session equals another\n     *\n     * @param session - The session to compare to\n     */ equals(session) {\n        if (!(session instanceof ClientSession)) {\n            return false;\n        }\n        if (this.id == null || session.id == null) {\n            return false;\n        }\n        return utils_1.ByteUtils.equals(this.id.id.buffer, session.id.id.buffer);\n    }\n    /**\n     * Increment the transaction number on the internal ServerSession\n     *\n     * @privateRemarks\n     * This helper increments a value stored on the client session that will be\n     * added to the serverSession's txnNumber upon applying it to a command.\n     * This is because the serverSession is lazily acquired after a connection is obtained\n     */ incrementTransactionNumber() {\n        this[kTxnNumberIncrement] += 1;\n    }\n    /** @returns whether this session is currently in a transaction or not */ inTransaction() {\n        return this.transaction.isActive;\n    }\n    /**\n     * Starts a new transaction with the given options.\n     *\n     * @param options - Options for the transaction\n     */ startTransaction(options) {\n        if (this[kSnapshotEnabled]) {\n            throw new error_1.MongoCompatibilityError(\"Transactions are not supported in snapshot sessions\");\n        }\n        if (this.inTransaction()) {\n            throw new error_1.MongoTransactionError(\"Transaction already in progress\");\n        }\n        if (this.isPinned && this.transaction.isCommitted) {\n            this.unpin();\n        }\n        const topologyMaxWireVersion = (0, utils_1.maxWireVersion)(this.client.topology);\n        if ((0, shared_1.isSharded)(this.client.topology) && topologyMaxWireVersion != null && topologyMaxWireVersion < minWireVersionForShardedTransactions) {\n            throw new error_1.MongoCompatibilityError(\"Transactions are not supported on sharded clusters in MongoDB < 4.2.\");\n        }\n        // increment txnNumber\n        this.incrementTransactionNumber();\n        // create transaction state\n        this.transaction = new transactions_1.Transaction({\n            readConcern: options?.readConcern ?? this.defaultTransactionOptions.readConcern ?? this.clientOptions?.readConcern,\n            writeConcern: options?.writeConcern ?? this.defaultTransactionOptions.writeConcern ?? this.clientOptions?.writeConcern,\n            readPreference: options?.readPreference ?? this.defaultTransactionOptions.readPreference ?? this.clientOptions?.readPreference,\n            maxCommitTimeMS: options?.maxCommitTimeMS ?? this.defaultTransactionOptions.maxCommitTimeMS\n        });\n        this.transaction.transition(transactions_1.TxnState.STARTING_TRANSACTION);\n    }\n    /**\n     * Commits the currently active transaction in this session.\n     */ async commitTransaction() {\n        return endTransactionAsync(this, \"commitTransaction\");\n    }\n    /**\n     * Aborts the currently active transaction in this session.\n     */ async abortTransaction() {\n        return endTransactionAsync(this, \"abortTransaction\");\n    }\n    /**\n     * This is here to ensure that ClientSession is never serialized to BSON.\n     */ toBSON() {\n        throw new error_1.MongoRuntimeError(\"ClientSession cannot be serialized to BSON.\");\n    }\n    /**\n     * Starts a transaction and runs a provided function, ensuring the commitTransaction is always attempted when all operations run in the function have completed.\n     *\n     * **IMPORTANT:** This method requires the user to return a Promise, and `await` all operations.\n     *\n     * @remarks\n     * This function:\n     * - If all operations successfully complete and the `commitTransaction` operation is successful, then this function will return the result of the provided function.\n     * - If the transaction is unable to complete or an error is thrown from within the provided function, then this function will throw an error.\n     *   - If the transaction is manually aborted within the provided function it will not throw.\n     * - May be called multiple times if the driver needs to attempt to retry the operations.\n     *\n     * Checkout a descriptive example here:\n     * @see https://www.mongodb.com/blog/post/quick-start-nodejs--mongodb--how-to-implement-transactions\n     *\n     * @param fn - callback to run within a transaction\n     * @param options - optional settings for the transaction\n     * @returns A raw command response or undefined\n     */ async withTransaction(fn, options) {\n        const startTime = (0, utils_1.now)();\n        return attemptTransaction(this, startTime, fn, options);\n    }\n}\nexports.ClientSession = ClientSession;\n_a = kSnapshotEnabled;\nconst MAX_WITH_TRANSACTION_TIMEOUT = 120000;\nconst NON_DETERMINISTIC_WRITE_CONCERN_ERRORS = new Set([\n    \"CannotSatisfyWriteConcern\",\n    \"UnknownReplWriteConcern\",\n    \"UnsatisfiableWriteConcern\"\n]);\nfunction hasNotTimedOut(startTime, max) {\n    return (0, utils_1.calculateDurationInMs)(startTime) < max;\n}\nfunction isUnknownTransactionCommitResult(err) {\n    const isNonDeterministicWriteConcernError = err instanceof error_1.MongoServerError && err.codeName && NON_DETERMINISTIC_WRITE_CONCERN_ERRORS.has(err.codeName);\n    return isMaxTimeMSExpiredError(err) || !isNonDeterministicWriteConcernError && err.code !== error_1.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern && err.code !== error_1.MONGODB_ERROR_CODES.UnknownReplWriteConcern;\n}\nfunction maybeClearPinnedConnection(session, options) {\n    // unpin a connection if it has been pinned\n    const conn = session[kPinnedConnection];\n    const error = options?.error;\n    if (session.inTransaction() && error && error instanceof error_1.MongoError && error.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n        return;\n    }\n    const topology = session.client.topology;\n    // NOTE: the spec talks about what to do on a network error only, but the tests seem to\n    //       to validate that we don't unpin on _all_ errors?\n    if (conn && topology != null) {\n        const servers = Array.from(topology.s.servers.values());\n        const loadBalancer = servers[0];\n        if (options?.error == null || options?.force) {\n            loadBalancer.pool.checkIn(conn);\n            conn.emit(constants_1.UNPINNED, session.transaction.state !== transactions_1.TxnState.NO_TRANSACTION ? metrics_1.ConnectionPoolMetrics.TXN : metrics_1.ConnectionPoolMetrics.CURSOR);\n            if (options?.forceClear) {\n                loadBalancer.pool.clear({\n                    serviceId: conn.serviceId\n                });\n            }\n        }\n        session[kPinnedConnection] = undefined;\n    }\n}\nexports.maybeClearPinnedConnection = maybeClearPinnedConnection;\nfunction isMaxTimeMSExpiredError(err) {\n    if (err == null || !(err instanceof error_1.MongoServerError)) {\n        return false;\n    }\n    return err.code === error_1.MONGODB_ERROR_CODES.MaxTimeMSExpired || err.writeConcernError && err.writeConcernError.code === error_1.MONGODB_ERROR_CODES.MaxTimeMSExpired;\n}\nfunction attemptTransactionCommit(session, startTime, fn, result, options) {\n    return session.commitTransaction().then(()=>result, (err)=>{\n        if (err instanceof error_1.MongoError && hasNotTimedOut(startTime, MAX_WITH_TRANSACTION_TIMEOUT) && !isMaxTimeMSExpiredError(err)) {\n            if (err.hasErrorLabel(error_1.MongoErrorLabel.UnknownTransactionCommitResult)) {\n                return attemptTransactionCommit(session, startTime, fn, result, options);\n            }\n            if (err.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n                return attemptTransaction(session, startTime, fn, options);\n            }\n        }\n        throw err;\n    });\n}\nconst USER_EXPLICIT_TXN_END_STATES = new Set([\n    transactions_1.TxnState.NO_TRANSACTION,\n    transactions_1.TxnState.TRANSACTION_COMMITTED,\n    transactions_1.TxnState.TRANSACTION_ABORTED\n]);\nfunction userExplicitlyEndedTransaction(session) {\n    return USER_EXPLICIT_TXN_END_STATES.has(session.transaction.state);\n}\nfunction attemptTransaction(session, startTime, fn, options = {}) {\n    session.startTransaction(options);\n    let promise;\n    try {\n        promise = fn(session);\n    } catch (err) {\n        promise = Promise.reject(err);\n    }\n    if (!(0, utils_1.isPromiseLike)(promise)) {\n        session.abortTransaction().catch(()=>null);\n        return Promise.reject(new error_1.MongoInvalidArgumentError(\"Function provided to `withTransaction` must return a Promise\"));\n    }\n    return promise.then((result)=>{\n        if (userExplicitlyEndedTransaction(session)) {\n            return result;\n        }\n        return attemptTransactionCommit(session, startTime, fn, result, options);\n    }, (err)=>{\n        function maybeRetryOrThrow(err) {\n            if (err instanceof error_1.MongoError && err.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError) && hasNotTimedOut(startTime, MAX_WITH_TRANSACTION_TIMEOUT)) {\n                return attemptTransaction(session, startTime, fn, options);\n            }\n            if (isMaxTimeMSExpiredError(err)) {\n                err.addErrorLabel(error_1.MongoErrorLabel.UnknownTransactionCommitResult);\n            }\n            throw err;\n        }\n        if (session.inTransaction()) {\n            return session.abortTransaction().then(()=>maybeRetryOrThrow(err));\n        }\n        return maybeRetryOrThrow(err);\n    });\n}\nconst endTransactionAsync = (0, util_1.promisify)(endTransaction);\nfunction endTransaction(session, commandName, callback) {\n    // handle any initial problematic cases\n    const txnState = session.transaction.state;\n    if (txnState === transactions_1.TxnState.NO_TRANSACTION) {\n        callback(new error_1.MongoTransactionError(\"No transaction started\"));\n        return;\n    }\n    if (commandName === \"commitTransaction\") {\n        if (txnState === transactions_1.TxnState.STARTING_TRANSACTION || txnState === transactions_1.TxnState.TRANSACTION_COMMITTED_EMPTY) {\n            // the transaction was never started, we can safely exit here\n            session.transaction.transition(transactions_1.TxnState.TRANSACTION_COMMITTED_EMPTY);\n            callback();\n            return;\n        }\n        if (txnState === transactions_1.TxnState.TRANSACTION_ABORTED) {\n            callback(new error_1.MongoTransactionError(\"Cannot call commitTransaction after calling abortTransaction\"));\n            return;\n        }\n    } else {\n        if (txnState === transactions_1.TxnState.STARTING_TRANSACTION) {\n            // the transaction was never started, we can safely exit here\n            session.transaction.transition(transactions_1.TxnState.TRANSACTION_ABORTED);\n            callback();\n            return;\n        }\n        if (txnState === transactions_1.TxnState.TRANSACTION_ABORTED) {\n            callback(new error_1.MongoTransactionError(\"Cannot call abortTransaction twice\"));\n            return;\n        }\n        if (txnState === transactions_1.TxnState.TRANSACTION_COMMITTED || txnState === transactions_1.TxnState.TRANSACTION_COMMITTED_EMPTY) {\n            callback(new error_1.MongoTransactionError(\"Cannot call abortTransaction after calling commitTransaction\"));\n            return;\n        }\n    }\n    // construct and send the command\n    const command = {\n        [commandName]: 1\n    };\n    // apply a writeConcern if specified\n    let writeConcern;\n    if (session.transaction.options.writeConcern) {\n        writeConcern = Object.assign({}, session.transaction.options.writeConcern);\n    } else if (session.clientOptions && session.clientOptions.writeConcern) {\n        writeConcern = {\n            w: session.clientOptions.writeConcern.w\n        };\n    }\n    if (txnState === transactions_1.TxnState.TRANSACTION_COMMITTED) {\n        writeConcern = Object.assign({\n            wtimeoutMS: 10000\n        }, writeConcern, {\n            w: \"majority\"\n        });\n    }\n    if (writeConcern) {\n        write_concern_1.WriteConcern.apply(command, writeConcern);\n    }\n    if (commandName === \"commitTransaction\" && session.transaction.options.maxTimeMS) {\n        Object.assign(command, {\n            maxTimeMS: session.transaction.options.maxTimeMS\n        });\n    }\n    function commandHandler(error) {\n        if (commandName !== \"commitTransaction\") {\n            session.transaction.transition(transactions_1.TxnState.TRANSACTION_ABORTED);\n            if (session.loadBalanced) {\n                maybeClearPinnedConnection(session, {\n                    force: false\n                });\n            }\n            // The spec indicates that we should ignore all errors on `abortTransaction`\n            return callback();\n        }\n        session.transaction.transition(transactions_1.TxnState.TRANSACTION_COMMITTED);\n        if (error instanceof error_1.MongoError) {\n            if ((0, error_1.isRetryableWriteError)(error) || error instanceof error_1.MongoWriteConcernError || isMaxTimeMSExpiredError(error)) {\n                if (isUnknownTransactionCommitResult(error)) {\n                    error.addErrorLabel(error_1.MongoErrorLabel.UnknownTransactionCommitResult);\n                    // per txns spec, must unpin session in this case\n                    session.unpin({\n                        error\n                    });\n                }\n            } else if (error.hasErrorLabel(error_1.MongoErrorLabel.TransientTransactionError)) {\n                session.unpin({\n                    error\n                });\n            }\n        }\n        callback(error);\n    }\n    if (session.transaction.recoveryToken) {\n        command.recoveryToken = session.transaction.recoveryToken;\n    }\n    const handleFirstCommandAttempt = (error)=>{\n        if (command.abortTransaction) {\n            // always unpin on abort regardless of command outcome\n            session.unpin();\n        }\n        if (error instanceof error_1.MongoError && (0, error_1.isRetryableWriteError)(error)) {\n            // SPEC-1185: apply majority write concern when retrying commitTransaction\n            if (command.commitTransaction) {\n                // per txns spec, must unpin session in this case\n                session.unpin({\n                    force: true\n                });\n                command.writeConcern = Object.assign({\n                    wtimeout: 10000\n                }, command.writeConcern, {\n                    w: \"majority\"\n                });\n            }\n            (0, execute_operation_1.executeOperation)(session.client, new run_command_1.RunAdminCommandOperation(command, {\n                session,\n                readPreference: read_preference_1.ReadPreference.primary,\n                bypassPinningCheck: true\n            })).then(()=>commandHandler(), commandHandler);\n            return;\n        }\n        commandHandler(error);\n    };\n    // send the command\n    (0, execute_operation_1.executeOperation)(session.client, new run_command_1.RunAdminCommandOperation(command, {\n        session,\n        readPreference: read_preference_1.ReadPreference.primary,\n        bypassPinningCheck: true\n    })).then(()=>handleFirstCommandAttempt(), handleFirstCommandAttempt);\n}\n/**\n * Reflects the existence of a session on the server. Can be reused by the session pool.\n * WARNING: not meant to be instantiated directly. For internal use only.\n * @public\n */ class ServerSession {\n    /** @internal */ constructor(){\n        this.id = {\n            id: new bson_1.Binary((0, utils_1.uuidV4)(), bson_1.Binary.SUBTYPE_UUID)\n        };\n        this.lastUse = (0, utils_1.now)();\n        this.txnNumber = 0;\n        this.isDirty = false;\n    }\n    /**\n     * Determines if the server session has timed out.\n     *\n     * @param sessionTimeoutMinutes - The server's \"logicalSessionTimeoutMinutes\"\n     */ hasTimedOut(sessionTimeoutMinutes) {\n        // Take the difference of the lastUse timestamp and now, which will result in a value in\n        // milliseconds, and then convert milliseconds to minutes to compare to `sessionTimeoutMinutes`\n        const idleTimeMinutes = Math.round((0, utils_1.calculateDurationInMs)(this.lastUse) % 86400000 % 3600000 / 60000);\n        return idleTimeMinutes > sessionTimeoutMinutes - 1;\n    }\n    /**\n     * @internal\n     * Cloning meant to keep a readable reference to the server session data\n     * after ClientSession has ended\n     */ static clone(serverSession) {\n        const arrayBuffer = new ArrayBuffer(16);\n        const idBytes = Buffer.from(arrayBuffer);\n        idBytes.set(serverSession.id.id.buffer);\n        const id = new bson_1.Binary(idBytes, serverSession.id.id.sub_type);\n        // Manual prototype construction to avoid modifying the constructor of this class\n        return Object.setPrototypeOf({\n            id: {\n                id\n            },\n            lastUse: serverSession.lastUse,\n            txnNumber: serverSession.txnNumber,\n            isDirty: serverSession.isDirty\n        }, ServerSession.prototype);\n    }\n}\nexports.ServerSession = ServerSession;\n/**\n * Maintains a pool of Server Sessions.\n * For internal use only\n * @internal\n */ class ServerSessionPool {\n    constructor(client){\n        if (client == null) {\n            throw new error_1.MongoRuntimeError(\"ServerSessionPool requires a MongoClient\");\n        }\n        this.client = client;\n        this.sessions = new utils_1.List();\n    }\n    /**\n     * Acquire a Server Session from the pool.\n     * Iterates through each session in the pool, removing any stale sessions\n     * along the way. The first non-stale session found is removed from the\n     * pool and returned. If no non-stale session is found, a new ServerSession is created.\n     */ acquire() {\n        const sessionTimeoutMinutes = this.client.topology?.logicalSessionTimeoutMinutes ?? 10;\n        let session = null;\n        // Try to obtain from session pool\n        while(this.sessions.length > 0){\n            const potentialSession = this.sessions.shift();\n            if (potentialSession != null && (!!this.client.topology?.loadBalanced || !potentialSession.hasTimedOut(sessionTimeoutMinutes))) {\n                session = potentialSession;\n                break;\n            }\n        }\n        // If nothing valid came from the pool make a new one\n        if (session == null) {\n            session = new ServerSession();\n        }\n        return session;\n    }\n    /**\n     * Release a session to the session pool\n     * Adds the session back to the session pool if the session has not timed out yet.\n     * This method also removes any stale sessions from the pool.\n     *\n     * @param session - The session to release to the pool\n     */ release(session) {\n        const sessionTimeoutMinutes = this.client.topology?.logicalSessionTimeoutMinutes ?? 10;\n        if (this.client.topology?.loadBalanced && !sessionTimeoutMinutes) {\n            this.sessions.unshift(session);\n        }\n        if (!sessionTimeoutMinutes) {\n            return;\n        }\n        this.sessions.prune((session)=>session.hasTimedOut(sessionTimeoutMinutes));\n        if (!session.hasTimedOut(sessionTimeoutMinutes)) {\n            if (session.isDirty) {\n                return;\n            }\n            // otherwise, readd this session to the session pool\n            this.sessions.unshift(session);\n        }\n    }\n}\nexports.ServerSessionPool = ServerSessionPool;\n/**\n * Optionally decorate a command with sessions specific keys\n *\n * @param session - the session tracking transaction state\n * @param command - the command to decorate\n * @param options - Optional settings passed to calling operation\n *\n * @internal\n */ function applySession(session, command, options) {\n    if (session.hasEnded) {\n        return new error_1.MongoExpiredSessionError();\n    }\n    // May acquire serverSession here\n    const serverSession = session.serverSession;\n    if (serverSession == null) {\n        return new error_1.MongoRuntimeError(\"Unable to acquire server session\");\n    }\n    if (options.writeConcern?.w === 0) {\n        if (session && session.explicit) {\n            // Error if user provided an explicit session to an unacknowledged write (SPEC-1019)\n            return new error_1.MongoAPIError(\"Cannot have explicit session with unacknowledged writes\");\n        }\n        return;\n    }\n    // mark the last use of this session, and apply the `lsid`\n    serverSession.lastUse = (0, utils_1.now)();\n    command.lsid = serverSession.id;\n    const inTxnOrTxnCommand = session.inTransaction() || (0, transactions_1.isTransactionCommand)(command);\n    const isRetryableWrite = !!options.willRetryWrite;\n    if (isRetryableWrite || inTxnOrTxnCommand) {\n        serverSession.txnNumber += session[kTxnNumberIncrement];\n        session[kTxnNumberIncrement] = 0;\n        // TODO(NODE-2674): Preserve int64 sent from MongoDB\n        command.txnNumber = bson_1.Long.fromNumber(serverSession.txnNumber);\n    }\n    if (!inTxnOrTxnCommand) {\n        if (session.transaction.state !== transactions_1.TxnState.NO_TRANSACTION) {\n            session.transaction.transition(transactions_1.TxnState.NO_TRANSACTION);\n        }\n        if (session.supports.causalConsistency && session.operationTime && (0, utils_1.commandSupportsReadConcern)(command)) {\n            command.readConcern = command.readConcern || {};\n            Object.assign(command.readConcern, {\n                afterClusterTime: session.operationTime\n            });\n        } else if (session[kSnapshotEnabled]) {\n            command.readConcern = command.readConcern || {\n                level: read_concern_1.ReadConcernLevel.snapshot\n            };\n            if (session[kSnapshotTime] != null) {\n                Object.assign(command.readConcern, {\n                    atClusterTime: session[kSnapshotTime]\n                });\n            }\n        }\n        return;\n    }\n    // now attempt to apply transaction-specific sessions data\n    // `autocommit` must always be false to differentiate from retryable writes\n    command.autocommit = false;\n    if (session.transaction.state === transactions_1.TxnState.STARTING_TRANSACTION) {\n        session.transaction.transition(transactions_1.TxnState.TRANSACTION_IN_PROGRESS);\n        command.startTransaction = true;\n        const readConcern = session.transaction.options.readConcern || session?.clientOptions?.readConcern;\n        if (readConcern) {\n            command.readConcern = readConcern;\n        }\n        if (session.supports.causalConsistency && session.operationTime) {\n            command.readConcern = command.readConcern || {};\n            Object.assign(command.readConcern, {\n                afterClusterTime: session.operationTime\n            });\n        }\n    }\n    return;\n}\nexports.applySession = applySession;\nfunction updateSessionFromResponse(session, document) {\n    if (document.$clusterTime) {\n        (0, common_1._advanceClusterTime)(session, document.$clusterTime);\n    }\n    if (document.operationTime && session && session.supports.causalConsistency) {\n        session.advanceOperationTime(document.operationTime);\n    }\n    if (document.recoveryToken && session && session.inTransaction()) {\n        session.transaction._recoveryToken = document.recoveryToken;\n    }\n    if (session?.[kSnapshotEnabled] && session[kSnapshotTime] == null) {\n        // find and aggregate commands return atClusterTime on the cursor\n        // distinct includes it in the response body\n        const atClusterTime = document.cursor?.atClusterTime || document.atClusterTime;\n        if (atClusterTime) {\n            session[kSnapshotTime] = atClusterTime;\n        }\n    }\n}\nexports.updateSessionFromResponse = updateSessionFromResponse; //# sourceMappingURL=sessions.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2Vzc2lvbnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQTtBQUNKQyw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUNBQWlDLEdBQUdBLG9CQUFvQixHQUFHQSx5QkFBeUIsR0FBR0EscUJBQXFCLEdBQUdBLGtDQUFrQyxHQUFHQSxxQkFBcUIsR0FBRyxLQUFLO0FBQ2pMLE1BQU1RLFNBQVNDLG1CQUFPQSxDQUFDLGtCQUFNO0FBQzdCLE1BQU1DLFNBQVNELG1CQUFPQSxDQUFDLHdEQUFRO0FBQy9CLE1BQU1FLFlBQVlGLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMxQyxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyxrR0FBNkI7QUFDdEQsTUFBTUksY0FBY0osbUJBQU9BLENBQUMsa0VBQWE7QUFDekMsTUFBTUssVUFBVUwsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsTUFBTU0sZ0JBQWdCTixtQkFBT0EsQ0FBQyxzRUFBZTtBQUM3QyxNQUFNTyxzQkFBc0JQLG1CQUFPQSxDQUFDLHdHQUFnQztBQUNwRSxNQUFNUSxnQkFBZ0JSLG1CQUFPQSxDQUFDLDRGQUEwQjtBQUN4RCxNQUFNUyxpQkFBaUJULG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNVSxvQkFBb0JWLG1CQUFPQSxDQUFDLDhFQUFtQjtBQUNyRCxNQUFNVyxXQUFXWCxtQkFBT0EsQ0FBQyxzRUFBZTtBQUN4QyxNQUFNWSxpQkFBaUJaLG1CQUFPQSxDQUFDLHdFQUFnQjtBQUMvQyxNQUFNYSxVQUFVYixtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxNQUFNYyxrQkFBa0JkLG1CQUFPQSxDQUFDLDBFQUFpQjtBQUNqRCxNQUFNZSx1Q0FBdUM7QUFDN0MsY0FBYyxHQUNkLE1BQU1DLGlCQUFpQkMsT0FBTztBQUM5QixjQUFjLEdBQ2QsTUFBTUMsZ0JBQWdCRCxPQUFPO0FBQzdCLGNBQWMsR0FDZCxNQUFNRSxtQkFB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QkFBaUIsRUFBRTtRQUN6RXFELFFBQVFULG9CQUFvQixDQUFDMkosU0FBUzlMLGFBQWE7SUFDdkQ7SUFDQSxJQUFJOEwsU0FBU25ELGFBQWEsSUFBSS9GLFdBQVdBLFFBQVF0QixhQUFhLElBQUk7UUFDOURzQixRQUFRdkMsV0FBVyxDQUFDMkwsY0FBYyxHQUFHRixTQUFTbkQsYUFBYTtJQUMvRDtJQUNBLElBQUkvRixTQUFTLENBQUNoRSxpQkFBaUIsSUFBSWdFLE9BQU8sQ0FBQ2pFLGNBQWMsSUFBSSxNQUFNO1FBQy9ELGlFQUFpRTtRQUNqRSw0Q0FBNEM7UUFDNUMsTUFBTWdOLGdCQUFnQkcsU0FBU0csTUFBTSxFQUFFTixpQkFBaUJHLFNBQVNILGFBQWE7UUFDOUUsSUFBSUEsZUFBZTtZQUNmL0ksT0FBTyxDQUFDakUsY0FBYyxHQUFHZ047UUFDN0I7SUFDSjtBQUNKO0FBQ0EzTyxpQ0FBaUMsR0FBR0UsMkJBQ3BDLG9DQUFvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpb25lei1uZXh0anMvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc2Vzc2lvbnMuanM/ZjI4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfYTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudXBkYXRlU2Vzc2lvbkZyb21SZXNwb25zZSA9IGV4cG9ydHMuYXBwbHlTZXNzaW9uID0gZXhwb3J0cy5TZXJ2ZXJTZXNzaW9uUG9vbCA9IGV4cG9ydHMuU2VydmVyU2Vzc2lvbiA9IGV4cG9ydHMubWF5YmVDbGVhclBpbm5lZENvbm5lY3Rpb24gPSBleHBvcnRzLkNsaWVudFNlc3Npb24gPSB2b2lkIDA7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwidXRpbFwiKTtcbmNvbnN0IGJzb25fMSA9IHJlcXVpcmUoXCIuL2Jzb25cIik7XG5jb25zdCBtZXRyaWNzXzEgPSByZXF1aXJlKFwiLi9jbWFwL21ldHJpY3NcIik7XG5jb25zdCBzaGFyZWRfMSA9IHJlcXVpcmUoXCIuL2NtYXAvd2lyZV9wcm90b2NvbC9zaGFyZWRcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNvbnN0IGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbmNvbnN0IG1vbmdvX3R5cGVzXzEgPSByZXF1aXJlKFwiLi9tb25nb190eXBlc1wiKTtcbmNvbnN0IGV4ZWN1dGVfb3BlcmF0aW9uXzEgPSByZXF1aXJlKFwiLi9vcGVyYXRpb25zL2V4ZWN1dGVfb3BlcmF0aW9uXCIpO1xuY29uc3QgcnVuX2NvbW1hbmRfMSA9IHJlcXVpcmUoXCIuL29wZXJhdGlvbnMvcnVuX2NvbW1hbmRcIik7XG5jb25zdCByZWFkX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3JlYWRfY29uY2VyblwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi9zZGFtL2NvbW1vblwiKTtcbmNvbnN0IHRyYW5zYWN0aW9uc18xID0gcmVxdWlyZShcIi4vdHJhbnNhY3Rpb25zXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuY29uc3Qgd3JpdGVfY29uY2Vybl8xID0gcmVxdWlyZShcIi4vd3JpdGVfY29uY2VyblwiKTtcbmNvbnN0IG1pbldpcmVWZXJzaW9uRm9yU2hhcmRlZFRyYW5zYWN0aW9ucyA9IDg7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrU2VydmVyU2Vzc2lvbiA9IFN5bWJvbCgnc2VydmVyU2Vzc2lvbicpO1xuLyoqIEBpbnRlcm5hbCAqL1xuY29uc3Qga1NuYXBzaG90VGltZSA9IFN5bWJvbCgnc25hcHNob3RUaW1lJyk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBrU25hcHNob3RFbmFibGVkID0gU3ltYm9sKCdzbmFwc2hvdEVuYWJsZWQnKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IGtQaW5uZWRDb25uZWN0aW9uID0gU3ltYm9sKCdwaW5uZWRDb25uZWN0aW9uJyk7XG4vKiogQGludGVybmFsIEFjY3VtdWxhdGVzIHRvdGFsIG51bWJlciBvZiBpbmNyZW1lbnRzIHRvIGFkZCB0byB0eG5OdW1iZXIgd2hlbiBhcHBseWluZyBzZXNzaW9uIHRvIGNvbW1hbmQgKi9cbmNvbnN0IGtUeG5OdW1iZXJJbmNyZW1lbnQgPSBTeW1ib2woJ3R4bk51bWJlckluY3JlbWVudCcpO1xuLyoqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGNsaWVudCBzZXNzaW9uIG9uIHRoZSBzZXJ2ZXJcbiAqXG4gKiBOT1RFOiBub3QgbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBDbGllbnRTZXNzaW9uIGV4dGVuZHMgbW9uZ29fdHlwZXNfMS5UeXBlZEV2ZW50RW1pdHRlciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY2xpZW50IHNlc3Npb24uXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIGNsaWVudCAtIFRoZSBjdXJyZW50IGNsaWVudFxuICAgICAqIEBwYXJhbSBzZXNzaW9uUG9vbCAtIFRoZSBzZXJ2ZXIgc2Vzc2lvbiBwb29sIChJbnRlcm5hbCBDbGFzcylcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNldHRpbmdzXG4gICAgICogQHBhcmFtIGNsaWVudE9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncyBwcm92aWRlZCB3aGVuIGNyZWF0aW5nIGEgTW9uZ29DbGllbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihjbGllbnQsIHNlc3Npb25Qb29sLCBvcHRpb25zLCBjbGllbnRPcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpc1tfYV0gPSBmYWxzZTtcbiAgICAgICAgaWYgKGNsaWVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4MylcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdDbGllbnRTZXNzaW9uIHJlcXVpcmVzIGEgTW9uZ29DbGllbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2Vzc2lvblBvb2wgPT0gbnVsbCB8fCAhKHNlc3Npb25Qb29sIGluc3RhbmNlb2YgU2VydmVyU2Vzc2lvblBvb2wpKSB7XG4gICAgICAgICAgICAvLyBUT0RPKE5PREUtMzQ4MylcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdDbGllbnRTZXNzaW9uIHJlcXVpcmVzIGEgU2VydmVyU2Vzc2lvblBvb2wnKTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgaWYgKG9wdGlvbnMuc25hcHNob3QgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXNba1NuYXBzaG90RW5hYmxlZF0gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2F1c2FsQ29uc2lzdGVuY3kgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdQcm9wZXJ0aWVzIFwiY2F1c2FsQ29uc2lzdGVuY3lcIiBhbmQgXCJzbmFwc2hvdFwiIGFyZSBtdXR1YWxseSBleGNsdXNpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgICAgICAgdGhpcy5zZXNzaW9uUG9vbCA9IHNlc3Npb25Qb29sO1xuICAgICAgICB0aGlzLmhhc0VuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2xpZW50T3B0aW9ucyA9IGNsaWVudE9wdGlvbnM7XG4gICAgICAgIHRoaXMuZXhwbGljaXQgPSAhIW9wdGlvbnMuZXhwbGljaXQ7XG4gICAgICAgIHRoaXNba1NlcnZlclNlc3Npb25dID0gdGhpcy5leHBsaWNpdCA/IHRoaXMuc2Vzc2lvblBvb2wuYWNxdWlyZSgpIDogbnVsbDtcbiAgICAgICAgdGhpc1trVHhuTnVtYmVySW5jcmVtZW50XSA9IDA7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYXVzYWxDb25zaXN0ZW5jeVZhbHVlID0gdGhpcy5leHBsaWNpdCAmJiBvcHRpb25zLnNuYXBzaG90ICE9PSB0cnVlO1xuICAgICAgICB0aGlzLnN1cHBvcnRzID0ge1xuICAgICAgICAgICAgLy8gaWYgd2UgY2FuIGVuYWJsZSBjYXVzYWwgY29uc2lzdGVuY3ksIGRvIHNvIGJ5IGRlZmF1bHRcbiAgICAgICAgICAgIGNhdXNhbENvbnNpc3RlbmN5OiBvcHRpb25zLmNhdXNhbENvbnNpc3RlbmN5ID8/IGRlZmF1bHRDYXVzYWxDb25zaXN0ZW5jeVZhbHVlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2x1c3RlclRpbWUgPSBvcHRpb25zLmluaXRpYWxDbHVzdGVyVGltZTtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25UaW1lID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm93bmVyID0gb3B0aW9ucy5vd25lcjtcbiAgICAgICAgdGhpcy5kZWZhdWx0VHJhbnNhY3Rpb25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucy5kZWZhdWx0VHJhbnNhY3Rpb25PcHRpb25zKTtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbiA9IG5ldyB0cmFuc2FjdGlvbnNfMS5UcmFuc2FjdGlvbigpO1xuICAgIH1cbiAgICAvKiogVGhlIHNlcnZlciBpZCBhc3NvY2lhdGVkIHdpdGggdGhpcyBzZXNzaW9uICovXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trU2VydmVyU2Vzc2lvbl0/LmlkO1xuICAgIH1cbiAgICBnZXQgc2VydmVyU2Vzc2lvbigpIHtcbiAgICAgICAgbGV0IHNlcnZlclNlc3Npb24gPSB0aGlzW2tTZXJ2ZXJTZXNzaW9uXTtcbiAgICAgICAgaWYgKHNlcnZlclNlc3Npb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZXhwbGljaXQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcignVW5leHBlY3RlZCBudWxsIHNlcnZlclNlc3Npb24gZm9yIGFuIGV4cGxpY2l0IHNlc3Npb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0VuZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ1VuZXhwZWN0ZWQgbnVsbCBzZXJ2ZXJTZXNzaW9uIGZvciBhbiBlbmRlZCBpbXBsaWNpdCBzZXNzaW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJ2ZXJTZXNzaW9uID0gdGhpcy5zZXNzaW9uUG9vbC5hY3F1aXJlKCk7XG4gICAgICAgICAgICB0aGlzW2tTZXJ2ZXJTZXNzaW9uXSA9IHNlcnZlclNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcnZlclNlc3Npb247XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIG9yIG5vdCB0aGlzIHNlc3Npb24gaXMgY29uZmlndXJlZCBmb3Igc25hcHNob3QgcmVhZHMgKi9cbiAgICBnZXQgc25hcHNob3RFbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpc1trU25hcHNob3RFbmFibGVkXTtcbiAgICB9XG4gICAgZ2V0IGxvYWRCYWxhbmNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50LnRvcG9sb2d5Py5kZXNjcmlwdGlvbi50eXBlID09PSBjb21tb25fMS5Ub3BvbG9neVR5cGUuTG9hZEJhbGFuY2VkO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZ2V0IHBpbm5lZENvbm5lY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tQaW5uZWRDb25uZWN0aW9uXTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHBpbihjb25uKSB7XG4gICAgICAgIGlmICh0aGlzW2tQaW5uZWRDb25uZWN0aW9uXSkge1xuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdDYW5ub3QgcGluIG11bHRpcGxlIGNvbm5lY3Rpb25zIHRvIHRoZSBzYW1lIHNlc3Npb24nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzW2tQaW5uZWRDb25uZWN0aW9uXSA9IGNvbm47XG4gICAgICAgIGNvbm4uZW1pdChjb25zdGFudHNfMS5QSU5ORUQsIHRoaXMuaW5UcmFuc2FjdGlvbigpID8gbWV0cmljc18xLkNvbm5lY3Rpb25Qb29sTWV0cmljcy5UWE4gOiBtZXRyaWNzXzEuQ29ubmVjdGlvblBvb2xNZXRyaWNzLkNVUlNPUik7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICB1bnBpbihvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLmxvYWRCYWxhbmNlZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1heWJlQ2xlYXJQaW5uZWRDb25uZWN0aW9uKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb24udW5waW5TZXJ2ZXIoKTtcbiAgICB9XG4gICAgZ2V0IGlzUGlubmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkQmFsYW5jZWQgPyAhIXRoaXNba1Bpbm5lZENvbm5lY3Rpb25dIDogdGhpcy50cmFuc2FjdGlvbi5pc1Bpbm5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5kcyB0aGlzIHNlc3Npb24gb24gdGhlIHNlcnZlclxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXR0aW5ncy4gQ3VycmVudGx5IHJlc2VydmVkIGZvciBmdXR1cmUgdXNlXG4gICAgICovXG4gICAgYXN5bmMgZW5kU2Vzc2lvbihvcHRpb25zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pblRyYW5zYWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFib3J0VHJhbnNhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNFbmRlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZlclNlc3Npb24gPSB0aGlzW2tTZXJ2ZXJTZXNzaW9uXTtcbiAgICAgICAgICAgICAgICBpZiAoc2VydmVyU2Vzc2lvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbGVhc2UgdGhlIHNlcnZlciBzZXNzaW9uIGJhY2sgdG8gdGhlIHBvb2xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uUG9vbC5yZWxlYXNlKHNlcnZlclNlc3Npb24pO1xuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgYSBuZXcgc2VydmVyU2Vzc2lvbiBuZXZlciBtYWtlcyBpdCBvbnRvIHRoaXMgQ2xpZW50U2Vzc2lvblxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga1NlcnZlclNlc3Npb24sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBTZXJ2ZXJTZXNzaW9uLmNsb25lKHNlcnZlclNlc3Npb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBtYXJrIHRoZSBzZXNzaW9uIGFzIGVuZGVkLCBhbmQgZW1pdCBhIHNpZ25hbFxuICAgICAgICAgICAgICAgIHRoaXMuaGFzRW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZW5kZWQnLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAvLyBzcGVjIGluZGljYXRlcyB0aGF0IHdlIHNob3VsZCBpZ25vcmUgYWxsIGVycm9ycyBmb3IgYGVuZFNlc3Npb25zYFxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgbWF5YmVDbGVhclBpbm5lZENvbm5lY3Rpb24odGhpcywgeyBmb3JjZTogdHJ1ZSwgLi4ub3B0aW9ucyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZHZhbmNlcyB0aGUgb3BlcmF0aW9uVGltZSBmb3IgYSBDbGllbnRTZXNzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wZXJhdGlvblRpbWUgLSB0aGUgYEJTT04uVGltZXN0YW1wYCBvZiB0aGUgb3BlcmF0aW9uIHR5cGUgaXQgaXMgZGVzaXJlZCB0byBhZHZhbmNlIHRvXG4gICAgICovXG4gICAgYWR2YW5jZU9wZXJhdGlvblRpbWUob3BlcmF0aW9uVGltZSkge1xuICAgICAgICBpZiAodGhpcy5vcGVyYXRpb25UaW1lID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMub3BlcmF0aW9uVGltZSA9IG9wZXJhdGlvblRpbWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wZXJhdGlvblRpbWUuZ3JlYXRlclRoYW4odGhpcy5vcGVyYXRpb25UaW1lKSkge1xuICAgICAgICAgICAgdGhpcy5vcGVyYXRpb25UaW1lID0gb3BlcmF0aW9uVGltZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZHZhbmNlcyB0aGUgY2x1c3RlclRpbWUgZm9yIGEgQ2xpZW50U2Vzc2lvbiB0byB0aGUgcHJvdmlkZWQgY2x1c3RlclRpbWUgb2YgYW5vdGhlciBDbGllbnRTZXNzaW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2x1c3RlclRpbWUgLSB0aGUgJGNsdXN0ZXJUaW1lIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgZnJvbSBhbm90aGVyIHNlc3Npb24gaW4gdGhlIGZvcm0gb2YgYSBkb2N1bWVudCBjb250YWluaW5nIHRoZSBgQlNPTi5UaW1lc3RhbXBgIGNsdXN0ZXJUaW1lIGFuZCBzaWduYXR1cmVcbiAgICAgKi9cbiAgICBhZHZhbmNlQ2x1c3RlclRpbWUoY2x1c3RlclRpbWUpIHtcbiAgICAgICAgaWYgKCFjbHVzdGVyVGltZSB8fCB0eXBlb2YgY2x1c3RlclRpbWUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdpbnB1dCBjbHVzdGVyIHRpbWUgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNsdXN0ZXJUaW1lLmNsdXN0ZXJUaW1lIHx8IGNsdXN0ZXJUaW1lLmNsdXN0ZXJUaW1lLl9ic29udHlwZSAhPT0gJ1RpbWVzdGFtcCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ2lucHV0IGNsdXN0ZXIgdGltZSBcImNsdXN0ZXJUaW1lXCIgcHJvcGVydHkgbXVzdCBiZSBhIHZhbGlkIEJTT04gVGltZXN0YW1wJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjbHVzdGVyVGltZS5zaWduYXR1cmUgfHxcbiAgICAgICAgICAgIGNsdXN0ZXJUaW1lLnNpZ25hdHVyZS5oYXNoPy5fYnNvbnR5cGUgIT09ICdCaW5hcnknIHx8XG4gICAgICAgICAgICAodHlwZW9mIGNsdXN0ZXJUaW1lLnNpZ25hdHVyZS5rZXlJZCAhPT0gJ2JpZ2ludCcgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgY2x1c3RlclRpbWUuc2lnbmF0dXJlLmtleUlkICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICAgIGNsdXN0ZXJUaW1lLnNpZ25hdHVyZS5rZXlJZD8uX2Jzb250eXBlICE9PSAnTG9uZycpIC8vIGFwcGFyZW50bHkgd2UgZGVjb2RlIHRoZSBrZXkgdG8gbnVtYmVyP1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ2lucHV0IGNsdXN0ZXIgdGltZSBtdXN0IGhhdmUgYSB2YWxpZCBcInNpZ25hdHVyZVwiIHByb3BlcnR5IHdpdGggQlNPTiBCaW5hcnkgaGFzaCBhbmQgQlNPTiBMb25nIGtleUlkJyk7XG4gICAgICAgIH1cbiAgICAgICAgKDAsIGNvbW1vbl8xLl9hZHZhbmNlQ2x1c3RlclRpbWUpKHRoaXMsIGNsdXN0ZXJUaW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXNlZCB0byBkZXRlcm1pbmUgaWYgdGhpcyBzZXNzaW9uIGVxdWFscyBhbm90aGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2Vzc2lvbiAtIFRoZSBzZXNzaW9uIHRvIGNvbXBhcmUgdG9cbiAgICAgKi9cbiAgICBlcXVhbHMoc2Vzc2lvbikge1xuICAgICAgICBpZiAoIShzZXNzaW9uIGluc3RhbmNlb2YgQ2xpZW50U2Vzc2lvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pZCA9PSBudWxsIHx8IHNlc3Npb24uaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsc18xLkJ5dGVVdGlscy5lcXVhbHModGhpcy5pZC5pZC5idWZmZXIsIHNlc3Npb24uaWQuaWQuYnVmZmVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSB0cmFuc2FjdGlvbiBudW1iZXIgb24gdGhlIGludGVybmFsIFNlcnZlclNlc3Npb25cbiAgICAgKlxuICAgICAqIEBwcml2YXRlUmVtYXJrc1xuICAgICAqIFRoaXMgaGVscGVyIGluY3JlbWVudHMgYSB2YWx1ZSBzdG9yZWQgb24gdGhlIGNsaWVudCBzZXNzaW9uIHRoYXQgd2lsbCBiZVxuICAgICAqIGFkZGVkIHRvIHRoZSBzZXJ2ZXJTZXNzaW9uJ3MgdHhuTnVtYmVyIHVwb24gYXBwbHlpbmcgaXQgdG8gYSBjb21tYW5kLlxuICAgICAqIFRoaXMgaXMgYmVjYXVzZSB0aGUgc2VydmVyU2Vzc2lvbiBpcyBsYXppbHkgYWNxdWlyZWQgYWZ0ZXIgYSBjb25uZWN0aW9uIGlzIG9idGFpbmVkXG4gICAgICovXG4gICAgaW5jcmVtZW50VHJhbnNhY3Rpb25OdW1iZXIoKSB7XG4gICAgICAgIHRoaXNba1R4bk51bWJlckluY3JlbWVudF0gKz0gMTtcbiAgICB9XG4gICAgLyoqIEByZXR1cm5zIHdoZXRoZXIgdGhpcyBzZXNzaW9uIGlzIGN1cnJlbnRseSBpbiBhIHRyYW5zYWN0aW9uIG9yIG5vdCAqL1xuICAgIGluVHJhbnNhY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uLmlzQWN0aXZlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgYSBuZXcgdHJhbnNhY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHRyYW5zYWN0aW9uXG4gICAgICovXG4gICAgc3RhcnRUcmFuc2FjdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzW2tTbmFwc2hvdEVuYWJsZWRdKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0NvbXBhdGliaWxpdHlFcnJvcignVHJhbnNhY3Rpb25zIGFyZSBub3Qgc3VwcG9ydGVkIGluIHNuYXBzaG90IHNlc3Npb25zJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1RyYW5zYWN0aW9uRXJyb3IoJ1RyYW5zYWN0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1Bpbm5lZCAmJiB0aGlzLnRyYW5zYWN0aW9uLmlzQ29tbWl0dGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVucGluKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9wb2xvZ3lNYXhXaXJlVmVyc2lvbiA9ICgwLCB1dGlsc18xLm1heFdpcmVWZXJzaW9uKSh0aGlzLmNsaWVudC50b3BvbG9neSk7XG4gICAgICAgIGlmICgoMCwgc2hhcmVkXzEuaXNTaGFyZGVkKSh0aGlzLmNsaWVudC50b3BvbG9neSkgJiZcbiAgICAgICAgICAgIHRvcG9sb2d5TWF4V2lyZVZlcnNpb24gIT0gbnVsbCAmJlxuICAgICAgICAgICAgdG9wb2xvZ3lNYXhXaXJlVmVyc2lvbiA8IG1pbldpcmVWZXJzaW9uRm9yU2hhcmRlZFRyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IoJ1RyYW5zYWN0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBvbiBzaGFyZGVkIGNsdXN0ZXJzIGluIE1vbmdvREIgPCA0LjIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5jcmVtZW50IHR4bk51bWJlclxuICAgICAgICB0aGlzLmluY3JlbWVudFRyYW5zYWN0aW9uTnVtYmVyKCk7XG4gICAgICAgIC8vIGNyZWF0ZSB0cmFuc2FjdGlvbiBzdGF0ZVxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IHRyYW5zYWN0aW9uc18xLlRyYW5zYWN0aW9uKHtcbiAgICAgICAgICAgIHJlYWRDb25jZXJuOiBvcHRpb25zPy5yZWFkQ29uY2VybiA/P1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFRyYW5zYWN0aW9uT3B0aW9ucy5yZWFkQ29uY2VybiA/P1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50T3B0aW9ucz8ucmVhZENvbmNlcm4sXG4gICAgICAgICAgICB3cml0ZUNvbmNlcm46IG9wdGlvbnM/LndyaXRlQ29uY2VybiA/P1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFRyYW5zYWN0aW9uT3B0aW9ucy53cml0ZUNvbmNlcm4gPz9cbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudE9wdGlvbnM/LndyaXRlQ29uY2VybixcbiAgICAgICAgICAgIHJlYWRQcmVmZXJlbmNlOiBvcHRpb25zPy5yZWFkUHJlZmVyZW5jZSA/P1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFRyYW5zYWN0aW9uT3B0aW9ucy5yZWFkUHJlZmVyZW5jZSA/P1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50T3B0aW9ucz8ucmVhZFByZWZlcmVuY2UsXG4gICAgICAgICAgICBtYXhDb21taXRUaW1lTVM6IG9wdGlvbnM/Lm1heENvbW1pdFRpbWVNUyA/PyB0aGlzLmRlZmF1bHRUcmFuc2FjdGlvbk9wdGlvbnMubWF4Q29tbWl0VGltZU1TXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uLnRyYW5zaXRpb24odHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuU1RBUlRJTkdfVFJBTlNBQ1RJT04pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIHRoZSBjdXJyZW50bHkgYWN0aXZlIHRyYW5zYWN0aW9uIGluIHRoaXMgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb21taXRUcmFuc2FjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGVuZFRyYW5zYWN0aW9uQXN5bmModGhpcywgJ2NvbW1pdFRyYW5zYWN0aW9uJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFib3J0cyB0aGUgY3VycmVudGx5IGFjdGl2ZSB0cmFuc2FjdGlvbiBpbiB0aGlzIHNlc3Npb24uXG4gICAgICovXG4gICAgYXN5bmMgYWJvcnRUcmFuc2FjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGVuZFRyYW5zYWN0aW9uQXN5bmModGhpcywgJ2Fib3J0VHJhbnNhY3Rpb24nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBoZXJlIHRvIGVuc3VyZSB0aGF0IENsaWVudFNlc3Npb24gaXMgbmV2ZXIgc2VyaWFsaXplZCB0byBCU09OLlxuICAgICAqL1xuICAgIHRvQlNPTigpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0NsaWVudFNlc3Npb24gY2Fubm90IGJlIHNlcmlhbGl6ZWQgdG8gQlNPTi4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIGEgdHJhbnNhY3Rpb24gYW5kIHJ1bnMgYSBwcm92aWRlZCBmdW5jdGlvbiwgZW5zdXJpbmcgdGhlIGNvbW1pdFRyYW5zYWN0aW9uIGlzIGFsd2F5cyBhdHRlbXB0ZWQgd2hlbiBhbGwgb3BlcmF0aW9ucyBydW4gaW4gdGhlIGZ1bmN0aW9uIGhhdmUgY29tcGxldGVkLlxuICAgICAqXG4gICAgICogKipJTVBPUlRBTlQ6KiogVGhpcyBtZXRob2QgcmVxdWlyZXMgdGhlIHVzZXIgdG8gcmV0dXJuIGEgUHJvbWlzZSwgYW5kIGBhd2FpdGAgYWxsIG9wZXJhdGlvbnMuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqIFRoaXMgZnVuY3Rpb246XG4gICAgICogLSBJZiBhbGwgb3BlcmF0aW9ucyBzdWNjZXNzZnVsbHkgY29tcGxldGUgYW5kIHRoZSBgY29tbWl0VHJhbnNhY3Rpb25gIG9wZXJhdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGVuIHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb24uXG4gICAgICogLSBJZiB0aGUgdHJhbnNhY3Rpb24gaXMgdW5hYmxlIHRvIGNvbXBsZXRlIG9yIGFuIGVycm9yIGlzIHRocm93biBmcm9tIHdpdGhpbiB0aGUgcHJvdmlkZWQgZnVuY3Rpb24sIHRoZW4gdGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgICAqICAgLSBJZiB0aGUgdHJhbnNhY3Rpb24gaXMgbWFudWFsbHkgYWJvcnRlZCB3aXRoaW4gdGhlIHByb3ZpZGVkIGZ1bmN0aW9uIGl0IHdpbGwgbm90IHRocm93LlxuICAgICAqIC0gTWF5IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyBpZiB0aGUgZHJpdmVyIG5lZWRzIHRvIGF0dGVtcHQgdG8gcmV0cnkgdGhlIG9wZXJhdGlvbnMuXG4gICAgICpcbiAgICAgKiBDaGVja291dCBhIGRlc2NyaXB0aXZlIGV4YW1wbGUgaGVyZTpcbiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL2Jsb2cvcG9zdC9xdWljay1zdGFydC1ub2RlanMtLW1vbmdvZGItLWhvdy10by1pbXBsZW1lbnQtdHJhbnNhY3Rpb25zXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm4gLSBjYWxsYmFjayB0byBydW4gd2l0aGluIGEgdHJhbnNhY3Rpb25cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIG9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgdHJhbnNhY3Rpb25cbiAgICAgKiBAcmV0dXJucyBBIHJhdyBjb21tYW5kIHJlc3BvbnNlIG9yIHVuZGVmaW5lZFxuICAgICAqL1xuICAgIGFzeW5jIHdpdGhUcmFuc2FjdGlvbihmbiwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSAoMCwgdXRpbHNfMS5ub3cpKCk7XG4gICAgICAgIHJldHVybiBhdHRlbXB0VHJhbnNhY3Rpb24odGhpcywgc3RhcnRUaW1lLCBmbiwgb3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0cy5DbGllbnRTZXNzaW9uID0gQ2xpZW50U2Vzc2lvbjtcbl9hID0ga1NuYXBzaG90RW5hYmxlZDtcbmNvbnN0IE1BWF9XSVRIX1RSQU5TQUNUSU9OX1RJTUVPVVQgPSAxMjAwMDA7XG5jb25zdCBOT05fREVURVJNSU5JU1RJQ19XUklURV9DT05DRVJOX0VSUk9SUyA9IG5ldyBTZXQoW1xuICAgICdDYW5ub3RTYXRpc2Z5V3JpdGVDb25jZXJuJyxcbiAgICAnVW5rbm93blJlcGxXcml0ZUNvbmNlcm4nLFxuICAgICdVbnNhdGlzZmlhYmxlV3JpdGVDb25jZXJuJ1xuXSk7XG5mdW5jdGlvbiBoYXNOb3RUaW1lZE91dChzdGFydFRpbWUsIG1heCkge1xuICAgIHJldHVybiAoMCwgdXRpbHNfMS5jYWxjdWxhdGVEdXJhdGlvbkluTXMpKHN0YXJ0VGltZSkgPCBtYXg7XG59XG5mdW5jdGlvbiBpc1Vua25vd25UcmFuc2FjdGlvbkNvbW1pdFJlc3VsdChlcnIpIHtcbiAgICBjb25zdCBpc05vbkRldGVybWluaXN0aWNXcml0ZUNvbmNlcm5FcnJvciA9IGVyciBpbnN0YW5jZW9mIGVycm9yXzEuTW9uZ29TZXJ2ZXJFcnJvciAmJlxuICAgICAgICBlcnIuY29kZU5hbWUgJiZcbiAgICAgICAgTk9OX0RFVEVSTUlOSVNUSUNfV1JJVEVfQ09OQ0VSTl9FUlJPUlMuaGFzKGVyci5jb2RlTmFtZSk7XG4gICAgcmV0dXJuIChpc01heFRpbWVNU0V4cGlyZWRFcnJvcihlcnIpIHx8XG4gICAgICAgICghaXNOb25EZXRlcm1pbmlzdGljV3JpdGVDb25jZXJuRXJyb3IgJiZcbiAgICAgICAgICAgIGVyci5jb2RlICE9PSBlcnJvcl8xLk1PTkdPREJfRVJST1JfQ09ERVMuVW5zYXRpc2ZpYWJsZVdyaXRlQ29uY2VybiAmJlxuICAgICAgICAgICAgZXJyLmNvZGUgIT09IGVycm9yXzEuTU9OR09EQl9FUlJPUl9DT0RFUy5Vbmtub3duUmVwbFdyaXRlQ29uY2VybikpO1xufVxuZnVuY3Rpb24gbWF5YmVDbGVhclBpbm5lZENvbm5lY3Rpb24oc2Vzc2lvbiwgb3B0aW9ucykge1xuICAgIC8vIHVucGluIGEgY29ubmVjdGlvbiBpZiBpdCBoYXMgYmVlbiBwaW5uZWRcbiAgICBjb25zdCBjb25uID0gc2Vzc2lvbltrUGlubmVkQ29ubmVjdGlvbl07XG4gICAgY29uc3QgZXJyb3IgPSBvcHRpb25zPy5lcnJvcjtcbiAgICBpZiAoc2Vzc2lvbi5pblRyYW5zYWN0aW9uKCkgJiZcbiAgICAgICAgZXJyb3IgJiZcbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IgJiZcbiAgICAgICAgZXJyb3IuaGFzRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5UcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvcG9sb2d5ID0gc2Vzc2lvbi5jbGllbnQudG9wb2xvZ3k7XG4gICAgLy8gTk9URTogdGhlIHNwZWMgdGFsa3MgYWJvdXQgd2hhdCB0byBkbyBvbiBhIG5ldHdvcmsgZXJyb3Igb25seSwgYnV0IHRoZSB0ZXN0cyBzZWVtIHRvXG4gICAgLy8gICAgICAgdG8gdmFsaWRhdGUgdGhhdCB3ZSBkb24ndCB1bnBpbiBvbiBfYWxsXyBlcnJvcnM/XG4gICAgaWYgKGNvbm4gJiYgdG9wb2xvZ3kgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCBzZXJ2ZXJzID0gQXJyYXkuZnJvbSh0b3BvbG9neS5zLnNlcnZlcnMudmFsdWVzKCkpO1xuICAgICAgICBjb25zdCBsb2FkQmFsYW5jZXIgPSBzZXJ2ZXJzWzBdO1xuICAgICAgICBpZiAob3B0aW9ucz8uZXJyb3IgPT0gbnVsbCB8fCBvcHRpb25zPy5mb3JjZSkge1xuICAgICAgICAgICAgbG9hZEJhbGFuY2VyLnBvb2wuY2hlY2tJbihjb25uKTtcbiAgICAgICAgICAgIGNvbm4uZW1pdChjb25zdGFudHNfMS5VTlBJTk5FRCwgc2Vzc2lvbi50cmFuc2FjdGlvbi5zdGF0ZSAhPT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuTk9fVFJBTlNBQ1RJT05cbiAgICAgICAgICAgICAgICA/IG1ldHJpY3NfMS5Db25uZWN0aW9uUG9vbE1ldHJpY3MuVFhOXG4gICAgICAgICAgICAgICAgOiBtZXRyaWNzXzEuQ29ubmVjdGlvblBvb2xNZXRyaWNzLkNVUlNPUik7XG4gICAgICAgICAgICBpZiAob3B0aW9ucz8uZm9yY2VDbGVhcikge1xuICAgICAgICAgICAgICAgIGxvYWRCYWxhbmNlci5wb29sLmNsZWFyKHsgc2VydmljZUlkOiBjb25uLnNlcnZpY2VJZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXNzaW9uW2tQaW5uZWRDb25uZWN0aW9uXSA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5leHBvcnRzLm1heWJlQ2xlYXJQaW5uZWRDb25uZWN0aW9uID0gbWF5YmVDbGVhclBpbm5lZENvbm5lY3Rpb247XG5mdW5jdGlvbiBpc01heFRpbWVNU0V4cGlyZWRFcnJvcihlcnIpIHtcbiAgICBpZiAoZXJyID09IG51bGwgfHwgIShlcnIgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvU2VydmVyRXJyb3IpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIChlcnIuY29kZSA9PT0gZXJyb3JfMS5NT05HT0RCX0VSUk9SX0NPREVTLk1heFRpbWVNU0V4cGlyZWQgfHxcbiAgICAgICAgKGVyci53cml0ZUNvbmNlcm5FcnJvciAmJiBlcnIud3JpdGVDb25jZXJuRXJyb3IuY29kZSA9PT0gZXJyb3JfMS5NT05HT0RCX0VSUk9SX0NPREVTLk1heFRpbWVNU0V4cGlyZWQpKTtcbn1cbmZ1bmN0aW9uIGF0dGVtcHRUcmFuc2FjdGlvbkNvbW1pdChzZXNzaW9uLCBzdGFydFRpbWUsIGZuLCByZXN1bHQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gc2Vzc2lvbi5jb21taXRUcmFuc2FjdGlvbigpLnRoZW4oKCkgPT4gcmVzdWx0LCAoZXJyKSA9PiB7XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IgJiZcbiAgICAgICAgICAgIGhhc05vdFRpbWVkT3V0KHN0YXJ0VGltZSwgTUFYX1dJVEhfVFJBTlNBQ1RJT05fVElNRU9VVCkgJiZcbiAgICAgICAgICAgICFpc01heFRpbWVNU0V4cGlyZWRFcnJvcihlcnIpKSB7XG4gICAgICAgICAgICBpZiAoZXJyLmhhc0Vycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuVW5rbm93blRyYW5zYWN0aW9uQ29tbWl0UmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbXB0VHJhbnNhY3Rpb25Db21taXQoc2Vzc2lvbiwgc3RhcnRUaW1lLCBmbiwgcmVzdWx0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcnIuaGFzRXJyb3JMYWJlbChlcnJvcl8xLk1vbmdvRXJyb3JMYWJlbC5UcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbXB0VHJhbnNhY3Rpb24oc2Vzc2lvbiwgc3RhcnRUaW1lLCBmbiwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH0pO1xufVxuY29uc3QgVVNFUl9FWFBMSUNJVF9UWE5fRU5EX1NUQVRFUyA9IG5ldyBTZXQoW1xuICAgIHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLk5PX1RSQU5TQUNUSU9OLFxuICAgIHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRCxcbiAgICB0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5UUkFOU0FDVElPTl9BQk9SVEVEXG5dKTtcbmZ1bmN0aW9uIHVzZXJFeHBsaWNpdGx5RW5kZWRUcmFuc2FjdGlvbihzZXNzaW9uKSB7XG4gICAgcmV0dXJuIFVTRVJfRVhQTElDSVRfVFhOX0VORF9TVEFURVMuaGFzKHNlc3Npb24udHJhbnNhY3Rpb24uc3RhdGUpO1xufVxuZnVuY3Rpb24gYXR0ZW1wdFRyYW5zYWN0aW9uKHNlc3Npb24sIHN0YXJ0VGltZSwgZm4sIG9wdGlvbnMgPSB7fSkge1xuICAgIHNlc3Npb24uc3RhcnRUcmFuc2FjdGlvbihvcHRpb25zKTtcbiAgICBsZXQgcHJvbWlzZTtcbiAgICB0cnkge1xuICAgICAgICBwcm9taXNlID0gZm4oc2Vzc2lvbik7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KGVycik7XG4gICAgfVxuICAgIGlmICghKDAsIHV0aWxzXzEuaXNQcm9taXNlTGlrZSkocHJvbWlzZSkpIHtcbiAgICAgICAgc2Vzc2lvbi5hYm9ydFRyYW5zYWN0aW9uKCkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKCdGdW5jdGlvbiBwcm92aWRlZCB0byBgd2l0aFRyYW5zYWN0aW9uYCBtdXN0IHJldHVybiBhIFByb21pc2UnKSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKHVzZXJFeHBsaWNpdGx5RW5kZWRUcmFuc2FjdGlvbihzZXNzaW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXR0ZW1wdFRyYW5zYWN0aW9uQ29tbWl0KHNlc3Npb24sIHN0YXJ0VGltZSwgZm4sIHJlc3VsdCwgb3B0aW9ucyk7XG4gICAgfSwgZXJyID0+IHtcbiAgICAgICAgZnVuY3Rpb24gbWF5YmVSZXRyeU9yVGhyb3coZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb0Vycm9yICYmXG4gICAgICAgICAgICAgICAgZXJyLmhhc0Vycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuVHJhbnNpZW50VHJhbnNhY3Rpb25FcnJvcikgJiZcbiAgICAgICAgICAgICAgICBoYXNOb3RUaW1lZE91dChzdGFydFRpbWUsIE1BWF9XSVRIX1RSQU5TQUNUSU9OX1RJTUVPVVQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dGVtcHRUcmFuc2FjdGlvbihzZXNzaW9uLCBzdGFydFRpbWUsIGZuLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc01heFRpbWVNU0V4cGlyZWRFcnJvcihlcnIpKSB7XG4gICAgICAgICAgICAgICAgZXJyLmFkZEVycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuVW5rbm93blRyYW5zYWN0aW9uQ29tbWl0UmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2Vzc2lvbi5pblRyYW5zYWN0aW9uKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uLmFib3J0VHJhbnNhY3Rpb24oKS50aGVuKCgpID0+IG1heWJlUmV0cnlPclRocm93KGVycikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXliZVJldHJ5T3JUaHJvdyhlcnIpO1xuICAgIH0pO1xufVxuY29uc3QgZW5kVHJhbnNhY3Rpb25Bc3luYyA9ICgwLCB1dGlsXzEucHJvbWlzaWZ5KShlbmRUcmFuc2FjdGlvbik7XG5mdW5jdGlvbiBlbmRUcmFuc2FjdGlvbihzZXNzaW9uLCBjb21tYW5kTmFtZSwgY2FsbGJhY2spIHtcbiAgICAvLyBoYW5kbGUgYW55IGluaXRpYWwgcHJvYmxlbWF0aWMgY2FzZXNcbiAgICBjb25zdCB0eG5TdGF0ZSA9IHNlc3Npb24udHJhbnNhY3Rpb24uc3RhdGU7XG4gICAgaWYgKHR4blN0YXRlID09PSB0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5OT19UUkFOU0FDVElPTikge1xuICAgICAgICBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1RyYW5zYWN0aW9uRXJyb3IoJ05vIHRyYW5zYWN0aW9uIHN0YXJ0ZWQnKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNvbW1hbmROYW1lID09PSAnY29tbWl0VHJhbnNhY3Rpb24nKSB7XG4gICAgICAgIGlmICh0eG5TdGF0ZSA9PT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuU1RBUlRJTkdfVFJBTlNBQ1RJT04gfHxcbiAgICAgICAgICAgIHR4blN0YXRlID09PSB0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURURfRU1QVFkpIHtcbiAgICAgICAgICAgIC8vIHRoZSB0cmFuc2FjdGlvbiB3YXMgbmV2ZXIgc3RhcnRlZCwgd2UgY2FuIHNhZmVseSBleGl0IGhlcmVcbiAgICAgICAgICAgIHNlc3Npb24udHJhbnNhY3Rpb24udHJhbnNpdGlvbih0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURURfRU1QVFkpO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHhuU3RhdGUgPT09IHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlRSQU5TQUNUSU9OX0FCT1JURUQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBlcnJvcl8xLk1vbmdvVHJhbnNhY3Rpb25FcnJvcignQ2Fubm90IGNhbGwgY29tbWl0VHJhbnNhY3Rpb24gYWZ0ZXIgY2FsbGluZyBhYm9ydFRyYW5zYWN0aW9uJykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodHhuU3RhdGUgPT09IHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlNUQVJUSU5HX1RSQU5TQUNUSU9OKSB7XG4gICAgICAgICAgICAvLyB0aGUgdHJhbnNhY3Rpb24gd2FzIG5ldmVyIHN0YXJ0ZWQsIHdlIGNhbiBzYWZlbHkgZXhpdCBoZXJlXG4gICAgICAgICAgICBzZXNzaW9uLnRyYW5zYWN0aW9uLnRyYW5zaXRpb24odHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQUJPUlRFRCk7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eG5TdGF0ZSA9PT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQUJPUlRFRCkge1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3IGVycm9yXzEuTW9uZ29UcmFuc2FjdGlvbkVycm9yKCdDYW5ub3QgY2FsbCBhYm9ydFRyYW5zYWN0aW9uIHR3aWNlJykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eG5TdGF0ZSA9PT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEIHx8XG4gICAgICAgICAgICB0eG5TdGF0ZSA9PT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEX0VNUFRZKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXcgZXJyb3JfMS5Nb25nb1RyYW5zYWN0aW9uRXJyb3IoJ0Nhbm5vdCBjYWxsIGFib3J0VHJhbnNhY3Rpb24gYWZ0ZXIgY2FsbGluZyBjb21taXRUcmFuc2FjdGlvbicpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zdHJ1Y3QgYW5kIHNlbmQgdGhlIGNvbW1hbmRcbiAgICBjb25zdCBjb21tYW5kID0geyBbY29tbWFuZE5hbWVdOiAxIH07XG4gICAgLy8gYXBwbHkgYSB3cml0ZUNvbmNlcm4gaWYgc3BlY2lmaWVkXG4gICAgbGV0IHdyaXRlQ29uY2VybjtcbiAgICBpZiAoc2Vzc2lvbi50cmFuc2FjdGlvbi5vcHRpb25zLndyaXRlQ29uY2Vybikge1xuICAgICAgICB3cml0ZUNvbmNlcm4gPSBPYmplY3QuYXNzaWduKHt9LCBzZXNzaW9uLnRyYW5zYWN0aW9uLm9wdGlvbnMud3JpdGVDb25jZXJuKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2Vzc2lvbi5jbGllbnRPcHRpb25zICYmIHNlc3Npb24uY2xpZW50T3B0aW9ucy53cml0ZUNvbmNlcm4pIHtcbiAgICAgICAgd3JpdGVDb25jZXJuID0geyB3OiBzZXNzaW9uLmNsaWVudE9wdGlvbnMud3JpdGVDb25jZXJuLncgfTtcbiAgICB9XG4gICAgaWYgKHR4blN0YXRlID09PSB0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURUQpIHtcbiAgICAgICAgd3JpdGVDb25jZXJuID0gT2JqZWN0LmFzc2lnbih7IHd0aW1lb3V0TVM6IDEwMDAwIH0sIHdyaXRlQ29uY2VybiwgeyB3OiAnbWFqb3JpdHknIH0pO1xuICAgIH1cbiAgICBpZiAod3JpdGVDb25jZXJuKSB7XG4gICAgICAgIHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uYXBwbHkoY29tbWFuZCwgd3JpdGVDb25jZXJuKTtcbiAgICB9XG4gICAgaWYgKGNvbW1hbmROYW1lID09PSAnY29tbWl0VHJhbnNhY3Rpb24nICYmIHNlc3Npb24udHJhbnNhY3Rpb24ub3B0aW9ucy5tYXhUaW1lTVMpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjb21tYW5kLCB7IG1heFRpbWVNUzogc2Vzc2lvbi50cmFuc2FjdGlvbi5vcHRpb25zLm1heFRpbWVNUyB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29tbWFuZEhhbmRsZXIoZXJyb3IpIHtcbiAgICAgICAgaWYgKGNvbW1hbmROYW1lICE9PSAnY29tbWl0VHJhbnNhY3Rpb24nKSB7XG4gICAgICAgICAgICBzZXNzaW9uLnRyYW5zYWN0aW9uLnRyYW5zaXRpb24odHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQUJPUlRFRCk7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5sb2FkQmFsYW5jZWQpIHtcbiAgICAgICAgICAgICAgICBtYXliZUNsZWFyUGlubmVkQ29ubmVjdGlvbihzZXNzaW9uLCB7IGZvcmNlOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoZSBzcGVjIGluZGljYXRlcyB0aGF0IHdlIHNob3VsZCBpZ25vcmUgYWxsIGVycm9ycyBvbiBgYWJvcnRUcmFuc2FjdGlvbmBcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIHNlc3Npb24udHJhbnNhY3Rpb24udHJhbnNpdGlvbih0cmFuc2FjdGlvbnNfMS5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURUQpO1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IpIHtcbiAgICAgICAgICAgIGlmICgoMCwgZXJyb3JfMS5pc1JldHJ5YWJsZVdyaXRlRXJyb3IpKGVycm9yKSB8fFxuICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgZXJyb3JfMS5Nb25nb1dyaXRlQ29uY2VybkVycm9yIHx8XG4gICAgICAgICAgICAgICAgaXNNYXhUaW1lTVNFeHBpcmVkRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVW5rbm93blRyYW5zYWN0aW9uQ29tbWl0UmVzdWx0KGVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRFcnJvckxhYmVsKGVycm9yXzEuTW9uZ29FcnJvckxhYmVsLlVua25vd25UcmFuc2FjdGlvbkNvbW1pdFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBlciB0eG5zIHNwZWMsIG11c3QgdW5waW4gc2Vzc2lvbiBpbiB0aGlzIGNhc2VcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi51bnBpbih7IGVycm9yIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVycm9yLmhhc0Vycm9yTGFiZWwoZXJyb3JfMS5Nb25nb0Vycm9yTGFiZWwuVHJhbnNpZW50VHJhbnNhY3Rpb25FcnJvcikpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLnVucGluKHsgZXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgIH1cbiAgICBpZiAoc2Vzc2lvbi50cmFuc2FjdGlvbi5yZWNvdmVyeVRva2VuKSB7XG4gICAgICAgIGNvbW1hbmQucmVjb3ZlcnlUb2tlbiA9IHNlc3Npb24udHJhbnNhY3Rpb24ucmVjb3ZlcnlUb2tlbjtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlRmlyc3RDb21tYW5kQXR0ZW1wdCA9IChlcnJvcikgPT4ge1xuICAgICAgICBpZiAoY29tbWFuZC5hYm9ydFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBhbHdheXMgdW5waW4gb24gYWJvcnQgcmVnYXJkbGVzcyBvZiBjb21tYW5kIG91dGNvbWVcbiAgICAgICAgICAgIHNlc3Npb24udW5waW4oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBlcnJvcl8xLk1vbmdvRXJyb3IgJiYgKDAsIGVycm9yXzEuaXNSZXRyeWFibGVXcml0ZUVycm9yKShlcnJvcikpIHtcbiAgICAgICAgICAgIC8vIFNQRUMtMTE4NTogYXBwbHkgbWFqb3JpdHkgd3JpdGUgY29uY2VybiB3aGVuIHJldHJ5aW5nIGNvbW1pdFRyYW5zYWN0aW9uXG4gICAgICAgICAgICBpZiAoY29tbWFuZC5jb21taXRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIHBlciB0eG5zIHNwZWMsIG11c3QgdW5waW4gc2Vzc2lvbiBpbiB0aGlzIGNhc2VcbiAgICAgICAgICAgICAgICBzZXNzaW9uLnVucGluKHsgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgY29tbWFuZC53cml0ZUNvbmNlcm4gPSBPYmplY3QuYXNzaWduKHsgd3RpbWVvdXQ6IDEwMDAwIH0sIGNvbW1hbmQud3JpdGVDb25jZXJuLCB7XG4gICAgICAgICAgICAgICAgICAgIHc6ICdtYWpvcml0eSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHNlc3Npb24uY2xpZW50LCBuZXcgcnVuX2NvbW1hbmRfMS5SdW5BZG1pbkNvbW1hbmRPcGVyYXRpb24oY29tbWFuZCwge1xuICAgICAgICAgICAgICAgIHNlc3Npb24sXG4gICAgICAgICAgICAgICAgcmVhZFByZWZlcmVuY2U6IHJlYWRfcHJlZmVyZW5jZV8xLlJlYWRQcmVmZXJlbmNlLnByaW1hcnksXG4gICAgICAgICAgICAgICAgYnlwYXNzUGlubmluZ0NoZWNrOiB0cnVlXG4gICAgICAgICAgICB9KSkudGhlbigoKSA9PiBjb21tYW5kSGFuZGxlcigpLCBjb21tYW5kSGFuZGxlcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29tbWFuZEhhbmRsZXIoZXJyb3IpO1xuICAgIH07XG4gICAgLy8gc2VuZCB0aGUgY29tbWFuZFxuICAgICgwLCBleGVjdXRlX29wZXJhdGlvbl8xLmV4ZWN1dGVPcGVyYXRpb24pKHNlc3Npb24uY2xpZW50LCBuZXcgcnVuX2NvbW1hbmRfMS5SdW5BZG1pbkNvbW1hbmRPcGVyYXRpb24oY29tbWFuZCwge1xuICAgICAgICBzZXNzaW9uLFxuICAgICAgICByZWFkUHJlZmVyZW5jZTogcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UucHJpbWFyeSxcbiAgICAgICAgYnlwYXNzUGlubmluZ0NoZWNrOiB0cnVlXG4gICAgfSkpLnRoZW4oKCkgPT4gaGFuZGxlRmlyc3RDb21tYW5kQXR0ZW1wdCgpLCBoYW5kbGVGaXJzdENvbW1hbmRBdHRlbXB0KTtcbn1cbi8qKlxuICogUmVmbGVjdHMgdGhlIGV4aXN0ZW5jZSBvZiBhIHNlc3Npb24gb24gdGhlIHNlcnZlci4gQ2FuIGJlIHJldXNlZCBieSB0aGUgc2Vzc2lvbiBwb29sLlxuICogV0FSTklORzogbm90IG1lYW50IHRvIGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS4gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBTZXJ2ZXJTZXNzaW9uIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaWQgPSB7IGlkOiBuZXcgYnNvbl8xLkJpbmFyeSgoMCwgdXRpbHNfMS51dWlkVjQpKCksIGJzb25fMS5CaW5hcnkuU1VCVFlQRV9VVUlEKSB9O1xuICAgICAgICB0aGlzLmxhc3RVc2UgPSAoMCwgdXRpbHNfMS5ub3cpKCk7XG4gICAgICAgIHRoaXMudHhuTnVtYmVyID0gMDtcbiAgICAgICAgdGhpcy5pc0RpcnR5ID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgdGhlIHNlcnZlciBzZXNzaW9uIGhhcyB0aW1lZCBvdXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2Vzc2lvblRpbWVvdXRNaW51dGVzIC0gVGhlIHNlcnZlcidzIFwibG9naWNhbFNlc3Npb25UaW1lb3V0TWludXRlc1wiXG4gICAgICovXG4gICAgaGFzVGltZWRPdXQoc2Vzc2lvblRpbWVvdXRNaW51dGVzKSB7XG4gICAgICAgIC8vIFRha2UgdGhlIGRpZmZlcmVuY2Ugb2YgdGhlIGxhc3RVc2UgdGltZXN0YW1wIGFuZCBub3csIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgdmFsdWUgaW5cbiAgICAgICAgLy8gbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjb252ZXJ0IG1pbGxpc2Vjb25kcyB0byBtaW51dGVzIHRvIGNvbXBhcmUgdG8gYHNlc3Npb25UaW1lb3V0TWludXRlc2BcbiAgICAgICAgY29uc3QgaWRsZVRpbWVNaW51dGVzID0gTWF0aC5yb3VuZCgoKCgwLCB1dGlsc18xLmNhbGN1bGF0ZUR1cmF0aW9uSW5NcykodGhpcy5sYXN0VXNlKSAlIDg2NDAwMDAwKSAlIDM2MDAwMDApIC8gNjAwMDApO1xuICAgICAgICByZXR1cm4gaWRsZVRpbWVNaW51dGVzID4gc2Vzc2lvblRpbWVvdXRNaW51dGVzIC0gMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQ2xvbmluZyBtZWFudCB0byBrZWVwIGEgcmVhZGFibGUgcmVmZXJlbmNlIHRvIHRoZSBzZXJ2ZXIgc2Vzc2lvbiBkYXRhXG4gICAgICogYWZ0ZXIgQ2xpZW50U2Vzc2lvbiBoYXMgZW5kZWRcbiAgICAgKi9cbiAgICBzdGF0aWMgY2xvbmUoc2VydmVyU2Vzc2lvbikge1xuICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigxNik7XG4gICAgICAgIGNvbnN0IGlkQnl0ZXMgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcik7XG4gICAgICAgIGlkQnl0ZXMuc2V0KHNlcnZlclNlc3Npb24uaWQuaWQuYnVmZmVyKTtcbiAgICAgICAgY29uc3QgaWQgPSBuZXcgYnNvbl8xLkJpbmFyeShpZEJ5dGVzLCBzZXJ2ZXJTZXNzaW9uLmlkLmlkLnN1Yl90eXBlKTtcbiAgICAgICAgLy8gTWFudWFsIHByb3RvdHlwZSBjb25zdHJ1Y3Rpb24gdG8gYXZvaWQgbW9kaWZ5aW5nIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGlzIGNsYXNzXG4gICAgICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Yoe1xuICAgICAgICAgICAgaWQ6IHsgaWQgfSxcbiAgICAgICAgICAgIGxhc3RVc2U6IHNlcnZlclNlc3Npb24ubGFzdFVzZSxcbiAgICAgICAgICAgIHR4bk51bWJlcjogc2VydmVyU2Vzc2lvbi50eG5OdW1iZXIsXG4gICAgICAgICAgICBpc0RpcnR5OiBzZXJ2ZXJTZXNzaW9uLmlzRGlydHlcbiAgICAgICAgfSwgU2VydmVyU2Vzc2lvbi5wcm90b3R5cGUpO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydmVyU2Vzc2lvbiA9IFNlcnZlclNlc3Npb247XG4vKipcbiAqIE1haW50YWlucyBhIHBvb2wgb2YgU2VydmVyIFNlc3Npb25zLlxuICogRm9yIGludGVybmFsIHVzZSBvbmx5XG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgU2VydmVyU2Vzc2lvblBvb2wge1xuICAgIGNvbnN0cnVjdG9yKGNsaWVudCkge1xuICAgICAgICBpZiAoY2xpZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdTZXJ2ZXJTZXNzaW9uUG9vbCByZXF1aXJlcyBhIE1vbmdvQ2xpZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgICAgIHRoaXMuc2Vzc2lvbnMgPSBuZXcgdXRpbHNfMS5MaXN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjcXVpcmUgYSBTZXJ2ZXIgU2Vzc2lvbiBmcm9tIHRoZSBwb29sLlxuICAgICAqIEl0ZXJhdGVzIHRocm91Z2ggZWFjaCBzZXNzaW9uIGluIHRoZSBwb29sLCByZW1vdmluZyBhbnkgc3RhbGUgc2Vzc2lvbnNcbiAgICAgKiBhbG9uZyB0aGUgd2F5LiBUaGUgZmlyc3Qgbm9uLXN0YWxlIHNlc3Npb24gZm91bmQgaXMgcmVtb3ZlZCBmcm9tIHRoZVxuICAgICAqIHBvb2wgYW5kIHJldHVybmVkLiBJZiBubyBub24tc3RhbGUgc2Vzc2lvbiBpcyBmb3VuZCwgYSBuZXcgU2VydmVyU2Vzc2lvbiBpcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGFjcXVpcmUoKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25UaW1lb3V0TWludXRlcyA9IHRoaXMuY2xpZW50LnRvcG9sb2d5Py5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzID8/IDEwO1xuICAgICAgICBsZXQgc2Vzc2lvbiA9IG51bGw7XG4gICAgICAgIC8vIFRyeSB0byBvYnRhaW4gZnJvbSBzZXNzaW9uIHBvb2xcbiAgICAgICAgd2hpbGUgKHRoaXMuc2Vzc2lvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcG90ZW50aWFsU2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbnMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChwb3RlbnRpYWxTZXNzaW9uICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAoISF0aGlzLmNsaWVudC50b3BvbG9neT8ubG9hZEJhbGFuY2VkIHx8XG4gICAgICAgICAgICAgICAgICAgICFwb3RlbnRpYWxTZXNzaW9uLmhhc1RpbWVkT3V0KHNlc3Npb25UaW1lb3V0TWludXRlcykpKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbiA9IHBvdGVudGlhbFNlc3Npb247XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgbm90aGluZyB2YWxpZCBjYW1lIGZyb20gdGhlIHBvb2wgbWFrZSBhIG5ldyBvbmVcbiAgICAgICAgaWYgKHNlc3Npb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgc2Vzc2lvbiA9IG5ldyBTZXJ2ZXJTZXNzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbGVhc2UgYSBzZXNzaW9uIHRvIHRoZSBzZXNzaW9uIHBvb2xcbiAgICAgKiBBZGRzIHRoZSBzZXNzaW9uIGJhY2sgdG8gdGhlIHNlc3Npb24gcG9vbCBpZiB0aGUgc2Vzc2lvbiBoYXMgbm90IHRpbWVkIG91dCB5ZXQuXG4gICAgICogVGhpcyBtZXRob2QgYWxzbyByZW1vdmVzIGFueSBzdGFsZSBzZXNzaW9ucyBmcm9tIHRoZSBwb29sLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlc3Npb24gLSBUaGUgc2Vzc2lvbiB0byByZWxlYXNlIHRvIHRoZSBwb29sXG4gICAgICovXG4gICAgcmVsZWFzZShzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25UaW1lb3V0TWludXRlcyA9IHRoaXMuY2xpZW50LnRvcG9sb2d5Py5sb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzID8/IDEwO1xuICAgICAgICBpZiAodGhpcy5jbGllbnQudG9wb2xvZ3k/LmxvYWRCYWxhbmNlZCAmJiAhc2Vzc2lvblRpbWVvdXRNaW51dGVzKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25zLnVuc2hpZnQoc2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZXNzaW9uVGltZW91dE1pbnV0ZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlc3Npb25zLnBydW5lKHNlc3Npb24gPT4gc2Vzc2lvbi5oYXNUaW1lZE91dChzZXNzaW9uVGltZW91dE1pbnV0ZXMpKTtcbiAgICAgICAgaWYgKCFzZXNzaW9uLmhhc1RpbWVkT3V0KHNlc3Npb25UaW1lb3V0TWludXRlcykpIHtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uLmlzRGlydHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UsIHJlYWRkIHRoaXMgc2Vzc2lvbiB0byB0aGUgc2Vzc2lvbiBwb29sXG4gICAgICAgICAgICB0aGlzLnNlc3Npb25zLnVuc2hpZnQoc2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLlNlcnZlclNlc3Npb25Qb29sID0gU2VydmVyU2Vzc2lvblBvb2w7XG4vKipcbiAqIE9wdGlvbmFsbHkgZGVjb3JhdGUgYSBjb21tYW5kIHdpdGggc2Vzc2lvbnMgc3BlY2lmaWMga2V5c1xuICpcbiAqIEBwYXJhbSBzZXNzaW9uIC0gdGhlIHNlc3Npb24gdHJhY2tpbmcgdHJhbnNhY3Rpb24gc3RhdGVcbiAqIEBwYXJhbSBjb21tYW5kIC0gdGhlIGNvbW1hbmQgdG8gZGVjb3JhdGVcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc2V0dGluZ3MgcGFzc2VkIHRvIGNhbGxpbmcgb3BlcmF0aW9uXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGFwcGx5U2Vzc2lvbihzZXNzaW9uLCBjb21tYW5kLCBvcHRpb25zKSB7XG4gICAgaWYgKHNlc3Npb24uaGFzRW5kZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvRXhwaXJlZFNlc3Npb25FcnJvcigpO1xuICAgIH1cbiAgICAvLyBNYXkgYWNxdWlyZSBzZXJ2ZXJTZXNzaW9uIGhlcmVcbiAgICBjb25zdCBzZXJ2ZXJTZXNzaW9uID0gc2Vzc2lvbi5zZXJ2ZXJTZXNzaW9uO1xuICAgIGlmIChzZXJ2ZXJTZXNzaW9uID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKCdVbmFibGUgdG8gYWNxdWlyZSBzZXJ2ZXIgc2Vzc2lvbicpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy53cml0ZUNvbmNlcm4/LncgPT09IDApIHtcbiAgICAgICAgaWYgKHNlc3Npb24gJiYgc2Vzc2lvbi5leHBsaWNpdCkge1xuICAgICAgICAgICAgLy8gRXJyb3IgaWYgdXNlciBwcm92aWRlZCBhbiBleHBsaWNpdCBzZXNzaW9uIHRvIGFuIHVuYWNrbm93bGVkZ2VkIHdyaXRlIChTUEVDLTEwMTkpXG4gICAgICAgICAgICByZXR1cm4gbmV3IGVycm9yXzEuTW9uZ29BUElFcnJvcignQ2Fubm90IGhhdmUgZXhwbGljaXQgc2Vzc2lvbiB3aXRoIHVuYWNrbm93bGVkZ2VkIHdyaXRlcycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gbWFyayB0aGUgbGFzdCB1c2Ugb2YgdGhpcyBzZXNzaW9uLCBhbmQgYXBwbHkgdGhlIGBsc2lkYFxuICAgIHNlcnZlclNlc3Npb24ubGFzdFVzZSA9ICgwLCB1dGlsc18xLm5vdykoKTtcbiAgICBjb21tYW5kLmxzaWQgPSBzZXJ2ZXJTZXNzaW9uLmlkO1xuICAgIGNvbnN0IGluVHhuT3JUeG5Db21tYW5kID0gc2Vzc2lvbi5pblRyYW5zYWN0aW9uKCkgfHwgKDAsIHRyYW5zYWN0aW9uc18xLmlzVHJhbnNhY3Rpb25Db21tYW5kKShjb21tYW5kKTtcbiAgICBjb25zdCBpc1JldHJ5YWJsZVdyaXRlID0gISFvcHRpb25zLndpbGxSZXRyeVdyaXRlO1xuICAgIGlmIChpc1JldHJ5YWJsZVdyaXRlIHx8IGluVHhuT3JUeG5Db21tYW5kKSB7XG4gICAgICAgIHNlcnZlclNlc3Npb24udHhuTnVtYmVyICs9IHNlc3Npb25ba1R4bk51bWJlckluY3JlbWVudF07XG4gICAgICAgIHNlc3Npb25ba1R4bk51bWJlckluY3JlbWVudF0gPSAwO1xuICAgICAgICAvLyBUT0RPKE5PREUtMjY3NCk6IFByZXNlcnZlIGludDY0IHNlbnQgZnJvbSBNb25nb0RCXG4gICAgICAgIGNvbW1hbmQudHhuTnVtYmVyID0gYnNvbl8xLkxvbmcuZnJvbU51bWJlcihzZXJ2ZXJTZXNzaW9uLnR4bk51bWJlcik7XG4gICAgfVxuICAgIGlmICghaW5UeG5PclR4bkNvbW1hbmQpIHtcbiAgICAgICAgaWYgKHNlc3Npb24udHJhbnNhY3Rpb24uc3RhdGUgIT09IHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLk5PX1RSQU5TQUNUSU9OKSB7XG4gICAgICAgICAgICBzZXNzaW9uLnRyYW5zYWN0aW9uLnRyYW5zaXRpb24odHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuTk9fVFJBTlNBQ1RJT04pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXNzaW9uLnN1cHBvcnRzLmNhdXNhbENvbnNpc3RlbmN5ICYmXG4gICAgICAgICAgICBzZXNzaW9uLm9wZXJhdGlvblRpbWUgJiZcbiAgICAgICAgICAgICgwLCB1dGlsc18xLmNvbW1hbmRTdXBwb3J0c1JlYWRDb25jZXJuKShjb21tYW5kKSkge1xuICAgICAgICAgICAgY29tbWFuZC5yZWFkQ29uY2VybiA9IGNvbW1hbmQucmVhZENvbmNlcm4gfHwge307XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbW1hbmQucmVhZENvbmNlcm4sIHsgYWZ0ZXJDbHVzdGVyVGltZTogc2Vzc2lvbi5vcGVyYXRpb25UaW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlc3Npb25ba1NuYXBzaG90RW5hYmxlZF0pIHtcbiAgICAgICAgICAgIGNvbW1hbmQucmVhZENvbmNlcm4gPSBjb21tYW5kLnJlYWRDb25jZXJuIHx8IHsgbGV2ZWw6IHJlYWRfY29uY2Vybl8xLlJlYWRDb25jZXJuTGV2ZWwuc25hcHNob3QgfTtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uW2tTbmFwc2hvdFRpbWVdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbW1hbmQucmVhZENvbmNlcm4sIHsgYXRDbHVzdGVyVGltZTogc2Vzc2lvbltrU25hcHNob3RUaW1lXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG5vdyBhdHRlbXB0IHRvIGFwcGx5IHRyYW5zYWN0aW9uLXNwZWNpZmljIHNlc3Npb25zIGRhdGFcbiAgICAvLyBgYXV0b2NvbW1pdGAgbXVzdCBhbHdheXMgYmUgZmFsc2UgdG8gZGlmZmVyZW50aWF0ZSBmcm9tIHJldHJ5YWJsZSB3cml0ZXNcbiAgICBjb21tYW5kLmF1dG9jb21taXQgPSBmYWxzZTtcbiAgICBpZiAoc2Vzc2lvbi50cmFuc2FjdGlvbi5zdGF0ZSA9PT0gdHJhbnNhY3Rpb25zXzEuVHhuU3RhdGUuU1RBUlRJTkdfVFJBTlNBQ1RJT04pIHtcbiAgICAgICAgc2Vzc2lvbi50cmFuc2FjdGlvbi50cmFuc2l0aW9uKHRyYW5zYWN0aW9uc18xLlR4blN0YXRlLlRSQU5TQUNUSU9OX0lOX1BST0dSRVNTKTtcbiAgICAgICAgY29tbWFuZC5zdGFydFRyYW5zYWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgcmVhZENvbmNlcm4gPSBzZXNzaW9uLnRyYW5zYWN0aW9uLm9wdGlvbnMucmVhZENvbmNlcm4gfHwgc2Vzc2lvbj8uY2xpZW50T3B0aW9ucz8ucmVhZENvbmNlcm47XG4gICAgICAgIGlmIChyZWFkQ29uY2Vybikge1xuICAgICAgICAgICAgY29tbWFuZC5yZWFkQ29uY2VybiA9IHJlYWRDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXNzaW9uLnN1cHBvcnRzLmNhdXNhbENvbnNpc3RlbmN5ICYmIHNlc3Npb24ub3BlcmF0aW9uVGltZSkge1xuICAgICAgICAgICAgY29tbWFuZC5yZWFkQ29uY2VybiA9IGNvbW1hbmQucmVhZENvbmNlcm4gfHwge307XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbW1hbmQucmVhZENvbmNlcm4sIHsgYWZ0ZXJDbHVzdGVyVGltZTogc2Vzc2lvbi5vcGVyYXRpb25UaW1lIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbn1cbmV4cG9ydHMuYXBwbHlTZXNzaW9uID0gYXBwbHlTZXNzaW9uO1xuZnVuY3Rpb24gdXBkYXRlU2Vzc2lvbkZyb21SZXNwb25zZShzZXNzaW9uLCBkb2N1bWVudCkge1xuICAgIGlmIChkb2N1bWVudC4kY2x1c3RlclRpbWUpIHtcbiAgICAgICAgKDAsIGNvbW1vbl8xLl9hZHZhbmNlQ2x1c3RlclRpbWUpKHNlc3Npb24sIGRvY3VtZW50LiRjbHVzdGVyVGltZSk7XG4gICAgfVxuICAgIGlmIChkb2N1bWVudC5vcGVyYXRpb25UaW1lICYmIHNlc3Npb24gJiYgc2Vzc2lvbi5zdXBwb3J0cy5jYXVzYWxDb25zaXN0ZW5jeSkge1xuICAgICAgICBzZXNzaW9uLmFkdmFuY2VPcGVyYXRpb25UaW1lKGRvY3VtZW50Lm9wZXJhdGlvblRpbWUpO1xuICAgIH1cbiAgICBpZiAoZG9jdW1lbnQucmVjb3ZlcnlUb2tlbiAmJiBzZXNzaW9uICYmIHNlc3Npb24uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgIHNlc3Npb24udHJhbnNhY3Rpb24uX3JlY292ZXJ5VG9rZW4gPSBkb2N1bWVudC5yZWNvdmVyeVRva2VuO1xuICAgIH1cbiAgICBpZiAoc2Vzc2lvbj8uW2tTbmFwc2hvdEVuYWJsZWRdICYmIHNlc3Npb25ba1NuYXBzaG90VGltZV0gPT0gbnVsbCkge1xuICAgICAgICAvLyBmaW5kIGFuZCBhZ2dyZWdhdGUgY29tbWFuZHMgcmV0dXJuIGF0Q2x1c3RlclRpbWUgb24gdGhlIGN1cnNvclxuICAgICAgICAvLyBkaXN0aW5jdCBpbmNsdWRlcyBpdCBpbiB0aGUgcmVzcG9uc2UgYm9keVxuICAgICAgICBjb25zdCBhdENsdXN0ZXJUaW1lID0gZG9jdW1lbnQuY3Vyc29yPy5hdENsdXN0ZXJUaW1lIHx8IGRvY3VtZW50LmF0Q2x1c3RlclRpbWU7XG4gICAgICAgIGlmIChhdENsdXN0ZXJUaW1lKSB7XG4gICAgICAgICAgICBzZXNzaW9uW2tTbmFwc2hvdFRpbWVdID0gYXRDbHVzdGVyVGltZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMudXBkYXRlU2Vzc2lvbkZyb21SZXNwb25zZSA9IHVwZGF0ZVNlc3Npb25Gcm9tUmVzcG9uc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9ucy5qcy5tYXAiXSwibmFtZXMiOlsiX2EiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInVwZGF0ZVNlc3Npb25Gcm9tUmVzcG9uc2UiLCJhcHBseVNlc3Npb24iLCJTZXJ2ZXJTZXNzaW9uUG9vbCIsIlNlcnZlclNlc3Npb24iLCJtYXliZUNsZWFyUGlubmVkQ29ubmVjdGlvbiIsIkNsaWVudFNlc3Npb24iLCJ1dGlsXzEiLCJyZXF1aXJlIiwiYnNvbl8xIiwibWV0cmljc18xIiwic2hhcmVkXzEiLCJjb25zdGFudHNfMSIsImVycm9yXzEiLCJtb25nb190eXBlc18xIiwiZXhlY3V0ZV9vcGVyYXRpb25fMSIsInJ1bl9jb21tYW5kXzEiLCJyZWFkX2NvbmNlcm5fMSIsInJlYWRfcHJlZmVyZW5jZV8xIiwiY29tbW9uXzEiLCJ0cmFuc2FjdGlvbnNfMSIsInV0aWxzXzEiLCJ3cml0ZV9jb25jZXJuXzEiLCJtaW5XaXJlVmVyc2lvbkZvclNoYXJkZWRUcmFuc2FjdGlvbnMiLCJrU2VydmVyU2Vzc2lvbiIsIlN5bWJvbCIsImtTbmFwc2hvdFRpbWUiLCJrU25hcHNob3RFbmFibGVkIiwia1Bpbm5lZENvbm5lY3Rpb24iLCJrVHhuTnVtYmVySW5jcmVtZW50IiwiVHlwZWRFdmVudEVtaXR0ZXIiLCJjb25zdHJ1Y3RvciIsImNsaWVudCIsInNlc3Npb25Qb29sIiwib3B0aW9ucyIsImNsaWVudE9wdGlvbnMiLCJNb25nb1J1bnRpbWVFcnJvciIsInNuYXBzaG90IiwiY2F1c2FsQ29uc2lzdGVuY3kiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiaGFzRW5kZWQiLCJleHBsaWNpdCIsImFjcXVpcmUiLCJkZWZhdWx0Q2F1c2FsQ29uc2lzdGVuY3lWYWx1ZSIsInN1cHBvcnRzIiwiY2x1c3RlclRpbWUiLCJpbml0aWFsQ2x1c3RlclRpbWUiLCJvcGVyYXRpb25UaW1lIiwidW5kZWZpbmVkIiwib3duZXIiLCJkZWZhdWx0VHJhbnNhY3Rpb25PcHRpb25zIiwiYXNzaWduIiwidHJhbnNhY3Rpb24iLCJUcmFuc2FjdGlvbiIsImlkIiwic2VydmVyU2Vzc2lvbiIsInNuYXBzaG90RW5hYmxlZCIsImxvYWRCYWxhbmNlZCIsInRvcG9sb2d5IiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiVG9wb2xvZ3lUeXBlIiwiTG9hZEJhbGFuY2VkIiwicGlubmVkQ29ubmVjdGlvbiIsInBpbiIsImNvbm4iLCJUeXBlRXJyb3IiLCJlbWl0IiwiUElOTkVEIiwiaW5UcmFuc2FjdGlvbiIsIkNvbm5lY3Rpb25Qb29sTWV0cmljcyIsIlRYTiIsIkNVUlNPUiIsInVucGluIiwidW5waW5TZXJ2ZXIiLCJpc1Bpbm5lZCIsImVuZFNlc3Npb24iLCJhYm9ydFRyYW5zYWN0aW9uIiwicmVsZWFzZSIsImNsb25lIiwid3JpdGFibGUiLCJmb3JjZSIsImFkdmFuY2VPcGVyYXRpb25UaW1lIiwiZ3JlYXRlclRoYW4iLCJhZHZhbmNlQ2x1c3RlclRpbWUiLCJfYnNvbnR5cGUiLCJzaWduYXR1cmUiLCJoYXNoIiwia2V5SWQiLCJfYWR2YW5jZUNsdXN0ZXJUaW1lIiwiZXF1YWxzIiwic2Vzc2lvbiIsIkJ5dGVVdGlscyIsImJ1ZmZlciIsImluY3JlbWVudFRyYW5zYWN0aW9uTnVtYmVyIiwiaXNBY3RpdmUiLCJzdGFydFRyYW5zYWN0aW9uIiwiTW9uZ29Db21wYXRpYmlsaXR5RXJyb3IiLCJNb25nb1RyYW5zYWN0aW9uRXJyb3IiLCJpc0NvbW1pdHRlZCIsInRvcG9sb2d5TWF4V2lyZVZlcnNpb24iLCJtYXhXaXJlVmVyc2lvbiIsImlzU2hhcmRlZCIsInJlYWRDb25jZXJuIiwid3JpdGVDb25jZXJuIiwicmVhZFByZWZlcmVuY2UiLCJtYXhDb21taXRUaW1lTVMiLCJ0cmFuc2l0aW9uIiwiVHhuU3RhdGUiLCJTVEFSVElOR19UUkFOU0FDVElPTiIsImNvbW1pdFRyYW5zYWN0aW9uIiwiZW5kVHJhbnNhY3Rpb25Bc3luYyIsInRvQlNPTiIsIndpdGhUcmFuc2FjdGlvbiIsImZuIiwic3RhcnRUaW1lIiwibm93IiwiYXR0ZW1wdFRyYW5zYWN0aW9uIiwiTUFYX1dJVEhfVFJBTlNBQ1RJT05fVElNRU9VVCIsIk5PTl9ERVRFUk1JTklTVElDX1dSSVRFX0NPTkNFUk5fRVJST1JTIiwiU2V0IiwiaGFzTm90VGltZWRPdXQiLCJtYXgiLCJjYWxjdWxhdGVEdXJhdGlvbkluTXMiLCJpc1Vua25vd25UcmFuc2FjdGlvbkNvbW1pdFJlc3VsdCIsImVyciIsImlzTm9uRGV0ZXJtaW5pc3RpY1dyaXRlQ29uY2VybkVycm9yIiwiTW9uZ29TZXJ2ZXJFcnJvciIsImNvZGVOYW1lIiwiaGFzIiwiaXNNYXhUaW1lTVNFeHBpcmVkRXJyb3IiLCJjb2RlIiwiTU9OR09EQl9FUlJPUl9DT0RFUyIsIlVuc2F0aXNmaWFibGVXcml0ZUNvbmNlcm4iLCJVbmtub3duUmVwbFdyaXRlQ29uY2VybiIsImVycm9yIiwiTW9uZ29FcnJvciIsImhhc0Vycm9yTGFiZWwiLCJNb25nb0Vycm9yTGFiZWwiLCJUcmFuc2llbnRUcmFuc2FjdGlvbkVycm9yIiwic2VydmVycyIsIkFycmF5IiwiZnJvbSIsInMiLCJ2YWx1ZXMiLCJsb2FkQmFsYW5jZXIiLCJwb29sIiwiY2hlY2tJbiIsIlVOUElOTkVEIiwic3RhdGUiLCJOT19UUkFOU0FDVElPTiIsImZvcmNlQ2xlYXIiLCJjbGVhciIsInNlcnZpY2VJZCIsIk1heFRpbWVNU0V4cGlyZWQiLCJ3cml0ZUNvbmNlcm5FcnJvciIsImF0dGVtcHRUcmFuc2FjdGlvbkNvbW1pdCIsInJlc3VsdCIsInRoZW4iLCJVbmtub3duVHJhbnNhY3Rpb25Db21taXRSZXN1bHQiLCJVU0VSX0VYUExJQ0lUX1RYTl9FTkRfU1RBVEVTIiwiVFJBTlNBQ1RJT05fQ09NTUlUVEVEIiwiVFJBTlNBQ1RJT05fQUJPUlRFRCIsInVzZXJFeHBsaWNpdGx5RW5kZWRUcmFuc2FjdGlvbiIsInByb21pc2UiLCJQcm9taXNlIiwicmVqZWN0IiwiaXNQcm9taXNlTGlrZSIsImNhdGNoIiwibWF5YmVSZXRyeU9yVGhyb3ciLCJhZGRFcnJvckxhYmVsIiwicHJvbWlzaWZ5IiwiZW5kVHJhbnNhY3Rpb24iLCJjb21tYW5kTmFtZSIsImNhbGxiYWNrIiwidHhuU3RhdGUiLCJUUkFOU0FDVElPTl9DT01NSVRURURfRU1QVFkiLCJjb21tYW5kIiwidyIsInd0aW1lb3V0TVMiLCJXcml0ZUNvbmNlcm4iLCJhcHBseSIsIm1heFRpbWVNUyIsImNvbW1hbmRIYW5kbGVyIiwiaXNSZXRyeWFibGVXcml0ZUVycm9yIiwiTW9uZ29Xcml0ZUNvbmNlcm5FcnJvciIsInJlY292ZXJ5VG9rZW4iLCJoYW5kbGVGaXJzdENvbW1hbmRBdHRlbXB0Iiwid3RpbWVvdXQiLCJleGVjdXRlT3BlcmF0aW9uIiwiUnVuQWRtaW5Db21tYW5kT3BlcmF0aW9uIiwiUmVhZFByZWZlcmVuY2UiLCJwcmltYXJ5IiwiYnlwYXNzUGlubmluZ0NoZWNrIiwiQmluYXJ5IiwidXVpZFY0IiwiU1VCVFlQRV9VVUlEIiwibGFzdFVzZSIsInR4bk51bWJlciIsImlzRGlydHkiLCJoYXNUaW1lZE91dCIsInNlc3Npb25UaW1lb3V0TWludXRlcyIsImlkbGVUaW1lTWludXRlcyIsIk1hdGgiLCJyb3VuZCIsImFycmF5QnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJpZEJ5dGVzIiwiQnVmZmVyIiwic2V0Iiwic3ViX3R5cGUiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsInNlc3Npb25zIiwiTGlzdCIsImxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMiLCJsZW5ndGgiLCJwb3RlbnRpYWxTZXNzaW9uIiwic2hpZnQiLCJ1bnNoaWZ0IiwicHJ1bmUiLCJNb25nb0V4cGlyZWRTZXNzaW9uRXJyb3IiLCJNb25nb0FQSUVycm9yIiwibHNpZCIsImluVHhuT3JUeG5Db21tYW5kIiwiaXNUcmFuc2FjdGlvbkNvbW1hbmQiLCJpc1JldHJ5YWJsZVdyaXRlIiwid2lsbFJldHJ5V3JpdGUiLCJMb25nIiwiZnJvbU51bWJlciIsImNvbW1hbmRTdXBwb3J0c1JlYWRDb25jZXJuIiwiYWZ0ZXJDbHVzdGVyVGltZSIsImxldmVsIiwiUmVhZENvbmNlcm5MZXZlbCIsImF0Q2x1c3RlclRpbWUiLCJhdXRvY29tbWl0IiwiVFJBTlNBQ1RJT05fSU5fUFJPR1JFU1MiLCJkb2N1bWVudCIsIiRjbHVzdGVyVGltZSIsIl9yZWNvdmVyeVRva2VuIiwiY3Vyc29yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sessions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/sort.js":
/*!******************************************!*\
  !*** ./node_modules/mongodb/lib/sort.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.formatSort = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\n/** @internal */ function prepareDirection(direction = 1) {\n    const value = `${direction}`.toLowerCase();\n    if (isMeta(direction)) return direction;\n    switch(value){\n        case \"ascending\":\n        case \"asc\":\n        case \"1\":\n            return 1;\n        case \"descending\":\n        case \"desc\":\n        case \"-1\":\n            return -1;\n        default:\n            throw new error_1.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(direction)}`);\n    }\n}\n/** @internal */ function isMeta(t) {\n    return typeof t === \"object\" && t != null && \"$meta\" in t && typeof t.$meta === \"string\";\n}\n/** @internal */ function isPair(t) {\n    if (Array.isArray(t) && t.length === 2) {\n        try {\n            prepareDirection(t[1]);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n    return false;\n}\nfunction isDeep(t) {\n    return Array.isArray(t) && Array.isArray(t[0]);\n}\nfunction isMap(t) {\n    return t instanceof Map && t.size > 0;\n}\n/** @internal */ function pairToMap(v) {\n    return new Map([\n        [\n            `${v[0]}`,\n            prepareDirection([\n                v[1]\n            ])\n        ]\n    ]);\n}\n/** @internal */ function deepToMap(t) {\n    const sortEntries = t.map(([k, v])=>[\n            `${k}`,\n            prepareDirection(v)\n        ]);\n    return new Map(sortEntries);\n}\n/** @internal */ function stringsToMap(t) {\n    const sortEntries = t.map((key)=>[\n            `${key}`,\n            1\n        ]);\n    return new Map(sortEntries);\n}\n/** @internal */ function objectToMap(t) {\n    const sortEntries = Object.entries(t).map(([k, v])=>[\n            `${k}`,\n            prepareDirection(v)\n        ]);\n    return new Map(sortEntries);\n}\n/** @internal */ function mapToMap(t) {\n    const sortEntries = Array.from(t).map(([k, v])=>[\n            `${k}`,\n            prepareDirection(v)\n        ]);\n    return new Map(sortEntries);\n}\n/** converts a Sort type into a type that is valid for the server (SortForCmd) */ function formatSort(sort, direction) {\n    if (sort == null) return undefined;\n    if (typeof sort === \"string\") return new Map([\n        [\n            sort,\n            prepareDirection(direction)\n        ]\n    ]);\n    if (typeof sort !== \"object\") {\n        throw new error_1.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(sort)} Sort must be a valid object`);\n    }\n    if (!Array.isArray(sort)) {\n        return isMap(sort) ? mapToMap(sort) : Object.keys(sort).length ? objectToMap(sort) : undefined;\n    }\n    if (!sort.length) return undefined;\n    if (isDeep(sort)) return deepToMap(sort);\n    if (isPair(sort)) return pairToMap(sort);\n    return stringsToMap(sort);\n}\nexports.formatSort = formatSort; //# sourceMappingURL=sort.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvc29ydC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0JBQWtCLEdBQUcsS0FBSztBQUMxQixNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywwREFBUztBQUNqQyxjQUFjLEdBQ2QsU0FBU0MsaUJBQWlCQyxZQUFZLENBQUM7SUFDbkMsTUFBTUwsUUFBUSxDQUFDLEVBQUVLLFVBQVUsQ0FBQyxDQUFDQyxXQUFXO0lBQ3hDLElBQUlDLE9BQU9GLFlBQ1AsT0FBT0E7SUFDWCxPQUFRTDtRQUNKLEtBQUs7UUFDTCxLQUFLO1FBQ0wsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1FBQ0wsS0FBSztRQUNMLEtBQUs7WUFDRCxPQUFPLENBQUM7UUFDWjtZQUNJLE1BQU0sSUFBSUUsUUFBUU0seUJBQXlCLENBQUMsQ0FBQyx3QkFBd0IsRUFBRUMsS0FBS0MsU0FBUyxDQUFDTCxXQUFXLENBQUM7SUFDMUc7QUFDSjtBQUNBLGNBQWMsR0FDZCxTQUFTRSxPQUFPSSxDQUFDO0lBQ2IsT0FBTyxPQUFPQSxNQUFNLFlBQVlBLEtBQUssUUFBUSxXQUFXQSxLQUFLLE9BQU9BLEVBQUVDLEtBQUssS0FBSztBQUNwRjtBQUNBLGNBQWMsR0FDZCxTQUFTQyxPQUFPRixDQUFDO0lBQ2IsSUFBSUcsTUFBTUMsT0FBTyxDQUFDSixNQUFNQSxFQUFFSyxNQUFNLEtBQUssR0FBRztRQUNwQyxJQUFJO1lBQ0FaLGlCQUFpQk8sQ0FBQyxDQUFDLEVBQUU7WUFDckIsT0FBTztRQUNYLEVBQ0EsT0FBT00sR0FBRztZQUNOLE9BQU87UUFDWDtJQUNKO0lBQ0EsT0FBTztBQUNYO0FBQ0EsU0FBU0MsT0FBT1AsQ0FBQztJQUNiLE9BQU9HLE1BQU1DLE9BQU8sQ0FBQ0osTUFBTUcsTUFBTUMsT0FBTyxDQUFDSixDQUFDLENBQUMsRUFBRTtBQUNqRDtBQUNBLFNBQVNRLE1BQU1SLENBQUM7SUFDWixPQUFPQSxhQUFhUyxPQUFPVCxFQUFFVSxJQUFJLEdBQUc7QUFDeEM7QUFDQSxjQUFjLEdBQ2QsU0FBU0MsVUFBVUMsQ0FBQztJQUNoQixPQUFPLElBQUlILElBQUk7UUFBQztZQUFDLENBQUMsRUFBRUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQUVuQixpQkFBaUI7Z0JBQUNtQixDQUFDLENBQUMsRUFBRTthQUFDO1NBQUU7S0FBQztBQUMxRDtBQUNBLGNBQWMsR0FDZCxTQUFTQyxVQUFVYixDQUFDO0lBQ2hCLE1BQU1jLGNBQWNkLEVBQUVlLEdBQUcsQ0FBQyxDQUFDLENBQUNDLEdBQUdKLEVBQUUsR0FBSztZQUFDLENBQUMsRUFBRUksRUFBRSxDQUFDO1lBQUV2QixpQkFBaUJtQjtTQUFHO0lBQ25FLE9BQU8sSUFBSUgsSUFBSUs7QUFDbkI7QUFDQSxjQUFjLEdBQ2QsU0FBU0csYUFBYWpCLENBQUM7SUFDbkIsTUFBTWMsY0FBY2QsRUFBRWUsR0FBRyxDQUFDRyxDQUFBQSxNQUFPO1lBQUMsQ0FBQyxFQUFFQSxJQUFJLENBQUM7WUFBRTtTQUFFO0lBQzlDLE9BQU8sSUFBSVQsSUFBSUs7QUFDbkI7QUFDQSxjQUFjLEdBQ2QsU0FBU0ssWUFBWW5CLENBQUM7SUFDbEIsTUFBTWMsY0FBYzVCLE9BQU9rQyxPQUFPLENBQUNwQixHQUFHZSxHQUFHLENBQUMsQ0FBQyxDQUFDQyxHQUFHSixFQUFFLEdBQUs7WUFDbEQsQ0FBQyxFQUFFSSxFQUFFLENBQUM7WUFDTnZCLGlCQUFpQm1CO1NBQ3BCO0lBQ0QsT0FBTyxJQUFJSCxJQUFJSztBQUNuQjtBQUNBLGNBQWMsR0FDZCxTQUFTTyxTQUFTckIsQ0FBQztJQUNmLE1BQU1jLGNBQWNYLE1BQU1tQixJQUFJLENBQUN0QixHQUFHZSxHQUFHLENBQUMsQ0FBQyxDQUFDQyxHQUFHSixFQUFFLEdBQUs7WUFDOUMsQ0FBQyxFQUFFSSxFQUFFLENBQUM7WUFDTnZCLGlCQUFpQm1CO1NBQ3BCO0lBQ0QsT0FBTyxJQUFJSCxJQUFJSztBQUNuQjtBQUNBLCtFQUErRSxHQUMvRSxTQUFTeEIsV0FBV2lDLElBQUksRUFBRTdCLFNBQVM7SUFDL0IsSUFBSTZCLFFBQVEsTUFDUixPQUFPQztJQUNYLElBQUksT0FBT0QsU0FBUyxVQUNoQixPQUFPLElBQUlkLElBQUk7UUFBQztZQUFDYztZQUFNOUIsaUJBQWlCQztTQUFXO0tBQUM7SUFDeEQsSUFBSSxPQUFPNkIsU0FBUyxVQUFVO1FBQzFCLE1BQU0sSUFBSWhDLFFBQVFNLHlCQUF5QixDQUFDLENBQUMscUJBQXFCLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQ3dCLE1BQU0sNEJBQTRCLENBQUM7SUFDMUg7SUFDQSxJQUFJLENBQUNwQixNQUFNQyxPQUFPLENBQUNtQixPQUFPO1FBQ3RCLE9BQU9mLE1BQU1lLFFBQVFGLFNBQVNFLFFBQVFyQyxPQUFPdUMsSUFBSSxDQUFDRixNQUFNbEIsTUFBTSxHQUFHYyxZQUFZSSxRQUFRQztJQUN6RjtJQUNBLElBQUksQ0FBQ0QsS0FBS2xCLE1BQU0sRUFDWixPQUFPbUI7SUFDWCxJQUFJakIsT0FBT2dCLE9BQ1AsT0FBT1YsVUFBVVU7SUFDckIsSUFBSXJCLE9BQU9xQixPQUNQLE9BQU9aLFVBQVVZO0lBQ3JCLE9BQU9OLGFBQWFNO0FBQ3hCO0FBQ0FuQyxrQkFBa0IsR0FBR0UsWUFDckIsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGlvbmV6LW5leHRqcy8uL25vZGVfbW9kdWxlcy9tb25nb2RiL2xpYi9zb3J0LmpzP2Y3NmQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmZvcm1hdFNvcnQgPSB2b2lkIDA7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBwcmVwYXJlRGlyZWN0aW9uKGRpcmVjdGlvbiA9IDEpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGAke2RpcmVjdGlvbn1gLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGlzTWV0YShkaXJlY3Rpb24pKVxuICAgICAgICByZXR1cm4gZGlyZWN0aW9uO1xuICAgIHN3aXRjaCAodmFsdWUpIHtcbiAgICAgICAgY2FzZSAnYXNjZW5kaW5nJzpcbiAgICAgICAgY2FzZSAnYXNjJzpcbiAgICAgICAgY2FzZSAnMSc6XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgY2FzZSAnZGVzY2VuZGluZyc6XG4gICAgICAgIGNhc2UgJ2Rlc2MnOlxuICAgICAgICBjYXNlICctMSc6XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb0ludmFsaWRBcmd1bWVudEVycm9yKGBJbnZhbGlkIHNvcnQgZGlyZWN0aW9uOiAke0pTT04uc3RyaW5naWZ5KGRpcmVjdGlvbil9YCk7XG4gICAgfVxufVxuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gaXNNZXRhKHQpIHtcbiAgICByZXR1cm4gdHlwZW9mIHQgPT09ICdvYmplY3QnICYmIHQgIT0gbnVsbCAmJiAnJG1ldGEnIGluIHQgJiYgdHlwZW9mIHQuJG1ldGEgPT09ICdzdHJpbmcnO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gaXNQYWlyKHQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0KSAmJiB0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJlcGFyZURpcmVjdGlvbih0WzFdKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNEZWVwKHQpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0KSAmJiBBcnJheS5pc0FycmF5KHRbMF0pO1xufVxuZnVuY3Rpb24gaXNNYXAodCkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgTWFwICYmIHQuc2l6ZSA+IDA7XG59XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBwYWlyVG9NYXAodikge1xuICAgIHJldHVybiBuZXcgTWFwKFtbYCR7dlswXX1gLCBwcmVwYXJlRGlyZWN0aW9uKFt2WzFdXSldXSk7XG59XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBkZWVwVG9NYXAodCkge1xuICAgIGNvbnN0IHNvcnRFbnRyaWVzID0gdC5tYXAoKFtrLCB2XSkgPT4gW2Ake2t9YCwgcHJlcGFyZURpcmVjdGlvbih2KV0pO1xuICAgIHJldHVybiBuZXcgTWFwKHNvcnRFbnRyaWVzKTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIHN0cmluZ3NUb01hcCh0KSB7XG4gICAgY29uc3Qgc29ydEVudHJpZXMgPSB0Lm1hcChrZXkgPT4gW2Ake2tleX1gLCAxXSk7XG4gICAgcmV0dXJuIG5ldyBNYXAoc29ydEVudHJpZXMpO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gb2JqZWN0VG9NYXAodCkge1xuICAgIGNvbnN0IHNvcnRFbnRyaWVzID0gT2JqZWN0LmVudHJpZXModCkubWFwKChbaywgdl0pID0+IFtcbiAgICAgICAgYCR7a31gLFxuICAgICAgICBwcmVwYXJlRGlyZWN0aW9uKHYpXG4gICAgXSk7XG4gICAgcmV0dXJuIG5ldyBNYXAoc29ydEVudHJpZXMpO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gbWFwVG9NYXAodCkge1xuICAgIGNvbnN0IHNvcnRFbnRyaWVzID0gQXJyYXkuZnJvbSh0KS5tYXAoKFtrLCB2XSkgPT4gW1xuICAgICAgICBgJHtrfWAsXG4gICAgICAgIHByZXBhcmVEaXJlY3Rpb24odilcbiAgICBdKTtcbiAgICByZXR1cm4gbmV3IE1hcChzb3J0RW50cmllcyk7XG59XG4vKiogY29udmVydHMgYSBTb3J0IHR5cGUgaW50byBhIHR5cGUgdGhhdCBpcyB2YWxpZCBmb3IgdGhlIHNlcnZlciAoU29ydEZvckNtZCkgKi9cbmZ1bmN0aW9uIGZvcm1hdFNvcnQoc29ydCwgZGlyZWN0aW9uKSB7XG4gICAgaWYgKHNvcnQgPT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIHNvcnQgPT09ICdzdHJpbmcnKVxuICAgICAgICByZXR1cm4gbmV3IE1hcChbW3NvcnQsIHByZXBhcmVEaXJlY3Rpb24oZGlyZWN0aW9uKV1dKTtcbiAgICBpZiAodHlwZW9mIHNvcnQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoYEludmFsaWQgc29ydCBmb3JtYXQ6ICR7SlNPTi5zdHJpbmdpZnkoc29ydCl9IFNvcnQgbXVzdCBiZSBhIHZhbGlkIG9iamVjdGApO1xuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc29ydCkpIHtcbiAgICAgICAgcmV0dXJuIGlzTWFwKHNvcnQpID8gbWFwVG9NYXAoc29ydCkgOiBPYmplY3Qua2V5cyhzb3J0KS5sZW5ndGggPyBvYmplY3RUb01hcChzb3J0KSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCFzb3J0Lmxlbmd0aClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAoaXNEZWVwKHNvcnQpKVxuICAgICAgICByZXR1cm4gZGVlcFRvTWFwKHNvcnQpO1xuICAgIGlmIChpc1BhaXIoc29ydCkpXG4gICAgICAgIHJldHVybiBwYWlyVG9NYXAoc29ydCk7XG4gICAgcmV0dXJuIHN0cmluZ3NUb01hcChzb3J0KTtcbn1cbmV4cG9ydHMuZm9ybWF0U29ydCA9IGZvcm1hdFNvcnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zb3J0LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImZvcm1hdFNvcnQiLCJlcnJvcl8xIiwicmVxdWlyZSIsInByZXBhcmVEaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJ0b0xvd2VyQ2FzZSIsImlzTWV0YSIsIk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwidCIsIiRtZXRhIiwiaXNQYWlyIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiZSIsImlzRGVlcCIsImlzTWFwIiwiTWFwIiwic2l6ZSIsInBhaXJUb01hcCIsInYiLCJkZWVwVG9NYXAiLCJzb3J0RW50cmllcyIsIm1hcCIsImsiLCJzdHJpbmdzVG9NYXAiLCJrZXkiLCJvYmplY3RUb01hcCIsImVudHJpZXMiLCJtYXBUb01hcCIsImZyb20iLCJzb3J0IiwidW5kZWZpbmVkIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/sort.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/transactions.js":
/*!**************************************************!*\
  !*** ./node_modules/mongodb/lib/transactions.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isTransactionCommand = exports.Transaction = exports.TxnState = void 0;\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\n/** @internal */ exports.TxnState = Object.freeze({\n    NO_TRANSACTION: \"NO_TRANSACTION\",\n    STARTING_TRANSACTION: \"STARTING_TRANSACTION\",\n    TRANSACTION_IN_PROGRESS: \"TRANSACTION_IN_PROGRESS\",\n    TRANSACTION_COMMITTED: \"TRANSACTION_COMMITTED\",\n    TRANSACTION_COMMITTED_EMPTY: \"TRANSACTION_COMMITTED_EMPTY\",\n    TRANSACTION_ABORTED: \"TRANSACTION_ABORTED\"\n});\nconst stateMachine = {\n    [exports.TxnState.NO_TRANSACTION]: [\n        exports.TxnState.NO_TRANSACTION,\n        exports.TxnState.STARTING_TRANSACTION\n    ],\n    [exports.TxnState.STARTING_TRANSACTION]: [\n        exports.TxnState.TRANSACTION_IN_PROGRESS,\n        exports.TxnState.TRANSACTION_COMMITTED,\n        exports.TxnState.TRANSACTION_COMMITTED_EMPTY,\n        exports.TxnState.TRANSACTION_ABORTED\n    ],\n    [exports.TxnState.TRANSACTION_IN_PROGRESS]: [\n        exports.TxnState.TRANSACTION_IN_PROGRESS,\n        exports.TxnState.TRANSACTION_COMMITTED,\n        exports.TxnState.TRANSACTION_ABORTED\n    ],\n    [exports.TxnState.TRANSACTION_COMMITTED]: [\n        exports.TxnState.TRANSACTION_COMMITTED,\n        exports.TxnState.TRANSACTION_COMMITTED_EMPTY,\n        exports.TxnState.STARTING_TRANSACTION,\n        exports.TxnState.NO_TRANSACTION\n    ],\n    [exports.TxnState.TRANSACTION_ABORTED]: [\n        exports.TxnState.STARTING_TRANSACTION,\n        exports.TxnState.NO_TRANSACTION\n    ],\n    [exports.TxnState.TRANSACTION_COMMITTED_EMPTY]: [\n        exports.TxnState.TRANSACTION_COMMITTED_EMPTY,\n        exports.TxnState.NO_TRANSACTION\n    ]\n};\nconst ACTIVE_STATES = new Set([\n    exports.TxnState.STARTING_TRANSACTION,\n    exports.TxnState.TRANSACTION_IN_PROGRESS\n]);\nconst COMMITTED_STATES = new Set([\n    exports.TxnState.TRANSACTION_COMMITTED,\n    exports.TxnState.TRANSACTION_COMMITTED_EMPTY,\n    exports.TxnState.TRANSACTION_ABORTED\n]);\n/**\n * @public\n * A class maintaining state related to a server transaction. Internal Only\n */ class Transaction {\n    /** Create a transaction @internal */ constructor(options){\n        options = options ?? {};\n        this.state = exports.TxnState.NO_TRANSACTION;\n        this.options = {};\n        const writeConcern = write_concern_1.WriteConcern.fromOptions(options);\n        if (writeConcern) {\n            if (writeConcern.w === 0) {\n                throw new error_1.MongoTransactionError(\"Transactions do not support unacknowledged write concern\");\n            }\n            this.options.writeConcern = writeConcern;\n        }\n        if (options.readConcern) {\n            this.options.readConcern = read_concern_1.ReadConcern.fromOptions(options);\n        }\n        if (options.readPreference) {\n            this.options.readPreference = read_preference_1.ReadPreference.fromOptions(options);\n        }\n        if (options.maxCommitTimeMS) {\n            this.options.maxTimeMS = options.maxCommitTimeMS;\n        }\n        // TODO: This isn't technically necessary\n        this._pinnedServer = undefined;\n        this._recoveryToken = undefined;\n    }\n    /** @internal */ get server() {\n        return this._pinnedServer;\n    }\n    get recoveryToken() {\n        return this._recoveryToken;\n    }\n    get isPinned() {\n        return !!this.server;\n    }\n    /** @returns Whether the transaction has started */ get isStarting() {\n        return this.state === exports.TxnState.STARTING_TRANSACTION;\n    }\n    /**\n     * @returns Whether this session is presently in a transaction\n     */ get isActive() {\n        return ACTIVE_STATES.has(this.state);\n    }\n    get isCommitted() {\n        return COMMITTED_STATES.has(this.state);\n    }\n    /**\n     * Transition the transaction in the state machine\n     * @internal\n     * @param nextState - The new state to transition to\n     */ transition(nextState) {\n        const nextStates = stateMachine[this.state];\n        if (nextStates && nextStates.includes(nextState)) {\n            this.state = nextState;\n            if (this.state === exports.TxnState.NO_TRANSACTION || this.state === exports.TxnState.STARTING_TRANSACTION || this.state === exports.TxnState.TRANSACTION_ABORTED) {\n                this.unpinServer();\n            }\n            return;\n        }\n        throw new error_1.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${nextState}]`);\n    }\n    /** @internal */ pinServer(server) {\n        if (this.isActive) {\n            this._pinnedServer = server;\n        }\n    }\n    /** @internal */ unpinServer() {\n        this._pinnedServer = undefined;\n    }\n}\nexports.Transaction = Transaction;\nfunction isTransactionCommand(command) {\n    return !!(command.commitTransaction || command.abortTransaction);\n}\nexports.isTransactionCommand = isTransactionCommand; //# sourceMappingURL=transactions.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvdHJhbnNhY3Rpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw0QkFBNEIsR0FBR0EsbUJBQW1CLEdBQUdBLGdCQUFnQixHQUFHLEtBQUs7QUFDN0UsTUFBTUssVUFBVUMsbUJBQU9BLENBQUMsMERBQVM7QUFDakMsTUFBTUMsaUJBQWlCRCxtQkFBT0EsQ0FBQyx3RUFBZ0I7QUFDL0MsTUFBTUUsb0JBQW9CRixtQkFBT0EsQ0FBQyw4RUFBbUI7QUFDckQsTUFBTUcsa0JBQWtCSCxtQkFBT0EsQ0FBQywwRUFBaUI7QUFDakQsY0FBYyxHQUNkTixnQkFBZ0IsR0FBR0YsT0FBT1ksTUFBTSxDQUFDO0lBQzdCQyxnQkFBZ0I7SUFDaEJDLHNCQUFzQjtJQUN0QkMseUJBQXlCO0lBQ3pCQyx1QkFBdUI7SUFDdkJDLDZCQUE2QjtJQUM3QkMscUJBQXFCO0FBQ3pCO0FBQ0EsTUFBTUMsZUFBZTtJQUNqQixDQUFDakIsUUFBUUksUUFBUSxDQUFDTyxjQUFjLENBQUMsRUFBRTtRQUFDWCxRQUFRSSxRQUFRLENBQUNPLGNBQWM7UUFBRVgsUUFBUUksUUFBUSxDQUFDUSxvQkFBb0I7S0FBQztJQUMzRyxDQUFDWixRQUFRSSxRQUFRLENBQUNRLG9CQUFvQixDQUFDLEVBQUU7UUFDckNaLFFBQVFJLFFBQVEsQ0FBQ1MsdUJBQXVCO1FBQ3hDYixRQUFRSSxRQUFRLENBQUNVLHFCQUFxQjtRQUN0Q2QsUUFBUUksUUFBUSxDQUFDVywyQkFBMkI7UUFDNUNmLFFBQVFJLFFBQVEsQ0FBQ1ksbUJBQW1CO0tBQ3ZDO0lBQ0QsQ0FBQ2hCLFFBQVFJLFFBQVEsQ0FBQ1MsdUJBQXVCLENBQUMsRUFBRTtRQUN4Q2IsUUFBUUksUUFBUSxDQUFDUyx1QkFBdUI7UUFDeENiLFFBQVFJLFFBQVEsQ0FBQ1UscUJBQXFCO1FBQ3RDZCxRQUFRSSxRQUFRLENBQUNZLG1C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QUNsQixNQUFNQyxhQUFhOUIsWUFBWSxDQUFDLElBQUksQ0FBQ00sS0FBSyxDQUFDO1FBQzNDLElBQUl3QixjQUFjQSxXQUFXQyxRQUFRLENBQUNGLFlBQVk7WUFDOUMsSUFBSSxDQUFDdkIsS0FBSyxHQUFHdUI7WUFDYixJQUFJLElBQUksQ0FBQ3ZCLEtBQUssS0FBS3ZCLFFBQVFJLFFBQVEsQ0FBQ08sY0FBYyxJQUM5QyxJQUFJLENBQUNZLEtBQUssS0FBS3ZCLFFBQVFJLFFBQVEsQ0FBQ1Esb0JBQW9CLElBQ3BELElBQUksQ0FBQ1csS0FBSyxLQUFLdkIsUUFBUUksUUFBUSxDQUFDWSxtQkFBbUIsRUFBRTtnQkFDckQsSUFBSSxDQUFDaUMsV0FBVztZQUNwQjtZQUNBO1FBQ0o7UUFDQSxNQUFNLElBQUk1QyxRQUFRNkMsaUJBQWlCLENBQUMsQ0FBQyx5Q0FBeUMsRUFBRSxJQUFJLENBQUMzQixLQUFLLENBQUMsTUFBTSxFQUFFdUIsVUFBVSxDQUFDLENBQUM7SUFDbkg7SUFDQSxjQUFjLEdBQ2RLLFVBQVViLE1BQU0sRUFBRTtRQUNkLElBQUksSUFBSSxDQUFDSSxRQUFRLEVBQUU7WUFDZixJQUFJLENBQUNQLGFBQWEsR0FBR0c7UUFDekI7SUFDSjtJQUNBLGNBQWMsR0FDZFcsY0FBYztRQUNWLElBQUksQ0FBQ2QsYUFBYSxHQUFHQztJQUN6QjtBQUNKO0FBQ0FwQyxtQkFBbUIsR0FBR0c7QUFDdEIsU0FBU0QscUJBQXFCa0QsT0FBTztJQUNqQyxPQUFPLENBQUMsQ0FBRUEsQ0FBQUEsUUFBUUMsaUJBQWlCLElBQUlELFFBQVFFLGdCQUFnQjtBQUNuRTtBQUNBdEQsNEJBQTRCLEdBQUdFLHNCQUMvQix3Q0FBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3RyYW5zYWN0aW9ucy5qcz9iZTAzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc1RyYW5zYWN0aW9uQ29tbWFuZCA9IGV4cG9ydHMuVHJhbnNhY3Rpb24gPSBleHBvcnRzLlR4blN0YXRlID0gdm9pZCAwO1xuY29uc3QgZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xuY29uc3QgcmVhZF9jb25jZXJuXzEgPSByZXF1aXJlKFwiLi9yZWFkX2NvbmNlcm5cIik7XG5jb25zdCByZWFkX3ByZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuL3JlYWRfcHJlZmVyZW5jZVwiKTtcbmNvbnN0IHdyaXRlX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3dyaXRlX2NvbmNlcm5cIik7XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLlR4blN0YXRlID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgTk9fVFJBTlNBQ1RJT046ICdOT19UUkFOU0FDVElPTicsXG4gICAgU1RBUlRJTkdfVFJBTlNBQ1RJT046ICdTVEFSVElOR19UUkFOU0FDVElPTicsXG4gICAgVFJBTlNBQ1RJT05fSU5fUFJPR1JFU1M6ICdUUkFOU0FDVElPTl9JTl9QUk9HUkVTUycsXG4gICAgVFJBTlNBQ1RJT05fQ09NTUlUVEVEOiAnVFJBTlNBQ1RJT05fQ09NTUlUVEVEJyxcbiAgICBUUkFOU0FDVElPTl9DT01NSVRURURfRU1QVFk6ICdUUkFOU0FDVElPTl9DT01NSVRURURfRU1QVFknLFxuICAgIFRSQU5TQUNUSU9OX0FCT1JURUQ6ICdUUkFOU0FDVElPTl9BQk9SVEVEJ1xufSk7XG5jb25zdCBzdGF0ZU1hY2hpbmUgPSB7XG4gICAgW2V4cG9ydHMuVHhuU3RhdGUuTk9fVFJBTlNBQ1RJT05dOiBbZXhwb3J0cy5UeG5TdGF0ZS5OT19UUkFOU0FDVElPTiwgZXhwb3J0cy5UeG5TdGF0ZS5TVEFSVElOR19UUkFOU0FDVElPTl0sXG4gICAgW2V4cG9ydHMuVHhuU3RhdGUuU1RBUlRJTkdfVFJBTlNBQ1RJT05dOiBbXG4gICAgICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fSU5fUFJPR1JFU1MsXG4gICAgICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVELFxuICAgICAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRF9FTVBUWSxcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9BQk9SVEVEXG4gICAgXSxcbiAgICBbZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9JTl9QUk9HUkVTU106IFtcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9JTl9QUk9HUkVTUyxcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURUQsXG4gICAgICAgIGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQUJPUlRFRFxuICAgIF0sXG4gICAgW2V4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEXTogW1xuICAgICAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRCxcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5UUkFOU0FDVElPTl9DT01NSVRURURfRU1QVFksXG4gICAgICAgIGV4cG9ydHMuVHhuU3RhdGUuU1RBUlRJTkdfVFJBTlNBQ1RJT04sXG4gICAgICAgIGV4cG9ydHMuVHhuU3RhdGUuTk9fVFJBTlNBQ1RJT05cbiAgICBdLFxuICAgIFtleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0FCT1JURURdOiBbZXhwb3J0cy5UeG5TdGF0ZS5TVEFSVElOR19UUkFOU0FDVElPTiwgZXhwb3J0cy5UeG5TdGF0ZS5OT19UUkFOU0FDVElPTl0sXG4gICAgW2V4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQ09NTUlUVEVEX0VNUFRZXTogW1xuICAgICAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRF9FTVBUWSxcbiAgICAgICAgZXhwb3J0cy5UeG5TdGF0ZS5OT19UUkFOU0FDVElPTlxuICAgIF1cbn07XG5jb25zdCBBQ1RJVkVfU1RBVEVTID0gbmV3IFNldChbXG4gICAgZXhwb3J0cy5UeG5TdGF0ZS5TVEFSVElOR19UUkFOU0FDVElPTixcbiAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0lOX1BST0dSRVNTXG5dKTtcbmNvbnN0IENPTU1JVFRFRF9TVEFURVMgPSBuZXcgU2V0KFtcbiAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRCxcbiAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0NPTU1JVFRFRF9FTVBUWSxcbiAgICBleHBvcnRzLlR4blN0YXRlLlRSQU5TQUNUSU9OX0FCT1JURURcbl0pO1xuLyoqXG4gKiBAcHVibGljXG4gKiBBIGNsYXNzIG1haW50YWluaW5nIHN0YXRlIHJlbGF0ZWQgdG8gYSBzZXJ2ZXIgdHJhbnNhY3Rpb24uIEludGVybmFsIE9ubHlcbiAqL1xuY2xhc3MgVHJhbnNhY3Rpb24ge1xuICAgIC8qKiBDcmVhdGUgYSB0cmFuc2FjdGlvbiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICB0aGlzLnN0YXRlID0gZXhwb3J0cy5UeG5TdGF0ZS5OT19UUkFOU0FDVElPTjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgICAgIGNvbnN0IHdyaXRlQ29uY2VybiA9IHdyaXRlX2NvbmNlcm5fMS5Xcml0ZUNvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGlmICh3cml0ZUNvbmNlcm4pIHtcbiAgICAgICAgICAgIGlmICh3cml0ZUNvbmNlcm4udyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvVHJhbnNhY3Rpb25FcnJvcignVHJhbnNhY3Rpb25zIGRvIG5vdCBzdXBwb3J0IHVuYWNrbm93bGVkZ2VkIHdyaXRlIGNvbmNlcm4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy53cml0ZUNvbmNlcm4gPSB3cml0ZUNvbmNlcm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucmVhZENvbmNlcm4pIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5yZWFkQ29uY2VybiA9IHJlYWRfY29uY2Vybl8xLlJlYWRDb25jZXJuLmZyb21PcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnJlYWRQcmVmZXJlbmNlKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucmVhZFByZWZlcmVuY2UgPSByZWFkX3ByZWZlcmVuY2VfMS5SZWFkUHJlZmVyZW5jZS5mcm9tT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5tYXhDb21taXRUaW1lTVMpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5tYXhUaW1lTVMgPSBvcHRpb25zLm1heENvbW1pdFRpbWVNUztcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBUaGlzIGlzbid0IHRlY2huaWNhbGx5IG5lY2Vzc2FyeVxuICAgICAgICB0aGlzLl9waW5uZWRTZXJ2ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3JlY292ZXJ5VG9rZW4gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBnZXQgc2VydmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGlubmVkU2VydmVyO1xuICAgIH1cbiAgICBnZXQgcmVjb3ZlcnlUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlY292ZXJ5VG9rZW47XG4gICAgfVxuICAgIGdldCBpc1Bpbm5lZCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5zZXJ2ZXI7XG4gICAgfVxuICAgIC8qKiBAcmV0dXJucyBXaGV0aGVyIHRoZSB0cmFuc2FjdGlvbiBoYXMgc3RhcnRlZCAqL1xuICAgIGdldCBpc1N0YXJ0aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gZXhwb3J0cy5UeG5TdGF0ZS5TVEFSVElOR19UUkFOU0FDVElPTjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGlzIHNlc3Npb24gaXMgcHJlc2VudGx5IGluIGEgdHJhbnNhY3Rpb25cbiAgICAgKi9cbiAgICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBBQ1RJVkVfU1RBVEVTLmhhcyh0aGlzLnN0YXRlKTtcbiAgICB9XG4gICAgZ2V0IGlzQ29tbWl0dGVkKCkge1xuICAgICAgICByZXR1cm4gQ09NTUlUVEVEX1NUQVRFUy5oYXModGhpcy5zdGF0ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zaXRpb24gdGhlIHRyYW5zYWN0aW9uIGluIHRoZSBzdGF0ZSBtYWNoaW5lXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIG5leHRTdGF0ZSAtIFRoZSBuZXcgc3RhdGUgdG8gdHJhbnNpdGlvbiB0b1xuICAgICAqL1xuICAgIHRyYW5zaXRpb24obmV4dFN0YXRlKSB7XG4gICAgICAgIGNvbnN0IG5leHRTdGF0ZXMgPSBzdGF0ZU1hY2hpbmVbdGhpcy5zdGF0ZV07XG4gICAgICAgIGlmIChuZXh0U3RhdGVzICYmIG5leHRTdGF0ZXMuaW5jbHVkZXMobmV4dFN0YXRlKSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBleHBvcnRzLlR4blN0YXRlLk5PX1RSQU5TQUNUSU9OIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gZXhwb3J0cy5UeG5TdGF0ZS5TVEFSVElOR19UUkFOU0FDVElPTiB8fFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPT09IGV4cG9ydHMuVHhuU3RhdGUuVFJBTlNBQ1RJT05fQUJPUlRFRCkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5waW5TZXJ2ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgQXR0ZW1wdGVkIGlsbGVnYWwgc3RhdGUgdHJhbnNpdGlvbiBmcm9tIFske3RoaXMuc3RhdGV9XSB0byBbJHtuZXh0U3RhdGV9XWApO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgcGluU2VydmVyKHNlcnZlcikge1xuICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5fcGlubmVkU2VydmVyID0gc2VydmVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICB1bnBpblNlcnZlcigpIHtcbiAgICAgICAgdGhpcy5fcGlubmVkU2VydmVyID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cbmV4cG9ydHMuVHJhbnNhY3Rpb24gPSBUcmFuc2FjdGlvbjtcbmZ1bmN0aW9uIGlzVHJhbnNhY3Rpb25Db21tYW5kKGNvbW1hbmQpIHtcbiAgICByZXR1cm4gISEoY29tbWFuZC5jb21taXRUcmFuc2FjdGlvbiB8fCBjb21tYW5kLmFib3J0VHJhbnNhY3Rpb24pO1xufVxuZXhwb3J0cy5pc1RyYW5zYWN0aW9uQ29tbWFuZCA9IGlzVHJhbnNhY3Rpb25Db21tYW5kO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNhY3Rpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImlzVHJhbnNhY3Rpb25Db21tYW5kIiwiVHJhbnNhY3Rpb24iLCJUeG5TdGF0ZSIsImVycm9yXzEiLCJyZXF1aXJlIiwicmVhZF9jb25jZXJuXzEiLCJyZWFkX3ByZWZlcmVuY2VfMSIsIndyaXRlX2NvbmNlcm5fMSIsImZyZWV6ZSIsIk5PX1RSQU5TQUNUSU9OIiwiU1RBUlRJTkdfVFJBTlNBQ1RJT04iLCJUUkFOU0FDVElPTl9JTl9QUk9HUkVTUyIsIlRSQU5TQUNUSU9OX0NPTU1JVFRFRCIsIlRSQU5TQUNUSU9OX0NPTU1JVFRFRF9FTVBUWSIsIlRSQU5TQUNUSU9OX0FCT1JURUQiLCJzdGF0ZU1hY2hpbmUiLCJBQ1RJVkVfU1RBVEVTIiwiU2V0IiwiQ09NTUlUVEVEX1NUQVRFUyIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInN0YXRlIiwid3JpdGVDb25jZXJuIiwiV3JpdGVDb25jZXJuIiwiZnJvbU9wdGlvbnMiLCJ3IiwiTW9uZ29UcmFuc2FjdGlvbkVycm9yIiwicmVhZENvbmNlcm4iLCJSZWFkQ29uY2VybiIsInJlYWRQcmVmZXJlbmNlIiwiUmVhZFByZWZlcmVuY2UiLCJtYXhDb21taXRUaW1lTVMiLCJtYXhUaW1lTVMiLCJfcGlubmVkU2VydmVyIiwidW5kZWZpbmVkIiwiX3JlY292ZXJ5VG9rZW4iLCJzZXJ2ZXIiLCJyZWNvdmVyeVRva2VuIiwiaXNQaW5uZWQiLCJpc1N0YXJ0aW5nIiwiaXNBY3RpdmUiLCJoYXMiLCJpc0NvbW1pdHRlZCIsInRyYW5zaXRpb24iLCJuZXh0U3RhdGUiLCJuZXh0U3RhdGVzIiwiaW5jbHVkZXMiLCJ1bnBpblNlcnZlciIsIk1vbmdvUnVudGltZUVycm9yIiwicGluU2VydmVyIiwiY29tbWFuZCIsImNvbW1pdFRyYW5zYWN0aW9uIiwiYWJvcnRUcmFuc2FjdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/transactions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/utils.js":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/lib/utils.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DOCUMENT_DB_MSG = exports.COSMOS_DB_CHECK = exports.DOCUMENT_DB_CHECK = exports.TimeoutController = exports.request = exports.matchesParentDomain = exports.parseUnsignedInteger = exports.parseInteger = exports.compareObjectId = exports.commandSupportsReadConcern = exports.shuffle = exports.supportsRetryableWrites = exports.enumToString = exports.emitWarningOnce = exports.emitWarning = exports.MONGODB_WARNING_CODE = exports.DEFAULT_PK_FACTORY = exports.HostAddress = exports.BufferPool = exports.List = exports.deepCopy = exports.isRecord = exports.setDifference = exports.isHello = exports.isSuperset = exports.resolveOptions = exports.hasAtomicOperators = exports.calculateDurationInMs = exports.now = exports.makeStateMachine = exports.errorStrictEqual = exports.arrayStrictEqual = exports.maxWireVersion = exports.uuidV4 = exports.makeCounter = exports.MongoDBCollectionNamespace = exports.MongoDBNamespace = exports.ns = exports.getTopology = exports.decorateWithExplain = exports.decorateWithReadConcern = exports.decorateWithCollation = exports.isPromiseLike = exports.applyRetryableWrites = exports.filterOptions = exports.mergeOptions = exports.isObject = exports.normalizeHintField = exports.hostMatchesWildcards = exports.ByteUtils = void 0;\nexports.once = exports.randomBytes = exports.promiseWithResolvers = exports.isHostMatch = exports.COSMOS_DB_MSG = void 0;\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst http = __webpack_require__(/*! http */ \"http\");\nconst timers_1 = __webpack_require__(/*! timers */ \"timers\");\nconst url = __webpack_require__(/*! url */ \"url\");\nconst url_1 = __webpack_require__(/*! url */ \"url\");\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst bson_1 = __webpack_require__(/*! ./bson */ \"(ssr)/./node_modules/mongodb/lib/bson.js\");\nconst constants_1 = __webpack_require__(/*! ./cmap/wire_protocol/constants */ \"(ssr)/./node_modules/mongodb/lib/cmap/wire_protocol/constants.js\");\nconst constants_2 = __webpack_require__(/*! ./constants */ \"(ssr)/./node_modules/mongodb/lib/constants.js\");\nconst error_1 = __webpack_require__(/*! ./error */ \"(ssr)/./node_modules/mongodb/lib/error.js\");\nconst read_concern_1 = __webpack_require__(/*! ./read_concern */ \"(ssr)/./node_modules/mongodb/lib/read_concern.js\");\nconst read_preference_1 = __webpack_require__(/*! ./read_preference */ \"(ssr)/./node_modules/mongodb/lib/read_preference.js\");\nconst common_1 = __webpack_require__(/*! ./sdam/common */ \"(ssr)/./node_modules/mongodb/lib/sdam/common.js\");\nconst write_concern_1 = __webpack_require__(/*! ./write_concern */ \"(ssr)/./node_modules/mongodb/lib/write_concern.js\");\nexports.ByteUtils = {\n    toLocalBufferType (buffer) {\n        return Buffer.isBuffer(buffer) ? buffer : Buffer.from(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n    },\n    equals (seqA, seqB) {\n        return exports.ByteUtils.toLocalBufferType(seqA).equals(seqB);\n    },\n    compare (seqA, seqB) {\n        return exports.ByteUtils.toLocalBufferType(seqA).compare(seqB);\n    },\n    toBase64 (uint8array) {\n        return exports.ByteUtils.toLocalBufferType(uint8array).toString(\"base64\");\n    }\n};\n/**\n * Determines if a connection's address matches a user provided list\n * of domain wildcards.\n */ function hostMatchesWildcards(host, wildcards) {\n    for (const wildcard of wildcards){\n        if (host === wildcard || wildcard.startsWith(\"*.\") && host?.endsWith(wildcard.substring(2, wildcard.length)) || wildcard.startsWith(\"*/\") && host?.endsWith(wildcard.substring(2, wildcard.length))) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.hostMatchesWildcards = hostMatchesWildcards;\n/**\n * Ensure Hint field is in a shape we expect:\n * - object of index names mapping to 1 or -1\n * - just an index name\n * @internal\n */ function normalizeHintField(hint) {\n    let finalHint = undefined;\n    if (typeof hint === \"string\") {\n        finalHint = hint;\n    } else if (Array.isArray(hint)) {\n        finalHint = {};\n        hint.forEach((param)=>{\n            finalHint[param] = 1;\n        });\n    } else if (hint != null && typeof hint === \"object\") {\n        finalHint = {};\n        for(const name in hint){\n            finalHint[name] = hint[name];\n        }\n    }\n    return finalHint;\n}\nexports.normalizeHintField = normalizeHintField;\nconst TO_STRING = (object)=>Object.prototype.toString.call(object);\n/**\n * Checks if arg is an Object:\n * - **NOTE**: the check is based on the `[Symbol.toStringTag]() === 'Object'`\n * @internal\n */ function isObject(arg) {\n    return \"[object Object]\" === TO_STRING(arg);\n}\nexports.isObject = isObject;\n/** @internal */ function mergeOptions(target, source) {\n    return {\n        ...target,\n        ...source\n    };\n}\nexports.mergeOptions = mergeOptions;\n/** @internal */ function filterOptions(options, names) {\n    const filterOptions = {};\n    for(const name in options){\n        if (names.includes(name)) {\n            filterOptions[name] = options[name];\n        }\n    }\n    // Filtered options\n    return filterOptions;\n}\nexports.filterOptions = filterOptions;\n/**\n * Applies retryWrites: true to a command if retryWrites is set on the command's database.\n * @internal\n *\n * @param target - The target command to which we will apply retryWrites.\n * @param db - The database from which we can inherit a retryWrites value.\n */ function applyRetryableWrites(target, db) {\n    if (db && db.s.options?.retryWrites) {\n        target.retryWrites = true;\n    }\n    return target;\n}\nexports.applyRetryableWrites = applyRetryableWrites;\n/**\n * Applies a write concern to a command based on well defined inheritance rules, optionally\n * detecting support for the write concern in the first place.\n * @internal\n *\n * @param target - the target command we will be applying the write concern to\n * @param sources - sources where we can inherit default write concerns from\n * @param options - optional settings passed into a command for write concern overrides\n */ /**\n * Checks if a given value is a Promise\n *\n * @typeParam T - The resolution type of the possible promise\n * @param value - An object that could be a promise\n * @returns true if the provided value is a Promise\n */ function isPromiseLike(value) {\n    return value != null && typeof value === \"object\" && \"then\" in value && typeof value.then === \"function\";\n}\nexports.isPromiseLike = isPromiseLike;\n/**\n * Applies collation to a given command.\n * @internal\n *\n * @param command - the command on which to apply collation\n * @param target - target of command\n * @param options - options containing collation settings\n */ function decorateWithCollation(command, target, options) {\n    const capabilities = getTopology(target).capabilities;\n    if (options.collation && typeof options.collation === \"object\") {\n        if (capabilities && capabilities.commandsTakeCollation) {\n            command.collation = options.collation;\n        } else {\n            throw new error_1.MongoCompatibilityError(`Current topology does not support collation`);\n        }\n    }\n}\nexports.decorateWithCollation = decorateWithCollation;\n/**\n * Applies a read concern to a given command.\n * @internal\n *\n * @param command - the command on which to apply the read concern\n * @param coll - the parent collection of the operation calling this method\n */ function decorateWithReadConcern(command, coll, options) {\n    if (options && options.session && options.session.inTransaction()) {\n        return;\n    }\n    const readConcern = Object.assign({}, command.readConcern || {});\n    if (coll.s.readConcern) {\n        Object.assign(readConcern, coll.s.readConcern);\n    }\n    if (Object.keys(readConcern).length > 0) {\n        Object.assign(command, {\n            readConcern: readConcern\n        });\n    }\n}\nexports.decorateWithReadConcern = decorateWithReadConcern;\n/**\n * Applies an explain to a given command.\n * @internal\n *\n * @param command - the command on which to apply the explain\n * @param options - the options containing the explain verbosity\n */ function decorateWithExplain(command, explain) {\n    if (command.explain) {\n        return command;\n    }\n    return {\n        explain: command,\n        verbosity: explain.verbosity\n    };\n}\nexports.decorateWithExplain = decorateWithExplain;\n/**\n * A helper function to get the topology from a given provider. Throws\n * if the topology cannot be found.\n * @throws MongoNotConnectedError\n * @internal\n */ function getTopology(provider) {\n    // MongoClient or ClientSession or AbstractCursor\n    if (\"topology\" in provider && provider.topology) {\n        return provider.topology;\n    } else if (\"client\" in provider && provider.client.topology) {\n        return provider.client.topology;\n    }\n    throw new error_1.MongoNotConnectedError(\"MongoClient must be connected to perform this operation\");\n}\nexports.getTopology = getTopology;\n/** @internal */ function ns(ns) {\n    return MongoDBNamespace.fromString(ns);\n}\nexports.ns = ns;\n/** @public */ class MongoDBNamespace {\n    /**\n     * Create a namespace object\n     *\n     * @param db - database name\n     * @param collection - collection name\n     */ constructor(db, collection){\n        this.db = db;\n        this.collection = collection;\n        this.collection = collection === \"\" ? undefined : collection;\n    }\n    toString() {\n        return this.collection ? `${this.db}.${this.collection}` : this.db;\n    }\n    withCollection(collection) {\n        return new MongoDBCollectionNamespace(this.db, collection);\n    }\n    static fromString(namespace) {\n        if (typeof namespace !== \"string\" || namespace === \"\") {\n            // TODO(NODE-3483): Replace with MongoNamespaceError\n            throw new error_1.MongoRuntimeError(`Cannot parse namespace from \"${namespace}\"`);\n        }\n        const [db, ...collectionParts] = namespace.split(\".\");\n        const collection = collectionParts.join(\".\");\n        return new MongoDBNamespace(db, collection === \"\" ? undefined : collection);\n    }\n}\nexports.MongoDBNamespace = MongoDBNamespace;\n/**\n * @public\n *\n * A class representing a collection's namespace.  This class enforces (through Typescript) that\n * the `collection` portion of the namespace is defined and should only be\n * used in scenarios where this can be guaranteed.\n */ class MongoDBCollectionNamespace extends MongoDBNamespace {\n    constructor(db, collection){\n        super(db, collection);\n        this.collection = collection;\n    }\n    static fromString(namespace) {\n        return super.fromString(namespace);\n    }\n}\nexports.MongoDBCollectionNamespace = MongoDBCollectionNamespace;\n/** @internal */ function* makeCounter(seed = 0) {\n    let count = seed;\n    while(true){\n        const newCount = count;\n        count += 1;\n        yield newCount;\n    }\n}\nexports.makeCounter = makeCounter;\n/**\n * Synchronously Generate a UUIDv4\n * @internal\n */ function uuidV4() {\n    const result = crypto.randomBytes(16);\n    result[6] = result[6] & 0x0f | 0x40;\n    result[8] = result[8] & 0x3f | 0x80;\n    return result;\n}\nexports.uuidV4 = uuidV4;\n/**\n * A helper function for determining `maxWireVersion` between legacy and new topology instances\n * @internal\n */ function maxWireVersion(topologyOrServer) {\n    if (topologyOrServer) {\n        if (topologyOrServer.loadBalanced || topologyOrServer.serverApi?.version) {\n            // Since we do not have a monitor in the load balanced mode,\n            // we assume the load-balanced server is always pointed at the latest mongodb version.\n            // There is a risk that for on-prem deployments\n            // that don't upgrade immediately that this could alert to the\n            // application that a feature is available that is actually not.\n            // We also return the max supported wire version for serverAPI.\n            return constants_1.MAX_SUPPORTED_WIRE_VERSION;\n        }\n        if (topologyOrServer.hello) {\n            return topologyOrServer.hello.maxWireVersion;\n        }\n        if (\"lastHello\" in topologyOrServer && typeof topologyOrServer.lastHello === \"function\") {\n            const lastHello = topologyOrServer.lastHello();\n            if (lastHello) {\n                return lastHello.maxWireVersion;\n            }\n        }\n        if (topologyOrServer.description && \"maxWireVersion\" in topologyOrServer.description && topologyOrServer.description.maxWireVersion != null) {\n            return topologyOrServer.description.maxWireVersion;\n        }\n    }\n    return 0;\n}\nexports.maxWireVersion = maxWireVersion;\n/** @internal */ function arrayStrictEqual(arr, arr2) {\n    if (!Array.isArray(arr) || !Array.isArray(arr2)) {\n        return false;\n    }\n    return arr.length === arr2.length && arr.every((elt, idx)=>elt === arr2[idx]);\n}\nexports.arrayStrictEqual = arrayStrictEqual;\n/** @internal */ function errorStrictEqual(lhs, rhs) {\n    if (lhs === rhs) {\n        return true;\n    }\n    if (!lhs || !rhs) {\n        return lhs === rhs;\n    }\n    if (lhs == null && rhs != null || lhs != null && rhs == null) {\n        return false;\n    }\n    if (lhs.constructor.name !== rhs.constructor.name) {\n        return false;\n    }\n    if (lhs.message !== rhs.message) {\n        return false;\n    }\n    return true;\n}\nexports.errorStrictEqual = errorStrictEqual;\n/** @internal */ function makeStateMachine(stateTable) {\n    return function stateTransition(target, newState) {\n        const legalStates = stateTable[target.s.state];\n        if (legalStates && legalStates.indexOf(newState) < 0) {\n            throw new error_1.MongoRuntimeError(`illegal state transition from [${target.s.state}] => [${newState}], allowed: [${legalStates}]`);\n        }\n        target.emit(\"stateChanged\", target.s.state, newState);\n        target.s.state = newState;\n    };\n}\nexports.makeStateMachine = makeStateMachine;\n/** @internal */ function now() {\n    const hrtime = process.hrtime();\n    return Math.floor(hrtime[0] * 1000 + hrtime[1] / 1000000);\n}\nexports.now = now;\n/** @internal */ function calculateDurationInMs(started) {\n    if (typeof started !== \"number\") {\n        return -1;\n    }\n    const elapsed = now() - started;\n    return elapsed < 0 ? 0 : elapsed;\n}\nexports.calculateDurationInMs = calculateDurationInMs;\n/** @internal */ function hasAtomicOperators(doc) {\n    if (Array.isArray(doc)) {\n        for (const document of doc){\n            if (hasAtomicOperators(document)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    const keys = Object.keys(doc);\n    return keys.length > 0 && keys[0][0] === \"$\";\n}\nexports.hasAtomicOperators = hasAtomicOperators;\n/**\n * Merge inherited properties from parent into options, prioritizing values from options,\n * then values from parent.\n * @internal\n */ function resolveOptions(parent, options) {\n    const result = Object.assign({}, options, (0, bson_1.resolveBSONOptions)(options, parent));\n    // Users cannot pass a readConcern/writeConcern to operations in a transaction\n    const session = options?.session;\n    if (!session?.inTransaction()) {\n        const readConcern = read_concern_1.ReadConcern.fromOptions(options) ?? parent?.readConcern;\n        if (readConcern) {\n            result.readConcern = readConcern;\n        }\n        const writeConcern = write_concern_1.WriteConcern.fromOptions(options) ?? parent?.writeConcern;\n        if (writeConcern) {\n            result.writeConcern = writeConcern;\n        }\n    }\n    const readPreference = read_preference_1.ReadPreference.fromOptions(options) ?? parent?.readPreference;\n    if (readPreference) {\n        result.readPreference = readPreference;\n    }\n    return result;\n}\nexports.resolveOptions = resolveOptions;\nfunction isSuperset(set, subset) {\n    set = Array.isArray(set) ? new Set(set) : set;\n    subset = Array.isArray(subset) ? new Set(subset) : subset;\n    for (const elem of subset){\n        if (!set.has(elem)) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.isSuperset = isSuperset;\n/**\n * Checks if the document is a Hello request\n * @internal\n */ function isHello(doc) {\n    return doc[constants_2.LEGACY_HELLO_COMMAND] || doc.hello ? true : false;\n}\nexports.isHello = isHello;\n/** Returns the items that are uniquely in setA */ function setDifference(setA, setB) {\n    const difference = new Set(setA);\n    for (const elem of setB){\n        difference.delete(elem);\n    }\n    return difference;\n}\nexports.setDifference = setDifference;\nconst HAS_OWN = (object, prop)=>Object.prototype.hasOwnProperty.call(object, prop);\nfunction isRecord(value, requiredKeys = undefined) {\n    if (!isObject(value)) {\n        return false;\n    }\n    const ctor = value.constructor;\n    if (ctor && ctor.prototype) {\n        if (!isObject(ctor.prototype)) {\n            return false;\n        }\n        // Check to see if some method exists from the Object exists\n        if (!HAS_OWN(ctor.prototype, \"isPrototypeOf\")) {\n            return false;\n        }\n    }\n    if (requiredKeys) {\n        const keys = Object.keys(value);\n        return isSuperset(keys, requiredKeys);\n    }\n    return true;\n}\nexports.isRecord = isRecord;\n/**\n * Make a deep copy of an object\n *\n * NOTE: This is not meant to be the perfect implementation of a deep copy,\n * but instead something that is good enough for the purposes of\n * command monitoring.\n */ function deepCopy(value) {\n    if (value == null) {\n        return value;\n    } else if (Array.isArray(value)) {\n        return value.map((item)=>deepCopy(item));\n    } else if (isRecord(value)) {\n        const res = {};\n        for(const key in value){\n            res[key] = deepCopy(value[key]);\n        }\n        return res;\n    }\n    const ctor = value.constructor;\n    if (ctor) {\n        switch(ctor.name.toLowerCase()){\n            case \"date\":\n                return new ctor(Number(value));\n            case \"map\":\n                return new Map(value);\n            case \"set\":\n                return new Set(value);\n            case \"buffer\":\n                return Buffer.from(value);\n        }\n    }\n    return value;\n}\nexports.deepCopy = deepCopy;\n/**\n * A sequential list of items in a circularly linked list\n * @remarks\n * The head node is special, it is always defined and has a value of null.\n * It is never \"included\" in the list, in that, it is not returned by pop/shift or yielded by the iterator.\n * The circular linkage and always defined head node are to reduce checks for null next/prev references to zero.\n * New nodes are declared as object literals with keys always in the same order: next, prev, value.\n * @internal\n */ class List {\n    get length() {\n        return this.count;\n    }\n    get [Symbol.toStringTag]() {\n        return \"List\";\n    }\n    constructor(){\n        this.count = 0;\n        // this is carefully crafted:\n        // declaring a complete and consistently key ordered\n        // object is beneficial to the runtime optimizations\n        this.head = {\n            next: null,\n            prev: null,\n            value: null\n        };\n        this.head.next = this.head;\n        this.head.prev = this.head;\n    }\n    toArray() {\n        return Array.from(this);\n    }\n    toString() {\n        return `head <=> ${this.toArray().join(\" <=> \")} <=> head`;\n    }\n    *[Symbol.iterator]() {\n        for (const node of this.nodes()){\n            yield node.value;\n        }\n    }\n    *nodes() {\n        let ptr = this.head.next;\n        while(ptr !== this.head){\n            // Save next before yielding so that we make removing within iteration safe\n            const { next } = ptr;\n            yield ptr;\n            ptr = next;\n        }\n    }\n    /** Insert at end of list */ push(value) {\n        this.count += 1;\n        const newNode = {\n            next: this.head,\n            prev: this.head.prev,\n            value\n        };\n        this.head.prev.next = newNode;\n        this.head.prev = newNode;\n    }\n    /** Inserts every item inside an iterable instead of the iterable itself */ pushMany(iterable) {\n        for (const value of iterable){\n            this.push(value);\n        }\n    }\n    /** Insert at front of list */ unshift(value) {\n        this.count += 1;\n        const newNode = {\n            next: this.head.next,\n            prev: this.head,\n            value\n        };\n        this.head.next.prev = newNode;\n        this.head.next = newNode;\n    }\n    remove(node) {\n        if (node === this.head || this.length === 0) {\n            return null;\n        }\n        this.count -= 1;\n        const prevNode = node.prev;\n        const nextNode = node.next;\n        prevNode.next = nextNode;\n        nextNode.prev = prevNode;\n        return node.value;\n    }\n    /** Removes the first node at the front of the list */ shift() {\n        return this.remove(this.head.next);\n    }\n    /** Removes the last node at the end of the list */ pop() {\n        return this.remove(this.head.prev);\n    }\n    /** Iterates through the list and removes nodes where filter returns true */ prune(filter) {\n        for (const node of this.nodes()){\n            if (filter(node.value)) {\n                this.remove(node);\n            }\n        }\n    }\n    clear() {\n        this.count = 0;\n        this.head.next = this.head;\n        this.head.prev = this.head;\n    }\n    /** Returns the first item in the list, does not remove */ first() {\n        // If the list is empty, value will be the head's null\n        return this.head.next.value;\n    }\n    /** Returns the last item in the list, does not remove */ last() {\n        // If the list is empty, value will be the head's null\n        return this.head.prev.value;\n    }\n}\nexports.List = List;\n/**\n * A pool of Buffers which allow you to read them as if they were one\n * @internal\n */ class BufferPool {\n    constructor(){\n        this.buffers = new List();\n        this.totalByteLength = 0;\n    }\n    get length() {\n        return this.totalByteLength;\n    }\n    /** Adds a buffer to the internal buffer pool list */ append(buffer) {\n        this.buffers.push(buffer);\n        this.totalByteLength += buffer.length;\n    }\n    /**\n     * If BufferPool contains 4 bytes or more construct an int32 from the leading bytes,\n     * otherwise return null. Size can be negative, caller should error check.\n     */ getInt32() {\n        if (this.totalByteLength < 4) {\n            return null;\n        }\n        const firstBuffer = this.buffers.first();\n        if (firstBuffer != null && firstBuffer.byteLength >= 4) {\n            return firstBuffer.readInt32LE(0);\n        }\n        // Unlikely case: an int32 is split across buffers.\n        // Use read and put the returned buffer back on top\n        const top4Bytes = this.read(4);\n        const value = top4Bytes.readInt32LE(0);\n        // Put it back.\n        this.totalByteLength += 4;\n        this.buffers.unshift(top4Bytes);\n        return value;\n    }\n    /** Reads the requested number of bytes, optionally consuming them */ read(size) {\n        if (typeof size !== \"number\" || size < 0) {\n            throw new error_1.MongoInvalidArgumentError('Argument \"size\" must be a non-negative number');\n        }\n        // oversized request returns empty buffer\n        if (size > this.totalByteLength) {\n            return Buffer.alloc(0);\n        }\n        // We know we have enough, we just don't know how it is spread across chunks\n        // TODO(NODE-4732): alloc API should change based on raw option\n        const result = Buffer.allocUnsafe(size);\n        for(let bytesRead = 0; bytesRead < size;){\n            const buffer = this.buffers.shift();\n            if (buffer == null) {\n                break;\n            }\n            const bytesRemaining = size - bytesRead;\n            const bytesReadable = Math.min(bytesRemaining, buffer.byteLength);\n            const bytes = buffer.subarray(0, bytesReadable);\n            result.set(bytes, bytesRead);\n            bytesRead += bytesReadable;\n            this.totalByteLength -= bytesReadable;\n            if (bytesReadable < buffer.byteLength) {\n                this.buffers.unshift(buffer.subarray(bytesReadable));\n            }\n        }\n        return result;\n    }\n}\nexports.BufferPool = BufferPool;\n/** @public */ class HostAddress {\n    constructor(hostString){\n        this.host = undefined;\n        this.port = undefined;\n        this.socketPath = undefined;\n        this.isIPv6 = false;\n        const escapedHost = hostString.split(\" \").join(\"%20\"); // escape spaces, for socket path hosts\n        if (escapedHost.endsWith(\".sock\")) {\n            // heuristically determine if we're working with a domain socket\n            this.socketPath = decodeURIComponent(escapedHost);\n            return;\n        }\n        const urlString = `iLoveJS://${escapedHost}`;\n        let url;\n        try {\n            url = new url_1.URL(urlString);\n        } catch (urlError) {\n            const runtimeError = new error_1.MongoRuntimeError(`Unable to parse ${escapedHost} with URL`);\n            runtimeError.cause = urlError;\n            throw runtimeError;\n        }\n        const hostname = url.hostname;\n        const port = url.port;\n        let normalized = decodeURIComponent(hostname).toLowerCase();\n        if (normalized.startsWith(\"[\") && normalized.endsWith(\"]\")) {\n            this.isIPv6 = true;\n            normalized = normalized.substring(1, hostname.length - 1);\n        }\n        this.host = normalized.toLowerCase();\n        if (typeof port === \"number\") {\n            this.port = port;\n        } else if (typeof port === \"string\" && port !== \"\") {\n            this.port = Number.parseInt(port, 10);\n        } else {\n            this.port = 27017;\n        }\n        if (this.port === 0) {\n            throw new error_1.MongoParseError(\"Invalid port (zero) with hostname\");\n        }\n        Object.freeze(this);\n    }\n    [Symbol.for(\"nodejs.util.inspect.custom\")]() {\n        return this.inspect();\n    }\n    inspect() {\n        return `new HostAddress('${this.toString()}')`;\n    }\n    toString() {\n        if (typeof this.host === \"string\") {\n            if (this.isIPv6) {\n                return `[${this.host}]:${this.port}`;\n            }\n            return `${this.host}:${this.port}`;\n        }\n        return `${this.socketPath}`;\n    }\n    static fromString(s) {\n        return new HostAddress(s);\n    }\n    static fromHostPort(host, port) {\n        if (host.includes(\":\")) {\n            host = `[${host}]`; // IPv6 address\n        }\n        return HostAddress.fromString(`${host}:${port}`);\n    }\n    static fromSrvRecord({ name, port }) {\n        return HostAddress.fromHostPort(name, port);\n    }\n    toHostPort() {\n        if (this.socketPath) {\n            return {\n                host: this.socketPath,\n                port: 0\n            };\n        }\n        const host = this.host ?? \"\";\n        const port = this.port ?? 0;\n        return {\n            host,\n            port\n        };\n    }\n}\nexports.HostAddress = HostAddress;\nexports.DEFAULT_PK_FACTORY = {\n    // We prefer not to rely on ObjectId having a createPk method\n    createPk () {\n        return new bson_1.ObjectId();\n    }\n};\n/**\n * When the driver used emitWarning the code will be equal to this.\n * @public\n *\n * @example\n * ```ts\n * process.on('warning', (warning) => {\n *  if (warning.code === MONGODB_WARNING_CODE) console.error('Ah an important warning! :)')\n * })\n * ```\n */ exports.MONGODB_WARNING_CODE = \"MONGODB DRIVER\";\n/** @internal */ function emitWarning(message) {\n    return process.emitWarning(message, {\n        code: exports.MONGODB_WARNING_CODE\n    });\n}\nexports.emitWarning = emitWarning;\nconst emittedWarnings = new Set();\n/**\n * Will emit a warning once for the duration of the application.\n * Uses the message to identify if it has already been emitted\n * so using string interpolation can cause multiple emits\n * @internal\n */ function emitWarningOnce(message) {\n    if (!emittedWarnings.has(message)) {\n        emittedWarnings.add(message);\n        return emitWarning(message);\n    }\n}\nexports.emitWarningOnce = emitWarningOnce;\n/**\n * Takes a JS object and joins the values into a string separated by ', '\n */ function enumToString(en) {\n    return Object.values(en).join(\", \");\n}\nexports.enumToString = enumToString;\n/**\n * Determine if a server supports retryable writes.\n *\n * @internal\n */ function supportsRetryableWrites(server) {\n    if (!server) {\n        return false;\n    }\n    if (server.loadBalanced) {\n        // Loadbalanced topologies will always support retry writes\n        return true;\n    }\n    if (server.description.logicalSessionTimeoutMinutes != null) {\n        // that supports sessions\n        if (server.description.type !== common_1.ServerType.Standalone) {\n            // and that is not a standalone\n            return true;\n        }\n    }\n    return false;\n}\nexports.supportsRetryableWrites = supportsRetryableWrites;\n/**\n * FisherYates Shuffle\n *\n * Reference: https://bost.ocks.org/mike/shuffle/\n * @param sequence - items to be shuffled\n * @param limit - Defaults to `0`. If nonzero shuffle will slice the randomized array e.g, `.slice(0, limit)` otherwise will return the entire randomized array.\n */ function shuffle(sequence, limit = 0) {\n    const items = Array.from(sequence); // shallow copy in order to never shuffle the input\n    if (limit > items.length) {\n        throw new error_1.MongoRuntimeError(\"Limit must be less than the number of items\");\n    }\n    let remainingItemsToShuffle = items.length;\n    const lowerBound = limit % items.length === 0 ? 1 : items.length - limit;\n    while(remainingItemsToShuffle > lowerBound){\n        // Pick a remaining element\n        const randomIndex = Math.floor(Math.random() * remainingItemsToShuffle);\n        remainingItemsToShuffle -= 1;\n        // And swap it with the current element\n        const swapHold = items[remainingItemsToShuffle];\n        items[remainingItemsToShuffle] = items[randomIndex];\n        items[randomIndex] = swapHold;\n    }\n    return limit % items.length === 0 ? items : items.slice(lowerBound);\n}\nexports.shuffle = shuffle;\n// TODO(NODE-4936): read concern eligibility for commands should be codified in command construction\n// @see https://github.com/mongodb/specifications/blob/master/source/read-write-concern/read-write-concern.rst#read-concern\nfunction commandSupportsReadConcern(command) {\n    if (command.aggregate || command.count || command.distinct || command.find || command.geoNear) {\n        return true;\n    }\n    return false;\n}\nexports.commandSupportsReadConcern = commandSupportsReadConcern;\n/**\n * Compare objectIds. `null` is always less\n * - `+1 = oid1 is greater than oid2`\n * - `-1 = oid1 is less than oid2`\n * - `+0 = oid1 is equal oid2`\n */ function compareObjectId(oid1, oid2) {\n    if (oid1 == null && oid2 == null) {\n        return 0;\n    }\n    if (oid1 == null) {\n        return -1;\n    }\n    if (oid2 == null) {\n        return 1;\n    }\n    return exports.ByteUtils.compare(oid1.id, oid2.id);\n}\nexports.compareObjectId = compareObjectId;\nfunction parseInteger(value) {\n    if (typeof value === \"number\") return Math.trunc(value);\n    const parsedValue = Number.parseInt(String(value), 10);\n    return Number.isNaN(parsedValue) ? null : parsedValue;\n}\nexports.parseInteger = parseInteger;\nfunction parseUnsignedInteger(value) {\n    const parsedInt = parseInteger(value);\n    return parsedInt != null && parsedInt >= 0 ? parsedInt : null;\n}\nexports.parseUnsignedInteger = parseUnsignedInteger;\n/**\n * Determines whether a provided address matches the provided parent domain.\n *\n * If a DNS server were to become compromised SRV records would still need to\n * advertise addresses that are under the same domain as the srvHost.\n *\n * @param address - The address to check against a domain\n * @param srvHost - The domain to check the provided address against\n * @returns Whether the provided address matches the parent domain\n */ function matchesParentDomain(address, srvHost) {\n    // Remove trailing dot if exists on either the resolved address or the srv hostname\n    const normalizedAddress = address.endsWith(\".\") ? address.slice(0, address.length - 1) : address;\n    const normalizedSrvHost = srvHost.endsWith(\".\") ? srvHost.slice(0, srvHost.length - 1) : srvHost;\n    const allCharacterBeforeFirstDot = /^.*?\\./;\n    // Remove all characters before first dot\n    // Add leading dot back to string so\n    //   an srvHostDomain = '.trusted.site'\n    //   will not satisfy an addressDomain that endsWith '.fake-trusted.site'\n    const addressDomain = `.${normalizedAddress.replace(allCharacterBeforeFirstDot, \"\")}`;\n    const srvHostDomain = `.${normalizedSrvHost.replace(allCharacterBeforeFirstDot, \"\")}`;\n    return addressDomain.endsWith(srvHostDomain);\n}\nexports.matchesParentDomain = matchesParentDomain;\nasync function request(uri, options = {}) {\n    return new Promise((resolve, reject)=>{\n        const requestOptions = {\n            method: \"GET\",\n            timeout: 10000,\n            json: true,\n            ...url.parse(uri),\n            ...options\n        };\n        const req = http.request(requestOptions, (res)=>{\n            res.setEncoding(\"utf8\");\n            let data = \"\";\n            res.on(\"data\", (d)=>{\n                data += d;\n            });\n            res.once(\"end\", ()=>{\n                if (options.json === false) {\n                    resolve(data);\n                    return;\n                }\n                try {\n                    const parsed = JSON.parse(data);\n                    resolve(parsed);\n                } catch  {\n                    // TODO(NODE-3483)\n                    reject(new error_1.MongoRuntimeError(`Invalid JSON response: \"${data}\"`));\n                }\n            });\n        });\n        req.once(\"timeout\", ()=>req.destroy(new error_1.MongoNetworkTimeoutError(`Network request to ${uri} timed out after ${options.timeout} ms`)));\n        req.once(\"error\", (error)=>reject(error));\n        req.end();\n    });\n}\nexports.request = request;\n/**\n * A custom AbortController that aborts after a specified timeout.\n *\n * If `timeout` is undefined or \\<=0, the abort controller never aborts.\n *\n * This class provides two benefits over the built-in AbortSignal.timeout() method.\n * - This class provides a mechanism for cancelling the timeout\n * - This class supports infinite timeouts by interpreting a timeout of 0 as infinite.  This is\n *    consistent with existing timeout options in the Node driver (serverSelectionTimeoutMS, for example).\n * @internal\n */ class TimeoutController extends AbortController {\n    constructor(timeout = 0, timeoutId = timeout > 0 ? (0, timers_1.setTimeout)(()=>this.abort(), timeout) : null){\n        super();\n        this.timeoutId = timeoutId;\n    }\n    clear() {\n        if (this.timeoutId != null) {\n            (0, timers_1.clearTimeout)(this.timeoutId);\n        }\n        this.timeoutId = null;\n    }\n}\nexports.TimeoutController = TimeoutController;\n/** @internal */ exports.DOCUMENT_DB_CHECK = /(\\.docdb\\.amazonaws\\.com$)|(\\.docdb-elastic\\.amazonaws\\.com$)/;\n/** @internal */ exports.COSMOS_DB_CHECK = /\\.cosmos\\.azure\\.com$/;\n/** @internal */ exports.DOCUMENT_DB_MSG = \"You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb\";\n/** @internal */ exports.COSMOS_DB_MSG = \"You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb\";\n/** @internal */ function isHostMatch(match, host) {\n    return host && match.test(host.toLowerCase()) ? true : false;\n}\nexports.isHostMatch = isHostMatch;\nfunction promiseWithResolvers() {\n    let resolve;\n    let reject;\n    const promise = new Promise(function withResolversExecutor(promiseResolve, promiseReject) {\n        resolve = promiseResolve;\n        reject = promiseReject;\n    });\n    return {\n        promise,\n        resolve,\n        reject\n    };\n}\nexports.promiseWithResolvers = promiseWithResolvers;\nexports.randomBytes = (0, util_1.promisify)(crypto.randomBytes);\n/**\n * Replicates the events.once helper.\n *\n * Removes unused signal logic and It **only** supports 0 or 1 argument events.\n *\n * @param ee - An event emitter that may emit `ev`\n * @param name - An event name to wait for\n */ async function once(ee, name) {\n    const { promise, resolve, reject } = promiseWithResolvers();\n    const onEvent = (data)=>resolve(data);\n    const onError = (error)=>reject(error);\n    ee.once(name, onEvent).once(\"error\", onError);\n    try {\n        const res = await promise;\n        ee.off(\"error\", onError);\n        return res;\n    } catch (error) {\n        ee.off(name, onEvent);\n        throw error;\n    }\n}\nexports.once = once; //# sourceMappingURL=utils.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvdXRpbHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVCQUF1QixHQUFHQSx1QkFBdUIsR0FBR0EseUJBQXlCLEdBQUdBLHlCQUF5QixHQUFHQSxlQUFlLEdBQUdBLDJCQUEyQixHQUFHQSw0QkFBNEIsR0FBR0Esb0JBQW9CLEdBQUdBLHVCQUF1QixHQUFHQSxrQ0FBa0MsR0FBR0EsZUFBZSxHQUFHQSwrQkFBK0IsR0FBR0Esb0JBQW9CLEdBQUdBLHVCQUF1QixHQUFHQSxtQkFBbUIsR0FBR0EsNEJBQTRCLEdBQUdBLDBCQUEwQixHQUFHQSxtQkFBbUIsR0FBR0Esa0JBQWtCLEdBQUdBLFlBQVksR0FBR0EsZ0JBQWdCLEdBQUdBLGdCQUFnQixHQUFHQSxxQkFBcUIsR0FBR0EsZUFBZSxHQUFHQSxrQkFBa0IsR0FBR0Esc0JBQXNCLEdBQUdBLDBCQUEwQixHQUFHQSw2QkFBNkIsR0FBR0EsV0FBVyxHQUFHQSx3QkFBd0IsR0FBR0Esd0JBQXdCLEdBQUdBLHdCQUF3QixHQUFHQSxzQkFBc0IsR0FBR0EsY0FBYyxHQUFHQSxtQkFBbUIsR0FBR0Esa0NBQWtDLEdBQUdBLHdCQUF3QixHQUFHQSxVQUFVLEdBQUdBLG1CQUFtQixHQUFHQSwyQkFBMkIsR0FBR0EsK0JBQStCLEdBQUdBLDZCQUE2QixHQUFHQSxxQkFBcUIsR0FBR0EsNEJBQTRCLEdBQUdBLHFCQUFxQixHQUFHQSxvQkFBb0IsR0FBR0EsZ0JBQWdCLEdBQUdBLDBCQUEwQixHQUFHQSw0QkFBNEIsR0FBR0EsaUJBQWlCLEdBQUcsS0FBSztBQUM3dUNBLFlBQVksR0FBR0EsbUJBQW1CLEdBQUdBLDRCQUE0QixHQUFHQSxtQkFBbUIsR0FBR0EscUJBQXFCLEdBQUcsS0FBSztBQUN2SCxNQUFNeUQsU0FBU0MsbUJBQU9BLENBQUMsc0JBQVE7QUFDL0IsTUFBTUMsT0FBT0QsbUJB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QixjQUFjLEdBQ2QsU0FBU3VELFlBQVl5UixLQUFLLEVBQUUxUCxJQUFJO0lBQzVCLE9BQU9BLFFBQVEwUCxNQUFNQyxJQUFJLENBQUMzUCxLQUFLcUgsV0FBVyxNQUFNLE9BQU87QUFDM0Q7QUFDQTNNLG1CQUFtQixHQUFHdUQ7QUFDdEIsU0FBU0Q7SUFDTCxJQUFJbVE7SUFDSixJQUFJQztJQUNKLE1BQU13QixVQUFVLElBQUkxQixRQUFRLFNBQVMyQixzQkFBc0JDLGNBQWMsRUFBRUMsYUFBYTtRQUNwRjVCLFVBQVUyQjtRQUNWMUIsU0FBUzJCO0lBQ2I7SUFDQSxPQUFPO1FBQUVIO1FBQVN6QjtRQUFTQztJQUFPO0FBQ3RDO0FBQ0ExVCw0QkFBNEIsR0FBR3NEO0FBQy9CdEQsbUJBQW1CLEdBQUcsQ0FBQyxHQUFHK0QsT0FBT3VSLFNBQVMsRUFBRTdSLE9BQU9KLFdBQVc7QUFDOUQ7Ozs7Ozs7Q0FPQyxHQUNELGVBQWVELEtBQUttUyxFQUFFLEVBQUVuUCxJQUFJO0lBQ3hCLE1BQU0sRUFBRThPLE9BQU8sRUFBRXpCLE9BQU8sRUFBRUMsTUFBTSxFQUFFLEdBQUdwUTtJQUNyQyxNQUFNa1MsVUFBVSxDQUFDdEIsT0FBU1QsUUFBUVM7SUFDbEMsTUFBTXVCLFVBQVUsQ0FBQ2hCLFFBQVVmLE9BQU9lO0lBQ2xDYyxHQUFHblMsSUFBSSxDQUFDZ0QsTUFBTW9QLFNBQVNwUyxJQUFJLENBQUMsU0FBU3FTO0lBQ3JDLElBQUk7UUFDQSxNQUFNaEosTUFBTSxNQUFNeUk7UUFDbEJLLEdBQUdHLEdBQUcsQ0FBQyxTQUFTRDtRQUNoQixPQUFPaEo7SUFDWCxFQUNBLE9BQU9nSSxPQUFPO1FBQ1ZjLEdBQUdHLEdBQUcsQ0FBQ3RQLE1BQU1vUDtRQUNiLE1BQU1mO0lBQ1Y7QUFDSjtBQUNBelUsWUFBWSxHQUFHb0QsTUFDZixpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3V0aWxzLmpzP2RjZmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRPQ1VNRU5UX0RCX01TRyA9IGV4cG9ydHMuQ09TTU9TX0RCX0NIRUNLID0gZXhwb3J0cy5ET0NVTUVOVF9EQl9DSEVDSyA9IGV4cG9ydHMuVGltZW91dENvbnRyb2xsZXIgPSBleHBvcnRzLnJlcXVlc3QgPSBleHBvcnRzLm1hdGNoZXNQYXJlbnREb21haW4gPSBleHBvcnRzLnBhcnNlVW5zaWduZWRJbnRlZ2VyID0gZXhwb3J0cy5wYXJzZUludGVnZXIgPSBleHBvcnRzLmNvbXBhcmVPYmplY3RJZCA9IGV4cG9ydHMuY29tbWFuZFN1cHBvcnRzUmVhZENvbmNlcm4gPSBleHBvcnRzLnNodWZmbGUgPSBleHBvcnRzLnN1cHBvcnRzUmV0cnlhYmxlV3JpdGVzID0gZXhwb3J0cy5lbnVtVG9TdHJpbmcgPSBleHBvcnRzLmVtaXRXYXJuaW5nT25jZSA9IGV4cG9ydHMuZW1pdFdhcm5pbmcgPSBleHBvcnRzLk1PTkdPREJfV0FSTklOR19DT0RFID0gZXhwb3J0cy5ERUZBVUxUX1BLX0ZBQ1RPUlkgPSBleHBvcnRzLkhvc3RBZGRyZXNzID0gZXhwb3J0cy5CdWZmZXJQb29sID0gZXhwb3J0cy5MaXN0ID0gZXhwb3J0cy5kZWVwQ29weSA9IGV4cG9ydHMuaXNSZWNvcmQgPSBleHBvcnRzLnNldERpZmZlcmVuY2UgPSBleHBvcnRzLmlzSGVsbG8gPSBleHBvcnRzLmlzU3VwZXJzZXQgPSBleHBvcnRzLnJlc29sdmVPcHRpb25zID0gZXhwb3J0cy5oYXNBdG9taWNPcGVyYXRvcnMgPSBleHBvcnRzLmNhbGN1bGF0ZUR1cmF0aW9uSW5NcyA9IGV4cG9ydHMubm93ID0gZXhwb3J0cy5tYWtlU3RhdGVNYWNoaW5lID0gZXhwb3J0cy5lcnJvclN0cmljdEVxdWFsID0gZXhwb3J0cy5hcnJheVN0cmljdEVxdWFsID0gZXhwb3J0cy5tYXhXaXJlVmVyc2lvbiA9IGV4cG9ydHMudXVpZFY0ID0gZXhwb3J0cy5tYWtlQ291bnRlciA9IGV4cG9ydHMuTW9uZ29EQkNvbGxlY3Rpb25OYW1lc3BhY2UgPSBleHBvcnRzLk1vbmdvREJOYW1lc3BhY2UgPSBleHBvcnRzLm5zID0gZXhwb3J0cy5nZXRUb3BvbG9neSA9IGV4cG9ydHMuZGVjb3JhdGVXaXRoRXhwbGFpbiA9IGV4cG9ydHMuZGVjb3JhdGVXaXRoUmVhZENvbmNlcm4gPSBleHBvcnRzLmRlY29yYXRlV2l0aENvbGxhdGlvbiA9IGV4cG9ydHMuaXNQcm9taXNlTGlrZSA9IGV4cG9ydHMuYXBwbHlSZXRyeWFibGVXcml0ZXMgPSBleHBvcnRzLmZpbHRlck9wdGlvbnMgPSBleHBvcnRzLm1lcmdlT3B0aW9ucyA9IGV4cG9ydHMuaXNPYmplY3QgPSBleHBvcnRzLm5vcm1hbGl6ZUhpbnRGaWVsZCA9IGV4cG9ydHMuaG9zdE1hdGNoZXNXaWxkY2FyZHMgPSBleHBvcnRzLkJ5dGVVdGlscyA9IHZvaWQgMDtcbmV4cG9ydHMub25jZSA9IGV4cG9ydHMucmFuZG9tQnl0ZXMgPSBleHBvcnRzLnByb21pc2VXaXRoUmVzb2x2ZXJzID0gZXhwb3J0cy5pc0hvc3RNYXRjaCA9IGV4cG9ydHMuQ09TTU9TX0RCX01TRyA9IHZvaWQgMDtcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoXCJjcnlwdG9cIik7XG5jb25zdCBodHRwID0gcmVxdWlyZShcImh0dHBcIik7XG5jb25zdCB0aW1lcnNfMSA9IHJlcXVpcmUoXCJ0aW1lcnNcIik7XG5jb25zdCB1cmwgPSByZXF1aXJlKFwidXJsXCIpO1xuY29uc3QgdXJsXzEgPSByZXF1aXJlKFwidXJsXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCBic29uXzEgPSByZXF1aXJlKFwiLi9ic29uXCIpO1xuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jbWFwL3dpcmVfcHJvdG9jb2wvY29uc3RhbnRzXCIpO1xuY29uc3QgY29uc3RhbnRzXzIgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG5jb25zdCBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG5jb25zdCByZWFkX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3JlYWRfY29uY2VyblwiKTtcbmNvbnN0IHJlYWRfcHJlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVhZF9wcmVmZXJlbmNlXCIpO1xuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi9zZGFtL2NvbW1vblwiKTtcbmNvbnN0IHdyaXRlX2NvbmNlcm5fMSA9IHJlcXVpcmUoXCIuL3dyaXRlX2NvbmNlcm5cIik7XG5leHBvcnRzLkJ5dGVVdGlscyA9IHtcbiAgICB0b0xvY2FsQnVmZmVyVHlwZShidWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihidWZmZXIpXG4gICAgICAgICAgICA/IGJ1ZmZlclxuICAgICAgICAgICAgOiBCdWZmZXIuZnJvbShidWZmZXIuYnVmZmVyLCBidWZmZXIuYnl0ZU9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgIH0sXG4gICAgZXF1YWxzKHNlcUEsIHNlcUIpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuQnl0ZVV0aWxzLnRvTG9jYWxCdWZmZXJUeXBlKHNlcUEpLmVxdWFscyhzZXFCKTtcbiAgICB9LFxuICAgIGNvbXBhcmUoc2VxQSwgc2VxQikge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5CeXRlVXRpbHMudG9Mb2NhbEJ1ZmZlclR5cGUoc2VxQSkuY29tcGFyZShzZXFCKTtcbiAgICB9LFxuICAgIHRvQmFzZTY0KHVpbnQ4YXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuQnl0ZVV0aWxzLnRvTG9jYWxCdWZmZXJUeXBlKHVpbnQ4YXJyYXkpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICB9XG59O1xuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgY29ubmVjdGlvbidzIGFkZHJlc3MgbWF0Y2hlcyBhIHVzZXIgcHJvdmlkZWQgbGlzdFxuICogb2YgZG9tYWluIHdpbGRjYXJkcy5cbiAqL1xuZnVuY3Rpb24gaG9zdE1hdGNoZXNXaWxkY2FyZHMoaG9zdCwgd2lsZGNhcmRzKSB7XG4gICAgZm9yIChjb25zdCB3aWxkY2FyZCBvZiB3aWxkY2FyZHMpIHtcbiAgICAgICAgaWYgKGhvc3QgPT09IHdpbGRjYXJkIHx8XG4gICAgICAgICAgICAod2lsZGNhcmQuc3RhcnRzV2l0aCgnKi4nKSAmJiBob3N0Py5lbmRzV2l0aCh3aWxkY2FyZC5zdWJzdHJpbmcoMiwgd2lsZGNhcmQubGVuZ3RoKSkpIHx8XG4gICAgICAgICAgICAod2lsZGNhcmQuc3RhcnRzV2l0aCgnKi8nKSAmJiBob3N0Py5lbmRzV2l0aCh3aWxkY2FyZC5zdWJzdHJpbmcoMiwgd2lsZGNhcmQubGVuZ3RoKSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLmhvc3RNYXRjaGVzV2lsZGNhcmRzID0gaG9zdE1hdGNoZXNXaWxkY2FyZHM7XG4vKipcbiAqIEVuc3VyZSBIaW50IGZpZWxkIGlzIGluIGEgc2hhcGUgd2UgZXhwZWN0OlxuICogLSBvYmplY3Qgb2YgaW5kZXggbmFtZXMgbWFwcGluZyB0byAxIG9yIC0xXG4gKiAtIGp1c3QgYW4gaW5kZXggbmFtZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhpbnRGaWVsZChoaW50KSB7XG4gICAgbGV0IGZpbmFsSGludCA9IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGhpbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGZpbmFsSGludCA9IGhpbnQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGludCkpIHtcbiAgICAgICAgZmluYWxIaW50ID0ge307XG4gICAgICAgIGhpbnQuZm9yRWFjaChwYXJhbSA9PiB7XG4gICAgICAgICAgICBmaW5hbEhpbnRbcGFyYW1dID0gMTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGhpbnQgIT0gbnVsbCAmJiB0eXBlb2YgaGludCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZmluYWxIaW50ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBoaW50KSB7XG4gICAgICAgICAgICBmaW5hbEhpbnRbbmFtZV0gPSBoaW50W25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaW5hbEhpbnQ7XG59XG5leHBvcnRzLm5vcm1hbGl6ZUhpbnRGaWVsZCA9IG5vcm1hbGl6ZUhpbnRGaWVsZDtcbmNvbnN0IFRPX1NUUklORyA9IChvYmplY3QpID0+IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpO1xuLyoqXG4gKiBDaGVja3MgaWYgYXJnIGlzIGFuIE9iamVjdDpcbiAqIC0gKipOT1RFKio6IHRoZSBjaGVjayBpcyBiYXNlZCBvbiB0aGUgYFtTeW1ib2wudG9TdHJpbmdUYWddKCkgPT09ICdPYmplY3QnYFxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICAgIHJldHVybiAnW29iamVjdCBPYmplY3RdJyA9PT0gVE9fU1RSSU5HKGFyZyk7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnModGFyZ2V0LCBzb3VyY2UpIHtcbiAgICByZXR1cm4geyAuLi50YXJnZXQsIC4uLnNvdXJjZSB9O1xufVxuZXhwb3J0cy5tZXJnZU9wdGlvbnMgPSBtZXJnZU9wdGlvbnM7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBmaWx0ZXJPcHRpb25zKG9wdGlvbnMsIG5hbWVzKSB7XG4gICAgY29uc3QgZmlsdGVyT3B0aW9ucyA9IHt9O1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlmIChuYW1lcy5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgICAgICAgZmlsdGVyT3B0aW9uc1tuYW1lXSA9IG9wdGlvbnNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRmlsdGVyZWQgb3B0aW9uc1xuICAgIHJldHVybiBmaWx0ZXJPcHRpb25zO1xufVxuZXhwb3J0cy5maWx0ZXJPcHRpb25zID0gZmlsdGVyT3B0aW9ucztcbi8qKlxuICogQXBwbGllcyByZXRyeVdyaXRlczogdHJ1ZSB0byBhIGNvbW1hbmQgaWYgcmV0cnlXcml0ZXMgaXMgc2V0IG9uIHRoZSBjb21tYW5kJ3MgZGF0YWJhc2UuXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHRhcmdldCBjb21tYW5kIHRvIHdoaWNoIHdlIHdpbGwgYXBwbHkgcmV0cnlXcml0ZXMuXG4gKiBAcGFyYW0gZGIgLSBUaGUgZGF0YWJhc2UgZnJvbSB3aGljaCB3ZSBjYW4gaW5oZXJpdCBhIHJldHJ5V3JpdGVzIHZhbHVlLlxuICovXG5mdW5jdGlvbiBhcHBseVJldHJ5YWJsZVdyaXRlcyh0YXJnZXQsIGRiKSB7XG4gICAgaWYgKGRiICYmIGRiLnMub3B0aW9ucz8ucmV0cnlXcml0ZXMpIHtcbiAgICAgICAgdGFyZ2V0LnJldHJ5V3JpdGVzID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmV4cG9ydHMuYXBwbHlSZXRyeWFibGVXcml0ZXMgPSBhcHBseVJldHJ5YWJsZVdyaXRlcztcbi8qKlxuICogQXBwbGllcyBhIHdyaXRlIGNvbmNlcm4gdG8gYSBjb21tYW5kIGJhc2VkIG9uIHdlbGwgZGVmaW5lZCBpbmhlcml0YW5jZSBydWxlcywgb3B0aW9uYWxseVxuICogZGV0ZWN0aW5nIHN1cHBvcnQgZm9yIHRoZSB3cml0ZSBjb25jZXJuIGluIHRoZSBmaXJzdCBwbGFjZS5cbiAqIEBpbnRlcm5hbFxuICpcbiAqIEBwYXJhbSB0YXJnZXQgLSB0aGUgdGFyZ2V0IGNvbW1hbmQgd2Ugd2lsbCBiZSBhcHBseWluZyB0aGUgd3JpdGUgY29uY2VybiB0b1xuICogQHBhcmFtIHNvdXJjZXMgLSBzb3VyY2VzIHdoZXJlIHdlIGNhbiBpbmhlcml0IGRlZmF1bHQgd3JpdGUgY29uY2VybnMgZnJvbVxuICogQHBhcmFtIG9wdGlvbnMgLSBvcHRpb25hbCBzZXR0aW5ncyBwYXNzZWQgaW50byBhIGNvbW1hbmQgZm9yIHdyaXRlIGNvbmNlcm4gb3ZlcnJpZGVzXG4gKi9cbi8qKlxuICogQ2hlY2tzIGlmIGEgZ2l2ZW4gdmFsdWUgaXMgYSBQcm9taXNlXG4gKlxuICogQHR5cGVQYXJhbSBUIC0gVGhlIHJlc29sdXRpb24gdHlwZSBvZiB0aGUgcG9zc2libGUgcHJvbWlzZVxuICogQHBhcmFtIHZhbHVlIC0gQW4gb2JqZWN0IHRoYXQgY291bGQgYmUgYSBwcm9taXNlXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBhIFByb21pc2VcbiAqL1xuZnVuY3Rpb24gaXNQcm9taXNlTGlrZSh2YWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUgIT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgICd0aGVuJyBpbiB2YWx1ZSAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5leHBvcnRzLmlzUHJvbWlzZUxpa2UgPSBpc1Byb21pc2VMaWtlO1xuLyoqXG4gKiBBcHBsaWVzIGNvbGxhdGlvbiB0byBhIGdpdmVuIGNvbW1hbmQuXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBAcGFyYW0gY29tbWFuZCAtIHRoZSBjb21tYW5kIG9uIHdoaWNoIHRvIGFwcGx5IGNvbGxhdGlvblxuICogQHBhcmFtIHRhcmdldCAtIHRhcmdldCBvZiBjb21tYW5kXG4gKiBAcGFyYW0gb3B0aW9ucyAtIG9wdGlvbnMgY29udGFpbmluZyBjb2xsYXRpb24gc2V0dGluZ3NcbiAqL1xuZnVuY3Rpb24gZGVjb3JhdGVXaXRoQ29sbGF0aW9uKGNvbW1hbmQsIHRhcmdldCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGNhcGFiaWxpdGllcyA9IGdldFRvcG9sb2d5KHRhcmdldCkuY2FwYWJpbGl0aWVzO1xuICAgIGlmIChvcHRpb25zLmNvbGxhdGlvbiAmJiB0eXBlb2Ygb3B0aW9ucy5jb2xsYXRpb24gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChjYXBhYmlsaXRpZXMgJiYgY2FwYWJpbGl0aWVzLmNvbW1hbmRzVGFrZUNvbGxhdGlvbikge1xuICAgICAgICAgICAgY29tbWFuZC5jb2xsYXRpb24gPSBvcHRpb25zLmNvbGxhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yKGBDdXJyZW50IHRvcG9sb2d5IGRvZXMgbm90IHN1cHBvcnQgY29sbGF0aW9uYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLmRlY29yYXRlV2l0aENvbGxhdGlvbiA9IGRlY29yYXRlV2l0aENvbGxhdGlvbjtcbi8qKlxuICogQXBwbGllcyBhIHJlYWQgY29uY2VybiB0byBhIGdpdmVuIGNvbW1hbmQuXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBAcGFyYW0gY29tbWFuZCAtIHRoZSBjb21tYW5kIG9uIHdoaWNoIHRvIGFwcGx5IHRoZSByZWFkIGNvbmNlcm5cbiAqIEBwYXJhbSBjb2xsIC0gdGhlIHBhcmVudCBjb2xsZWN0aW9uIG9mIHRoZSBvcGVyYXRpb24gY2FsbGluZyB0aGlzIG1ldGhvZFxuICovXG5mdW5jdGlvbiBkZWNvcmF0ZVdpdGhSZWFkQ29uY2Vybihjb21tYW5kLCBjb2xsLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zZXNzaW9uICYmIG9wdGlvbnMuc2Vzc2lvbi5pblRyYW5zYWN0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByZWFkQ29uY2VybiA9IE9iamVjdC5hc3NpZ24oe30sIGNvbW1hbmQucmVhZENvbmNlcm4gfHwge30pO1xuICAgIGlmIChjb2xsLnMucmVhZENvbmNlcm4pIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihyZWFkQ29uY2VybiwgY29sbC5zLnJlYWRDb25jZXJuKTtcbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKHJlYWRDb25jZXJuKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oY29tbWFuZCwgeyByZWFkQ29uY2VybjogcmVhZENvbmNlcm4gfSk7XG4gICAgfVxufVxuZXhwb3J0cy5kZWNvcmF0ZVdpdGhSZWFkQ29uY2VybiA9IGRlY29yYXRlV2l0aFJlYWRDb25jZXJuO1xuLyoqXG4gKiBBcHBsaWVzIGFuIGV4cGxhaW4gdG8gYSBnaXZlbiBjb21tYW5kLlxuICogQGludGVybmFsXG4gKlxuICogQHBhcmFtIGNvbW1hbmQgLSB0aGUgY29tbWFuZCBvbiB3aGljaCB0byBhcHBseSB0aGUgZXhwbGFpblxuICogQHBhcmFtIG9wdGlvbnMgLSB0aGUgb3B0aW9ucyBjb250YWluaW5nIHRoZSBleHBsYWluIHZlcmJvc2l0eVxuICovXG5mdW5jdGlvbiBkZWNvcmF0ZVdpdGhFeHBsYWluKGNvbW1hbmQsIGV4cGxhaW4pIHtcbiAgICBpZiAoY29tbWFuZC5leHBsYWluKSB7XG4gICAgICAgIHJldHVybiBjb21tYW5kO1xuICAgIH1cbiAgICByZXR1cm4geyBleHBsYWluOiBjb21tYW5kLCB2ZXJib3NpdHk6IGV4cGxhaW4udmVyYm9zaXR5IH07XG59XG5leHBvcnRzLmRlY29yYXRlV2l0aEV4cGxhaW4gPSBkZWNvcmF0ZVdpdGhFeHBsYWluO1xuLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIHRvcG9sb2d5IGZyb20gYSBnaXZlbiBwcm92aWRlci4gVGhyb3dzXG4gKiBpZiB0aGUgdG9wb2xvZ3kgY2Fubm90IGJlIGZvdW5kLlxuICogQHRocm93cyBNb25nb05vdENvbm5lY3RlZEVycm9yXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0VG9wb2xvZ3kocHJvdmlkZXIpIHtcbiAgICAvLyBNb25nb0NsaWVudCBvciBDbGllbnRTZXNzaW9uIG9yIEFic3RyYWN0Q3Vyc29yXG4gICAgaWYgKCd0b3BvbG9neScgaW4gcHJvdmlkZXIgJiYgcHJvdmlkZXIudG9wb2xvZ3kpIHtcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLnRvcG9sb2d5O1xuICAgIH1cbiAgICBlbHNlIGlmICgnY2xpZW50JyBpbiBwcm92aWRlciAmJiBwcm92aWRlci5jbGllbnQudG9wb2xvZ3kpIHtcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLmNsaWVudC50b3BvbG9neTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29Ob3RDb25uZWN0ZWRFcnJvcignTW9uZ29DbGllbnQgbXVzdCBiZSBjb25uZWN0ZWQgdG8gcGVyZm9ybSB0aGlzIG9wZXJhdGlvbicpO1xufVxuZXhwb3J0cy5nZXRUb3BvbG9neSA9IGdldFRvcG9sb2d5O1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gbnMobnMpIHtcbiAgICByZXR1cm4gTW9uZ29EQk5hbWVzcGFjZS5mcm9tU3RyaW5nKG5zKTtcbn1cbmV4cG9ydHMubnMgPSBucztcbi8qKiBAcHVibGljICovXG5jbGFzcyBNb25nb0RCTmFtZXNwYWNlIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuYW1lc3BhY2Ugb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGIgLSBkYXRhYmFzZSBuYW1lXG4gICAgICogQHBhcmFtIGNvbGxlY3Rpb24gLSBjb2xsZWN0aW9uIG5hbWVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkYiwgY29sbGVjdGlvbikge1xuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb24gPT09ICcnID8gdW5kZWZpbmVkIDogY29sbGVjdGlvbjtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxlY3Rpb24gPyBgJHt0aGlzLmRifS4ke3RoaXMuY29sbGVjdGlvbn1gIDogdGhpcy5kYjtcbiAgICB9XG4gICAgd2l0aENvbGxlY3Rpb24oY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IE1vbmdvREJDb2xsZWN0aW9uTmFtZXNwYWNlKHRoaXMuZGIsIGNvbGxlY3Rpb24pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVN0cmluZyhuYW1lc3BhY2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnIHx8IG5hbWVzcGFjZSA9PT0gJycpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oTk9ERS0zNDgzKTogUmVwbGFjZSB3aXRoIE1vbmdvTmFtZXNwYWNlRXJyb3JcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBDYW5ub3QgcGFyc2UgbmFtZXNwYWNlIGZyb20gXCIke25hbWVzcGFjZX1cImApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtkYiwgLi4uY29sbGVjdGlvblBhcnRzXSA9IG5hbWVzcGFjZS5zcGxpdCgnLicpO1xuICAgICAgICBjb25zdCBjb2xsZWN0aW9uID0gY29sbGVjdGlvblBhcnRzLmpvaW4oJy4nKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNb25nb0RCTmFtZXNwYWNlKGRiLCBjb2xsZWN0aW9uID09PSAnJyA/IHVuZGVmaW5lZCA6IGNvbGxlY3Rpb24pO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9uZ29EQk5hbWVzcGFjZSA9IE1vbmdvREJOYW1lc3BhY2U7XG4vKipcbiAqIEBwdWJsaWNcbiAqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGNvbGxlY3Rpb24ncyBuYW1lc3BhY2UuICBUaGlzIGNsYXNzIGVuZm9yY2VzICh0aHJvdWdoIFR5cGVzY3JpcHQpIHRoYXRcbiAqIHRoZSBgY29sbGVjdGlvbmAgcG9ydGlvbiBvZiB0aGUgbmFtZXNwYWNlIGlzIGRlZmluZWQgYW5kIHNob3VsZCBvbmx5IGJlXG4gKiB1c2VkIGluIHNjZW5hcmlvcyB3aGVyZSB0aGlzIGNhbiBiZSBndWFyYW50ZWVkLlxuICovXG5jbGFzcyBNb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZSBleHRlbmRzIE1vbmdvREJOYW1lc3BhY2Uge1xuICAgIGNvbnN0cnVjdG9yKGRiLCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHN1cGVyKGRiLCBjb2xsZWN0aW9uKTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21TdHJpbmcobmFtZXNwYWNlKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5mcm9tU3RyaW5nKG5hbWVzcGFjZSk7XG4gICAgfVxufVxuZXhwb3J0cy5Nb25nb0RCQ29sbGVjdGlvbk5hbWVzcGFjZSA9IE1vbmdvREJDb2xsZWN0aW9uTmFtZXNwYWNlO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24qIG1ha2VDb3VudGVyKHNlZWQgPSAwKSB7XG4gICAgbGV0IGNvdW50ID0gc2VlZDtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCBuZXdDb3VudCA9IGNvdW50O1xuICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICB5aWVsZCBuZXdDb3VudDtcbiAgICB9XG59XG5leHBvcnRzLm1ha2VDb3VudGVyID0gbWFrZUNvdW50ZXI7XG4vKipcbiAqIFN5bmNocm9ub3VzbHkgR2VuZXJhdGUgYSBVVUlEdjRcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiB1dWlkVjQoKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDE2KTtcbiAgICByZXN1bHRbNl0gPSAocmVzdWx0WzZdICYgMHgwZikgfCAweDQwO1xuICAgIHJlc3VsdFs4XSA9IChyZXN1bHRbOF0gJiAweDNmKSB8IDB4ODA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydHMudXVpZFY0ID0gdXVpZFY0O1xuLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZGV0ZXJtaW5pbmcgYG1heFdpcmVWZXJzaW9uYCBiZXR3ZWVuIGxlZ2FjeSBhbmQgbmV3IHRvcG9sb2d5IGluc3RhbmNlc1xuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIG1heFdpcmVWZXJzaW9uKHRvcG9sb2d5T3JTZXJ2ZXIpIHtcbiAgICBpZiAodG9wb2xvZ3lPclNlcnZlcikge1xuICAgICAgICBpZiAodG9wb2xvZ3lPclNlcnZlci5sb2FkQmFsYW5jZWQgfHwgdG9wb2xvZ3lPclNlcnZlci5zZXJ2ZXJBcGk/LnZlcnNpb24pIHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIGRvIG5vdCBoYXZlIGEgbW9uaXRvciBpbiB0aGUgbG9hZCBiYWxhbmNlZCBtb2RlLFxuICAgICAgICAgICAgLy8gd2UgYXNzdW1lIHRoZSBsb2FkLWJhbGFuY2VkIHNlcnZlciBpcyBhbHdheXMgcG9pbnRlZCBhdCB0aGUgbGF0ZXN0IG1vbmdvZGIgdmVyc2lvbi5cbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIGEgcmlzayB0aGF0IGZvciBvbi1wcmVtIGRlcGxveW1lbnRzXG4gICAgICAgICAgICAvLyB0aGF0IGRvbid0IHVwZ3JhZGUgaW1tZWRpYXRlbHkgdGhhdCB0aGlzIGNvdWxkIGFsZXJ0IHRvIHRoZVxuICAgICAgICAgICAgLy8gYXBwbGljYXRpb24gdGhhdCBhIGZlYXR1cmUgaXMgYXZhaWxhYmxlIHRoYXQgaXMgYWN0dWFsbHkgbm90LlxuICAgICAgICAgICAgLy8gV2UgYWxzbyByZXR1cm4gdGhlIG1heCBzdXBwb3J0ZWQgd2lyZSB2ZXJzaW9uIGZvciBzZXJ2ZXJBUEkuXG4gICAgICAgICAgICByZXR1cm4gY29uc3RhbnRzXzEuTUFYX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT047XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcG9sb2d5T3JTZXJ2ZXIuaGVsbG8pIHtcbiAgICAgICAgICAgIHJldHVybiB0b3BvbG9neU9yU2VydmVyLmhlbGxvLm1heFdpcmVWZXJzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnbGFzdEhlbGxvJyBpbiB0b3BvbG9neU9yU2VydmVyICYmIHR5cGVvZiB0b3BvbG9neU9yU2VydmVyLmxhc3RIZWxsbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc3QgbGFzdEhlbGxvID0gdG9wb2xvZ3lPclNlcnZlci5sYXN0SGVsbG8oKTtcbiAgICAgICAgICAgIGlmIChsYXN0SGVsbG8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFzdEhlbGxvLm1heFdpcmVWZXJzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0b3BvbG9neU9yU2VydmVyLmRlc2NyaXB0aW9uICYmXG4gICAgICAgICAgICAnbWF4V2lyZVZlcnNpb24nIGluIHRvcG9sb2d5T3JTZXJ2ZXIuZGVzY3JpcHRpb24gJiZcbiAgICAgICAgICAgIHRvcG9sb2d5T3JTZXJ2ZXIuZGVzY3JpcHRpb24ubWF4V2lyZVZlcnNpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRvcG9sb2d5T3JTZXJ2ZXIuZGVzY3JpcHRpb24ubWF4V2lyZVZlcnNpb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG59XG5leHBvcnRzLm1heFdpcmVWZXJzaW9uID0gbWF4V2lyZVZlcnNpb247XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBhcnJheVN0cmljdEVxdWFsKGFyciwgYXJyMikge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpIHx8ICFBcnJheS5pc0FycmF5KGFycjIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGFyci5sZW5ndGggPT09IGFycjIubGVuZ3RoICYmIGFyci5ldmVyeSgoZWx0LCBpZHgpID0+IGVsdCA9PT0gYXJyMltpZHhdKTtcbn1cbmV4cG9ydHMuYXJyYXlTdHJpY3RFcXVhbCA9IGFycmF5U3RyaWN0RXF1YWw7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBlcnJvclN0cmljdEVxdWFsKGxocywgcmhzKSB7XG4gICAgaWYgKGxocyA9PT0gcmhzKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWxocyB8fCAhcmhzKSB7XG4gICAgICAgIHJldHVybiBsaHMgPT09IHJocztcbiAgICB9XG4gICAgaWYgKChsaHMgPT0gbnVsbCAmJiByaHMgIT0gbnVsbCkgfHwgKGxocyAhPSBudWxsICYmIHJocyA9PSBudWxsKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChsaHMuY29uc3RydWN0b3IubmFtZSAhPT0gcmhzLmNvbnN0cnVjdG9yLm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAobGhzLm1lc3NhZ2UgIT09IHJocy5tZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnRzLmVycm9yU3RyaWN0RXF1YWwgPSBlcnJvclN0cmljdEVxdWFsO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gbWFrZVN0YXRlTWFjaGluZShzdGF0ZVRhYmxlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlVHJhbnNpdGlvbih0YXJnZXQsIG5ld1N0YXRlKSB7XG4gICAgICAgIGNvbnN0IGxlZ2FsU3RhdGVzID0gc3RhdGVUYWJsZVt0YXJnZXQucy5zdGF0ZV07XG4gICAgICAgIGlmIChsZWdhbFN0YXRlcyAmJiBsZWdhbFN0YXRlcy5pbmRleE9mKG5ld1N0YXRlKSA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvUnVudGltZUVycm9yKGBpbGxlZ2FsIHN0YXRlIHRyYW5zaXRpb24gZnJvbSBbJHt0YXJnZXQucy5zdGF0ZX1dID0+IFske25ld1N0YXRlfV0sIGFsbG93ZWQ6IFske2xlZ2FsU3RhdGVzfV1gKTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQuZW1pdCgnc3RhdGVDaGFuZ2VkJywgdGFyZ2V0LnMuc3RhdGUsIG5ld1N0YXRlKTtcbiAgICAgICAgdGFyZ2V0LnMuc3RhdGUgPSBuZXdTdGF0ZTtcbiAgICB9O1xufVxuZXhwb3J0cy5tYWtlU3RhdGVNYWNoaW5lID0gbWFrZVN0YXRlTWFjaGluZTtcbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIG5vdygpIHtcbiAgICBjb25zdCBocnRpbWUgPSBwcm9jZXNzLmhydGltZSgpO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGhydGltZVswXSAqIDEwMDAgKyBocnRpbWVbMV0gLyAxMDAwMDAwKTtcbn1cbmV4cG9ydHMubm93ID0gbm93O1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlRHVyYXRpb25Jbk1zKHN0YXJ0ZWQpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ZWQgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgY29uc3QgZWxhcHNlZCA9IG5vdygpIC0gc3RhcnRlZDtcbiAgICByZXR1cm4gZWxhcHNlZCA8IDAgPyAwIDogZWxhcHNlZDtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlRHVyYXRpb25Jbk1zID0gY2FsY3VsYXRlRHVyYXRpb25Jbk1zO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gaGFzQXRvbWljT3BlcmF0b3JzKGRvYykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRvYykpIHtcbiAgICAgICAgZm9yIChjb25zdCBkb2N1bWVudCBvZiBkb2MpIHtcbiAgICAgICAgICAgIGlmIChoYXNBdG9taWNPcGVyYXRvcnMoZG9jdW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZG9jKTtcbiAgICByZXR1cm4ga2V5cy5sZW5ndGggPiAwICYmIGtleXNbMF1bMF0gPT09ICckJztcbn1cbmV4cG9ydHMuaGFzQXRvbWljT3BlcmF0b3JzID0gaGFzQXRvbWljT3BlcmF0b3JzO1xuLyoqXG4gKiBNZXJnZSBpbmhlcml0ZWQgcHJvcGVydGllcyBmcm9tIHBhcmVudCBpbnRvIG9wdGlvbnMsIHByaW9yaXRpemluZyB2YWx1ZXMgZnJvbSBvcHRpb25zLFxuICogdGhlbiB2YWx1ZXMgZnJvbSBwYXJlbnQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbnMocGFyZW50LCBvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucywgKDAsIGJzb25fMS5yZXNvbHZlQlNPTk9wdGlvbnMpKG9wdGlvbnMsIHBhcmVudCkpO1xuICAgIC8vIFVzZXJzIGNhbm5vdCBwYXNzIGEgcmVhZENvbmNlcm4vd3JpdGVDb25jZXJuIHRvIG9wZXJhdGlvbnMgaW4gYSB0cmFuc2FjdGlvblxuICAgIGNvbnN0IHNlc3Npb24gPSBvcHRpb25zPy5zZXNzaW9uO1xuICAgIGlmICghc2Vzc2lvbj8uaW5UcmFuc2FjdGlvbigpKSB7XG4gICAgICAgIGNvbnN0IHJlYWRDb25jZXJuID0gcmVhZF9jb25jZXJuXzEuUmVhZENvbmNlcm4uZnJvbU9wdGlvbnMob3B0aW9ucykgPz8gcGFyZW50Py5yZWFkQ29uY2VybjtcbiAgICAgICAgaWYgKHJlYWRDb25jZXJuKSB7XG4gICAgICAgICAgICByZXN1bHQucmVhZENvbmNlcm4gPSByZWFkQ29uY2VybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cml0ZUNvbmNlcm4gPSB3cml0ZV9jb25jZXJuXzEuV3JpdGVDb25jZXJuLmZyb21PcHRpb25zKG9wdGlvbnMpID8/IHBhcmVudD8ud3JpdGVDb25jZXJuO1xuICAgICAgICBpZiAod3JpdGVDb25jZXJuKSB7XG4gICAgICAgICAgICByZXN1bHQud3JpdGVDb25jZXJuID0gd3JpdGVDb25jZXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlYWRQcmVmZXJlbmNlID0gcmVhZF9wcmVmZXJlbmNlXzEuUmVhZFByZWZlcmVuY2UuZnJvbU9wdGlvbnMob3B0aW9ucykgPz8gcGFyZW50Py5yZWFkUHJlZmVyZW5jZTtcbiAgICBpZiAocmVhZFByZWZlcmVuY2UpIHtcbiAgICAgICAgcmVzdWx0LnJlYWRQcmVmZXJlbmNlID0gcmVhZFByZWZlcmVuY2U7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnRzLnJlc29sdmVPcHRpb25zID0gcmVzb2x2ZU9wdGlvbnM7XG5mdW5jdGlvbiBpc1N1cGVyc2V0KHNldCwgc3Vic2V0KSB7XG4gICAgc2V0ID0gQXJyYXkuaXNBcnJheShzZXQpID8gbmV3IFNldChzZXQpIDogc2V0O1xuICAgIHN1YnNldCA9IEFycmF5LmlzQXJyYXkoc3Vic2V0KSA/IG5ldyBTZXQoc3Vic2V0KSA6IHN1YnNldDtcbiAgICBmb3IgKGNvbnN0IGVsZW0gb2Ygc3Vic2V0KSB7XG4gICAgICAgIGlmICghc2V0LmhhcyhlbGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0cy5pc1N1cGVyc2V0ID0gaXNTdXBlcnNldDtcbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBkb2N1bWVudCBpcyBhIEhlbGxvIHJlcXVlc3RcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpc0hlbGxvKGRvYykge1xuICAgIHJldHVybiBkb2NbY29uc3RhbnRzXzIuTEVHQUNZX0hFTExPX0NPTU1BTkRdIHx8IGRvYy5oZWxsbyA/IHRydWUgOiBmYWxzZTtcbn1cbmV4cG9ydHMuaXNIZWxsbyA9IGlzSGVsbG87XG4vKiogUmV0dXJucyB0aGUgaXRlbXMgdGhhdCBhcmUgdW5pcXVlbHkgaW4gc2V0QSAqL1xuZnVuY3Rpb24gc2V0RGlmZmVyZW5jZShzZXRBLCBzZXRCKSB7XG4gICAgY29uc3QgZGlmZmVyZW5jZSA9IG5ldyBTZXQoc2V0QSk7XG4gICAgZm9yIChjb25zdCBlbGVtIG9mIHNldEIpIHtcbiAgICAgICAgZGlmZmVyZW5jZS5kZWxldGUoZWxlbSk7XG4gICAgfVxuICAgIHJldHVybiBkaWZmZXJlbmNlO1xufVxuZXhwb3J0cy5zZXREaWZmZXJlbmNlID0gc2V0RGlmZmVyZW5jZTtcbmNvbnN0IEhBU19PV04gPSAob2JqZWN0LCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wKTtcbmZ1bmN0aW9uIGlzUmVjb3JkKHZhbHVlLCByZXF1aXJlZEtleXMgPSB1bmRlZmluZWQpIHtcbiAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGN0b3IgPSB2YWx1ZS5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoY3RvciAmJiBjdG9yLnByb3RvdHlwZSkge1xuICAgICAgICBpZiAoIWlzT2JqZWN0KGN0b3IucHJvdG90eXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBzb21lIG1ldGhvZCBleGlzdHMgZnJvbSB0aGUgT2JqZWN0IGV4aXN0c1xuICAgICAgICBpZiAoIUhBU19PV04oY3Rvci5wcm90b3R5cGUsICdpc1Byb3RvdHlwZU9mJykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVxdWlyZWRLZXlzKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gICAgICAgIHJldHVybiBpc1N1cGVyc2V0KGtleXMsIHJlcXVpcmVkS2V5cyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0cy5pc1JlY29yZCA9IGlzUmVjb3JkO1xuLyoqXG4gKiBNYWtlIGEgZGVlcCBjb3B5IG9mIGFuIG9iamVjdFxuICpcbiAqIE5PVEU6IFRoaXMgaXMgbm90IG1lYW50IHRvIGJlIHRoZSBwZXJmZWN0IGltcGxlbWVudGF0aW9uIG9mIGEgZGVlcCBjb3B5LFxuICogYnV0IGluc3RlYWQgc29tZXRoaW5nIHRoYXQgaXMgZ29vZCBlbm91Z2ggZm9yIHRoZSBwdXJwb3NlcyBvZlxuICogY29tbWFuZCBtb25pdG9yaW5nLlxuICovXG5mdW5jdGlvbiBkZWVwQ29weSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChpdGVtID0+IGRlZXBDb3B5KGl0ZW0pKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNSZWNvcmQodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgcmVzW2tleV0gPSBkZWVwQ29weSh2YWx1ZVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBjb25zdCBjdG9yID0gdmFsdWUuY29uc3RydWN0b3I7XG4gICAgaWYgKGN0b3IpIHtcbiAgICAgICAgc3dpdGNoIChjdG9yLm5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBjdG9yKE51bWJlcih2YWx1ZSkpO1xuICAgICAgICAgICAgY2FzZSAnbWFwJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1hcCh2YWx1ZSk7XG4gICAgICAgICAgICBjYXNlICdzZXQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2V0KHZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgJ2J1ZmZlcic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5leHBvcnRzLmRlZXBDb3B5ID0gZGVlcENvcHk7XG4vKipcbiAqIEEgc2VxdWVudGlhbCBsaXN0IG9mIGl0ZW1zIGluIGEgY2lyY3VsYXJseSBsaW5rZWQgbGlzdFxuICogQHJlbWFya3NcbiAqIFRoZSBoZWFkIG5vZGUgaXMgc3BlY2lhbCwgaXQgaXMgYWx3YXlzIGRlZmluZWQgYW5kIGhhcyBhIHZhbHVlIG9mIG51bGwuXG4gKiBJdCBpcyBuZXZlciBcImluY2x1ZGVkXCIgaW4gdGhlIGxpc3QsIGluIHRoYXQsIGl0IGlzIG5vdCByZXR1cm5lZCBieSBwb3Avc2hpZnQgb3IgeWllbGRlZCBieSB0aGUgaXRlcmF0b3IuXG4gKiBUaGUgY2lyY3VsYXIgbGlua2FnZSBhbmQgYWx3YXlzIGRlZmluZWQgaGVhZCBub2RlIGFyZSB0byByZWR1Y2UgY2hlY2tzIGZvciBudWxsIG5leHQvcHJldiByZWZlcmVuY2VzIHRvIHplcm8uXG4gKiBOZXcgbm9kZXMgYXJlIGRlY2xhcmVkIGFzIG9iamVjdCBsaXRlcmFscyB3aXRoIGtleXMgYWx3YXlzIGluIHRoZSBzYW1lIG9yZGVyOiBuZXh0LCBwcmV2LCB2YWx1ZS5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBMaXN0IHtcbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3VudDtcbiAgICB9XG4gICAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgICAgICByZXR1cm4gJ0xpc3QnO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIC8vIHRoaXMgaXMgY2FyZWZ1bGx5IGNyYWZ0ZWQ6XG4gICAgICAgIC8vIGRlY2xhcmluZyBhIGNvbXBsZXRlIGFuZCBjb25zaXN0ZW50bHkga2V5IG9yZGVyZWRcbiAgICAgICAgLy8gb2JqZWN0IGlzIGJlbmVmaWNpYWwgdG8gdGhlIHJ1bnRpbWUgb3B0aW1pemF0aW9uc1xuICAgICAgICB0aGlzLmhlYWQgPSB7XG4gICAgICAgICAgICBuZXh0OiBudWxsLFxuICAgICAgICAgICAgcHJldjogbnVsbCxcbiAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGVhZC5uZXh0ID0gdGhpcy5oZWFkO1xuICAgICAgICB0aGlzLmhlYWQucHJldiA9IHRoaXMuaGVhZDtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYGhlYWQgPD0+ICR7dGhpcy50b0FycmF5KCkuam9pbignIDw9PiAnKX0gPD0+IGhlYWRgO1xuICAgIH1cbiAgICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzLm5vZGVzKCkpIHtcbiAgICAgICAgICAgIHlpZWxkIG5vZGUudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgKm5vZGVzKCkge1xuICAgICAgICBsZXQgcHRyID0gdGhpcy5oZWFkLm5leHQ7XG4gICAgICAgIHdoaWxlIChwdHIgIT09IHRoaXMuaGVhZCkge1xuICAgICAgICAgICAgLy8gU2F2ZSBuZXh0IGJlZm9yZSB5aWVsZGluZyBzbyB0aGF0IHdlIG1ha2UgcmVtb3Zpbmcgd2l0aGluIGl0ZXJhdGlvbiBzYWZlXG4gICAgICAgICAgICBjb25zdCB7IG5leHQgfSA9IHB0cjtcbiAgICAgICAgICAgIHlpZWxkIHB0cjtcbiAgICAgICAgICAgIHB0ciA9IG5leHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEluc2VydCBhdCBlbmQgb2YgbGlzdCAqL1xuICAgIHB1c2godmFsdWUpIHtcbiAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuICAgICAgICBjb25zdCBuZXdOb2RlID0ge1xuICAgICAgICAgICAgbmV4dDogdGhpcy5oZWFkLFxuICAgICAgICAgICAgcHJldjogdGhpcy5oZWFkLnByZXYsXG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhlYWQucHJldi5uZXh0ID0gbmV3Tm9kZTtcbiAgICAgICAgdGhpcy5oZWFkLnByZXYgPSBuZXdOb2RlO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBldmVyeSBpdGVtIGluc2lkZSBhbiBpdGVyYWJsZSBpbnN0ZWFkIG9mIHRoZSBpdGVyYWJsZSBpdHNlbGYgKi9cbiAgICBwdXNoTWFueShpdGVyYWJsZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGl0ZXJhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBJbnNlcnQgYXQgZnJvbnQgb2YgbGlzdCAqL1xuICAgIHVuc2hpZnQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuICAgICAgICBjb25zdCBuZXdOb2RlID0ge1xuICAgICAgICAgICAgbmV4dDogdGhpcy5oZWFkLm5leHQsXG4gICAgICAgICAgICBwcmV2OiB0aGlzLmhlYWQsXG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhlYWQubmV4dC5wcmV2ID0gbmV3Tm9kZTtcbiAgICAgICAgdGhpcy5oZWFkLm5leHQgPSBuZXdOb2RlO1xuICAgIH1cbiAgICByZW1vdmUobm9kZSkge1xuICAgICAgICBpZiAobm9kZSA9PT0gdGhpcy5oZWFkIHx8IHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvdW50IC09IDE7XG4gICAgICAgIGNvbnN0IHByZXZOb2RlID0gbm9kZS5wcmV2O1xuICAgICAgICBjb25zdCBuZXh0Tm9kZSA9IG5vZGUubmV4dDtcbiAgICAgICAgcHJldk5vZGUubmV4dCA9IG5leHROb2RlO1xuICAgICAgICBuZXh0Tm9kZS5wcmV2ID0gcHJldk5vZGU7XG4gICAgICAgIHJldHVybiBub2RlLnZhbHVlO1xuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgZmlyc3Qgbm9kZSBhdCB0aGUgZnJvbnQgb2YgdGhlIGxpc3QgKi9cbiAgICBzaGlmdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlKHRoaXMuaGVhZC5uZXh0KTtcbiAgICB9XG4gICAgLyoqIFJlbW92ZXMgdGhlIGxhc3Qgbm9kZSBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0ICovXG4gICAgcG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmUodGhpcy5oZWFkLnByZXYpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgdGhyb3VnaCB0aGUgbGlzdCBhbmQgcmVtb3ZlcyBub2RlcyB3aGVyZSBmaWx0ZXIgcmV0dXJucyB0cnVlICovXG4gICAgcHJ1bmUoZmlsdGVyKSB7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzLm5vZGVzKCkpIHtcbiAgICAgICAgICAgIGlmIChmaWx0ZXIobm9kZS52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMuaGVhZC5uZXh0ID0gdGhpcy5oZWFkO1xuICAgICAgICB0aGlzLmhlYWQucHJldiA9IHRoaXMuaGVhZDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIGxpc3QsIGRvZXMgbm90IHJlbW92ZSAqL1xuICAgIGZpcnN0KCkge1xuICAgICAgICAvLyBJZiB0aGUgbGlzdCBpcyBlbXB0eSwgdmFsdWUgd2lsbCBiZSB0aGUgaGVhZCdzIG51bGxcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZC5uZXh0LnZhbHVlO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgbGFzdCBpdGVtIGluIHRoZSBsaXN0LCBkb2VzIG5vdCByZW1vdmUgKi9cbiAgICBsYXN0KCkge1xuICAgICAgICAvLyBJZiB0aGUgbGlzdCBpcyBlbXB0eSwgdmFsdWUgd2lsbCBiZSB0aGUgaGVhZCdzIG51bGxcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZC5wcmV2LnZhbHVlO1xuICAgIH1cbn1cbmV4cG9ydHMuTGlzdCA9IExpc3Q7XG4vKipcbiAqIEEgcG9vbCBvZiBCdWZmZXJzIHdoaWNoIGFsbG93IHlvdSB0byByZWFkIHRoZW0gYXMgaWYgdGhleSB3ZXJlIG9uZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEJ1ZmZlclBvb2wge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlcnMgPSBuZXcgTGlzdCgpO1xuICAgICAgICB0aGlzLnRvdGFsQnl0ZUxlbmd0aCA9IDA7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvdGFsQnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgLyoqIEFkZHMgYSBidWZmZXIgdG8gdGhlIGludGVybmFsIGJ1ZmZlciBwb29sIGxpc3QgKi9cbiAgICBhcHBlbmQoYnVmZmVyKSB7XG4gICAgICAgIHRoaXMuYnVmZmVycy5wdXNoKGJ1ZmZlcik7XG4gICAgICAgIHRoaXMudG90YWxCeXRlTGVuZ3RoICs9IGJ1ZmZlci5sZW5ndGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIEJ1ZmZlclBvb2wgY29udGFpbnMgNCBieXRlcyBvciBtb3JlIGNvbnN0cnVjdCBhbiBpbnQzMiBmcm9tIHRoZSBsZWFkaW5nIGJ5dGVzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm4gbnVsbC4gU2l6ZSBjYW4gYmUgbmVnYXRpdmUsIGNhbGxlciBzaG91bGQgZXJyb3IgY2hlY2suXG4gICAgICovXG4gICAgZ2V0SW50MzIoKSB7XG4gICAgICAgIGlmICh0aGlzLnRvdGFsQnl0ZUxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpcnN0QnVmZmVyID0gdGhpcy5idWZmZXJzLmZpcnN0KCk7XG4gICAgICAgIGlmIChmaXJzdEJ1ZmZlciAhPSBudWxsICYmIGZpcnN0QnVmZmVyLmJ5dGVMZW5ndGggPj0gNCkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0QnVmZmVyLnJlYWRJbnQzMkxFKDApO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVubGlrZWx5IGNhc2U6IGFuIGludDMyIGlzIHNwbGl0IGFjcm9zcyBidWZmZXJzLlxuICAgICAgICAvLyBVc2UgcmVhZCBhbmQgcHV0IHRoZSByZXR1cm5lZCBidWZmZXIgYmFjayBvbiB0b3BcbiAgICAgICAgY29uc3QgdG9wNEJ5dGVzID0gdGhpcy5yZWFkKDQpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRvcDRCeXRlcy5yZWFkSW50MzJMRSgwKTtcbiAgICAgICAgLy8gUHV0IGl0IGJhY2suXG4gICAgICAgIHRoaXMudG90YWxCeXRlTGVuZ3RoICs9IDQ7XG4gICAgICAgIHRoaXMuYnVmZmVycy51bnNoaWZ0KHRvcDRCeXRlcyk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLyoqIFJlYWRzIHRoZSByZXF1ZXN0ZWQgbnVtYmVyIG9mIGJ5dGVzLCBvcHRpb25hbGx5IGNvbnN1bWluZyB0aGVtICovXG4gICAgcmVhZChzaXplKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicgfHwgc2l6ZSA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcl8xLk1vbmdvSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0FyZ3VtZW50IFwic2l6ZVwiIG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gb3ZlcnNpemVkIHJlcXVlc3QgcmV0dXJucyBlbXB0eSBidWZmZXJcbiAgICAgICAgaWYgKHNpemUgPiB0aGlzLnRvdGFsQnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBrbm93IHdlIGhhdmUgZW5vdWdoLCB3ZSBqdXN0IGRvbid0IGtub3cgaG93IGl0IGlzIHNwcmVhZCBhY3Jvc3MgY2h1bmtzXG4gICAgICAgIC8vIFRPRE8oTk9ERS00NzMyKTogYWxsb2MgQVBJIHNob3VsZCBjaGFuZ2UgYmFzZWQgb24gcmF3IG9wdGlvblxuICAgICAgICBjb25zdCByZXN1bHQgPSBCdWZmZXIuYWxsb2NVbnNhZmUoc2l6ZSk7XG4gICAgICAgIGZvciAobGV0IGJ5dGVzUmVhZCA9IDA7IGJ5dGVzUmVhZCA8IHNpemU7KSB7XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLmJ1ZmZlcnMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChidWZmZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYnl0ZXNSZW1haW5pbmcgPSBzaXplIC0gYnl0ZXNSZWFkO1xuICAgICAgICAgICAgY29uc3QgYnl0ZXNSZWFkYWJsZSA9IE1hdGgubWluKGJ5dGVzUmVtYWluaW5nLCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IGJ1ZmZlci5zdWJhcnJheSgwLCBieXRlc1JlYWRhYmxlKTtcbiAgICAgICAgICAgIHJlc3VsdC5zZXQoYnl0ZXMsIGJ5dGVzUmVhZCk7XG4gICAgICAgICAgICBieXRlc1JlYWQgKz0gYnl0ZXNSZWFkYWJsZTtcbiAgICAgICAgICAgIHRoaXMudG90YWxCeXRlTGVuZ3RoIC09IGJ5dGVzUmVhZGFibGU7XG4gICAgICAgICAgICBpZiAoYnl0ZXNSZWFkYWJsZSA8IGJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJzLnVuc2hpZnQoYnVmZmVyLnN1YmFycmF5KGJ5dGVzUmVhZGFibGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbmV4cG9ydHMuQnVmZmVyUG9vbCA9IEJ1ZmZlclBvb2w7XG4vKiogQHB1YmxpYyAqL1xuY2xhc3MgSG9zdEFkZHJlc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RTdHJpbmcpIHtcbiAgICAgICAgdGhpcy5ob3N0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBvcnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc29ja2V0UGF0aCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pc0lQdjYgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgZXNjYXBlZEhvc3QgPSBob3N0U3RyaW5nLnNwbGl0KCcgJykuam9pbignJTIwJyk7IC8vIGVzY2FwZSBzcGFjZXMsIGZvciBzb2NrZXQgcGF0aCBob3N0c1xuICAgICAgICBpZiAoZXNjYXBlZEhvc3QuZW5kc1dpdGgoJy5zb2NrJykpIHtcbiAgICAgICAgICAgIC8vIGhldXJpc3RpY2FsbHkgZGV0ZXJtaW5lIGlmIHdlJ3JlIHdvcmtpbmcgd2l0aCBhIGRvbWFpbiBzb2NrZXRcbiAgICAgICAgICAgIHRoaXMuc29ja2V0UGF0aCA9IGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGVkSG9zdCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsU3RyaW5nID0gYGlMb3ZlSlM6Ly8ke2VzY2FwZWRIb3N0fWA7XG4gICAgICAgIGxldCB1cmw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB1cmwgPSBuZXcgdXJsXzEuVVJMKHVybFN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHVybEVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBydW50aW1lRXJyb3IgPSBuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgVW5hYmxlIHRvIHBhcnNlICR7ZXNjYXBlZEhvc3R9IHdpdGggVVJMYCk7XG4gICAgICAgICAgICBydW50aW1lRXJyb3IuY2F1c2UgPSB1cmxFcnJvcjtcbiAgICAgICAgICAgIHRocm93IHJ1bnRpbWVFcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBob3N0bmFtZSA9IHVybC5ob3N0bmFtZTtcbiAgICAgICAgY29uc3QgcG9ydCA9IHVybC5wb3J0O1xuICAgICAgICBsZXQgbm9ybWFsaXplZCA9IGRlY29kZVVSSUNvbXBvbmVudChob3N0bmFtZSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKG5vcm1hbGl6ZWQuc3RhcnRzV2l0aCgnWycpICYmIG5vcm1hbGl6ZWQuZW5kc1dpdGgoJ10nKSkge1xuICAgICAgICAgICAgdGhpcy5pc0lQdjYgPSB0cnVlO1xuICAgICAgICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQuc3Vic3RyaW5nKDEsIGhvc3RuYW1lLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaG9zdCA9IG5vcm1hbGl6ZWQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBwb3J0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhpcy5wb3J0ID0gcG9ydDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgcG9ydCA9PT0gJ3N0cmluZycgJiYgcG9ydCAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMucG9ydCA9IE51bWJlci5wYXJzZUludChwb3J0LCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBvcnQgPSAyNzAxNztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wb3J0ID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5Nb25nb1BhcnNlRXJyb3IoJ0ludmFsaWQgcG9ydCAoemVybykgd2l0aCBob3N0bmFtZScpO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5mcmVlemUodGhpcyk7XG4gICAgfVxuICAgIFtTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zcGVjdCgpO1xuICAgIH1cbiAgICBpbnNwZWN0KCkge1xuICAgICAgICByZXR1cm4gYG5ldyBIb3N0QWRkcmVzcygnJHt0aGlzLnRvU3RyaW5nKCl9JylgO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmhvc3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0lQdjYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYFske3RoaXMuaG9zdH1dOiR7dGhpcy5wb3J0fWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5ob3N0fToke3RoaXMucG9ydH1gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHt0aGlzLnNvY2tldFBhdGh9YDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21TdHJpbmcocykge1xuICAgICAgICByZXR1cm4gbmV3IEhvc3RBZGRyZXNzKHMpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUhvc3RQb3J0KGhvc3QsIHBvcnQpIHtcbiAgICAgICAgaWYgKGhvc3QuaW5jbHVkZXMoJzonKSkge1xuICAgICAgICAgICAgaG9zdCA9IGBbJHtob3N0fV1gOyAvLyBJUHY2IGFkZHJlc3NcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSG9zdEFkZHJlc3MuZnJvbVN0cmluZyhgJHtob3N0fToke3BvcnR9YCk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tU3J2UmVjb3JkKHsgbmFtZSwgcG9ydCB9KSB7XG4gICAgICAgIHJldHVybiBIb3N0QWRkcmVzcy5mcm9tSG9zdFBvcnQobmFtZSwgcG9ydCk7XG4gICAgfVxuICAgIHRvSG9zdFBvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvY2tldFBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGhvc3Q6IHRoaXMuc29ja2V0UGF0aCwgcG9ydDogMCB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvc3QgPSB0aGlzLmhvc3QgPz8gJyc7XG4gICAgICAgIGNvbnN0IHBvcnQgPSB0aGlzLnBvcnQgPz8gMDtcbiAgICAgICAgcmV0dXJuIHsgaG9zdCwgcG9ydCB9O1xuICAgIH1cbn1cbmV4cG9ydHMuSG9zdEFkZHJlc3MgPSBIb3N0QWRkcmVzcztcbmV4cG9ydHMuREVGQVVMVF9QS19GQUNUT1JZID0ge1xuICAgIC8vIFdlIHByZWZlciBub3QgdG8gcmVseSBvbiBPYmplY3RJZCBoYXZpbmcgYSBjcmVhdGVQayBtZXRob2RcbiAgICBjcmVhdGVQaygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBic29uXzEuT2JqZWN0SWQoKTtcbiAgICB9XG59O1xuLyoqXG4gKiBXaGVuIHRoZSBkcml2ZXIgdXNlZCBlbWl0V2FybmluZyB0aGUgY29kZSB3aWxsIGJlIGVxdWFsIHRvIHRoaXMuXG4gKiBAcHVibGljXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBwcm9jZXNzLm9uKCd3YXJuaW5nJywgKHdhcm5pbmcpID0+IHtcbiAqICBpZiAod2FybmluZy5jb2RlID09PSBNT05HT0RCX1dBUk5JTkdfQ09ERSkgY29uc29sZS5lcnJvcignQWggYW4gaW1wb3J0YW50IHdhcm5pbmchIDopJylcbiAqIH0pXG4gKiBgYGBcbiAqL1xuZXhwb3J0cy5NT05HT0RCX1dBUk5JTkdfQ09ERSA9ICdNT05HT0RCIERSSVZFUic7XG4vKiogQGludGVybmFsICovXG5mdW5jdGlvbiBlbWl0V2FybmluZyhtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW1pdFdhcm5pbmcobWVzc2FnZSwgeyBjb2RlOiBleHBvcnRzLk1PTkdPREJfV0FSTklOR19DT0RFIH0pO1xufVxuZXhwb3J0cy5lbWl0V2FybmluZyA9IGVtaXRXYXJuaW5nO1xuY29uc3QgZW1pdHRlZFdhcm5pbmdzID0gbmV3IFNldCgpO1xuLyoqXG4gKiBXaWxsIGVtaXQgYSB3YXJuaW5nIG9uY2UgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgYXBwbGljYXRpb24uXG4gKiBVc2VzIHRoZSBtZXNzYWdlIHRvIGlkZW50aWZ5IGlmIGl0IGhhcyBhbHJlYWR5IGJlZW4gZW1pdHRlZFxuICogc28gdXNpbmcgc3RyaW5nIGludGVycG9sYXRpb24gY2FuIGNhdXNlIG11bHRpcGxlIGVtaXRzXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZW1pdFdhcm5pbmdPbmNlKG1lc3NhZ2UpIHtcbiAgICBpZiAoIWVtaXR0ZWRXYXJuaW5ncy5oYXMobWVzc2FnZSkpIHtcbiAgICAgICAgZW1pdHRlZFdhcm5pbmdzLmFkZChtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIGVtaXRXYXJuaW5nKG1lc3NhZ2UpO1xuICAgIH1cbn1cbmV4cG9ydHMuZW1pdFdhcm5pbmdPbmNlID0gZW1pdFdhcm5pbmdPbmNlO1xuLyoqXG4gKiBUYWtlcyBhIEpTIG9iamVjdCBhbmQgam9pbnMgdGhlIHZhbHVlcyBpbnRvIGEgc3RyaW5nIHNlcGFyYXRlZCBieSAnLCAnXG4gKi9cbmZ1bmN0aW9uIGVudW1Ub1N0cmluZyhlbikge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKGVuKS5qb2luKCcsICcpO1xufVxuZXhwb3J0cy5lbnVtVG9TdHJpbmcgPSBlbnVtVG9TdHJpbmc7XG4vKipcbiAqIERldGVybWluZSBpZiBhIHNlcnZlciBzdXBwb3J0cyByZXRyeWFibGUgd3JpdGVzLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBzdXBwb3J0c1JldHJ5YWJsZVdyaXRlcyhzZXJ2ZXIpIHtcbiAgICBpZiAoIXNlcnZlcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzZXJ2ZXIubG9hZEJhbGFuY2VkKSB7XG4gICAgICAgIC8vIExvYWRiYWxhbmNlZCB0b3BvbG9naWVzIHdpbGwgYWx3YXlzIHN1cHBvcnQgcmV0cnkgd3JpdGVzXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoc2VydmVyLmRlc2NyaXB0aW9uLmxvZ2ljYWxTZXNzaW9uVGltZW91dE1pbnV0ZXMgIT0gbnVsbCkge1xuICAgICAgICAvLyB0aGF0IHN1cHBvcnRzIHNlc3Npb25zXG4gICAgICAgIGlmIChzZXJ2ZXIuZGVzY3JpcHRpb24udHlwZSAhPT0gY29tbW9uXzEuU2VydmVyVHlwZS5TdGFuZGFsb25lKSB7XG4gICAgICAgICAgICAvLyBhbmQgdGhhdCBpcyBub3QgYSBzdGFuZGFsb25lXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLnN1cHBvcnRzUmV0cnlhYmxlV3JpdGVzID0gc3VwcG9ydHNSZXRyeWFibGVXcml0ZXM7XG4vKipcbiAqIEZpc2hlcuKAk1lhdGVzIFNodWZmbGVcbiAqXG4gKiBSZWZlcmVuY2U6IGh0dHBzOi8vYm9zdC5vY2tzLm9yZy9taWtlL3NodWZmbGUvXG4gKiBAcGFyYW0gc2VxdWVuY2UgLSBpdGVtcyB0byBiZSBzaHVmZmxlZFxuICogQHBhcmFtIGxpbWl0IC0gRGVmYXVsdHMgdG8gYDBgLiBJZiBub256ZXJvIHNodWZmbGUgd2lsbCBzbGljZSB0aGUgcmFuZG9taXplZCBhcnJheSBlLmcsIGAuc2xpY2UoMCwgbGltaXQpYCBvdGhlcndpc2Ugd2lsbCByZXR1cm4gdGhlIGVudGlyZSByYW5kb21pemVkIGFycmF5LlxuICovXG5mdW5jdGlvbiBzaHVmZmxlKHNlcXVlbmNlLCBsaW1pdCA9IDApIHtcbiAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oc2VxdWVuY2UpOyAvLyBzaGFsbG93IGNvcHkgaW4gb3JkZXIgdG8gbmV2ZXIgc2h1ZmZsZSB0aGUgaW5wdXRcbiAgICBpZiAobGltaXQgPiBpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuTW9uZ29SdW50aW1lRXJyb3IoJ0xpbWl0IG11c3QgYmUgbGVzcyB0aGFuIHRoZSBudW1iZXIgb2YgaXRlbXMnKTtcbiAgICB9XG4gICAgbGV0IHJlbWFpbmluZ0l0ZW1zVG9TaHVmZmxlID0gaXRlbXMubGVuZ3RoO1xuICAgIGNvbnN0IGxvd2VyQm91bmQgPSBsaW1pdCAlIGl0ZW1zLmxlbmd0aCA9PT0gMCA/IDEgOiBpdGVtcy5sZW5ndGggLSBsaW1pdDtcbiAgICB3aGlsZSAocmVtYWluaW5nSXRlbXNUb1NodWZmbGUgPiBsb3dlckJvdW5kKSB7XG4gICAgICAgIC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudFxuICAgICAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHJlbWFpbmluZ0l0ZW1zVG9TaHVmZmxlKTtcbiAgICAgICAgcmVtYWluaW5nSXRlbXNUb1NodWZmbGUgLT0gMTtcbiAgICAgICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50XG4gICAgICAgIGNvbnN0IHN3YXBIb2xkID0gaXRlbXNbcmVtYWluaW5nSXRlbXNUb1NodWZmbGVdO1xuICAgICAgICBpdGVtc1tyZW1haW5pbmdJdGVtc1RvU2h1ZmZsZV0gPSBpdGVtc1tyYW5kb21JbmRleF07XG4gICAgICAgIGl0ZW1zW3JhbmRvbUluZGV4XSA9IHN3YXBIb2xkO1xuICAgIH1cbiAgICByZXR1cm4gbGltaXQgJSBpdGVtcy5sZW5ndGggPT09IDAgPyBpdGVtcyA6IGl0ZW1zLnNsaWNlKGxvd2VyQm91bmQpO1xufVxuZXhwb3J0cy5zaHVmZmxlID0gc2h1ZmZsZTtcbi8vIFRPRE8oTk9ERS00OTM2KTogcmVhZCBjb25jZXJuIGVsaWdpYmlsaXR5IGZvciBjb21tYW5kcyBzaG91bGQgYmUgY29kaWZpZWQgaW4gY29tbWFuZCBjb25zdHJ1Y3Rpb25cbi8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21vbmdvZGIvc3BlY2lmaWNhdGlvbnMvYmxvYi9tYXN0ZXIvc291cmNlL3JlYWQtd3JpdGUtY29uY2Vybi9yZWFkLXdyaXRlLWNvbmNlcm4ucnN0I3JlYWQtY29uY2VyblxuZnVuY3Rpb24gY29tbWFuZFN1cHBvcnRzUmVhZENvbmNlcm4oY29tbWFuZCkge1xuICAgIGlmIChjb21tYW5kLmFnZ3JlZ2F0ZSB8fCBjb21tYW5kLmNvdW50IHx8IGNvbW1hbmQuZGlzdGluY3QgfHwgY29tbWFuZC5maW5kIHx8IGNvbW1hbmQuZ2VvTmVhcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0cy5jb21tYW5kU3VwcG9ydHNSZWFkQ29uY2VybiA9IGNvbW1hbmRTdXBwb3J0c1JlYWRDb25jZXJuO1xuLyoqXG4gKiBDb21wYXJlIG9iamVjdElkcy4gYG51bGxgIGlzIGFsd2F5cyBsZXNzXG4gKiAtIGArMSA9IG9pZDEgaXMgZ3JlYXRlciB0aGFuIG9pZDJgXG4gKiAtIGAtMSA9IG9pZDEgaXMgbGVzcyB0aGFuIG9pZDJgXG4gKiAtIGArMCA9IG9pZDEgaXMgZXF1YWwgb2lkMmBcbiAqL1xuZnVuY3Rpb24gY29tcGFyZU9iamVjdElkKG9pZDEsIG9pZDIpIHtcbiAgICBpZiAob2lkMSA9PSBudWxsICYmIG9pZDIgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKG9pZDEgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlmIChvaWQyID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiBleHBvcnRzLkJ5dGVVdGlscy5jb21wYXJlKG9pZDEuaWQsIG9pZDIuaWQpO1xufVxuZXhwb3J0cy5jb21wYXJlT2JqZWN0SWQgPSBjb21wYXJlT2JqZWN0SWQ7XG5mdW5jdGlvbiBwYXJzZUludGVnZXIodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJylcbiAgICAgICAgcmV0dXJuIE1hdGgudHJ1bmModmFsdWUpO1xuICAgIGNvbnN0IHBhcnNlZFZhbHVlID0gTnVtYmVyLnBhcnNlSW50KFN0cmluZyh2YWx1ZSksIDEwKTtcbiAgICByZXR1cm4gTnVtYmVyLmlzTmFOKHBhcnNlZFZhbHVlKSA/IG51bGwgOiBwYXJzZWRWYWx1ZTtcbn1cbmV4cG9ydHMucGFyc2VJbnRlZ2VyID0gcGFyc2VJbnRlZ2VyO1xuZnVuY3Rpb24gcGFyc2VVbnNpZ25lZEludGVnZXIodmFsdWUpIHtcbiAgICBjb25zdCBwYXJzZWRJbnQgPSBwYXJzZUludGVnZXIodmFsdWUpO1xuICAgIHJldHVybiBwYXJzZWRJbnQgIT0gbnVsbCAmJiBwYXJzZWRJbnQgPj0gMCA/IHBhcnNlZEludCA6IG51bGw7XG59XG5leHBvcnRzLnBhcnNlVW5zaWduZWRJbnRlZ2VyID0gcGFyc2VVbnNpZ25lZEludGVnZXI7XG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhIHByb3ZpZGVkIGFkZHJlc3MgbWF0Y2hlcyB0aGUgcHJvdmlkZWQgcGFyZW50IGRvbWFpbi5cbiAqXG4gKiBJZiBhIEROUyBzZXJ2ZXIgd2VyZSB0byBiZWNvbWUgY29tcHJvbWlzZWQgU1JWIHJlY29yZHMgd291bGQgc3RpbGwgbmVlZCB0b1xuICogYWR2ZXJ0aXNlIGFkZHJlc3NlcyB0aGF0IGFyZSB1bmRlciB0aGUgc2FtZSBkb21haW4gYXMgdGhlIHNydkhvc3QuXG4gKlxuICogQHBhcmFtIGFkZHJlc3MgLSBUaGUgYWRkcmVzcyB0byBjaGVjayBhZ2FpbnN0IGEgZG9tYWluXG4gKiBAcGFyYW0gc3J2SG9zdCAtIFRoZSBkb21haW4gdG8gY2hlY2sgdGhlIHByb3ZpZGVkIGFkZHJlc3MgYWdhaW5zdFxuICogQHJldHVybnMgV2hldGhlciB0aGUgcHJvdmlkZWQgYWRkcmVzcyBtYXRjaGVzIHRoZSBwYXJlbnQgZG9tYWluXG4gKi9cbmZ1bmN0aW9uIG1hdGNoZXNQYXJlbnREb21haW4oYWRkcmVzcywgc3J2SG9zdCkge1xuICAgIC8vIFJlbW92ZSB0cmFpbGluZyBkb3QgaWYgZXhpc3RzIG9uIGVpdGhlciB0aGUgcmVzb2x2ZWQgYWRkcmVzcyBvciB0aGUgc3J2IGhvc3RuYW1lXG4gICAgY29uc3Qgbm9ybWFsaXplZEFkZHJlc3MgPSBhZGRyZXNzLmVuZHNXaXRoKCcuJykgPyBhZGRyZXNzLnNsaWNlKDAsIGFkZHJlc3MubGVuZ3RoIC0gMSkgOiBhZGRyZXNzO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcnZIb3N0ID0gc3J2SG9zdC5lbmRzV2l0aCgnLicpID8gc3J2SG9zdC5zbGljZSgwLCBzcnZIb3N0Lmxlbmd0aCAtIDEpIDogc3J2SG9zdDtcbiAgICBjb25zdCBhbGxDaGFyYWN0ZXJCZWZvcmVGaXJzdERvdCA9IC9eLio/XFwuLztcbiAgICAvLyBSZW1vdmUgYWxsIGNoYXJhY3RlcnMgYmVmb3JlIGZpcnN0IGRvdFxuICAgIC8vIEFkZCBsZWFkaW5nIGRvdCBiYWNrIHRvIHN0cmluZyBzb1xuICAgIC8vICAgYW4gc3J2SG9zdERvbWFpbiA9ICcudHJ1c3RlZC5zaXRlJ1xuICAgIC8vICAgd2lsbCBub3Qgc2F0aXNmeSBhbiBhZGRyZXNzRG9tYWluIHRoYXQgZW5kc1dpdGggJy5mYWtlLXRydXN0ZWQuc2l0ZSdcbiAgICBjb25zdCBhZGRyZXNzRG9tYWluID0gYC4ke25vcm1hbGl6ZWRBZGRyZXNzLnJlcGxhY2UoYWxsQ2hhcmFjdGVyQmVmb3JlRmlyc3REb3QsICcnKX1gO1xuICAgIGNvbnN0IHNydkhvc3REb21haW4gPSBgLiR7bm9ybWFsaXplZFNydkhvc3QucmVwbGFjZShhbGxDaGFyYWN0ZXJCZWZvcmVGaXJzdERvdCwgJycpfWA7XG4gICAgcmV0dXJuIGFkZHJlc3NEb21haW4uZW5kc1dpdGgoc3J2SG9zdERvbWFpbik7XG59XG5leHBvcnRzLm1hdGNoZXNQYXJlbnREb21haW4gPSBtYXRjaGVzUGFyZW50RG9tYWluO1xuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdCh1cmksIG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHRpbWVvdXQ6IDEwMDAwLFxuICAgICAgICAgICAganNvbjogdHJ1ZSxcbiAgICAgICAgICAgIC4uLnVybC5wYXJzZSh1cmkpLFxuICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXEgPSBodHRwLnJlcXVlc3QocmVxdWVzdE9wdGlvbnMsIHJlcyA9PiB7XG4gICAgICAgICAgICByZXMuc2V0RW5jb2RpbmcoJ3V0ZjgnKTtcbiAgICAgICAgICAgIGxldCBkYXRhID0gJyc7XG4gICAgICAgICAgICByZXMub24oJ2RhdGEnLCBkID0+IHtcbiAgICAgICAgICAgICAgICBkYXRhICs9IGQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcy5vbmNlKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuanNvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhOT0RFLTM0ODMpXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgZXJyb3JfMS5Nb25nb1J1bnRpbWVFcnJvcihgSW52YWxpZCBKU09OIHJlc3BvbnNlOiBcIiR7ZGF0YX1cImApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcS5vbmNlKCd0aW1lb3V0JywgKCkgPT4gcmVxLmRlc3Ryb3kobmV3IGVycm9yXzEuTW9uZ29OZXR3b3JrVGltZW91dEVycm9yKGBOZXR3b3JrIHJlcXVlc3QgdG8gJHt1cml9IHRpbWVkIG91dCBhZnRlciAke29wdGlvbnMudGltZW91dH0gbXNgKSkpO1xuICAgICAgICByZXEub25jZSgnZXJyb3InLCBlcnJvciA9PiByZWplY3QoZXJyb3IpKTtcbiAgICAgICAgcmVxLmVuZCgpO1xuICAgIH0pO1xufVxuZXhwb3J0cy5yZXF1ZXN0ID0gcmVxdWVzdDtcbi8qKlxuICogQSBjdXN0b20gQWJvcnRDb250cm9sbGVyIHRoYXQgYWJvcnRzIGFmdGVyIGEgc3BlY2lmaWVkIHRpbWVvdXQuXG4gKlxuICogSWYgYHRpbWVvdXRgIGlzIHVuZGVmaW5lZCBvciBcXDw9MCwgdGhlIGFib3J0IGNvbnRyb2xsZXIgbmV2ZXIgYWJvcnRzLlxuICpcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgdHdvIGJlbmVmaXRzIG92ZXIgdGhlIGJ1aWx0LWluIEFib3J0U2lnbmFsLnRpbWVvdXQoKSBtZXRob2QuXG4gKiAtIFRoaXMgY2xhc3MgcHJvdmlkZXMgYSBtZWNoYW5pc20gZm9yIGNhbmNlbGxpbmcgdGhlIHRpbWVvdXRcbiAqIC0gVGhpcyBjbGFzcyBzdXBwb3J0cyBpbmZpbml0ZSB0aW1lb3V0cyBieSBpbnRlcnByZXRpbmcgYSB0aW1lb3V0IG9mIDAgYXMgaW5maW5pdGUuICBUaGlzIGlzXG4gKiAgICBjb25zaXN0ZW50IHdpdGggZXhpc3RpbmcgdGltZW91dCBvcHRpb25zIGluIHRoZSBOb2RlIGRyaXZlciAoc2VydmVyU2VsZWN0aW9uVGltZW91dE1TLCBmb3IgZXhhbXBsZSkuXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgVGltZW91dENvbnRyb2xsZXIgZXh0ZW5kcyBBYm9ydENvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRpbWVvdXQgPSAwLCB0aW1lb3V0SWQgPSB0aW1lb3V0ID4gMCA/ICgwLCB0aW1lcnNfMS5zZXRUaW1lb3V0KSgoKSA9PiB0aGlzLmFib3J0KCksIHRpbWVvdXQpIDogbnVsbCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRpbWVvdXRJZCA9IHRpbWVvdXRJZDtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXRJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAoMCwgdGltZXJzXzEuY2xlYXJUaW1lb3V0KSh0aGlzLnRpbWVvdXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aW1lb3V0SWQgPSBudWxsO1xuICAgIH1cbn1cbmV4cG9ydHMuVGltZW91dENvbnRyb2xsZXIgPSBUaW1lb3V0Q29udHJvbGxlcjtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydHMuRE9DVU1FTlRfREJfQ0hFQ0sgPSAvKFxcLmRvY2RiXFwuYW1hem9uYXdzXFwuY29tJCl8KFxcLmRvY2RiLWVsYXN0aWNcXC5hbWF6b25hd3NcXC5jb20kKS87XG4vKiogQGludGVybmFsICovXG5leHBvcnRzLkNPU01PU19EQl9DSEVDSyA9IC9cXC5jb3Ntb3NcXC5henVyZVxcLmNvbSQvO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5ET0NVTUVOVF9EQl9NU0cgPSAnWW91IGFwcGVhciB0byBiZSBjb25uZWN0ZWQgdG8gYSBEb2N1bWVudERCIGNsdXN0ZXIuIEZvciBtb3JlIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBmZWF0dXJlIGNvbXBhdGliaWxpdHkgYW5kIHN1cHBvcnQgcGxlYXNlIHZpc2l0IGh0dHBzOi8vd3d3Lm1vbmdvZGIuY29tL3N1cHBvcnRhYmlsaXR5L2RvY3VtZW50ZGInO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0cy5DT1NNT1NfREJfTVNHID0gJ1lvdSBhcHBlYXIgdG8gYmUgY29ubmVjdGVkIHRvIGEgQ29zbW9zREIgY2x1c3Rlci4gRm9yIG1vcmUgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGZlYXR1cmUgY29tcGF0aWJpbGl0eSBhbmQgc3VwcG9ydCBwbGVhc2UgdmlzaXQgaHR0cHM6Ly93d3cubW9uZ29kYi5jb20vc3VwcG9ydGFiaWxpdHkvY29zbW9zZGInO1xuLyoqIEBpbnRlcm5hbCAqL1xuZnVuY3Rpb24gaXNIb3N0TWF0Y2gobWF0Y2gsIGhvc3QpIHtcbiAgICByZXR1cm4gaG9zdCAmJiBtYXRjaC50ZXN0KGhvc3QudG9Mb3dlckNhc2UoKSkgPyB0cnVlIDogZmFsc2U7XG59XG5leHBvcnRzLmlzSG9zdE1hdGNoID0gaXNIb3N0TWF0Y2g7XG5mdW5jdGlvbiBwcm9taXNlV2l0aFJlc29sdmVycygpIHtcbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBsZXQgcmVqZWN0O1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiB3aXRoUmVzb2x2ZXJzRXhlY3V0b3IocHJvbWlzZVJlc29sdmUsIHByb21pc2VSZWplY3QpIHtcbiAgICAgICAgcmVzb2x2ZSA9IHByb21pc2VSZXNvbHZlO1xuICAgICAgICByZWplY3QgPSBwcm9taXNlUmVqZWN0O1xuICAgIH0pO1xuICAgIHJldHVybiB7IHByb21pc2UsIHJlc29sdmUsIHJlamVjdCB9O1xufVxuZXhwb3J0cy5wcm9taXNlV2l0aFJlc29sdmVycyA9IHByb21pc2VXaXRoUmVzb2x2ZXJzO1xuZXhwb3J0cy5yYW5kb21CeXRlcyA9ICgwLCB1dGlsXzEucHJvbWlzaWZ5KShjcnlwdG8ucmFuZG9tQnl0ZXMpO1xuLyoqXG4gKiBSZXBsaWNhdGVzIHRoZSBldmVudHMub25jZSBoZWxwZXIuXG4gKlxuICogUmVtb3ZlcyB1bnVzZWQgc2lnbmFsIGxvZ2ljIGFuZCBJdCAqKm9ubHkqKiBzdXBwb3J0cyAwIG9yIDEgYXJndW1lbnQgZXZlbnRzLlxuICpcbiAqIEBwYXJhbSBlZSAtIEFuIGV2ZW50IGVtaXR0ZXIgdGhhdCBtYXkgZW1pdCBgZXZgXG4gKiBAcGFyYW0gbmFtZSAtIEFuIGV2ZW50IG5hbWUgdG8gd2FpdCBmb3JcbiAqL1xuYXN5bmMgZnVuY3Rpb24gb25jZShlZSwgbmFtZSkge1xuICAgIGNvbnN0IHsgcHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0IH0gPSBwcm9taXNlV2l0aFJlc29sdmVycygpO1xuICAgIGNvbnN0IG9uRXZlbnQgPSAoZGF0YSkgPT4gcmVzb2x2ZShkYXRhKTtcbiAgICBjb25zdCBvbkVycm9yID0gKGVycm9yKSA9PiByZWplY3QoZXJyb3IpO1xuICAgIGVlLm9uY2UobmFtZSwgb25FdmVudCkub25jZSgnZXJyb3InLCBvbkVycm9yKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBwcm9taXNlO1xuICAgICAgICBlZS5vZmYoJ2Vycm9yJywgb25FcnJvcik7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBlZS5vZmYobmFtZSwgb25FdmVudCk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbmV4cG9ydHMub25jZSA9IG9uY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJET0NVTUVOVF9EQl9NU0ciLCJDT1NNT1NfREJfQ0hFQ0siLCJET0NVTUVOVF9EQl9DSEVDSyIsIlRpbWVvdXRDb250cm9sbGVyIiwicmVxdWVzdCIsIm1hdGNoZXNQYXJlbnREb21haW4iLCJwYXJzZVVuc2lnbmVkSW50ZWdlciIsInBhcnNlSW50ZWdlciIsImNvbXBhcmVPYmplY3RJZCIsImNvbW1hbmRTdXBwb3J0c1JlYWRDb25jZXJuIiwic2h1ZmZsZSIsInN1cHBvcnRzUmV0cnlhYmxlV3JpdGVzIiwiZW51bVRvU3RyaW5nIiwiZW1pdFdhcm5pbmdPbmNlIiwiZW1pdFdhcm5pbmciLCJNT05HT0RCX1dBUk5JTkdfQ09ERSIsIkRFRkFVTFRfUEtfRkFDVE9SWSIsIkhvc3RBZGRyZXNzIiwiQnVmZmVyUG9vbCIsIkxpc3QiLCJkZWVwQ29weSIsImlzUmVjb3JkIiwic2V0RGlmZmVyZW5jZSIsImlzSGVsbG8iLCJpc1N1cGVyc2V0IiwicmVzb2x2ZU9wdGlvbnMiLCJoYXNBdG9taWNPcGVyYXRvcnMiLCJjYWxjdWxhdGVEdXJhdGlvbkluTXMiLCJub3ciLCJtYWtlU3RhdGVNYWNoaW5lIiwiZXJyb3JTdHJpY3RFcXVhbCIsImFycmF5U3RyaWN0RXF1YWwiLCJtYXhXaXJlVmVyc2lvbiIsInV1aWRWNCIsIm1ha2VDb3VudGVyIiwiTW9uZ29EQkNvbGxlY3Rpb25OYW1lc3BhY2UiLCJNb25nb0RCTmFtZXNwYWNlIiwibnMiLCJnZXRUb3BvbG9neSIsImRlY29yYXRlV2l0aEV4cGxhaW4iLCJkZWNvcmF0ZVdpdGhSZWFkQ29uY2VybiIsImRlY29yYXRlV2l0aENvbGxhdGlvbiIsImlzUHJvbWlzZUxpa2UiLCJhcHBseVJldHJ5YWJsZVdyaXRlcyIsImZpbHRlck9wdGlvbnMiLCJtZXJnZU9wdGlvbnMiLCJpc09iamVjdCIsIm5vcm1hbGl6ZUhpbnRGaWVsZCIsImhvc3RNYXRjaGVzV2lsZGNhcmRzIiwiQnl0ZVV0aWxzIiwib25jZSIsInJhbmRvbUJ5dGVzIiwicHJvbWlzZVdpdGhSZXNvbHZlcnMiLCJpc0hvc3RNYXRjaCIsIkNPU01PU19EQl9NU0ciLCJjcnlwdG8iLCJyZXF1aXJlIiwiaHR0cCIsInRpbWVyc18xIiwidXJsIiwidXJsXzEiLCJ1dGlsXzEiLCJic29uXzEiLCJjb25zdGFudHNfMSIsImNvbnN0YW50c18yIiwiZXJyb3JfMSIsInJlYWRfY29uY2Vybl8xIiwicmVhZF9wcmVmZXJlbmNlXzEiLCJjb21tb25fMSIsIndyaXRlX2NvbmNlcm5fMSIsInRvTG9jYWxCdWZmZXJUeXBlIiwiYnVmZmVyIiwiQnVmZmVyIiwiaXNCdWZmZXIiLCJmcm9tIiwiYnl0ZU9mZnNldCIsImJ5dGVMZW5ndGgiLCJlcXVhbHMiLCJzZXFBIiwic2VxQiIsImNvbXBhcmUiLCJ0b0Jhc2U2NCIsInVpbnQ4YXJyYXkiLCJ0b1N0cmluZyIsImhvc3QiLCJ3aWxkY2FyZHMiLCJ3aWxkY2FyZCIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsInN1YnN0cmluZyIsImxlbmd0aCIsImhpbnQiLCJmaW5hbEhpbnQiLCJ1bmRlZmluZWQiLCJBcnJheSIsImlzQXJyYXkiLCJmb3JFYWNoIiwicGFyYW0iLCJuYW1lIiwiVE9fU1RSSU5HIiwib2JqZWN0IiwicHJvdG90eXBlIiwiY2FsbCIsImFyZyIsInRhcmdldCIsInNvdXJjZSIsIm9wdGlvbnMiLCJuYW1lcyIsImluY2x1ZGVzIiwiZGIiLCJzIiwicmV0cnlXcml0ZXMiLCJ0aGVuIiwiY29tbWFuZCIsImNhcGFiaWxpdGllcyIsImNvbGxhdGlvbiIsImNvbW1hbmRzVGFrZUNvbGxhdGlvbiIsIk1vbmdvQ29tcGF0aWJpbGl0eUVycm9yIiwiY29sbCIsInNlc3Npb24iLCJpblRyYW5zYWN0aW9uIiwicmVhZENvbmNlcm4iLCJhc3NpZ24iLCJrZXlzIiwiZXhwbGFpbiIsInZlcmJvc2l0eSIsInByb3ZpZGVyIiwidG9wb2xvZ3kiLCJjbGllbnQiLCJNb25nb05vdENvbm5lY3RlZEVycm9yIiwiZnJvbVN0cmluZyIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsIndpdGhDb2xsZWN0aW9uIiwibmFtZXNwYWNlIiwiTW9uZ29SdW50aW1lRXJyb3IiLCJjb2xsZWN0aW9uUGFydHMiLCJzcGxpdCIsImpvaW4iLCJzZWVkIiwiY291bnQiLCJuZXdDb3VudCIsInJlc3VsdCIsInRvcG9sb2d5T3JTZXJ2ZXIiLCJsb2FkQmFsYW5jZWQiLCJzZXJ2ZXJBcGkiLCJ2ZXJzaW9uIiwiTUFYX1NVUFBPUlRFRF9XSVJFX1ZFUlNJT04iLCJoZWxsbyIsImxhc3RIZWxsbyIsImRlc2NyaXB0aW9uIiwiYXJyIiwiYXJyMiIsImV2ZXJ5IiwiZWx0IiwiaWR4IiwibGhzIiwicmhzIiwibWVzc2FnZSIsInN0YXRlVGFibGUiLCJzdGF0ZVRyYW5zaXRpb24iLCJuZXdTdGF0ZSIsImxlZ2FsU3RhdGVzIiwic3RhdGUiLCJpbmRleE9mIiwiZW1pdCIsImhydGltZSIsInByb2Nlc3MiLCJNYXRoIiwiZmxvb3IiLCJzdGFydGVkIiwiZWxhcHNlZCIsImRvYyIsImRvY3VtZW50IiwicGFyZW50IiwicmVzb2x2ZUJTT05PcHRpb25zIiwiUmVhZENvbmNlcm4iLCJmcm9tT3B0aW9ucyIsIndyaXRlQ29uY2VybiIsIldyaXRlQ29uY2VybiIsInJlYWRQcmVmZXJlbmNlIiwiUmVhZFByZWZlcmVuY2UiLCJzZXQiLCJzdWJzZXQiLCJTZXQiLCJlbGVtIiwiaGFzIiwiTEVHQUNZX0hFTExPX0NPTU1BTkQiLCJzZXRBIiwic2V0QiIsImRpZmZlcmVuY2UiLCJkZWxldGUiLCJIQVNfT1dOIiwicHJvcCIsImhhc093blByb3BlcnR5IiwicmVxdWlyZWRLZXlzIiwiY3RvciIsIm1hcCIsIml0ZW0iLCJyZXMiLCJrZXkiLCJ0b0xvd2VyQ2FzZSIsIk51bWJlciIsIk1hcCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiaGVhZCIsIm5leHQiLCJwcmV2IiwidG9BcnJheSIsIml0ZXJhdG9yIiwibm9kZSIsIm5vZGVzIiwicHRyIiwicHVzaCIsIm5ld05vZGUiLCJwdXNoTWFueSIsIml0ZXJhYmxlIiwidW5zaGlmdCIsInJlbW92ZSIsInByZXZOb2RlIiwibmV4dE5vZGUiLCJzaGlmdCIsInBvcCIsInBydW5lIiwiZmlsdGVyIiwiY2xlYXIiLCJmaXJzdCIsImxhc3QiLCJidWZmZXJzIiwidG90YWxCeXRlTGVuZ3RoIiwiYXBwZW5kIiwiZ2V0SW50MzIiLCJmaXJzdEJ1ZmZlciIsInJlYWRJbnQzMkxFIiwidG9wNEJ5dGVzIiwicmVhZCIsInNpemUiLCJNb25nb0ludmFsaWRBcmd1bWVudEVycm9yIiwiYWxsb2MiLCJhbGxvY1Vuc2FmZSIsImJ5dGVzUmVhZCIsImJ5dGVzUmVtYWluaW5nIiwiYnl0ZXNSZWFkYWJsZSIsIm1pbiIsImJ5dGVzIiwic3ViYXJyYXkiLCJob3N0U3RyaW5nIiwicG9ydCIsInNvY2tldFBhdGgiLCJpc0lQdjYiLCJlc2NhcGVkSG9zdCIsImRlY29kZVVSSUNvbXBvbmVudCIsInVybFN0cmluZyIsIlVSTCIsInVybEVycm9yIiwicnVudGltZUVycm9yIiwiY2F1c2UiLCJob3N0bmFtZSIsIm5vcm1hbGl6ZWQiLCJwYXJzZUludCIsIk1vbmdvUGFyc2VFcnJvciIsImZyZWV6ZSIsImZvciIsImluc3BlY3QiLCJmcm9tSG9zdFBvcnQiLCJmcm9tU3J2UmVjb3JkIiwidG9Ib3N0UG9ydCIsImNyZWF0ZVBrIiwiT2JqZWN0SWQiLCJjb2RlIiwiZW1pdHRlZFdhcm5pbmdzIiwiYWRkIiwiZW4iLCJ2YWx1ZXMiLCJzZXJ2ZXIiLCJsb2dpY2FsU2Vzc2lvblRpbWVvdXRNaW51dGVzIiwidHlwZSIsIlNlcnZlclR5cGUiLCJTdGFuZGFsb25lIiwic2VxdWVuY2UiLCJsaW1pdCIsIml0ZW1zIiwicmVtYWluaW5nSXRlbXNUb1NodWZmbGUiLCJsb3dlckJvdW5kIiwicmFuZG9tSW5kZXgiLCJyYW5kb20iLCJzd2FwSG9sZCIsInNsaWNlIiwiYWdncmVnYXRlIiwiZGlzdGluY3QiLCJmaW5kIiwiZ2VvTmVhciIsIm9pZDEiLCJvaWQyIiwiaWQiLCJ0cnVuYyIsInBhcnNlZFZhbHVlIiwiU3RyaW5nIiwiaXNOYU4iLCJwYXJzZWRJbnQiLCJhZGRyZXNzIiwic3J2SG9zdCIsIm5vcm1hbGl6ZWRBZGRyZXNzIiwibm9ybWFsaXplZFNydkhvc3QiLCJhbGxDaGFyYWN0ZXJCZWZvcmVGaXJzdERvdCIsImFkZHJlc3NEb21haW4iLCJyZXBsYWNlIiwic3J2SG9zdERvbWFpbiIsInVyaSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxdWVzdE9wdGlvbnMiLCJtZXRob2QiLCJ0aW1lb3V0IiwianNvbiIsInBhcnNlIiwicmVxIiwic2V0RW5jb2RpbmciLCJkYXRhIiwib24iLCJkIiwicGFyc2VkIiwiSlNPTiIsImRlc3Ryb3kiLCJNb25nb05ldHdvcmtUaW1lb3V0RXJyb3IiLCJlcnJvciIsImVuZCIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsImNsZWFyVGltZW91dCIsIm1hdGNoIiwidGVzdCIsInByb21pc2UiLCJ3aXRoUmVzb2x2ZXJzRXhlY3V0b3IiLCJwcm9taXNlUmVzb2x2ZSIsInByb21pc2VSZWplY3QiLCJwcm9taXNpZnkiLCJlZSIsIm9uRXZlbnQiLCJvbkVycm9yIiwib2ZmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/lib/write_concern.js":
/*!***************************************************!*\
  !*** ./node_modules/mongodb/lib/write_concern.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WriteConcern = exports.WRITE_CONCERN_KEYS = void 0;\nexports.WRITE_CONCERN_KEYS = [\n    \"w\",\n    \"wtimeout\",\n    \"j\",\n    \"journal\",\n    \"fsync\"\n];\n/**\n * A MongoDB WriteConcern, which describes the level of acknowledgement\n * requested from MongoDB for write operations.\n * @public\n *\n * @see https://www.mongodb.com/docs/manual/reference/write-concern/\n */ class WriteConcern {\n    /**\n     * Constructs a WriteConcern from the write concern properties.\n     * @param w - request acknowledgment that the write operation has propagated to a specified number of mongod instances or to mongod instances with specified tags.\n     * @param wtimeoutMS - specify a time limit to prevent write operations from blocking indefinitely\n     * @param journal - request acknowledgment that the write operation has been written to the on-disk journal\n     * @param fsync - equivalent to the j option. Is deprecated and will be removed in the next major version.\n     */ constructor(w, wtimeoutMS, journal, fsync){\n        if (w != null) {\n            if (!Number.isNaN(Number(w))) {\n                this.w = Number(w);\n            } else {\n                this.w = w;\n            }\n        }\n        if (wtimeoutMS != null) {\n            this.wtimeoutMS = this.wtimeout = wtimeoutMS;\n        }\n        if (journal != null) {\n            this.journal = this.j = journal;\n        }\n        if (fsync != null) {\n            this.journal = this.j = fsync ? true : false;\n        }\n    }\n    /**\n     * Apply a write concern to a command document. Will modify and return the command.\n     */ static apply(command, writeConcern) {\n        const wc = {};\n        // The write concern document sent to the server has w/wtimeout/j fields.\n        if (writeConcern.w != null) wc.w = writeConcern.w;\n        if (writeConcern.wtimeoutMS != null) wc.wtimeout = writeConcern.wtimeoutMS;\n        if (writeConcern.journal != null) wc.j = writeConcern.j;\n        command.writeConcern = wc;\n        return command;\n    }\n    /** Construct a WriteConcern given an options object. */ static fromOptions(options, inherit) {\n        if (options == null) return undefined;\n        inherit = inherit ?? {};\n        let opts;\n        if (typeof options === \"string\" || typeof options === \"number\") {\n            opts = {\n                w: options\n            };\n        } else if (options instanceof WriteConcern) {\n            opts = options;\n        } else {\n            opts = options.writeConcern;\n        }\n        const parentOpts = inherit instanceof WriteConcern ? inherit : inherit.writeConcern;\n        const { w = undefined, wtimeout = undefined, j = undefined, fsync = undefined, journal = undefined, wtimeoutMS = undefined } = {\n            ...parentOpts,\n            ...opts\n        };\n        if (w != null || wtimeout != null || wtimeoutMS != null || j != null || journal != null || fsync != null) {\n            return new WriteConcern(w, wtimeout ?? wtimeoutMS, j ?? journal, fsync);\n        }\n        return undefined;\n    }\n}\nexports.WriteConcern = WriteConcern; //# sourceMappingURL=write_concern.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbW9uZ29kYi9saWIvd3JpdGVfY29uY2Vybi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0JBQW9CLEdBQUdBLDBCQUEwQixHQUFHLEtBQUs7QUFDekRBLDBCQUEwQixHQUFHO0lBQUM7SUFBSztJQUFZO0lBQUs7SUFBVztDQUFRO0FBQ3ZFOzs7Ozs7Q0FNQyxHQUNELE1BQU1FO0lBQ0Y7Ozs7OztLQU1DLEdBQ0RFLFlBQVlDLENBQUMsRUFBRUMsVUFBVSxFQUFFQyxPQUFPLEVBQUVDLEtBQUssQ0FBRTtRQUN2QyxJQUFJSCxLQUFLLE1BQU07WUFDWCxJQUFJLENBQUNJLE9BQU9DLEtBQUssQ0FBQ0QsT0FBT0osS0FBSztnQkFDMUIsSUFBSSxDQUFDQSxDQUFDLEdBQUdJLE9BQU9KO1lBQ3BCLE9BQ0s7Z0JBQ0QsSUFBSSxDQUFDQSxDQUFDLEdBQUdBO1lBQ2I7UUFDSjtRQUNBLElBQUlDLGNBQWMsTUFBTTtZQUNwQixJQUFJLENBQUNBLFVBQVUsR0FBRyxJQUFJLENBQUNLLFFBQVEsR0FBR0w7UUFDdEM7UUFDQSxJQUFJQyxXQUFXLE1BQU07WUFDakIsSUFBSSxDQUFDQSxPQUFPLEdBQUcsSUFBSSxDQUFDSyxDQUFDLEdBQUdMO1FBQzVCO1FBQ0EsSUFBSUMsU0FBUyxNQUFNO1lBQ2YsSUFBSSxDQUFDRCxPQUFPLEdBQUcsSUFBSSxDQUFDSyxDQUFDLEdBQUdKLFFBQVEsT0FBTztRQUMzQztJQUNKO0lBQ0E7O0tBRUMsR0FDRCxPQUFPSyxNQUFNQyxPQUFPLEVBQUVDLFlBQVksRUFBRTtRQUNoQyxNQUFNQyxLQUFLLENBQUM7UUFDWix5RUFBeUU7UUFDekUsSUFBSUQsYUFBYVYsQ0FBQyxJQUFJLE1BQ2xCVyxHQUFHWCxDQUFDLEdBQUdVLGFBQWFWLENBQUM7UUFDekIsSUFBSVUsYUFBYVQsVUFBVSxJQUFJLE1BQzNCVSxHQUFHTCxRQUFRLEdBQUdJLGFBQWFULFVBQVU7UUFDekMsSUFBSVMsYUFBYVIsT0FBTyxJQUFJLE1BQ3hCUyxHQUFHSixDQUFDLEdBQUdHLGFBQWFILENBQUM7UUFDekJFLFFBQVFDLFlBQVksR0FBR0M7UUFDdkIsT0FBT0Y7SUFDWDtJQUNBLHNEQUFzRCxHQUN0RCxPQUFPRyxZQUFZQyxPQUFPLEVBQUVDLE9BQU8sRUFBRTtRQUNqQyxJQUFJRCxXQUFXLE1BQ1gsT0FBT0U7UUFDWEQsVUFBVUEsV0FBVyxDQUFDO1FBQ3RCLElBQUlFO1FBQ0osSUFBSSxPQUFPSCxZQUFZLFlBQVksT0FBT0EsWUFBWSxVQUFVO1lBQzVERyxPQUFPO2dCQUFFaEIsR0FBR2E7WUFBUTtRQUN4QixPQUNLLElBQUlBLG1CQUFtQmhCLGNBQWM7WUFDdENtQixPQUFPSDtRQUNYLE9BQ0s7WUFDREcsT0FBT0gsUUFBUUgsWUFBWTtRQUMvQjtRQUNBLE1BQU1PLGFBQWFILG1CQUFtQmpCLGVBQWVpQixVQUFVQSxRQUFRSixZQUFZO1FBQ25GLE1BQU0sRUFBRVYsSUFBSWUsU0FBUyxFQUFFVCxXQUFXUyxTQUFTLEVBQUVSLElBQUlRLFNBQVMsRUFBRVosUUFBUVksU0FBUyxFQUFFYixVQUFVYSxTQUFTLEVBQUVkLGFBQWFjLFNBQVMsRUFBRSxHQUFHO1lBQzNILEdBQUdFLFVBQVU7WUFDYixHQUFHRCxJQUFJO1FBQ1g7UUFDQSxJQUFJaEIsS0FBSyxRQUNMTSxZQUFZLFFBQ1pMLGNBQWMsUUFDZE0sS0FBSyxRQUNMTCxXQUFXLFFBQ1hDLFNBQVMsTUFBTTtZQUNmLE9BQU8sSUFBSU4sYUFBYUcsR0FBR00sWUFBWUwsWUFBWU0sS0FBS0wsU0FBU0M7UUFDckU7UUFDQSxPQUFPWTtJQUNYO0FBQ0o7QUFDQXBCLG9CQUFvQixHQUFHRSxjQUN2Qix5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW9uZXotbmV4dGpzLy4vbm9kZV9tb2R1bGVzL21vbmdvZGIvbGliL3dyaXRlX2NvbmNlcm4uanM/MjNiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV3JpdGVDb25jZXJuID0gZXhwb3J0cy5XUklURV9DT05DRVJOX0tFWVMgPSB2b2lkIDA7XG5leHBvcnRzLldSSVRFX0NPTkNFUk5fS0VZUyA9IFsndycsICd3dGltZW91dCcsICdqJywgJ2pvdXJuYWwnLCAnZnN5bmMnXTtcbi8qKlxuICogQSBNb25nb0RCIFdyaXRlQ29uY2Vybiwgd2hpY2ggZGVzY3JpYmVzIHRoZSBsZXZlbCBvZiBhY2tub3dsZWRnZW1lbnRcbiAqIHJlcXVlc3RlZCBmcm9tIE1vbmdvREIgZm9yIHdyaXRlIG9wZXJhdGlvbnMuXG4gKiBAcHVibGljXG4gKlxuICogQHNlZSBodHRwczovL3d3dy5tb25nb2RiLmNvbS9kb2NzL21hbnVhbC9yZWZlcmVuY2Uvd3JpdGUtY29uY2Vybi9cbiAqL1xuY2xhc3MgV3JpdGVDb25jZXJuIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgV3JpdGVDb25jZXJuIGZyb20gdGhlIHdyaXRlIGNvbmNlcm4gcHJvcGVydGllcy5cbiAgICAgKiBAcGFyYW0gdyAtIHJlcXVlc3QgYWNrbm93bGVkZ21lbnQgdGhhdCB0aGUgd3JpdGUgb3BlcmF0aW9uIGhhcyBwcm9wYWdhdGVkIHRvIGEgc3BlY2lmaWVkIG51bWJlciBvZiBtb25nb2QgaW5zdGFuY2VzIG9yIHRvIG1vbmdvZCBpbnN0YW5jZXMgd2l0aCBzcGVjaWZpZWQgdGFncy5cbiAgICAgKiBAcGFyYW0gd3RpbWVvdXRNUyAtIHNwZWNpZnkgYSB0aW1lIGxpbWl0IHRvIHByZXZlbnQgd3JpdGUgb3BlcmF0aW9ucyBmcm9tIGJsb2NraW5nIGluZGVmaW5pdGVseVxuICAgICAqIEBwYXJhbSBqb3VybmFsIC0gcmVxdWVzdCBhY2tub3dsZWRnbWVudCB0aGF0IHRoZSB3cml0ZSBvcGVyYXRpb24gaGFzIGJlZW4gd3JpdHRlbiB0byB0aGUgb24tZGlzayBqb3VybmFsXG4gICAgICogQHBhcmFtIGZzeW5jIC0gZXF1aXZhbGVudCB0byB0aGUgaiBvcHRpb24uIElzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHcsIHd0aW1lb3V0TVMsIGpvdXJuYWwsIGZzeW5jKSB7XG4gICAgICAgIGlmICh3ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKE51bWJlcih3KSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLncgPSBOdW1iZXIodyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLncgPSB3O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh3dGltZW91dE1TICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMud3RpbWVvdXRNUyA9IHRoaXMud3RpbWVvdXQgPSB3dGltZW91dE1TO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqb3VybmFsICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuam91cm5hbCA9IHRoaXMuaiA9IGpvdXJuYWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZzeW5jICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuam91cm5hbCA9IHRoaXMuaiA9IGZzeW5jID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgd3JpdGUgY29uY2VybiB0byBhIGNvbW1hbmQgZG9jdW1lbnQuIFdpbGwgbW9kaWZ5IGFuZCByZXR1cm4gdGhlIGNvbW1hbmQuXG4gICAgICovXG4gICAgc3RhdGljIGFwcGx5KGNvbW1hbmQsIHdyaXRlQ29uY2Vybikge1xuICAgICAgICBjb25zdCB3YyA9IHt9O1xuICAgICAgICAvLyBUaGUgd3JpdGUgY29uY2VybiBkb2N1bWVudCBzZW50IHRvIHRoZSBzZXJ2ZXIgaGFzIHcvd3RpbWVvdXQvaiBmaWVsZHMuXG4gICAgICAgIGlmICh3cml0ZUNvbmNlcm4udyAhPSBudWxsKVxuICAgICAgICAgICAgd2MudyA9IHdyaXRlQ29uY2Vybi53O1xuICAgICAgICBpZiAod3JpdGVDb25jZXJuLnd0aW1lb3V0TVMgIT0gbnVsbClcbiAgICAgICAgICAgIHdjLnd0aW1lb3V0ID0gd3JpdGVDb25jZXJuLnd0aW1lb3V0TVM7XG4gICAgICAgIGlmICh3cml0ZUNvbmNlcm4uam91cm5hbCAhPSBudWxsKVxuICAgICAgICAgICAgd2MuaiA9IHdyaXRlQ29uY2Vybi5qO1xuICAgICAgICBjb21tYW5kLndyaXRlQ29uY2VybiA9IHdjO1xuICAgICAgICByZXR1cm4gY29tbWFuZDtcbiAgICB9XG4gICAgLyoqIENvbnN0cnVjdCBhIFdyaXRlQ29uY2VybiBnaXZlbiBhbiBvcHRpb25zIG9iamVjdC4gKi9cbiAgICBzdGF0aWMgZnJvbU9wdGlvbnMob3B0aW9ucywgaW5oZXJpdCkge1xuICAgICAgICBpZiAob3B0aW9ucyA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgaW5oZXJpdCA9IGluaGVyaXQgPz8ge307XG4gICAgICAgIGxldCBvcHRzO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBvcHRpb25zID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgb3B0cyA9IHsgdzogb3B0aW9ucyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBXcml0ZUNvbmNlcm4pIHtcbiAgICAgICAgICAgIG9wdHMgPSBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0cyA9IG9wdGlvbnMud3JpdGVDb25jZXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmVudE9wdHMgPSBpbmhlcml0IGluc3RhbmNlb2YgV3JpdGVDb25jZXJuID8gaW5oZXJpdCA6IGluaGVyaXQud3JpdGVDb25jZXJuO1xuICAgICAgICBjb25zdCB7IHcgPSB1bmRlZmluZWQsIHd0aW1lb3V0ID0gdW5kZWZpbmVkLCBqID0gdW5kZWZpbmVkLCBmc3luYyA9IHVuZGVmaW5lZCwgam91cm5hbCA9IHVuZGVmaW5lZCwgd3RpbWVvdXRNUyA9IHVuZGVmaW5lZCB9ID0ge1xuICAgICAgICAgICAgLi4ucGFyZW50T3B0cyxcbiAgICAgICAgICAgIC4uLm9wdHNcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHcgIT0gbnVsbCB8fFxuICAgICAgICAgICAgd3RpbWVvdXQgIT0gbnVsbCB8fFxuICAgICAgICAgICAgd3RpbWVvdXRNUyAhPSBudWxsIHx8XG4gICAgICAgICAgICBqICE9IG51bGwgfHxcbiAgICAgICAgICAgIGpvdXJuYWwgIT0gbnVsbCB8fFxuICAgICAgICAgICAgZnN5bmMgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBXcml0ZUNvbmNlcm4odywgd3RpbWVvdXQgPz8gd3RpbWVvdXRNUywgaiA/PyBqb3VybmFsLCBmc3luYyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG5leHBvcnRzLldyaXRlQ29uY2VybiA9IFdyaXRlQ29uY2Vybjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdyaXRlX2NvbmNlcm4uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiV3JpdGVDb25jZXJuIiwiV1JJVEVfQ09OQ0VSTl9LRVlTIiwiY29uc3RydWN0b3IiLCJ3Iiwid3RpbWVvdXRNUyIsImpvdXJuYWwiLCJmc3luYyIsIk51bWJlciIsImlzTmFOIiwid3RpbWVvdXQiLCJqIiwiYXBwbHkiLCJjb21tYW5kIiwid3JpdGVDb25jZXJuIiwid2MiLCJmcm9tT3B0aW9ucyIsIm9wdGlvbnMiLCJpbmhlcml0IiwidW5kZWZpbmVkIiwib3B0cyIsInBhcmVudE9wdHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/mongodb/lib/write_concern.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/mongodb/package.json":
/*!*******************************************!*\
  !*** ./node_modules/mongodb/package.json ***!
  \*******************************************/
/***/ ((module) => {

module.exports = JSON.parse('{"name":"mongodb","version":"6.5.0","description":"The official MongoDB driver for Node.js","main":"lib/index.js","files":["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],"types":"mongodb.d.ts","repository":{"type":"git","url":"git@github.com:mongodb/node-mongodb-native.git"},"keywords":["mongodb","driver","official"],"author":{"name":"The MongoDB NodeJS Team","email":"dbx-node@mongodb.com"},"dependencies":{"@mongodb-js/saslprep":"^1.1.5","bson":"^6.4.0","mongodb-connection-string-url":"^3.0.0"},"peerDependencies":{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0","gcp-metadata":"^5.2.0","kerberos":"^2.0.1","mongodb-client-encryption":">=6.0.0 <7","snappy":"^7.2.2","socks":"^2.7.1"},"peerDependenciesMeta":{"@aws-sdk/credential-providers":{"optional":true},"@mongodb-js/zstd":{"optional":true},"kerberos":{"optional":true},"snappy":{"optional":true},"mongodb-client-encryption":{"optional":true},"gcp-metadata":{"optional":true},"socks":{"optional":true}},"devDependencies":{"@aws-sdk/credential-providers":"^3.515.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.40.6","@microsoft/tsdoc-config":"^0.16.2","@mongodb-js/zstd":"^1.2.0","@octokit/core":"^5.1.0","@types/chai":"^4.3.11","@types/chai-subset":"^1.3.5","@types/express":"^4.17.21","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.6","@types/node":"^20.11.20","@types/saslprep":"^1.0.3","@types/semver":"^7.5.7","@types/sinon":"^10.0.20","@types/sinon-chai":"^3.2.12","@types/whatwg-url":"^11.0.4","@typescript-eslint/eslint-plugin":"^5.62.0","@typescript-eslint/parser":"^5.62.0","chai":"^4.4.1","chai-subset":"^1.6.0","chalk":"^4.1.2","eslint":"^8.56.0","eslint-config-prettier":"^8.10.0","eslint-plugin-import":"^2.29.1","eslint-plugin-prettier":"^4.2.1","eslint-plugin-simple-import-sort":"^10.0.0","eslint-plugin-tsdoc":"^0.2.17","eslint-plugin-unused-imports":"^2.0.0","express":"^4.18.2","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0","mocha":"^10.3.0","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.0.0","mongodb-legacy":"^6.0.1","nyc":"^15.1.0","prettier":"^2.8.8","semver":"^7.6.0","sinon":"^15.2.0","sinon-chai":"^3.7.0","snappy":"^7.2.2","socks":"^2.8.1","source-map-support":"^0.5.21","ts-node":"^10.9.2","tsd":"^0.30.6","typescript":"5.0","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1","yargs":"^17.7.2"},"license":"Apache-2.0","engines":{"node":">=16.20.1"},"bugs":{"url":"https://jira.mongodb.org/projects/NODE/issues/"},"homepage":"https://github.com/mongodb/node-mongodb-native","scripts":{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && eslint mongodb.d.ts --fix","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"node test/benchmarks/driverBench","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"eslint -v && eslint --max-warnings=0 --ext \'.js,.ts\' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.json test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.json test/integration","check:unit":"mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"mocha --config test/manual/mocharc.json test/manual/atlas_connectivity.test.js","check:drivers-atlas-testing":"mocha --config test/mocha_mongodb.json test/atlas/drivers_atlas_testing.test.ts","check:adl":"mocha --config test/mocha_mongodb.json test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_aws.test.ts","check:oidc":"mocha --config test/mocha_mongodb.json test/manual/mongodb_oidc.prose.test.ts","check:oidc-azure":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_azure.prose.test.ts","check:ocsp":"mocha --config test/manual/mocharc.json test/manual/ocsp_support.test.js","check:kerberos":"nyc mocha --config test/manual/mocharc.json test/manual/kerberos.test.ts","check:tls":"mocha --config test/manual/mocharc.json test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.json test/manual/ldap.test.js","check:socks5":"mocha --config test/manual/mocharc.json test/manual/socks5.test.ts","check:csfle":"mocha --config test/mocha_mongodb.json test/integration/client-side-encryption","check:snappy":"mocha test/unit/assorted/snappy.test.js","fix:eslint":"npm run check:eslint -- --fix","prepare":"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts","test":"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},"tsd":{"directory":"test/types","compilerOptions":{"strict":true,"target":"esnext","module":"commonjs","moduleResolution":"node"}}}');

/***/ })

};
;